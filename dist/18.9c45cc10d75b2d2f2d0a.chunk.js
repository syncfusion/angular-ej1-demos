webpackJsonp([18],{1006:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getFoodInformation=function(){return[{FoodId:1,Time:"8:40 AM",FoodName:"CHEESE BURGER",Calorie:100,Protein:15,Fat:15,Carbohydrate:28},{FoodId:2,Time:"10:30 AM",FoodName:"PIZZA",Calorie:100,Protein:15,Fat:9,Carbohydrate:39},{FoodId:3,Time:"12:45 PM",FoodName:"CHICKEN NOODLE",Calorie:50,Protein:4,Fat:2,Carbohydrate:9},{FoodId:4,Time:"5:30 PM",FoodName:"YOGURT",Calorie:75,Protein:10,Fat:2,Carbohydrate:43},{FoodId:5,Time:"9:00 PM",FoodName:"BEEF SANDWICH",Calorie:125,Protein:22,Fat:13,Carbohydrate:34},{FoodId:6,Time:"11:00 PM",FoodName:"CHICKEN BURGER",Calorie:100,Protein:15,Fat:10,Carbohydrate:25}]},e.prototype.getEmployees=function(){return[{EmployeeID:1,LastName:"Davolio",FirstName:"Nancy",Title:"Sales Representative",TitleOfCourtesy:"Ms.",BirthDate:new Date(-6647328e5),HireDate:new Date(7047036e5),Address:"507 - 20th Ave. E.\r\nApt. 2A",City:"Seattle",Region:"WA",PostalCode:"98122",Country:"USA",HomePhone:"(206) 555-9857",Extension:"5467",Photo:{Length:21626},Notes:'Education includes a BA in psychology from Colorado State University in 1970.  She also completed "The Art of the Cold Call."  Nancy is a member of Toastmasters International.',ReportsTo:2,PhotoPath:"http://accweb/emmployees/davolio.bmp"},{EmployeeID:2,LastName:"Fuller",FirstName:"Andrew",Title:"Vice President, Sales",TitleOfCourtesy:"Dr.",BirthDate:new Date(-5638176e5),HireDate:new Date(7137756e5),Address:"908 W. Capital Way",City:"Tacoma",Region:"WA",PostalCode:"98401",Country:"USA",HomePhone:"(206) 555-9482",Extension:"3457",Photo:{Length:21626},Notes:"Andrew received his BTS commercial in 1974 and a Ph.D. in international marketing from the University of Dallas in 1981.  He is fluent in French and Italian and reads German.  He joined the company as a sales representative, was promoted to sales manager in January 1992 and to vice president of sales in March 1993.  Andrew is a member of the Sales Management Roundtable, the Seattle Chamber of Commerce, and the Pacific Rim Importers Association.",ReportsTo:null,PhotoPath:"http://accweb/emmployees/fuller.bmp"},{EmployeeID:3,LastName:"Leverling",FirstName:"Janet",Title:"Sales Representative",TitleOfCourtesy:"Ms.",BirthDate:new Date(-2000772e5),HireDate:new Date(7021152e5),Address:"722 Moss Bay Blvd.",City:"Kirkland",Region:"WA",PostalCode:"98033",Country:"USA",HomePhone:"(206) 555-3412",Extension:"3355",Photo:{Length:21722},Notes:"Janet has a BS degree in chemistry from Boston College (1984).  She has also completed a certificate program in food retailing management.  Janet was hired as a sales associate in 1991 and promoted to sales representative in February 1992.",ReportsTo:2,PhotoPath:"http://accweb/emmployees/leverling.bmp"},{EmployeeID:4,LastName:"Peacock",FirstName:"Margaret",Title:"Sales Representative",TitleOfCourtesy:"Mrs.",BirthDate:new Date(-10188036e5),HireDate:new Date(7364124e5),Address:"4110 Old Redmond Rd.",City:"Redmond",Region:"WA",PostalCode:"98052",Country:"USA",HomePhone:"(206) 555-8122",Extension:"5176",Photo:{Length:21626},Notes:"Margaret holds a BA in English literature from Concordia College (1958) and an MA from the American Institute of Culinary Arts (1966).  She was assigned to the London office temporarily from July through November 1992.",ReportsTo:2,PhotoPath:"http://accweb/emmployees/peacock.bmp"},{EmployeeID:5,LastName:"Buchanan",FirstName:"Steven",Title:"Sales Manager",TitleOfCourtesy:"Mr.",BirthDate:new Date(-468e9),HireDate:new Date(7508412e5),Address:"14 Garrett Hill",City:"London",Region:null,PostalCode:"SW1 8JR",Country:"UK",HomePhone:"(71) 555-4848",Extension:"3453",Photo:{Length:21626},Notes:'Steven Buchanan graduated from St. Andrews University, Scotland, with a BSC degree in 1976.  Upon joining the company as a sales representative in 1992, he spent 6 months in an orientation program at the Seattle office and then returned to his permanent post in London.  He was promoted to sales manager in March 1993.  Mr. Buchanan has completed the courses "Successful Telemarketing" and "International Sales Management."  He is fluent in French.',ReportsTo:2,PhotoPath:"http://accweb/emmployees/buchanan.bmp"},{EmployeeID:6,LastName:"Suyama",FirstName:"Michael",Title:"Sales Representative",TitleOfCourtesy:"Mr.",BirthDate:new Date(-2051748e5),HireDate:new Date(7508412e5),Address:"Coventry House\r\nMiner Rd.",City:"London",Region:null,PostalCode:"EC2 7JR",Country:"UK",HomePhone:"(71) 555-7773",Extension:"428",Photo:{Length:21626},Notes:'Michael is a graduate of Sussex University (MA, economics, 1983) and the University of California at Los Angeles (MBA, marketing, 1986).  He has also taken the courses "Multi-Cultural Selling" and "Time Management for the Sales Professional."  He is fluent in Japanese and can read and write French, Portuguese, and Spanish.',ReportsTo:5,PhotoPath:"http://accweb/emmployees/davolio.bmp"},{EmployeeID:7,LastName:"King",FirstName:"Robert",Title:"Sales Representative",TitleOfCourtesy:"Mr.",BirthDate:new Date(-3027204e5),HireDate:new Date(7574976e5),Address:"Edgeham Hollow\r\nWinchester Way",City:"London",Region:null,PostalCode:"RG1 9SP",Country:"UK",HomePhone:"(71) 555-5598",Extension:"465",Photo:{Length:21626},Notes:'Robert King served in the Peace Corps and traveled extensively before completing his degree in English at the University of Michigan in 1992, the year he joined the company.  After completing a course entitled "Selling in Europe," he was transferred to the London office in March 1993.',ReportsTo:5,PhotoPath:"http://accweb/emmployees/davolio.bmp"},{EmployeeID:8,LastName:"Callahan",FirstName:"Laura",Title:"Inside Sales Coordinator",TitleOfCourtesy:"Ms.",BirthDate:new Date(-3779712e5),HireDate:new Date(7628544e5),Address:"4726 - 11th Ave. N.E.",City:"Seattle",Region:"WA",PostalCode:"98105",Country:"USA",HomePhone:"(206) 555-1189",Extension:"2344",Photo:{Length:21626},Notes:"Laura received a BA in psychology from the University of Washington.  She has also completed a course in business French.  She reads and writes French.",ReportsTo:2,PhotoPath:"http://accweb/emmployees/davolio.bmp"},{EmployeeID:9,LastName:"Dodsworth",FirstName:"Anne",Title:"Sales Representative",TitleOfCourtesy:"Ms.",BirthDate:new Date(-1239552e5),HireDate:new Date(7848864e5),Address:"7 Houndstooth Rd.",City:"London",Region:null,PostalCode:"WG2 7LT",Country:"UK",HomePhone:"(71) 555-4444",Extension:"452",Photo:{Length:21626},Notes:"Anne has a BA degree in English from St. Lawrence College.  She is fluent in French and German.",ReportsTo:5,PhotoPath:"http://accweb/emmployees/davolio.bmp"}]},e.prototype.getOrders=function(){return[{OrderID:10280,CustomerID:"BERGS",EmployeeID:2,OrderDate:new Date(840006e6),RequiredDate:new Date(8424252e5),ShippedDate:new Date(8425116e5),ShipVia:1,Freight:8.98,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10265,CustomerID:"BLONP",EmployeeID:2,OrderDate:new Date(838278e6),RequiredDate:new Date(8406972e5),ShippedDate:new Date(8398332e5),ShipVia:1,Freight:55.28,ShipName:"Blondel père et fils",ShipAddress:"24, place Kléber",ShipCity:"Strasbourg",ShipRegion:null,ShipPostalCode:"67000",ShipCountry:"France",CompanyName:"Blondesddsl père et fils",Address:"24, place Kléber",City:"Strasbourg",Region:null,PostalCode:"67000",Country:"France"},{OrderID:10663,CustomerID:"BONAP",EmployeeID:2,OrderDate:new Date(8738748e5),RequiredDate:new Date(8750844e5),ShippedDate:new Date(875862e6),ShipVia:2,Freight:113.15,ShipName:"Bon app'",ShipAddress:"12, rue des Bouchers",ShipCity:"Marseille",ShipRegion:null,ShipPostalCode:"13008",ShipCountry:"France",CompanyName:"Bon app'",Address:"12, rue des Bouchers",City:"Marseille",Region:null,PostalCode:"13008",Country:"France"},{OrderID:10949,CustomerID:"BOTTM",EmployeeID:2,OrderDate:new Date(889776e6),RequiredDate:new Date(8921916e5),ShippedDate:new Date(8901216e5),ShipVia:3,Freight:74.44,ShipName:"Bottom-Dollar Markets",ShipAddress:"23 Tsawassen Blvd.",ShipCity:"Tsawassen",ShipRegion:"BC",ShipPostalCode:"T2F 8M4",ShipCountry:"Canada",CompanyName:"Bottom-Dollar Markets",Address:"23 Tsawassen Blvd.",City:"Tsawassen",Region:"BC",PostalCode:"T2F 8M4",Country:"Canada"},{OrderID:10982,CustomerID:"BOTTM",EmployeeID:2,OrderDate:new Date(8909856e5),RequiredDate:new Date(8934012e5),ShippedDate:new Date(8920188e5),ShipVia:1,Freight:14.01,ShipName:"Bottom-Dollar Markets",ShipAddress:"23 Tsawassen Blvd.",ShipCity:"Tsawassen",ShipRegion:"BC",ShipPostalCode:"T2F 8M4",ShipCountry:"Canada",CompanyName:"Bottom-Dollar Markets",Address:"23 Tsawassen Blvd.",City:"Tsawassen",Region:"BC",PostalCode:"T2F 8M4",Country:"Canada"},{OrderID:10471,CustomerID:"BSBEV",EmployeeID:2,OrderDate:new Date(8580672e5),RequiredDate:new Date(8604828e5),ShippedDate:new Date(858672e6),ShipVia:3,Freight:45.59,ShipName:"B's Beverages",ShipAddress:"Fauntleroy Circus",ShipCity:"London",ShipRegion:null,ShipPostalCode:"EC2 5NT",ShipCountry:"UK",CompanyName:"B's Beverages",Address:"Fauntleroy Circus",City:"London",Region:null,PostalCode:"EC2 5NT",Country:"UK"},{OrderID:10819,CustomerID:"CACTU",EmployeeID:2,OrderDate:new Date(88416e7),RequiredDate:new Date(8865792e5),ShippedDate:new Date(8849376e5),ShipVia:3,Freight:19.76,ShipName:"Cactus Comidas para llevar",ShipAddress:"Cerrito 333",ShipCity:"Buenos Aires",ShipRegion:null,ShipPostalCode:"1010",ShipCountry:"Argentina",CompanyName:"Cactus Comidas para llevar",Address:"Cerrito 333",City:"Buenos Aires",Region:null,PostalCode:"1010",Country:"Argentina"},{OrderID:11042,CustomerID:"COMMI",EmployeeID:2,OrderDate:new Date(8932284e5),RequiredDate:new Date(894438e6),ShippedDate:new Date(894006e6),ShipVia:1,Freight:29.99,ShipName:"Comércio Mineiro",ShipAddress:"Av. dos Lusíadas, 23",ShipCity:"Sao Paulo",ShipRegion:"SP",ShipPostalCode:"05432-043",ShipCountry:"Brazil",CompanyName:"Comércio Mineiro",Address:"Av. dos Lusíadas, 23",City:"Sao Paulo",Region:"SP",PostalCode:"05432-043",Country:"Brazil"},{OrderID:10462,CustomerID:"CONSH",EmployeeID:2,OrderDate:new Date(857376e6),RequiredDate:new Date(8597952e5),ShippedDate:new Date(858672e6),ShipVia:1,Freight:6.17,ShipName:"Consolidated Holdings",ShipAddress:"Berkeley Gardens 12  Brewery",ShipCity:"London",ShipRegion:null,ShipPostalCode:"WX1 6LT",ShipCountry:"UK",CompanyName:"Consolidated Holdings",Address:"Berkeley Gardens 12  Brewery",City:"London",Region:null,PostalCode:"WX1 6LT",Country:"UK"},{OrderID:10683,CustomerID:"DUMON",EmployeeID:2,OrderDate:new Date(8752572e5),RequiredDate:new Date(8776764e5),ShippedDate:new Date(8756892e5),ShipVia:1,Freight:4.4,ShipName:"Du monde entier",ShipAddress:"67, rue des Cinquante Otages",ShipCity:"Nantes",ShipRegion:null,ShipPostalCode:"44000",ShipCountry:"France",CompanyName:"Du monde entier",Address:"67, rue des Cinquante Otages",City:"Nantes",Region:null,PostalCode:"44000",Country:"France"},{OrderID:10595,CustomerID:"ERNSH",EmployeeID:2,OrderDate:new Date(868518e6),RequiredDate:new Date(8709372e5),ShippedDate:new Date(8688636e5),ShipVia:1,Freight:96.78,ShipName:"Ernst Handel",ShipAddress:"Kirchgasse 6",ShipCity:"Graz",ShipRegion:null,ShipPostalCode:"8010",ShipCountry:"Austria",CompanyName:"Ernst Handel",Address:"Kirchgasse 6",City:"Graz",Region:null,PostalCode:"8010",Country:"Austria"},{OrderID:10368,CustomerID:"ERNSH",EmployeeID:2,OrderDate:new Date(8492544e5),RequiredDate:new Date(8516736e5),ShippedDate:new Date(8495136e5),ShipVia:2,Freight:101.95,ShipName:"Ernst Handel",ShipAddress:"Kirchgasse 6",ShipCity:"Graz",ShipRegion:null,ShipPostalCode:"8010",ShipCountry:"Austria",CompanyName:"Ernst Handel",Address:"Kirchgasse 6",City:"Graz",Region:null,PostalCode:"8010",Country:"Austria"},{OrderID:10835,CustomerID:"ALFKI",EmployeeID:1,OrderDate:new Date(8848512e5),RequiredDate:new Date(8872704e5),ShippedDate:new Date(8853696e5),ShipVia:3,Freight:69.53,ShipName:"Alfred's Futterkiste",ShipAddress:"Obere Str. 57",ShipCity:"Berlin",ShipRegion:null,ShipPostalCode:"12209",ShipCountry:"Germany",CompanyName:"Alfreds Futterkiste",Address:"Obere Str. 57",City:"Berlin",Region:null,PostalCode:"12209",Country:"Germany"},{OrderID:10952,CustomerID:"ALFKI",EmployeeID:1,OrderDate:new Date(8900352e5),RequiredDate:new Date(8936604e5),ShippedDate:new Date(8907264e5),ShipVia:1,Freight:40.42,ShipName:"Alfred's Futterkiste",ShipAddress:"Obere Str. 57",ShipCity:"Berlin",ShipRegion:null,ShipPostalCode:"12209",ShipCountry:"Germany",CompanyName:"Alfreds Futterkiste",Address:"Obere Str. 57",City:"Berlin",Region:null,PostalCode:"12209",Country:"Germany"},{OrderID:10677,CustomerID:"ANTON",EmployeeID:1,OrderDate:new Date(8749116e5),RequiredDate:new Date(8773308e5),ShippedDate:new Date(8752572e5),ShipVia:3,Freight:4.03,ShipName:"Antonio Moreno Taquería",ShipAddress:"Mataderos  2312",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05023",ShipCountry:"Mexico",CompanyName:"Antonio Moreno Taquería",Address:"Mataderos  2312",City:"México D.F.",Region:null,PostalCode:"05023",Country:"Mexico"},{OrderID:10558,CustomerID:"AROUT",EmployeeID:1,OrderDate:new Date(8654076e5),RequiredDate:new Date(8678268e5),ShippedDate:new Date(865926e6),ShipVia:2,Freight:72.97,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10453,CustomerID:"AROUT",EmployeeID:1,OrderDate:new Date(856512e6),RequiredDate:new Date(8589312e5),ShippedDate:new Date(856944e6),ShipVia:2,Freight:25.36,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10743,CustomerID:"AROUT",EmployeeID:1,OrderDate:new Date(8797536e5),RequiredDate:new Date(8821728e5),ShippedDate:new Date(8800992e5),ShipVia:2,Freight:23.72,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10733,CustomerID:"BERGS",EmployeeID:1,OrderDate:new Date(8788896e5),RequiredDate:new Date(8813088e5),ShippedDate:new Date(8791488e5),ShipVia:3,Freight:110.11,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10524,CustomerID:"BERGS",EmployeeID:1,OrderDate:new Date(86247e7),RequiredDate:new Date(8648892e5),ShippedDate:new Date(8629884e5),ShipVia:2,Freight:244.79,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10626,CustomerID:"BERGS",EmployeeID:1,OrderDate:new Date(8712828e5),RequiredDate:new Date(873702e6),ShippedDate:new Date(8720604e5),ShipVia:2,Freight:138.69,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10689,CustomerID:"BERGS",EmployeeID:1,OrderDate:new Date(8756892e5),RequiredDate:new Date(878112e6),ShippedDate:new Date(8762076e5),ShipVia:2,Freight:13.42,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10525,CustomerID:"BONAP",EmployeeID:1,OrderDate:new Date(8625564e5),RequiredDate:new Date(8649756e5),ShippedDate:new Date(8643708e5),ShipVia:2,Freight:11.06,ShipName:"Bon app'",ShipAddress:"12, rue des Bouchers",ShipCity:"Marseille",ShipRegion:null,ShipPostalCode:"13008",ShipCountry:"France",CompanyName:"Bon app'",Address:"12, rue des Bouchers",City:"Marseille",Region:null,PostalCode:"13008",Country:"France"},{OrderID:10340,CustomerID:"BONAP",EmployeeID:1,OrderDate:new Date(846576e6),RequiredDate:new Date(8489952e5),ShippedDate:new Date(84744e7),ShipVia:3,Freight:166.31,ShipName:"Bon app'",ShipAddress:"12, rue des Bouchers",ShipCity:"Marseille",ShipRegion:null,ShipPostalCode:"13008",ShipCountry:"France",CompanyName:"Bon app'",Address:"12, rue des Bouchers",City:"Marseille",Region:null,PostalCode:"13008",Country:"France"},{OrderID:11011,CustomerID:"ALFKI",EmployeeID:3,OrderDate:new Date(8921052e5),RequiredDate:new Date(8945244e5),ShippedDate:new Date(8924508e5),ShipVia:1,Freight:1.21,ShipName:"Alfred's Futterkiste",ShipAddress:"Obere Str. 57",ShipCity:"Berlin",ShipRegion:null,ShipPostalCode:"12209",ShipCountry:"Germany",CompanyName:"Alfreds Futterkiste",Address:"Obere Str. 57",City:"Berlin",Region:null,PostalCode:"12209",Country:"Germany"},{OrderID:10759,CustomerID:"ANATR",EmployeeID:3,OrderDate:new Date(880704e6),RequiredDate:new Date(8831232e5),ShippedDate:new Date(8819136e5),ShipVia:3,Freight:11.99,ShipName:"Ana Trujillo Emparedados y helados",ShipAddress:"Avda. de la Constitución 2222",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05021",ShipCountry:"Mexico",CompanyName:"Ana Trujillo Emparedados y helados",Address:"Avda. de la Constitución 2222",City:"México D.F.",Region:null,PostalCode:"05021",Country:"Mexico"},{OrderID:10625,CustomerID:"ANATR",EmployeeID:3,OrderDate:new Date(8710236e5),RequiredDate:new Date(8734428e5),ShippedDate:new Date(871542e6),ShipVia:1,Freight:43.9,ShipName:"Ana Trujillo Emparedados y helados",ShipAddress:"Avda. de la Constitución 2222",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05021",ShipCountry:"Mexico",CompanyName:"Ana Trujillo Emparedados y helados",Address:"Avda. de la Constitución 2222",City:"México D.F.",Region:null,PostalCode:"05021",Country:"Mexico"},{OrderID:10682,CustomerID:"ANTON",EmployeeID:3,OrderDate:new Date(8751708e5),RequiredDate:new Date(87759e7),ShippedDate:new Date(8756892e5),ShipVia:2,Freight:36.13,ShipName:"Antonio Moreno Taquería",ShipAddress:"Mataderos  2312",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05023",ShipCountry:"Mexico",CompanyName:"Antonio Moreno Taquería",Address:"Mataderos  2312",City:"México D.F.",Region:null,PostalCode:"05023",Country:"Mexico"},{OrderID:10365,CustomerID:"ANTON",EmployeeID:3,OrderDate:new Date(8490816e5),RequiredDate:new Date(8515008e5),ShippedDate:new Date(8495136e5),ShipVia:2,Freight:22,ShipName:"Antonio Moreno Taquería",ShipAddress:"Mataderos  2312",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05023",ShipCountry:"Mexico",CompanyName:"Antonio Moreno Taquería",Address:"Mataderos  2312",City:"México D.F.",Region:null,PostalCode:"05023",Country:"Mexico"},{OrderID:10856,CustomerID:"ANTON",EmployeeID:3,OrderDate:new Date(8859744e5),RequiredDate:new Date(8883936e5),ShippedDate:new Date(8870976e5),ShipVia:2,Freight:58.43,ShipName:"Antonio Moreno Taquería",ShipAddress:"Mataderos  2312",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05023",ShipCountry:"Mexico",CompanyName:"Antonio Moreno Taquería",Address:"Mataderos  2312",City:"México D.F.",Region:null,PostalCode:"05023",Country:"Mexico"},{OrderID:10768,CustomerID:"AROUT",EmployeeID:3,OrderDate:new Date(881568e6),RequiredDate:new Date(8839872e5),ShippedDate:new Date(8821728e5),ShipVia:2,Freight:146.32,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10793,CustomerID:"AROUT",EmployeeID:3,OrderDate:new Date(8829504e5),RequiredDate:new Date(8853696e5),ShippedDate:new Date(8842464e5),ShipVia:3,Freight:4.52,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10778,CustomerID:"BERGS",EmployeeID:3,OrderDate:new Date(8822592e5),RequiredDate:new Date(8846784e5),ShippedDate:new Date(8829504e5),ShipVia:1,Freight:6.79,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10924,CustomerID:"BERGS",EmployeeID:3,OrderDate:new Date(8889984e5),RequiredDate:new Date(8914176e5),ShippedDate:new Date(8920188e5),ShipVia:2,Freight:151.52,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10384,CustomerID:"BERGS",EmployeeID:3,OrderDate:new Date(8507232e5),RequiredDate:new Date(8531424e5),ShippedDate:new Date(8510688e5),ShipVia:3,Freight:168.64,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10444,CustomerID:"BERGS",EmployeeID:3,OrderDate:new Date(8557344e5),RequiredDate:new Date(8581536e5),ShippedDate:new Date(856512e6),ShipVia:3,Freight:3.5,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10692,CustomerID:"ALFKI",EmployeeID:4,OrderDate:new Date(875862e6),RequiredDate:new Date(8782848e5),ShippedDate:new Date(876726e6),ShipVia:2,Freight:61.02,ShipName:"Alfred's Futterkiste",ShipAddress:"Obere Str. 57",ShipCity:"Berlin",ShipRegion:null,ShipPostalCode:"12209",ShipCountry:"Germany",CompanyName:"Alfreds Futterkiste",Address:"Obere Str. 57",City:"Berlin",Region:null,PostalCode:"12209",Country:"Germany"},{OrderID:10702,CustomerID:"ALFKI",EmployeeID:4,OrderDate:new Date(876726e6),RequiredDate:new Date(8803584e5),ShippedDate:new Date(8774172e5),ShipVia:1,Freight:23.94,ShipName:"Alfred's Futterkiste",ShipAddress:"Obere Str. 57",ShipCity:"Berlin",ShipRegion:null,ShipPostalCode:"12209",ShipCountry:"Germany",CompanyName:"Alfreds Futterkiste",Address:"Obere Str. 57",City:"Berlin",Region:null,PostalCode:"12209",Country:"Germany"},{OrderID:10926,CustomerID:"ANATR",EmployeeID:4,OrderDate:new Date(8889984e5),RequiredDate:new Date(8914176e5),ShippedDate:new Date(8896032e5),ShipVia:3,Freight:39.92,ShipName:"Ana Trujillo Emparedados y helados",ShipAddress:"Avda. de la Constitución 2222",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05021",ShipCountry:"Mexico",CompanyName:"Ana Trujillo Emparedados y helados",Address:"Avda. de la Constitución 2222",City:"México D.F.",Region:null,PostalCode:"05021",Country:"Mexico"},{OrderID:10535,CustomerID:"ANTON",EmployeeID:4,OrderDate:new Date(8635068e5),RequiredDate:new Date(865926e6),ShippedDate:new Date(864198e6),ShipVia:1,Freight:15.64,ShipName:"Antonio Moreno Taquería",ShipAddress:"Mataderos  2312",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05023",ShipCountry:"Mexico",CompanyName:"Antonio Moreno Taquería",Address:"Mataderos  2312",City:"México D.F.",Region:null,PostalCode:"05023",Country:"Mexico"},{OrderID:10864,CustomerID:"AROUT",EmployeeID:4,OrderDate:new Date(8864064e5),RequiredDate:new Date(8888256e5),ShippedDate:new Date(8870112e5),ShipVia:2,Freight:3.04,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10707,CustomerID:"AROUT",EmployeeID:4,OrderDate:new Date(8769852e5),RequiredDate:new Date(8781984e5),ShippedDate:new Date(87759e7),ShipVia:3,Freight:21.74,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10741,CustomerID:"AROUT",EmployeeID:4,OrderDate:new Date(8794944e5),RequiredDate:new Date(880704e6),ShippedDate:new Date(87984e7),ShipVia:3,Freight:10.96,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10920,CustomerID:"AROUT",EmployeeID:4,OrderDate:new Date(888912e6),RequiredDate:new Date(8913312e5),ShippedDate:new Date(8894304e5),ShipVia:2,Freight:29.61,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10875,CustomerID:"BERGS",EmployeeID:4,OrderDate:new Date(886752e6),RequiredDate:new Date(8891712e5),ShippedDate:new Date(888912e6),ShipVia:2,Freight:32.37,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10509,CustomerID:"BLAUS",EmployeeID:4,OrderDate:new Date(8612604e5),RequiredDate:new Date(8636796e5),ShippedDate:new Date(8622972e5),ShipVia:1,Freight:.15,ShipName:"Blauer See Delikatessen",ShipAddress:"Forsterstr. 57",ShipCity:"Mannheim",ShipRegion:null,ShipPostalCode:"68306",ShipCountry:"Germany",CompanyName:"Blauer See Delikatessen",Address:"Forsterstr. 57",City:"Mannheim",Region:null,PostalCode:"68306",Country:"Germany"},{OrderID:10584,CustomerID:"BLONP",EmployeeID:4,OrderDate:new Date(867654e6),RequiredDate:new Date(8700732e5),ShippedDate:new Date(8679996e5),ShipVia:1,Freight:59.14,ShipName:"Blondel père et fils",ShipAddress:"24, place Kléber",ShipCity:"Strasbourg",ShipRegion:null,ShipPostalCode:"67000",ShipCountry:"France",CompanyName:"Blondesddsl père et fils",Address:"24, place Kléber",City:"Strasbourg",Region:null,PostalCode:"67000",Country:"France"},{OrderID:10360,CustomerID:"BLONP",EmployeeID:4,OrderDate:new Date(8486496e5),RequiredDate:new Date(8510688e5),ShippedDate:new Date(8495136e5),ShipVia:3,Freight:131.7,ShipName:"Blondel père et fils",ShipAddress:"24, place Kléber",ShipCity:"Strasbourg",ShipRegion:null,ShipPostalCode:"67000",ShipCountry:"France",CompanyName:"Blondesddsl père et fils",Address:"24, place Kléber",City:"Strasbourg",Region:null,PostalCode:"67000",Country:"France"},{OrderID:10654,CustomerID:"BERGS",EmployeeID:5,OrderDate:new Date(8731836e5),RequiredDate:new Date(8756028e5),ShippedDate:new Date(8739612e5),ShipVia:1,Freight:55.26,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10866,CustomerID:"BERGS",EmployeeID:5,OrderDate:new Date(8864928e5),RequiredDate:new Date(888912e6),ShippedDate:new Date(8872704e5),ShipVia:1,Freight:109.11,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10297,CustomerID:"BLONP",EmployeeID:5,OrderDate:new Date(8418204e5),RequiredDate:new Date(8454492e5),ShippedDate:new Date(8423388e5),ShipVia:2,Freight:5.74,ShipName:"Blondel père et fils",ShipAddress:"24, place Kléber",ShipCity:"Strasbourg",ShipRegion:null,ShipPostalCode:"67000",ShipCountry:"France",CompanyName:"Blondesddsl père et fils",Address:"24, place Kléber",City:"Strasbourg",Region:null,PostalCode:"67000",Country:"France"},{OrderID:10730,CustomerID:"BONAP",EmployeeID:5,OrderDate:new Date(8787168e5),RequiredDate:new Date(881136e6),ShippedDate:new Date(8794944e5),ShipVia:1,Freight:20.12,ShipName:"Bon app'",ShipAddress:"12, rue des Bouchers",ShipCity:"Marseille",ShipRegion:null,ShipPostalCode:"13008",ShipCountry:"France",CompanyName:"Bon app'",Address:"12, rue des Bouchers",City:"Marseille",Region:null,PostalCode:"13008",Country:"France"},{OrderID:10254,CustomerID:"CHOPS",EmployeeID:5,OrderDate:new Date(8370684e5),RequiredDate:new Date(8394876e5),ShippedDate:new Date(8381052e5),ShipVia:2,Freight:22.98,ShipName:"Chop-suey Chinese",ShipAddress:"Hauptstr. 31",ShipCity:"Bern",ShipRegion:null,ShipPostalCode:"3012",ShipCountry:"Switzerland",CompanyName:"Chop-suey Chinese",Address:"Hauptstr. 29",City:"Bern",Region:null,PostalCode:"3012",Country:"Switzerland"},{OrderID:10650,CustomerID:"FAMIA",EmployeeID:5,OrderDate:new Date(872838e6),RequiredDate:new Date(8752572e5),ShippedDate:new Date(87327e7),ShipVia:3,Freight:176.81,ShipName:"Familia Arquibaldo",ShipAddress:"Rua Orós, 92",ShipCity:"Sao Paulo",ShipRegion:"SP",ShipPostalCode:"05442-030",ShipCountry:"Brazil",CompanyName:"Familia Arquibaldo",Address:"Rua Orós, 92",City:"Sao Paulo",Region:"SP",PostalCode:"05442-030",Country:"Brazil"},{OrderID:10378,CustomerID:"FOLKO",EmployeeID:5,OrderDate:new Date(8502048e5),RequiredDate:new Date(852624e6),ShippedDate:new Date(8509824e5),ShipVia:3,Freight:5.44,ShipName:"Folk och fä HB",ShipAddress:"Åkergatan 24",ShipCity:"Bräcke",ShipRegion:null,ShipPostalCode:"S-844 67",ShipCountry:"Sweden",CompanyName:"Folk och fä HB",Address:"Åkergatan 24",City:"Bräcke",Region:null,PostalCode:"S-844 67",Country:"Sweden"},{OrderID:10675,CustomerID:"FRANK",EmployeeID:5,OrderDate:new Date(8746524e5),RequiredDate:new Date(8770716e5),ShippedDate:new Date(874998e6),ShipVia:2,Freight:31.85,ShipName:"Frankenversand",ShipAddress:"Berliner Platz 43",ShipCity:"München",ShipRegion:null,ShipPostalCode:"80805",ShipCountry:"Germany",CompanyName:"Frankenversand",Address:"Berliner Platz 43",City:"München",Region:null,PostalCode:"80805",Country:"Germany"},{OrderID:10872,CustomerID:"GODOS",EmployeeID:5,OrderDate:new Date(8866656e5),RequiredDate:new Date(8890848e5),ShippedDate:new Date(8870112e5),ShipVia:2,Freight:175.32,ShipName:"Godos Cocina Típica",ShipAddress:"C/ Romero, 33",ShipCity:"Sevilla",ShipRegion:null,ShipPostalCode:"41101",ShipCountry:"Spain",CompanyName:"Godos Cocina Típica",Address:"C/ Romero, 33",City:"Sevilla",Region:null,PostalCode:"41101",Country:"Spain"},{OrderID:10874,CustomerID:"GODOS",EmployeeID:5,OrderDate:new Date(886752e6),RequiredDate:new Date(8891712e5),ShippedDate:new Date(887184e6),ShipVia:2,Freight:19.58,ShipName:"Godos Cocina Típica",ShipAddress:"C/ Romero, 33",ShipCity:"Sevilla",ShipRegion:null,ShipPostalCode:"41101",ShipCountry:"Spain",CompanyName:"Godos Cocina Típica",Address:"C/ Romero, 33",City:"Sevilla",Region:null,PostalCode:"41101",Country:"Spain"},{OrderID:10922,CustomerID:"HANAR",EmployeeID:5,OrderDate:new Date(888912e6),RequiredDate:new Date(8913312e5),ShippedDate:new Date(8890848e5),ShipVia:3,Freight:62.74,ShipName:"Hanari Carnes",ShipAddress:"Rua do Paço, 67",ShipCity:"Rio de Janeiro",ShipRegion:"RJ",ShipPostalCode:"05454-876",ShipCountry:"Brazil",CompanyName:"Hanari Carnes",Address:"Rua do Paço, 67",City:"Rio de Janeiro",Region:"RJ",PostalCode:"05454-876",Country:"Brazil"},{OrderID:10358,CustomerID:"LAMAI",EmployeeID:5,OrderDate:new Date(8484768e5),RequiredDate:new Date(850896e6),ShippedDate:new Date(8490816e5),ShipVia:1,Freight:19.64,ShipName:"La maison d'Asie",ShipAddress:"1 rue Alsace-Lorraine",ShipCity:"Toulouse",ShipRegion:null,ShipPostalCode:"31000",ShipCountry:"France",CompanyName:"La maison d'Asie",Address:"1 rue Alsace-Lorraine",City:"Toulouse",Region:null,PostalCode:"31000",Country:"France"},{OrderID:10249,CustomerID:"TOMSP",EmployeeID:6,OrderDate:new Date(83655e7),RequiredDate:new Date(8401788e5),ShippedDate:new Date(836982e6),ShipVia:1,Freight:11.61,ShipName:"Toms Spezialitäten",ShipAddress:"Luisenstr. 48",ShipCity:"Münster",ShipRegion:null,ShipPostalCode:"44087",ShipCountry:"Germany",CompanyName:"Toms Spezialitäten",Address:"Luisenstr. 48",City:"Münster",Region:null,PostalCode:"44087",Country:"Germany"},{OrderID:10264,CustomerID:"FOLKO",EmployeeID:6,OrderDate:new Date(8381916e5),RequiredDate:new Date(8406108e5),ShippedDate:new Date(8407836e5),ShipVia:3,Freight:3.67,ShipName:"Folk och fä HB",ShipAddress:"Åkergatan 24",ShipCity:"Bräcke",ShipRegion:null,ShipPostalCode:"S-844 67",ShipCountry:"Sweden",CompanyName:"Folk och fä HB",Address:"Åkergatan 24",City:"Bräcke",Region:null,PostalCode:"S-844 67",Country:"Sweden"},{OrderID:10271,CustomerID:"SPLIR",EmployeeID:6,OrderDate:new Date(8388828e5),RequiredDate:new Date(841302e6),ShippedDate:new Date(8413884e5),ShipVia:2,Freight:4.54,ShipName:"Split Rail Beer & Ale",ShipAddress:"P.O. Box 555",ShipCity:"Lander",ShipRegion:"WY",ShipPostalCode:"82520",ShipCountry:"USA",CompanyName:"Split Rail Beer & Ale",Address:"P.O. Box 555",City:"Lander",Region:"WY",PostalCode:"82520",Country:"USA"},{OrderID:10272,CustomerID:"RATTC",EmployeeID:6,OrderDate:new Date(8389692e5),RequiredDate:new Date(8413884e5),ShippedDate:new Date(8393148e5),ShipVia:2,Freight:98.03,ShipName:"Rattlesnake Canyon Grocery",ShipAddress:"2817 Milton Dr.",ShipCity:"Albuquerque",ShipRegion:"NM",ShipPostalCode:"87110",ShipCountry:"USA",CompanyName:"Rattlesnake Canyon Grocery",Address:"2817 Milton Dr.",City:"Albuquerque",Region:"NM",PostalCode:"87110",Country:"USA"},{OrderID:10274,CustomerID:"VINET",EmployeeID:6,OrderDate:new Date(8393148e5),RequiredDate:new Date(841734e6),ShippedDate:new Date(8401788e5),ShipVia:1,Freight:6.01,ShipName:"Vins et alcools Chevalier",ShipAddress:"59 rue de l'Abbaye",ShipCity:"Reims",ShipRegion:null,ShipPostalCode:"51100",ShipCountry:"France",CompanyName:"Vins et alcools Chevalier",Address:"59 rue de l'Abbaye",City:"Reims",Region:null,PostalCode:"51100",Country:"France"},{OrderID:10291,CustomerID:"QUEDE",EmployeeID:6,OrderDate:new Date(8411292e5),RequiredDate:new Date(8435484e5),ShippedDate:new Date(8418204e5),ShipVia:2,Freight:6.4,ShipName:"Que Delícia",ShipAddress:"Rua da Panificadora, 12",ShipCity:"Rio de Janeiro",ShipRegion:"RJ",ShipPostalCode:"02389-673",ShipCountry:"Brazil",CompanyName:"Que Delícia",Address:"Rua da Panificadora, 12",City:"Rio de Janeiro",Region:"RJ",PostalCode:"02389-673",Country:"Brazil"},{OrderID:10296,CustomerID:"LILAS",EmployeeID:6,OrderDate:new Date(841734e6),RequiredDate:new Date(8441532e5),ShippedDate:new Date(8424252e5),ShipVia:1,Freight:.12,ShipName:"LILA-Supermercado",ShipAddress:"Carrera 52 con Ave. Bolívar #65-98 Llano Largo",ShipCity:"Barquisimeto",ShipRegion:"Lara",ShipPostalCode:"3508",ShipCountry:"Venezuela",CompanyName:"LILA-Supermercado",Address:"Carrera 52 con Ave. Bolívar #65-98 Llano Largo",City:"Barquisimeto",Region:"Lara",PostalCode:"3508",Country:"Venezuela"},{OrderID:10298,CustomerID:"HUNGO",EmployeeID:6,OrderDate:new Date(8419068e5),RequiredDate:new Date(844326e6),ShippedDate:new Date(8424252e5),ShipVia:2,Freight:168.22,ShipName:"Hungry Owl All-Night Grocers",ShipAddress:"8 Johnstown Road",ShipCity:"Cork",ShipRegion:"Co. Cork",ShipPostalCode:null,ShipCountry:"Ireland",CompanyName:"Hungry Owl All-Night Grocers",Address:"8 Johnstown Road",City:"Cork",Region:"Co. Cork",PostalCode:null,Country:"Ireland"},{OrderID:10317,CustomerID:"LONEP",EmployeeID:6,OrderDate:new Date(8440668e5),RequiredDate:new Date(8464896e5),ShippedDate:new Date(8449308e5),ShipVia:1,Freight:12.69,ShipName:"Lonesome Pine Restaurant",ShipAddress:"89 Chiaroscuro Rd.",ShipCity:"Portland",ShipRegion:"OR",ShipPostalCode:"97219",ShipCountry:"USA",CompanyName:"Lonesome Pine Restaurant",Address:"89 Chiaroscuro Rd.",City:"Portland",Region:"OR",PostalCode:"97219",Country:"USA"},{OrderID:10350,CustomerID:"LAMAI",EmployeeID:6,OrderDate:new Date(8476992e5),RequiredDate:new Date(8501184e5),ShippedDate:new Date(8496e8),ShipVia:2,Freight:64.19,ShipName:"La maison d'Asie",ShipAddress:"1 rue Alsace-Lorraine",ShipCity:"Toulouse",ShipRegion:null,ShipPostalCode:"31000",ShipCountry:"France",CompanyName:"La maison d'Asie",Address:"1 rue Alsace-Lorraine",City:"Toulouse",Region:null,PostalCode:"31000",Country:"France"},{OrderID:10355,CustomerID:"AROUT",EmployeeID:6,OrderDate:new Date(8480448e5),RequiredDate:new Date(850464e6),ShippedDate:new Date(8484768e5),ShipVia:1,Freight:41.95,ShipName:"Around the Horn",ShipAddress:"Brook Farm Stratford St. Mary",ShipCity:"Colchester",ShipRegion:"Essex",ShipPostalCode:"CO7 6JX",ShipCountry:"UK",CompanyName:"Around the Horn",Address:"120 Hanover Sq.",City:"London",Region:null,PostalCode:"WA1 1DP",Country:"UK"},{OrderID:10356,CustomerID:"WANDK",EmployeeID:6,OrderDate:new Date(848304e6),RequiredDate:new Date(8507232e5),ShippedDate:new Date(8490816e5),ShipVia:2,Freight:36.71,ShipName:"Die Wandernde Kuh",ShipAddress:"Adenauerallee 900",ShipCity:"Stuttgart",ShipRegion:null,ShipPostalCode:"70563",ShipCountry:"Germany",CompanyName:"Die Wandernde Kuh",Address:"Adenauerallee 900",City:"Stuttgart",Region:null,PostalCode:"70563",Country:"Germany"},{OrderID:10289,CustomerID:"BSBEV",EmployeeID:7,OrderDate:new Date(8410428e5),RequiredDate:new Date(843462e6),ShippedDate:new Date(8412156e5),ShipVia:3,Freight:22.77,ShipName:"B's Beverages",ShipAddress:"Fauntleroy Circus",ShipCity:"London",ShipRegion:null,ShipPostalCode:"EC2 5NT",ShipCountry:"UK",CompanyName:"B's Beverages",Address:"Fauntleroy Circus",City:"London",Region:null,PostalCode:"EC2 5NT",Country:"UK"},{OrderID:10303,CustomerID:"GODOS",EmployeeID:7,OrderDate:new Date(8424252e5),RequiredDate:new Date(8448444e5),ShippedDate:new Date(84303e7),ShipVia:2,Freight:107.83,ShipName:"Godos Cocina Típica",ShipAddress:"C/ Romero, 33",ShipCity:"Sevilla",ShipRegion:null,ShipPostalCode:"41101",ShipCountry:"Spain",CompanyName:"Godos Cocina Típica",Address:"C/ Romero, 33",City:"Sevilla",Region:null,PostalCode:"41101",Country:"Spain"},{OrderID:10308,CustomerID:"ANATR",EmployeeID:7,OrderDate:new Date(84303e7),RequiredDate:new Date(8454492e5),ShippedDate:new Date(8435484e5),ShipVia:3,Freight:1.61,ShipName:"Ana Trujillo Emparedados y helados",ShipAddress:"Avda. de la Constitución 2222",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05021",ShipCountry:"Mexico",CompanyName:"Ana Trujillo Emparedados y helados",Address:"Avda. de la Constitución 2222",City:"México D.F.",Region:null,PostalCode:"05021",Country:"Mexico"},{OrderID:10319,CustomerID:"TORTU",EmployeeID:7,OrderDate:new Date(8442396e5),RequiredDate:new Date(8466624e5),ShippedDate:new Date(8450172e5),ShipVia:3,Freight:64.5,ShipName:"Tortuga Restaurante",ShipAddress:"Avda. Azteca 123",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05033",ShipCountry:"Mexico",CompanyName:"Tortuga Restaurante",Address:"Avda. Azteca 123",City:"México D.F.",Region:null,PostalCode:"05033",Country:"Mexico"},{OrderID:10322,CustomerID:"PERIC",EmployeeID:7,OrderDate:new Date(8444124e5),RequiredDate:new Date(8468352e5),ShippedDate:new Date(846054e6),ShipVia:3,Freight:.4,ShipName:"Pericles Comidas clásicas",ShipAddress:"Calle Dr. Jorge Cash 321",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05033",ShipCountry:"Mexico",CompanyName:"Pericles Comidas clásicas",Address:"Calle Dr. Jorge Cash 321",City:"México D.F.",Region:null,PostalCode:"05033",Country:"Mexico"},{OrderID:10335,CustomerID:"HUNGO",EmployeeID:7,OrderDate:new Date(8459676e5),RequiredDate:new Date(8483904e5),ShippedDate:new Date(8461404e5),ShipVia:2,Freight:42.11,ShipName:"Hungry Owl All-Night Grocers",ShipAddress:"8 Johnstown Road",ShipCity:"Cork",ShipRegion:"Co. Cork",ShipPostalCode:null,ShipCountry:"Ireland",CompanyName:"Hungry Owl All-Night Grocers",Address:"8 Johnstown Road",City:"Cork",Region:"Co. Cork",PostalCode:null,Country:"Ireland"},{OrderID:10336,CustomerID:"PRINI",EmployeeID:7,OrderDate:new Date(846054e6),RequiredDate:new Date(8484768e5),ShippedDate:new Date(8462268e5),ShipVia:2,Freight:15.51,ShipName:"Princesa Isabel Vinhos",ShipAddress:"Estrada da saúde n. 58",ShipCity:"Lisboa",ShipRegion:null,ShipPostalCode:"1756",ShipCountry:"Portugal",CompanyName:"Princesa Isabel Vinhos",Address:"Estrada da saúde n. 58",City:"Lisboa",Region:null,PostalCode:"1756",Country:"Portugal"},{OrderID:10341,CustomerID:"SIMOB",EmployeeID:7,OrderDate:new Date(846576e6),RequiredDate:new Date(8489952e5),ShippedDate:new Date(8471808e5),ShipVia:3,Freight:26.78,ShipName:"Simons bistro",ShipAddress:"Vinbæltet 34",ShipCity:"Kobenhavn",ShipRegion:null,ShipPostalCode:"1734",ShipCountry:"Denmark",CompanyName:"Simons bistro",Address:"Vinbæltet 34",City:"Kobenhavn",Region:null,PostalCode:"1734",Country:"Denmark"},{OrderID:10349,CustomerID:"SPLIR",EmployeeID:7,OrderDate:new Date(84744e7),RequiredDate:new Date(8498592e5),ShippedDate:new Date(8480448e5),ShipVia:1,Freight:8.63,ShipName:"Split Rail Beer & Ale",ShipAddress:"P.O. Box 555",ShipCity:"Lander",ShipRegion:"WY",ShipPostalCode:"82520",ShipCountry:"USA",CompanyName:"Split Rail Beer & Ale",Address:"P.O. Box 555",City:"Lander",Region:"WY",PostalCode:"82520",Country:"USA"},{OrderID:10353,CustomerID:"PICCO",EmployeeID:7,OrderDate:new Date(847872e6),RequiredDate:new Date(8502912e5),ShippedDate:new Date(8489088e5),ShipVia:3,Freight:360.63,ShipName:"Piccolo und mehr",ShipAddress:"Geislweg 14",ShipCity:"Salzburg",ShipRegion:null,ShipPostalCode:"5020",ShipCountry:"Austria",CompanyName:"Piccolo und mehr",Address:"Geislweg 14",City:"Salzburg",Region:null,PostalCode:"5020",Country:"Austria"},{OrderID:10367,CustomerID:"VAFFE",EmployeeID:7,OrderDate:new Date(849168e6),RequiredDate:new Date(8515872e5),ShippedDate:new Date(8495136e5),ShipVia:3,Freight:13.55,ShipName:"Vaffeljernet",ShipAddress:"Smagsloget 45",ShipCity:"Århus",ShipRegion:null,ShipPostalCode:"8200",ShipCountry:"Denmark",CompanyName:"Vaffeljernet",Address:"Smagsloget 45",City:"Århus",Region:null,PostalCode:"8200",Country:"Denmark"},{OrderID:10406,CustomerID:"QUEEN",EmployeeID:7,OrderDate:new Date(852624e6),RequiredDate:new Date(8562528e5),ShippedDate:new Date(8531424e5),ShipVia:1,Freight:108.04,ShipName:"Queen Cozinha",ShipAddress:"Alameda dos Canàrios, 891",ShipCity:"Sao Paulo",ShipRegion:"SP",ShipPostalCode:"05487-020",ShipCountry:"Brazil",CompanyName:"Queen Cozinha",Address:"Alameda dos Canàrios, 891",City:"Sao Paulo",Region:"SP",PostalCode:"05487-020",Country:"Brazil"},{OrderID:10262,CustomerID:"RATTC",EmployeeID:8,OrderDate:new Date(8380188e5),RequiredDate:new Date(840438e6),ShippedDate:new Date(838278e6),ShipVia:3,Freight:48.29,ShipName:"Rattlesnake Canyon Grocery",ShipAddress:"2817 Milton Dr.",ShipCity:"Albuquerque",ShipRegion:"NM",ShipPostalCode:"87110",ShipCountry:"USA",CompanyName:"Rattlesnake Canyon Grocery",Address:"2817 Milton Dr.",City:"Albuquerque",Region:"NM",PostalCode:"87110",Country:"USA"},{OrderID:10268,CustomerID:"GROSR",EmployeeID:8,OrderDate:new Date(83871e7),RequiredDate:new Date(8411292e5),ShippedDate:new Date(8389692e5),ShipVia:3,Freight:66.29,ShipName:"GROSELLA-Restaurante",ShipAddress:"5ª Ave. Los Palos Grandes",ShipCity:"Caracas",ShipRegion:"DF",ShipPostalCode:"1081",ShipCountry:"Venezuela",CompanyName:"GROSELLA-Restaurante",Address:"5ª Ave. Los Palos Grandes",City:"Caracas",Region:"DF",PostalCode:"1081",Country:"Venezuela"},{OrderID:10276,CustomerID:"TORTU",EmployeeID:8,OrderDate:new Date(8394876e5),RequiredDate:new Date(8406972e5),ShippedDate:new Date(840006e6),ShipVia:3,Freight:13.84,ShipName:"Tortuga Restaurante",ShipAddress:"Avda. Azteca 123",ShipCity:"México D.F.",ShipRegion:null,ShipPostalCode:"05033",ShipCountry:"Mexico",CompanyName:"Tortuga Restaurante",Address:"Avda. Azteca 123",City:"México D.F.",Region:null,PostalCode:"05033",Country:"Mexico"},{OrderID:10278,CustomerID:"BERGS",EmployeeID:8,OrderDate:new Date(8398332e5),RequiredDate:new Date(8422524e5),ShippedDate:new Date(8401788e5),ShipVia:2,Freight:92.69,ShipName:"Berglunds snabbköp",ShipAddress:"Berguvsvägen  8",ShipCity:"Luleå",ShipRegion:null,ShipPostalCode:"S-958 22",ShipCountry:"Sweden",CompanyName:"Berglunds snabbköp",Address:"Berguvsvägen  8",City:"Luleå",Region:null,PostalCode:"S-958 22",Country:"Sweden"},{OrderID:10279,CustomerID:"LEHMS",EmployeeID:8,OrderDate:new Date(8399196e5),RequiredDate:new Date(8423388e5),ShippedDate:new Date(8401788e5),ShipVia:2,Freight:25.83,ShipName:"Lehmanns Marktstand",ShipAddress:"Magazinweg 7",ShipCity:"Frankfurt a.M.",ShipRegion:null,ShipPostalCode:"60528",ShipCountry:"Germany",CompanyName:"Lehmanns Marktstand",Address:"Magazinweg 7",City:"Frankfurt a.M.",Region:null,PostalCode:"60528",Country:"Germany"},{OrderID:10286,CustomerID:"QUICK",EmployeeID:8,OrderDate:new Date(8406108e5),RequiredDate:new Date(84303e7),ShippedDate:new Date(8413884e5),ShipVia:3,Freight:229.24,ShipName:"QUICK-Stop",ShipAddress:"Taucherstraße 10",ShipCity:"Cunewalde",ShipRegion:null,ShipPostalCode:"01307",ShipCountry:"Germany",CompanyName:"QUICK-Stop",Address:"Taucherstraße 10",City:"Cunewalde",Region:null,PostalCode:"01307",Country:"Germany"},{OrderID:10287,CustomerID:"RICAR",EmployeeID:8,OrderDate:new Date(8406972e5),RequiredDate:new Date(8431164e5),ShippedDate:new Date(8412156e5),ShipVia:3,Freight:12.76,ShipName:"Ricardo Adocicados",ShipAddress:"Av. Copacabana, 267",ShipCity:"Rio de Janeiro",ShipRegion:"RJ",ShipPostalCode:"02389-890",ShipCountry:"Brazil",CompanyName:"Ricardo Adocicados",Address:"Av. Copacabana, 267",City:"Rio de Janeiro",Region:"RJ",PostalCode:"02389-890",Country:"Brazil"},{OrderID:10290,CustomerID:"COMMI",EmployeeID:8,OrderDate:new Date(8411292e5),RequiredDate:new Date(8435484e5),ShippedDate:new Date(841734e6),ShipVia:1,Freight:79.7,ShipName:"Comércio Mineiro",ShipAddress:"Av. dos Lusíadas, 23",ShipCity:"Sao Paulo",ShipRegion:"SP",ShipPostalCode:"05432-043",ShipCountry:"Brazil",CompanyName:"Comércio Mineiro",Address:"Av. dos Lusíadas, 23",City:"Sao Paulo",Region:"SP",PostalCode:"05432-043",Country:"Brazil"},{OrderID:10301,CustomerID:"WANDK",EmployeeID:8,OrderDate:new Date(8422524e5),RequiredDate:new Date(8446716e5),ShippedDate:new Date(8429436e5),ShipVia:2,Freight:45.08,ShipName:"Die Wandernde Kuh",ShipAddress:"Adenauerallee 900",ShipCity:"Stuttgart",ShipRegion:null,ShipPostalCode:"70563",ShipCountry:"Germany",CompanyName:"Die Wandernde Kuh",Address:"Adenauerallee 900",City:"Stuttgart",Region:null,PostalCode:"70563",Country:"Germany"},{OrderID:10305,CustomerID:"OLDWO",EmployeeID:8,OrderDate:new Date(842598e6),RequiredDate:new Date(8450172e5),ShippedDate:new Date(8448444e5),ShipVia:3,Freight:257.62,ShipName:"Old World Delicatessen",ShipAddress:"2743 Bering St.",ShipCity:"Anchorage",ShipRegion:"AK",ShipPostalCode:"99508",ShipCountry:"USA",CompanyName:"Old World Delicatessen",Address:"2743 Bering St.",City:"Anchorage",Region:"AK",PostalCode:"99508",Country:"USA"},{OrderID:10310,CustomerID:"THEBI",EmployeeID:8,OrderDate:new Date(8432028e5),RequiredDate:new Date(845622e6),ShippedDate:new Date(8438076e5),ShipVia:2,Freight:17.52,ShipName:"The Big Cheese",ShipAddress:"89 Jefferson Way Suite 2",ShipCity:"Portland",ShipRegion:"OR",ShipPostalCode:"97201",ShipCountry:"USA",CompanyName:"The Big Cheese",Address:"89 Jefferson Way Suite 2",City:"Portland",Region:"OR",PostalCode:"97201",Country:"USA"},{OrderID:10318,CustomerID:"ISLAT",EmployeeID:8,OrderDate:new Date(8441532e5),RequiredDate:new Date(846576e6),ShippedDate:new Date(8444124e5),ShipVia:2,Freight:4.73,ShipName:"Island Trading",ShipAddress:"Garden House Crowther Way",ShipCity:"Cowes",ShipRegion:"Isle of Wight",ShipPostalCode:"PO31 7PJ",ShipCountry:"UK",CompanyName:"Island Trading",Address:"Garden House Crowther Way",City:"Cowes",Region:"Isle of Wight",PostalCode:"PO31 7PJ",Country:"UK"},{OrderID:10255,CustomerID:"RICSU",EmployeeID:9,OrderDate:new Date(8371548e5),RequiredDate:new Date(839574e6),ShippedDate:new Date(837414e6),ShipVia:3,Freight:148.33,ShipName:"Richter Supermarkt",ShipAddress:"Starenweg 5",ShipCity:"Genève",ShipRegion:null,ShipPostalCode:"1204",ShipCountry:"Switzerland",CompanyName:"Richter Supermarkt",Address:"Grenzacherweg 237",City:"Genève",Region:null,PostalCode:"1203",Country:"Switzerland"},{OrderID:10263,CustomerID:"ERNSH",EmployeeID:9,OrderDate:new Date(8381052e5),RequiredDate:new Date(8405244e5),ShippedDate:new Date(8387964e5),ShipVia:3,Freight:146.06,ShipName:"Ernst Handel",ShipAddress:"Kirchgasse 6",ShipCity:"Graz",ShipRegion:null,ShipPostalCode:"8010",ShipCountry:"Austria",CompanyName:"Ernst Handel",Address:"Kirchgasse 6",City:"Graz",Region:null,PostalCode:"8010",Country:"Austria"},{OrderID:10324,CustomerID:"SAVEA",EmployeeID:9,OrderDate:new Date(844758e6),RequiredDate:new Date(8471808e5),ShippedDate:new Date(8449308e5),ShipVia:1,Freight:214.27,ShipName:"Save-a-lot Markets",ShipAddress:"187 Suffolk Ln.",ShipCity:"Boise",ShipRegion:"ID",ShipPostalCode:"83720",ShipCountry:"USA",CompanyName:"Save-a-lot Markets",Address:"187 Suffolk Ln.",City:"Boise",Region:"ID",PostalCode:"83720",Country:"USA"},{OrderID:10331,CustomerID:"BONAP",EmployeeID:9,OrderDate:new Date(8454492e5),RequiredDate:new Date(8490816e5),ShippedDate:new Date(8458812e5),ShipVia:1,Freight:10.19,ShipName:"Bon app'",ShipAddress:"12, rue des Bouchers",ShipCity:"Marseille",ShipRegion:null,ShipPostalCode:"13008",ShipCountry:"France",CompanyName:"Bon app'",Address:"12, rue des Bouchers",City:"Marseille",Region:null,PostalCode:"13008",Country:"France"},{OrderID:10386,CustomerID:"FAMIA",EmployeeID:9,OrderDate:new Date(850896e6),RequiredDate:new Date(8521056e5),ShippedDate:new Date(8515008e5),ShipVia:3,Freight:13.99,ShipName:"Familia Arquibaldo",ShipAddress:"Rua Orós, 92",ShipCity:"Sao Paulo",ShipRegion:"SP",ShipPostalCode:"05442-030",ShipCountry:"Brazil",CompanyName:"Familia Arquibaldo",Address:"Rua Orós, 92",City:"Sao Paulo",Region:"SP",PostalCode:"05442-030",Country:"Brazil"},{OrderID:10411,CustomerID:"BOTTM",EmployeeID:9,OrderDate:new Date(8528832e5),RequiredDate:new Date(8553024e5),ShippedDate:new Date(8538336e5),ShipVia:3,Freight:23.65,ShipName:"Bottom-Dollar Markets",ShipAddress:"23 Tsawassen Blvd.",ShipCity:"Tsawassen",ShipRegion:"BC",ShipPostalCode:"T2F 8M4",ShipCountry:"Canada",CompanyName:"Bottom-Dollar Markets",Address:"23 Tsawassen Blvd.",City:"Tsawassen",Region:"BC",PostalCode:"T2F 8M4",Country:"Canada"},{OrderID:10475,CustomerID:"SUPRD",EmployeeID:9,OrderDate:new Date(8583264e5),RequiredDate:new Date(860742e6),ShippedDate:new Date(8601408e5),ShipVia:1,Freight:68.52,ShipName:"Suprêmes délices",ShipAddress:"Boulevard Tirou, 255",ShipCity:"Charleroi",ShipRegion:null,ShipPostalCode:"B-6000",ShipCountry:"Belgium",CompanyName:"Suprêmes délices",Address:"Boulevard Tirou, 255",City:"Charleroi",Region:null,PostalCode:"B-6000",Country:"Belgium"},{OrderID:10501,CustomerID:"BLAUS",EmployeeID:9,OrderDate:new Date(8605692e5),RequiredDate:new Date(8629884e5),ShippedDate:new Date(861174e6),ShipVia:3,Freight:8.85,ShipName:"Blauer See Delikatessen",ShipAddress:"Forsterstr. 57",ShipCity:"Mannheim",ShipRegion:null,ShipPostalCode:"68306",ShipCountry:"Germany",CompanyName:"Blauer See Delikatessen",Address:"Forsterstr. 57",City:"Mannheim",Region:null,PostalCode:"68306",Country:"Germany"},{OrderID:10506,CustomerID:"KOENE",EmployeeID:9,OrderDate:new Date(8610876e5),RequiredDate:new Date(8635068e5),ShippedDate:new Date(8625564e5),ShipVia:2,Freight:21.19,ShipName:"Königlich Essen",ShipAddress:"Maubelstr. 90",ShipCity:"Brandenburg",ShipRegion:null,ShipPostalCode:"14776",ShipCountry:"Germany",CompanyName:"Königlich Essen",Address:"Maubelstr. 90",City:"Brandenburg",Region:null,PostalCode:"14776",Country:"Germany"},{OrderID:10538,CustomerID:"BSBEV",EmployeeID:9,OrderDate:new Date(8636796e5),RequiredDate:new Date(8660988e5),ShippedDate:new Date(863766e6),ShipVia:3,Freight:4.87,ShipName:"B's Beverages",ShipAddress:"Fauntleroy Circus",ShipCity:"London",ShipRegion:null,ShipPostalCode:"EC2 5NT",ShipCountry:"UK",CompanyName:"B's Beverages",Address:"Fauntleroy Circus",City:"London",Region:null,PostalCode:"EC2 5NT",Country:"UK"},{OrderID:10557,CustomerID:"LEHMS",EmployeeID:9,OrderDate:new Date(8653212e5),RequiredDate:new Date(8665308e5),ShippedDate:new Date(8655804e5),ShipVia:2,Freight:96.72,ShipName:"Lehmanns Marktstand",ShipAddress:"Magazinweg 7",ShipCity:"Frankfurt a.M.",ShipRegion:null,ShipPostalCode:"60528",ShipCountry:"Germany",CompanyName:"Lehmanns Marktstand",Address:"Magazinweg 7",City:"Frankfurt a.M.",Region:null,PostalCode:"60528",Country:"Germany"},{OrderID:10566,CustomerID:"BLONP",EmployeeID:9,OrderDate:new Date(8660988e5),RequiredDate:new Date(868518e6),ShippedDate:new Date(8666172e5),ShipVia:1,Freight:88.4,ShipName:"Blondel père et fils",ShipAddress:"24, place Kléber",ShipCity:"Strasbourg",ShipRegion:null,ShipPostalCode:"67000",ShipCountry:"France",CompanyName:"Blondesddsl père et fils",Address:"24, place Kléber",City:"Strasbourg",Region:null,PostalCode:"67000",Country:"France"}]},e.prototype.getStacks=function(){return[{Symbol:"DDNDKJ",Open:"6,088.20",High:"6,114.55",Low:"6,084.15",Close:"12.5",Change:"0.21",TradedVolume:"79.94",TradedValue:"355.7",WeekHigh:"6,114.55",WeekLow:"4,770.35",yearChange:"14.37",monthChange:"9.87"},{Symbol:"FKLND",Open:"2,042.00",High:"2,108.40",Low:"2,042.00",Close:"77.8",Change:"3.85",TradedVolume:"0.94",TradedValue:"19.57",WeekHigh:"2,108.40",WeekLow:"1,526.40",yearChange:"23.7",monthChange:"10.55"},{Symbol:"DSNNS",Open:"740",High:"772.3",Low:"740",Close:"26.6",Change:"3.58",TradedVolume:"3.82",TradedValue:"29.08",WeekHigh:"772.3",WeekLow:"496.4",yearChange:"47.28",monthChange:"23.20"},{Symbol:"MLSSD",Open:"939.5",High:"958.2",Low:"939.5",Close:"22.1",Change:"2.36",TradedVolume:"1.18",TradedValue:"11.26",WeekHigh:"998.85",WeekLow:"553",yearChange:"47.28",monthChange:"9.87"},{Symbol:"LKSNDL",Open:"4,641.10",High:"4,749.75",Low:"4,641.10",Close:"99.25",Change:"2.14",TradedVolume:"0.22",TradedValue:"10.47",WeekHigh:"5,050.00",WeekLow:"3,432.40",yearChange:"61.24",monthChange:"11.63"},{Symbol:"NKJSN",Open:"445",High:"451.9",Low:"442",Close:"6.95",Change:"1.57",TradedVolume:"1.07",TradedValue:"4.78",WeekHigh:"578.4",WeekLow:"370.8",yearChange:"29.67",monthChange:"4.45"},{Symbol:"LNKNDS",Open:"298.5",High:"303.95",Low:"298.5",Close:"4.25",Change:"1.42",TradedVolume:"2.12",TradedValue:"6.42",WeekHigh:"386.25",WeekLow:"289.4",yearChange:"-9.42",monthChange:"3.13"},{Symbol:"NSDN",Open:"400",High:"403",Low:"397.95",Close:"4.6",Change:"1.16",TradedVolume:"1.7",TradedValue:"6.81",WeekHigh:"435",WeekLow:"300",yearChange:"-5.40",monthChange:"-1.52"},{Symbol:"SDMSMD",Open:"162.75",High:"164.85",Low:"162.4",Close:"1.85",Change:"1.14",TradedVolume:"1.18",TradedValue:"1.94",WeekHigh:"207.95",WeekLow:"140.3",yearChange:"23.21",monthChange:"0.79"},{Symbol:"SMMSDS",Open:"75.4",High:"76.45",Low:"75.2",Close:"0.75",Change:"0.99",TradedVolume:"14.44",TradedValue:"10.95",WeekHigh:"106.7",WeekLow:"58",yearChange:"-6",monthChange:"11.78"},{Symbol:"MSMDM",Open:"2,291.00",High:"2,315.00",Low:"2,291.00",Close:"20.4",Change:"0.89",TradedVolume:"1.09",TradedValue:"25.1",WeekHigh:"2,551.70",WeekLow:"1,802.30",yearChange:"26.37",monthChange:"15.28"},{Symbol:"MLKSDM",Open:"329.7",High:"329.7",Low:"327.2",Close:"2.65",Change:"0.81",TradedVolume:"1.88",TradedValue:"6.16",WeekHigh:"355",WeekLow:"227.4",yearChange:"25.55",monthChange:"14.38"},{Symbol:"BDSBD",Open:"730.5",High:"736.75",Low:"727.15",Close:"5.55",Change:"0.76",TradedVolume:"0.33",TradedValue:"2.38",WeekHigh:"736.75",WeekLow:"524.1",yearChange:"26.87",monthChange:"8.65"},{Symbol:"SKJDB",Open:"421.5",High:"424.9",Low:"416",Close:"2.95",Change:"0.71",TradedVolume:"2.51",TradedValue:"10.5",WeekHigh:"789.35",WeekLow:"315",yearChange:"35.88",monthChange:"15.32"},{Symbol:"VDSVH",Open:"505",High:"509",Low:"503",Close:"3.35",Change:"0.66",TradedVolume:"1.01",TradedValue:"5.14",WeekHigh:"509.5",WeekLow:"279",yearChange:"-40.65",monthChange:"13.13"},{Symbol:"DSJBD",Open:"1,730.00",High:"1,739.95",Low:"1,721.20",Close:"10.05",Change:"0.58",TradedVolume:"1.14",TradedValue:"19.74",WeekHigh:"1,739.95",WeekLow:"1,051.00",yearChange:"61.28",monthChange:"31.47"},{Symbol:"BSBDBD",Open:"1,161.00",High:"1,172.00",Low:"1,161.00",Close:"6.25",Change:"0.54",TradedVolume:"0.81",TradedValue:"9.51",WeekHigh:"1,232.00",WeekLow:"767.4",yearChange:"37.73",monthChange:"23.04"},{Symbol:"BDBSJ",Open:"770",High:"776",Low:"768.65",Close:"4.05",Change:"0.53",TradedVolume:"0.82",TradedValue:"6.31",WeekHigh:"920",WeekLow:"659.2",yearChange:"43.90",monthChange:"16.66"},{Symbol:"NSDJN",Open:"106",High:"106.8",Low:"105.35",Close:"0.55",Change:"0.52",TradedVolume:"4.75",TradedValue:"5.04",WeekHigh:"137.1",WeekLow:"86.9",yearChange:"2.89",monthChange:"9.53"},{Symbol:"NDSS",Open:"3,000.30",High:"3,040.00",Low:"3,000.30",Close:"14.9",Change:"0.49",TradedVolume:"0.03",TradedValue:"0.76",WeekHigh:"3,510.00",WeekLow:"2,210.00",yearChange:"-9.36",monthChange:"17.10"},{Symbol:"NKDN",Open:"126",High:"128",Low:"126",Close:"0.6",Change:"0.47",TradedVolume:"1.61",TradedValue:"2.05",WeekHigh:"202.8",WeekLow:"121.85",yearChange:"22.41",monthChange:"10.60"}]},e.prototype.getEvents=function(){return[{Id:100,Subject:"Bering Sea Gold",StartTime:new Date(2017,5,5,10,0),EndTime:new Date(2017,5,5,11,0),Description:"",AllDay:!1,Recurrence:!1,Categorize:"1,3",RoomId:1,OwnerId:1},{Id:101,Subject:"Bering Sea Gold",StartTime:new Date(2017,5,2,16,0),EndTime:new Date(2017,5,2,17,30),Description:"",AllDay:!1,Recurrence:!1,Categorize:"2,5",RoomId:2,OwnerId:3},{Id:102,Subject:"What Happened Next?",StartTime:new Date(2017,5,4,1,0),EndTime:new Date(2017,5,4,1,30),Description:"",AllDay:!1,Recurrence:!1,Categorize:"3,6",RoomId:1,OwnerId:5},{Id:103,Subject:"What Happened Next?",StartTime:new Date(2017,5,5,12,30),EndTime:new Date(2017,5,5,15,0),Description:"",AllDay:!1,Recurrence:!1,Categorize:"4,1",RoomId:1,OwnerId:1},{Id:104,Subject:"Daily Planet",StartTime:new Date(2017,5,3,1,0),EndTime:new Date(2017,5,3,2,0),Description:"",AllDay:!1,Recurrence:!1,Categorize:"1,3,6",RoomId:2,OwnerId:3},{Id:105,Subject:"Alaska: The Last Frontier",StartTime:new Date(2017,5,3,4,0),EndTime:new Date(2017,5,3,5,30),Description:"",AllDay:!1,Recurrence:!1,Categorize:"2,3,4,5",RoomId:1,OwnerId:5},{Id:106,Subject:"Deadest Catch",StartTime:new Date(2017,5,3,16,0),EndTime:new Date(2017,5,3,17,0),Description:"",AllDay:!1,Recurrence:!1,Categorize:"2,4,6,1",RoomId:1,OwnerId:1},{Id:107,Subject:"Sports Day",StartTime:new Date(2017,4,30,6,30),EndTime:new Date(2017,4,30,7,30),Description:"",AllDay:!1,Recurrence:!1,Categorize:"5,3",RoomId:2,OwnerId:3},{Id:108,Subject:"How Its Made",StartTime:new Date(2017,5,1,6,0),EndTime:new Date(2017,5,1,7,30),Description:"",AllDay:!1,Recurrence:!0,RecurrenceRule:"FREQ=WEEKLY;BYDAY=MO,TU;INTERVAL=1;COUNT=15",Categorize:"2,3,6",RoomId:1,OwnerId:5},{Id:109,Subject:"Bering Sea Gold",StartTime:new Date(2017,5,2,6,0),EndTime:new Date(2017,5,2,8,0),Description:"",AllDay:!1,Recurrence:!0,RecurrenceRule:"FREQ=DAILY;INTERVAL=2;COUNT=10",Categorize:"3",RoomId:1,OwnerId:1},{Id:110,Subject:"MoonShiners",StartTime:new Date(2017,5,2,2,0),EndTime:new Date(2017,5,2,2,30),Description:"",AllDay:!1,Recurrence:!0,RecurrenceRule:"FREQ=DAILY;INTERVAL=1;COUNT=5",Categorize:"6,2,5",RoomId:2,OwnerId:3}]},e.prototype.getTasks=function(){return[{Id:1,Status:"Open",Summary:"Analyze the new requirements gathered from the customer.",Type:"Story",Priority:"Low",Tags:"Analyze,Customer",Estimate:3.5,Assignee:"Nancy Davloio",ImgUrl:"app/content/images/kanban/1.png",RankId:1},{Id:2,Status:"InProgress",Summary:"Improve application performance",Type:"Improvement",Priority:"Normal",Tags:"Improvement",Estimate:6,Assignee:"Andrew Fuller",ImgUrl:"app/content/images/kanban/2.png",RankId:1},{Id:3,Status:"Open",Summary:"Arrange a web meeting with the customer to get new requirements.",Type:"Others",Priority:"Critical",Tags:"Meeting",Estimate:5.5,Assignee:"Janet Leverling",ImgUrl:"app/content/images/kanban/3.png",RankId:2},{Id:4,Status:"InProgress",Summary:"Fix the issues reported in the IE browser.",Type:"Bug",Priority:"Release Breaker",Tags:"IE",Estimate:2.5,Assignee:"Janet Leverling",ImgUrl:"app/content/images/kanban/3.png",RankId:2},{Id:5,Status:"Testing",Summary:"Fix the issues reported by the customer.",Type:"Bug",Priority:"Low",Tags:"Customer",Estimate:"3.5",Assignee:"Steven walker",ImgUrl:"app/content/images/kanban/5.png",RankId:1},{Id:6,Status:"Close",Summary:"Arrange a web meeting with the customer to get the login page requirements.",Type:"Others",Priority:"Low",Tags:"Meeting",Estimate:2,Assignee:"Michael Suyama",ImgUrl:"app/content/images/kanban/6.png",RankId:1},{Id:7,Status:"Validate",Summary:"Validate new requirements",Type:"Improvement",Priority:"Low",Tags:"Validation",Estimate:1.5,Assignee:"Robert King",ImgUrl:"app/content/images/kanban/7.png",RankId:1},{Id:8,Status:"Close",Summary:"Login page validation",Type:"Story",Priority:"Release Breaker",Tags:"Validation,Fix",Estimate:2.5,Assignee:"Laura Callahan",ImgUrl:"app/content/images/kanban/8.png",RankId:2},{Id:9,Status:"Testing",Summary:"Fix the issues reported in Safari browser.",Type:"Bug",Priority:"Release Breaker",Tags:"Fix,Safari",Estimate:1.5,Assignee:"Nancy Davloio",ImgUrl:"app/content/images/kanban/1.png",RankId:2},{Id:10,Status:"Close",Summary:"Test the application in the IE browser.",Type:"Story",Priority:"Low",Tags:"Testing,IE",Estimate:5.5,Assignee:"Margaret hamilt",ImgUrl:"app/content/images/kanban/4.png",RankId:3},{Id:11,Status:"Validate",Summary:"Validate the issues reported by the customer.",Type:"Story",Priority:"High",Tags:"Validation,Fix",Estimate:1,Assignee:"Steven walker",ImgUrl:"app/content/images/kanban/5.png",RankId:1},{Id:12,Status:"Testing",Summary:"Check Login page validation.",Type:"Story",Priority:"Release Breaker",Tags:"Testing",Estimate:.5,Assignee:"Michael Suyama",ImgUrl:"app/content/images/kanban/6.png",RankId:3},{Id:13,Status:"Open",Summary:"API improvements.",Type:"Improvement",Priority:"High",Tags:"Grid,API",Estimate:3.5,Assignee:"Robert King",ImgUrl:"app/content/images/kanban/7.png",RankId:3},{Id:14,Status:"InProgress",Summary:"Add responsive support to application",Type:"Epic",Priority:"Critical",Tags:"Responsive",Estimate:6,Assignee:"Laura Callahan",ImgUrl:"app/content/images/kanban/8.png",RankId:3},{Id:15,Status:"Open",Summary:"Show the retrieved data from the server in grid control.",Type:"Story",Priority:"High",Tags:"Database,SQL",Estimate:5.5,Assignee:"Margaret hamilt",ImgUrl:"app/content/images/kanban/4.png",RankId:4},{Id:16,Status:"InProgress",Summary:"Fix cannot open user’s default database SQL error.",Priority:"Critical",Type:"Bug",Tags:"Database,Sql2008",Estimate:2.5,Assignee:"Janet Leverling",ImgUrl:"app/content/images/kanban/3.png",RankId:4},{Id:17,Status:"Testing",Summary:"Fix the issues reported in data binding.",Type:"Story",Priority:"Normal",Tags:"Databinding",Estimate:"3.5",Assignee:"Janet Leverling",ImgUrl:"app/content/images/kanban/3.png",RankId:4},{Id:18,Status:"Close",Summary:"Analyze SQL server 2008 connection.",Type:"Story",Priority:"Release Breaker",Tags:"Grid,Sql",Estimate:2,Assignee:"Andrew Fuller",ImgUrl:"app/content/images/kanban/2.png",RankId:4},{Id:19,Status:"Validate",Summary:"Validate databinding issues.",Type:"Story",Priority:"Low",Tags:"Validation",Estimate:1.5,Assignee:"Margaret hamilt",ImgUrl:"app/content/images/kanban/4.png",RankId:1},{Id:20,Status:"Close",Summary:"Analyze grid control.",Type:"Story",Priority:"High",Tags:"Analyze",Estimate:2.5,Assignee:"Margaret hamilt",ImgUrl:"app/content/images/kanban/4.png",RankId:5},{Id:21,Status:"Close",Summary:"Stored procedure for initial data binding of the grid.",Type:"Others",Priority:"Release Breaker",Tags:"Databinding",Estimate:1.5,Assignee:"Steven walker",ImgUrl:"app/content/images/kanban/5.png",RankId:6},{Id:22,Status:"Close",Summary:"Analyze stored procedures.",Type:"Story",Priority:"Release Breaker",Tags:"Procedures",Estimate:5.5,Assignee:"Janet Leverling",ImgUrl:"app/content/images/kanban/3.png",RankId:7},{Id:23,Status:"Validate",Summary:"Validate editing issues.",Type:"Story",Priority:"Critical",Tags:"Editing",Estimate:1,Assignee:"Nancy Davloio",ImgUrl:"app/content/images/kanban/1.png",RankId:1},{Id:24,Status:"Testing",Summary:"Test editing functionality.",Type:"Story",Priority:"Normal",Tags:"Editing,Test",Estimate:.5,Assignee:"Nancy Davloio",ImgUrl:"app/content/images/kanban/1.png",RankId:5},{Id:25,Status:"Open",Summary:"Enhance editing functionality.",Type:"Improvement",Priority:"Low",Tags:"Editing",Estimate:3.5,Assignee:"Andrew Fuller",ImgUrl:"app/content/images/kanban/2.png",RankId:5},{Id:26,Status:"InProgress",Summary:"Improve the performance of the editing functionality.",Type:"Epic",Priority:"High",Tags:"Performance",Estimate:6,Assignee:"Nancy Davloio",ImgUrl:"app/content/images/kanban/1.png",RankId:5},{Id:27,Status:"Open",Summary:"Arrange web meeting with the customer to show editing demo.",Type:"Others",Priority:"High",Tags:"Meeting,Editing",Estimate:5.5,Assignee:"Steven walker",ImgUrl:"app/content/images/kanban/5.png",RankId:6},{Id:28,Status:"InProgress",Summary:"Fix editing issues reported in chrome",Type:"Bug",Priority:"Normal",Tags:"Editing,Customer",Estimate:2.5,Assignee:"Janet Leverling",ImgUrl:"app/content/images/kanban/3.png",RankId:6},{Id:29,Status:"Testing",Summary:"Fix the editing issues reported by the customer.",Type:"Bug",Priority:"Low",Tags:"Editing,Fix",Estimate:"3.5",Assignee:"Janet Leverling",ImgUrl:"app/content/images/kanban/3.png",RankId:6},{Id:30,Status:"Close",Summary:"Arrange a web meeting with the customer to get editing requirements.",Type:"Others",Priority:"Critical",Tags:"Meeting,Editing",Estimate:2,Assignee:"Steven walker",ImgUrl:"app/content/images/kanban/5.png",RankId:8}]},e}();t.NorthwindService=n},1038:function(e,t,i){var n,s,r;
/*!
*  filename: ej.navigationdrawer.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.navigationdrawer.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(a){s=[i(94),i(4),i(21),i(65),i(16),i(414)],void 0===(r="function"==typeof(n=a)?n.apply(t,s):n)||(e.exports=r)}(function(){(function(e,t,i){t.widget("ejNavigationDrawerBase","ej.NavigationDrawerBase",{defaults:{contentId:null,cssClass:"",direction:"left",targetId:null,position:"normal",enableListView:!1,listViewSettings:{},type:"overlay",width:"auto",swipe:null,open:null,beforeClose:null,items:[],ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},ajaxSuccess:null,ajaxError:null,ajaxComplete:null},dataTypes:{direction:"enum",type:"enum",ajaxSettings:"data"},loadContent:function(i,n){var s,r,a,o=this;0==n.indexOf("#")?((s=e(n)[0]&&e(n)[0].nodeName&&"script"==e(n)[0].nodeName.toLowerCase()?t.getClearString(e(n)[0].innerHTML):n)!=e(n)&&(0!=e(s).length?this._scriptTemplate.push({id:n,data:e(s)}):(r=e.grep(this._scriptTemplate,function(e){if(e.id==s)return e.data}),s=r.length>0?r[0].data[0]:s)),e(i).html(e(s)),this._hide()):(a={url:n,success:function(t){try{if(e(i).html(t),o._trigger("ajaxSuccess",{data:t,url:n,content:i}))return;o._hide()}catch(e){}},error:function(e){try{if(o._trigger("ajaxError",{data:{status:e.status,responseText:e.responseText,statusText:e.statusText},content:i,url:n}))return;o._hide()}catch(e){}},complete:function(e){try{o._trigger("ajaxComplete",{data:e,content:i,url:n})}catch(e){}}},this._sendAjaxRequest(a))},_sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_shadowWrapper:function(){this.model.isPaneOpen||(this._elementOverlay=t.buildTag("div#"+this._id+"_Overlay",{},{},{class:this._rootCSS+" "+this._prefixClass+"nb-layout "+this._prefixClass+"nb-overlay"}),this._elementShadow=t.buildTag("div#"+this._id+"_shadow",{},{},{class:this._rootCSS+" "+this._prefixClass+"nb-shadow "+this._prefixClass+"nb-type-"+("slide"==this.model.type?"slide":"overlay")}),this._nbHome.append(this._elementOverlay),this._elementOverlay.hide(),this.element.hide(),this.element.prepend(this._elementShadow))},_renderControl:function(){"fixed"==this.model.position.toLowerCase()&&this.element.appendTo(this._nbHome),this._shadowWrapper(),this.element.addClass(this._prefixClass+"user-select "+this.model.cssClass),this.element.addClass(this._prefixClass+"nb-layout "+("left"==this.model.direction.toLowerCase()?this._prefixClass+"nb-left":this._prefixClass+"nb-right")),this.element.addClass(this._prefixClass+"nb-type-"+("slide"==this.model.type?"slide":"overlay")),this._maxIndex=this._getMaxZindex(),this._parentWidth=this._nbHome.width(),this._setWidth(),this._setLayout()},_getMaxZindex:function(){return Math.max.apply(null,e.map(e("body *"),function(t){return parseInt(e(t).css("z-index"))+1||1}))},_transform:function(t,i,n){var s,r="-"+this._browser+"-transform",a="translateX("+t+"px) translateZ(0px)",o="-"+this._browser+"-transition-property",l="transform",d="-"+this._browser+"-transition-duration",h=i+"ms";n?(s="fixed"==this.model.position?"e-nb-fixed":"","normal"==this.model.position&&"slide"==this.model.type&&e("#"+this._id+"_WrapContainer").addClass("e-nb-normal"),this.element.addClass(this._prefixClass+"nb-animate "+s),this.element.css(o,l).css(d,h).css(r,a),this.element.css("transition-property",l).css("transition-duration",h).css("transform",a)):(s="fixed"==this.model.position?"e-nb-fixed":"","normal"==this.model.position&&"slide"==this.model.type&&e("#"+this._id+"_WrapContainer").addClass("e-nb-normal"),this._nbHome.addClass(this._rootCSS+" "+this._prefixClass+"nb-animate "+s),this._nbHome.css(o,l).css(d,h).css(r,a),this._nbHome.css("transition-property",l).css("transition-duration",h).css("transform",a))},_show:function(){t.isNullOrUndefined(this.element.css("left").match(/\d/g))||Number(this.element.css("left").match(/\d/g)[0]<this.element.width())||this._setLayout(),e("."+this._prefixClass+"nb-opened").length&&e("."+this._prefixClass+"nb-opened")[0]!=this.element[0]&&e("."+this._prefixClass+"nb-opened").ejNavigationDrawer("close"),this.element.show(),t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionOpenHandler,!1,this),this.element.addClass(this._prefixClass+"nb-opened"),this._elementOverlay.css("z-index",2*this._maxIndex),this.element.css("z-index",3*this._maxIndex),"msie"==t.browserInfo().name&&t.browserInfo().version<=9?e(this.element).show().animate({left:"left"==this.model.direction?"0px":this._parentWidth-e(this.element).width()},400,e.proxy(this._transitionOpenEnd,this)):"left"==this.model.direction?this._transform(e(this.element).width(),400,this._isTransitionElement()):this._transform(-e(this.element).width(),400,this._isTransitionElement()),this._data={element:this.element},this.model.enableListView&&e.extend(this._data,{listview:this._lb}),this._elementOverlay.show(),this._trigger("open",this._data)},_hide:function(){this._elementOverlay.hide(),t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionCloseHandler,!1,this),this.element.removeClass(this._prefixClass+"nb-opened"),"msie"==t.browserInfo().name&&t.browserInfo().version<=9?e(this.element).animate({left:"left"==this.model.direction?-e(this.element).width():this._nbHome.width()},400,e.proxy(this._transitionCloseEnd,this)):this._transform(0,400,this._isTransitionElement())},_clearHomeElement:function(){var e,t="";""!=this._browser&&(t="-"+this._browser+"-");var i=t+"transform",n=t+"transition-property",s=t+"transition-duration";this._nbHome.css(i,"").css(s,"").css(n,""),e="fixed"==this.model.position?"e-nb-fixed":"",this._nbHome.removeClass(this._rootCSS+" "+this._prefixClass+"nb-animate "+e)},_isOpened:function(){return this.element.hasClass(this._prefixClass+"nb-opened")},_isOtherOpened:function(){return e("."+this._prefixClass+"nb-opened").length},_isTransitionElement:function(){return"overlay"==this.model.type},_isOrientationSupported:function(){return"orientation"in window&&"onorientationchange"in window},_setWidth:function(){e(this._nbHome).width()<500?this.element.css("maxwidth","80%"):this.element.css("maxwidth","40%"),"auto"!=this.model.width&&0!=Number(this.model.width)&&this.element.width(Number(this.model.width)),this.element.height("100%")},_setLayout:function(){var i;this.element.show(),this.element.find("."+this._prefixClass+"list-container").removeClass("e-scroller"),"fixed"==this.model.position&&this.element.css("min-height",window.innerHeight),"left"==this.model.direction.toLowerCase()?(e("#"+this._id+"_WrapContainer").css({right:""}).removeClass("e-nb-right").addClass("e-nb-left"),this.element.removeClass("e-nb-right").addClass("e-nb-left"),this.model.isPaneOpen?(i="fixed"==this.model.position?"e-nb-fixed":"",this.element.css({right:"",left:"fixed"==this.model.position?-t.getDimension(this.element,"width"):0}),this._nbHome.css({width:this._nbHome.parent().width()-t.getDimension(this.element,"width"),left:t.getDimension(this.element,"width"),position:"absolute"}).addClass(i)):("normal"==this.model.position?this.element.css({right:"",left:"overlay"==this.model.type?-t.getDimension(this.element,"width"):"0px"}):this.element.css({right:"",left:-t.getDimension(this.element,"width")}),"slide"==this.model.type&&e("#"+this._id+"_WrapContainer").removeAttr("style").css({left:-t.getDimension(this.element,"width")}))):(e("#"+this._id+"_WrapContainer").css({left:""}).removeClass("e-nb-left").addClass("e-nb-right"),this.element.css({left:""}).removeClass("e-nb-left").addClass("e-nb-right"),this.model.isPaneOpen?(i="fixed"==this.model.position?"e-nb-fixed":"",this._nbHome.css({left:"",position:"",width:t.getDimension(this._nbHome.parent(),"width")-t.getDimension(this.element,"width")}).addClass(i),this.element.css({left:"",right:"0px"})):(i="fixed"==this.model.position?"e-nb-fixed":"",this._nbHome.removeClass("e-nb-fixed-slide "+i),e("#"+this._id+"_WrapContainer").removeClass("e-nb-left").addClass("e-nb-right"),"slide"==this.model.type&&e("#"+this._id+"_WrapContainer").removeAttr("style").css({right:"0px"}),"fixed"==this.model.position.toLowerCase()&&"slide"==this.model.type&&this._nbHome.addClass("e-nb-fixed-slide"),"fixed"==this.model.position.toLowerCase()&&"overlay"==this.model.type&&this.element.addClass(i),"normal"==this.model.position.toLowerCase()?this.element.css({left:t.getDimension(this.element,"width")}):this.element.css({right:-t.getDimension(this.element,"width")}))),this._isOpened()||this.model.isPaneOpen||this.element.hide()},_destroy:function(e){this._wireEvents(!0),this._elementOverlay&&this._elementOverlay.remove(),this._elementShadow&&this._elementShadow.remove(),this._elementWrapper&&this.element.unwrap(),this.element.removeAttr("style"),this.element.css("left",""),this._destroyEJMPlugin(),e||this.element.removeClass("e-nb e-user-select e-nb-layout e-nb-left e-nb-type-overlay e-nb-animate e-nb-opened")},_refresh:function(){this._destroy(!0),this._load(),this._renderControl(),this._renderEJMControls(),this._createDelegate(),this._wireEvents()},_createDelegate:function(){this._swipeStartHandler=e.proxy(this._swipeStart,this),this._swipeEndHandler=e.proxy(this._swipeEnd,this),this._swipeMoveHandler=e.proxy(this._swipeMove,this),this._touchMoveHandler=e.proxy(this._touchMove,this),this._touchEndHandler=e.proxy(this._touchEnd,this),this._transitionOpenHandler=e.proxy(this._transitionOpenEnd,this),this._transitionCloseHandler=e.proxy(this._transitionCloseEnd,this),this._overlayTapHandler=e.proxy(this._elementOverlayTap,this),this._targetButtonTapHandler=e.proxy(this._targetButtonTap,this),this._onOrientationChangeHandler=e.proxy(this._onOrientationChangeEvent,this),this._onResizeEventHandler=e.proxy(this._onResizeEvent,this)},_wireEvents:function(i){var n;(!this.model.isPaneOpen||i)&&(this.model.targetId?(n=t.getCurrentPage?t.getCurrentPage():e("body"),t.listenTouchEvent(n.find("#"+this.model.targetId),"e-"==this._prefixClass?"click":t.endEvent(),this._targetButtonTapHandler,i,this)):"msie"==t.browserInfo().name&&t.browserInfo().version<=8||t.listenTouchEvent(this._nbHome,t.startEvent(),this._swipeStartHandler,i,this),t.listenTouchEvent(this._elementOverlay,t.endEvent(),this._overlayTapHandler,i,this)),this.model.isPaneOpen&&(t.isTouchDevice()&&this._isOrientationSupported()?t.listenTouchEvent(window,"orientationchange",this._onOrientationChangeHandler,i,this):t.listenTouchEvent(window,"resize",this._onResizeEventHandler,i,this))},_onResizeEvent:function(){var e;this.element.show(),e=this._isOpened()&&this.element.is(":visible")&&!this.model.isPaneOpen?"opened ":"closed",this._transform(0,0,this._isTransitionElement()),this.element.hide(),this.element.removeClass(this._prefixClass+"nb-opened"),this._clearHomeElement(),this._parentWidth=this._nbHome.width(),this._setWidth(),this._setLayout(),"opened "==e&&this._show()},_onOrientationChangeEvent:function(){var e,t;this.element.show(),e=this._isOpened()&&this.element.is(":visible")?"opened ":"closed",(0==window.orientation||180==window.orientation||90==window.orientation)&&window.scrollTo(0,0),this._transform(0,0,this._isTransitionElement()),this.element.hide(),this.element.removeClass(this._prefixClass+"nb-opened"),this._parentWidth=this._nbHome.width(),this._clearHomeElement(),t=this,setTimeout(function(){t._setWidth(),t._setLayout(),"opened "==e&&t._show()},300)},_transitionCloseEnd:function(){t.isNullOrUndefined(this.element)||this.element.hide(),this._clearHomeElement(),t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionCloseHandler,!0,this),this._lbObj&&(this.model.listViewSettings.selectedItemIndex=this._lbObj.model.selectedItemIndex)},_transitionOpenEnd:function(){t.isNullOrUndefined(this.element)||this.element.show(),this._scrollbar&&this._scrollbar.ejmScrollPanel("refresh"),this._lbscrollbar&&this._lbscrollbar.ejmScrollPanel("refresh"),t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionOpenHandler,!0,this)},_targetButtonTap:function(e){e.preventDefault(),this._isOtherOpened()||this._show()},_elementOverlayTap:function(i){t.blockDefaultActions(i),this._data={element:this.element},this.model.enableListView&&e.extend(this._data,{listview:this._lb}),this._trigger("beforeClose",this._data)||this._hide()},_swipeStart:function(e){var i=e.changedTouches?e.changedTouches[0]:e;this._startSwipeOffsetX=i.clientX-this._nbHome.offset().left,this._startSwipeOffsetActualX=i.clientX,this._startSwipeOffsetY=i.clientY,this._containerX=this._isTransitionElement()?this.element.offset().left:this._nbHome.offset().left,t.listenTouchEvent(this._nbHome,t.moveEvent(),this._swipeMoveHandler,!1,this),t.listenTouchEvent(this._nbHome,t.endEvent(),this._swipeEndHandler,!1,this)},_swipeMove:function(i){var n,s=i.changedTouches?i.changedTouches[0]:i;!t.isNullOrUndefined(this.element.css("left").match(/\d/g))&&Number(this.element.css("left").match(/\d/g)[0])<this.element.width()&&this._setLayout(),this._swipeDirection=this._startSwipeOffsetActualX&&this._startSwipeOffsetActualX>s.clientX?"right":"left",!!this._isOpened()&&this._swipeDirection!=this.model.direction.toLowerCase()?this._startSwipeOffsetX&&this._isOpened()&&(this._relativeX=s.clientX-this._startSwipeOffsetActualX,this._relativeY=s.clientY-this._startSwipeOffsetY,n=this.element.width()+this._relativeX-("overlay"==this.model.type.toLowerCase()?this._nbHome.offset().left:0),e(s.target).hasClass(this._prefixClass+"nb-overlay")&&("left"==this.model.direction?-this._relativeX<this.element.width():this._relativeX<this.element.width())&&this._transform("left"==this.model.direction?n:-(this.element.width()-this._relativeX),0,this._isTransitionElement())):this._swipeDirection!=this.model.direction.toLowerCase()||this._isOtherOpened()?t.listenEvents([this._nbHome,this._nbHome,this._nbHome],[t.moveEvent(),t.endEvent()],[this._touchMoveHandler,this._touchEndHandler],!0,this):t.listenEvents([this._nbHome,this._nbHome,this._nbHome],[t.moveEvent(),t.endEvent()],[this._touchMoveHandler,this._touchEndHandler],!1,this)},_swipeEnd:function(e){e.changedTouches&&e.changedTouches[0];t.listenTouchEvent(this._nbHome,t.moveEvent(),this._swipeMoveHandler,!0,this),t.listenTouchEvent(this._nbHome,t.endEvent(),this._swipeEndHandler,!0,this)},_touchMove:function(e){var i,n=e.changedTouches?e.changedTouches[0]:e;t.listenTouchEvent(this._nbHome,t.moveEvent(),this._swipeMoveHandler,!0,this),this._isTransitionElement()&&(this._containerX=0),this._startSwipeOffsetX&&!this._isOpened()&&(this._relativeX=n.clientX-this._startSwipeOffsetX,this._relativeY=n.clientY-this._startSwipeOffsetY,("left"==this.model.direction?this._startSwipeOffsetX<50:this._startSwipeOffsetX>this._nbHome.width()-50)&&(this.element.show(),i="slide"==this.model.type.toLowerCase()?0:this._nbHome.offset().left,("left"==this.model.direction?this._relativeX-i<this.element.width():this._relativeX-i>-this.element.width())&&(!this._containerX||this.model.targetHome)&&this._transform(this._containerX+this._relativeX-i,0,this._isTransitionElement())))},_touchEnd:function(i){var n=i.changedTouches?i.changedTouches[0]:i;t.listenTouchEvent(this._nbHome,t.moveEvent(),this._touchMoveHandler,!0,this),this._isOpened()||!!e.isFunction(t.isIOS7)&&t.isIOS7()||(this._containerX?this._hide():(this._relativeX=n.clientX-this._startSwipeOffsetX,this._relativeY=n.clientY-this._startSwipeOffsetY,("left"==this.model.direction?this._startSwipeOffsetX<50:this._startSwipeOffsetX>this._nbHome.width()-50)&&(this._relativeX>30||this._relativeX<-30?this._show():this._hide()))),this._data={targetElement:this._nbHome,element:this.element,direction:this._swipeDirection},this.model.enableListView&&e.extend(this._data,{listview:this._lb}),this._trigger("swipe",this._data)||(t.listenTouchEvent(this._nbHome,t.endEvent(),this._touchEndHandler,!0,this),t.listenTouchEvent(this._nbHome,"mouseleave",this._touchEndHandler,!0,this))},open:function(){this.model.isPaneOpen||this._show()},close:function(){if(!this.model.isPaneOpen){if(this._data={element:this.element},this.model.enableListView&&e.extend(this._data,{listview:this._lb}),this._trigger("beforeClose",this._data))return;this._hide()}},toggle:function(){this.model.isPaneOpen||(this._isOpened()?this.close():this.open())}})})(jQuery,Syncfusion),function(e,t){t.widget("ejNavigationDrawer","ej.NavigationDrawer",{_setFirst:!0,validTags:["div"],_rootCSS:"e-nb e-js",_prefixClass:"e-",defaults:{isPaneOpen:!1},dataTypes:{isPaneOpen:"boolean"},_init:function(){this._load(),this._renderControl(),this._renderEJMControls(),this._createDelegate(),this._wireEvents()},_load:function(){this._browser=this._getBrowserAgent(),"normal"==this.model.position?this.model.isPaneOpen?(this.element.siblings().wrapAll("<div id='"+this._id+"_PageContainer' class='e-nb-container e-nb-pageContainer'></div>"),this._pageContainer=this._nbHome=this.element.siblings()):(this._elementWrapper=t.buildTag("div#"+this._id+"_WrapContainer",{},{},{class:this._rootCSS+" e-nb-container e-nb-"+this.model.direction.toLowerCase()}),this.element.wrapAll(this._elementWrapper),this._nbHome=e("#"+this._id+"_WrapContainer").parent()):(this._nbHome=e("body"),this.element.appendTo(this._nbHome)),this._nbHomeCss=this._nbHome.clone(!0)[0].style},_renderEJMControls:function(){this.model.enableListView?(this._lb=t.buildTag("div#"+this._id+"_listview",{},{},{class:"e-nb-listview"}),this.model.items.length||this.model.listViewSettings.dataSource.length?this._lb.appendTo(this.element):this.element.find(">ul").wrapAll(this._lb),this._lb=e("#"+this._id+"_listview"),this.model.listViewSettings.width||(this.model.listViewSettings.width=240),this.model.listViewSettings.items=this.model.items,this._lb.ejListView(e.extend({},this.model.listViewSettings,{loadComplete:e.proxy(this._setLayout,this)})),this._lbObj=this._lb.data("ejListView"),this._lb.ejListView("selectItem",this.model.listViewSettings.selectedItemIndex)):this.element.find(".e-nb-listview").empty()},_setModel:function(t){var i=!1;for(var n in t){switch(n){case"width":this._setWidth(),this._setLayout();break;case"direction":this._setLayout();break;case"type":this._transform(0,0,!0),this._transform(0,0,!1);break;case"isPaneOpen":this.model[n]=t[n],this.element.hide(),t[n]?(e(this._elementWrapper,this._elementShadow,this._elementOverlay).remove(),this.element.removeAttr("style").height("100%"),this.element.unwrap()):(this._pageContainer.children().unwrap(),this._pageContainer.remove()),this._load(),this._shadowWrapper(),this.model.enableListView&&this._renderEJMControls(),this._wireEvents();break;case"enableListView":this._renderEJMControls();break;default:i=!0}i&&this._refresh()}},_destroyEJMPlugin:function(){this._lb&&(this._lb.ejListView("destroy"),this._lb.children().unwrap()),this.model.contentId&&e("#"+this.model.contentId).empty(),this._id&&e("#"+this._id).hide()},_getBrowserAgent:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""}}),e.extend(!0,t.NavigationDrawer.prototype,t.NavigationDrawerBase.prototype),e.extend(!0,t.NavigationDrawer.prototype.defaults.listViewSettings,t.ListView.prototype.defaults),t.NavigationDrawer.prototype._tags=t.ListView.prototype._tags}(jQuery,Syncfusion)})},1394:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var s,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,i,a):s(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),a=i(1006),o=function(){function e(e){this.northwindService=e,this.currentdate=new Date(2017,5,5),this.categorizeData=[{text:"Blue Category",id:1,color:"#43b496",fontColor:"#ffffff"},{text:"Green Category",id:2,color:"#7f993e",fontColor:"#ffffff"},{text:"Orange Category",id:3,color:"#cc8638",fontColor:"#ffffff"},{text:"Purple Category",id:4,color:"#ab54a0",fontColor:"#ffffff"},{text:"Red Category",id:5,color:"#dd654e",fontColor:"#ffffff"},{text:"Yellow Category",id:6,color:"#d0af2b",fontColor:"#ffffff"}],this.categorizeenable=!0,this.categorizemultiple=!0,this.contextmenu={enable:!0,menuItems:{appointment:[{id:"open",text:"Open Appointment"},{id:"delete",text:"Delete Appointment"},{id:"customMenu3",text:"Menu Item 3"},{id:"customMenu4",text:"Menu Item 4"},{id:"categorize",text:"Categorize"}],cells:[{id:"new",text:"New Appointment"},{id:"recurrence",text:"New Recurring Appointment"},{id:"today",text:"Today"},{id:"gotodate",text:"Go to date"},{id:"settings",text:"Settings"},{id:"view",text:"View",parentId:"settings"},{id:"timemode",text:"TimeMode",parentId:"settings"},{id:"view_Day",text:"Day",parentId:"view"},{id:"view_Week",text:"Week",parentId:"view"},{id:"view_Workweek",text:"Workweek",parentId:"view"},{id:"view_Month",text:"Month",parentId:"view"},{id:"timemode_Hour12",text:"12 Hours",parentId:"timemode"},{id:"timemode_Hour24",text:"24 Hours",parentId:"timemode"},{id:"workhours",text:"Work Hours",parentId:"settings"},{id:"customMenu1",text:"Menu Item 1"},{id:"customMenu2",text:"Menu Item 2"}]}},this.scheduleData=e.getEvents()}return e=n([r.Component({selector:"ej-app",template:i(1893),providers:[a.NorthwindService]}),s("design:paramtypes",[a.NorthwindService])],e)}();t.CategorizeComponent=o},1395:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var s,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,i,a):s(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),a=i(1006),o=function(){function e(e){this.northwindService=e,this.scheduleData=e.getEvents(),this.currentdate=new Date(2017,5,5)}return e.prototype.onCreate=function(e){var t=$("#Schedule1").ejSchedule("instance");setTimeout(function(){t.refreshScroller()},500)},e=n([r.Component({selector:"ej-app",template:i(1894),providers:[a.NorthwindService]}),s("design:paramtypes",[a.NorthwindService])],e)}();t.DefaultComponent=o},1396:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var s,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,i,a):s(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),a=i(1006),o=function(){function e(e){this.northwindService=e,this.scheduleData=e.getEvents(),this.currentdate=new Date(2017,5,5)}return e=n([r.Component({selector:"ej-app",template:i(1895),providers:[a.NorthwindService]}),s("design:paramtypes",[a.NorthwindService])],e)}();t.HorizontalComponent=o},1397:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var s,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,i,a):s(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),a=i(1006),o=function(){function e(e){this.northwindService=e,this.scheduleData=e.getEvents(),this.currentdate=new Date(2017,5,5),this.group={resources:["Owners"]},this.allowMultiple=!0,this.resourceData={dataSource:[{text:"Nancy",id:1,groupId:1,color:"#ffaa00"},{text:"Steven",id:3,groupId:2,color:"#f8a398"},{text:"Michael",id:5,groupId:1,color:"#7499e1"}],text:"text",id:"id",groupId:"groupId",color:"color"}}return e=n([r.Component({selector:"ej-app",template:i(1896),providers:[a.NorthwindService]}),s("design:paramtypes",[a.NorthwindService])],e)}();t.MultipleResourceComponent=o},1398:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var s,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,i,a):s(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),a=i(1006),o=function(){function e(e){this.northwindService=e,this.scheduleData=e.getEvents(),this.currentdate=new Date(2017,5,5),this.group={resources:["Rooms","Owners"]},this.resourcelevel1={dataSource:[{text:"ROOM 1",id:1,groupId:1,color:"#cb6bb2"},{text:"ROOM 2",id:2,groupId:1,color:"#56ca85"},{text:"ROOM 3",id:3,groupId:1,color:"#f8a398"}],text:"text",id:"id",groupId:"groupId",color:"color"},this.allowMultiple=!0,this.resourcelevel2={dataSource:[{text:"Nancy",id:1,groupId:1,color:"#ffaa00"},{text:"Steven",id:3,groupId:2,color:"#f8a398"},{text:"Michael",id:5,groupId:1,color:"#51a0ed"},{text:"Laura",id:7,groupId:2,color:"#ffaa00"},{text:"Robert",id:8,groupId:1,color:"#f8a398"},{text:"Janet",id:4,groupId:2,color:"#51a0ed"},{text:"Milan",id:13,groupId:3,color:"#99ff99"},{text:"Paul",id:15,groupId:3,color:"#cc99ff"}],text:"text",id:"id",groupId:"groupId",color:"color"}}return e=n([r.Component({selector:"ej-app",template:i(1897),providers:[a.NorthwindService]}),s("design:paramtypes",[a.NorthwindService])],e)}();t.ResourceGroupComponent=o},1399:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var s,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,i,a):s(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),a=i(1006),o=function(){function e(e){this.northwindService=e,this.scheduleData=e.getEvents(),this.currentdate=new Date(2017,5,5),this.majorslot=60,this.minorslotcount=5}return e=n([r.Component({selector:"ej-app",template:i(1898),providers:[a.NorthwindService]}),s("design:paramtypes",[a.NorthwindService])],e)}();t.TimeScaleComponent=o},1508:function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),i(2046);var s=i(12),r=i(5),a=function(e){function t(t){var i=e.call(this,[])||this;return i.parent=t,i}return n(t,e),t.decorators=[{type:r.Directive,args:[{selector:"e-resources>e-resource"}]}],t.ctorParameters=function(){return[{type:s.EJComponents,decorators:[{type:r.Inject,args:[r.forwardRef(function(){return l})]}]}]},t.propDecorators={field:[{type:r.Input,args:["field"]}],title:[{type:r.Input,args:["title"]}],name:[{type:r.Input,args:["name"]}],allowMultiple:[{type:r.Input,args:["allowMultiple"]}],resourceSettings:[{type:r.Input,args:["resourceSettings"]}],resourceSettings_dataSource:[{type:r.Input,args:["resourceSettings.dataSource"]}],resourceSettings_text:[{type:r.Input,args:["resourceSettings.text"]}],resourceSettings_id:[{type:r.Input,args:["resourceSettings.id"]}],resourceSettings_groupId:[{type:r.Input,args:["resourceSettings.groupId"]}],resourceSettings_color:[{type:r.Input,args:["resourceSettings.color"]}],resourceSettings_start:[{type:r.Input,args:["resourceSettings.start"]}],resourceSettings_end:[{type:r.Input,args:["resourceSettings.end"]}],resourceSettings_workWeek:[{type:r.Input,args:["resourceSettings.workWeek"]}],resourceSettings_appointmentClass:[{type:r.Input,args:["resourceSettings.appointmentClass"]}]},t}(s.ComplexTagElement);t.ScheduleResourceDirective=a;var o=function(e){function t(t){return e.call(this,"resources")||this}return n(t,e),t.decorators=[{type:r.Directive,args:[{selector:"ej-schedule>e-resources",queries:{children:new r.ContentChildren(a)}}]}],t.ctorParameters=function(){return[{type:s.EJComponents,decorators:[{type:r.Inject,args:[r.forwardRef(function(){return l})]}]}]},t}(s.ArrayTagElement);t.ScheduleResourcesDirective=o;var l=function(e){function t(t,i,n,s){var a=e.call(this,"Schedule",t,i,["resources"],n,s)||this;return a.el=t,a.cdRef=i,a._ejIterableDiffers=n,a._ejkeyvaluediffers=s,a.appointmentSettings_dataSource_twoChange=new r.EventEmitter,a.currentView_twoChange=new r.EventEmitter,a.currentDate_twoChange=new r.EventEmitter,a.actionBegin_output=new r.EventEmitter,a.actionComplete_output=new r.EventEmitter,a.appointmentClick_output=new r.EventEmitter,a.beforeAppointmentRemove_output=new r.EventEmitter,a.beforeAppointmentChange_output=new r.EventEmitter,a.appointmentHover_output=new r.EventEmitter,a.beforeAppointmentCreate_output=new r.EventEmitter,a.appointmentWindowOpen_output=new r.EventEmitter,a.beforeContextMenuOpen_output=new r.EventEmitter,a.cellClick_output=new r.EventEmitter,a.cellDoubleClick_output=new r.EventEmitter,a.cellHover_output=new r.EventEmitter,a.create_output=new r.EventEmitter,a.destroy_output=new r.EventEmitter,a.drag_output=new r.EventEmitter,a.dragStart_output=new r.EventEmitter,a.dragStop_output=new r.EventEmitter,a.menuItemClick_output=new r.EventEmitter,a.navigation_output=new r.EventEmitter,a.queryCellInfo_output=new r.EventEmitter,a.reminder_output=new r.EventEmitter,a.resize_output=new r.EventEmitter,a.resizeStart_output=new r.EventEmitter,a.resizeStop_output=new r.EventEmitter,a.overflowButtonClick_output=new r.EventEmitter,a.overflowButtonHover_output=new r.EventEmitter,a.keyDown_output=new r.EventEmitter,a.appointmentCreated_output=new r.EventEmitter,a.appointmentChanged_output=new r.EventEmitter,a.appointmentRemoved_output=new r.EventEmitter,a}return n(t,e),t.decorators=[{type:r.Component,args:[{selector:"ej-schedule",template:""}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.ChangeDetectorRef},{type:r.IterableDiffers},{type:r.KeyValueDiffers}]},t.propDecorators={allowDragAndDrop_input:[{type:r.Input,args:["allowDragAndDrop"]}],allowInline_input:[{type:r.Input,args:["allowInline"]}],allowDelete_input:[{type:r.Input,args:["allowDelete"]}],allowKeyboardNavigation_input:[{type:r.Input,args:["allowKeyboardNavigation"]}],appointmentSettings_input:[{type:r.Input,args:["appointmentSettings"]}],appointmentTemplateId_input:[{type:r.Input,args:["appointmentTemplateId"]}],cssClass_input:[{type:r.Input,args:["cssClass"]}],categorizeSettings_input:[{type:r.Input,args:["categorizeSettings"]}],cellHeight_input:[{type:r.Input,args:["cellHeight"]}],cellWidth_input:[{type:r.Input,args:["cellWidth"]}],contextMenuSettings_input:[{type:r.Input,args:["contextMenuSettings"]}],dateFormat_input:[{type:r.Input,args:["dateFormat"]}],showAppointmentNavigator_input:[{type:r.Input,args:["showAppointmentNavigator"]}],enableAppointmentResize_input:[{type:r.Input,args:["enableAppointmentResize"]}],enableLoadOnDemand_input:[{type:r.Input,args:["enableLoadOnDemand"]}],enablePersistence_input:[{type:r.Input,args:["enablePersistence"]}],enableRTL_input:[{type:r.Input,args:["enableRTL"]}],endHour_input:[{type:r.Input,args:["endHour"]}],group_input:[{type:r.Input,args:["group"]}],height_input:[{type:r.Input,args:["height"]}],workHours_input:[{type:r.Input,args:["workHours"]}],isDST_input:[{type:r.Input,args:["isDST"]}],isResponsive_input:[{type:r.Input,args:["isResponsive"]}],locale_input:[{type:r.Input,args:["locale"]}],maxDate_input:[{type:r.Input,args:["maxDate"]}],minDate_input:[{type:r.Input,args:["minDate"]}],orientation_input:[{type:r.Input,args:["orientation"]}],prioritySettings_input:[{type:r.Input,args:["prioritySettings"]}],readOnly_input:[{type:r.Input,args:["readOnly"]}],reminderSettings_input:[{type:r.Input,args:["reminderSettings"]}],renderDates_input:[{type:r.Input,args:["renderDates"]}],resourceHeaderTemplateId_input:[{type:r.Input,args:["resourceHeaderTemplateId"]}],showAllDayRow_input:[{type:r.Input,args:["showAllDayRow"]}],showWeekend_input:[{type:r.Input,args:["showWeekend"]}],showCurrentTimeIndicator_input:[{type:r.Input,args:["showCurrentTimeIndicator"]}],showHeaderBar_input:[{type:r.Input,args:["showHeaderBar"]}],showLocationField_input:[{type:r.Input,args:["showLocationField"]}],showTimeZoneFields_input:[{type:r.Input,args:["showTimeZoneFields"]}],showQuickWindow_input:[{type:r.Input,args:["showQuickWindow"]}],startHour_input:[{type:r.Input,args:["startHour"]}],timeMode_input:[{type:r.Input,args:["timeMode"]}],timeZone_input:[{type:r.Input,args:["timeZone"]}],timeZoneCollection_input:[{type:r.Input,args:["timeZoneCollection"]}],views_input:[{type:r.Input,args:["views"]}],width_input:[{type:r.Input,args:["width"]}],enableRecurrenceValidation_input:[{type:r.Input,args:["enableRecurrenceValidation"]}],agendaViewSettings_input:[{type:r.Input,args:["agendaViewSettings"]}],firstDayOfWeek_input:[{type:r.Input,args:["firstDayOfWeek"]}],workWeek_input:[{type:r.Input,args:["workWeek"]}],tooltipSettings_input:[{type:r.Input,args:["tooltipSettings"]}],timeScale_input:[{type:r.Input,args:["timeScale"]}],showDeleteConfirmationDialog_input:[{type:r.Input,args:["showDeleteConfirmationDialog"]}],allDayCellsTemplateId_input:[{type:r.Input,args:["allDayCellsTemplateId"]}],workCellsTemplateId_input:[{type:r.Input,args:["workCellsTemplateId"]}],dateHeaderTemplateId_input:[{type:r.Input,args:["dateHeaderTemplateId"]}],showOverflowButton_input:[{type:r.Input,args:["showOverflowButton"]}],appointmentDragArea_input:[{type:r.Input,args:["appointmentDragArea"]}],showNextPrevMonth_input:[{type:r.Input,args:["showNextPrevMonth"]}],blockoutSettings_input:[{type:r.Input,args:["blockoutSettings"]}],appointmentSettings_query_input:[{type:r.Input,args:["appointmentSettings.query"]}],appointmentSettings_tableName_input:[{type:r.Input,args:["appointmentSettings.tableName"]}],appointmentSettings_applyTimeOffset_input:[{type:r.Input,args:["appointmentSettings.applyTimeOffset"]}],appointmentSettings_editFutureEventsOnly_input:[{type:r.Input,args:["appointmentSettings.editFutureEventsOnly"]}],appointmentSettings_id_input:[{type:r.Input,args:["appointmentSettings.id"]}],appointmentSettings_startTime_input:[{type:r.Input,args:["appointmentSettings.startTime"]}],appointmentSettings_endTime_input:[{type:r.Input,args:["appointmentSettings.endTime"]}],appointmentSettings_subject_input:[{type:r.Input,args:["appointmentSettings.subject"]}],appointmentSettings_description_input:[{type:r.Input,args:["appointmentSettings.description"]}],appointmentSettings_recurrence_input:[{type:r.Input,args:["appointmentSettings.recurrence"]}],appointmentSettings_recurrenceRule_input:[{type:r.Input,args:["appointmentSettings.recurrenceRule"]}],appointmentSettings_allDay_input:[{type:r.Input,args:["appointmentSettings.allDay"]}],appointmentSettings_resourceFields_input:[{type:r.Input,args:["appointmentSettings.resourceFields"]}],appointmentSettings_categorize_input:[{type:r.Input,args:["appointmentSettings.categorize"]}],appointmentSettings_location_input:[{type:r.Input,args:["appointmentSettings.location"]}],appointmentSettings_priority_input:[{type:r.Input,args:["appointmentSettings.priority"]}],appointmentSettings_startTimeZone_input:[{type:r.Input,args:["appointmentSettings.startTimeZone"]}],appointmentSettings_endTimeZone_input:[{type:r.Input,args:["appointmentSettings.endTimeZone"]}],categorizeSettings_allowMultiple_input:[{type:r.Input,args:["categorizeSettings.allowMultiple"]}],categorizeSettings_enable_input:[{type:r.Input,args:["categorizeSettings.enable"]}],categorizeSettings_dataSource_input:[{type:r.Input,args:["categorizeSettings.dataSource"]}],categorizeSettings_id_input:[{type:r.Input,args:["categorizeSettings.id"]}],categorizeSettings_text_input:[{type:r.Input,args:["categorizeSettings.text"]}],categorizeSettings_color_input:[{type:r.Input,args:["categorizeSettings.color"]}],categorizeSettings_fontColor_input:[{type:r.Input,args:["categorizeSettings.fontColor"]}],contextMenuSettings_enable_input:[{type:r.Input,args:["contextMenuSettings.enable"]}],contextMenuSettings_menuItems_input:[{type:r.Input,args:["contextMenuSettings.menuItems"]}],contextMenuSettings_menuItems_appointment_input:[{type:r.Input,args:["contextMenuSettings.menuItems.appointment"]}],contextMenuSettings_menuItems_cells_input:[{type:r.Input,args:["contextMenuSettings.menuItems.cells"]}],group_resources_input:[{type:r.Input,args:["group.resources"]}],group_allowGroupEditing_input:[{type:r.Input,args:["group.allowGroupEditing"]}],workHours_highlight_input:[{type:r.Input,args:["workHours.highlight"]}],workHours_start_input:[{type:r.Input,args:["workHours.start"]}],workHours_end_input:[{type:r.Input,args:["workHours.end"]}],prioritySettings_enable_input:[{type:r.Input,args:["prioritySettings.enable"]}],prioritySettings_dataSource_input:[{type:r.Input,args:["prioritySettings.dataSource"]}],prioritySettings_text_input:[{type:r.Input,args:["prioritySettings.text"]}],prioritySettings_value_input:[{type:r.Input,args:["prioritySettings.value"]}],prioritySettings_template_input:[{type:r.Input,args:["prioritySettings.template"]}],reminderSettings_enable_input:[{type:r.Input,args:["reminderSettings.enable"]}],reminderSettings_alertBefore_input:[{type:r.Input,args:["reminderSettings.alertBefore"]}],renderDates_start_input:[{type:r.Input,args:["renderDates.start"]}],renderDates_end_input:[{type:r.Input,args:["renderDates.end"]}],timeZoneCollection_dataSource_input:[{type:r.Input,args:["timeZoneCollection.dataSource"]}],timeZoneCollection_text_input:[{type:r.Input,args:["timeZoneCollection.text"]}],timeZoneCollection_id_input:[{type:r.Input,args:["timeZoneCollection.id"]}],timeZoneCollection_value_input:[{type:r.Input,args:["timeZoneCollection.value"]}],agendaViewSettings_daysInAgenda_input:[{type:r.Input,args:["agendaViewSettings.daysInAgenda"]}],agendaViewSettings_dateColumnTemplateId_input:[{type:r.Input,args:["agendaViewSettings.dateColumnTemplateId"]}],agendaViewSettings_timeColumnTemplateId_input:[{type:r.Input,args:["agendaViewSettings.timeColumnTemplateId"]}],tooltipSettings_enable_input:[{type:r.Input,args:["tooltipSettings.enable"]}],tooltipSettings_templateId_input:[{type:r.Input,args:["tooltipSettings.templateId"]}],timeScale_enable_input:[{type:r.Input,args:["timeScale.enable"]}],timeScale_minorSlotCount_input:[{type:r.Input,args:["timeScale.minorSlotCount"]}],timeScale_majorSlot_input:[{type:r.Input,args:["timeScale.majorSlot"]}],timeScale_minorSlotTemplateId_input:[{type:r.Input,args:["timeScale.minorSlotTemplateId"]}],timeScale_majorSlotTemplateId_input:[{type:r.Input,args:["timeScale.majorSlotTemplateId"]}],blockoutSettings_enable_input:[{type:r.Input,args:["blockoutSettings.enable"]}],blockoutSettings_templateId_input:[{type:r.Input,args:["blockoutSettings.templateId"]}],blockoutSettings_dataSource_input:[{type:r.Input,args:["blockoutSettings.dataSource"]}],blockoutSettings_query_input:[{type:r.Input,args:["blockoutSettings.query"]}],blockoutSettings_tableName_input:[{type:r.Input,args:["blockoutSettings.tableName"]}],blockoutSettings_id_input:[{type:r.Input,args:["blockoutSettings.id"]}],blockoutSettings_startTime_input:[{type:r.Input,args:["blockoutSettings.startTime"]}],blockoutSettings_endTime_input:[{type:r.Input,args:["blockoutSettings.endTime"]}],blockoutSettings_subject_input:[{type:r.Input,args:["blockoutSettings.subject"]}],blockoutSettings_isBlockAppointment_input:[{type:r.Input,args:["blockoutSettings.isBlockAppointment"]}],blockoutSettings_isAllDay_input:[{type:r.Input,args:["blockoutSettings.isAllDay"]}],blockoutSettings_resourceId_input:[{type:r.Input,args:["blockoutSettings.resourceId"]}],blockoutSettings_groupId_input:[{type:r.Input,args:["blockoutSettings.groupId"]}],blockoutSettings_customStyle_input:[{type:r.Input,args:["blockoutSettings.customStyle"]}],resources_input:[{type:r.Input,args:["resources"]}],options:[{type:r.Input,args:["options"]}],appointmentSettings_dataSource_two:[{type:r.Input,args:["appointmentSettings.dataSource"]}],appointmentSettings_dataSource_twoChange:[{type:r.Output,args:["appointmentSettings.dataSourceChange"]}],currentView_two:[{type:r.Input,args:["currentView"]}],currentView_twoChange:[{type:r.Output,args:["currentViewChange"]}],currentDate_two:[{type:r.Input,args:["currentDate"]}],currentDate_twoChange:[{type:r.Output,args:["currentDateChange"]}],actionBegin_output:[{type:r.Output,args:["actionBegin"]}],actionComplete_output:[{type:r.Output,args:["actionComplete"]}],appointmentClick_output:[{type:r.Output,args:["appointmentClick"]}],beforeAppointmentRemove_output:[{type:r.Output,args:["beforeAppointmentRemove"]}],beforeAppointmentChange_output:[{type:r.Output,args:["beforeAppointmentChange"]}],appointmentHover_output:[{type:r.Output,args:["appointmentHover"]}],beforeAppointmentCreate_output:[{type:r.Output,args:["beforeAppointmentCreate"]}],appointmentWindowOpen_output:[{type:r.Output,args:["appointmentWindowOpen"]}],beforeContextMenuOpen_output:[{type:r.Output,args:["beforeContextMenuOpen"]}],cellClick_output:[{type:r.Output,args:["cellClick"]}],cellDoubleClick_output:[{type:r.Output,args:["cellDoubleClick"]}],cellHover_output:[{type:r.Output,args:["cellHover"]}],create_output:[{type:r.Output,args:["create"]}],destroy_output:[{type:r.Output,args:["destroy"]}],drag_output:[{type:r.Output,args:["drag"]}],dragStart_output:[{type:r.Output,args:["dragStart"]}],dragStop_output:[{type:r.Output,args:["dragStop"]}],menuItemClick_output:[{type:r.Output,args:["menuItemClick"]}],navigation_output:[{type:r.Output,args:["navigation"]}],queryCellInfo_output:[{type:r.Output,args:["queryCellInfo"]}],reminder_output:[{type:r.Output,args:["reminder"]}],resize_output:[{type:r.Output,args:["resize"]}],resizeStart_output:[{type:r.Output,args:["resizeStart"]}],resizeStop_output:[{type:r.Output,args:["resizeStop"]}],overflowButtonClick_output:[{type:r.Output,args:["overflowButtonClick"]}],overflowButtonHover_output:[{type:r.Output,args:["overflowButtonHover"]}],keyDown_output:[{type:r.Output,args:["keyDown"]}],appointmentCreated_output:[{type:r.Output,args:["appointmentCreated"]}],appointmentChanged_output:[{type:r.Output,args:["appointmentChanged"]}],appointmentRemoved_output:[{type:r.Output,args:["appointmentRemoved"]}],tag_resources:[{type:r.ContentChild,args:[o]}]},t}(s.EJComponents);t.ScheduleComponent=l,t.EJ_SCHEDULE_COMPONENTS=[l,o,a]},1893:function(e,t){e.exports='<ej-schedule id="CategorizeSchedule"\r\n  width="100%"\r\n  height="525px"\r\n  [currentDate]=currentdate\r\n  [categorizeSettings.dataSource]=categorizeData\r\n  [categorizeSettings.enable]=categorizeenable\r\n  [categorizeSettings.allowMultiple]=categorizemultiple\r\n  categorizeSettings.id="id"\r\n  categorizeSettings.text="text"\r\n  categorizeSettings.color="color"\r\n  categorizeSettings.fontColor="fontColor"\r\n  [contextMenuSettings]=contextmenu\r\n  [appointmentSettings.dataSource]=scheduleData \r\n  appointmentSettings.id="Id"\r\n  appointmentSettings.subject="Subject" \r\n  appointmentSettings.startTime="StartTime" \r\n  appointmentSettings.endTime="EndTime"\r\n  appointmentSettings.allDay="AllDay"\r\n  appointmentSettings.recurrence="Recurrence"\r\n  appointmentSettings.recurrenceRule="RecurrenceRule"\r\n  appointmentSettings.categorize="Categorize" >\r\n</ej-schedule>'},1894:function(e,t){e.exports='<ej-schedule id="Schedule1"\r\n  width="100%"\r\n  height="525px"\r\n  currentView="week"\r\n  [currentDate]=currentdate \r\n  (create)="onCreate($event)"\r\n  [appointmentSettings.dataSource]=scheduleData \r\n  appointmentSettings.id="Id"\r\n  appointmentSettings.subject="Subject" \r\n  appointmentSettings.startTime="StartTime" \r\n  appointmentSettings.endTime="EndTime"\r\n  appointmentSettings.allDay="AllDay"\r\n  appointmentSettings.recurrence="Recurrence"\r\n  appointmentSettings.recurrenceRule="RecurrenceRule" style="display:block;">\r\n</ej-schedule>'},1895:function(e,t){e.exports='<ej-schedule id="HorizontalSchedule"\r\n  width="100%"\r\n  height="525px"\r\n  orientation="horizontal"\r\n  currentView="week"\r\n  [currentDate]=currentdate \r\n  [appointmentSettings.dataSource]=scheduleData \r\n  appointmentSettings.id="Id"\r\n  appointmentSettings.subject="Subject" \r\n  appointmentSettings.startTime="StartTime" \r\n  appointmentSettings.endTime="EndTime"\r\n  appointmentSettings.allDay="AllDay"\r\n  appointmentSettings.recurrence="Recurrence"\r\n  appointmentSettings.recurrenceRule="RecurrenceRule" >\r\n</ej-schedule>'},1896:function(e,t){e.exports='<ej-schedule id="MultipleResourceSchedule"\r\n  width="100%"\r\n  height="525px"\r\n  currentView="workweek"\r\n  [currentDate]=currentdate \r\n  [appointmentSettings.dataSource]=scheduleData \r\n  appointmentSettings.id="Id"\r\n  appointmentSettings.subject="Subject" \r\n  appointmentSettings.startTime="StartTime" \r\n  appointmentSettings.endTime="EndTime"\r\n  appointmentSettings.allDay="AllDay"\r\n  appointmentSettings.recurrence="Recurrence"\r\n  appointmentSettings.recurrenceRule="RecurrenceRule"\r\n  appointmentSettings.resourceFields="OwnerId"\r\n  [group]=group >\r\n  <e-resources>\r\n    <e-resource field="OwnerId" title="Owner" name="Owners" [allowMultiple]=allowMultiple [resourceSettings]=resourceData></e-resource>\r\n  </e-resources>\r\n</ej-schedule>'},1897:function(e,t){e.exports='<ej-schedule id="ResourceGroupSchedule"\r\n  width="100%"\r\n  height="525px"\r\n  currentView="workweek"\r\n  orientation="horizontal"\r\n  cellWidth="40px"  \r\n  [currentDate]=currentdate \r\n  [appointmentSettings.dataSource]=scheduleData \r\n  appointmentSettings.id="Id"\r\n  appointmentSettings.subject="Subject" \r\n  appointmentSettings.startTime="StartTime" \r\n  appointmentSettings.endTime="EndTime"\r\n  appointmentSettings.allDay="AllDay"\r\n  appointmentSettings.recurrence="Recurrence"\r\n  appointmentSettings.recurrenceRule="RecurrenceRule"\r\n  appointmentSettings.resourceFields="RoomId,OwnerId"\r\n  [group]=group >\r\n  <e-resources>\r\n     <e-resource field="RoomId" title="Room" name="Rooms" [resourceSettings]=resourcelevel1></e-resource>\r\n     <e-resource field="OwnerId" title="Owner" name="Owners" [allowMultiple]=allowMultiple [resourceSettings]=resourcelevel2></e-resource>    \r\n  </e-resources>\r\n</ej-schedule>'},1898:function(e,t){e.exports='<ej-schedule id="TimescaleSchedule"\r\n  width="100%"\r\n  height="525px"\r\n  [currentDate]=currentdate\r\n  [timeScale.majorSlot]=majorslot\r\n  [timeScale.minorSlotCount]=minorslotcount \r\n  [appointmentSettings.dataSource]=scheduleData \r\n  appointmentSettings.id="Id"\r\n  appointmentSettings.subject="Subject" \r\n  appointmentSettings.startTime="StartTime" \r\n  appointmentSettings.endTime="EndTime"\r\n  appointmentSettings.allDay="AllDay"\r\n  appointmentSettings.recurrence="Recurrence"\r\n  appointmentSettings.recurrenceRule="RecurrenceRule" >\r\n</ej-schedule>'},2044:function(e,t,i){var n,s,r;
/*!
*  filename: ej.recurrenceeditor.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.recurrenceeditor.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(a){s=[i(15),i(94),i(4),i(16),i(47),i(31),i(95),i(92),i(221),i(98),i(93)],void 0===(r="function"==typeof(n=a)?n.apply(t,s):n)||(e.exports=r)}(function(){var e=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};!function(t){var i=function(i){function n(e,n){return i.call(this),this.defaults={frequencies:["never","daily","weekly","monthly","yearly","everyweekday"],firstDayOfWeek:null,enableSpinners:!0,startDate:new Date,locale:"en-US",enableRTL:!1,value:"",dateFormat:"",selectedRecurrenceType:0,minDate:new Date(1900,1,1),maxDate:new Date(2099,12,31),cssClass:"",change:null,create:null},this.dataTypes={frequencies:"array",enableSpinners:"boolean",enableRTL:"boolean"},this.rootCSS="e-recurrenceeditor",this.PluginName="ejRecurrenceEditor",this._id="null",this.validTags=["div"],this.model=this.defaults,e&&(this._id=e[0].id,e.jquery||(e=t("#"+e)),e.length)?t(e).ejRecurrenceEditor(n).data(this.PluginName):void 0}return e(n,i),n.prototype.setModel=function(e,t){this.setModel(e,t)},n.prototype.option=function(e,t){this.option(e,t)},n.prototype._setModel=function(e){var i=!1;for(var n in e){switch(n){case"frequencies":this.model.frequencies=e[n],i=!0;break;case"firstDayOfWeek":this.model.firstDayOfWeek=this._firstDayOfWeek=e[n],i=!0;break;case"enableSpinners":this.model.enableSpinners=e[n],i=!0;break;case"startDate":"string"==t.type(e[n])?this._currentDateFormat(this.model.dateFormat):"function"==t.type(e[n])&&"string"==t.type(ej.util.getVal(e[n]))&&(this.model.startDate=ej.parseDate(this.model.startDate.toString(),this._datepattern())),this.model.startDate<this.model.minDate&&(this.model.startDate=this.model.minDate),this.model.startDate>this.model.maxDate&&(this.model.startDate=this.model.maxDate),this._recurrenceContent.find(".recurstartdate").ejDatePicker("option","value",this.model.startDate);break;case"locale":this.model.locale=e[n],i=!0;break;case"enableRTL":this.model.enableRTL=e[n],this._recurrenceLayout.addClass("e-rtl");break;case"value":this.model.value=e[n];break;case"dateFormat":this.model.dateFormat=e[n],this._recurrenceContent.find(".recurstartdate").ejDatePicker("option","dateFormat",this.model.dateFormat),this._recurrenceContent.find(".until").ejDatePicker("option","dateFormat",this.model.dateFormat);break;case"selectedRecurrenceType":this.model.selectedRecurrenceType=e[n],this._recurrenceLayout.find(".e-recurrencetype").ejDropDownList({selectedItemIndex:this.model.selectedRecurrenceType});break;case"minDate":case"maxDate":this._currentDateFormat(this.model.dateFormat),this._recurrenceContent.find(".recurstartdate").ejDatePicker({minDate:this.model.minDate,maxDate:this.model.maxDate});break;case"cssClass":this.model.cssClass=e[n],this.element.removeClass(this.model.cssClass).addClass(e[n])}1==i&&this._render()}},n.prototype._init=function(){ej.isNullOrUndefined(this.element)||this._render()},n.prototype._destroy=function(){var e,i,n;for(this.element.off(),e=this.element.find(".e-datepicker,.e-dropdownlist"),i=0;i<e.length;i++)(n=t(e[i])).hasClass("e-datepicker")?n.ejDatePicker("destroy"):n.hasClass("e-dropdownlist")&&n.ejDropDownList("destroy");this.element.empty().removeClass("e-recurrenceeditor")},n.prototype._render=function(){var e,i;for(t("#"+this._id+"recurrenceeditor").remove(),this._currentDateFormat(this.model.dateFormat),this._initializePrivateProperties(),e="number"==typeof innerWidth&&window.innerWidth>document.documentElement.clientWidth,this._mediaQuery=!("msie"==this._browserInfo.name&&parseInt(this._browserInfo.version,10)<=8)&&(document.documentElement.clientWidth+(e?17:0)<361||ej.isMobile()),this.model.frequencies=this.model.frequencies.toString().toLowerCase().split(","),i=0;i<this.model.frequencies.length;i++)this.model.frequencies[i]="everyweekday"==this.model.frequencies[i]?"EveryWeekDay":this.model.frequencies[i].replace(/^./,function(e){return e.toUpperCase()});this._renderRecurrenceEditor()},n.prototype._initializePrivateProperties=function(){this._rRule={},this.flag=!0,this._subControlChange=!1,this._culture=ej.preferredCulture(this.model.locale),this._dayNamesArray=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],this._firstDayOfWeek=null!=this.model.firstDayOfWeek?"string"==typeof this.model.firstDayOfWeek?this._dayNamesArray.indexOf(this.model.firstDayOfWeek.toString().toLowerCase()):this.model.firstDayOfWeek:this._culture.calendar.firstDay,this._monthNames=this._culture.calendar.months.names,this._pattern=this._culture.calendar.patterns,this._browserInfo=ej.browserInfo(),this._dayNamesValue=["SU","MO","TU","WE","TH","FR","SA"],this._dayNames=[],this._dayShortNames=[],this._dayFullNames=[];var e=this._firstDayOfWeek;do{e>6&&(e=0),this._dayFullNames.push(this._culture.calendar.days.names[e]),this._dayShortNames.push(this._culture.calendar.days.namesAbbr[e]),this._dayNames.push(this._dayNamesValue[e]),e++}while(this._dayNames.length<7);this._mediaQuery=!1},n.prototype._currentDateFormat=function(e){var i,n,s,r;ej.isNullOrUndefined(e)||"date"==t.type(this.model.startDate)&&"date"==t.type(this.model.minDate)&&"date"==t.type(this.model.maxDate)?"MM/dd/yyyy"==e&&("date"!=t.type(this.model.startDate)||"date"!=t.type(this.model.minDate)||"date"!=t.type(this.model.maxDate))&&(r=ej.parseDate(this.model.startDate.toString(),e),i=ej.parseDate(this.model.minDate.toString(),e),n=ej.parseDate(this.model.maxDate.toString(),e),this.model.startDate=ej.isNullOrUndefined(r)?this.model.startDate:r,this.model.minDate=ej.isNullOrUndefined(i)?this.model.minDate:i,this.model.maxDate=ej.isNullOrUndefined(n)?this.model.maxDate:n):(s=ej.parseDate(this.model.startDate.toString(),this.model.dateFormat),i=ej.parseDate(this.model.minDate.toString(),this.model.dateFormat),n=ej.parseDate(this.model.maxDate.toString(),this.model.dateFormat),this.model.startDate=ej.isNullOrUndefined(s)?"Invalid Date"==new Date(this.model.startDate.toString()).toString()||"NaN"==new Date(this.model.startDate.toString()).toString()?this._dateConvert(this.model.startDate):new Date(this.model.startDate.toString()):s,this.model.minDate=ej.isNullOrUndefined(i)?"Invalid Date"==new Date(this.model.minDate.toString()).toString()||"NaN"==new Date(this.model.minDate.toString()).toString()?this._dateConvert(this.model.minDate):new Date(this.model.minDate.toString()):i,this.model.maxDate=ej.isNullOrUndefined(n)?"Invalid Date"==new Date(this.model.maxDate.toString()).toString()||"NaN"==new Date(this.model.maxDate.toString()).toString()?this._dateConvert(this.model.maxDate):new Date(this.model.maxDate.toString()):n)},n.prototype._renderRecurrenceEditor=function(){var e,i;for(this._recurrenceLayout=ej.buildTag("div#"+this._id+"recurrenceeditor","",{},{}),this.model.enableRTL&&this._recurrenceLayout.addClass("e-rtl"),e="<table style='width:100%'><tr><td style='width:20%'><div class='e-textlabel'>"+this._getLocalizedLabels("Repeat")+":</div></td><td><input class='e-recurrencetype' id='"+this._id+"_recurrenceType' type='text' name='RecurrenceType' value='' /></td></tr></table><div id='"+this._id+"_recurtypelist'><ul>",i=0;i<this.model.frequencies.length;i++)e+="<li>"+this._getLocalizedLabels(this.model.frequencies[i])+"</li>";e+="</ul></div>",this.element.append(this._recurrenceLayout.append(e)),this._renderRecurrenceContent(),this._initialSubControlRender=!0,this._recurrenceLayout.find(".e-recurrencetype").ejDropDownList({enableRTL:this.model.enableRTL,targetID:this._id+"_recurtypelist",width:this._mediaQuery?"140px":"33%",change:t.proxy(this._recurrenceTypeChange,this),cssClass:this.model.cssClass}),this._recurrenceLayout.find(".e-recurrencetype").ejDropDownList({selectedItemIndex:this.model.selectedRecurrenceType})},n.prototype._renderRecurrenceContent=function(){for(var e,t,i,n,s,r,a,o,l,d,h=0;h<this._dayNames.length;h++)this._dayNames[h]=this._dayNames[h].toUpperCase();if(e=[this._getLocalizedLabels("First"),this._getLocalizedLabels("Second"),this._getLocalizedLabels("Third"),this._getLocalizedLabels("Fourth"),this._getLocalizedLabels("Last")],t=this.model.enableRTL?"margin-right":"margin-left",this._recurrenceContent=ej.buildTag("div.e-recurrencecontent#"+this._id+"recurrencecontent","",{},{}),this._mediaQuery){for(i="<form id='"+this._id+"_recurrenceForm'><table class='e-table' width='100%' cellpadding='7'><tbody>",i+="<tr id='"+this._id+"_every' style='display:none'><td width='16%' id='everylabel' class='e-textlabel'>"+this._getLocalizedLabels("Every")+":</td><td id='everycount' class='e-tdpadding'><table><tr><td><div class='e-floatleft'><input id='"+this._id+"_recurevery' class='recurevery' type='text' /></div></td><td><div id='"+this._id+"_recurtypes' class='e-appcheckbox e-labelcursor'>"+this._getLocalizedLabels("RecurrenceDay")+"</div></td></tr></table></td></tr>",i+="<tr id='"+this._id+"_weekly' class='"+this._id+"_weekly' style='display:none'><td colspan='2' id='weeklabel' class='e-textlabel'><div>"+this._getLocalizedLabels("RepeatOn")+":</div></td></tr><tr class='"+this._id+"_weekly' style='display:none'><td colspan='2' id='weekcount'><table class='e-table' cellpadding='3'><tr>",n=0;n<this._dayShortNames.length;n++)i+="<td><div class='e-weekday "+this._dayShortNames[n]+"'><input id='"+this._id+"_"+this._dayNames[n]+"' class='weekdays e-weekly"+this._dayNames[n]+"'name='weekdays_ "+this._dayNames[n]+"' type='checkbox'/><label class='e-textmargin' for='"+this._id+"_"+this._dayNames[n]+"'>"+this._dayShortNames[n]+"</label></div></td>";for(i+="</tr></table></td></tr>",i+="<tr id='"+this._id+"_monthly' class='"+this._id+"_monthly' style='display:none'><td colspan='2' id='monthlabel' class='e-recurendslabel'><div class='e-recurendsalign'>"+this._getLocalizedLabels("RepeatBy")+":</div></td></tr><tr class='"+this._id+"_monthly' style='display:none'><td colspan='2' id='monthcount'><table class='e-table' cellpadding='3'><tr id='monthdaytr'><td><div><input id='"+this._id+"_monthday' class='monthdaytype' name='"+this._id+"_monthday' type='radio'/><label class='e-textmargin' for='"+this._id+"_monthday'>"+this._getLocalizedLabels("Day")+"</label></div></td><td><div><input id='"+this._id+"_monthdate' class='monthdate' type='text'/></div></td></tr><tr id='monthweekdaytr'><td><div><input id='"+this._id+"_monthon' class='monthposition' name='"+this._id+"_monthday' type='radio'/><label class='e-textmargin' for='"+this._id+"_monthon'>"+this._getLocalizedLabels("The")+"</label></div></td><td><div><input id='"+this._id+"_monthsrt' class='monthsrt' type='text' name='monthsrt' value=''/><div id='"+this._id+"_monthsrtlist'><ul>",s=0;s<e.length;s++)i+="<li>"+e[s]+"</li>";for(i+="</div></div></td>",i+="<td><div class='e-appcheckbox e-labelcursor'><input id='"+this._id+"_monthsrtday' class='e-monthsrtday monthsrtday' type='text' name='monthsrtday' value=''/><div id='"+this._id+"_monthsrtdaylist'><ul>",r=0;r<this._dayFullNames.length;r++)i+="<li>"+this._dayFullNames[r]+"</li>";for(i+="</div></div></td></tr></table></td></tr>",i+="<tr id='"+this._id+"_yearly' class='"+this._id+"_yearly' style='display:none'><td colspan='2' id='yearlabel' class='e-recurendslabel'><div class='e-recurendsalign'>"+this._getLocalizedLabels("RepeatBy")+":</div></td></tr><tr class='"+this._id+"_yearly' style='display:none'><td colspan='2' id='yearcount' ><table class='e-table' cellpadding='3'><tr id='yeardaytr'><td><div><input id='"+this._id+"_yearday' class='yearrecurday' name='"+this._id+"_yearday' type='radio'/><label class='e-textmargin' for='"+this._id+"_yearday'>"+this._getLocalizedLabels("The")+"</label></div></td><td><div class='e-controlalign'><input id='"+this._id+"_yearmonth' class='yearmonth' type='text' name='yearmonth' value=''/></div></td><div id='"+this._id+"_yearmonthlist'><ul>",a=0;a<this._monthNames.length-1;a++)i+="<li>"+this._monthNames[a]+"</li>";for(i+="</ul></div><td><input id='"+this._id+"_yeardate' class='yeardate' text='text'/></td></tr><tr id='yearweekdaytr'><td><div><input id='"+this._id+"_yearother' class='yearrecurposi' name='"+this._id+"_yearday' type='radio'/><label class='e-textmargin' for='"+this._id+"_yearother'>"+this._getLocalizedLabels("The")+"</label></div></td><td><div><input id='"+this._id+"_yearsrt' class='yearsrt' type='text' name='yearsrt' value=''/><div id='"+this._id+"_yearsrtlist'><ul>",o=0;o<e.length;o++)i+="<li>"+e[o]+"</li>";for(i+="</ul></div></div></td><td><div class='e-controlalign'><input id='"+this._id+"_yearsrtday' class='yearsrtday' type='text' name='yearsrtday' value=''/><div id='"+this._id+"_yearsrtdaylist'><ul>",l=0;l<this._dayFullNames.length;l++)i+="<li>"+this._dayFullNames[l]+"</li>";for(i+="</ul></div></div></td><td><div><span>"+this._getLocalizedLabels("OfEvery")+"</span></div></td></tr><tr><td></td><td><div><input id='"+this._id+"_yearsrtmonth' class='yearsrtmonth' type='text' name='yearsrtmonth' value=''/><div id='"+this._id+"_yearsrtmonthlist'><ul>",d=0;d<this._monthNames.length-1;d++)i+="<li>"+this._monthNames[d]+"</li>";i+="</ul></div></div></td></tr></table></td></tr>",i+="<tr id='"+this._id+"_startson' ><td colspan='2' id='startsonlabel' class='e-textlabel'>"+this._getLocalizedLabels("StartsOn")+":</td></tr><tr><td colspan='2' id='startsoncount'><input id='"+this._id+"_recurstartdate' class='recurstartdate' type='text' name='RecurStartDate' value=''/></td></tr>",i+="<tr id='"+this._id+"_endson' ><td colspan='2' id='endsonlabel' class='e-recurendslabel'><div class='e-recurendsalign'>"+this._getLocalizedLabels("Ends")+":</div></td></tr><tr><td colspan='2' id='endsoncount'><table class='e-table' cellpadding='3'><tr id='endsonnever'><td><div><input id='"+this._id+"_repeatendnever' class='recurends e-recurnoend' type='radio' name='"+this._id+"_repeatend' value='Never'/><label class='e-textmargin' for='"+this._id+"_repeatendnever'>"+this._getLocalizedLabels("Never")+"</label></div></td></tr><tr id='endsonafter'><td><div><input id='"+this._id+"_repeatendafter' class='recurends e-recurafter' type='radio' name='"+this._id+"_repeatend'/><label class='e-textmargin' for='"+this._id+"_repeatendafter'>"+this._getLocalizedLabels("After")+"</label></div></td><td><div><input id='"+this._id+"_recurcount' class='recurcount' type='text'/></div></td><td><span class='e-labelcursor' style='"+t+": -80px;'>"+this._getLocalizedLabels("Occurrence")+"</span></td></tr><tr id='endsonuntil'><td><div><input id='"+this._id+"_repeatendon' class='recurends e-recuruntil' type='radio' name='"+this._id+"_repeatend'/><label class='e-textmargin' for='"+this._id+"_repeatendon'>"+this._getLocalizedLabels("On")+"</label></div></td><td><input id='"+this._id+"_daily' class='e-until until' type='text' name='daily' value=''/></td></tr>  </table></td></tr>",i+="<tr style='display:none'><td><span class='e-textlabel'>Summary:</span></td><td><span class=e-recurRule></span></td></tr></tbody></table></form>"}else{for(i="<form id='"+this._id+"_recurrenceForm'><table class='e-table' width='100%' cellpadding='7'><tbody>",i+="<tr id='"+this._id+"_every' style='display:none'><td width='20%' id='everylabel' class='e-textlabel'>"+this._getLocalizedLabels("Every")+":</td><td id='everycount' class='e-tdpadding'><table><tr><td><div class='e-floatleft'><input id='"+this._id+"_recurevery' class='recurevery' type='text' /></div></td><td><div id='"+this._id+"_recurtypes' class='e-appcheckbox e-labelcursor'>"+this._getLocalizedLabels("RecurrenceDay")+"</div></td></tr></table></td></tr>",i+="<tr id='"+this._id+"_weekly' class='"+this._id+"_weekly' style='display:none'><td id='weeklabel' class='e-textlabel'><div>"+this._getLocalizedLabels("RepeatOn")+":</div></td><td id='weekcount'><table class='e-table' cellpadding='3'><tr>",n=0;n<this._dayShortNames.length;n++)i+="<td><div class='e-weekday "+this._dayShortNames[n]+"'><input id='"+this._id+"_"+this._dayNames[n]+"' class='weekdays e-weekly"+this._dayNames[n]+"'name='weekdays_ "+this._dayNames[n]+"' type='checkbox'/><label class='e-textmargin' for='"+this._id+"_"+this._dayNames[n]+"'>"+this._dayShortNames[n]+"</label></div></td>";for(i+="</tr></table></td></tr>",i+="<tr id='"+this._id+"_monthly' class='"+this._id+"_monthly' style='display:none'><td id='monthlabel' class='e-recurendslabel'><div class='e-recurendsalign'>"+this._getLocalizedLabels("RepeatBy")+":</div></td><td id='monthcount'><table class='e-table' cellpadding='3'><tr id='monthdaytr'><td><div><input id='"+this._id+"_monthday' class='monthdaytype' name='"+this._id+"_monthday' type='radio'/><label class='e-textmargin' for='"+this._id+"_monthday'>"+this._getLocalizedLabels("Day")+"</label></div></td><td><div><input id='"+this._id+"_monthdate' class='monthdate' type='text'/></div></td></tr><tr id='monthweekdaytr'><td><div><input id='"+this._id+"_monthon' class='monthposition' name='"+this._id+"_monthday' type='radio'/><label class='e-textmargin' for='"+this._id+"_monthon'>"+this._getLocalizedLabels("The")+"</label></div></td><td><div><input id='"+this._id+"_monthsrt' class='monthsrt' type='text' name='monthsrt' value=''/><div id='"+this._id+"_monthsrtlist'><ul>",s=0;s<e.length;s++)i+="<li>"+e[s]+"</li>";for(i+="</div></div></td>",i+="<td><div class='e-appcheckbox e-labelcursor'><input id='"+this._id+"_monthsrtday' class='e-monthsrtday monthsrtday' type='text' name='monthsrtday' value=''/><div id='"+this._id+"_monthsrtdaylist'><ul>",r=0;r<this._dayFullNames.length;r++)i+="<li>"+this._dayFullNames[r]+"</li>";for(i+="</div></div></td></tr></table></td></tr>",i+="<tr id='"+this._id+"_yearly' class='"+this._id+"_yearly' style='display:none'><td id='yearlabel' class='e-recurendslabel'><div class='e-recurendsalign'>"+this._getLocalizedLabels("RepeatBy")+":</div></td><td id='yearcount' ><table class='e-table' cellpadding='3'><tr id='yeardaytr'><td><div><input id='"+this._id+"_yearday' class='yearrecurday' name='"+this._id+"_yearday' type='radio'/><label class='e-textmargin' for='"+this._id+"_yearday'>"+this._getLocalizedLabels("The")+"</label></div></td><td><div class='e-controlalign'><input id='"+this._id+"_yearmonth' class='yearmonth' type='text' name='yearmonth' value=''/></div></td><div id='"+this._id+"_yearmonthlist'><ul>",a=0;a<this._monthNames.length-1;a++)i+="<li>"+this._monthNames[a]+"</li>";for(i+="</ul></div><td><input id='"+this._id+"_yeardate' class='yeardate' text='text'/></td></tr><tr id='yearweekdaytr'><td><div><input id='"+this._id+"_yearother' class='yearrecurposi' name='"+this._id+"_yearday' type='radio'/><label class='e-textmargin' for='"+this._id+"_yearother'>"+this._getLocalizedLabels("The")+"</label></div></td><td><div><input id='"+this._id+"_yearsrt' class='yearsrt' type='text' name='yearsrt' value=''/><div id='"+this._id+"_yearsrtlist'><ul>",o=0;o<e.length;o++)i+="<li>"+e[o]+"</li>";for(i+="</ul></div></div></td><td><div class='e-controlalign'><input id='"+this._id+"_yearsrtday' class='yearsrtday' type='text' name='yearsrtday' value=''/><div id='"+this._id+"_yearsrtdaylist'><ul>",l=0;l<this._dayFullNames.length;l++)i+="<li>"+this._dayFullNames[l]+"</li>";for(i+="</ul></div></div></td><td><div><span>"+this._getLocalizedLabels("OfEvery")+"</span></div></td><td><div><input id='"+this._id+"_yearsrtmonth' class='yearsrtmonth' type='text' name='yearsrtmonth' value=''/><div id='"+this._id+"_yearsrtmonthlist'><ul>",d=0;d<this._monthNames.length-1;d++)i+="<li>"+this._monthNames[d]+"</li>";i+="</ul></div></div></td></tr></table></td></tr>",i+="<tr id='"+this._id+"_startson' style='display:none'><td width='20%' id='startsonlabel' class='e-textlabel'>"+this._getLocalizedLabels("StartsOn")+":</td><td id='startsoncount'><input id='"+this._id+"_recurstartdate' class='recurstartdate' type='text' name='RecurStartDate' value=''/></td></tr>",i+="<tr id='"+this._id+"_endson' style='display:none'><td id='endsonlabel' class='e-recurendslabel'><div class='e-recurendsalign'>"+this._getLocalizedLabels("Ends")+":</div></td><td id='endsoncount'><table class='e-table' cellpadding='3'><tr id='endsonnever'><td><div><input id='"+this._id+"_repeatendnever' class='recurends e-recurnoend' type='radio' name='"+this._id+"_repeatend' value='Never'/><label class='e-textmargin' for='"+this._id+"_repeatendnever'>"+this._getLocalizedLabels("Never")+"</label></div></td></tr><tr id='endsonafter'><td><div><input id='"+this._id+"_repeatendafter' class='recurends e-recurafter' type='radio' name='"+this._id+"_repeatend'/><label class='e-textmargin' for='"+this._id+"_repeatendafter'>"+this._getLocalizedLabels("After")+"</label></div></td><td><div><input id='"+this._id+"_recurcount' class='recurcount' type='text'/></div></td><td><span class='e-labelcursor' style='"+t+": -80px;'>"+this._getLocalizedLabels("Occurrence")+"</span></td></tr><tr id='endsonuntil'><td><div><input id='"+this._id+"_repeatendon' class='recurends e-recuruntil' type='radio' name='"+this._id+"_repeatend'/><label class='e-textmargin' for='"+this._id+"_repeatendon'>"+this._getLocalizedLabels("On")+"</label></div></td><td><input id='"+this._id+"_daily' class='e-until until' type='text' name='daily' value=''/></td></tr>  </table></td></tr>",i+="<tr style='display:none'><td><span class='e-textlabel'>Summary:</span></td><td><span class=e-recurRule></span></td></tr></tbody></table></form>"}this._recurrenceLayout.append(this._recurrenceContent.append(i)),this._renderControls()},n.prototype._renderControls=function(){var e=this._recurrenceContent;e.find(".weekdays").ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,change:t.proxy(this._weeklyClick,this)}),e.find(".monthsrt").ejDropDownList({enableRTL:this.model.enableRTL,targetID:this._id+"_monthsrtlist",width:"100px",cssClass:this.model.cssClass,change:t.proxy(this._monthSrt,this)}),e.find(".monthsrtday").ejDropDownList({enableRTL:this.model.enableRTL,targetID:this._id+"_monthsrtdaylist",width:"100px",cssClass:this.model.cssClass,change:t.proxy(this._monthSrt,this)}),e.find(".yearsrt").ejDropDownList({enableRTL:this.model.enableRTL,targetID:this._id+"_yearsrtlist",width:"100px",cssClass:this.model.cssClass,change:t.proxy(this._yearsrt,this)}),e.find(".yearmonth").ejDropDownList({enableRTL:this.model.enableRTL,targetID:this._id+"_yearmonthlist",width:"100px",cssClass:this.model.cssClass,change:t.proxy(this._yearmonth,this)}),e.find(".yearsrtday").ejDropDownList({enableRTL:this.model.enableRTL,targetID:this._id+"_yearsrtdaylist",width:"100px",cssClass:this.model.cssClass,change:t.proxy(this._yearsrt,this)}),e.find(".yearsrtmonth").ejDropDownList({enableRTL:this.model.enableRTL,targetID:this._id+"_yearsrtmonthlist",width:"100px",cssClass:this.model.cssClass,change:t.proxy(this._yearsrt,this)}),e.find(".recurstartdate").ejDatePicker({buttonText:"Today",startDay:this._firstDayOfWeek,enableRTL:this.model.enableRTL,locale:this.model.locale,cssClass:this.model.cssClass,dateFormat:this.model.dateFormat,value:this.model.startDate,minDate:this.model.minDate,maxDate:this.model.maxDate,change:t.proxy(this._startDateChange,this)}),e.find(".until").ejDatePicker({buttonText:"Today",startDay:this._firstDayOfWeek,enableRTL:this.model.enableRTL,locale:this.model.locale,cssClass:this.model.cssClass,dateFormat:this.model.dateFormat,change:t.proxy(this._recurUntil,this)}),e.find(".recurcount").ejNumericTextbox({enableRTL:this.model.enableRTL,showSpinButton:this.model.enableSpinners,name:"recurcount",minValue:1,value:10,width:"65px",decimalPlaces:0,cssClass:this.model.cssClass,change:t.proxy(this._recurCount,this)}),e.find(".recurevery").ejNumericTextbox({enableRTL:this.model.enableRTL,showSpinButton:this.model.enableSpinners,name:"recurevery",minValue:1,value:1,decimalPlaces:0,width:"100px",cssClass:this.model.cssClass,change:t.proxy(this._everyCount,this)}),e.find(".monthdate").ejNumericTextbox({enableRTL:this.model.enableRTL,showSpinButton:this.model.enableSpinners,name:"monthdate",minValue:1,decimalPlaces:0,maxValue:31,value:1,width:"70px",cssClass:this.model.cssClass,change:t.proxy(this._monthDate,this)}),e.find(".yeardate").ejNumericTextbox({enableRTL:this.model.enableRTL,showSpinButton:this.model.enableSpinners,name:"yeardate",minValue:1,decimalPlaces:0,maxValue:31,value:1,width:"70px",cssClass:this.model.cssClass,change:t.proxy(this._yearmonth,this)}),e.find(".recurends").ejRadioButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,change:t.proxy(this._recurEndChange,this)}),e.find(".monthposition,.monthdaytype").ejRadioButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,change:t.proxy(this._recurEndChange,this)}),e.find(".yearrecurposi,.yearrecurday").ejRadioButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,change:t.proxy(this._recurEndChange,this)})},n.prototype._recurrenceTypeChange=function(e){this._recurrenceType(e),""!=this._rRuleFreq&&this.closeRecurPublic(),""==this._rRuleFreq&&(this._recRule=void 0),this._trigger("change",{recurrenceRule:this._recRule})},n.prototype._recurrenceType=function(e){var i,n,s;if(this._rRuleFreq="",i="",n="string"==t.type(this.model.startDate)?this._dateConvert(this.model.startDate):this.model.startDate,this.flag&&(this._subControlChange=!0,this._recurrenceContent.find(".until").ejDatePicker({value:new Date(new Date(n.toDateString()).setDate(new Date(n.toDateString()).getDate()+70))}),this._subControlChange=!1,this._recurrenceContent.find(".e-recurnoend").ejRadioButton({checked:!0}),this.flag=!1),this._mediaQuery||this._recurrenceContent.find("#"+this._id+"_startson,#"+this._id+"_endson").css("display","table-row"),null!=e.itemId){switch(this._recurrenceContent.find("#"+this._id+"_every").css("display","table-row"),this._getLocalizedLabels(this.model.frequencies[e.itemId])){case this._getLocalizedLabels("Never"):this._recurrenceContent.css("display","none");break;case this._getLocalizedLabels("Daily"):this._recurrenceContent.css("display","block"),this._recurrenceContent.find("#"+this._id+"_recurtypes").get(0).innerHTML=this._getLocalizedLabels("RecurrenceDay"),this._recurrenceContent.find("."+this._id+"_weekly,."+this._id+"_monthly,."+this._id+"_yearly").css("display","none"),this._rRuleFreq="DAILY",i=this._getLocalizedLabels("RecurrenceDay").toLowerCase();break;case this._getLocalizedLabels("Weekly"):this._recurrenceContent.css("display","block"),this._recurrenceContent.find("#"+this._id+"_recurtypes").get(0).innerHTML=this._getLocalizedLabels("RecurrenceWeek"),s=this._dayShortNames.indexOf(ej.format(n,"ddd",this.model.locale)),this._initialSubControlRender=!0,this._recurrenceContent.find(".e-weekly"+this._dayNames[s]).ejCheckBox({checked:!0}),i=this._getLocalizedLabels("RecurrenceWeek").toLowerCase()+" "+this._getLocalizedLabels("On").toLowerCase()+" "+this._dayFullNames[n.getDay()],this._rRuleFreq="WEEKLY",this._recurrenceContent.find("."+this._id+"_monthly,."+this._id+"_yearly").css("display","none"),this._recurrenceContent.find("."+this._id+"_weekly").css("display","table-row");break;case this._getLocalizedLabels("Monthly"):this._recurrenceContent.css("display","block"),this._recurrenceContent.find("#"+this._id+"_recurtypes").get(0).innerHTML=this._getLocalizedLabels("RecurrenceMonth"),this._recurrenceContent.find("."+this._id+"_weekly,."+this._id+"_yearly").css("display","none"),this._recurrenceContent.find("."+this._id+"_monthly").css("display","table-row"),this._initialSubControlRender=!0,this._recurrenceContent.find(".monthdate").ejNumericTextbox({value:n.getDate()}),this._recurrenceContent.find(".monthsrtday").ejDropDownList({selectedItemIndex:this._dayNames.indexOf(ej.format(n,"ddd","en-US").substr(0,2).toUpperCase())}),this._recurrenceContent.find(".monthsrt").ejDropDownList({selectedItemIndex:this._getWeekIndex(n)}),this._recurrenceContent.find(".monthdaytype").ejRadioButton({checked:!0}),this._rRuleFreq="MONTHLY",i=this._getLocalizedLabels("RecurrenceMonth").toLowerCase();break;case this._getLocalizedLabels("Yearly"):this._recurrenceContent.css("display","block"),this._recurrenceContent.find("#"+this._id+"_recurtypes").get(0).innerHTML=this._getLocalizedLabels("RecurrenceYear"),this._recurrenceContent.find("."+this._id+"_weekly,."+this._id+"_monthly").css("display","none"),this._recurrenceContent.find("."+this._id+"_yearly").css("display","table-row"),this._initialSubControlRender=!0,this._recurrenceContent.find(".yearmonth").ejDropDownList({selectedItemIndex:n.getMonth()}),this._recurrenceContent.find(".yeardate").ejNumericTextbox({value:n.getDate()}),this._recurrenceContent.find(".yearsrtday").ejDropDownList({selectedItemIndex:this._dayNames.indexOf(ej.format(n,"ddd","en-US").substr(0,2).toUpperCase())}),this._recurrenceContent.find(".yearsrtmonth").ejDropDownList({selectedItemIndex:n.getMonth()}),this._recurrenceContent.find(".yearsrt").ejDropDownList({selectedItemIndex:this._getWeekIndex(n)}),this._recurrenceContent.find(".yearrecurday").ejRadioButton({checked:!0}),this._rRuleFreq="YEARLY",i=this._getLocalizedLabels("RecurrenceYear").toLowerCase();break;case this._getLocalizedLabels("EveryWeekDay"):this._recurrenceContent.css("display","block"),this._rRuleFreq="WEEKDAYS",this._recurrenceContent.find("."+this._id+"_weekly,."+this._id+"_yearly,#"+this._id+"_every,."+this._id+"_monthly").css("display","none"),i=e.text}this._initialSubControlRender=!1}this._recurrenceContent.find(".e-recurRule").html(i)},n.prototype._getWeekIndex=function(e){var t=0,i=new Date(e.getFullYear(),e.getMonth(),1),n=e.getDay();if(n!=i.getDay())do{i=new Date(i.setDate(i.getDate()+1))}while(n!=i.getDay());for(;i.getDate()!=e.getDate();)i=new Date(i.setDate(i.getDate()+7)),t++;return t},n.prototype._weeklyClick=function(){this._initialSubControlRender||this._stringGenerate()},n.prototype._monthSrt=function(){this._subControlChange=!0,this._recurrenceContent.find("#"+this._id+"_monthon").ejRadioButton("option","checked",!0),this._subControlChange=!1,this._initialSubControlRender||this._stringGenerate()},n.prototype._yearsrt=function(){this._subControlChange=!0,this._recurrenceContent.find("#"+this._id+"_yearother").ejRadioButton("option","checked",!0),this._subControlChange=!1,this._initialSubControlRender||this._stringGenerate()},n.prototype._yearmonth=function(){this._subControlChange=!0,this._recurrenceContent.find("#"+this._id+"_yearday").ejRadioButton("option","checked",!0),this._subControlChange=!1,this._initialSubControlRender||this._stringGenerate()},n.prototype._startDateChange=function(e){this.model.startDate=new Date(e.model.value),(!this._recurrenceContent.find("#"+this._id+"_repeatendon").ejRadioButton("model.checked")||this.model.startDate>this._recurrenceContent.find(".until").ejDatePicker("option","value"))&&(this._subControlChange=!0,this._recurrenceContent.find(".until").ejDatePicker("option","value",new Date(new Date(e.model.value).setDate(e.model.value.getDate()+70)))),this._subControlChange=!1,this._initialSubControlRender||this._stringGenerate()},n.prototype._recurUntil=function(){this._subControlChange||(this._subControlChange=!0,this._recurrenceContent.find("#"+this._id+"_repeatendon").ejRadioButton("option","checked",!0),this._subControlChange=!1,this._initialSubControlRender||this._stringGenerate())},n.prototype._recurCount=function(){this._recurrenceContent.find("#"+this._id+"_repeatendafter").ejRadioButton("option","checked",!0),this._initialSubControlRender||this._stringGenerate()},n.prototype._everyCount=function(){this._initialSubControlRender||this._stringGenerate()},n.prototype._monthDate=function(){this._recurrenceContent.find("#"+this._id+"_monthday").ejRadioButton("option","checked",!0),this._initialSubControlRender||this._stringGenerate()},n.prototype._recurEndChange=function(){this._subControlChange||this._initialSubControlRender||this._stringGenerate()},n.prototype._stringGenerate=function(){this.closeRecurPublic(),this._trigger("change",{recurrenceRule:this._recRule})},n.prototype._findInterval=function(e){var t;return t=e.ejNumericTextbox("model.value"),ej.isNullOrUndefined(t)?0:t},n.prototype._weeklyDayFind=function(e,t){var i,n=e;do{n=new Date(n.setDate(n.getDate()+1)),i=this._dayNamesValue[new Date(n).getDay()].toUpperCase()}while(-1==t.indexOf(i));return n},n.prototype._dayOfWeekInMonth=function(e,t,i){var n,s,r,a,o=this._dayNamesValue.indexOf(t);if(e.setHours(0,0,0,0),n=new Date(e),-1==i){for(r=new Date(n.getFullYear(),n.getMonth()+1,0);r.getDay()!=o;)r=new Date(r.setDate(r.getDate()-1));s=new Date(r.toString())}else do{for(a=0,s=new Date(n.getFullYear(),n.getMonth(),1);;){if(s.getDay()===o)if(5!=i){if(++a==i)break}else if(n.getMonth()!=s.getMonth()){s.setDate(s.getDate()-7);break}s.setDate(s.getDate()+1)}n.setMonth(n.getMonth()+1)}while(s.getTime()<e.getTime());return s},n.prototype._dayOfMonthInYear=function(e,t,i){var n,s,r,a,o=this._dayNamesValue.indexOf(t),l=this._rRule.month-1;if(e.setHours(0,0,0,0),n=new Date(e),-1==i){for(r=new Date(n.getFullYear(),n.getMonth()+1,0);r.getDay()!=o;)r=new Date(r.setDate(r.getDate()-1));s=new Date(r.toString())}else do{for(a=0,s=new Date(n.getFullYear(),l,1);;){if(s.getDay()===o)if(5!=i){if(++a==i)break}else if(s.getMonth()!=l){s.setDate(s.getDate()-7);break}s.setDate(s.getDate()+1)}n.setFullYear(n.getFullYear()+1)}while(s.getTime()<e.getTime());return s},n.prototype._findRecurCount=function(e,t,i){var n,s,r,a,o,l,d,h,p,m,c=0,u=!1,g=this._interval,_=new Date(this._recurrenceContent.find(".recurstartdate").ejDatePicker("model.value"));for(ej.isNullOrUndefined(this._actualDate)||0==this._actualDate||(_=(r=new Date(_.getFullYear(),_.getMonth()+1,0)).getDate()<this._actualDate?r:new Date(_.getFullYear(),_.getMonth(),this._actualDate)),s=n=new Date(_.toString()),a=new Date(this.element.find(".e-until").ejDatePicker("model.value"));_<=a;){switch(this._rRuleFreq){case"DAILY":_=new Date(_.setDate(_.getDate()+e)),u=!0;break;case"WEEKLY":case"WEEKDAYS":for(o=t.split(","),l=i._dayNames[new Date(_.toString()).getDay()],d=0;d<o.length;d++)if(o[d]==l){if(g==this._interval){u=!0,g=1;break}g++}break;case"MONTHLY":!ej.isNullOrUndefined(this._month)&&this._month&&n.getMonth()>_.getMonth()&&(_=new Date(_.setDate(n.getDate()))),_.getDate()!=s.getDate()&&(ej.isNullOrUndefined(this._month)||!this._month)&&(this._month=!0,_=new Date(_.setDate(_.getDate()-_.getDate()))),h=null,this.recurrenceRuleSplit(this._recRule,h),ej.isNullOrUndefined(this._rRule.setPositions)?((p=new Date(_.toString())).setDate(this._rRule.monthDay),p<=a&&p>=_&&(u=!0)):(m=this._dayOfWeekInMonth(_,this._rRule.weekDays,this._rRule.setPositions),this._dayOfWeekInMonth(_,this._rRule.weekDays,this._rRule.setPositions)<=a&&m.getMonth()==_.getMonth()&&(u=!0)),_=new Date(_.getFullYear(),_.getMonth()+e,1);break;case"YEARLY":h=null,this.recurrenceRuleSplit(this._recRule,h),ej.isNullOrUndefined(this._rRule.setPositions)?((p=new Date(_.toString())).setDate(this._rRule.monthDay),p<=a&&p>=_&&(u=!0)):(m=this._dayOfWeekInMonth(_,this._rRule.weekDays,this._rRule.setPositions),this._dayOfWeekInMonth(_,this._rRule.weekDays,this._rRule.setPositions)<=a&&m.getMonth()==_.getMonth()&&(u=!0)),_=new Date(_.setFullYear(_.getFullYear()+e))}u&&c++,u=!1,("WEEKLY"==this._rRuleFreq||"WEEKDAYS"==this._rRuleFreq)&&(_=new Date(_.setDate(_.getDate()+1))),s=new Date(_.toString())}return this._month=!1,this._actualDate=0,c},n.prototype._getLocalizedLabels=function(e){return ej.isNullOrUndefined(ej.RecurrenceEditor.Locale[this.model.locale])?ej.RecurrenceEditor.Locale["en-US"][e]:ej.RecurrenceEditor.Locale[this.model.locale][e]},n.prototype._datepattern=function(){return""==this.model.dateFormat||ej.isNullOrUndefined(this.model.dateFormat)?this._pattern.d:this.model.dateFormat},n.prototype._dateConvert=function(e){if(ej.isNullOrUndefined(e))i=null;else{var i=new Date(parseInt(e.match(/\d+/).toString()));i="date"==t.type(i)?i:new Date}return i},n.prototype.recurrenceDateGenerator=function(e,t,i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_=[];e.split(";");if(this._recurDates={},n=new Date(t),s=0,r=new Date(n),ej.isNullOrUndefined(i)&&(i=null),this.recurrenceRuleSplit(e,i),ej.isNullOrUndefined(this._rRule.recurEditId)){if(o="",l=ej.isNullOrUndefined(this._rRule.interval)?1:this._rRule.interval,ej.isNullOrUndefined(this._rRule.weekDays)||(o=this._rRule.weekDays.split(",")),ej.isNullOrUndefined(this._rRule.until))if(ej.isNullOrUndefined(this._rRule.count))a=new Date(new Date(this.model.startDate.toString()).setDate(n.getDate()+42*l));else{if(0==this._rRule.count)return _;switch(this._rRule.freq){case"DAILY":a=new Date(new Date(n).setDate(n.getDate()+this._rRule.count*l));break;case"WEEKLY":d=Math.round(n.getDate()+this._rRule.count/o.length*7*l),a=new Date(new Date(n).setDate(d+1));break;case"MONTHLY":a=new Date(new Date(n).setMonth(n.getMonth()+this._rRule.count*l));break;case"YEARLY":a=new Date(new Date(n).setFullYear(n.getFullYear()+this._rRule.count*l))}}else(a=new Date(this._rRule.until)).setDate(a.getDate()+1);switch(this._rRule.freq){case"WEEKLY":ej.isNullOrUndefined(this._rRule.weekDays)?o=["SU","MO","TU","WE","TH","FR","SA"][n.getDay()]:-1==(o=this._rRule.weekDays.split(",")).indexOf(this._dayNamesValue[new Date(n).getDay()].toUpperCase())&&(n=this._weeklyDayFind(n,o));break;case"MONTHLY":if(!ej.isNullOrUndefined(this._rRule.monthDay))for(var f=new Date(n).getDate()==new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),w=this._rRule.monthDay>=new Date(n).getDate(),D=new Date(n).getMonth(),S=!1;new Date(n).getDate()!=this._rRule.monthDay&&!S;)!w||new Date(n).getMonth()==D?n=new Date(n.setDate(n.getDate()+1)):(n=new Date(n.setDate(n.getDate()-1)),S=!0);new Date(n);break;case"YEARLY":ej.isNullOrUndefined(this._rRule.monthDay)||(h=new Date(r.setMonth(this._rRule.month-1)),p=new Date(h.getFullYear(),h.getMonth()+1,0).getDate(),this._rRule.monthDay>p&&(this._rRule.monthDay=p),n=n.getMonth()+1>=this._rRule.month&&n.getDate()>this._rRule.monthDay?new Date(n.getFullYear()+1,this._rRule.month-1,this._rRule.monthDay):new Date(n.getFullYear(),this._rRule.month-1,this._rRule.monthDay))}for(;n<=a;){switch("MONTHLY"!=this._rRule.freq||ej.isNullOrUndefined(this._rRule.setPositions)||(n=this._dayOfWeekInMonth(n,this._rRule.weekDays,this._rRule.setPositions)),"YEARLY"!=this._rRule.freq||ej.isNullOrUndefined(this._rRule.setPositions)||(n=this._dayOfMonthInYear(n,this._rRule.weekDays,this._rRule.setPositions)),ej.isNullOrUndefined(this._rRule.exDate)?0:-1==this._rRule.exDate.indexOf(ej.format(new Date(n),this._pattern.d,this.model.locale))&&2,m=new Date(n),this._rRule.freq){case"DAILY":(o.length>0&&o.indexOf(this._dayNamesValue[m.getDay()])>-1||0===o.length)&&_.push(new Date(m.toString()).getTime()),n=new Date(n.setDate(n.getDate()+l));break;case"WEEKLY":c=this._dayNamesValue[new Date(n).getDay()].toUpperCase(),o.length-1!=o.indexOf(c)?(_.push(new Date(m.toString()).getTime()),n=this._weeklyDayFind(n,o)):(_.push(new Date(m.toString()).getTime()),n=new Date(n.setDate(n.getDate()+-1*n.getDay())),n=new Date(n.setDate(n.getDate()+7*l-this._firstDayOfWeek-1)),n=this._weeklyDayFind(n,o));break;case"MONTHLY":if(_.push(new Date(m.toString()).getTime()),f)n=new Date(n.getFullYear(),n.getMonth()+l+1,0);else if(ej.isNullOrUndefined(this._rRule.setPositions)){var y=new Date(n),v=new Date(y.setMonth(y.getMonth()+l)),C=new Date(v.getFullYear(),v.getMonth()+1,0);(n.getFullYear()==v.getFullYear()?n.getMonth()+l:v.getMonth())==v.getMonth()?n=v>C?new Date(C.toString()):new Date(v.setDate(this._rRule.monthDay)):(u=new Date(v.setMonth(v.getMonth()-1)),n=new Date(u.getFullYear(),u.getMonth()+1,0))}else n=new Date(n.getFullYear(),n.getMonth()+l,1);break;case"YEARLY":_.push(new Date(m.toString()).getTime()),g=ej.isNullOrUndefined(this._rRule.setPositions)?n.getDate():1,n=new Date(n.getFullYear()+l,this._rRule.month-1,g)}if(s++,!ej.isNullOrUndefined(this._rRule.count)&&s==this._rRule.count)break}}return _},n.prototype.recurrenceRuleSplit=function(e,i){var n,s,r,a,o,l;if(this._rRule={},s=i,r=e.split(";"),!ej.isNullOrUndefined(i)&&!ej.isNullOrUndefined(s.split(",")))for(o=s.split(","),this._rRule.exDate=[],l=0;l<o.length;l++)this._rRule.exDate[l]=o[l];for(a=0;a<r.length;a++)switch(n=r[a].split("="),t.trim(n[0]).toUpperCase()){case"FREQ":this._rRule.freq=t.trim(n[1]).toUpperCase();break;case"INTERVAL":this._rRule.interval=parseInt(n[1],10);break;case"COUNT":this._rRule.count=parseInt(n[1],10);break;case"UNTIL":this._rRule.until=ej.parseDate(ej.format(n[1],this._pattern.d,this.model.locale),this._pattern.d);break;case"BYDAY":this._rRule.weekDays=n[1];break;case"BYMONTHDAY":this._rRule.monthDay=parseInt(n[1],10);break;case"BYMONTH":this._rRule.month=parseInt(n[1],10);break;case"BYSETPOS":this._rRule.setPositions=parseInt(n[1],10);break;case"WKST":this._rRule.weekStart=n[1];break;case"EXDATE":if(ej.isNullOrUndefined(i)||ej.isNullOrUndefined(s.split(",")))for(o=n[1].split(","),this._rRule.exDate=[],l=0;l<o.length;l++)this._rRule.exDate[l]=o[l];else for(o=s.split(","),this._rRule.exDate=[],l=0;l<o.length;l++)this._rRule.exDate[l]=o[l];break;case"RECUREDITID":this._rRule.recurEditId=parseInt(n[1])}return this._rRule},n.prototype.clearRecurrenceFields=function(){for(var e=this.element.find("input.weekdays"),t=0;t<e.length;t++)e.eq(t).ejCheckBox({checked:!1});this.element.find(".recurevery").ejNumericTextbox({value:1}),this.element.find(".recurcount").ejNumericTextbox({value:10}),this.element.find(".e-recurRule").html("")},n.prototype.setDefaultValues=function(){var e=this.model.startDate.toString();this._recurrenceLayout.find(".e-recurrencetype").ejDropDownList({selectedItemIndex:0}),this._recurrenceLayout.find(".e-recurrencetype").ejDropDownList({selectedItemIndex:1}),this.element.find(".recurstartdate").ejDatePicker({value:new Date(e)}),this.element.find(".e-until").ejDatePicker({value:new Date(new Date(e).setDate(new Date(e).getDate()+70))}),this.element.find(".e-recurnoend").ejRadioButton({checked:!0})},n.prototype.showRecurrenceSummary=function(){for(var e,t=0;t<this._dayNames.length;t++)this._dayNames[t]=this._dayNames[t].toUpperCase();var i="",n="",s=this.element.find("#"+this._id+"_recurrenceType");switch(i=ej.isNullOrUndefined(this._rRule.interval)?this._getLocalizedLabels("Every")+" ":this._getLocalizedLabels("Every")+" "+this._rRule.interval+" ",s.ejDropDownList({selectedItemIndex:this.model.frequencies.indexOf(this._rRule.freq.toLowerCase().replace(/^./,function(e){return e.toUpperCase()}))}),this._rRule.freq){case"DAILY":i+=this._getLocalizedLabels("RecurrenceDay").toLowerCase(),this._rRuleFreq="DAILY";break;case"WEEKLY":for(this._rRuleFreq="WEEKLY",this.element.find(".weekdays").ejCheckBox({checked:!1}),e=this._rRule.weekDays.split(","),t=0;t<e.length;t++)this.element.find(".e-weekly"+e[t]).ejCheckBox({checked:!0}),n+=this._dayShortNames[this._dayNames.indexOf(e[t])]+(t==e.length-1?"":", ");i+=this._getLocalizedLabels("RecurrenceWeek").toLowerCase()+" "+this._getLocalizedLabels("On").toLowerCase()+" "+n;break;case"MONTHLY":this._rRuleFreq="MONTHLY",ej.isNullOrUndefined(this._rRule.monthDay)?(this.element.find(".e-monthposition").ejRadioButton({checked:!0}),this.element.find(".e-monthsrtday").ejDropDownList({selectedItemIndex:this._dayNames.indexOf(this._rRule.weekDays)}),this.element.find(".monthsrt").ejDropDownList({selectedItemIndex:this._rRule.setPositions-1}),n=this.element.find(".monthsrt").ejDropDownList("model.value").toLowerCase()+" "+this._dayFullNames[this._dayNames.indexOf(this._rRule.weekDays)]):(this.element.find(".e-monthdaytype").ejRadioButton({checked:!0}),this.element.find(".e-monthdate").ejNumericTextbox({value:parseInt(this._rRule.monthDay)}),n=parseInt(this._rRule.monthDay).toString()),i+=this._getLocalizedLabels("RecurrenceMonth").toLowerCase()+" "+this._getLocalizedLabels("On").toLowerCase()+" "+n;break;case"YEARLY":this._rRuleFreq="YEARLY",ej.isNullOrUndefined(this._rRule.monthDay)?(this.element.find(".e-yearrecurposi").ejRadioButton({checked:!0}),this.element.find(".yearsrtday").ejDropDownList({selectedItemIndex:this._dayNames.indexOf(this._rRule.weekDays)}),this.element.find(".yearsrtmonth").ejDropDownList({selectedItemIndex:this._rRule.month-1}),this.element.find(".yearsrt").ejDropDownList({selectedItemIndex:this._rRule.setPositions-1}),n=this.element.find(".yearsrt").ejDropDownList("model.value").toLowerCase()+" "+this._dayFullNames[this._dayNames.indexOf(this._rRule.weekDays)]+" "+this._monthNames[this._rRule.month-1]):(this.element.find(".e-yearrecurday").ejRadioButton({checked:!0}),this.element.find(".yearmonth").ejDropDownList({selectedItemIndex:this._rRule.month-1}),this.element.find(".yeardate").ejNumericTextbox({value:parseInt(this._rRule.monthDay)}),n=this._monthNames[this._rRule.month-1]+" "+parseInt(this._rRule.monthDay)),i+=this._getLocalizedLabels("RecurrenceYear").toLowerCase()+" "+this._getLocalizedLabels("On").toLowerCase()+" "+n}return this.element.find(".recurevery").ejNumericTextbox({value:ej.isNullOrUndefined(this._rRule.interval)?1:this._rRule.interval}),ej.isNullOrUndefined(this._rRule.count)?ej.isNullOrUndefined(this._rRule.until)?this.element.find(".e-recurnoend").ejRadioButton({checked:!0}):(this.element.find(".e-recuruntil").ejRadioButton({checked:!0}),this.element.find(".e-until").ejDatePicker({value:new Date(this._rRule.until)}),i+=" "+this._getLocalizedLabels("Until").toLowerCase()+" "+ej.format(new Date(this._rRule.until),this._datepattern(),this.model.locale)):(this.element.find(".e-recurafter").ejRadioButton({checked:!0}),this.element.find(".recurcount").ejNumericTextbox({value:this._rRule.count}),i+=", "+this._rRule.count+this._getLocalizedLabels("Times").toLowerCase()),i},n.prototype.getRecurrenceRule=function(){return this.closeRecurPublic(),this._recRule},n.prototype.closeRecurPublic=function(){var e,t,i,n,s,r,a,o,l,d,h=this._rRuleFreq,p="",m="",c="",u="";switch(e=this._interval=this._findInterval(this.element.find(".recurevery")),h){case"DAILY":u="FREQ="+h+";INTERVAL="+e;break;case"WEEKDAYS":u="FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR",c="MO,TU,WE,TH,FR";break;case"WEEKLY":var g=this.element.find("input.weekdays"),_="";for(i=0;i<g.length;i++)1==g.eq(i).ejCheckBox("model.checked")&&(c+=(""!=c?",":"")+this._dayNames[i].toUpperCase()),1==g.eq(i).ejCheckBox("model.checked")&&(_+=(""!=_?", ":"")+this._dayShortNames[i]);for(n=0;n<this._dayNamesValue.length;n++)-1!="".indexOf(this._dayNamesValue[n])&&(c+=(""!=c?",":"")+this._dayNamesValue[n]),-1!="".indexOf(this._culture.calendar.days.namesAbbr[n])&&(_+=(""!=_?",":"")+this._culture.calendar.days.namesAbbr[n]);""==c&&(s=this.element.find(".recurstartdate").ejDatePicker("model.value"),c=this._dayNames[s.getDay()].toUpperCase()),r=this._getLocalizedLabels("RecurrenceWeek").toLowerCase()+" on "+_,this.element.find(".e-recurRule").html(r),u="FREQ="+h+";INTERVAL="+e+";BYDAY="+c;break;case"MONTHLY":this.element.find(".monthdaytype").ejRadioButton("model.checked")?(u="FREQ="+h+";BYMONTHDAY="+(t=this.element.find(".monthdate").ejNumericTextbox("model.value"))+";INTERVAL="+e,m=" "+this._getLocalizedLabels("On").toLowerCase()+" "+t):(f=this.element.find(".monthsrt").ejDropDownList("selectedItemIndex"),D=this.element.find(".e-monthsrtday").ejDropDownList("selectedItemIndex"),f=f<5?f+1:-1,u="FREQ="+h+";BYDAY="+this._dayNames[D]+";BYSETPOS="+f+";INTERVAL="+e,m=" "+this._getLocalizedLabels("On").toLowerCase()+" "+this.element.find(".monthsrt").ejDropDownList("model.value").toLowerCase()+" "+this._dayFullNames[D]);break;case"YEARLY":if(this.element.find("#"+this._id+"_yearday").ejRadioButton("model.checked"))w=this.element.find(".yearmonth").ejDropDownList("selectedItemIndex"),u="FREQ="+h+";BYMONTHDAY="+(a=this._findInterval(this.element.find(".yeardate")))+";BYMONTH="+(w+1)+";INTERVAL="+e,m=" "+this._getLocalizedLabels("On").toLowerCase()+" "+this._monthNames[w]+" "+a;else{var f=this.element.find(".yearsrt").ejDropDownList("selectedItemIndex"),w=this.element.find(".yearsrtmonth").ejDropDownList("selectedItemIndex"),D=this.element.find(".yearsrtday").ejDropDownList("selectedItemIndex");f=f<5?f+1:-1,u="FREQ="+h+";BYDAY="+this._dayNames[D]+";BYMONTH="+(w+1)+";BYSETPOS="+f+";INTERVAL="+e,m=" "+this._getLocalizedLabels("On").toLowerCase()+" "+this.element.find(".yearsrt").ejDropDownList("model.value").toLowerCase()+" "+this._dayFullNames[D]+" "+this._monthNames[w]}break;case"NEVER":this._recRule=void 0}return this.element.find(".e-recurafter").ejRadioButton("model.checked")?(u+=";COUNT="+(o=this._findInterval(this.element.find(".recurcount"))),p=o?", "+o+" "+this._getLocalizedLabels("Times"):", "):this.element.find(".e-recuruntil").ejRadioButton("model.checked")&&(u+=";COUNT="+(l=this._findRecurCount(e,c,this)),p=l?", "+l+" "+this._getLocalizedLabels("Times"):", "),d=("WEEKDAYS"!=this._rRuleFreq?this._getLocalizedLabels("Every"):"")+" "+(e>1?e+" ":"")+this.element.find(".e-recurRule").html()+m+p,this._recRule=u,d},n}(ej.WidgetBase);ej.widget("ejRecurrenceEditor","ej.RecurrenceEditor",new i)}(jQuery),ej.RecurrenceEditor.Locale={},ej.RecurrenceEditor.Locale["en-US"]={Repeat:"Repeat",Never:"Never",Daily:"Daily",Weekly:"Weekly",Monthly:"Monthly",Yearly:"Yearly",First:"First",Second:"Second",Third:"Third",Fourth:"Fourth",Last:"Last",EveryWeekDay:"Every weekday",Every:"Every",RecurrenceDay:"Day(s)",RecurrenceWeek:"Week(s)",RecurrenceMonth:"Month(s)",RecurrenceYear:"Year(s)",RepeatOn:"Repeat on",RepeatBy:"Repeat by",StartsOn:"Starts on",Times:"times",Ends:"Ends",Day:"Day",The:"The",OfEvery:"Of",After:"After",On:"On",Occurrence:"Occurrence(s)",Until:"Until"}})},2046:function(e,t,i){var n,s,r;
/*!
*  filename: ej.schedule.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.schedule.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(a){s=[i(15),i(94),i(4),i(21),i(65),i(38),i(16),i(47),i(31),i(48),i(222),i(95),i(55),i(92),i(221),i(98),i(156),i(93),i(1038),i(2044),i(80)],void 0===(r="function"==typeof(n=a)?n.apply(t,s):n)||(e.exports=r)}(function(){(function(e,t){t.scheduleFeatures=t.scheduleFeatures||{};t.scheduleFeatures.horizontal={_renderHorizontalTemplates:function(){this.horizontalHeader=e.templates("{{if multiRes == true}}<td class = 'e-horizontalheader'><div class='e-horizontalresheader'>{{:label}}</div></td>{{else}}{{/if}}<td class='e-horizontaldaterender'><div class='e-horizontaltimecells {{:heightclass}}'><div class='e-headerdays' style='position:absolute;'><table class ='e-table {{:tablelayout}}'style='width:100%;border-collapse:separate;table-layout:fixed;'><tbody>{{if view !== 'month'}}<tr style='width:100%;'> <td>{{if view === 'day'}}<table style='width:100%;'>{{else}}<table class='e-table'>{{/if}}<tbody><tr> {{for cols ~headercellWidth = headercellWidth}}<td class='e-headercells {{:cellToday}} e-horizontalheadertddate'><div class='{{:currentDateClass}} e-horizontalheaderdiv'>{{:currentDay}}</div></td>{{/for}} </tr></tbody></table></td> </tr><tr style='width:100%;position:absolute;'> <td><table class ='e-table e-horizontaltabletimecell' style='border-collapse:collapse;'><tbody><tr> {{for timeTdCount  ~columnvalue =column  }}{{for ~name=time ~dayend=timecellclass ~index=#getIndex() }}<td class='e-horizontaltimetd {{:~dayend}}'><div style='width:{{:timeCellWidth}}'><span class ='e-horizontaltimespan'>{{:~name.slice(0,2)}}</span><div class ='e-horizontaltimespandiv'>{{:~name.slice(3,5)}}</div></div></td>{{for ~columnvalue[~index] ~width = timeCellWidth}}<td class='e-horizontalalternatetd'><div style='width:{{:~width}}'></div></td>{{/for}}{{/for}}{{/for}}  </tr></tbody></table></td> </tr>{{/if}}{{if view == 'month'}}<tr>{{for cols}}<td class='e-headercells e-horizontmonthheaderdatetd {{:cellToday}}'><div title='{{:title}}' class='e-dateheadercell e-horizontmonthdatealign'>{{:currentDate}}</div></td>{{/for}}</tr><tr>{{for cols}}<td class ='e-horizontmonthheaderdaytd' style='width:{{:cellWidth}}'><div class='e-dateheadercell e-horizontmonthdatealign' title='{{:daynameTitle}}'>{{:currentDay}}</div></td>{{/for}}</tr>{{/if}}</tbody></table></div></div></td>"),this.cellTemplate=e.templates("<table class='e-table e-workcellstab'><tbody>{{for cellrows ~cols=cols ~hourdiff=hourdiff ~view=view ~classname=classname ~columnvalue=column ~userTemp=userTemplate ~userHtml=userHtml}}{{if classname == 'e-parentnode'}} <tr class='e-resourceheadertr' style='width:100%'>{{for ~cols ~value=#getIndex()}}{{if #index % ~hourdiff == 0 && #index != 0 && ~view !== 'month' }}<td class='e-resourceheadercells e-workcells e-parentworkcell e-dayend' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{else}}<td class='e-resourceheadercells e-workcells e-parentworkcell' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{/if}}{{if ~userTemp == true}}{{if ~view !== 'month'}}{{:~userHtml[~value][0][#getIndex()]}}{{else}}{{:~userHtml[~value][#getIndex()]}}{{/if}}{{/if}}</td>{{if ~view !== 'month' ~val=#index}}{{for ~columnvalue[#getIndex()] ~width = cellWidth}}<td class='e-resourceheadercells e-workcells e-parentworkcell e-alternateworkcell' style='width:{{:~width}};height:{{:cellHeight}}'>{{if ~userTemp == true}}{{:~userHtml[~value][1][~val][#getIndex()]}}{{/if}}</td>{{/for}}{{/if}}{{/for}}</tr>{{else}}<tr style='width:100%'>{{for ~cols ~value=#getIndex()}}{{if #index % ~hourdiff == 0 && #index != 0 && ~view !== 'month'  }}<td class='e-workcells e-childworkcell e-dayend' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{else}}<td class='e-workcells e-childworkcell' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{/if}}{{if ~userTemp == true}}{{if ~view !== 'month'}}{{:~userHtml[~value][0][#getIndex()]}}{{else}}{{:~userHtml[~value][#getIndex()]}}{{/if}}{{/if}}</td>{{if ~view !== 'month' ~val=#index}}{{for ~columnvalue[#getIndex()] ~width = cellWidth}}<td class='e-workcells e-childworkcell e-alternateworkcell' style='width:{{:~width}};height:{{:cellHeight}}'>{{if ~userTemp == true}}{{:~userHtml[~value][1][~val][#getIndex()]}}{{/if}}</td>{{/for}}{{/if}}{{/for}}</tr>{{/if}}{{/for}}</tbody></table>"),this.horizontalResHeader=e.templates("<div class ='e-horizontresdiv'><div class='e-horires' style='height:100%'><table class='e-table e-resourceheadertable' style='width:100%;table-layout:fixed;'><tbody>{{for trs}}<tr class='e-horizontresheaderdiv'>{{for ~resname=name ~marginleft=marginleft }}{{if classname == 'e-parentnode'}}<td class='{{:classname}} resemptytd' style='width:25px;height:{{:cellHeight}}'></td>{{else}}<td class='resemptytd' style='width:25px;height:{{:cellHeight}}'></td>{{/if}}<td class='{{:classname}}' style='vertical-align:middle;height:{{:cellHeight}};'>{{if classname == 'e-parentnode'}}<div id={{:idnum}} class='{{:classname}}category e-resourceicon e-resourcecollapse' style='width:20px;vertical-align:middle;float:left;margin-left:{{:~marginleft}};margin-top:2px;'></div>{{/if}}<div class='e-resourceheadertext' style='text-align:left;margin-left:{{:~marginleft}};' title='{{if userResTemplId == true}}{{:name}}{{else}}{{:~resname}}{{/if}}'>{{if userResTemplId == true}}{{:userResHeader}}{{else}}{{:~resname}}{{/if}}</div></td>{{/for}}</tr>{{/for}}</tbody></table></div></div>"),this.addResourceTemplate=e.templates("{{for trs}}<tr class='e-horizontresheaderdiv'>{{for ~resname=name ~marginleft=marginleft }}{{if classname == 'e-parentnode'}}<td class='{{:classname}} resemptytd' style='width:25px;height:{{:cellHeight}}'></td>{{else}}<td class='resemptytd' style='width:25px;height:{{:cellHeight}}'></td>{{/if}}<td class='{{:classname}}' style='vertical-align:middle;height:{{:cellHeight}};'>{{if classname == 'e-parentnode'}}<div id={{:idnum}} class='{{:classname}}category e-resourceicon e-resourcecollapse' style='width:20px;vertical-align:middle;float:left;margin-left:{{:~marginleft}};margin-top:2px;'></div>{{/if}}<div class='e-resourceheadertext' style='text-align:left;margin-left:{{:~marginleft}};' title='{{if userResTemplId == true}}{{:name}}{{else}}{{:~resname}}{{/if}}'>{{if userResTemplId == true}}{{:userResHeader}}{{else}}{{:~resname}}{{/if}}</div></td>{{/for}}</tr>{{/for}}"),this.addResourceCellsTemplate=e.templates("{{for cellrows ~cols=cols ~hourdiff=hourdiff ~view=view ~classname=classname ~columnvalue=column ~userTemp=userTemplate ~userHtml=userHtml}}{{if classname == 'e-parentnode'}} <tr class='e-resourceheadertr' >{{for ~cols ~value=#getIndex()}}{{if #index % ~hourdiff == 0 && #index != 0 && ~view !== 'month' }}<td class='e-resourceheadercells e-workcells e-parentworkcell e-dayend' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{else}}<td class='e-resourceheadercells e-workcells e-parentworkcell' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{/if}}{{if ~userTemp == true}}{{if ~view !== 'month'}}{{:~userHtml[~value][0][#getIndex()]}}{{else}}{{:~userHtml[~value][#getIndex()]}}{{/if}}{{/if}}</td>{{if ~view !== 'month' ~val=#index}}{{for ~columnvalue[#getIndex()] ~width = cellWidth}}<td class='e-resourceheadercells e-workcells e-parentworkcell e-alternateworkcell' style='width:{{:~width}};height:{{:cellHeight}}'>{{if ~userTemp == true}}{{:~userHtml[~value][1][~val][#getIndex()]}}{{/if}}</td>{{/for}}{{/if}}{{/for}}</tr>{{else}}<tr >{{for ~cols ~value=#getIndex()}}{{if #index % ~hourdiff == 0 && #index != 0 && ~view !== 'month'  }}<td class='e-workcells e-childworkcell e-dayend' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{else}}<td class='e-workcells e-childworkcell' style='width:{{:cellWidth}};height:{{:cellHeight}}'>{{/if}}{{if ~userTemp == true}}{{if ~view !== 'month'}}{{:~userHtml[~value][0][#getIndex()]}}{{else}}{{:~userHtml[~value][#getIndex()]}}{{/if}}{{/if}}</td>{{if ~view !== 'month' ~val=#index}}{{for ~columnvalue[#getIndex()] ~width = cellWidth}}<td class='e-workcells e-childworkcell e-alternateworkcell' style='width:{{:~width}};height:{{:cellHeight}}'>{{if ~userTemp == true}}{{:~userHtml[~value][1][~val][#getIndex()]}}{{/if}}</td>{{/for}}{{/if}}{{/for}}</tr>{{/if}}{{/for}}"),this.userTimeCellHoriTemplate=e.templates("{{if multiRes == true}}<td class = 'e-horizontalheader'><div class='e-horizontalresheader'>{{:label}}</div></td>{{else}}{{/if}}<td class='e-horizontaldaterender'><div class='e-horizontaltimecells {{:heightclass}}'><div class='e-headerdays' style='position:absolute;'><table class ='e-table' style='width:100%;border-collapse:separate;table-layout:fixed;'><tbody>{{if view !== 'month'}}<tr style='width:100%;'> <td>{{if view === 'day'}}<table style='width:100%;'>{{else}}<table class='e-table'>{{/if}}<tbody><tr> {{for cols ~headercellWidth = headercellWidth}}<td class='e-headercells {{:cellToday}} e-horizontalheadertddate'><div class='{{:currentDateClass}} e-horizontalheaderdiv'>{{:currentDay}}</div></td>{{/for}} </tr></tbody></table></td> </tr><tr style='width:100%;position:absolute;'> <td><table class='e-table e-horizontaltabletimecell' style='border-collapse:collapse;'><tbody><tr> {{for timeTdCount  ~userTemplateId = userTemplateId  ~template=template  ~columnvalue =column}}{{for ~name=time ~names=times ~dayend=timecellclass ~index=#getIndex() }}<td class='e-horizontaltimetd {{:~dayend}}'><div style='width:{{:timeCellWidth}}'><span class ='e-horizontaltimespan'>{{:~name}}</span><div class ='e-horizontaltimespandiv'></div></div></td>{{for ~columnvalue[~index] ~width = timeCellWidth ~names=~names}}<td class='e-horizontalalternatetd' style='vertical-align:middle !important;'><div style='width:{{:~width}};' > {{if ~template ==true || ~userTemplateId==true }}{{:~names[#getIndex()]}}{{else}}</div>{{/if}}</td>{{/for}}{{/for}}{{/for}}  </tr></tbody></table></td> </tr>{{/if}}{{if view == 'month'}}<tr>{{for cols}}<td class='e-headercells e-horizontmonthheaderdatetd {{:cellToday}}'><div class='e-dateheadercell e-horizontmonthdatealign'>{{:currentDate}}</div></td>{{/for}}</tr><tr>{{for cols}}<td class ='e-horizontmonthheaderdaytd'><div class='e-dateheadercell e-horizontmonthdatealign' style='width:{{:cellWidth}}'>{{:currentDay}}</div></td>{{/for}}</tr>{{/if}}</tbody></table></div></div></td>")},_horizontalViewNavigation:function(t){var i,n,s,r;if("click"==t.type){if("week"===this.currentView()||"workweek"===this.currentView()||"customview"===this.currentView()&&this._renderDays<=7){if(this.element.find(".e-headercells").children().removeClass("e-activeview"),i=t.currentTarget.cellIndex,n=new Date(this._dateRender[i]),!(this.model.minDate<=n&&this.model.maxDate>=n))return!1;this.model.timeScale.enable&&e(t.currentTarget).children().addClass("e-activeview"),this.currentDate(n),this._businessHourScroller()}else if("month"==this.currentView()||this._isCustomMonthView()){if(i=t.currentTarget.cellIndex,-1==this.model.views.indexOf("day"))return!1;if(n=new Date(this.monthDays[i]),!(this.model.minDate<=n&&this.model.maxDate>=n))return!1;this.currentDate(n),this._navView=!0,this._viewChange(t,this.currentView(),"day")}}else if("dblclick"==t.type&&("week"===this.currentView()||"workweek"===this.currentView()||"customview"===this.currentView()&&this._renderDays<=7)){if(r=(s=e(t.target)).hasClass("e-headercells")?s:s.parent().hasClass("e-headercells")?s.parent():s.parent().parent(),-1==this.model.views.indexOf("day")||!r.hasClass("e-headercells"))return!1;if(n=new Date(this._dateRender[r.index()]),!(this.model.minDate<=n&&this.model.maxDate>=n))return!1;this.currentDate(n),this._navView=!0,this._viewChange(t,this.currentView(),"day")}},_renderHorizontalHeaderDays:function(i){var n,s,r,a,o,l,d,h;if(this.element.find(".e-headercells").addClass("e-dateheaderselect"),"month"===this.currentView()||this._isCustomMonthView())for(d=this.monthDays,h=0;h<d.length;h++)new Date(new Date(d[h]).setHours(0,0,0,0)).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()&&e(this.element.find("td.e-headercells")[h]).addClass("e-currentdayhighlight");else{if(this.element.find(".e-currentdayhighlight").removeClass("e-currentdayhighlight"),t.isNullOrUndefined(this.model.dateHeaderTemplateId))for(this.element.find(".e-headercells").children().removeClass("e-activeview"),h=0;h<this._dateRender.length;h++)n=!this._mediaQuery||"week"!=this.currentView()&&"workweek"!=this.currentView()?"day"===this.currentView()&&0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?i.calendar.days.names[new Date(this._dateRender[h]).getDay()]:this._dayShortNames[new Date(this._dateRender[h]).getDay()]:this._dayNames[new Date(this._dateRender[h]).getDay()].split("")[0],s=this.model.timeScale.enable?!this._mediaQuery||"week"!=this.currentView()&&"workweek"!=this.currentView()?"day"===this.currentView()?0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?n+" "+t.format(new Date(this._dateRender[h]),"dd MMMM yyyy",this.model.locale):n+" "+t.format(new Date(this._dateRender[h]),"dd MMM yy",this.model.locale):n+" "+new Date(this._dateRender[h]).getDate():n+parseInt(t.format(new Date(this._dateRender[h]),"dd",this.model.locale)):!this._mediaQuery||"week"!=this.currentView()&&"workweek"!=this.currentView()?"day"===this.currentView()?0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?t.format(new Date(this._dateRender[h]),"dd MMMM yyyy",this.model.locale):t.format(new Date(this._dateRender[h]),"dd MMM yy",this.model.locale):("0"+new Date(this._dateRender[h]).getDate()).slice(-2):n+parseInt(t.format(new Date(this._dateRender[h]),"dd",this.model.locale)),e(this.element.find(".e-headercells")[h]).find("div")[0].innerHTML=s,new Date(new Date(this._dateRender[h]).setHours(0,0,0,0)).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()&&e(this.element.find("td.e-headercells")[h]).addClass("e-currentdayhighlight"),new Date(new Date(this._dateRender[h]).setHours(0,0,0,0)).getTime()==new Date(this.currentDate().setHours(0,0,0,0)).getTime()&&e(this.element.find(".e-headercells")[h]).children().addClass("e-activeview");else for(r=this._getUserDateheaderTemplate(),h=0;h<this._dateRender.length;h++)e(this.element.find(".e-headercells")[h]).find("div")[0].innerHTML=r[h].currentDay,new Date(new Date(this._dateRender[h]).setHours(0,0,0,0)).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()&&e(this.element.find("td.e-headercells")[h]).addClass("e-currentdayhighlight");a=new Date(this.currentDate()),"horizontal"==this.model.orientation&&"month"!=this.currentView()&&this.model.timeScale.enable&&(new Date(this.currentDate()).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()&&(this.element.find(".e-headercells").children().removeClass("e-activeview"),this.element.find(".e-currentdayhighlight").children().addClass("e-activeview")),o=this.element.find(".e-headercells").children(".e-activeview").parent().index(),this.element.find(".e-headercells").children().removeClass("e-activeview"),l="day"===this.currentView()?0:"workweek"===this.currentView()?a.getDay()-1:"week"===this.currentView()?a.getDay():o,"day"!=this.currentView()&&e(this.element.find(".e-headercells")[l]).children().addClass("e-activeview"),new Date(new Date(this.currentDate()).setHours(0,0,0,0)).getTime()===new Date((new Date).setHours(0,0,0,0)).getTime()&&e(this.element.find("td.e-horizontalheadertddate")[l]).addClass("e-headerToday"))}},_horizontalScroll:function(i,n){var s,r,a;if(n._horizontalScrollValue=i.scrollData.scrollable,n._horizontalScrollValue=i.scrollData.scrollable,!t.isNullOrUndefined(i.scrollLeft)&&("day"==n.currentView()||"week"==n.currentView()||"workweek"==n.currentView()||"customview"===n.currentView()&&n._renderDays<=7)){if(s=e(n.element.find(".e-headercells").find(".e-activeview").parent()).index(),r=0,n.model.enableRTL?(a="mozilla"==t.browserInfo().name?Math.abs(i.scrollLeft):i.scrollData.scrollable-i.scrollLeft,n.element.find(".e-horizontaltimecells").find("table tr").eq(2).css("left",a-1+"px"),r=Math.floor(Math.abs(a)/(n.element.find(".e-workcells").width()+1)/((n.model.endHour-n.model.startHour)*n.model.timeScale.minorSlotCount))):(n.element.find(".e-horizontaltimecells").find("table tr").eq(2).css("left",-i.scrollLeft+"px"),r=Math.floor(Math.abs(i.scrollLeft)/n.element.find(".e-workcells").width()/((n.model.endHour-n.model.startHour)*n.model.timeScale.minorSlotCount*(60/n.model.timeScale.majorSlot)))),i.scrollData.scrollable-i.scrollLeft==0)return;"day"!=n.currentView()&&s!==r&&n.element.find(".e-headercells").children().removeClass("e-activeview"),"day"!=n.currentView()&&e(n.element.find(".e-headercells")[r]).children().addClass("e-activeview"),n.model.timeScale.enable||n.element.find(".e-headercells").children().removeClass("e-activeview")}},_getHorizontalheaderCellCount:function(e){var i,n,s,r,a=[];if(this._isCustomMonthView(),!t.isNullOrUndefined(this.model.dateHeaderTemplateId)&&("day"==this.currentView()||"week"==this.currentView()||"workweek"==this.currentView()||"customview"==this.currentView()&&this._oneWeek))a=this._getUserDateheaderTemplate();else for(r=0;r<this._dateRender.length;r++)i=!this._mediaQuery||"week"!=this.currentView()&&"workweek"!=this.currentView()?("month"===this.currentView()||"day"===this.currentView()||this._isCustomMonthView())&&0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?e.calendar.days.names[new Date(this._dateRender[r]).getDay()]:this._dayShortNames[new Date(this._dateRender[r]).getDay()]:this._dayNames[new Date(this._dateRender[r]).getDay()].split("")[0],n=new Date(new Date(this._dateRender[r]).setHours(0,0,0,0)).getTime()===new Date((new Date).setHours(0,0,0,0)).getTime()?"e-headerToday e-currentdayhighlight":"",s="month"===this.currentView()||this._isCustomMonthView()?{currentDay:i,currentDateClass:"",cellToday:n,cellWidth:this.model.cellWidth}:"day"===this.currentView()?0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?{currentDay:t.format(new Date(this._dateRender[r]),this._pattern.D,this.model.locale),currentDateClass:"",cellToday:n,cellWidth:this.model.cellWidth}:{currentDay:i+" "+t.format(new Date(this._dateRender[r]),"dd MMM yy",this.model.locale),currentDateClass:"",cellToday:n,cellWidth:this.model.cellWidth}:{currentDay:this._mediaQuery?i+parseInt(t.format(new Date(this._dateRender[r]),"dd",this.model.locale)):i+" "+new Date(this._dateRender[r]).getDate(),currentDateClass:new Date(this._dateRender[r]).getDate()===new Date(this.currentDate()).getDate()?"e-activeview":"",cellToday:n,cellWidth:this.model.cellWidth},a.push(s);return a},_getHoriStartEndTime:function(i){var n,s,r,a,o,l,d,h,p,m=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)||!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId);m&&(n=e.templates(e(this.model.timeScale.majorSlotTemplateId).html()),s=e.templates(e(this.model.timeScale.minorSlotTemplateId).html()));var c=[],u=this.model.cellWidth?this._safariBrowser?parseInt(this.model.cellWidth)-1+"px":this.model.cellWidth:this._safariBrowser?"29px":"30px",g="week"==this.currentView()?this.model.showWeekend?7:this.model.workWeek.length:"day"==this.currentView()?1:"customview"===this.currentView()&&this._renderDays<=7?this._dateRender.length:this.model.workWeek.length;for(r=0;r<g;r++)if(m){var _=new Date((new Date).setHours(0,0,0,0)),f=0,w=[];for(d=this.model.startHour;d<this.model.endHour;){for(a=this.model.timeScale.majorSlot+f,o=f;f<a;)l=f,f*=6e4,m?l==o?h=t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)?s.render(object={date:new Date(new Date(this._dateRender[0]).setHours(d,0,0,f))}):n.render(object={date:new Date(new Date(this._dateRender[0]).setHours(d,0,0,f))}):t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId)||w.push(s.render(object={date:new Date(new Date(this._dateRender[0]).setHours(d,0,0,f))}).trim()):"12"==this._timeMode?(h=(d===this.model.startHour||12===d)&&i.AM&&i.PM&&0==f?t.format(new Date(new Date(_).setHours(d,0,0,f)),"hh tt",this.model.locale):t.format(new Date(new Date(_).setHours(d,0,0,f)),"hh:mm tt",this.model.locale),c.push({time:h,id:d+"_"+f,timecellclass:d==this.model.startHour&&0!=r&&0==f?"e-dayend":"",cellWidth:this.model.cellWidth?this.model.cellWidth:"30px",cellHeight:this.model.cellHeight,timeCellWidth:u})):c.push({time:(d<=9?"0"+d:d)+" 00",timecellclass:d%((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount)==this.model.startHour&&0!=r?"e-dayend":"",cellWidth:this.model.cellWidth?this.model.cellWidth:"30px",cellHeight:this.model.cellHeight,timeCellWidth:u}),f=f/6e4+this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount;d=this.model.timeScale.majorSlot>60?d+this.model.timeScale.majorSlot/60:f>=60?d+1:d,f=f>=60?f%60:f,m&&(c.push({time:h.trim(),times:w,id:d+"_"+f,timecellclass:d-1==this.model.startHour&&0!=r&&0==f?"e-dayend":"",cellWidth:this.model.cellWidth?this.model.cellWidth:"30px",cellHeight:this.model.cellHeight,timeCellWidth:u}),w=[])}}else for(_=new Date((new Date).setHours(0,0,0,0)),d=this.model.startHour;d<this.model.endHour;){for(f=t.isNullOrUndefined(f)?0:f%60;f<60;)f*=6e4,"12"==this._timeMode?(h=(d===this.model.startHour||12===d)&&i.AM&&i.PM&&0==f?t.format(new Date(new Date(_).setHours(d,0,0,f)),"hh tt",this.model.locale):t.format(new Date(new Date(_).setHours(d,0,0,f)),"hh:mm tt",this.model.locale),c.push({time:h,id:d+"_"+f,timecellclass:d==this.model.startHour&&0!=r&&0==f?"e-dayend":"",cellWidth:this.model.cellWidth?this.model.cellWidth:"30px",cellHeight:this.model.cellHeight,timeCellWidth:u})):(p=f/6e4,c.push({time:(Math.floor(d)<=9?"0"+Math.floor(d):Math.floor(d))+"."+(0==p?p+"0":p)+" 00",timecellclass:d%((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount)==this.model.startHour&&0!=r?"e-dayend":"",cellWidth:this.model.cellWidth?this.model.cellWidth:"30px",cellHeight:this.model.cellHeight,timeCellWidth:u})),f=f/6e4+this.model.timeScale.majorSlot;d=this.model.timeScale.majorSlot>60?parseFloat((d+this.model.timeScale.majorSlot/60).toFixed(2)):d+1,d=Math.ceil(100*(d<1?d:d%Math.floor(d)))>=98?d+.02:d}return c},_getHorizontalDayAppointments:function(e,i,n,s){for(var r=0;r<e.length;r++)0!=(!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1?new t.DataManager(this._tempResource[this._tempResource.length-1].resourceSettings.dataSource).executeLocal((new t.Query).where(this._tempResource[this._tempResource.length-1].resourceSettings.groupId,t.FilterOperators.equal,e[r][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2]])):this.res1).length&&(new Date(new Date(i[n]).setHours(0,0,0,0)).getTime()==new Date(new Date(e[r][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(i[n]).setHours(0,0,0,0)).getTime()<=new Date(new Date(e[r][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?e[r][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()]==this.res1[s][this._tempResource[this._tempResource.length-1].resourceSettings.id]:new Date(new Date(e[r][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(e[r][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime())&&this._renderApp(e[r],n,s)},_horiGroupCollection:function(){if(0!=this._tempResource.length){var e=this._resourceSort(),i=this.res1,n=e.filter(function(e){return-1===i.indexOf(e)});return t.isNullOrUndefined(this.model.group)&&(this.res1=["0"]),n}},_renderHorizontalApp:function(i,n,s,r,a,o,l,d){var h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b,R,A,I,k,x=this.element.find(".e-workcellstab tr"),O=0;if(i<=n&&(c=new Date(i).getHours()<l?new Date(i).getHours()+-new Date(i).getHours()+-new Date(i).getMinutes():new Date(i).getHours()+-l,u=new Date(n).getHours()>d?new Date(n).getHours()+(-new Date(n).getHours()+(d-l))+-new Date(n).getMinutes():new Date(n).getHours()+-l,u=new Date(n).getHours()==d?new Date(u).getMinutes()+-new Date(n).getMinutes():u,h=this.element.find(".e-appointment").length>0?this.element.find(".e-appointment").outerHeight(!0):this._getElementHeight("e-appointment"),g=0,this.model.startHour<=new Date(i).getHours()&&this.model.endHour>new Date(i).getHours())){var M=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&this._grouping.length>1?this._findResourceIndex(this._horiHeaderCollection,this._tempResource[this._tempResource.length-2].resourceSettings.id,s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()],null,null)+1:0,N=t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length?1:1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],null,null)+1:this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()])+1,H=!!this.model.appointmentTemplateId,W=H?this._getUserAppointmentTemplate(s):"";if(h=this.model.appointmentTemplateId?"100%"==e(W).css("height")?this.model.showOverflowButton?a-15:this.initialCellHeight:"0px"==e(W).css("height")?h:e(W).height():h,g=t.scheduleFeatures.resources&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&!t.isNullOrUndefined(this.model.group)?this._getOverlapCount(s,r,this._dateRender,s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()]):this._getOverlapCount(s,r,this._dateRender,null),this._renderedAllDay.push(e.extend(!0,{},s)),O=g*h+O,D=this.element.find(".e-workcellstab tr:first-child").children().length/this._dateRender.length,S=Math.floor(D*r+(60*new Date(i).getHours()+new Date(i).getMinutes()-60*this.model.startHour)/Math.floor(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)),s[this._appointmentSettings.allDay])V=new Date(new Date(new Date(n).setHours(0,0,0,0)).getTime())-new Date(new Date(new Date(i).setHours(0,0,0,0)).getTime()),(_=Math.round(V/864e5)+1)>this._dateRender.length&&(_=new Date(this._dateRender[this._dateRender.length-1]).getDay()+1-new Date(i).getDay()),f=60*(d-l)*_,w=(this.model.endHour-this.model.startHour)*(60/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))*r,p=f/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*this.cellwidth+f/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-1,m="0";else if(new Date(new Date(new Date(s[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime())<new Date(new Date(new Date(s[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime())){var E,L,U,F,V,z=new Date(n)<new Date(new Date(n).setHours(this.model.endHour,0,0))&&new Date(n)<new Date(new Date(n).setHours(this.model.startHour,0,0))?30*this.model.endHour:60*new Date(n).getHours()+new Date(n).getMinutes(),P=new Date(i)>new Date(new Date(n).setHours(this.model.startHour,0,0))?60*this.model.startHour:60*new Date(i).getHours()+new Date(i).getMinutes(),j=1;if(E=this._dateRender.indexOf(new Date(n).setHours(0,0,0,0)),L=this._dateRender.indexOf(new Date(i).setHours(0,0,0,0)),-1==E)for(;j<7;){if(new Date(this._dateRender[this._dateRender.length-j]).getTime()<new Date(n).setHours(0,0,0,0)){U=this._dateRender.length-j,z=60*this.model.endHour;break}j++}else U=E;-1==L?(F=r,P=60*this.model.startHour):F=L,f=(V=U-F)*(d-l)*60-P+z,w=Math.floor((this.model.endHour-this.model.startHour)*o*(60/this.model.timeScale.majorSlot)*r+(-1==L?0:c*o)*(60/this.model.timeScale.majorSlot)),T=this.getSlotByElement(x.eq(N+M-1).children().eq(w)),p=f/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*this.cellwidth+f/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-1,_>this._dateRender.length&&(p=(f=(_=new Date(this._dateRender[this._dateRender.length-1]).getDay()+1-new Date(i).getDay())*(d-l)*60)/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*this.cellwidth+(f/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-3)),m=-1==L?0:(60*i.getHours()+i.getMinutes()-(60*T.startTime.getHours()+T.startTime.getMinutes()))*(this.cellwidth/Math.floor(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))}else{if(y=Math.ceil((new Date(i).getMinutes()+new Date(i).getMilliseconds()/60)/Math.round(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))-1,m=Math.ceil(this._deviceRatio())-1>0?0==Math.round(y/2)?-1:Math.round(y/2):y,this.model.endHour-this.model.startHour==24)q=60*new Date(n).getHours()+new Date(n).getMinutes()-(60*new Date(i).getHours()+new Date(i).getMinutes());else var q=(z=60*new Date(n).getHours()+new Date(n).getMinutes()>60*this.model.endHour?60*this.model.endHour:60*new Date(n).getHours()+new Date(n).getMinutes())-(P=60*new Date(i).getHours()+new Date(i).getMinutes()<60*this.model.startHour?60*this.model.startHour:60*new Date(i).getHours()+new Date(i).getMinutes());v=0==(v=Math.round(q*(this.cellwidth/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))/this.cellwidth))?1:v,p=q<=0?0:q/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*this.cellwidth+(q/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-1),p-=Math.ceil(this._deviceRatio())-1>0?Math.sqrt(v-1):0,w=Math.floor((this.model.endHour-this.model.startHour)*o*(60/this.model.timeScale.majorSlot)*r+(-1==L?0:c*o)*(60/this.model.timeScale.majorSlot)),w+=this.model.timeScale.majorSlot%this.model.timeScale.minorSlotCount!=0?Math.floor(S/D):0,C=x.eq(N+M-1).children().eq(w),t.isNullOrUndefined(C[0])||(T=this.getSlotByElement(C),m+=(60*i.getHours()+i.getMinutes()-(60*T.startTime.getHours()+T.startTime.getMinutes()))*(this.cellwidth/Math.floor(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)))}if(b=this._appointmentColor(s),this.model.allowInline&&!t.isNullOrUndefined(s.inline))O=0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length||t.isNullOrUndefined(this.model.group)?O:0,this._inlineTemplate(s,m,O,p,h,b,!1),(Z=x.eq(N+M-1).children().eq(w)).prepend(e("<div class='e-inlinewrapper'></div>").append(this._inlineText));else if(a=t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length?a:x.eq(N+M-1).children()[w].offsetHeight+1,R=this._indicationApp(s),O+h+7<a){var B="12"==this._timeMode?t.format(new Date(s[this._appointmentSettings.startTime]),this._pattern.t,this.model.locale):t.format(new Date(s[this._appointmentSettings.startTime]),"HH:mm",this.model.locale),G="12"==this._timeMode?t.format(new Date(s[this._appointmentSettings.endTime]),this._pattern.t,this.model.locale):t.format(new Date(s[this._appointmentSettings.endTime]),"HH:mm",this.model.locale),Q=!t.isNullOrUndefined(s[this._appointmentSettings.recurrenceRule])&&-1!=s[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID"),Y=e(this.appTemplate.render({id:s.AppTaskId,appResize:this.model.enableAppointmentResize,currentview:this.currentView(),rtl:this.model.enableRTL,ignoreColorFilter:"msie"==this._browserInfo.name&&this._browserInfo.version<=9&&!b.appointColor.applyFilter,subject:s[this._appointmentSettings.subject],startTime:B,endTime:G,left:m+"px",top:O,appHeight:this.model.appointmentTemplateId?h:"",appWidth:p+"px",userAppTemplId:H,userTemplate:W,appClass:"e-appointment",appointData:b.appointColor.appointData,appointCustomcss:b.appointColor.appointCustomcss,appointtextcolor:b.appointColor.appointtextcolor,value:b.value,multiDiv:b.multiDiv,orientation:this.model.orientation,priority:this.model.prioritySettings.enable?s[this._appointmentSettings.priority]:"",enablePriority:this.model.prioritySettings.template,priorityTemplate:this.model.prioritySettings.template?this._priorityTemplate(s):s[this._appointmentSettings.priority],uid:s.Guid,recurrence:s[this._appointmentSettings.recurrence],recurrenceEdit:Q,leftInd:R.leftIndication,rightInd:R.rightIndication,resId:t.isNullOrUndefined(this._appointmentSettings.resourceFields)?"":s[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]]})),Z=x.eq(N+M-1).children().eq(w);t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("appointment",s,Y),Z.find("div.e-appointwrapper").length>0?Z.find("div.e-appointwrapper").append(Y):Z.prepend(e("<div class='e-appointwrapper'></div>").append(Y))}else if(this.model.showOverflowButton)A=w+Math.round(new Date(i).getMinutes()/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)),0==e("#"+this._id+"_"+t.format(new Date(s[this._appointmentSettings.startTime]),"MM_dd_yyyy",this.model.locale)+"_"+(N+M-1)+"_"+A).length&&(Z=x.eq(N+M-1).children().eq(A),I='<div id="'+this._id+"_"+t.format(new Date(s[this._appointmentSettings.startTime]),"MM_dd_yyyy",this.model.locale)+"_"+(N+M-1)+"_"+A+'" class="e-icon e-arrowhead-down e-appsoverflow" data-cellinfo="'+this._dateRender[r]+'"></div>',Z.find("div.e-appointwrapper").length>0?Z.find("div.e-appointwrapper").append(I):Z.prepend(e("<div class='e-appointwrapper'></div>").append(I)),O=a-this.element.find(".e-appsoverflow")[0].offsetHeight,this.element.find("#"+this._id+"_"+t.format(new Date(s[this._appointmentSettings.startTime]),"MM_dd_yyyy",this.model.locale)+"_"+(N+M-1)+"_"+A).css(this.model.enableRTL?"right":"left",this.cellwidth-25+"px").css("top",O+"px")),e("#"+this._id+"_"+t.format(new Date(s[this._appointmentSettings.startTime]),"MM_dd_yyyy",this.model.locale)+"_"+(N+M-1)+"_"+A).attr("data-appcount",g+1);else{k=this.element.find(".e-workcellstab tr").eq(N+M-1).children()[0].offsetHeight-1,this.element.find(".e-workcellstab tr").eq(N+M-1).children().css("height",k+h+"px"),this.element.find(".e-resourceheadertable tr").eq(N+M-1).find(".e-childnode").css("height",k+h+"px");B="12"==this._timeMode?t.format(new Date(s[this._appointmentSettings.startTime]),this._pattern.t,this.model.locale):t.format(new Date(s[this._appointmentSettings.startTime]),"HH:mm",this.model.locale),G="12"==this._timeMode?t.format(new Date(s[this._appointmentSettings.endTime]),this._pattern.t,this.model.locale):t.format(new Date(s[this._appointmentSettings.endTime]),"HH:mm",this.model.locale),Q=!t.isNullOrUndefined(s[this._appointmentSettings.recurrenceRule])&&-1!=s[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID"),Y=e(this.appTemplate.render({id:s.AppTaskId,appResize:this.model.enableAppointmentResize,currentview:this.currentView(),rtl:this.model.enableRTL,subject:s[this._appointmentSettings.subject],startTime:B,endTime:G,left:m+"px",top:O,appHeight:this.model.appointmentTemplateId?h:"",appWidth:p+"px",userAppTemplId:H,userTemplate:W,appClass:"e-appointment",appointData:b.appointColor.appointData,appointCustomcss:b.appointColor.appointCustomcss,appointtextcolor:b.appointColor.appointtextcolor,value:b.value,multiDiv:b.multiDiv,orientation:this.model.orientation,priority:this.model.prioritySettings.enable?s[this._appointmentSettings.priority]:"",enablePriority:this.model.prioritySettings.template,priorityTemplate:this.model.prioritySettings.template?this._priorityTemplate(s):s[this._appointmentSettings.priority],uid:s.Guid,recurrence:s[this._appointmentSettings.recurrence],recurrenceEdit:Q,leftInd:R.leftIndication,rightInd:R.rightIndication,resId:t.isNullOrUndefined(this._appointmentSettings.resourceFields)?"":s[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]]})),Z=x.eq(N+M-1).children().eq(w);t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("appointment",s,Y),Z.find("div.e-appointwrapper").length>0?Z.find("div.e-appointwrapper").append(Y):Z.prepend(e("<div class='e-appointwrapper'></div>").append(Y)),this._overflowFlag=!0}t.isNullOrUndefined(R)||(R.leftIndication&&(this.model.enableRTL?this.element.find(".e-appointment").filter("div[data-guid="+s.Guid+"]").find(".e-schedulemouseclose").css("margin-left","11px"):this.element.find(".e-appointment").filter("div[data-guid="+s.Guid+"]").find(".e-apptime,.e-apptext").css("margin-left","13px")),R.rightIndication&&(this.model.enableRTL?this.element.find(".e-appointment").filter("div[data-guid="+s.Guid+"]").find(".e-apptime,.e-apptext").css("margin-right","13px"):this.element.find(".e-appointment").filter("div[data-guid="+s.Guid+"]").find(".e-schedulemouseclose").css("margin-right","11px"))),!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1&&t.isNullOrUndefined(s.inline)&&this._renderAppointmentCategory(this._horiHeaderCollection,M,w,s,p,m)}},_renderAppointmentCategory:function(i,n,s,r,a,o){var l,d,h,p,m,c,u,g,_,f=0,w=[];if(this.element.find(".e-categorybar").filter("div[id=categorybar_"+r.Guid+"]").remove(),c=this.element.find(".e-resourceheadercells")[0].offsetHeight,!t.isNullOrUndefined(this.model.group)&&this._grouping.length>0){d=""==(l=this._getResourceColor(r)).appointData?"e-categorycolor":"",n-=1,a="month"==this.currentView()||this._isCustomMonthView()?a:a+2;do{if(g=this.element.find(".e-resourceheadertr").eq(n).find("td.e-workcells").eq(s),_=this.model.enableRTL?"<div class='e-categorybar "+d+"' id='categorybar_"+r.Guid+"' style='position:absolute;height:"+c+"px;background:"+l.appointData+";width:"+a+"px;right:"+o+"px;'></div>":"<div class='e-categorybar "+d+"' id='categorybar_"+r.Guid+"' style='position:absolute;height:"+c+"px;background:"+l.appointData+";width:"+a+"px;left:"+o+"px;'></div>",g.find("div.e-appointwrapper").length>0?g.find("div.e-appointwrapper").append(_):g.prepend(e("<div class='e-appointwrapper'></div>").append(_)),this._tempResource.length>2){for(u=this._tempResource.length-2;u>=0;u--)if(-1!=(f=this._tempResource[u].resourceSettings.dataSource.indexOf(i[n]))){if(f=u,h=this._tempResource[u].resourceSettings.groupId,t.isNullOrUndefined(h))return;break}p=0==f?f:f-1,w=new t.DataManager(i).executeLocal((new t.Query).where(this._tempResource[p].resourceSettings.id,t.FilterOperators.equal,i[n][h])),0==(m=this._tempResource[0].resourceSettings.dataSource.indexOf(w[0]))?(w=[],this._tempResource.length>2&&(g=this.element.find(".e-resourceheadertr").eq(m).find("td.e-workcells").eq(s),_=this.model.enableRTL?"<div class='e-categorybar "+d+"' id='categorybar_"+r.Guid+"' style='position:absolute;height:"+c+"px;background:"+l.appointData+";width:"+a+"px;right:"+o+"px;'></div>":"<div class='e-categorybar "+d+"' id='categorybar_"+r.Guid+"' style='position:absolute;height:"+this.element.find(".e-resourceheadercells")[0].offsetHeight+"px;background:"+l.appointData+";width:"+a+"px;left:"+o+"px;'></div>",g.find("div.e-appointwrapper").length>0?g.find("div.e-appointwrapper").append(_):g.prepend(e("<div class='e-appointwrapper'></div>").append(_)))):0!=w.length&&(n=i.indexOf(w[0]))}}while(0!=w.length)}},_getHorizontalOverlapCount:function(e,i,n,s,r){for(var a=[],o=0,l=e.length;o<l;o++)t.scheduleFeatures.resources&&this._tempResource.length>0&&this._grouping.length>0?new Date(new Date(e[o][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(i[n]).setHours(0,0,0,0)).getTime()&&new Date(new Date(e[o][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()>=new Date(new Date(i[n]).setHours(0,0,0,0)).getTime()&&(new Date(s[this._appointmentSettings.startTime])<new Date(e[o][this._appointmentSettings.startTime])&&new Date(s[this._appointmentSettings.endTime])>=new Date(e[o][this._appointmentSettings.startTime])||new Date(s[this._appointmentSettings.startTime])<new Date(e[o][this._appointmentSettings.endTime])&&new Date(s[this._appointmentSettings.endTime])>new Date(e[o][this._appointmentSettings.endTime])||new Date(s[this._appointmentSettings.startTime])>=new Date(e[o][this._appointmentSettings.startTime])&&new Date(s[this._appointmentSettings.startTime])<new Date(e[o][this._appointmentSettings.endTime])||new Date(s[this._appointmentSettings.endTime])>new Date(e[o][this._appointmentSettings.startTime])&&new Date(s[this._appointmentSettings.endTime])<new Date(e[o][this._appointmentSettings.endTime]))&&(null!=r?r==e[o][this._tempResource[this._tempResource.length-1].field]:null==r)&&a.push(e[o]):new Date(new Date(e[o][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(i[n]).setHours(0,0,0,0)).getTime()&&new Date(new Date(e[o][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()>=new Date(new Date(i[n]).setHours(0,0,0,0)).getTime()&&(new Date(s[this._appointmentSettings.startTime])<new Date(e[o][this._appointmentSettings.startTime])&&new Date(s[this._appointmentSettings.endTime])>=new Date(e[o][this._appointmentSettings.startTime])||new Date(s[this._appointmentSettings.startTime])<new Date(e[o][this._appointmentSettings.endTime])&&new Date(s[this._appointmentSettings.endTime])>new Date(e[o][this._appointmentSettings.endTime])||new Date(s[this._appointmentSettings.startTime])>=new Date(e[o][this._appointmentSettings.startTime])&&new Date(s[this._appointmentSettings.startTime])<new Date(e[o][this._appointmentSettings.endTime])||new Date(s[this._appointmentSettings.endTime])>new Date(e[o][this._appointmentSettings.startTime])&&new Date(s[this._appointmentSettings.endTime])<new Date(e[o][this._appointmentSettings.endTime]))&&a.push(e[o]);return a},_renderHorizontalHeaderBar:function(){var i,n,s,r,a,o,l,d,h,p,m,c,u=this._isCustomMonthView(),g=this.model.timeScale.enable?this._isCustomMonthView()?"month":this.currentView():"month",_="day"==g?1:"week"==g?this.model.showWeekend?7:this.model.workWeek.length:"customview"===this.currentView()&&this._renderDays<=7?this._dateRender.length:this.model.workWeek.length;if(this._strTime=this._getStartEndTime(),i=this._columnTimeScale(this._strTime),this.datesColumn=this._getHeaderAllDayCellsCount(),"month"===g||this._isCustomMonthView()){for(this.datesColumn=[],this.monthDays=[],this.totdays=[],h=0;h<this._dateRender.length;h++)"month"===this.currentView()||this._isCustomMonthView()&&this._oneWeek?new Date(this.currentDate()).getMonth()===new Date(this._dateRender[h]).getMonth()&&this.totdays.push(this._dateRender[h]):this.totdays.push(new Date(this._dateRender[h]));if(n=this.totdays.length,!t.isNullOrUndefined(this.model.dateHeaderTemplateId)&&("day"==this.currentView()||"week"==this.currentView()||"workweek"==this.currentView()||"customview"==this.currentView()&&this._oneWeek))for(s=this._getUserDateheaderTemplate(),h=0;h<n;h++)r={currentDate:s[h].currentDay,currentDateClass:"",currentDay:"day"==this.currentView()?this._dayFullNames[new Date(this.totdays[h]).getDay()]:this._dayShortNames[new Date(this.totdays[h]).getDay()].toString(),cellWidth:this.model.cellWidth?this.model.cellWidth:"100%",cellHeight:this.model.cellHeight,cellToday:new Date(this.totdays[h]).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()?"e-currentdayhighlight":""},this.datesColumn.push(r),this.monthDays.push(this.totdays[h]);else for(h=0;h<n;h++)o=new Date(this.totdays[h]).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()?"e-currentdayhighlight":"",a=u&&1==new Date(this.totdays[h]).getDate()?t.format(new Date(this.totdays[h]),"MMM",this.model.locale)+" "+new Date(this.totdays[h]).getDate():t.format(new Date(this.totdays[h]),"dd",this.model.locale),r=this.model.timeScale.enable?{daynameTitle:t.format(new Date(this.totdays[h]),"dddd",this.model.locale),title:new Date(this.totdays[h]).toDateString(),currentDate:a,currentDateClass:"",currentDay:this._dayFullNames[new Date(this.totdays[h]).getDay()].toString().slice(0,1),cellWidth:this.model.cellWidth||"month"==this.currentView()||this._isCustomMonthView()?this.model.cellWidth:"30px",cellHeight:this.model.cellHeight,cellToday:o}:"day"==this.currentView()||"week"==this.currentView()||"workweek"==this.currentView()?{daynameTitle:t.format(new Date(this.totdays[h]),"dddd",this.model.locale),title:new Date(this.totdays[h]).toDateString(),currentDate:a,currentDateClass:"",currentDay:"day"==this.currentView()?this._dayFullNames[new Date(this.totdays[h]).getDay()]:this._dayShortNames[new Date(this.totdays[h]).getDay()].toString(),cellWidth:this.model.cellWidth?this.model.cellWidth:"100%",cellHeight:this.model.cellHeight,cellToday:o}:{daynameTitle:t.format(new Date(this.totdays[h]),"dddd",this.model.locale),title:new Date(this.totdays[h]).toDateString(),currentDate:a,currentDateClass:"",currentDay:this._dayFullNames[new Date(this.totdays[h]).getDay()].toString().slice(0,1),cellWidth:this.model.cellWidth,cellHeight:this.model.cellHeight,cellToday:o},this.datesColumn.push(r),this.monthDays.push(this.totdays[h])}if(l=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)&&!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId)||!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId),d=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId),l||d){var f=e.templates(e(this.model.timeScale.minorSlotTemplateId).html()),w=e.templates(e(this.model.timeScale.majorSlotTemplateId).html()),D=[],S=0;for(h=this.model.startHour;h<this.model.endHour;){for(var y=[],v=this.model.timeScale.majorSlot+S,C=S;S<v;)p=S,S*=6e4,"12"==this._timeMode&&(p!=C||t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)?y.push(f.render(object={date:new Date(new Date(this._dateRender[0]).setHours(h,0,0,S))}).trim()):y.push(w.render(object={date:new Date(new Date(this._dateRender[0]).setHours(h,0,0,S))}).trim())),S=S/6e4+this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount;h=this.model.timeScale.majorSlot>60?h+this.model.timeScale.majorSlot/60:S>=60?h+1:h,S=S>=60?0:S,D.push(y)}d=!0}m=0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource[0].resourceSettings.dataSource.length,c=l||d?this.userTimeCellHoriTemplate.render({cols:this.datesColumn,label:this._getLocalizedLabels("Resources"),multiRes:m,view:g,timeTdCount:this._strTime,colspan:"month"==g?1:this._strTime.length/_*2,heightclass:"month"==g?"e-horizontalmonthtimecellsht":"e-horizontaltimecellsht",width:this.model.width,headercellWidth:"day"==g?"100%":"55px",column:i,userTemplateId:l,template:d}):this.horizontalHeader.render({tablelayout:u?"e-fixedlayout":"",cols:this.datesColumn,label:this._getLocalizedLabels("Resources"),multiRes:m,view:g,timeTdCount:this._strTime,colspan:"month"==g?1:this._strTime.length/_*2,heightclass:"month"==g?"e-horizontalmonthtimecellsht":"e-horizontaltimecellsht",width:this.model.width,headercellWidth:"day"==g?"100%":"55px",column:i}),this.aTR.append(c)},_renderHorizontalContent:function(e,i,n,s,r,a){!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)||t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId),this.model.timeScale.majorSlot,this.model.timeScale.minorSlotCount;var o,l,d,h,p,m,c=this._strTime;d=this._columnValue,0==this._tempResource.length||t.isNullOrUndefined(this.model.group)||0==this._tempResource[0].resourceSettings.dataSource.length?(l="",o=[{classname:"e-childnode"}]):(l=this._renderHorizontalResources(),o=this._horiResources),(h=!t.isNullOrUndefined(this.model.workCellsTemplateId))&&(p=this._getUserWorkCellsTemplate()),m=this.cellTemplate.render({cellrows:o,hourdiff:Math.ceil((this.model.endHour-this.model.startHour)*(60/this.model.timeScale.majorSlot)),view:this.model.timeScale.enable?this._isCustomMonthView()?"month":this.currentView():"month",cols:this.model.timeScale.enable?"month"==this.currentView()||this._isCustomMonthView()?this.datesColumn:c:this.datesColumn,column:d,userTemplate:h,userHtml:p}),""==l?this.wTR.append(t.buildTag("td").append(e.append(i.append(n.append(s.append(r.append(a.append(this.$WorkCellDiv.append(m))))))))):this.wTR.append(t.buildTag("td.e-horizontalrestd",{},{},{width:"15%",height:"100%"}).append(l)).append(t.buildTag("td").append(e.append(i.append(n.append(s.append(r.append(a.append(this.$WorkCellDiv.append(m)))))))))},_columnTimeScale:function(e){var i,n;this._columnValue=[];var s=[],r=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount,a=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplate)||!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplate);!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplate)&&!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplate)||t.isNullOrUndefined(this.model.timeScale.minorSlotTemplate),t.isNullOrUndefined(this.model.timeScale.majorSlotTemplate);if(a)for(n=0;n<e.length;n++)this._columnValue.push(n);else for(n=0;n<e.length;n++){for(i=0;i<this.model.timeScale.minorSlotCount-1;i++){if((r+=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)>=60*(this.model.endHour-this.model.startHour)){s.push(i),r=0;break}s.push(i)}this._columnValue.push(s),r+=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount,s=[]}return this._columnValue},_getResourceHeadTemplate:function(t){return e.templates(e(this.model.resourceHeaderTemplateId).html()).render(t)},_renderHorizontalResources:function(){var i,n,s,r,a,o;this._resCollect=[],this._horizontalResRender=[],this._horiResources=[];var l=this.currentView(),d=("day"==l||("week"==l||"month"==l||this._isCustomMonthView()||this.model.workWeek.length),!!this.model.resourceHeaderTemplateId);if(t.isNullOrUndefined(this.model.group))for(o=0;o<this._tempResource.length;o++)this._horizontalResRender.push(this._tempResource[o].resourceSettings.dataSource),this._resCollect.push(this._tempResource[o].resourceSettings.dataSource);else if(1===this._grouping.length){for(n=0;n<this._grouping.length;n++)i=this._findResourceIndex(this._tempResource,"name",this._grouping[n],null,null);for(n=0;n<this._resourceInfo[i].dataSource.length;n++)this._horiResources.push({cellHeight:this.model.cellHeight,name:this._resourceInfo[i].dataSource[n][this._resourceInfo[i].text],idnum:this._resourceInfo[i].dataSource[n][this._resourceInfo[i].id],classname:"e-childnode",marginleft:"10px",width:"10px",backgroundcolor:"",border:"1px solid #bbbcbb",bordertop:"",userResHeader:this._getResourceHeadTemplate(e.extend(this._resourceInfo[i].dataSource[n],{classname:"e-childnode"})),userResTemplId:d}),this._resCollect.push(this._resourceInfo[i].dataSource[n]);this._horizontalResRender.push(this._resCollect)}else{for(s=this._resourceSort(),r=0;r<s.length;r++){for(a=0;a<this.render_Resources.length;a++)if(-1!=this.render_Resources[a].indexOf(s[r])){i=a;break}i==this.render_Resources.length-1?(this._horiResources.push({cellHeight:this.model.cellHeight,name:s[r][this._tempResource[i].resourceSettings.text],classname:"e-childnode",marginleft:(this._mediaQuery?11*i:21*i)+"px",width:"20px",backgroundcolor:"",border:"1px dotted #bbbcbb",bordertop:"",userResHeader:this._getResourceHeadTemplate(e.extend(s[r],{classname:"e-childnode"})),userResTemplId:d}),this._resCollect.push(s[r])):(this._horiResources.push({cellHeight:this.model.cellHeight,name:s[r][this._tempResource[i].resourceSettings.text],idnum:s[r][this._tempResource[i].resourceSettings.id]+"_"+s[r][this._tempResource[i].resourceSettings.groupId],classname:"e-parentnode",marginleft:10*i+"px",width:"20px",backgroundcolor:"",border:"1px dotted #bbbcbb",bordertop:"",userResHeader:this._getResourceHeadTemplate(e.extend(s[r],{classname:"e-parentnode"})),userResTemplId:d}),this._resCollect.push(s[r]))}this._horizontalResRender.push(this._resCollect)}return this.horizontalResHeader.render({trs:this._horiResources})},_horizontalResIcon:function(){for(var i,n,s,r,a,o=this.element.find(".e-parentnodecategory"),l=0;l<o.length;l++){for(s=o[l].id.split("_")[0],i=0;i<this._tempResource.length;i++)if(0!=(r=new t.DataManager(this._tempResource[i].resourceSettings.dataSource).executeLocal((new t.Query).where(this._tempResource[i].resourceSettings.id,t.FilterOperators.equal,s))).length){r=i;break}for(a=(a=r+1)==this._tempResource.length?a-1:a,n=0;n<this._tempResource.length;n++){0==new t.DataManager(this._resourceSort()).executeLocal((new t.Query).where(this._tempResource[a].resourceSettings.groupId,t.FilterOperators.equal,s)).length&&e(o[l]).removeClass("e-resourceicon e-resourcecollapse");break}}},_renderHorizontalCurrentTime:function(){var t,i,n;if("month"===this.currentView()||this._isCustomMonthView())for(t=this.monthDays,i=this.element.find(".e-headerdays").find("table").find("td"),n=0;n<t.length;n++)new Date(new Date(t[n]).setHours(0,0,0,0)).getTime()===new Date((new Date).setHours(0,0,0,0)).getTime()&&e(i[n]).addClass("e-monthcurrenttime");else this.element.find("td.e-headerToday").length>0&&(this.element.find(".e-horizontaltabletimecell").parent().append('<div id="'+this._id+'_HighlightCurrentTimeline" class="e-highlightcurrenttimeline" style="height: 92%; width: 2px; position: absolute; background-color: red; "></div>'),e("#"+this._id+"_HighlightCurrentTimeline").css("top",this.element.find(".e-headerdays tr")[1].offsetTop))},_horizontalTimePosition:function(t,i){if(t.element.find("td.e-headerToday").length>0){var n=t.element.find("td.e-headerToday")[0].cellIndex,s=60*(t.model.endHour-t.model.startHour)/t.model.timeScale.majorSlot*t.model.timeScale.minorSlotCount*n+60*(i.getHours()-t.model.startHour)/t.model.timeScale.majorSlot*t.model.timeScale.minorSlotCount,r=parseFloat(i.getMinutes())*t.element.find(".e-workcells")[1].offsetWidth*t.model.timeScale.minorSlotCount/t.model.timeScale.majorSlot;e("#"+t._id+"_HighlightCurrentTimeline").css("left",s*t.element.find(".e-workcells")[1].offsetWidth+r)}},_horizontalBusinessHighlight:function(i,n,s,r,a){var o,l,d,h,p,m,c,u=t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length?this._horiResources.length:1;if("month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable)for(o=Math.ceil(60*(this.model.endHour-this.model.startHour)/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)),p=0;p<u;p++)for(l=0;l<i.length;l++)for(c=0;c<this.model.workWeek.length;c++)this._dayNamesArray.indexOf(this.model.workWeek[c])==new Date(i[l]).getDay()&&(0==(d=l*o+Math.ceil(n*r+(this.model.endHour-this.model.startHour)*r*0))?(0==d&&e(e(this.element.find(".e-workcellstab tr")[p]).find(".e-workcells")[d]).addClass("e-businesshighlightworkcells"),e(e(this.element.find(".e-workcellstab tr")[p]).find(".e-workcells")[d]).nextAll(".e-workcells").slice(0,s*r-n*r-1).addClass("e-businesshighlightworkcells")):e(e(this.element.find(".e-workcellstab tr")[p]).find(".e-workcells")[d-1]).nextAll(".e-workcells").slice(0,s*r-n*r).addClass("e-businesshighlightworkcells"));else for(h=this.monthDays,this.element.find(".e-workcells").removeClass("e-monthcellhighlight"),p=0;p<u;p++)for(m=0;m<h.length;m++)for(c=0;c<this.model.workWeek.length;c++)this._dayNamesArray.indexOf(this.model.workWeek[c])==new Date(h[m]).getDay()&&e(e(this.element.find(".e-workcellstab tr")[p]).find(".e-workcells")[m]).addClass("e-monthcellhighlight")},_onResourceClick:function(i){var n,s,r,a,o,l,d,h,p=[],m=[];for((s=e(i.currentTarget)).hasClass("e-resourceicon e-resourcecollapse")?(s.removeClass("e-resourceicon e-resourcecollapse").addClass("e-resourceicon e-resourceexpand"),r=!0):(s.removeClass("e-resourceicon e-resourceexpand").addClass("e-resourceicon e-resourcecollapse"),!0),this.model.cellHeight||(this.element.find(".e-workcellstab").css("height","100%"),this.element.find(".e-resourceheadertable").css("height","100%")),n=e(i.currentTarget).closest("td.e-parentnode").parent().index(),l=this._getResourceCollection(),h=0;h<l.length;h++)if(0!=(a=new t.DataManager(this._tempResource[h].resourceSettings.dataSource).executeLocal((new t.Query).where(this._tempResource[h].resourceSettings.id,t.FilterOperators.equal,i.currentTarget.id.split("_")[0]))).length){o=a[0].count;break}for(d=0;d<o;d++)p.push(this.element.find(".e-resourceheadertable tr")[n+d+1]),m.push(this.element.find(".e-workcellstab tr")[n+d+1]);for(h=0;h<p.length;h++)r?(e(p[h]).children().hasClass("e-parentnode")&&e(p[h]).find(".e-parentnodecategory").removeClass("e-resourceicon e-resourcecollapse").addClass("e-resourceicon e-resourceexpand"),e(p[h]).is(":visible")&&(e(p[h]).toggle(),e(m[h]).toggle())):(e(p[h]).children().hasClass("e-parentnode")&&e(p[h]).find(".e-parentnodecategory").removeClass("e-resourceicon e-resourceexpand").addClass("e-resourceicon e-resourcecollapse"),e(p[h]).is(":hidden")&&(e(p[h]).toggle(),e(m[h]).toggle()));this.element.find(".e-horires").height(this.element.find(".e-draggableworkarea").height()),this._horizontalRender(),this.model.cellHeight&&this._reRenderScroller(),this._mediaQuery&&this.refreshScroller(),this._horizontalResIcon(),this.element.find("div.e-prevapp,div.e-nextapp").remove(),this.element.find(".e-categorybar").height(this.element.find(".e-parentworkcell").height()-3),this._businessHourScroller(),this._renderAppointmentAll()}}})(jQuery,Syncfusion),function(e,t){t.scheduleFeatures=t.scheduleFeatures||{};t.scheduleFeatures.resources={_getMultipleResourceCellsCount:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f;if(1===this._grouping.length){if(n=this._findResourceIndex(this._tempResource,"name",this._grouping[0],null,null),s=this._resourceInfo[n].dataSource.length,this._resWorkWeek)for(i=0,r=this._resourceInfo[n].dataSource,f=0;f<r.length;f++)i=t.isNullOrUndefined(r[f][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?i+this.model.workWeek.length:i+r[f][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length;else if(this._resCustomView)for(i=0,r=this._resourceInfo[n].dataSource,f=0;f<r.length;f++)a=r[f][this._tempResource[this._tempResource.length-1].resourceSettings.renderDates],t.isNullOrUndefined(a)||(i+="object"==e.type(a[0])?this._getMultipleCustomDatesCount(a):a.length)}else{for(o=this._getResourceCollection(),m=0;m<o.length;m++)if(c=[],0==m)for(u=0;u<o[m].dataSource.length;u++)c.push({resourceNam:o[m].dataSource[u][o[m].text]});else for(m>1&&(o[m-1].dataSource=[],o[m-1].dataSource=this.res),this.res=[],l=t.group(o[m].dataSource,o[m].groupId),d=t.group(o[m-1].dataSource,o[m-1].id),this._resourceManager1=l instanceof t.DataManager?l:t.DataManager(l),g=0;g<d.length;g++)for(_=0;_<d[g].items.length;_++)if(h=(new t.Query).where("key",t.FilterOperators.equal,d[g].items[_][o[m-1].id]),(p=this._resourceManager1.executeLocal(h)).length>0)for(f=0;f<p[0].items.length;f++)c.push({resourceNam:p[0].items[f][o[m].text]}),this.res.push(p[0].items[f]);s=c.length,this.res1=c.length}return{resCount:s,count:i=this._resWorkWeek||this._resCustomView?i:i*s}},_initResourceData:function(e,t){var i=this._columnToSelect(e),n=this;e.dataSource.executeQuery(i).done(function(i){e.dataSource=i.result,n._resourceInfo.push(e),t==n.model.resources.length-1&&(n._renderInitSchedule(),n._bindAppointmentsData("Load"))})},_showMultipleResourceDetails:function(e){var i,n,s,r,a,o,l,d;if(this._tempResource.length>0){for(r=this._resCollection,l=0;l<r.length;l++)this._appointmentAddWindow.find(".owner_"+l).ejAutocomplete("clearText");for(a=0;a<this.render_Resources.length-1;a++)i=this.render_Resources[a+1]instanceof t.DataManager?this.render_Resources[a+1]:t.DataManager(this.render_Resources[a+1]),this._currentAction==t.Schedule.Actions.EditSeries?(o=((o=e[this._appointmentSettings.resourceFields.toString().split(",")[a].trim()])+",").split(","),n=(new t.Query).where(r[a+1].groupId.toString(),t.FilterOperators.equal,o[a])):n=(new t.Query).where(r[a+1].groupId,t.FilterOperators.equal,e[this._appointmentSettings.resourceFields.toString().split(",")[a].trim()]),s=i.executeLocal(n),this._appointmentAddWindow.find(".owner_"+(a+1)).ejAutocomplete("clearText"),this._appointmentAddWindow.find(".owner_"+(a+1)).ejAutocomplete("option","dataSource",s);if(this._groupEditing)for(l=0;l<r.length;l++)d=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,e[this._appointmentSettings.id])),this._appointmentAddWindow.find(".owner_"+l).data("ejAutocomplete").selectValueByKey(d[0][this._appointmentSettings.resourceFields.toString().split(",")[l].trim()]);else for(l=0;l<r.length;l++)this._appointmentAddWindow.find(".owner_"+l).data("ejAutocomplete").selectValueByKey(e[this._appointmentSettings.resourceFields.toString().split(",")[l].trim()])}},_renderAppWindowResources:function(e){for(var t=this.render_Resources,i=this.model.enableRTL?"margin-right:30px;margin-top:-18px":"",n=this.model.enableRTL?"float:none":"float:left",s=0;s<t.length;s++)e.find(".owner_"+s).ejAutocomplete({enableRTL:this.model.enableRTL,showPopupButton:!0,width:"100%",delaySuggestionTimeout:10,cssClass:this.model.cssClass,multiSelectMode:this._tempResource[s].allowMultiple?"visualmode":"none",emptyResultText:this._getLocalizedLabels("EmptyResultText"),dataSource:t[s],fields:{text:this._resCollection[s].text,key:this._resCollection[s].id},change:this._onResourceChange,template:"<div class='e-resourcediv' style='height:15px; margin-right:5px; margin-top:3px; float:left;width:15px;"+n+"; background-color: ${"+this._resCollection[s].color+"}'></div><div style= "+i+">${"+this._resCollection[s].text+"}</div>"})},_resourceSelection:function(e,i,n,s,r,a){var o,l,d=a._appointmentAddWindow.find(".owner_"+s).data("ejAutocomplete"),h=d.value().split(",");for(a._appointmentAddWindow.find(".owner_"+s).ejAutocomplete("clearText"),a._appointmentAddWindow.find(".owner_"+s).ejAutocomplete("option","dataSource",n),o=0;o<h.length-1;o++)for(l=0;l<i.length;l++)if(i[l].text==h[o]){a._appointmentAddWindow.find(".owner_"+s).data("ejAutocomplete").selectValueByKey(i[l][e[s].id]);break}(""==d.value()||t.isNullOrUndefined(d.value()))&&a._appointmentAddWindow.find(".owner_"+s).data("ejAutocomplete").selectValueByKey(i[0][e[s].id]),i[0][e[s].id]},_onResourceChange:function(i){var n,s,r,a,o,l,d,h;if(!t.isNullOrUndefined(i.value)&&""!=i.value){var p=this.element.closest(".e-scheduledialog")[0].getAttribute("id").replace("AppointmentAddEditWindow",""),m=e("#"+p).data("ejSchedule"),c=parseInt(this._id.toString().split("_").slice(-1)[0]),u=m._appointmentAddWindow.find(".owner_"+c).ejAutocomplete("option","multiSelectMode"),g=this.getSelectedItems(),_=m._resCollection;if(c<m.render_Resources.length-1&&g.length>0){var f,w,D=c+1,S=m.render_Resources[D-1]instanceof t.DataManager?m.render_Resources[D-1]:t.DataManager(m.render_Resources[D-1]),y=m.render_Resources[D]instanceof t.DataManager?m.render_Resources[D]:t.DataManager(m.render_Resources[D]),v=[];if("none"==u){if(t.isNullOrUndefined(i.value)||(n=(new t.Query).where(_[D-1].text,t.FilterOperators.equal,i.value),s=S.executeLocal(n)),r=!i.value||t.isNullOrUndefined(i.value)||s.length<=0?g[0][_[D-1].id]:s[0][_[D-1].id],!t.isNullOrUndefined(r))for(a=D;a<_.length;a++){for(0!=(w=new t.DataManager(_[D].dataSource).executeLocal((new t.Query).where(_[D].groupId,t.FilterOperators.equal,r))).length&&(r=w[0][_[D-1].id]),v=[],h=0;h<w.length;h++)v.push(w[h]);0!=w.length?m._resourceSelection(_,w,v,D,g,m):(m._appointmentAddWindow.find(".owner_"+D).ejAutocomplete("clearText"),m._appointmentAddWindow.find(".owner_"+D).ejAutocomplete("option","dataSource",v)),D++}}else{for(o=t.Predicate(_[D-1].id,t.FilterOperators.equal,g[0][_[D-1].id]),g=i.value.split(","),d=1;d<g.length;d++)o=o.or(_[D-1].text,t.FilterOperators.equal,g[d]);if(f=(new t.Query).where(o),resApp=S.executeLocal(f),resApp.length>0){for(l=t.Predicate(_[D].groupId,t.FilterOperators.equal,resApp[0][_[D-1].id]),d=1;d<resApp.length;d++)l=l.or(_[D].groupId,t.FilterOperators.equal,resApp[d][_[D-1].id]);for(f=(new t.Query).where(l),w=y.executeLocal(f),v=[],h=0;h<w.length;h++)v.push(w[h]);m._resourceSelection(_,w,v,D,g,m)}}}}},addResource:function(i,n,s){var r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b,R,A,I,k,x,O,M,N;if(0==this._tempResource.length&&t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.resources))if(t.isNullOrUndefined(this.model.group)||t.isNullOrUndefined(this.model.resources))t.isNullOrUndefined(this.model.group)&&!t.isNullOrUndefined(this.model.resources)&&e.merge(this._tempResource,this.model.resources);else for(N=0;N<this.model.group.resources.length;N++)s=this._findResourceIndex(this.model.resources,"name",this.model.group.resources[N],null,null),this._tempResource.push(e.extend(!0,[],this.model.resources[s]));if(this._tempResource.length>0&&(r=this._findResourceIndex(this._tempResource,"name",n,null,null),!t.isNullOrUndefined(r))){this._tempResource[r].resourceSettings.dataSource=this.model.resources[r].resourceSettings.dataSource;var H,W=this._tempResource[r].resourceSettings.dataSource,E=this._findResourceIndex(W,this.model.resources[0].resourceSettings.id,i[this.model.resources[r].resourceSettings.id],null,null),L=0,U=[],F=r;this.dateRender;if(t.isNullOrUndefined(E)){if(t.isNullOrUndefined(s))W.push(i);else{if(this._tempResource.length>1){if(0!=s){for(N=0;N<W.length;N++)if(0!=r&&W[N][this.model.resources[r].resourceSettings.groupId]==i[this.model.resources[r].resourceSettings.groupId]&&(L+=1),L==s){L=N+1;break}r>0&&L!=s&&N==W.length&&(L=N),0==r&&L!=s&&(L=s)}}else L=s;W.splice(L,0,i)}if(1==this.model.resources[this._tempResource.length-1].resourceSettings.dataSource.length)this.refresh();else{if(r!=this._tempResource.length-1){if(O=(new t.Query).where(this._tempResource[this._tempResource.length-1].resourceSettings.groupId,t.FilterOperators.equal,i[this.model.resources[r].resourceSettings.id]),H=new t.DataManager(this.model.resources[this._tempResource.length-1].resourceSettings.dataSource).executeLocal(O),U.push(i),!t.isNullOrUndefined(H))for(i.count=H.length,N=0;N<H.length;N++)t.isNullOrUndefined(this._findResourceIndex(this._tempResource[r+1].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,H[N][this.model.resources[r].resourceSettings.id],null,null))&&(this._tempResource[r+1].resourceSettings.dataSource.push(H[N]),t.isNullOrUndefined(U[0][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])&&this.res1.splice(this._findResourceIndex(this._tempResource[r+1].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,H[N][this.model.resources[r].resourceSettings.id],null,null),0,H[N])),U.push(H[N])}else a=t.isNullOrUndefined(this.model.resources[r].resourceSettings.groupId)?null:this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,i[this.model.resources[r].resourceSettings.groupId],null,null),!t.isNullOrUndefined(a)&&this._tempResource.length>1&&t.isNullOrUndefined(this._tempResource[0].resourceSettings.dataSource[a].count)?(U.push(this._tempResource[0].resourceSettings.dataSource[a]),r=0,s=0,(H=[]).push(i),t.isNullOrUndefined(U[0][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])&&this.res1.splice(this._findResourceIndex(this._tempResource[this._tempResource.length-1].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,i[this.model.resources[r].resourceSettings.id],null,null),0,i),U.push(i)):(t.isNullOrUndefined(i[this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])&&this.res1.splice(this._findResourceIndex(this._tempResource[r].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,i[this.model.resources[r].resourceSettings.id],null,null),0,i),U.push(i));if(!(this._tempResource.length>1)||(r!=this._tempResource.length-1?H.length>0:!t.isNullOrUndefined(this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,i[this.model.resources[r].resourceSettings.groupId],null,null))))if(o=this.res1,l=this._resourceSort(),this._resCollect=l,(d=!t.isNullOrUndefined(this.model.workCellsTemplateId))&&(R=this._getUserWorkCellsTemplate()),(h=!t.isNullOrUndefined(this.model.allDayCellsTemplateId))&&(p=this._getUserAllDayCellsTemplate()),m=!!this.model.resourceHeaderTemplateId,"agenda"==this.currentView())this._renderAgendaContent();else{if("horizontal"===this.model.orientation&&"horizontal"===this._customOrientation){if(this._grouping.length>0)for(this._tempResource.length>1&&r!=this._tempResource.length-1&&(e(e(this.element.find(".e-resourceheadertable tr").eq(this._findResourceIndex(this._resCollect,this.model.resources[r].resourceSettings.id,U[0][this.model.resources[r].resourceSettings.id],null,null)))).remove(),e(e(this.element.find(".e-workcellstab tr").eq(this._findResourceIndex(this._resCollect,this.model.resources[r].resourceSettings.id,U[0][this.model.resources[r].resourceSettings.id],null,null)))).remove()),N=0;N<U.length;N++)c=[],s=this._findResourceIndex(l,this.model.resources[r].resourceSettings.id,U[N][this.model.resources[r].resourceSettings.id],this.model.resources[r].resourceSettings.groupId,U[N][this.model.resources[r].resourceSettings.groupId]),t.isNullOrUndefined(H)||0!=N?c.push({name:U[N][this.model.resources[r].resourceSettings.text],classname:"e-childnode",marginleft:10*(this._tempResource.length>1?2:1)+"px",width:"20px",backgroundcolor:"",border:"1px dotted #bbbcbb",bordertop:"",userResHeader:this._getResourceHeadTemplate(e.extend(l[s],{classname:"e-childnode"})),userResTemplId:m}):c.push({name:U[N][this.model.resources[r].resourceSettings.text],classname:"e-parentnode",idnum:i.id+"_"+i.groupId,marginleft:"0px",width:"20px",backgroundcolor:"",border:"1px dotted #bbbcbb",bordertop:"",userResHeader:this._getResourceHeadTemplate(e.extend(l[s],{classname:"e-parentnode"})),userResTemplId:m}),_=this.addResourceTemplate.render({trs:c}),t.isNullOrUndefined(this._horiResources)||this._horiResources.push(c),A=this.addResourceCellsTemplate.render({cellrows:c,hourdiff:Math.ceil((this.model.endHour-this.model.startHour)*(60/this.model.timeScale.majorSlot)),view:this.model.timeScale.enable?this._isCustomMonthView()?"month":this.currentView():"month",cols:this.model.timeScale.enable?"month"==this.currentView()||this._isCustomMonthView()?this.datesColumn:this._strTime:this.datesColumn,column:this._columnValue,userTemplate:d,userHtml:R}),0==s?(e(e(this.element.find(".e-resourceheadertable tr").eq(s))).before(_),e(e(this.element.find(".e-workcellstab tr").eq(s))).before(A)):(e(e(this.element.find(".e-resourceheadertable tr").eq(s-1))).after(_),e(e(this.element.find(".e-workcellstab tr").eq(s-1))).after(A)),t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("renderContentAreaTemplate")}else{var V=0,z=this.element.find(".e-headrealldaytable tr").length,P=this._getWorkCellsCount(),j="month"==this.currentView?50:56;if(!t.isNullOrUndefined(U[0][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek]))for(N=0;N<U.length;N++)u=this._findResourceIndex(this.res,this.model.resources[r].resourceSettings.groupId,U[N][this.model.resources[r].resourceSettings.groupId],null,null),t.isNullOrUndefined(u)?this.res1.push(U[N]):this.res1.splice(u+s,0,U[N]);if((r!=this._tempResource.length-1||1==this._tempResource.length||0==this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,i[this.model.resources[r].resourceSettings.groupId],null,null))&&0==s)for(N=1;N<=z;N++)this.element.find(".e-headrealldaytable tr:nth-child("+N+")").find("td").eq(0).removeAttr("style");for(z="month"==this.currentView()||this._isCustomMonthView()||this.model.timeScale.enable?z-1:z,N=r!=this._tempResource.length-1?1:0;N<U.length;N++){var q=[],B=0,G=this._getResourceColumnCount(U[N]);if(this._grouping.length>0){if(t.isNullOrUndefined(this.model.dateHeaderTemplateId)||"month"==this.currentView()||this._isCustomMonthView()?g=this._getResourceColumns(U[N],r,G):(this._value=[],g=this._getUserDateheaderTemplate()),_=this.headTemplate.render({cols:g,view:this.currentView(),colspan:1}),q.push({resourceNam:U[N][this._tempResource[r].resourceSettings.text],colspan:g.length,userResHeader:this._getResourceHeadTemplate(e.extend(U[N],{classname:this._tempResource.length-1==r?"e-childnode":"e-parentnode"})),userResTemplId:!1}),f=this.resourceHeadTemplate.render({cols:g,resourceName:q,leftWidth:j}),this._tempResource.length>1){if(r!=this._tempResource.length-1)if(w=this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this._tempResource[0].resourceSettings.id,U[0][this.model.resources[r].resourceSettings.id],this._tempResource[0].resourceSettings.groupId,U[0][this.model.resources[r].resourceSettings.groupId]),1==H.length&&r!=F)for(D=0,S=0;S<w;S++)D+=t.isNullOrUndefined(this._tempResource[0].resourceSettings.dataSource[S].count)?0:this._tempResource[0].resourceSettings.dataSource[S].count;else D=this._findResourceIndex(this.res1,"id",U[N].id,"groupId",U[N].groupId);else{for(y=0,D=0,w=this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,U[0][this.model.resources[r].resourceSettings.groupId],null,null),k=0;0==s?k<w:k<=w;k++)v=t.isNullOrUndefined(this._tempResource[0].resourceSettings.dataSource[k].count)?0:this._tempResource[0].resourceSettings.dataSource[k].count,D=0!=s&&k!=w||t.isNullOrUndefined(s)?D+v:D+(s>v?v:0==s?s+v:s),y+=t.isNullOrUndefined(this._tempResource[0].resourceSettings.dataSource[k].count)||k==w?0:1;C=this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(y).prop("colSpan"),this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(y).attr("colspan",C+g.length)}for(x=0;x<D;x++)B+=this.element.find(".e-headrealldaytable tr:nth-child("+(z-1)+")").find("td").eq(x).prop("colSpan");s=D}else for(s=this._findResourceIndex(l,this.model.resources[r].resourceSettings.id,U[N][this.model.resources[r].resourceSettings.id],this.model.resources[r].resourceSettings.groupId,U[N][this.model.resources[r].resourceSettings.groupId]),k=0;k<s;k++)B+=this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(k).prop("colSpan");for(0==s&&0==B?(this.element.find(".e-headrealldaytable tr:nth-child("+z+")").find("td").eq(B).before(_),this.element.find(".e-headrealldaytable tr:nth-child("+(z-1)+")").find("td").eq(s).before(f)):(this.element.find(".e-headrealldaytable tr:nth-child("+z+")").find("td").eq(B-1).after(_),this.element.find(".e-headrealldaytable tr:nth-child("+(z-1)+")").find("td").eq(s-1).after(f)),"month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable&&this.model.showAllDayRow&&(T=this.alldayTemp.render({cols:g,colspan:1,userTemp:h,userHtml:p}),0==B?this.element.find(".e-headrealldaytable tr:nth-child("+(z+1)+")").find("td").eq(B).before(T):this.element.find(".e-headrealldaytable tr:nth-child("+(z+1)+")").find("td").eq(B-1).after(T),t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("renderHeaderAllDayTemplate")),x=1;x<=P.length;x++)"month"!=this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable?(d&&(b=new Array(U[N]),R=this._getWorkCellsTemplate(b,G)),A=this.addResWorkcellTemp.render({cols1:this._value,orientation:this.model.orientation,timeScale:this.model.timeScale.minorSlotCount,userTemplate:d,userHtml:R,value:x,wIndex:0})):A=this.addResMonthcellTemp.render({cols1:this._value,orientation:this.model.orientation,timeScale:this.model.timeScale.minorSlotCount,userTemplate:d,userHtml:R,tenable:this.model.timeScale.enable,cview:"month"!==this.currentView()&&!this._isCustomMonthView()}),0==s&&this.element.find(".e-workcellstab tr:nth-child("+x+")").find("td").eq(0).removeAttr("style"),0==B?this.element.find(".e-workcellstab tr:nth-child("+x+")").find("td").eq(B).before(A):this.element.find(".e-workcellstab tr:nth-child("+x+")").find("td").eq(B-1).after(A),t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("renderContentAreaTemplate");V+=g.length,t.isNullOrUndefined(this._findResourceIndex(this.res1,this._tempResource[r].resourceSettings.id,U[N][this._tempResource[r].resourceSettings.id],this._tempResource[r].resourceSettings.groupId,U[N][this._tempResource[r].resourceSettings.groupId]))||e.merge(this.dateRender,G)}}this._tempResource.length>1&&this._grouping.length>0&&r!=this._tempResource.length-1&&(s=this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[r].resourceSettings.id,U[0][this.model.resources[r].resourceSettings.id],this.model.resources[r].resourceSettings.groupId,U[0][this.model.resources[r].resourceSettings.groupId]),I=this.resourceHeadTemplate.render({cols:g,resourceName:{resourceNam:U[0][this.model.resources[r].resourceSettings.text],colspan:V,userResHeader:this._getResourceHeadTemplate(e.extend(U[0],{classname:this._tempResource.length-1==r?"e-childnode":"e-parentnode"})),userResTemplId:m},leftWidth:j}),0==(s=this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").length>s?s:this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").length)?this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(s).before(I):this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(s-1).after(I)),this._getRenderDates()}if(this._tempResource.length>1){var Q=[],Y=[],Z=[],K=[],X=this._getResourceCollection();for(Q=e.merge(Q,X),k=0,x=0;x<X[X.length-2].dataSource.length;x++)for(O=(new t.Query).where(X[X.length-1].groupId,t.FilterOperators.equal,X[X.length-2].dataSource[x][X[X.length-2].id]),(H=new t.DataManager(X[X.length-1].dataSource).executeLocal(O)).length>0&&(X[0].dataSource[x].count=H.length),M=0;M<H.length;)Y.push({resourceNam:H[M][X[X.length-1].text],userResHeader:this._getResourceHeadTemplate(e.extend(H[M],{classname:"e-childnode"})),userResTemplId:m}),Z[k]=H[M],K.push(H[M]),k++,M++;for(this._valueCollection=Z,this._tempResource[this._tempResource.length-1].dataSource=Z,X[X.length-1].dataSource=Z,N=0;N<X.length;N++)this.render_Resources[N]=X[N].dataSource,this._resCollection[N].dataSource=X[N].dataSource}this.model.timeScale.enable&&this._borderAddRemove(),this.res1=this._tempResource.length>1?K:o,this.render_resource=this.res1,this._highlightBusinessHours(),"vertical"===this.model.orientation&&"vertical"===this._customOrientation?this.refreshScroller():this._horizontalRender(),this._renderAppointmentAll()}}}}},_getWorkCellsTemplate:function(t,i){var n,s,r,a,o=[],l=[];this.model.timeScale.minorSlotCount;for(s=e.templates(e(this.model.workCellsTemplateId).html()),o=[],a=0;a<i.length;a++)n=new Date(new Date(i[a]).setHours(this.model.startHour,0,0)),r=s.render({date:n,view:this.currentView(),resource:t[0],timescale:this.model.timeScale.enable}),o.push(r.trim());return l.push(o),l},_getResourceColumnCount:function(i){var n,s,r,a,o=[],l=i[this._tempResource[this._tempResource.length-1].resourceSettings.workWeek];if("workweek"===this.currentView())if(t.isNullOrUndefined(l))r=e.extend(!0,[],this._renderDates),a=this._getWeekDays(),r=r.filter(function(e){return-1!=a.indexOf(new Date(e).getDay())}),e.merge(o,r);else for(l=this._resourceDaysReorder(l),n=0;n<l.length;n++)-1==(s=this._getDayNameIndex(l[n].capitalizeFirstString()))&&(s=this._getDayNameIndex(l[n])),o.push(this._renderDates[s]);else"day"===this.currentView()?o.push(new Date(this.currentDate().getFullYear(),this.currentDate().getMonth(),this.currentDate().getDate()).getTime()):this.model.showWeekend?o=this._renderDates:(r=e.extend(!0,[],this._renderDates),a=this._getWeekDays(),r=r.filter(function(e){return-1!=a.indexOf(new Date(e).getDay())}),e.merge(o,r)),o="month"==this.currentView()?this._dateRender:o;return o},_getResourceColumns:function(e,i,n){var s,r,a=[];for(this._value=[],s="month"==this.currentView()?this._getColumnCount().length:n.length,r=0;r<s;r++){var o=("month"===this.currentView()||this._isCustomMonthView())&&0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?this._dayFullNames[new Date(n[r]).getDay()]:this._dayShortNames[new Date(n[r]).getDay()],l=new Date(new Date(this._dateRender[r]).setHours(0,0,0,0)).getTime()===new Date((new Date).setHours(0,0,0,0)).getTime()?"e-headerToday":"",d="month"===this.currentView()||this._isCustomMonthView()?{currentDay:o,currentDateClass:"",cellToday:""}:"day"===this.currentView()?0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?{currentDay:t.format(new Date(n[r]),this._pattern.D,this.model.locale),currentDateClass:"",cellToday:l}:{currentDay:o+" "+new Date(n[r]).getDate(),currentDateClass:"",cellToday:l}:{currentDay:o+" "+new Date(n[r]).getDate(),currentDateClass:new Date(n[r]).getDate()===new Date(this.currentDate()).getDate()?"e-activeview":"",cellToday:l};a.push(d),this._value.push(r)}return a},removeResource:function(i,n){var s,r,a,o,l,d,h,p,m,c,u,g,_;if(this._tempResource.length>0){var f,w,D=0,S=0,y=[],v=[],C=1==this._tempResource.length&&"horizontal"===this.model.orientation&&"horizontal"===this._customOrientation?e.extend(!0,[],this._resCollect):e.extend(!0,[],this.res1),T=this._findResourceIndex(this._tempResource,"name",n,null,null);if(!t.isNullOrUndefined(T)&&!t.isNullOrUndefined(this._findResourceIndex(this._tempResource[T].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,i,null,null))){if(s=this._resourceSort(),("vertical"===this.model.orientation&&"vertical"===this._customOrientation||"agenda"==this.currentView())&&(this._resCollect=this._tempResource[this._tempResource.length-1].resourceSettings.dataSource,1==this._tempResource.length&&(this._tempResource[T].resourceSettings.dataSource=this.model.resources[T].resourceSettings.dataSource)),T!=this._tempResource.length-1){if(r=(new t.Query).where(this._tempResource[this._tempResource.length-1].resourceSettings.groupId,t.FilterOperators.equal,i),y=new t.DataManager(this.model.resources[this._tempResource.length-1].resourceSettings.dataSource).executeLocal(r),v.push(this._tempResource[T].resourceSettings.dataSource[this._findResourceIndex(this._tempResource[T].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,i,null,null)]),!t.isNullOrUndefined(y))for(u=0;u<y.length;u++)t.isNullOrUndefined(v[0][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])&&this.res1.splice(this._findResourceIndex(this._tempResource[T+1].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,y[u][this.model.resources[T].resourceSettings.id],null,null),1),this._tempResource[T+1].resourceSettings.dataSource.splice(this._findResourceIndex(this._tempResource[T+1].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,y[u][this.model.resources[T].resourceSettings.id],null,null),1),v.push(y[u])}else v.push(this._tempResource[T].resourceSettings.dataSource[this._findResourceIndex(this._tempResource[T].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,i,null,null)]),t.isNullOrUndefined(v[0][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])&&this.res1.splice(this._findResourceIndex(this.res1,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.id],null,null),1),("vertical"===this.model.orientation&&"vertical"===this._customOrientation||"agenda"==this.currentView())&&this._tempResource[T].resourceSettings.dataSource.splice(this._findResourceIndex(this.res1,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.id],null,null),1);if(!(this._tempResource.length>1)||(T==this._tempResource.length-1||y.length>0)){if("agenda"==this.currentView())this._renderAgendaContent();else if("vertical"===this.model.orientation&&"vertical"===this._customOrientation){for(o=this.element.find(".e-headrealldaytable > tbody > tr").length,o="month"==this.currentView()||this._isCustomMonthView()||this.model.timeScale.enable?o-1:o,l=this._getWorkCellsCount(),u=0;u<v.length;u++)if(!t.isNullOrUndefined(y)&&0==u&&y.length>0||this._tempResource.length>1&&T==this._tempResource.length-1&&(d=this._findResourceIndex(this.model.resources[this._tempResource.length-1].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,v[u][this.model.resources[T].resourceSettings.id],null,null),t.isNullOrUndefined(d)||this.model.resources[this._tempResource.length-1].resourceSettings.dataSource.splice(d,1)),this._grouping.length>0){if(this._tempResource.length>1)if(w=this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.groupId],null,null),T!=this._tempResource.length-1){if(0!=u){for(D=0,p=0;p<w;p++)D+=t.isNullOrUndefined(this._tempResource[0].resourceSettings.dataSource[p].count)?0:this._tempResource[0].resourceSettings.dataSource[p].count;a=this.element.find(".e-headrealldaytable tr:nth-child("+(o-1)+")").find("td").eq(D).prop("colSpan")}}else{for(this._tempResource[0].resourceSettings.dataSource[w].count=this._tempResource[0].resourceSettings.dataSource[w].count-1,D=this._findResourceIndex(C,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.id],null,null),a=this.element.find(".e-headrealldaytable tr:nth-child("+(o-1)+")").find("td").eq(D).prop("colSpan"),h=0,c=0;c<w;c++)t.isNullOrUndefined(this._tempResource[0].resourceSettings.dataSource[c].count)||(h+=1);this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(h).prop("colSpan",this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(h).prop("colSpan")-a)}else D=this._findResourceIndex(C,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.id],null,null),a=this.element.find(".e-headrealldaytable tr:nth-child("+(o-1)+")").find("td").eq(D).prop("colSpan");if(0!=D)for(S=0,p=0;p<D;p++)S+=this.element.find(".e-headrealldaytable tr:nth-child("+(o-1)+")").find("td").eq(p).prop("colSpan");if(!t.isNullOrUndefined(a)){for(m=0;m<a;m++)for(this.dateRender.splice(S,1),this.element.find(".e-headrealldaytable tr:nth-child("+o+")").find("td").eq(S).remove(),this.element.find(".e-headrealldaytable tr:nth-child("+(o+1)+")").find("td").eq(S).remove(),c=1;c<=l.length;c++)this.element.find(".e-workcellstab tr:nth-child("+c+")").find("td").eq(S).remove();this.element.find(".e-headrealldaytable tr:nth-child("+(o-1)+")").find("td").eq(D).remove()}}this._tempResource.length>1&&(T!=this._tempResource.length-1?(f=this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.id],this.model.resources[T].resourceSettings.groupId,v[0][this.model.resources[T].resourceSettings.groupId]),this.model.resources[T].resourceSettings.dataSource.splice(this._findResourceIndex(this.model.resources[T].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.id],null,null),1)):0==this._tempResource[0].resourceSettings.dataSource[w].count&&(f=this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.groupId],null,null),delete this._tempResource[0].resourceSettings.dataSource[f].count),!t.isNullOrUndefined(f)&&this._grouping.length>0&&(f=this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").length>f?f:this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").length-1,this.element.find(".e-headrealldaytable tr:nth-child(1)").find("td").eq(f).remove()))}else{for(u=0;u<v.length;u++)!t.isNullOrUndefined(y)&&0==u&&y.length>0?(f=this._findResourceIndex(s,this.model.resources[T].resourceSettings.id,v[u][this.model.resources[T].resourceSettings.id],this.model.resources[T].resourceSettings.groupId,v[u][this.model.resources[T].resourceSettings.groupId]),this.model.resources[T].resourceSettings.dataSource.splice(this._findResourceIndex(this._tempResource[T].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,v[0][this.model.resources[T].resourceSettings.id],null,null),1)):(g=this._tempResource.length>1?this._resCollect:C,f=this._findResourceIndex(g,this.model.resources[T].resourceSettings.id,v[u][this.model.resources[T].resourceSettings.id],"classname","e-childnode"),D=this._findResourceIndex(this.model.resources[this._tempResource.length-1].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,v[u][this.model.resources[T].resourceSettings.id],null,null),t.isNullOrUndefined(D)||T!=this._tempResource.length-1||this.model.resources[this._tempResource.length-1].resourceSettings.dataSource.splice(D,1)),t.isNullOrUndefined(this._findResourceIndex(this._resCollect,this.model.resources[T].resourceSettings.id,v[u][this.model.resources[T].resourceSettings.id],this.model.resources[T].resourceSettings.groupId,v[u][this.model.resources[T].resourceSettings.groupId]))||this._resCollect.splice(f,1),this._grouping.length>0&&(this._horiResources.splice(f,1),this._tempResource.length>1&&T==this._tempResource.length-1&&(w=this._findResourceIndex(this._tempResource[0].resourceSettings.dataSource,this.model.resources[T].resourceSettings.id,s[f][this.model.resources[1].resourceSettings.groupId]),this._tempResource[0].resourceSettings.dataSource[w].count=this._tempResource[0].resourceSettings.dataSource[w].count-1,0==this._tempResource[0].resourceSettings.dataSource[w].count&&(e(e(this.element.find(".e-resourceheadertable tr").eq(f-1))).find(".e-parentnodecategory, .e-resourceicon, .e-resourcecollapse").removeClass("e-resourceicon, e-resourcecollapse"),delete this._tempResource[0].resourceSettings.dataSource[w].count)),e(e(this.element.find(".e-resourceheadertable tr").eq(f))).remove(),e(e(this.element.find(".e-workcellstab tr").eq(f))).find(".e-appointwrapper").remove(),e(e(this.element.find(".e-workcellstab tr").eq(f))).remove());for(this._resourceInfo=[],_=0;_<=this.model.resources.length-1;_++)this._resourceInfo.push(this.model.resources[_].resourceSettings)}this._getRenderDates(),this.model.timeScale.enable&&this._borderAddRemove(),"vertical"===this.model.orientation&&"vertical"===this._customOrientation?this._grouping.length&&this.refreshScroller():this._horizontalRender(),this._resourceSort()}}(0==this._resCollect.length||0==this.res1)&&this.refresh()}},_getResourceCollection:function(){var e,i,n,s,r=[];if(0!=this._tempResource.length){if(t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length)for(i=0;i<this._tempResource.length;i++)r.push({index:i});else{for(i=0;i<this._grouping.length;i++)e=this._findResourceIndex(this._tempResource,"name",this._grouping[i],null,null),r.push({index:e,name:this._tempResource[i].name});r=r.sort(function(e,t){var i=e.index,n=t.index;return i<n?-1:i>n?1:0})}for(n=[],s=0;s<r.length;s++)n.push(this._resourceInfo[r[s].index]);return this._resCollection=n,n}},_resourceSort:function(){var e,i,n,s,r,a,o,l,d,h,p,m=[],c=[],u=[];if(this._tempResource.length>1){for(r=0;r<this._tempResource.length;r++)for(a=0;a<this._tempResource[r].resourceSettings.dataSource.length;a++)m.push(this._tempResource[r].resourceSettings.dataSource[a]);for(i=1,o=0;o<this._tempResource.length;o++){for(l=0,d=this._tempResource[o].resourceSettings.dataSource;l<d.length;l++)if(-1==c.indexOf(d[l])&&c.push(d[l]),e=(e=new t.DataManager(m).executeLocal((new t.Query).where(this._tempResource[i].resourceSettings.groupId,t.FilterOperators.equal,d[l][this._tempResource[o].resourceSettings.id]))).filter(function(e){return-1===d.indexOf(e)}),n=c.indexOf(d[l]),0!=e.length)for(h=0;h<e.length;h++)s=n+h+1,-1==c.indexOf(e[h])&&c.splice(s,0,e[h]);i=++i==this._tempResource.length?i-1:i}for(p=0;p<c.length;p++)-1!=(n=this.res1.indexOf(c[p]))&&u.push(c[p]);this.res1=u}else c=this.res1;return c},_renderMultipleResourceHeaderTemplate:function(i,n){var s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D;this.res1=[],this.render_Resources=[],this.level_Resources=[];var S=this.currentView(),y=this._getResourceCollection(),v=this.model.showWeekend?7:this.model.workWeek.length,C="day"==S?1:"week"==S||"month"==S?v:this.model.workWeek.length;if(C="customview"==S&&this._dateRender.length>=7?v:"customview"==S&&this._dateRender.length<7?this._dateRender.length:C,t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length){for(D=0;D<this._tempResource.length;D++)this.render_Resources.push(this._tempResource[D].resourceSettings.dataSource);this.res1=[0]}else if(s=!!this.model.resourceHeaderTemplateId,r=[],1===this._grouping.length){for(p=0;p<this._grouping.length;p++)a=this._findResourceIndex(this._tempResource,"name",this._grouping[p],null,null);for(p=0;p<this._resourceInfo[a].dataSource.length;p++)this._resWorkWeek&&(_=t.isNullOrUndefined(this._resourceInfo[a].dataSource[p][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?C:this._resourceInfo[a].dataSource[p][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length),this._resCustomView&&(w=this._resourceInfo[a].dataSource[p][this._tempResource[this._tempResource.length-1].resourceSettings.renderDates],_=t.isNullOrUndefined(w)?C:t.isNullOrUndefined(w)||"object"!=e.type(w[0])?w.length:this._getMultipleCustomDatesCount(w)),"agenda"!=this.currentView()&&r.push({resourceNam:this._resourceInfo[a].dataSource[p][this._resourceInfo[a].text],colspan:this._resWorkWeek||this._resCustomView?_:C,userResHeader:this._getResourceHeadTemplate(e.extend(this._resourceInfo[a].dataSource[p],{classname:"e-childnode"})),userResTemplId:s}),this.res1.push(this._resourceInfo[a].dataSource[p]),this.level_Resources.push(this.res1[p]);this._valueCollection=this.res1,this.render_Resources.push(this.res1),"vertical"===this.model.orientation&&"vertical"===this._customOrientation&&"agenda"!=this.currentView()&&null!==i&&null!=n&&(o="month"==S?50:56,l=this.resourceHeadTemplate.render({cols:n,resourceName:r,leftWidth:o}),i.append(t.buildTag("tr.e-headerbar").append(l)))}else{var T=[],b=[],R=[],A=0,I=[],k=[],x=[],O=[];if(this.resourceValue=0,d=0,T=e.merge(T,y),this._tempResource.length){for(D=0,m=0;m<y[y.length-2].dataSource.length;m++)for(var M=(new t.Query).where(y[y.length-1].groupId,t.FilterOperators.equal,y[y.length-2].dataSource[m][y[y.length-2].id]),N=new t.DataManager(y[y.length-1].dataSource).executeLocal(M),H=0;H<N.length;)b.push({resourceNam:N[H][y[y.length-1].text],colspan:1*C,userResHeader:this._getResourceHeadTemplate(e.extend(N[H],{classname:"e-childnode"})),userResTemplId:s}),R[D]=N[H],this.res1.push(N[H]),D++,H++;this._valueCollection=R,y[y.length-1].dataSource=R,h=e.extend(!0,[],y)}for(p=this._tempResource.length-1;p>=0;p--){for(x.push(p),m=0;m<y[p].dataSource.length;m++){if(c=0!=p?this._findResourceIndex(y[p-1].dataSource,y[p-1].id,y[p].dataSource[m][y[p].groupId],null,null):0,u=p!=this._tempResource.length-1?this._findResourceIndex(y[p+1].dataSource,y[p+1].groupId,y[p].dataSource[m][y[p].id],null,null):this._tempResource.length-1,t.isNullOrUndefined(c)&&t.isNullOrUndefined(u)&&(y[p].dataSource[m]=0),!t.isNullOrUndefined(c)&&!t.isNullOrUndefined(u)&&0!==y[p].dataSource[m]){if(k.push(y[p].dataSource[m]),this.resourceValue=k.length,p<=this._tempResource.length-2){if(M=(new t.Query).where(y[p+1].groupId,t.FilterOperators.equal,y[p].dataSource[m][y[p].id]),N=new t.DataManager(y[p+1].dataSource).executeLocal(M),p<=this._tempResource.length-3){for(D=0;D<N.length;D++)A+=t.isNullOrUndefined(N[D].count)?0:N[D].count;d="vertical"===this.model.orientation&&"vertical"===this._customOrientation?A:A+N.length,y[p].dataSource[m].count=d,A=0}p==this._tempResource.length-2&&(y[p].dataSource[m].count=N.length,d=N.length),this.resourceValue=d,N.length=0}if(this._resWorkWeek){if(g=0,p!=this._tempResource.length-1)for(M=(new t.Query).where(h[p+1].groupId,t.FilterOperators.equal,h[p].dataSource[m][h[p].id]),_=new t.DataManager(h[p+1].dataSource).executeLocal(M),f=0;f<_.length;f++)g+=t.isNullOrUndefined(_[f][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?t.isNullOrUndefined(_[f].colspan)?C:_[f].colspan:_[f][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length;else g+=t.isNullOrUndefined(h[p].dataSource[m][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?C:h[p].dataSource[m][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length;h[p].dataSource[m].colspan=g,this.resourceValue=g}if(this._resCustomView){if(g=0,p!=this._tempResource.length-1)for(M=(new t.Query).where(h[p+1].groupId,t.FilterOperators.equal,h[p].dataSource[m][h[p].id]),_=new t.DataManager(h[p+1].dataSource).executeLocal(M),f=0;f<_.length;f++)w=_[f][this._tempResource[this._tempResource.length-1].resourceSettings.renderDates],g+=t.isNullOrUndefined(w)?t.isNullOrUndefined(_[f].colspan)?C:_[f].colspan:"object"==e.type(w[0])?this._getMultipleCustomDatesCount(w):w.length;else w=this._tempResource[this._tempResource.length-1].resourceSettings.renderDates,g+=t.isNullOrUndefined(h[p].dataSource[m][w])?C:this._getCustomDatesCount(m,w);h[p].dataSource[m].colspan=g,this.resourceValue=g}"agenda"!=this.currentView()&&r.push({resourceNam:y[p].dataSource[m][y[p].text],colspan:this._resWorkWeek||this._resCustomView?this.resourceValue:this.resourceValue*C,userResHeader:this._getResourceHeadTemplate(e.extend(y[p].dataSource[m],{classname:this._tempResource.length-1==p?"e-childnode":"e-parentnode"})),userResTemplId:s}),this.level_Resources.push(y[p].dataSource[m]),k.length=0}"vertical"===this.model.orientation&&"vertical"===this._customOrientation&&"agenda"!=this.currentView()&&null!==i&&null!=n&&(o="month"==S?50:56,l=this.resourceHeadTemplate.render({cols:n,resourceName:r,leftWidth:o}),O[p]=t.buildTag("tr.e-headerbar").append(l)[0])}I[p]=y[p].dataSource,r.length=0}this.render_Resources=I,"vertical"===this.model.orientation&&"vertical"===this._customOrientation&&"agenda"!=this.currentView()&&i.append(O)}return i},_getMultipleResourceAlldayApp:function(e,i,n,s){this.allDayCount=[],new Date(new Date(e[i]).setHours(0,0,0,0)).getTime()!=new Date(new Date(s[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()||s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()]!=this.res1[n][this._tempResource[this._tempResource.length-1].resourceSettings.id]||!(!0===s[this._appointmentSettings.allDay]||(new Date(s[this._appointmentSettings.endTime])-new Date(s[this._appointmentSettings.startTime]))/36e5>=24||this._findAllDayApp(s))||!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1&&s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()]!=this.res1[n][this._tempResource[this._tempResource.length-1].resourceSettings.groupId]?this._resWorkWeek&&0==new Date(e[i-1]).getDay()&&new Date(new Date(e[i]).setHours(0,0,0,0)).getTime()>new Date(new Date(s[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()&&0!=new Date(new Date(new Date(s[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()).getDay()&&new Date(new Date(e[i]).setHours(0,0,0,0)).getTime()<=new Date(new Date(s[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&s[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()]==this.res1[n][this._tempResource[this._tempResource.length-1].resourceSettings.id]&&!0===s[this._appointmentSettings.allDay]&&(this._setAllDayPos(s,i,n),this.allDayCount.push(s)):(this._setAllDayPos(s,i,n),this.allDayCount.push(s))},_getResourceColor:function(e){var i,n,s=this._resCollection,r="",a="";if(t.isNullOrUndefined(this.model.group))i=this._findResourceIndex(this.render_Resources[this.render_Resources.length-1],s[s.length-1].id,e[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()],null,null),t.isNullOrUndefined(i)||(r=t.isNullOrUndefined(this.render_Resources[this.render_Resources.length-1][i][s[s.length-1].color])?r:this.render_Resources[this.render_Resources.length-1][i][s[s.length-1].color],a=t.isNullOrUndefined(this.render_Resources[this.render_Resources.length-1][i][s[s.length-1].appointmentClass])?a:this.render_Resources[this.render_Resources.length-1][i][s[s.length-1].appointmentClass]);else{for(n=0;n<this.render_Resources.length&&(i=this._findResourceIndex(this.render_Resources[n],s[n].id,e[this._appointmentSettings.resourceFields.split(",")[n].trim()],null,null),t.isNullOrUndefined(i)||(r=""==r||t.isNullOrUndefined(r)?this.render_Resources[n][i][s[n].color]:r,a=""==a||t.isNullOrUndefined(a)?this.render_Resources[n][i][s[n].appointmentClass]:a,t.isNullOrUndefined(r)||t.isNullOrUndefined(a)));n++);r=t.isNullOrUndefined(r)||""==r?"":r,a=t.isNullOrUndefined(a)||""==a?"":a}return{appointData:r,appointCustomcss:a,applyFilter:!1}},_getResourceValue:function(e){var i,n,s;return t.scheduleFeatures.resources&&0!=this._tempResource.length&&(n=this._getResourceDetails(e),s=t.Predicate(this._tempResource[n.length-1].resourceSettings.id,t.FilterOperators.equal,n[0].id),s=this._grouping.length>1?s.and(this._tempResource[n.length-1].resourceSettings.groupId,t.FilterOperators.equal,n[1].id):s,i=t.DataManager(this._resCollection[n.length-1].dataSource).executeLocal((new t.Query).where(s))[0]),i},_getResourceDetails:function(e,i){var n,s,r,a,o,l,d,h,p,m,c;if(0!=this._tempResource.length&&this._tempResource.length>0){if(n="day"==this.currentView()?1:!this.model.showWeekend||"week"!=this.currentView()&&"month"!=this.currentView()?this.model.workWeek.length:7,n=this.model.showWeekend&&"customview"==this.currentView()&&this._dateRender.length>=7?7:"customview"==this.currentView()&&this._dateRender.length<7?this._dateRender.length:n,i="month"===this.currentView()||"customview"==this.currentView()?e.index():!t.isNullOrUndefined(this._cellIndex)&&t.isNullOrUndefined(this._multiple)?this._cellIndex:e.index(),e.hasClass("e-detailedapp")||(this.index=i),i=e.hasClass("e-detailedapp")?this.index:i,this._resWorkWeek){for(s=0,r=0;r<this._valueCollection.length;r++)if((s+=t.isNullOrUndefined(this._valueCollection[r][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?this.model.workWeek.length:this._valueCollection[r][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length)>e.index()){i=r;break}}else if(this._resCustomView){for(s=0,r=0;r<this._valueCollection.length;r++)if(a=this._tempResource[this._tempResource.length-1].resourceSettings.renderDates,t.isNullOrUndefined(this._valueCollection[r][a])||(s+=this._getCustomDatesCount(r,a)),s>e.index()){i=r;break}}else i="vertical"===this.model.orientation&&"vertical"===this._customOrientation?parseInt(i/n):t.isNullOrUndefined(this._workCellIndex)?e.parent().index():this._workCellIndex;for(o="vertical"===this.model.orientation&&"vertical"===this._customOrientation?this._valueCollection:this._resCollect,i=(i=!t.isNullOrUndefined(o)&&i>o.length?e.closest(".e-workcells").hasClass("e-workcells")?e.parent().index():e.closest(".e-workcells").parent().index():i)>0?i:0,this._resourceCollection=[],c=(m=this._resCollection).length-1;c>=0;c--)c==m.length-1?t.isNullOrUndefined(this.model.group)?(this._resourceCollection.push({id:m[m.length-1].dataSource[i][m[m.length-1].id]}),l=m[m.length-1].dataSource[i][m[m.length-1].groupId]):(this._resourceCollection.push({id:o[i][m[c].id]}),l=o[i][m[c].groupId]):(d=m[c].dataSource instanceof t.DataManager?m[c].dataSource:t.DataManager(m[c].dataSource),h=(new t.Query).where(m[c].id,t.FilterOperators.equal,l),p=d.executeLocal(h),this._resourceCollection.push({id:p[0][m[c].id]}),l=p[0][m[c].groupId]);return this._resourceCollection}},_getResourceFields:function(e){if(!t.isNullOrUndefined(this.model.group)||this._tempResource.length>1)for(var i=0,n=this._resourceCollection.length-1;i<this._resourceCollection.length;i++,n--)e[this._appointmentSettings.resourceFields.split(",")[i].trim()]=this._resourceCollection[n].id;else e[this._appointmentSettings.resourceFields.split(",")[0].trim()]=this._resourceCollection[0].id;return e},_getDragDropResourceData:function(e,i,n){var s,r,a,o,l,d,h,p,m,c,u,g,_,f=n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()];if(e._appointmentSettings.resourceFields.split(",").length>1&&(s=n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]),!t.isNullOrUndefined(i)){if(r="day"==e.currentView()?1:!e.model.showWeekend||"week"!=e.currentView()&&"month"!=e.currentView()?e.model.workWeek.length:7,r=e.model.showWeekend&&"customview"==e.currentView()&&e._dateRender.length>=7?7:"customview"==e.currentView()&&e._dateRender.length<7?e._dateRender.length:r,a=e.model.enableRTL?e.res1.length-Math.floor(i/r)-1:Math.floor(i/r),e._resWorkWeek)for(o=0,l=0;l<e.res1.length;l++)if((o+=t.isNullOrUndefined(e.res1[l][e.model.resources[e.model.resources.length-1].resourceSettings.workWeek])?e.model.workWeek.length:e.res1[l][e.model.resources[e.model.resources.length-1].resourceSettings.workWeek].length)>i){a=l;break}if(e._resCustomView)for(o=0,l=0;l<e.res1.length;l++)if(d=e.model.resources[e.model.resources.length-1].resourceSettings.renderDates,t.isNullOrUndefined(e.res1[l][d])||(o+=e._getCustomDatesCount(l,d)),o>i){a=l;break}if(h="vertical"==e.model.orientation&&"vertical"==e._customOrientation?e.res1[a]:e._resCollect[i],this._groupEditing||this._groupEdit){if(p=(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]+",").split(","),e._appointmentSettings.resourceFields.split(",").length>1&&(m=(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]+",").split(",")),(c=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)))[0]=this.tempResApp,u=c[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]].toString(),this._findResourceIndex(e.res1,"id",u,null,null),p.length-1<2&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]=h[e.model.resources[e.model.resources.length-1].resourceSettings.id].toString()+",",e._appointmentSettings.resourceFields.split(",").length>1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]=h[e.model.resources[e.model.resources.length-1].resourceSettings.groupId].toString()+",")),p.length-1>=2&&u!=h[e.model.resources[e.model.resources.length-1].resourceSettings.id].toString())for(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]="",e._appointmentSettings.resourceFields.split(",").length>1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]=""),g=0;g<p.length-1;g++)if(p[g]==u){for(_=0;_<p.length-1;_++)if(p[_]==h[e.model.resources[e.model.resources.length-1].resourceSettings.id].toString())return n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]=f,e._appointmentSettings.resourceFields.split(",").length>1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]=s),n[e._appointmentSettings.startTime]=this.tempResApp[e._appointmentSettings.startTime],n[e._appointmentSettings.endTime]=this.tempResApp[e._appointmentSettings.endTime],this._reverse=!0,n;n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]+=h[e.model.resources[e.model.resources.length-1].resourceSettings.id].toString()+",",e._appointmentSettings.resourceFields.split(",").length>1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]+=h[e.model.resources[e.model.resources.length-2].resourceSettings.groupId].toString()+",")}else n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]+=p[g]+",",e._appointmentSettings.resourceFields.split(",").length>1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]+=m[g]+",")}else n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]=h[e.model.resources[e.model.resources.length-1].resourceSettings.id]+",",e._appointmentSettings.resourceFields.split(",").length>1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]=h[e.model.resources[e.model.resources.length-1].resourceSettings.groupId]+",");n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()].lastIndexOf(",")==n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()].length-1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()]=n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-1].trim()].slice(",",-1),e._appointmentSettings.resourceFields.split(",").length>1&&(n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()]=n[e._appointmentSettings.resourceFields.split(",")[e._appointmentSettings.resourceFields.split(",").length-2].trim()].slice(",",-1)))}return n},_renderResourceData:function(e,i){var n,s,r,a,o,l;if((e.hasClass("e-workcells")||e.hasClass("e-alldaycells")||e.hasClass("e-monthcells"))&&!e.hasClass("e-resourceheadercells")&&this._getResourceDetails(e),n=[],s=[],this._tempResource.length)for(r=this._resourceCollection.length-1;r>=0;r--)a=r==this._resourceCollection.length-1&&this._grouping.length>1?this._findResourceIndex(this._resCollection[r].dataSource,this._resCollection[r].id,this._resourceCollection[this._resourceCollection.length-1-r].id,this._resCollection[r].groupId,this._resourceCollection[this._resourceCollection.length-r].id):this._findResourceIndex(this._resCollection[r].dataSource,this._resCollection[r].id,this._resourceCollection[this._resourceCollection.length-1-r].id,null,null),n.push(this._resCollection[r].dataSource[a]),0!=r?(o=(new t.Query).where(t.Predicate(this._resCollection[r].groupId,t.FilterOperators.equal,this._resCollection[r].dataSource[a][this._resCollection[r].groupId])),l=new t.DataManager(this._resCollection[r].dataSource).executeLocal(o),i=this._findResourceIndex(l,this._resCollection[r].id,this._resourceCollection[this._resourceCollection.length-1-r].id,null,null),s=l,this._appointmentAddWindow.find(".owner_"+r).ejAutocomplete("clearText"),this._appointmentAddWindow.find(".owner_"+r).ejAutocomplete("option","dataSource",s),this._appointmentAddWindow.find(".owner_"+r).data("ejAutocomplete").selectValueByKey(s[i][this._resCollection[r].id])):(this._appointmentAddWindow.find(".owner_"+r).ejAutocomplete("clearText"),this._appointmentAddWindow.find(".owner_"+r).ejAutocomplete("option","dataSource",this._resCollection[r].dataSource),this._appointmentAddWindow.find(".owner_"+r).data("ejAutocomplete").selectValueByKey(n[this._resourceCollection.length-1-r][this._resCollection[r].id]))},_bindResourcesData:function(){var e,i;if(0!=this._tempResource.length){for(this._resourceInfo=[],e=!1,i=0;i<this._tempResource.length;i++)t.isNullOrUndefined(this._tempResource[i].resourceSettings)||(!t.isNullOrUndefined(this._tempResource[i].resourceSettings.query)&&this._tempResource[i].resourceSettings.query instanceof t.Query||(this._tempResource[i].resourceSettings.query=t.Query()),this._tempResource[i].resourceSettings.dataSource instanceof t.DataManager?this._initResourceData(this._tempResource[i].resourceSettings,i):(this._resourceInfo.push(this._tempResource[i].resourceSettings),e=!0));e&&this._renderInitSchedule()}},_renderResourceElements:function(e){for(var t=0;t<this._tempResource.length;t++)e+="<tr><td class='e-leftfields e-textlabel'>"+this._tempResource[t].title+":</td><td colspan='3' class='e-rightfields'><input id='"+this._id+"_ownerfield_"+t+"'  class='owner_"+t+"' type='text' value=''/><div id='ownerlist'></div></td></tr>";return e},_renderResourcesTemplate:function(){this.resourceHeadTemplate=e.templates("{{for resourceName}}{{for ~cols=colspan}}<td class='e-resourcecells' colspan='{{:~cols}}'> {{for ~resource=resourceNam}}<div class='e-resourceheadertext' align='center' title='{{if userResTemplId == true}}{{:resourceNam}}{{else}}{{:~resource}}{{/if}}'>{{if userResTemplId == true}}{{:userResHeader}}{{else}}{{:~resource}}{{/if}}</div>{{/for}}  </td>{{/for}}{{/for}}")}}}(jQuery,Syncfusion),function(e,t,i){t.scheduleFeatures=t.scheduleFeatures||{};t.widget("ejSchedule","ej.Schedule",{_rootCSS:"e-schedule",element:null,validTags:["div"],model:null,_requiresID:!0,defaults:{timeZoneCollection:{dataSource:[{text:"UTC -12:00",id:"1",value:"UTC -12:00"},{text:"UTC -11:00",id:"2",value:"UTC -11:00"},{text:"UTC -10:00",id:"3",value:"UTC -10:00"},{text:"UTC -09:00",id:"4",value:"UTC -09:00"},{text:"UTC -08:00",id:"5",value:"UTC -08:00"},{text:"UTC -07:00",id:"6",value:"UTC -07:00"},{text:"UTC -06:00",id:"7",value:"UTC -06:00"},{text:"UTC -05:00",id:"8",value:"UTC -05:00"},{text:"UTC -04:30",id:"9",value:"UTC -04:30"},{text:"UTC -04:00",id:"10",value:"UTC -04:00"},{text:"UTC -03:30",id:"11",value:"UTC -03:30"},{text:"UTC -03:00",id:"12",value:"UTC -03:00"},{text:"UTC -02:00",id:"13",value:"UTC -02:00"},{text:"UTC -01:00",id:"14",value:"UTC -01:00"},{text:"UTC +00:00",id:"15",value:"UTC +00:00"},{text:"UTC +01:00",id:"16",value:"UTC +01:00"},{text:"UTC +02:00",id:"17",value:"UTC +02:00"},{text:"UTC +03:00",id:"18",value:"UTC +03:00"},{text:"UTC +03:30",id:"19",value:"UTC +03:30"},{text:"UTC +04:00",id:"20",value:"UTC +04:00"},{text:"UTC +04:30",id:"21",value:"UTC +04:30"},{text:"UTC +05:00",id:"22",value:"UTC +05:00"},{text:"UTC +05:30",id:"23",value:"UTC +05:30"},{text:"UTC +05:45",id:"24",value:"UTC +05:45"},{text:"UTC +06:00",id:"25",value:"UTC +06:00"},{text:"UTC +06:30",id:"26",value:"UTC +06:30"},{text:"UTC +07:00",id:"27",value:"UTC +07:00"},{text:"UTC +08:00",id:"28",value:"UTC +08:00"},{text:"UTC +09:00",id:"29",value:"UTC +09:00"},{text:"UTC +09:30",id:"30",value:"UTC +09:30"},{text:"UTC +10:00",id:"31",value:"UTC +10:00"},{text:"UTC +11:00",id:"32",value:"UTC +11:00"},{text:"UTC +12:00",id:"33",value:"UTC +12:00"},{text:"UTC +13:00",id:"34",value:"UTC +13:00"}],text:"text",id:"id",value:"value"},views:["Day","Week","WorkWeek","Month","Agenda"],agendaViewSettings:{daysInAgenda:7,dateColumnTemplateId:null,timeColumnTemplateId:null},currentView:"week",timeMode:null,firstDayOfWeek:null,workWeek:["Monday","Tuesday","Wednesday","Thursday","Friday"],dateFormat:"",isDST:!1,timeZone:null,timeScale:{enable:!0,minorSlotCount:2,majorSlot:60,minorSlotTemplateId:null,majorSlotTemplateId:null},startHour:0,endHour:24,highlightBusinessHours:!0,enableLoadOnDemand:!1,enablePersistence:!1,showQuickWindow:!0,showRecurrenceAlert:!0,showLocationField:!1,showTimeZoneFields:!0,businessStartHour:9,businessEndHour:18,workHours:{highlight:!0,start:9,end:18},width:"100%",height:"1120px",cellHeight:"",cellWidth:"",currentDate:new Date,minDate:new Date(1900,1,1),maxDate:new Date(2099,12,31),cssClass:"",locale:"en-US",enableResize:!1,readOnly:!1,enableRTL:!1,enableAppointmentNavigation:null,showAppointmentNavigator:!0,appointmentTemplateId:null,allDayCellsTemplateId:null,dateHeaderTemplateId:null,workCellsTemplateId:null,resourceHeaderTemplateId:null,allowDragDrop:null,allowDragAndDrop:!0,enableAppointmentResize:!0,showCurrentTimeIndicator:!0,showAllDayRow:!0,showHeaderBar:!0,isResponsive:!0,showWeekend:!0,enableRecurrenceValidation:!0,appointmentDragArea:"",showOverflowButton:!0,allowInline:!1,allowDelete:!0,reminderSettings:{enable:!1,alertBefore:5},contextMenuSettings:{enable:!1,menuItems:{appointment:[{id:"open",text:"Open Appointment"},{id:"delete",text:"Delete Appointment"}],cells:[{id:"new",text:"New Appointment"},{id:"recurrence",text:"New Recurring Appointment"},{id:"today",text:"Today"},{id:"gotodate",text:"Go to date"},{id:"settings",text:"Settings"},{id:"view",text:"View",parentId:"settings"},{id:"timemode",text:"TimeMode",parentId:"settings"},{id:"view_Day",text:"Day",parentId:"view"},{id:"view_Week",text:"Week",parentId:"view"},{id:"view_Workweek",text:"Workweek",parentId:"view"},{id:"view_Month",text:"Month",parentId:"view"},{id:"view_Agenda",text:"Agenda",parentId:"view"},{id:"timemode_Hour12",text:"12 Hours",parentId:"timemode"},{id:"timemode_Hour24",text:"24 Hours",parentId:"timemode"},{id:"workhours",text:"Work Hours",parentId:"settings"}]}},group:null,resources:null,allowKeyboardNavigation:!0,blockoutSettings:{enable:!1,templateId:null,dataSource:[],query:null,tableName:null,id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isBlockAppointment:"IsBlockAppointment",isAllDay:null,customStyle:null,resourceId:null,groupId:null},appointmentSettings:{applyTimeOffset:!0,editFutureEventsOnly:!1,dataSource:[],query:null,tableName:null,id:null,subject:null,description:null,startTime:null,endTime:null,recurrence:null,recurrenceRule:null,allDay:null,resourceFields:null,categorize:null,recurrenceId:null,recurrenceExDate:null,location:null,priority:null,startTimeZone:null,endTimeZone:null},renderDates:null,orientation:"vertical",categorizeSettings:{title:null,enable:!1,allowMultiple:!1,dataSource:[{text:"Blue Category",id:1,color:"#43b496",fontColor:"#ffffff"},{text:"Green Category",id:2,color:"#7f993e",fontColor:"#ffffff"},{text:"Orange Category",id:3,color:"#cc8638",fontColor:"#ffffff"},{text:"Purple Category",id:4,color:"#ab54a0",fontColor:"#ffffff"},{text:"Red Category",id:5,color:"#dd654e",fontColor:"#ffffff"},{text:"Yellow Category",id:6,color:"#d0af2b",fontColor:"#ffffff"}],text:"text",id:"id",color:"color",fontColor:"fontColor"},prioritySettings:{title:null,enable:!1,template:null,dataSource:[{text:"None",value:"none"},{text:"High",value:"high"},{text:"Medium",value:"medium"},{text:"Low",value:"low"}],text:"text",value:"value"},showTimeScale:!0,tooltipSettings:{enable:!1,templateId:null},showDeleteConfirmationDialog:!0,showNextPrevMonth:!0,cellClick:null,cellHover:null,appointmentClick:null,appointmentHover:null,cellDoubleClick:null,appointmentWindowOpen:null,appointmentSaved:null,appointmentEdited:null,appointmentDeleted:null,beforeAppointmentCreate:null,beforeAppointmentChange:null,beforeAppointmentRemove:null,appointmentCreated:null,appointmentChanged:null,appointmentRemoved:null,keyDown:null,navigation:null,dragStart:null,drag:null,dragStop:null,resizeStart:null,resize:null,resizeStop:null,menuItemClick:null,beforeContextMenuOpen:null,reminder:null,actionBegin:null,actionComplete:null,overflowButtonClick:null,overflowButtonHover:null,create:null,load:null,destroy:null,queryCellInfo:null},dataTypes:{views:"array",workWeek:"array",timeZoneCollection:{dataSource:"data",query:"data"},renderDates:"data",enablePersistence:"boolean",showTimeScale:"boolean",resources:"array",allowInline:"boolean",allowDelete:"boolean",group:{resources:"array"},appointmentSettings:{dataSource:"data",query:"data",subject:"parent",description:"parent",startTime:"parent",endTime:"parent",recurrence:"parent",recurrenceRule:"parent",allDay:"parent",resourceFields:"parent",categorize:"parent",location:"parent",priority:"parent",startTimeZone:"parent",endTimeZone:"parent"},categorizeSettings:{dataSource:"data",query:"data"},prioritySettings:{dataSource:"data",query:"data"},contextMenuSettings:{menuItems:{appointment:"array",cells:"array"}},blockoutSettings:{dataSource:"data",query:"data"}},_ignoreOnPersist:["appointmentSettings.query","appointmentSettings.dataSource","timeZoneCollection.dataSource","allowKeyboardNavigation","showQuickWindow","cssClass","locale","enableResize","showHeaderBar","readOnly","enableRTL","enableAppointmentNavigation","showAppointmentNavigator","appointmentTemplateId","resourceHeaderTemplateId","allowDragDrop","allowDragAndDrop","enableAppointmentResize","showCurrentTimeIndicator","reminderSettings.enable","contextMenuSettings.enable","group","categorizeSettings.enable","categorizeSettings.dataSource","cellClick","overflowButtonClick ","overflowButtonHover","keyDown","appointmentClick","cellDoubleClick","appointmentWindowOpen","appointmentSaved","appointmentEdited","appointmentDeleted","beforeAppointmentCreate","beforeAppointmentChange","beforeAppointmentRemove","appointmentCreated","appiontmentChanged","appointmentRemoved","navigation","dragStart","dragStop","resizeStart","resize","resizeStop","menuItemClick","beforeContextMenuOpen","reminder","prioritySettings.dataSource","prioritySettings.enable","agendaViewSettings.daysInAgenda","agendaViewSettings.dateColumnTemplateId","agendaViewSettings.timeColumnTemplateId","blockoutSettings.dataSource","width"],_ignoreFromAppointmentOnExport:["dataSource","query","tableName","resourceFields"],_ignoreFromModelOnExport:["timezoneCollection","timeZoneCollection","contextMenuSettings","prioritySettings"],_resources:function(){this.element.empty(),this._bindResourcesData(),t.isNullOrUndefined(this.dataSource())||this._renderAppointmentAll()},observables:["appointmentSettings.dataSource","currentView","currentDate"],_tags:[{tag:"timeZoneCollection",attr:[],singular:"timeZoneCollection"},{tag:"appointmentSettings.dataSource",attr:[],singular:"dataSource"},{tag:"resources",attr:["allowMultiple","field","title","name","resourceSettings"]},{tag:"contextMenuSettings.menuItems.appointment",attr:["id","text","parentId"]},{tag:"contextMenuSettings.menuItems.cells",attr:["id","text","parentId"]},{tag:"categorizeSettings.dataSource",attr:["text","id","color","fontColor"]},{tag:"timeZoneCollection.dataSource",attr:["text","id","value"]},{tag:"prioritySettings.dataSource",attr:["text","value"]}],currentView:t.util.valueFunction("currentView"),currentDate:t.util.valueFunction("currentDate"),dataSource:t.util.valueFunction("appointmentSettings.dataSource"),_init:function(){e.isEmptyObject(this.model.group)&&(this.model.group=null),this._localizedLabels=t.getLocalizedConstants("ej.Schedule",this.model.locale),this._diffDays=null,"en-US"!=this.model.locale&&this._recurrenceLocal(),t.isNullOrUndefined(this.model.workHours.start)&&(this.model.workHours.start=this.model.businessStartHour),t.isNullOrUndefined(this.model.workHours.end)&&(this.model.workHours.end=this.model.businessEndHour),t.isNullOrUndefined(this.model.workHours.highlight)&&(this.model.workHours.highlight=this.model.highlightBusinessHours),t.isNullOrUndefined(this.model.timeZoneCollection)&&(this.model.timeZoneCollection=this.model.timezoneCollection),t.isNullOrUndefined(this.model.timeScale.enable)&&(this.model.timeScale.enable=this.model.showTimeScale),this.model.showAppointmentNavigator=t.isNullOrUndefined(this.model.enableAppointmentNavigation)?this.model.showAppointmentNavigator:this.model.enableAppointmentNavigation,this.model.allowDragAndDrop=t.isNullOrUndefined(this.model.allowDragDrop)?this.model.allowDragAndDrop:this.model.allowDragDrop,t.isNullOrUndefined(this.model.beforeAppointmentCreate)&&(this.model.beforeAppointmentCreate=this.model.appointmentSaved),t.isNullOrUndefined(this.model.beforeAppointmentChange)&&(this.model.beforeAppointmentChange=this.model.appointmentEdited),t.isNullOrUndefined(this.model.beforeAppointmentRemove)&&(this.model.beforeAppointmentRemove=this.model.appointmentDeleted),this._processAppointmentSettings(),this._currentDateFormat(this.model.dateFormat),this._trigger("load"),this.element.addClass("e-schedule"),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this._initPrivateProperties(),t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.resources)&&this._resourceSegregate(),this.model.categorizeSettings.enable&&this.model.categorizeSettings.dataSource instanceof t.DataManager&&this._bindCategorizeData(),this.model.prioritySettings.enable&&this.model.prioritySettings.dataSource instanceof t.DataManager&&this._bindPriorityData(),t.scheduleFeatures.resources&&0!=this._tempResource.length?this._bindResourcesData():this._renderInitSchedule(),this._wireEvents(),t.isNullOrUndefined(this.model.appointmentSettings)||(this._dataManager=this.dataSource()instanceof t.DataManager?this.dataSource():null!=this.dataSource()?t.DataManager(this.dataSource()):null),this._bindAppointmentsData("Load"),this.model.blockoutSettings.enable&&(this.model.blockoutSettings.dataSource instanceof t.DataManager?this._bindBlockData():this._renderBlockAppointments()),this.model.reminderSettings.enable&&(this._checkReminders(),this._reminderInterval=window.setInterval(e.proxy(this._checkReminders,this),6e4))},_processAppointmentSettings:function(){var i,n,s,r;for(n in!t.isNullOrUndefined(this.model.appointmentSettings.query)&&this.model.appointmentSettings.query instanceof t.Query||(this.model.appointmentSettings.query=t.Query()),this._appointmentSettings={},i="",this._applyTimeOffset=this.model.appointmentSettings.applyTimeOffset,this._recurrenceFutureActions=this.model.appointmentSettings.editFutureEventsOnly,this.model.appointmentSettings)if("applyTimeOffset"!=n&&"editFutureEventsOnly"!=n&&"tableName"!==n&&"query"!==n&&"dataSource"!==n&&(this._appointmentSettings[n]="string"==e.type(this.model.appointmentSettings[n])||t.isNullOrUndefined(this.model.appointmentSettings[n])?this.model.appointmentSettings[n]:this.model.appointmentSettings[n].field,"resourceFields"!==n&&"categorize"!==n&&"priority"!==n&&t.isNullOrUndefined(this._appointmentSettings[n])&&(this._appointmentSettings[n]=n.charAt(0).toUpperCase()+n.slice(1)),"resourceFields"==n&&t.isNullOrUndefined(this._appointmentSettings.resourceFields)&&!t.isNullOrUndefined(this.model.resources)))for(s=0,r=this.model.resources.length;s<r;s++)i=this.model.resources[s].field.charAt(0).toUpperCase()+this.model.resources[s].field.slice(1),this._appointmentSettings[n]+=(0!==s?",":"")+i},_setModel:function(i){var n,s,r,a,o,l,d,h,p,m=!1;for(n in t.isNullOrUndefined(this._quickAppDetailsWindow)||this._quickAppDetailsWindow.ejDialog("close"),i)switch(n){case"views":this.model.views=i[n],this.model.views=0==this.model.views.length?this.currentView().toString().toLowerCase().split(","):this.model.views.toString().toLowerCase().split(","),this.hTR.find("table.e-viewstable").remove(),this.hTR.find("div.e-viewsdiv").append(this._renderViewNavigation(i[n].toString().toLowerCase().split(","))),this.element.find(".e-commonviewbutton.e-"+this.currentView()).addClass("e-activeview").attr("tabIndex",0).focus(),t.isNullOrUndefined(this._scheduleDrawer)||(this._scheduleDrawer.ejNavigationDrawer("destroy"),e(this._scheduleDrawer).remove(),this._scheduleDrawer=null,(this._mediaQuery||this.element.width()<600)&&!e("#"+this._id+"navDrawer").hasClass("e-scheduledrawer")&&this._renderNavigationDrawer()),-1==this.model.views.toString().toLowerCase().split(",").indexOf(this.currentView())&&(this._navView=!0,0==this.model.views.length?(this.model.views=this.currentView().toString().toLowerCase().split(","),m=!0):this._viewChange(null,null,this.model.views[0].toLowerCase()));break;case"currentView":-1!=this.model.views.toString().toLowerCase().split(",").indexOf(t.util.getVal(i[n]).toLowerCase())?(this._navView=!0,this._viewChange(null,null,t.util.getVal(i[n]).toLowerCase())):(this._navView=!1,this.currentView(this.element.find(".e-activeview")[0].className.split("e-")[2].split(" ")[0]));break;case"currentDate":if("string"==e.type(i[n])?this._currentDateFormat(this.model.dateFormat):"function"==e.type(i[n])&&"string"==e.type(t.util.getVal(i[n]))&&this.currentDate(t.parseDate(this.currentDate(),this._datepattern())),this._keyPressed)return this._keyPressed=!1,!1;this._setCurrentDate=!0,this.currentDate()<this.model.minDate&&this.currentDate(this.model.minDate),this.currentDate()>this.model.maxDate&&this.currentDate(this.model.maxDate),this._navigateClick(null,"DateNavigation");break;case"minDate":case"maxDate":this._currentDateFormat(this.model.dateFormat),m=!0;break;case"timeMode":s=t.preferredCulture(this.model.locale),this.model.timeMode=this._timeMode="Hour12"==i[n]?"12":"Hour24"==i[n]?"24":null==s.calendar.AM&&null==s.calendar.PM?"24":i[n],this._pattern.t="12"==this._timeMode?"h:mm tt":"HH:mm",this._updateTimeMode(),this.element.find(".e-scrolltimecells").height(this.element.find(".e-workcellstab").height());break;case"timeZone":this._setmodelvalue=!0,this.model.timeZone=i[n],this.element.find("div.e-categorybar").remove(),this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,.e-appsoverflow").remove(),this._bindAppointmentsData("Load"),this.model.blockoutSettings.enable&&(this.model.blockoutSettings.dataSource instanceof t.DataManager?this._bindBlockData():this._renderBlockAppointments());break;case"showTimeScale":case"timeScale":"showTimeScale"==n&&(this.model.timeScale.enable=i[n]),"timeScale"==n&&e.extend(this.model.timeScale,i[n]),"agenda"!==this.currentView()&&(m=!0);break;case"timezoneCollection":case"timeZoneCollection":e.extend(this.model.timeZoneCollection,i[n]),t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),this._appointmentAddWindow.find(".startutc").ejDropDownList({dataSource:this.model.timeZoneCollection.dataSource}),this._appointmentAddWindow.find(".endutc").ejDropDownList({dataSource:this.model.timeZoneCollection.dataSource});break;case"showTimeZoneFields":this.model.showTimeZoneFields=i[n],t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),this.model.showTimeZoneFields?(this._appointmentAddWindow.find("#"+this._id+"_appStartTime").children().length<4&&(this._mediaQuery?(r="<td width='31%'><input id='"+this._id+"startTimeZone' class='startutc'  name='"+this._appointmentSettings.startTimeZone+"' type='text' value=''/><div id='Timezoneliststr'></div></td>",a="<td><input  id='"+this._id+"endTimeZone' class='endutc' name='"+this._appointmentSettings.endTimeZone+"' type='text' value=''/><div id='Timezonelistend'></div></td>"):(r="<td width='28%'><input  id='"+this._id+"startTimeZone'  class='startutc'  name='"+this._appointmentSettings.startTimeZone+"' type='text' value=''/><div id='Timezoneliststr'></div></td>",a="<td><input id='"+this._id+"endTimeZone'  class='endutc'  name='"+this._appointmentSettings.endTimeZone+"'  type='text' value=''/><div id='Timezonelistend'></div></td>"),this._appointmentAddWindow.find("#"+this._id+"_appStartTime").append(r),this._appointmentAddWindow.find("#"+this._id+"_appEndTime").append(a),this._appointmentAddWindow.find("#"+this._id+"startTimeZone").ejDropDownList({enableRTL:this.model.enableRTL,dataSource:this.model.timeZoneCollection.dataSource,fields:{text:this.model.timeZoneCollection.text,id:this.model.timeZoneCollection.id,value:this.model.timeZoneCollection.value},width:"100%",select:e.proxy(this._startUtc,this),cssClass:this.model.cssClass}),this._appointmentAddWindow.find("#"+this._id+"endTimeZone").ejDropDownList({enableRTL:this.model.enableRTL,dataSource:this.model.timeZoneCollection.dataSource,fields:{text:this.model.timeZoneCollection.text,id:this.model.timeZoneCollection.id,value:this.model.timeZoneCollection.value},width:"100%",select:e.proxy(this._endUtc,this),cssClass:this.model.cssClass})),this._timeZoneCollection(null)):(this._appointmentAddWindow.find("#"+this._id+"_appStartTime").children().last().remove(),this._appointmentAddWindow.find("#"+this._id+"_appEndTime").children().last().remove());break;case"startHour":this.model.startHour=i[n],this.model.startHour<0&&(this.model.startHour=0),"agenda"!==this.currentView()&&this._setNewStartEndHours();break;case"endHour":this.model.endHour=i[n],this.model.endHour>24&&(this.model.endHour=24),"agenda"!==this.currentView()&&this._setNewStartEndHours();break;case"highlightBusinessHours":case"businessStartHour":case"businessEndHour":case"workHours":"highlightBusinessHours"==n&&(this.model.workHours.highlight=i[n]),"businessStartHour"==n&&(this.model.workHours.start=i[n]),"businessEndHour"==n&&(this.model.workHours.end=i[n]),"workHours"==n&&e.extend(this.model.workHours,i[n]),"agenda"!==this.currentView()&&(this.model.workHours.highlight?this._highlightBusinessHours():this.element.find(".e-workcells,.e-monthcells").removeClass("e-businesshighlightworkcells").removeClass("e-monthcellhighlight"),this._businessHourScroller(),this._renderUpDownIconPosition());break;case"showAllDayRow":this.model.showAllDayRow=i[n],this.model.timeScale.enable||(this.model.showAllDayRow=!1),"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.timeScale.enable&&"agenda"!=this.currentView()&&"month"!=this.currentView()&&!this._isCustomMonthView()&&(this.aTR.empty(),this._renderHeaderAllDayTemplate(),this._borderAddRemove(),this._headerbarWidth(),this.element.find(".e-schedulesettings").html(this._getLocalizedLabels("AllDay")),this._renderHoriVerticalScroll(),this.model.showAllDayRow&&this._reRenderAllDayAppointments(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.cellWidth&&this.element.find(".e-workcellstab tr td:first-child").width(this.element.find(".e-headercells").width()),this._reRenderScroller());break;case"isResponsive":this.model.isResponsive=i[n],this._onScheduleResize();break;case"isDST":this.model.isDST=i[n],t.isNullOrUndefined(this.model.timeZone)&&(o=new Date,this._timeValue=0==this._true?-(o.getTimezoneOffset()-this._stdTimezoneOffset()):o.getTimezoneOffset()-this._stdTimezoneOffset(),this._true=!this.model.isDST,this._dayLight=!0,this.element.find("div.e-categorybar").remove(),this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,div.e-appsoverflow").remove(),t.isNullOrUndefined(this.model.appointmentSettings)||(this._dataManager=this.dataSource()instanceof t.DataManager?this.dataSource():null!=this.dataSource()?t.DataManager(this.dataSource()):null),this._bindAppointmentsData("Load"));break;case"enableRecurrenceValidation":this.model.enableRecurrenceValidation=i[n],this.model.enableRecurrenceValidation&&t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),this._dataProcessing(this._currentAppointmentData),this._renderAppointmentAll();break;case"height":this.model.height=i[n],this.model.showCurrentTimeIndicator&&this.element.find(".e-highlightcurrenttimeline").remove(),m=!0;break;case"width":this.model.width=i[n],this._clientWidth=this.model.width,this.model.showCurrentTimeIndicator&&this.element.find(".e-highlightcurrenttimeline").remove(),m=!0;break;case"cssClass":this.element.removeClass(this.model.cssClass).addClass(i[n]);break;case"locale":this.model.locale=i[n],this._localizedLabels=t.getLocalizedConstants("ej.Schedule",this.model.locale),"en-US"!=this.model.locale&&this._recurrenceLocal(),this._culture=t.preferredCulture(this.model.locale),this._dayShortNames=this._culture.calendar.days.namesAbbr,this._dayFullNames=this._culture.calendar.days.names,this._monthNames=this._culture.calendar.months.names,this._pattern=this._culture.calendar.patterns,this.model.contextMenuSettings.enable&&(e("#"+this._id+"gotoWindow_wrapper").remove(),this._gotoDate=!0),m=!0;break;case"dateFormat":t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),this._appointmentAddWindow.find(".startenddate").ejDatePicker({dateFormat:i[n]}),this._appointmentAddWindow.find(".recurstartdate").ejDatePicker({dateFormat:i[n]}),this._appointmentAddWindow.find(".e-until").ejDatePicker({dateFormat:i[n]}),this._currentDateFormat(i[n]);break;case"enableResize":this.model.enableResize=i[n],this.model.enableResize&&(t.isTouchDevice()?this._on(e(window),"orientationchange",e.proxy(this._onScheduleResize,this)):this._on(e(window),"resize",e.proxy(this._onScheduleResize,this)));break;case"readOnly":this.model.readOnly=i[n],this._renderAppointmentAll();break;case"allowDelete":this.model.allowDelete=i[n];break;case"showCurrentTimeIndicator":this.model.showCurrentTimeIndicator=i[n],"agenda"!==this.currentView()&&(this._highlightCurrentTime(this.model.showCurrentTimeIndicator),this.model.showCurrentTimeIndicator||("month"===this.currentView()||this._isCustomMonthView()?e(this.element.find(".e-monthcells")).removeClass("e-monthcurrenttime"):this.element.find(".e-highlightcurrenttimeline").remove()));break;case"enableRTL":i[n]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl"),this.model.enableRTL=i[n],m=!0,this.model.contextMenuSettings.enable&&(e("#"+this._id+"gotoWindow_wrapper").remove(),this._gotoDate=!0),this._quickAppointWindow=null;break;case"appointmentTemplateId":this.model.appointmentTemplateId=i[n],this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,.e-appsoverflow").remove(),this.element.find("div.e-categorybar").remove(),t.isNullOrUndefined(this.dataSource())||this._renderAppointmentAll();break;case"allDayCellsTemplateId":this.model.allDayCellsTemplateId=i[n],m=!0;break;case"dateHeaderTemplateId":this.model.dateHeaderTemplateId=i[n],m=!0;break;case"workCellsTemplateId":this.model.workCellsTemplateId=i[n],m=!0;break;case"showWeekend":this.model.showWeekend=i[n],m=!0;break;case"allowInine":this.model.allowInline=i[n];break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=i[n],this.model.allowKeyboardNavigation?(this._on(this.element,"keydown",e.proxy(this._onKeyDown,this)),this._on(e(document),"keydown",e.proxy(this._documentOnKeyDown,this))):(this._off(this.element,"keydown"),this._off(e(document),"keydown"));break;case"renderDates":e.extend(this.model.renderDates,i[n]),this._navView=!0,this._viewChange(null,null,"customview");break;case"appointmentSettings":e.isEmptyObject(i[n])||(e.extend(this.model.appointmentSettings,i[n]),this._processAppointmentSettings(),this._quickAppointWindow=null,this._quickAppDetailsWindow=null,this._recurEditWindow=null,e("#"+this._id+"AppointmentQuickWindow_wrapper,#"+this._id+"AppDetailsWindow_wrapper,#"+this._id+"RecurrenceEdit_wrapper").remove(),this.element.find("div.e-categorybar").remove(),this.element.find(".e-upicon, .e-downicon").children().css({visibility:"hidden"}),this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,div.e-appsoverflow,table.e-agendacellstab").remove(),t.isNullOrUndefined(this.model.appointmentSettings)||(this._dataManager=this.dataSource()instanceof t.DataManager?this.dataSource():null!=this.dataSource()?t.DataManager(this.dataSource()):null),this._setmodelvalue=!0,this._bindAppointmentsData("Load"));break;case"contextMenuSettings":e.extend(this.model.contextMenuSettings,i[n]),this.model.contextMenuSettings.enable&&(t.isNullOrUndefined(this._contextMenu)||this.model.categorizeSettings.enable)&&this._showContextMenu(this.model.contextMenuSettings.enable);break;case"reminderSettings":i[n].enable?this._checkReminders()&&(this._reminderInterval=window.setInterval(e.proxy(this._checkReminders,this),6e4)):window.clearInterval(this._reminderInterval);break;case"showAppointmentNavigator":case"enableAppointmentNavigation":this.model.showAppointmentNavigator=this.model.enableAppointmentNavigation=i[n],this.model.showAppointmentNavigator?(this._nextPrevAppointment(this.model.showAppointmentNavigator),"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.element.find(".e-vscroll").length>0&&"month"!=this.currentView()&&!this._isCustomMonthView()&&!this._mediaQuery&&this._renderUpDownIcon(),t.isNullOrUndefined(this.dataSource())||this._renderAppointmentAll()):(this.element.find(".e-prevapp,.e-nextapp").remove(),this.element.find(".e-upicon,.e-downicon").remove());break;case"enableLoadOnDemand":this.model.enableLoadOnDemand=i[n],this.element.find("div.e-categorybar").remove(),this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,.e-appsoverflow").remove(),this._bindAppointmentsData("Load");break;case"resources":t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.resources)&&(t.copyObject(this.model.resources,i[n]),this.model.resources=i[n],0==this.model.resources.length?(this.model.resources=null,this.model.group=null,m=!0):m=!0);break;case"categorizeSettings":e.extend(this.model.categorizeSettings,i[n]),t.isNullOrUndefined(this._appointmentAddWindow)?(this._renderTemplates(),this._renderAppointmentWindow()):t.isNullOrUndefined(this.model.categorizeSettings)||(this.model.categorizeSettings.enable?(1==this._appointmentAddWindow.find(".e-categorizevalue").length&&this._appointmentAddWindow.find("#"+this._id+"categorizetr").remove(),l="<tr id='"+this._id+"categorizetr'><td class='e-leftfields e-textlabel'>"+this._getLocalizedLabels("Categorize")+":</td><td colspan='3' class='e-rightfields'><input id= '"+this._id+"categorize' class='e-categorizevalue' type='text' name='"+this._appointmentSettings.categorize+"' value=''/></td></tr>",this._appointmentAddWindow.find("."+this._id+"summary").after(l),this._renderTemplates(),this._renderCategoryItems(this._appointmentAddWindow)):this._appointmentAddWindow.find("#"+this._id+"categorizetr").remove()),this._showContextMenu(this.model.contextMenuSettings.enable),t.isNullOrUndefined(this.dataSource())||this._renderAppointmentAll();break;case"group":t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.resources)&&(e.extend(this.model.group,i[n]),e.isEmptyObject(this.model.group)&&(this.model.group=null),m=!0);break;case"cellWidth":this.model.cellWidth=i[n],"agenda"!==this.currentView()&&(m=!0);break;case"cellHeight":this.model.cellHeight=i[n],"agenda"!==this.currentView()&&(m=!0);break;case"orientation":this.model.orientation=i[n],t.scheduleFeatures.resources&&0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&this._on(this.element,"click",".e-parentnodecategory",e.proxy(this._onResourceClick,this)),m=!0;break;case"resourceHeaderTemplateId":this.model.resourceHeaderTemplateId=i[n],t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&("agenda"!=this.currentView()?"horizontal"==this.model.orientation||"horizontal"==this._customOrientation?((d=e(this.wTR.find("td")[0])).find("div.e-horizontresdiv").remove(),h=this._renderHorizontalResources(),d.html(h)):(this.aTR.empty(),this._renderHeaderAllDayTemplate(),this._borderAddRemove(),this._headerbarWidth(),this.element.find(".e-schedulesettings").html(this._getLocalizedLabels("AllDay")),this.model.showAllDayRow&&this._reRenderAllDayAppointments()):this._renderAgendaContent());break;case"showLocationField":this.model.showLocationField=i[n],t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),this.model.showLocationField?(l="<tr id='"+this._id+"showLocation' class='"+this._id+"showLocation'><td class='e-leftfields e-textlabel'>"+this._getLocalizedLabels("Location")+":</td><td colspan='3' class='e-rightfields'><input id='"+this._id+"location' tabIndex='0' class='location e-textbox e-animation e-inputtext' name='"+this._appointmentSettings.location+"' type='text' /><span class='e-ripple-bar'></td></tr>",this._appointmentAddWindow.find("."+this._id+"subjecttr").after(l)):this._appointmentAddWindow.find("."+this._id+"showLocation").remove();break;case"prioritySettings":e.extend(this.model.prioritySettings,i[n]),t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),this.model.prioritySettings.enable?(1==this._appointmentAddWindow.find("."+this._id+"priorityshow").length&&(this._appointmentAddWindow.find("."+this._id+"priorityshow").remove(),this._appointmentAddWindow.find("."+this._id+"prioritylistshow").remove()),l="<td colspan='1' class='e-textlabel "+this._id+"priorityshow'>"+this._getLocalizedLabels("Priority")+":</td><td colspan='1' class='"+this._id+"prioritylistshow'><input id='"+this._id+"priority' class='priority' type='text' name='"+this._appointmentSettings.priority+"' value='' /><div id='prioritylist'></div></td>",this._appointmentAddWindow.find("."+this._id+"parrow").prepend(l),this._renderPriorityItems(this._appointmentAddWindow),this._renderTemplates()):(this._appointmentAddWindow.find("."+this._id+"priorityshow").remove(),this._appointmentAddWindow.find("."+this._id+"prioritylistshow").remove()),t.isNullOrUndefined(this.dataSource())||this._renderAppointmentAll();break;case"showQuickWindow":this.model.showQuickWindow=i[n],t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._renderQuickWindow(),!t.isNullOrUndefined(this._quickAppointWindow)&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),this._quickWindow=this.model.showQuickWindow;break;case"allowDragAndDrop":case"allowDragDrop":if(this.model.allowDragAndDrop=this.model.allowDragDrop=i[n],"agenda"==this.currentView())return!1;this.model.allowDragAndDrop?this._dragdropAppointments():this._unWireDragDrop();break;case"enableAppointmentResize":if(this.model.enableAppointmentResize=i[n],"agenda"==this.currentView())return!1;this._renderAppointmentAll();break;case"showHeaderBar":this.model.showHeaderBar=i[n],this.model.showHeaderBar?(this.element.find(".e-scheduleheader").show(),this._reRenderHeaderBar()):(this.element.find(".e-scheduleheader").empty(),this.element.find(".e-scheduleheader").hide()),this.refreshScroller();break;case"tooltipSettings":e.extend(this.model.tooltipSettings,i[n]),p=this.model.tooltipSettings.enable?".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendacells.e-eventcolumn,.e-appup,.e-appdown,.e-appsoverflow":".e-appup,.e-appdown,.e-appsoverflow",this.element.data("ejTooltip").setModel({target:p});break;case"showOverflowButton":this.model.showOverflowButton=i[n],m=!0;break;case"appointmentDragArea":this.model.appointmentDragArea=i[n],m=!0;break;case"firstDayOfWeek":this.model.firstDayOfWeek=this._firstdayofweek=i[n],this._firstdayofweek&&(m=!0);break;case"workWeek":this.model.workWeek=i[n],(null==this.model.workWeek||this.model.workWeek.length>=0)&&(m=!0);break;case"agendaViewSettings":e.extend(this.model.agendaViewSettings,i[n]),"agenda"==this.currentView()&&(this.model.showHeaderBar&&this.element.find("div.e-datedisplay").html(this._getCurrentDateHeaderValue()),this._renderAgendaContent());break;case"showNextPrevMonth":this.model.showNextPrevMonth=i[n],"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&"month"==this.currentView()&&(this._renderMonthTimeCells(),this._highlightBusinessHours(),this._dataProcessing(this._currentAppointmentData),this._renderAppointmentAll());break;case"blockoutSettings":e.isEmptyObject(i[n])||(e.extend(this.model.blockoutSettings,i[n]),this.model.blockoutSettings.enable?this.model.blockoutSettings.dataSource instanceof t.DataManager?this._bindBlockData():this._renderBlockAppointments():this.element.find(".e-blocktimewrapper").remove())}m&&(this.element.empty(),t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("destroy"),this._scheduleDrawer=null,this._quickAppointWindow=null,this._quickAppDetailsWindow=null,this._alertWindow=null,this._appointmentAddWindow=null,this._recurrenceEditor=null,e("#"+this._id+"AppointmentAddEditWindow_wrapper,#"+this._id+"AppointmentQuickWindow_wrapper,#"+this._id+"AppDetailsWindow_wrapper,#"+this._id+"RecurrenceEdit_wrapper").remove(),t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.resources)&&this._resourceSegregate(),this._setmodelvalue=!0,0==this._tempResource.length&&0==this._grouping.length?this._renderInitSchedule():this._bindResourcesData(),this._businessHourScroller(),t.isNullOrUndefined(this.dataSource())||this._dataProcessing(this._currentAppointmentData),this._renderAppointmentAll(),this.model.blockoutSettings.enable&&this._renderBlockAppointments())},_touchSchedule:function(t){var i,n,s,r;if(e(t.target).is(".e-appointment,.e-alldayappointment,.e-monthappointment")||e(t.target).parents().is(".e-appointment,.e-alldayappointment,.e-monthappointment")||"horizontal"==this.model.orientation||"horizontal"==this._customOrientation)return!1;var a,o=this.model.enableRTL?"swipeleft"==t.type?"swiperight":"swipeleft":t.type,l=this.model.enableRTL?"margin-right":"margin-left",d=(parseInt(this.element.find(".e-draggableworkarea").css(l)),Math.round(this.element.find(".e-draggableworkarea").width()/this.res1.length)),h=this.element.find(".e-workleftindent").length>0?this.element.find(".e-workleftindent").outerWidth():0,p=Math.round(Math.abs((this.element.find(".e-draggableworkarea").offset().left-h-1)/d));if("month"==this.currentView()||this._isCustomMonthView()){for(i=0,n="swipeleft"==o?7*(p+1):7*(p-1),s=0;s<n;s++)i+=this.element.find(".e-draggableworkarea tr").eq(0).children().eq(s).outerWidth();i+=3}switch(o){case"swipeleft":if(this._mediaQuery&&"agenda"!=this.currentView()&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation){if(p+1!=this.res1.length)return r="month"==this.currentView()||this._isCustomMonthView()?-i:-(p+1)*d,this.element.find(".e-headrealldaytable").css("left","0px"),this.element.find(".e-headeralldaydiv,.e-draggableworkarea").animate(this.model.enableRTL?{"margin-right":r}:{"margin-left":r},500),this.element.find(".e-headeralldaydiv,.e-draggableworkarea").css(this.model.enableRTL?{"margin-left":0}:{"margin-right":0}),p+1==this.res1.length-1&&this._showScrollTd(),!1;this.element.find(".e-headeralldaydiv,.e-draggableworkarea,.e-emptyscrolltd").css({marginLeft:"0px",marginRight:"0px"})}a={currentTarget:this.element.find(".e-navigatenext")},this._navigateClick(a,"Next");break;case"swiperight":if(this._mediaQuery&&"agenda"!=this.currentView()&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation){if(0!=p)return r="month"==this.currentView()||this._isCustomMonthView()?-i:-(p-1)*d,this.element.find(".e-headrealldaytable").css("left","0px"),this.element.find(".e-headeralldaydiv,.e-draggableworkarea").animate(this.model.enableRTL?{"margin-right":r}:{"margin-left":r},500),this.element.find(".e-headeralldaydiv,.e-draggableworkarea").css(this.model.enableRTL?{"margin-left":0}:{"margin-right":0}),p+1==this.res1.length-1&&this._showScrollTd(),!1;this.element.find(".e-headeralldaydiv,.e-draggableworkarea,.e-emptyscrolltd").css({marginLeft:"0px",marginRight:"0px"})}a={currentTarget:this.element.find(".e-navigateprevious")},this._navigateClick(a,"Previous")}},_initPrivateProperties:function(){this._navSelected=this._navDrawer=this._alldayLevel=this._reminderClose=this._navView=this._editKey=this._cellClick=this._recurChecked=this._setCurrentDate=this._leftResizing=this._rightResizing=this._topResizing=this._bottomResizing=this._allDayDrag=this._dateNavigation=this._isQuickDialogOpened=this._ignoreModifyOccurrences=!1,this._gotoDate=this._bindapp=this._showBlockAlert=this._seriesAlert=this._editclick=this._isCustomAlert=!0,this._tempStart=this._tempEnd=this._currentAction="",this._currentRowIndex=this._currentColIndex=0,this._appId=this._parentId=1,this._recurrenceEditor=null,this._groupAutoDrag=!1,this._recurEditWindow=null,this._groupEdit=!1,this._leftStartTime=!1,this._deleteRecurrence="",this._groupEditing=!1,this._reverse=!1,this._retainScrollerPosition={},this._currentAppointmentData=[],this._currentViewAppointments=[],this._processed=[],this._renderedApp=[],this._renderedAllDay=[],this._dateRender=[],this._grouping=[],this._tempResource=[],this._intialRenderedDates=[],this.res1=[0],this._appMainId=null,this._scheduleDrawer=null,this._quickAppointWindow=null,this._quickAppDetailsWindow=null,this._inlineText=null,this._alertWindow=null,this._appointmentAddWindow=null,this._dayNamesArray=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],this._dayNames=["SU","MO","TU","WE","TH","FR","SA"],this._culture=t.preferredCulture(this.model.locale),this._dayShortNames=this._culture.calendar.days.namesAbbr,this._dayFullNames=this._culture.calendar.days.names,this._monthNames=this._culture.calendar.months.names,this._pattern=this._culture.calendar.patterns,this._browserInfo=t.browserInfo(),this._safariBrowser="webkit"==this._browserInfo.name&&!t.isTouchDevice(),this._focused=null,this._expandCollapseState=[],this._horizontalScrollValue=null,Array.prototype.map=Array.prototype.map||function(e,t){var i,n,s,r,a,o,l;if(null==this)throw new TypeError("this is null or not defined");if(a=(r=Object(this)).length>>>0,"function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=new Array(a),s=0;s<a;)s in r&&(o=r[s],l=e.call(i,o,s,r),n[s]=l),s++;return n},String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.capitalizeFirstString=String.prototype.capitalizeFirstString||function(){return this.charAt(0).toUpperCase()+this.slice(1)},Date.prototype.parseISO8601=function(e){var i=new Date(e),n="webkit"==t.browserInfo().name||"msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version;return i=new Date(i.getTime()+6e4*i.getTimezoneOffset()),"string"==typeof e?-1!=e.indexOf("Date")?new Date(parseInt(e.match(/\d+/).toString())):-1!=e.indexOf("T")?n?new Date(i):new Date(e):new Date(e.replace(/-/g,"/")):new Date(e)},Date.prototype._currentMonthDates=function(){return{start:new Date(this.getFullYear(),this.getMonth(),1),end:new Date(this.getFullYear(),this.getMonth()+1,0)}},Date.prototype._currentWeekDates=function(e){var t=this.getDay()-e,i=new Date(this.getFullYear(),this.getMonth(),this.getDate()+-1*(t<0?t+7:t)),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()+6);return{start:new Date(i),end:new Date(n)}},Date.prototype._isDST=function(){return this.getTimezoneOffset()<Math.max(new Date(this.getFullYear(),0,1).getTimezoneOffset(),new Date(this.getFullYear(),6,1).getTimezoneOffset())}},_destroy:function(){this.element.off(),this._destorySubControls(e("#"+this._id+"_AddEditForm")),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.find("#"+this._id+"recurrenceEditor").ejRecurrenceEditor("destroy"),this.element.find("#"+this._id+"_navigator").ejDatePicker("destroy"),window.clearInterval(this._intervalID),t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("destroy"),e("#"+this._id+"AppointmentAddEditWindow_wrapper,#"+this._id+"AppointmentQuickWindow_wrapper,#"+this._id+"AppDetailsWindow_wrapper,#"+this._id+"RecurrenceEdit_wrapper,#"+this._id+"gotoWindow_wrapper").remove(),this.element.empty().removeClass("e-schedule e-scheduleouter")},_destorySubControls:function(t){for(var i,n=t.find(".e-timepicker,.e-datepicker,.e-dropdownlist,.e-autocomplete"),s=0;s<n.length;s++)(i=e(n[s])).hasClass("e-timepicker")?i.ejTimePicker("destroy"):i.hasClass("e-datepicker")?i.ejDatePicker("destroy"):i.hasClass("e-dropdownlist")?i.ejDropDownList("destroy"):i.hasClass("e-autocomplete")&&i.ejAutocomplete("destroy")},_closeRecurence:function(i){var n,s,r,a,o;if(t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),this._appointmentAddWindow.find(".e-recuruntil").ejRadioButton("option","checked")&&i.model.text!=this._getLocalizedLabels("Cancel")&&this._appointmentAddWindow.find(".recurstartdate").ejDatePicker("option","value")>this._appointmentAddWindow.find(".e-until").ejDatePicker("option","value"))return this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("WrongPattern")),this._alertWindow.ejDialog("open"),!1;n=!0,i.model.text==this._getLocalizedLabels("Cancel")?""==this._appointmentAddWindow.find(".e-recurFinalRule").html()&&this._appointmentAddWindow.find("#"+this._id+"recurrence").ejCheckBox({checked:!1}):(s=this._appointmentAddWindow.find(".e-recurEditor").data("ejRecurrenceEditor"),this._rRuleStr=s.closeRecurPublic(),r=s.element.find(".recurstartdate").ejDatePicker("option","value"),a=s.recurrenceDateGenerator(s._recRule,r),"MONTHLY"!=s._rRule.freq||t.isNullOrUndefined(s._rRule.monthDay)||(o=a.filter(function(e){return new Date(e).getDate()==s._rRule.monthDay}),(!t.isNullOrUndefined(s._rRule.count)&&o.length!=a.length||t.isNullOrUndefined(s._rRule.count)&&-1!=[29,30,31].indexOf(s._rRule.monthDay))&&(n=!1,0==this._alertWindow.find(".e-alertbtn").find(".e-alertCancel").length&&(this._alertWindow.find(".e-alertbtn").append("<button id='"+this._id+"alertcancel' class='e-alertbutton e-alertCancel'></button>"),this._alertWindow.find(".e-alertCancel").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"100px",click:e.proxy(this._alertClose,this),cssClass:"e-flat"+this.model.cssClass}),this._mediaQuery&&this._alertWindow.find(".e-alertbutton").css({margin:"0px 20px 15px 10px"})),this._alertWindow.ejDialog("instance").option("title",this._getLocalizedLabels("RecurrenceAlert")),this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("RecurrenceDateValidation")),this._alertWindow.find(".e-alertCancel").html(this._getLocalizedLabels("Cancel")),this._alertWindow.find(".e-alertOk").html(this._getLocalizedLabels("Ok")),this._alertWindow.addClass("e-recurAlert"),this._alertWindow.ejDialog("open"))),new Date(this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value")).setHours(0,0,0,0)!=new Date(r).getTime()&&this._recurDateChange(r),n&&(this._appointmentAddWindow.find("."+this._id+"summary").css("display","table-row"),this._appointmentAddWindow.find(".e-recurFinalRule").html(this._rRuleStr),this._appointmentAddWindow.find(".e-recuredit").css("display","inline"))),n&&(this._appointmentAddWindow.find(".e-recurEditor").toggle(),this._appointmentAddWindow.find(".e-appwindow").css("margin-left",700).toggle().animate({"margin-left":10},300),this._mediaQuery&&this._appointmentAddWindow.parent().parent().find(".e-dialog-icon").css("display","block"),this._appointmentAddWindow.find(".done").focus())},_wireEvents:function(){this._on((this.element,e(window)),"mousedown",e.proxy(this._onScheduleMouseDown,this)),this._on(this.element,"click","div.e-navigateprevious,div.e-navigatenext",e.proxy(this._navigateClick,this)),this._on(e(window),"resize",e.proxy(this._onScheduleResize,this)),this._on(this.element,"click",".e-commonviewbutton",e.proxy(this._viewChange,this)),this._on(this.element,"click",".e-datedisplay",e.proxy(this._viewCalendar,this)),this._on(this.element,"click","div.e-appsoverflow",e.proxy(this._appOverflowClick,this)),this._on(this.element,"click",".e-prevapp.enable,.e-nextapp.enable",e.proxy(this._nextPrev,this)),this._on(this.element,"dblclick",".e-headercells",e.proxy(this._navigateView,this)),this._on(this.element,"click",".e-headercells,.e-timecells,td.e-monthcells div.e-monthheader",e.proxy(this._navigateView,this)),this._on(this.element,"mouseover","td.e-alldaycells,td.e-workcells:not('.e-resourceheadercells'),td.e-monthcells:not('.e-othermonths'),td.e-agendacells",e.proxy(this._onCellMouseOver,this)),this._on(this.element,"mouseout","td.e-alldaycells,td.e-workcells:not('.e-resourceheadercells'),td.e-monthcells:not('.e-othermonths'),td.e-agendacells",e.proxy(this._onCellMouseOver,this)),this._on(this.element,"click",".e-workcells,.e-alldaycells,.e-alldayappointment,.e-monthcells:not('.e-othermonths'),.e-agendacells",e.proxy(this._cellSelection,this)),this._mediaQuery||t.isTouchDevice()||(this._on(e(window),t.eventType.mouseUp,e.proxy(this._mouseUp,this)),this._on(this.element,t.eventType.mouseDown,"td.e-workcells,td.e-monthcells:not('.e-othermonths'),td.e-alldaycells",e.proxy(this._mouseButtonClick,this)),this._on(this.element,"keydown click","td.e-workcells,td.e-monthcells:not('.e-othermonths'),td.e-alldaycells",e.proxy(this._shiftSelection,this))),this._on(this.element,t.isMobile()?"click":t.isTouchDevice()&&(e.isFunction(e.fn.tap)||e.isFunction(e.fn.doubletap))?"doubletap":"dblclick",".e-workcells:not('.e-resourceheadercells'),.e-alldaycells,.e-inline,.e-alldayappointment,.e-monthcells:not('.e-othermonths'),.e-agendacells.e-eventcolumn,.e-agendacells.e-timecolumn",e.proxy(this._appointmentWindow,this)),(this._mediaQuery||t.isMobile())&&this._on(this.element,"tap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment",e.proxy(this._appointmentWindow,this)),t.isTouchDevice()&&e.isFunction(e.fn.doubletap)&&this._on(this.element,"doubletap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment",e.proxy(this._appointmentWindow,this)),t.isTouchDevice()&&e.isFunction(e.fn.tap)&&this._on(this.element,"tap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment",e.proxy(this._cellSelection,this)),this._on(this.element,"mouseover",".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendaappointment",e.proxy(this._onAppointMouseOver,this)),this._on(this.element,"mouseout",".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendaappointment",e.proxy(this._onAppointMouseOver,this)),this._on(this.element,"click",".e-appup,.e-appdown",e.proxy(this._renderAppPosition,this)),(this._mediaQuery||this.element.width()<600)&&this._on(this.element,"click","#"+this._id+"navDrawerIcon",e.proxy(this._drawerOpen,this)),this.model.allowKeyboardNavigation&&(this._on(this.element,"keydown",e.proxy(this._onKeyDown,this)),this._on(e(this.element),"keydown",e.proxy(this._documentOnKeyDown,this))),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&this._on(this.element,"click",".e-parentnodecategory",e.proxy(this._onResourceClick,this)),(this._mediaQuery||t.isTouchDevice())&&this._on(this.element,"swipeleft swiperight",".e-contentarearow .e-workcellstab,.e-agendacellstab",e.proxy(this._touchSchedule,this)),this.model.enableResize&&(t.isTouchDevice()?this._on(e(window),"orientationchange",e.proxy(this._onScheduleResize,this)):this._on(e(window),"resize",e.proxy(this._onScheduleResize,this))),this._on(this.element,"click",".e-schedulemouseclose,.e-deleteapp",e.proxy(this._deleteAppoint,this)),this._on(this.element,"click",".e-editapp",e.proxy(this._appointmentWindow,this))},_drawerOpen:function(){this._scheduleDrawer.ejNavigationDrawer("open")},_mouseUp:function(){e(this.element.find("div.e-draggableworkarea tr")).off(t.eventType.mouseMove)},_mouseButtonClick:function(i){var n,s,r;if(!(i.altKey||i.shiftKey||i.ctrlKey||3==i.which||1!=i.which&&"touchstart"!=i.type||e(i.target).hasClass("e-resourceheadercells")||e(i.target).hasClass("e-othermonths"))){var a=i.target||document.activeElement||i.srcElement,o=this.element.find("div.e-draggableworkarea tr"),l=this;e(a).hasClass("e-alldaycells")&&(o=this.element.find(".e-alldaycells").parent()),e(a).hasClass("e-selectedAppointment")&&this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),this._currentRowIndex=e(a).parent()[0].rowIndex,this._currentColIndex=e(a)[0].cellIndex,n="horizontal"!=l.model.orientation&&"horizontal"!=l._customOrientation||"month"!=l.currentView()?"vertical"==l.model.orientation&&"vertical"==l._customOrientation?l.dateRender:l._dateRender:l.monthDays,s=e(i.target).hasClass("e-workcells")||e(i.target).hasClass("e-alldaycells")?e(i.target).index():7-(7*(parseInt(e(i.target).index()/7)+1)-e(i.target).index())+7*e(i.target).parent().index(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(s="month"!==l.currentView()?Math.floor(s/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))):s),(r=new Date(n[s]))>=this.model.minDate&&r<=this.model.maxDate&&(e(a).hasClass("e-workcells")||e(a).hasClass("e-monthcells")||e(a).hasClass("e-alldaycells"))&&(o.on(t.eventType.mouseMove,function(i){var n,s;!t.isNullOrUndefined(l._quickAppointWindow)&&l.model.showQuickWindow&&(l._quickAppointWindow.ejDialog("close"),l._quickAppDetailsWindow.ejDialog("close")),i.preventDefault(),n=i.target,"touchmove"==i.type&&(s=i.originalEvent.changedTouches[0],n=document.elementFromPoint(s.pageX,s.pageY)),e(n).hasClass("e-selectedCell")&&l.element.find(".e-workcells,.e-alldaycells,.e-monthcells").removeClass("e-selectedCell"),l._mouseSelection(i,l,a,n),l._moveScrollContent(a,l)}),o.on(t.eventType.mouseUp,function(){o.off(t.eventType.mouseMove)}),this.element.find("e.workcells,e.alldaycells,.e-monthcells").removeClass("e-mousehover"),this.element.find(".e-workcells,.e-alldaycells,.e-monthcells").removeClass("e-selectedCell"),this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"))}},_mouseSelection:function(i,n,s,r){var a,o,l,d,h,p,m,c=n.element.find(".e-draggableworkarea")[0].getBoundingClientRect();"vertical"==n.model.orientation&&"vertical"==n._customOrientation&&(c.top+this.element.find(".e-workcells").height()>i.pageY?n.element.find("#"+this._id+"_scroller").ejScroller({scrollTop:n.element.find(".e-draggableworkarea").scrollTop()-n.element.find(".e-workcells").height()}):c.bottom<i.pageY+this.element.find(".e-workcells").height()&&n.element.find("#"+this._id+"_scroller").ejScroller({scrollTop:n.element.find(".e-draggableworkarea").scrollTop()+n.element.find(".e-workcells").height()}));var u,g,_,f=n.element.find("div.e-draggableworkarea tr"),w=e(s).parent().index(),D=e(s).index(),S=f.length-1,y=e(r).parent().index(),v=e(r).index(),C=n.element.find(".e-alldaycells").parent(),T=n.model.showAllDayRow;if(this._resWorkWeek)for(I=0,o=0;o<this.res1.length;o++){if(v<=I+((a=t.isNullOrUndefined(this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?this.model.workWeek.length:this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length)-1)){A=I+a;break}I+=this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length}else if(this._resCustomView)for(I=0,o=0;o<this.res1.length;o++){if(l=this._tempResource[this._tempResource.length-1].resourceSettings.renderDates,v<=I+((d=this._getCustomDatesCount(o,l))-1)){A=I+d;break}I+=this._getCustomDatesCount(o,l)}else var b="horizontal"==n.model.orientation||"horizontal"==n._customOrientation?f[0].cells.length:"month"==n.currentView()||n._isCustomMonthView()?f[0].cells.length/n.res1.length:n._dateRender.length,R=Math.floor(e(r).index()/b),A=b*(R+1),I=b*R;if(this.model.allowInline&&this.element.find(".e-inlinetext").length>0&&""!=this.element.find(".e-inlinetext").val()?this._saveAppointment():this._inlineRemove()&&this._refreshDayAppointments(this._app),e(r).hasClass("e-workcells"))if("vertical"==n.model.orientation&&"vertical"==n._customOrientation){if(!(D>=parseInt(I)&&D<=parseInt(A)-1&&"undefined"!=v))return!1;if(D==v)if(y>w)for(_=parseInt(w);_<=y;_++)e(f[_].cells[D]).addClass("e-selectedCell");else if(y<w)for(_=parseInt(w);_>=y;_--)e(f[_].cells[D]).addClass("e-selectedCell");else e(f[y].cells[v]).addClass("e-selectedCell");else if(v>D){for(m=v-D,u=parseInt(w);u<=S;u++)e(f[u].cells[D]).addClass("e-selectedCell");if(T&&e(C[0].cells[[D]]).addClass("e-selectedCell"),T&&e(C[0].cells[[v]]).addClass("e-selectedCell"),m>1)for(_=1;_<=m-1;_++){for(h=0;h<=S;h++)e(f[h].cells[v-_]).addClass("e-selectedCell");T&&e(C[0].cells[[v-_]]).addClass("e-selectedCell")}for(g=0;g<=y;g++)e(f[g].cells[v]).addClass("e-selectedCell")}else if(v<D){for(m=D-v,u=parseInt(w);u>=0;u--)e(f[u].cells[D]).addClass("e-selectedCell");if(T&&e(C[0].cells[[D]]).addClass("e-selectedCell"),T&&e(C[0].cells[[v]]).addClass("e-selectedCell"),m>1)for(_=1;_<=m-1;_++){for(h=0;h<=S;h++)e(f[h].cells[[v+_]]).addClass("e-selectedCell");T&&e(C[0].cells[[v+_]]).addClass("e-selectedCell")}for(g=parseInt(y);g<=S;g++)e(f[g].cells[v]).addClass("e-selectedCell")}n._currentRowIndex=y,n._currentColIndex=v,e(f[y].cells[v]).addClass("e-selectedCell").attr("tabIndex",0).focus()}else{if(!(w==y&&D>=parseInt(I)&&D<=parseInt(A)-1&&"undefined"!=v))return!1;if(v>D){for(g=D;g<=v;g++)e(f[y].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus();p=n.element.find(".e-selectedCell").length,n.element.find(".e-selectedCell")[p-1].offsetLeft+n.element.find(".e-workcells").width()>=n.element.find(".e-draggableworkarea").scrollLeft()+c.width-1&&n.element.find("#"+this._id+"_scroller").ejScroller({scrollLeft:n.element.find(".e-draggableworkarea").scrollLeft()+n.element.find(".e-workcells").width()})}else if(v<=D){for(g=D;g>=v;g--)e(f[y].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus();n.element.find(".e-selectedCell")[0].offsetLeft<=n.element.find(".e-draggableworkarea").scrollLeft()&&n.element.find("#"+this._id+"_scroller").ejScroller({scrollLeft:n.element.find(".e-draggableworkarea").scrollLeft()-n.element.find(".e-workcells").width()})}}else if(e(r).hasClass("e-alldaycells")){if(!(D>=parseInt(I)&&D<=parseInt(A)-1&&"undefined"!=v))return!1;if(v<D)for(_=D;_>=v;_--)e(C[0].cells[_]).addClass("e-selectedCell");else if(v>D)for(_=D;_<=v;_++)e(C[0].cells[_]).addClass("e-selectedCell");n._currentRowIndex=0,n._currentColIndex=v,e(C[0].cells[v]).addClass("e-selectedCell").attr("tabIndex",0).focus()}else if(e(r).hasClass("e-monthcells")){if(e(r).hasClass("e-othermonths"))return!1;if(!(D>=parseInt(I)&&D<=parseInt(A)-1&&"undefined"!=v))return!1;if(y==w)if(v<D)for(_=D;_>=v;_--)e(f[y].cells[_]).addClass("e-selectedCell");else if(v>D)for(_=D;_<=v;_++)e(f[y].cells[_]).addClass("e-selectedCell");else v==D&&e(f[y].cells[v]).addClass("e-selectedCell");else if(y>w){for(m=y-w,u=D;u<A;u++)e(f[w].cells[u]).addClass("e-selectedCell");if(m>1)for(_=1;_<=m-1;_++)for(u=I;u<A;u++)e(f[w+_].cells[u]).addClass("e-selectedCell");for(g=I;g<=v;g++)e(f[y].cells[g]).addClass("e-selectedCell")}else if(y<w){for(m=w-y,u=D;u>=I;u--)e(f[w].cells[u]).addClass("e-selectedCell");if(m>1)for(_=1;_<=m-1;_++)for(u=I;u<A;u++)e(f[w-_].cells[u]).addClass("e-selectedCell");for(g=A-1;g>=v;g--)e(f[y].cells[g]).addClass("e-selectedCell")}n._currentRowIndex=y,n._currentColIndex=v,e(f[y].cells[v]).addClass("e-selectedCell").attr("tabIndex",0).focus()}},_shiftSelection:function(i){var n,s,r;if(1==i.shiftKey&&1==i.which&&!e(i.target).hasClass("e-resourceheadercells")){var a=this._focused,o=i.target;!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),this.element.find("e.workcells,e.alldaycells,.e-monthcells").removeClass("e-mousehover"),this.element.find(".e-workcells,.e-alldaycells,.e-monthcells").removeClass("e-selectedCell"),this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),n="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.dateRender:this._dateRender:this.monthDays,s=e(i.target).hasClass("e-workcells")||e(i.target).hasClass("e-alldaycells")?e(i.target).index():7-(7*(parseInt(e(i.target).index()/7)+1)-e(i.target).index())+7*e(i.target).parent().index(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(s="month"!==this.currentView()?Math.floor(s/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))):s),(r=new Date(n[s]))>=this.model.minDate&&r<=this.model.maxDate&&this._mouseSelection(i,this,a,o)}},_moveScrollContent:function(t,i){var n,s;"horizontal"===i.model.orientation||"horizontal"===i._customOrientation?(n=i.element.find(".e-draggableworkarea").scrollLeft(),n=i.model.enableRTL?"mozilla"==i._browserInfo.name?n>0?n:-1*n:"chrome"==i._browserInfo.name||"webkit"==i._browserInfo.name?i.element.find(".e-workcells")[0].offsetLeft+i.element.find(".e-workcells").width()-i.element.find(".e-draggableworkarea").scrollLeft()-i.element.find(".e-draggableworkarea").width():Math.abs(n):-n,"month"!=i.currentView()?e(i.element.find(".e-horizontaltimecells").find("table tr")[2]).css("left",n+"px"):i.element.find(".e-headerdays").css("left",n+"px"),"day"===i.currentView()||"month"===i.currentView()||"customview"==i.currentView()&&i._dateRender.length>7||!i.model.timeScale.enable||(e(i.element.find(".e-headercells").find(".e-activeview").parent()).index()!==(s=Math.floor(Math.abs(n)/i.element.find(".e-workcells").outerWidth()/((i.model.endHour-i.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))))&&i.element.find(".e-headercells").children().removeClass("e-activeview"),e(i.element.find(".e-headercells")[s]).children().addClass("e-activeview"))):e(t).hasClass("e-monthcells")||i.element.find(".e-scrolltimecells").css("top",-i.element.find(".e-draggableworkarea").scrollTop()+"px")},_onScheduleMouseDown:function(i){var n=e(i.target),s=n.hasClass("e-appointment")||n.hasClass("e-alldayappointment")||n.hasClass("e-monthappointment")?n:n.parents(".e-appointment,.e-alldayappointment,.e-monthappointment");n.hasClass("e-workcells")||n.hasClass("e-inlinetext")||n.hasClass("e-commonviewbutton")||s.hasClass("e-appointment")||s.hasClass("e-alldayappointment")||s.hasClass("e-monthappointment")||n.hasClass("e-alldaycells")||n.hasClass("e-monthcells")||n.parents(".e-scheduledialog").hasClass("e-scheduledialog")||(!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),!this.model.allowInline||t.isNullOrUndefined(this._inlineText)||n.hasClass("e-inlineedit")||"agenda"==this.currentView()||(this.element.find(".e-inlinetext").length>0&&""==this.element.find(".e-inlinetext").val()?(t.isNullOrUndefined(this._inlineDate)||this._refreshDayAppointments(this._app),this._inlineRemove()):this._saveAppointment()),this.element.find(".e-workcells").removeClass("e-mousehover"),n.closest("#"+this._id).length>0&&this._scrollerPosition())},_onCellMouseOver:function(i){var n,s,r,a,o;if(e(i.target).closest(".e-appointment,.e-blocktimeappointment,.e-alldayappointment,.e-monthappointment,.e-inline").length>0||e(i.target).parents(".e-inline").length>0)return!1;if("agenda"==this.currentView()){if(1==this._mediaQuery)return!1;n=e(i.currentTarget),"mouseover"===i.type?(this.element.find(".e-mousehover").removeClass("e-mousehover"),n.hasClass("e-agendacells")&&(n.parent().find(".e-timecolumn,.e-eventcolumn").addClass("e-mousehover"),n.parent().find(".e-editapp").parent().show())):"mouseout"===i.type&&n.hasClass("e-agendacells")&&(n.parent().find(".e-timecolumn,.e-eventcolumn").removeClass("e-mousehover"),n.parent().find(".e-editapp").parent().hide())}else{if(n=e(i.currentTarget),s=t.isNullOrUndefined(this.model.workCellsTemplateId)?e(i.target).hasClass("e-workcells")?e(i.target).index():e(i.target).hasClass("e-alldaycells")?e(i.target).index():7-(7*(parseInt(e(i.target).index()/7)+1)-e(i.target).index())+7*e(i.target).parent().index():e(i.target).parent().hasClass("e-workcells")?e(i.target).parent().index():e(i.target).parent().hasClass("e-alldaycells")?e(i.target).parent().index():7-(7*(parseInt(e(i.target).parent().index()/7)+1)-e(i.target).parent().index())+7*e(i.target).parent().parent().index(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(s="month"!==this.currentView()?Math.floor(s/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))):s),r="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.dateRender:this._dateRender:this.monthDays,a=new Date(r[s]),this._slotByElement(e(i.target),"cellHover"),o={cellIndex:s,startTime:new Date(this.cellHoverStartTime),endTime:new Date(this.cellHoverEndTime),target:i,resources:t.isNullOrUndefined(this.model.cellHover)||0==this._tempResource.length?null:this._getResourceValue(n,s)},!(a>=this.model.minDate&&a<=this.model.maxDate))return!1;if("mouseover"===i.type){if(this._trigger("cellHover",o))return!1;this.element.find(".e-mousehover").removeClass("e-mousehover"),(n.hasClass("e-workcells")||n.hasClass("e-monthcells"))&&!n.hasClass("e-resourceheadercells")&&n.addClass("e-mousehover")}else"mouseout"===i.type&&(n.hasClass("e-workcells")||n.hasClass("e-monthcells"))&&n.removeClass("e-mousehover")}},_getAppDetails:function(i){var n,s,r,a,o=t.isNullOrUndefined(i.target)?e(i):e(i.target),l=o.hasClass("e-appointment")||o.hasClass("e-monthappointment")||o.hasClass("e-alldayappointment")||o.hasClass("e-agendaappointment")?o:o.parents(".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendaappointment");return"agenda"==this.currentView()&&o.hasClass("e-eventcolumn")&&(l=o.find(".e-agendaappointment")),n=l.attr("data-guid"),!t.isNullOrUndefined(n)&&((s=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,n)))[0][this._appointmentSettings.recurrence]?((r=e.extend(!0,[],s))[0][this._appointmentSettings.endTime]=r[r.length-1][this._appointmentSettings.endTime],a=s[0][this._appointmentSettings.recurrence]&&1==s[0][this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID")?this._getAppointmentByParentId(n):r[0]):a=this._groupEditing?t.isNullOrUndefined(s[0].commonGuid)?new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,s[0][this._appointmentSettings.id]))[0]:new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("commonGuid",t.FilterOperators.equal,s[0].commonGuid))[0]:new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,n))[0],a)},_onAppointMouseOver:function(i){var n,s,r,a,o;if(!this.model.readOnly){if(!t.isNullOrUndefined(this.model.appointmentHover)&&"mouseover"==i.type&&(n={appointment:this._getAppDetails(i)},this._trigger("appointmentHover",n)))return!1;if("agenda"==this.currentView()){if(1==this._mediaQuery)return!1;s=e(i.currentTarget),"mouseover"===i.type?(this.element.find(".e-mousehover").removeClass("e-mousehover"),s.hasClass("e-agendaappointment")&&(s.addClass("e-mousehover"),s.find(".e-editapp").parent().show())):"mouseout"===i.type&&s.hasClass("e-agendaappointment")&&(s.removeClass("e-mousehover"),s.find(".e-editapp").parent().hide())}else(r=e(i.target).hasClass("e-appointment,e-alldayappointment,e-monthappointment")?e(i.target):e(i.target).parents(".e-appointment,.e-alldayappointment,.e-monthappointment")).hasClass("e-appointment")&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation?"mouseover"===i.type&&r.find(".e-inlineedit").length<=0?(this.model.enableAppointmentResize&&(r.find(".e-bottomhandle,.e-tophandle").addClass("e-icon e-nsexpand"),r.find(".e-bottomhandle").addClass("e-appointresizer-bottom"),r.find(".e-tophandle").addClass("e-appointresizer-top")),this.model.allowDelete&&r.find(".e-schedulemouseclose").css("display","block")):"mouseout"===i.type&&(this.model.enableAppointmentResize&&r.find(".e-bottomhandle,.e-tophandle").removeClass("e-icon e-nsexpand"),r.find(".e-schedulemouseclose").css("display","none")):((r.hasClass("e-alldayappointment")||r.hasClass("e-monthappointment"))&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation||"horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&("mouseover"===i.type&&r.find(".e-inlineedit").length<=0?(this._getAppDetails(i)[this._appointmentSettings.startTime]>=new Date(this._dateRender[0])||(r.find(".e-lefthandle").removeClass("e-icon e-ewexpand"),r.find(".e-lefthandle").removeClass("e-appointresizer-left"),r.find(".e-lefthandle").removeClass("e-columncursor"),r.find(".e-appointment").removeClass(".e-lefthandle"),r.find(".e-righthandle").addClass("e-icon e-ewexpand"),r.find(".e-righthandle").addClass("e-appointresizer-right")),a=new Date(this._dateRender[this._dateRender.length-1]),this._getAppDetails(i)[this._appointmentSettings.endTime]<=new Date(a.setDate(a.getDate()+1))?this.model.enableAppointmentResize&&(r.find(".e-lefthandle,.e-righthandle").addClass("e-icon e-ewexpand"),r.find(".e-lefthandle").addClass("e-appointresizer-left"),r.find(".e-righthandle").addClass("e-appointresizer-right")):(r.find(".e-righthandle").removeClass("e-icon e-ewexpand"),r.find(".e-righthandle").removeClass("e-appointresizer-right"),r.find(".e-righthandle").removeClass("e-columncursor"),r.find(".e-appointment").removeClass(".e-righthandle"),r.find(".e-lefthandle").addClass("e-icon e-ewexpand"),r.find(".e-lefthandle").addClass("e-appointresizer-left")),0!=(o=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,r.attr("data-guid")))).length&&("horizontal"==this._customOrientation||"horizontal"==this.model.orientation)&&"month"!=this.currentView()&&o[0].AllDay&&this.model.endHour-this.model.startHour!=24&&(r.find(".e-lefthandle,.e-righthandle").removeClass("e-icon e-ewexpand"),r.find(".e-lefthandle").removeClass("e-appointresizer-left"),r.find(".e-righthandle").removeClass("e-appointresizer-right"),r.find(".e-righthandle, .e-lefthandle").removeClass("e-columncursor")),this.model.allowDelete&&r.find(".e-schedulemouseclose").css("display","block")):"mouseout"===i.type&&(this.model.enableAppointmentResize&&r.find(".e-lefthandle,.e-righthandle").removeClass("e-icon e-ewexpand"),r.find(".e-schedulemouseclose").css("display","none")))}},_quickWindowPosition:function(t,i,n,s){var r,a=s.find(".e-tableAppoint"),o=e("#"+s.prop("id")+"_wrapper").width(),l=this.element.offset().left,d=this.element.offset().left+this.element.width(),h=this.element.offset().top,p=this.element.offset().top+this.element.height(),m=n.width()/2,c="rotate(0deg)",u=!0,g="40%";return t>l&&t+o>d&&i>h?(t=d-o-5,g=n.offset().left-t+m):t<l&&t+o<d&&i>h?(t=l+5,g=n.offset().left-t+m):i<h&&(u=!1,c="rotate(180deg)",t<l?(t=l+5,g=n.offset().left-t+m):t+o>d&&(t=d-o-5,g=n.offset().left-t+m),r=s.prop("id")==this._id+"AppDetailsWindow"?n.height():"horizontal"==this.model.orientation||"horizontal"==this._customOrientation?n.height()/2:n.height()-4,((i=n.offset().top+10+r)<h||i>p-e("#"+s.prop("id")+"_wrapper").height())&&(i=h+4,u=!0,c="rotate(0deg)")),u?a.removeClass("e-tablePosition"):a.addClass("e-tablePosition"),s.find(".e-quickarrow").css("transform",c).css("top",u?a.outerHeight()+1:0).css("left",g),u?s.addClass("e-quickwinarrowbottom").removeClass("e-quickwinarrowtop"):s.addClass("e-quickwinarrowtop").removeClass("e-quickwinarrowbottom"),{X:t,Y:i}},_getSetScrollPosition:function(e){var i,n={};return t.isNullOrUndefined(e)?(i=this.element.find("#"+this._id+"_scroller").data("ejScroller"),n.ScheduleScrollTop=i.scrollTop(),n.ScheduleScrollLeft=i.scrollLeft()):(this._retainScrollerPosition.ScheduleScrollTop=e.ScheduleScrollTop,this._retainScrollerPosition.ScheduleScrollLeft=e.ScheduleScrollLeft),n},retainCurrentScrollPosition:function(){var e=this.element.find("#"+this._id+"_scroller").ejScroller("instance");e.isVScroll()&&this.element.find("#"+this._id+"_scroller").ejScroller({scrollTop:this._retainScrollerPosition.ScheduleScrollTop}),e.isHScroll()&&this.element.find("#"+this._id+"_scroller").ejScroller({scrollLeft:this._retainScrollerPosition.ScheduleScrollLeft}),this._retainScrollerPosition={}},_scrollerPosition:function(){var e,t,i;this.model.enableRTL||"agenda"!=this.currentView()&&this.model.timeScale.enable&&(this.element.find(".e-vscroll").length>0||this.element.find(".e-hscroll").length>0)&&(e=this.element.find("#"+this._id+"_scroller").ejScroller("instance"),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?(e.isVScroll()&&(i=this.element.find(".e-draggableworkarea").offset().top-this.element.find(".e-workcellstab").offset().top,this.element.find("#"+this._id+"_scroller").ejScroller({scrollTop:i})),e.isHScroll()&&(i=this.element.find(".e-draggableworkarea").offset().left-this.element.find(".e-workcellstab").offset().left,this.element.find("#"+this._id+"_scroller").ejScroller({scrollLeft:Math.abs(i)}))):this._grouping.length>0&&(e.isVScroll()&&this.element.find(".e-resourceheadertable").offset().top!=this.element.find(".e-workcellstab").offset().top&&(i=this.element.find(".e-draggableworkarea").offset().top-this.element.find(".e-workcellstab").offset().top,this._isQuickDialogOpened=!0,this.element.find("#"+this._id+"_scroller").ejScroller({scrollTop:i})),e.isHScroll()&&(t="month"==this.currentView()||this._isCustomMonthView()?this.element.find(".e-headerdays").offset().left:this.element.find(".e-horizontaltabletimecell").closest("tr").offset().left,this.element.find(".e-workcellstab").offset().left!=t&&(i=this.element.find(".e-draggableworkarea").offset().left-this.element.find(".e-workcellstab").offset().left,this._isQuickDialogOpened=!0,this.element.find("#"+this._id+"_scroller").ejScroller({scrollLeft:Math.abs(i)})))))},_cellSelection:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D;if(i.shiftKey||e(i.target).parents().hasClass("e-inline")||e(i.target).hasClass("e-inlineedit")||(this.model.allowInline&&(this.element.find(".e-inlineedit").length>0&&(this._saveAppointment(),i.target=this.element.find("div[data-guid="+e(i.target).closest(".e-appointment,.e-monthappointment,.e-alldayappointment").attr("data-guid")+"]")),this.element.find(".e-inlinetext").length>0&&""!=this.element.find(".e-inlinetext").val()&&this._saveAppointment(),this.element.find(".e-inlinewrapper").remove(),this.element.find(".e-inline").remove(),n=" "!=e(i.target).closest(".e-appointment,.e-monthappointment,.e-alldayappointment").find(".e-apptext").text()),t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("hide"),this.element.find("e.workcells,e.alldaycells,.e-monthcells,.e-agendacells").removeClass("e-mousehover"),this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),r=(s=t.isNullOrUndefined(i.target)?e(i):e(i.target)).closest(".e-blocktimeappointment"),s.hasClass("e-blocktimeappointment")&&s.hasClass(".e-blockenable")||r.length>0&&s.closest(".e-blockenable").length>0))return!1;if(r.length>0&&(i.target.closest(".e-blocktimeappointment").style.pointerEvents="none",s=e(document.elementFromPoint(i.pageX,i.pageY)),i.target.closest(".e-blocktimeappointment").style.pointerEvents=""),this.model.allowInline&&(s.hasClass("e-apptext")||s.hasClass("e-agendaappointment")||!n)&&this._inlineEdit(s),"agenda"==this.currentView()||s.hasClass("e-schedulemouseclose")||t.isNullOrUndefined(this.model.workCellsTemplateId)&&t.isNullOrUndefined(this.model.allDayCellsTemplateId)||(s=s.closest(".e-appointment,.e-monthappointment,.e-alldayappointment").length>0?s.closest(".e-appointment,.e-monthappointment,.e-alldayappointment"):s.hasClass("e-apptime")||s.hasClass("e-apptext")||s.hasClass("e-appointinnertext")||s.hasClass("e-schedulemouseclose")||s.hasClass("e-monthheader")?e(i.target):s.closest(".e-workcells, .e-alldaycells, .e-monthcells")),s.hasClass("e-appointwrapper")||s.hasClass("e-textwrapper")&&(s=e(s).parent()),t.isNullOrUndefined(i.type)||"beforeOpen"!=i.type?this.element.find(".e-workcells,.e-alldaycells,.e-monthcells,.e-agendacells").removeClass("e-selectedCell"):this.element.find("td.e-selectedCell").length>0&&!s.hasClass("e-selectedCell")&&this.element.find(".e-workcells,.e-alldaycells,.e-monthcells,.e-agendacells").removeClass("e-selectedCell"),this.model.showQuickWindow&&t.isNullOrUndefined(this._quickAppointWindow)&&this._renderQuickWindow(),"agenda"!=this.currentView()){if((s.hasClass("e-workcells")||s.hasClass("e-alldaycells")||s.hasClass("e-monthcells"))&&!s.hasClass("e-resourceheadercells")){if(this.model.showQuickWindow&&this._quickAppDetailsWindow.ejDialog("close"),this._slotByElement(s,"cellClick"),this.model.minDate>this.curDate||this.model.maxDate<this.curDate||(a=this._dayFullNames[new Date(this.curDate).getDay()]+", "+t.format(new Date(this.curDate),"M",this.model.locale)+", "+t.format(new Date(this.cur_StartTime),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)+" - "+t.format(new Date(this.cur_EndTime),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale),o={cellIndex:this._cellIndex,startTime:new Date(this.cur_StartTime),endTime:this.cur_EndTime,target:i,resources:null==this.model.cellClick&&(t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("cellClick"))||0==this._tempResource.length?null:this._getResourceValue(s),quickString:a},this._trigger("cellClick",o)))return!1;if(this._mediaQuery||s.addClass("e-selectedCell").attr("tabIndex",0).focus(),this._scrollerPosition(),this.model.allowInline&&(this.element.find(".e-inlineedit").length>0&&this._saveAppointment(),"vertical"!=this.model.orientation||"vertical"!=this._customOrientation||t.isNullOrUndefined(this._inlineDate)||"month"==this.currentView()||this._isCustomMonthView()||this._refreshDayAppointments(this._app),t.scheduleFeatures.resources&&0!=this._tempResource.length&&this._getResourceDetails(s,this._cellIndex),this._inlineAppointment(s)),this.model.showQuickWindow&&!this.model.allowInline){this._quickAppointWindow.find("#"+this._id+"_quickAppwindow").css("display","block"),this._quickAppointWindow.find(".e-quickstartend").html(o.quickString),l=e(i).hasClass("e-workcells")||e(i).hasClass("e-alldaycells")||e(i).hasClass("e-monthcells")?e(i):e(i.target),"beforeOpen"!=i.type&&!this.model.readOnly&&this._quickAppointWindow.ejDialog("open"),this._quickAppointWindow.find(".subject").val("");var S=l.offset().left-(this._quickAppointWindow.width()-l.width())/2+10,y=l.offset().top-this._quickAppointWindow.outerHeight()+4,v=this._quickWindowPosition(S,y,l,this._quickAppointWindow);this._quickAppointWindow.ejDialog({position:{X:v.X,Y:v.Y}}),t.scheduleFeatures.resources&&0!=this._tempResource.length&&this._getResourceDetails(s,this._cellIndex)}this._focused=e(":focus"),this.model.showQuickWindow&&this._quickAppointWindow.find(".subject").focus(),this._cellClick=!0,t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.ejDialog({title:this._getLocalizedLabels("CreateAppointmentTitle")})}else if((!s.hasClass("e-resourceheadercells")&&!s.hasClass("e-appsoverflow")&&!s.hasClass("e-monthheader")&&!s.hasClass("e-categorybar")&&!this.model.allowInline||this.model.allowInline&&!s.hasClass("e-apptext")&&!s.hasClass("e-apptime"))&&!s.hasClass("e-resourceheadercells")&&!s.hasClass("e-appsoverflow")&&!s.hasClass("e-monthheader")&&!s.hasClass("e-categorybar")){if(this._cellClick=!1,t.isNullOrUndefined(this._quickAppDetailsWindow)||this._quickAppDetailsWindow.find("#"+this._id+"_quickAppDetailswindow").css("display","block"),!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&this._quickAppointWindow.ejDialog("close"),D=s.hasClass("e-appointment")||s.hasClass("e-monthappointment")||s.hasClass("e-alldayappointment")?s:s.closest(".e-appointment,.e-alldayappointment,.e-monthappointment"),this._appUid=D.attr("data-guid"),s.hasClass("e-schedulemouseclose"))return!1;for(this._processed=this._sortAppById(this._processed),d=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),p=0;p<d.length;p++){h=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,d[p].Guid));break}if(t.isNullOrUndefined(h))return;for(p=0;p<h.length;p++)this.element.find("div[data-guid="+h[p].Guid+"]").addClass("e-selectedAppointment");this._mediaQuery&&(this._mAppId=this._appUid);var C=this._sortAppById(h),T=C[0][this._appointmentSettings.recurrence]?C[0]:this._getAppointmentByParentId(this._appUid),b=(new Date).getTime()-T[this._appointmentSettings.startTime].getTime(),R=Math.abs(new Date-T[this._appointmentSettings.startTime]),A=Math.floor(R/36e5);A=A<=9?"0"+A:A,m=(m=new Date(R).getUTCMinutes())<=9?"0"+m:m;var I=Math.ceil(b/6e4-1)<0&&A<24?this._getLocalizedLabels("EventBeginsin")+" "+A+" "+this._getLocalizedLabels("Hours")+" "+m+" "+this._getLocalizedLabels("Minutes"):Math.ceil(b/6e4-1)<0&&A>=24?this._getLocalizedLabels("EventBeginsin")+" "+Math.abs(Math.ceil(b/864e5))+" "+this._getLocalizedLabels("Days"):this._getLocalizedLabels("Overdue"),k={appointment:(h.length>1?this._recurrenceAppSort(h):h)[0],events:i};if(t.isNullOrUndefined(i.events)&&this._trigger("appointmentClick",k))return this.element.find(".e-selectedAppointment").css({border:"none"}),!1;this.model.showQuickWindow&&(this._quickAppDetailsWindow&&this._quickAppDetailsWindow.find(".e-quicksubject").html(T[this._appointmentSettings.subject]).attr("title",T[this._appointmentSettings.subject]),c="12"==this._timeMode?t.format(h[0][this._appointmentSettings.startTime],this._pattern.t,this.model.locale):t.format(h[0][this._appointmentSettings.startTime],"HH:mm",this.model.locale),u="12"==this._timeMode?t.format(h[h.length-1][this._appointmentSettings.endTime],this._pattern.t,this.model.locale):t.format(h[h.length-1][this._appointmentSettings.endTime],"HH:mm",this.model.locale),this._quickAppDetailsWindow.find(".e-rightfields").html(I),g=Math.ceil((h[0][this._appointmentSettings.endTime]-h[0][this._appointmentSettings.startTime])/36e5)/24,_=h.length>1||("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&"month"==this.currentView()&&g>1||h[0][this._appointmentSettings.startTime].getDay()!=h[h.length-1][this._appointmentSettings.endTime].getDay()?this._dayFullNames[h[0][this._appointmentSettings.startTime].getDay()]+", "+t.format(h[0][this._appointmentSettings.startTime],"M",this.model.locale)+" - "+c+" to "+this._dayFullNames[h[h.length-1][this._appointmentSettings.endTime].getDay()]+", "+t.format(h[h.length-1][this._appointmentSettings.endTime],"M",this.model.locale)+" - "+u:this._dayFullNames[h[0][this._appointmentSettings.startTime].getDay()]+", "+t.format(h[0][this._appointmentSettings.startTime],"M",this.model.locale)+", "+c+" - "+u,this._quickAppDetailsWindow.find(".e-quickstartendtime").html(_),T[this._appointmentSettings.recurrence]?this._quickAppDetailsWindow.find(".e-editseries,.e-editfutureonly").removeClass("e-disable"):this._quickAppDetailsWindow.find(".e-editseries,.e-editfutureonly").addClass("e-disable"),"beforeOpen"!=i.type&&this._quickAppDetailsWindow.ejDialog("open"),this.model.readOnly?this._quickAppDetailsWindow.find(".e-scheduledelete").addClass("e-disable"):this._quickAppDetailsWindow.find(".e-scheduledelete").removeClass("e-disable"),this.model.allowDelete||this._quickAppDetailsWindow.find(".e-scheduledelete").addClass("e-disable"),f=e(D).width()>this.element.width()?e(D).offset().left>this.element.offset().left?e(D).offset().left:this.element.find(".e-draggableworkarea").scrollLeft()>e(D).width()?this.element.offset().left:this.element.width()/2-4:e(D).offset().left-((this._quickAppDetailsWindow.width()-e(D).width())/2-4),w=e(D).offset().top-this._quickAppDetailsWindow.outerHeight()+4,v=this._quickWindowPosition(f,w,D,this._quickAppDetailsWindow),this._quickAppDetailsWindow.ejDialog({position:{X:v.X,Y:v.Y}}),this._quickAppDetailsWindow.focus()),t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.ejDialog({title:this._getLocalizedLabels("Editevent")})}e(s).hasClass("e-monthcells")||this.element.find(".e-scrolltimecells").css("top",-this.element.find(".e-draggableworkarea").scrollTop()+"px")}else{if(this._cellIndex=0,this.cur_StartTime=new Date(new Date(this.currentDate()).setHours(0,0,0)),this.cur_EndTime=new Date(new Date(this.currentDate()).setHours(23,59,59)),e(s).parentsUntil(".e-agendacellstab tbody").find(".e-eventcolumn,.e-timecolumn").addClass("e-selectedCell").attr("tabIndex",0).focus(),D=s.hasClass("e-agendaappointment")?s:this.element.find(".e-selectedCell").parent().find(".e-agendaappointment"),this._appUid=D.attr("data-guid"),this._mediaQuery&&(this._mAppId=this._appUid),s.hasClass("e-editapp")||s.hasClass("e-deleteapp")||(D=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),this._trigger("appointmentClick",{appointment:D[0],events:i})))return!1;this._cellClick=!1}},_inlineAppointment:function(){var i,n,s,r,a,o,l={},d=this._processed.length>0?Math.max.apply(Math,this._processed.map(function(e){return e.AppTaskId}))+1:1;if(this._inline=!0,this._inlineDate=new Date(this.cur_StartTime),l[this._appointmentSettings.startTime]=new Date(this._inlineDate),l[this._appointmentSettings.endTime]=this.cur_EndTime,l[this._appointmentSettings.id]=l.inline=this._maxId=d,n=(l[this._appointmentSettings.endTime]-l[this._appointmentSettings.startTime])/36e5>=24,(!t.isNullOrUndefined(this.model.group)||0!=this._tempResource.length&&t.scheduleFeatures.resources)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&(l=this._getResourceFields(l)),i=this._app=l,this._appointmentProcessing(i),(s=this._processed.filter(function(e){return e.ParentId==i.ParentId})).length>0)for(r=0,a=s.length;r<a;r++){var h=this._findAllDayApp(s[r]),p=s[r][this._appointmentSettings.startTime],m="day"==this.currentView()&&new Date(new Date(this._dateRender[0]).setHours(0,0,0,0)).getTime()==new Date(new Date(s[r][this.model.appointmentSettings.startTime]).setHours(0,0,0)).getTime()?0:"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"day"==this.currentView()?-1:e.inArray(new Date(p.getFullYear(),p.getMonth(),p.getDate()).getTime(),this._dateRender):e.inArray(new Date(p.getFullYear(),p.getMonth(),p.getDate()).getTime(),this.monthDays),c=this._tempResource.length>0&&this._grouping.length>0&&t.scheduleFeatures.resources?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,s[r][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]]):0;this._resWorkWeek&&(o=new Date(s[r][this._appointmentSettings.startTime]).setHours(0,0,0,0),day=this._resourceWorkWeek(c,o)),this._resCustomView&&(o=new Date(s[r][this._appointmentSettings.startTime]).setHours(0,0,0,0),day=this._resourceCustomView(c,o)),m=this._resWorkWeek||this._resCustomView?day:m,"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"===this.currentView()?this.model.timeScale.enable&&"month"!==this.currentView()&&!this._isCustomMonthView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&m>=0&&(s[r][this._appointmentSettings.allDay]||Math.round((s[r][this._appointmentSettings.endTime].getTime()-s[r][this._appointmentSettings.startTime].getTime())/36e5)>=24||h)?this._setAllDayPos(s[r],m,c):this._renderApp(s[r],m,c):this._renderAppointmentMonth(s[r],m,c,0):this._refreshDayAppointments(s[r]),delete s[r].Index}n||l[this._appointmentSettings.endTime].getDate()==l[this._appointmentSettings.startTime].getDate()?this.element.find(".e-inlinetext")[0].focus():this.element.find(".e-inlinetext")[1].focus(),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:s},"inline"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:s},"inline")},_inlineEdit:function(i){this._cellClick=!1,t.isNullOrUndefined(this._quickAppDetailsWindow)||this._quickAppDetailsWindow.ejDialog("close"),this._inline=!0;var n="agenda"!=this.currentView()?i.closest(".e-appointment,.e-monthappointment,.e-alldayappointment"):i;"agenda"!=this.currentView()&&i.children("span")&&i.children("span").css("display","none"),i.css("display","none"),this._appUid=n.attr("data-guid"),this._subject="agenda"!=this.currentView()?n.find(".e-apptext").text():n.text(),this._inlineText=t.buildTag("input .e-inlineedit","",{},{type:"text",value:e.trim(this._subject),onfocus:"this.value = this.value;"}),"agenda"!=this.currentView()?n.prepend(this._inlineText):n.before(this._inlineText),this._inlineText.css({background:"transparent",border:"0px solid transparent"}),this.element.find(".e-inlineedit").focus()},_inlineRemove:function(){this._inline=!1,this.element.find(".e-inlinewrapper").remove(),this.element.find(".e-inline").remove(),this._inlineText=null,this.element.find(".e-inlineedit")&&("agenda"==this.currentView()?this._renderAgendaContent():(this.element.find(".e-inlineedit").remove(),this.element.find(".e-icon.e-recurapp").css("display","block"),this.element.find(".e-apptext").css("display","block")))},_inlineTemplate:function(t,i,n,s,r,a,o){this._inlineText=e(this.inlineTemplate.render({id:t[this._appointmentSettings.id],rtl:this.model.enableRTL,subject:" ",left:o?i:i+"px",top:n,appWidth:o?s:s+"px",appHeight:r,appClass:"e-inline",appointData:a.appointColor.appointData,appointtextcolor:a.appointColor.appointtextcolor}))},_getDateByElement:function(e,t){var i,n,s=this.model.showWeekend?7:this.model.workWeek.length;this._cellIndex=this.model.timeScale.enable?e.hasClass("e-workcells")?e.index():e.hasClass("e-alldaycells")?e.index():this._isCustomMonthView()&&this._oneWeek?e.index():s-((parseInt(e.index()/s)+1)*s-e.index())+e.parent().index()*s:"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&"month"==this.currentView()||"customview"==this.currentView()&&this._dateRender.length>=7&&!this._resCustomView?s-((parseInt(e.index()/s)+1)*s-e.index())+e.parent().index()*s:e.index(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(i=this.element.find(".e-workcellstab tr:first-child").children().length/this._dateRender.length,this._cellIndex="month"!==this.currentView()&&!this._isCustomMonthView()&&i<this._cellIndex?this._cellIndex-this._cellIndex%i:this._cellIndex,this._cellIndex=this.model.timeScale.enable?"month"===this.currentView()||this._isCustomMonthView()?this._cellIndex:Math.floor(this._cellIndex/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))):e.index(),"cellHover"!=t&&(this._workCellIndex=e.hasClass("e-workcells")?e.parent().index():e.closest(".e-workcells").parent().index())),n="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation||"customview"==this.currentView()&&this._dateRender.length<=7?this._resWorkWeek?this._dateRender:this.dateRender:this._dateRender:this.monthDays,n=("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&"customview"==this.currentView()&&this._dateRender.length<=7?this._dateRender:n,this._cellIndex=this._cellIndex==n.length?this._cellIndex-1:this._cellIndex,this.curDate=new Date(n[this._cellIndex])},_slotByElement:function(e,i){this._getDateByElement(e,i);var n=this.curDate;e.hasClass("e-workcells")&&this.model.timeScale.enable&&"month"!==this.currentView()&&!this._isCustomMonthView()?(this._calcCurrentTime(n,e,i),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.find(".allday").ejCheckBox({checked:!1})):"cellHover"==i?(this.cellHoverStartTime=new Date(new Date(n).setHours(0,0,0)),this.cellHoverEndTime=new Date(new Date(n).setHours(23,59,59))):(this.cur_StartTime=new Date(new Date(n).setHours(0,0,0)),this.cur_EndTime=new Date(new Date(n).setHours(23,59,59)),e.hasClass("e-alldaycells")&&(t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),this._appointmentAddWindow.find(".allday").ejCheckBox({checked:!0})))},_calcCurrentTime:function(e,t,i){var n,s,r,a=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount;if("vertical"==this.model.orientation&&"vertical"==this._customOrientation)n=60*this.model.startHour+t.parent().index()*a,n*=6e4;else{var o=this.element.find(".e-workcellstab tr:first-child").children().length/this._dateRender.length,l=Math.floor(t.index()/o),d=Math.abs(o-t.index());s=a*(d%=o)+60*this.model.startHour,n=60*this.model.startHour+t.index()*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*this._cellIndex*(60/this.model.timeScale.majorSlot)*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount),n=0==o?n:60*this.model.startHour+t.index()*a-(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*this._cellIndex*(60/this.model.timeScale.majorSlot)*a,n=0!=l&&0!=o?6e4*s:6e4*n}this._timeScaleMin=a,this._timeScaleMin=6e4*this._timeScaleMin,"cellHover"==i?(this.cellHoverStartTime=new Date(e).setMilliseconds(n),r=parseInt(new Date(this.cellHoverStartTime).getHours())==new Date(new Date(e).setMinutes(this._timeScaleMin*this.model.timeScale.minorSlotCount*(this.model.endHour-this.model.startHour)-this.model.timeScale.minorSlotCount)).getHours()&&parseInt(new Date(this.cellHoverStartTime).getMinutes())==new Date(new Date(e).setMinutes(this._timeScaleMin*this.model.timeScale.minorSlotCount*(this.model.endHour-this.model.startHour)-this.model.timeScale.minorSlotCount)).getMinutes()?n+(this._timeScaleMin-1):new Date(this.cellHoverStartTime).getMilliseconds()+this._timeScaleMin,this.cellHoverEndTime=new Date(new Date(this.cellHoverStartTime).setMilliseconds(r)),this.cellHoverEndTime=new Date(this.cellHoverStartTime).setHours(0,0,0,0)<new Date(this.cellHoverEndTime).setHours(0,0,0,0)?new Date(new Date(this.cellHoverStartTime).setHours(23,59,59)):this.cellHoverEndTime):(this.cur_StartTime=new Date(e).setMilliseconds(n),r=parseInt(new Date(this.cur_StartTime).getHours())==new Date(new Date(e).setMinutes(this._timeScaleMin*this.model.timeScale.minorSlotCount*(this.model.endHour-this.model.startHour)-this.model.timeScale.minorSlotCount)).getHours()&&parseInt(new Date(this.cur_StartTime).getMinutes())==new Date(new Date(e).setMinutes(this._timeScaleMin*this.model.timeScale.minorSlotCount*(this.model.endHour-this.model.startHour)-this.model.timeScale.minorSlotCount)).getMinutes()?n+(this._timeScaleMin-1):new Date(this.cur_StartTime).getMilliseconds()+this._timeScaleMin,this.cur_EndTime=new Date(new Date(this.cur_StartTime).setMilliseconds(r)),this.cur_EndTime=new Date(this.cur_StartTime).setHours(0,0,0,0)<new Date(this.cur_EndTime).setHours(0,0,0,0)?new Date(new Date(this.cur_StartTime).setHours(23,59,59)):this.cur_EndTime)},_checkReminders:function(){var e,i;for(this._todayAppointments=[],e=0;e<this._processed.length;e++)new Date(new Date(this._processed[e][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()>=new Date((new Date).setHours(0,0,0,0)).getTime()&&this._todayAppointments.push(this._processed[e]);i=this,jQuery.each(this._todayAppointments,function(e,n){var s,r,a;t.isNullOrUndefined(i.model)||t.isNullOrUndefined(i.model.reminderSettings)||(s=i.model.reminderSettings.alertBefore,r=n[i._appointmentSettings.startTime],-1!=s&&null!=s&&(a=((new Date).getTime()-new Date(r).getTime())/6e4,Math.round(a)==-1*s&&i._trigger("reminder",{reminderAppointment:n})))})},_showContextMenu:function(i){var n,s,r,a,o,l,d,h=!1,p=!1,m=this.model.contextMenuSettings.menuItems.cells;if(i){if(this._contextMenu=t.buildTag("ul#"+this._id+"contextMenu"),this.element.append(this._contextMenu),this._contextMenu.ejMenu({fields:{id:"id",text:"text",parentId:"parentId"},menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+this._id,width:"auto",open:function(){this.element.width("auto")},click:e.proxy(this._onMenuSelect,this),beforeOpen:e.proxy(this._beforeopen,this)}),this.model.categorizeSettings.enable&&this.model.contextMenuSettings.menuItems.appointment){for(n=this.model.contextMenuSettings.menuItems.appointment,s=this.model.categorizeSettings.dataSource.length,o=0;o<n.length;o++)if("categorize"==n[o].id){r=o,p=!0;break}if(p)for(a=new t.DataManager(this.model.contextMenuSettings.menuItems.appointment).executeLocal((new t.Query).where("parentId",t.FilterOperators.equal,"categorize")),new t.DataManager(this.model.contextMenuSettings.menuItems.appointment).saveChanges({added:[],changed:[],deleted:a},"parentId"),o=0;o<s;o++)l=this.model.categorizeSettings,this.model.contextMenuSettings.menuItems.appointment.push({text:l.dataSource[o][l.text],id:"categorize_"+l.dataSource[o][l.id],fontColor:l.dataSource[o][l.fontColor],color:l.dataSource[o][l.color],parentId:this.model.contextMenuSettings.menuItems.appointment[r].id.toString()})}if(this._gotoDate&&this.model.contextMenuSettings.enable){for(d in m)if("gotodate"==m[d].id){h=!0;break}h&&(this._renderGotoWindow(),this._gotoDate=!1)}}},_beforeopen:function(i){var n,s,r,a,o,l;if(!this.model.contextMenuSettings.enable)return this._contextMenu.data("ejMenu").hide(),!1;e(document).off(t.eventType.mouseMove);var d,h,p=e(i.target).closest(".e-alldayappointment,.e-appointment,.e-monthappointment,.e-workcells,.e-monthcells,.e-alldaycells"),m=e(p).parents(".e-draggableworkarea tr").length>0&&e(p).parentsUntil(".e-draggableworkarea tr").is(".e-agendaappointment,.e-eventcolumn,.e-timecolumn")||e(p).is(".e-agendaappointment,.e-eventcolumn,.e-timecolumn");if(p.hasClass("e-appointment")||p.hasClass("e-monthappointment")||p.hasClass("e-alldayappointment")||p.hasClass("e-workcells")||p.hasClass("e-alldaycells")||p.hasClass("e-monthcells")||t.isNullOrUndefined(this.model.appointmentTemplateId)||(p=e(i.target).offsetParent()),e(i.target).hasClass("e-appsoverflow"))return!1;if(i.cancel=!(p.hasClass("e-alldayappointment")||p.hasClass("e-monthappointment")||p.hasClass("e-appointment")||p.hasClass("e-workcells")||p.hasClass("e-alldaycells")||p.hasClass("e-appointinnertext")||p.hasClass("e-monthcells")||p.hasClass("e-apptime")||p.hasClass("e-apptext")||m),1==i.cancel)return this._contextMenu.data("ejMenu").hide(),!1;if("agenda"==this.currentView()&&m&&(i=e(p).hasClass("e-agendaappointment")?i:e(p).parents(".e-draggableworkarea tr").find(".e-agendaappointment")),this._cellSelection(i),(p.hasClass("e-workcells")||p.hasClass("e-alldaycells")||p.hasClass("e-monthcells"))&&(h={currentDate:this.curDate,cellIndex:this._cellIndex,events:i,resources:t.isNullOrUndefined(this.model.beforeContextMenuOpen)||0==this._tempResource.length?null:this._getResourceValue(p,this._cellIndex)}),(p.hasClass("e-alldayappointment")||p.hasClass("e-monthappointment")||p.hasClass("e-appointinnertext")||p.hasClass("e-apptime")||p.hasClass("e-apptext")||p.hasClass("e-appointment"))&&(h={appointment:this._getAppDetails(i),events:i}),"agenda"==this.currentView()&&(h={appointment:new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0],events:i}),this._baseTarget=p,this._trigger("beforeContextMenuOpen",h))return!1;if(n=this._contextMenu.data("ejMenu"),(d=!(p.hasClass("e-alldayappointment")||p.hasClass("e-monthappointment")||p.hasClass("e-appointment")||p.hasClass("e-appointinnertext")||p.hasClass("e-apptime")||p.hasClass("e-apptext")||m))?n.option("fields.dataSource",this.model.contextMenuSettings.menuItems.cells):n.option("fields.dataSource",this.model.contextMenuSettings.menuItems.appointment),this.model.readOnly?(n.disableItemByID("new"),n.disableItemByID("recurrence"),n.disableItemByID("delete"),n.disableItemByID("categorize")):(n.enableItemByID("new"),n.enableItemByID("recurrence"),this.model.allowDelete?n.enableItemByID("delete"):n.disableItemByID("delete"),n.enableItemByID("categorize")),this.element.find("td.e-selectedCell").length>1&&"agenda"!=this.currentView()&&this._multipleCellAppointCreation(i),this._target=i,this.model.showQuickWindow&&!t.isNullOrUndefined(this._quickAppointWindow)&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),this.model.categorizeSettings.enable&&0==d){if(0==this._contextMenu.find("li#categorize").find("li").children().find("div").length)for(o=0;o<this.model.categorizeSettings.dataSource.length;o++)this._contextMenu.find("li#categorize").find("li#categorize_"+this.model.categorizeSettings.dataSource[o][this.model.categorizeSettings.id]).children().append('<div><div style="border: 1px solid black;height: 12px;margin-left: 2px;margin-top: 2px;width: 12px;background-color:'+this.model.categorizeSettings.dataSource[o][this.model.categorizeSettings.color]+'"></div></div>');for(o=1;o<=this.model.categorizeSettings.dataSource.length;o++)this._contextMenu.find("li#categorize").find("li#categorize_"+o).children().find("div:first-child.e-categorizeMenuSelected")&&this._contextMenu.find("li#categorize").find("li#categorize_"+o).children().find("div:first-child").removeClass("e-categorizeMenuSelected");if(s=(new t.Query).where("Guid",t.FilterOperators.equal,this._appUid),(r=t.DataManager(this._processed).executeLocal(s))[0][this._appointmentSettings.categorize])if(a=r[0][this._appointmentSettings.categorize].split(","),this.model.categorizeSettings.allowMultiple){if(a[0].length>0)for(o=0;o<a.length;o++)this._contextMenu.find("li#categorize").find("li#categorize_"+a[o]).children().find("div:first-child").addClass("e-categorizeMenuSelected")}else a[0].length>0&&(l=a.length-1,this._contextMenu.find("li#categorize").find("li#categorize_"+a[l]).children().find("div:first-child").addClass("e-categorizeMenuSelected"))}else this._contextMenu.find("li#categorize")&&this._contextMenu.find("li#categorize").css("display","none")},_onMenuSelect:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w=i.events.ID.split("_"),D="",S=this._baseTarget;if(e(S).is(".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendaappointment")||S.parents(".e-appointment").hasClass("e-appointment")||S.parents(".e-monthappointment").hasClass("e-monthappointment")||S.parents(".e-alldayappointment").hasClass("e-alldayappointment")||"agenda"==this.currentView()&&this.element.find(".e-selectedCell").parent().find(".e-agendaappointment")?(n=t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),D=n[0][this._appointmentSettings.recurrence]&&-1!=n[0][this._appointmentSettings.recurrenceRule].indexOf("RECUREDITID")?n[0]:this._getAppointmentByParentId(this._appUid)):D={startTime:new Date(this.cur_StartTime),endTime:this.cur_EndTime,resourceInfo:this._getResourceDetails(S)},t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("menuItemClick")||(i={ID:i.ID,type:i.type,text:i.text,parentId:i.parentId,parentText:i.parentText}),this._trigger("menuItemClick",{events:i,targetInfo:D}))return!1;switch(s=D[this._appointmentSettings.categorize],w[0]){case"new":this._appointmentWindow(this._target);break;case"recurrence":this._appointmentWindow(this._target),this._appointmentAddWindow.find(".recurrence").ejCheckBox({checked:!0}),this._repeat(i={isChecked:!0,isInteraction:!0});break;case"open":this._appointmentWindow(this._target);break;case"today":this._navigateClick(this.currentDate(new Date),"DateNavigation");break;case"view":t.isNullOrUndefined(w[1])||(r=w[1].toLowerCase(),this._navView=!0,this.currentView()!=r&&this._viewChange(null,this.currentView(),r));break;case"timemode":t.isNullOrUndefined(w[1])||(this.model.timeMode=this._timeMode="Hour12"==w[1]?"12":"24",this._updateTimeMode(),this.element.find(".e-scrolltimecells").height(this.element.find(".e-workcellstab").height()));break;case"businesshours":case"workhours":this.model.workHours.highlight=!this.model.workHours.highlight,this.model.workHours.highlight?this._highlightBusinessHours():this.element.find(".e-workcells").removeClass("e-businesshighlightworkcells")&&this.element.find(".e-monthcells").removeClass("e-monthcellhighlight");break;case"gotodate":this._gotoWindow.ejDialog("open");break;case"delete":this._deleteAppoint();break;case"print":this._printAppointment(this._appUid);break;case"categorize":if(t.isNullOrUndefined(w[1]))this.element.find(".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendaappointment").removeClass("e-selectedAppointment");else if(this.model.categorizeSettings.enable){if(a=w[1],o="",D[this._appointmentSettings.categorize])if(l=D[this._appointmentSettings.categorize].split(","),this.model.categorizeSettings.allowMultiple){if(l[0].length>0){for(h=0;h<l.length;h++)if(l[h]==a){d=!0;break}if(1==d)for(h=0;h<l.length;h++)l[l.length-1]!=a?l[h]!=a&&(o+=l.length-1!=h?l[h]+",":l[h]):l[h]!=a&&(o+=l.length-2!=h?l[h]+",":l[h]);else o=D[this._appointmentSettings.categorize]+","+a}}else o=l[l.length-1]==a?"":a.toString();else o=a.toString();if(D[this._appointmentSettings.categorize]=o,!t.isNullOrUndefined(w[1])&&(p=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,n[0][this._appointmentSettings.id])),m=n[0][this._appointmentSettings.recurrence]?{appointment:D,recurrenceCollection:{occurrences:n[0],parentData:p[0]}}:{appointment:D},this._trigger("beforeAppointmentChange",m)))return D[this._appointmentSettings.categorize]=s,!1;var y=this,v=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",C=this._dataManager.update(v,D,this.model.appointmentSettings.query._fromTable);for(new t.DataManager(this._currentAppointmentData).update("AppTaskId",D),c=this._processed.filter(function(e){return e[y._appointmentSettings.id]==D[y._appointmentSettings.id]}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:c},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:c},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:c},"Guid"),u=0,f=c.length;u<f;u++)this._appointmentRemove(c[u]);for(this._appointmentProcessing(D),this._currentViewAppointments=this.getCurrentViewAppointments(),_=0,f=(g=this._currentViewAppointments.filter(function(e){return e.ParentId==D.ParentId})).length;_<f;_++)this._refreshDayAppointments(g[_]);this._trigger("appointmentChanged",{appointment:D}),!t.isNullOrUndefined(C)&&e.isFunction(C.promise)&&this.dataSource()instanceof t.DataManager&&C.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&y._processUrlBinding(i)});break}}},_updateTimeMode:function(){var i,n,s,r,a,o,l=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)&&!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId)||!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId),d=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId),h=this._timeSlotCount(l,d);if(t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.find(".startendtime").ejTimePicker({timeFormat:"12"==this._timeMode?this._pattern.t:"HH:mm"}),"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"===this.currentView()||this._isCustomMonthView()||"agenda"===this.currentView())"month"===this.currentView()||this._isCustomMonthView()||"agenda"===this.currentView()||(s="month"==this.currentView()?1:0,!l&&!d||"month"===this.currentView()||this._isCustomMonthView()?r=this.timeCellTemplate.render({timerows:h.strTime,cols1:h.columnCount,viewclass:s,timeScale:this.model.timeScale.minorSlotCount,userTemplateId:l,template:d}):(h.columnCount.pop(),r=this.userTimeCellTemplate.render({timerows:h.strTime,cols1:h.columnCount,viewclass:s,timeScale:this.model.timeScale.minorSlotCount,cheight:this.model.cellHeight,userTemplateId:l,timeValue1:h.timeValue1,template:d})),this.$TimeCellTD.children().remove(),this.$TimeCellTD.append(r),this.model.showCurrentTimeIndicator&&this.element.find(".e-highlightcurrenttimeline").remove(),this.element.find(".e-scrolltimecells").css("top",-this.element.find(".e-draggableworkarea").scrollTop()+"px"),"24"!=this._timeMode&&(a=this.element.find(".e-draggableworkarea").scrollTop()/(this.element.find(".e-workcells").height()*this.model.timeScale.minorSlotCount),a=Math.round(a)<a?Math.round(a)+1:Math.round(a),(o=t.preferredCulture(this.model.locale).calendar).AM&&o.PM&&this.element.find(".e-idAmpmstyle").each(function(t,i){t==a&&"00"==e(i).text().trim()?parseInt(e(i)[0].id)<12?e(i).text(o.AM[0]):e(i).text(o.PM[0]):(e(i).text()==o.AM[0]&&t>0||e(i).text()==o.PM[0]&&parseInt(e(i)[0].id)>12)&&e(i).text("00")})),this.element.find(".e-headercells").addClass("e-dateheaderselect"),this._highlightCurrentTime(this.model.showCurrentTimeIndicator));else{var p=this.element.find(".e-horizontaltimecells").find("table tr").eq(2).css("left"),m=this.model.timeScale.enable?this._isCustomMonthView()?"month":this.currentView():"month",c="day"==m?1:"week"==m?7:"customview"===this.currentView()&&this._renderDays<=7?this._dateRender.length:5;this.datesColumn=this._getHeaderAllDayCellsCount(),i=0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group),n=l||d?this.userTimeCellHoriTemplate.render({cols:this.datesColumn,label:this._getLocalizedLabels("Resources"),heightclass:"month"==m?"e-horizontalmonthtimecellsht":"e-horizontaltimecellsht",multiRes:i,view:m,timeTdCount:h.strTime,colspan:"month"==m?1:h.strTime.length/c*2,height:"month"==m?62:59,width:this.model.width,headercellWidth:"day"==m?"100%":"55px",column:h.columnCount,userTemplateId:l,template:d}):this.horizontalHeader.render({cols:this.datesColumn,label:this._getLocalizedLabels("Resources"),heightclass:"month"==m?"e-horizontalmonthtimecellsht":"e-horizontaltimecellsht",multiRes:i,view:m,timeTdCount:h.strTime,colspan:"month"==m?1:h.strTime.length/c*2,height:"month"==m?62:59,width:this.model.width,headercellWidth:"day"==m?"100%":"55px",column:h.columnCount}),this.aTR.children().remove(),this.aTR.append(n),this._borderAddRemove(),this.model.workHours.highlight?this._highlightBusinessHours():this.element.find(".e-workcells").removeClass("e-businesshighlightworkcells"),this.element.find(".e-headercells").addClass("e-dateheaderselect"),this.element.find(".e-horizontaltimecells").find("table tr").eq(2).css("left",parseInt(p)+"px"),this._businessHourScroller()}t.isNullOrUndefined(this.dataSource())||this._renderAppointmentAll()},_gotoOk:function(t){var i,n,s,r;if(e(t.currentTarget).hasClass("e-gotoOk")){if(i=this._gotoWindow.find("#"+this._id+"gotodate").ejDatePicker("option","value"),n=this._gotoWindow.find("#"+this._id+"show").ejDropDownList("option","itemValue"),data={currentView:this.currentView(),currentDate:new Date(this.currentDate()),target:t},this._trigger("actionBegin",{data:data,requestType:"dateNavigate"}))return!1;if(s=this.currentDate(),r=this.currentView(),this.currentDate(new Date(i)),this.currentView(n.toLowerCase()),data={previousDate:s,currentDate:this.currentDate(),previousView:r,currentView:this.currentView(),target:t,requestType:"dateNavigate"},this._trigger("navigation",data))return this.currentDate(new Date(s)),this.currentView(r),this._navView=!1,!1;this._renderCurrentView("ViewChange"),this._trigger("actionComplete",{data:data,requestType:"dateNavigate"})}this._gotoCancel()},_gotoCancel:function(){this._gotoWindow.find("#"+this._id+"gotodate").ejDatePicker({value:this.currentDate()}),this._gotoWindow.find("#"+this._id+"show").ejDropDownList({value:this.currentView()}),this._gotoWindow.ejDialog("close")},_renderGoto:function(){var e,t;for(this._gotoWindow.find("#"+this._id+"gotodate").ejDatePicker({buttonText:this._getLocalizedLabels("Today"),enableRTL:this.model.enableRTL,width:"100%",value:this.currentDate(),locale:this.model.locale,cssClass:this.model.cssClass,minDate:this.model.minDate,maxDate:this.model.maxDate}),e=[],t=0;t<this.model.views.length;t++)switch(this.model.views[t]){case"day":e.push({text:this._getLocalizedLabels("Day"),value:"day"});break;case"week":e.push({text:this._getLocalizedLabels("Week"),value:"week"});break;case"workweek":e.push({text:this._getLocalizedLabels("WorkWeek"),value:"workweek"});break;case"month":e.push({text:this._getLocalizedLabels("Month"),value:"month"});break;case"customview":e.push({text:this._getLocalizedLabels("CustomView"),value:"customview"});break;case"agenda":e.push({text:this._getLocalizedLabels("Agenda"),value:"agenda"})}this._gotoWindow.find("#"+this._id+"show").ejDropDownList({enableRTL:this.model.enableRTL,dataSource:e,width:"100%",selectedItemIndex:0,cssClass:this.model.cssClass}),this._gotoWindow.find(".e-gotobutton").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"60px",cssClass:"e-flat"+this.model.cssClass})},_renderGotoWindow:function(){e("#"+this._id+"gotoWindow_wrapper")&&e("#"+this._id+"gotoWindow_wrapper").remove(),this._gotoWindow=t.buildTag("div.e-gotodialog#"+this._id+"gotoWindow");var i="<div><table width='100%' cellpadding='5'><tbody><tr><td>"+this._getLocalizedLabels("Date")+":</td><td><input id='"+this._id+"gotodate' type='text' value='' /></td></tr><tr><td>"+this._getLocalizedLabels("Showin")+":</td><td><input type='text' id='"+this._id+"show' /></td></tr></tbody></table>";i+="<div class='e-floatright'><table><tr><td><div><button id='"+this._id+"gotook' type='button' class='e-gotobutton e-gotoOk'>"+this._getLocalizedLabels("Done")+"</button></div></td><td><div><button id='"+this._id+"gotocancel' type='button' class='e-gotobutton e-gotoCancel'>"+this._getLocalizedLabels("Cancel")+"</button></div></td></tr></table></div></div>",this._on(this._gotoWindow,"click",".e-gotobutton",e.proxy(this._gotoOk,this)),this._gotoWindow.append(i),this.element.append(this._gotoWindow),this._renderGoto(),this._gotoWindow.ejDialog({width:300,cssClass:this.model.cssClass,showOnInit:!1,enableRTL:this.model.enableRTL,enableModal:!0,title:this._getLocalizedLabels("Gotodate"),enableResize:!1,allowKeyboardNavigation:!1,close:e.proxy(this._gotoCancel,this)}),e("#"+this._id+"gotoWindow_wrapper").addClass("e-scheduledialog").find(".e-titlebar").addClass("e-dialogheader")},_highlightCurrentTime:function(i){var n,s,r,a;if(t.preferredCulture(this.model.locale),i&&this.model.timeScale.enable&&!this._resWorkWeek&&!this._resCustomView){if(n=!1,s=0,"agenda"!==this.currentView())for(a=0;a<this._dateRender.length;a++)if(new Date(new Date(this._dateRender[a]).setHours(0,0,0,0)).getTime()===new Date((new Date).setHours(0,0,0,0)).getTime()){n=!0,s=a;break}if(r=this.element.find(".e-workcellstab tr").first().find("td"),"month"===this.currentView()||this._isCustomMonthView())if(n)if("vertical"==this.model.orientation&&"vertical"==this._customOrientation){var o=this.model.showWeekend?7:this.model.workWeek.length,l=Math.floor(s/o),d=Math.abs(s-l*o);for(this.model.group||(this.res1=["0"]),a=0;a<this.res1.length;a++)e(e(this.element.find(".e-workcellstab tr")[l]).children()[Math.floor(d)]).hasClass("e-othermonths")||e(e(this.element.find(".e-workcellstab tr")[l]).children()[Math.floor(d)]).addClass("e-currentdayhighlight"),d+=o}else this._renderHorizontalCurrentTime();else"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find(".e-monthcells").removeClass("e-currentdayhighlight"):this.element.find(".e-workcells").removeClass("e-currentdayhighlight");else if(n){var h=this,p="week"===this.currentView()?this.model.showWeekend?7:this.model.workWeek.length:"workweek"===this.currentView()?this.model.workWeek.length:"customview"==this.currentView()?this._dateRender.length:1,m=this.model.cellWidth?parseInt(this.model.cellWidth):this.element.find(".e-draggableworkarea")[0].offsetWidth/(p*this.res1.length);if((new Date).getHours()>=h.model.startHour&&(new Date).getHours()<=h.model.endHour)if("vertical"==h.model.orientation)for(h.element.find(".e-highlightcurrenttimeline").remove(),a=0;a<this.res1.length;a++)this.element.find(".e-draggableworkarea").append('<div id="'+this._id+a+'_HighlightCurrentTimeline" class="e-highlightcurrenttimeline"></div>'),t.isNullOrUndefined(r[s])||e("#"+this._id+a+"_HighlightCurrentTimeline").append('<div class="e-currenttime"></div>').append(t.buildTag("div.e-icon e-circle_01 e-timeidicatorcircle e-lefttimeindicator")).append(t.buildTag("div.e-icon e-circle_01 e-timeidicatorcircle e-righttimeindicator")).css("width",m+"px").css("left",r[s+p*a].offsetLeft+"px").find(".e-righttimeindicator").css("margin-left",m-3+"px");else this._renderHorizontalCurrentTime();function c(){var i,n,s,r;if("agenda"!=h.currentView()&&"month"!=h.currentView()&&!h._isCustomMonthView()){var a=h.element.find(".e-workcellstab tr").first().find("td"),o="week"===h.currentView()?h.model.showWeekend?7:h.model.workWeek.length:"workweek"===h.currentView()?h.model.workWeek.length:"customview"==h.currentView()?h._dateRender.length:1,l=new Date;if(l.setMinutes(l.getMinutes()),i=h._dateRender.indexOf(new Date(l).setHours(0,0,0,0)),l.getHours()>=h.model.startHour&&l.getHours()<=h.model.endHour)if("vertical"==h.model.orientation){for(h.element.find(".e-currentdayhighlight").removeClass("e-currentdayhighlight"),n=(60*(l.getHours()-h.model.startHour)+l.getMinutes())*h.element.find(".e-workcells")[0].offsetHeight*h.model.timeScale.minorSlotCount/h.model.timeScale.majorSlot,r=0;r<h.res1.length;r++)h.element.find("#"+h._id+r+"_HighlightCurrentTimeline").css("top",n-1),t.isNullOrUndefined(a[i])||h.element.find("#"+h._id+r+"_HighlightCurrentTimeline").css("left",a[i+o*r].offsetLeft),e(h.element.find(".e-dateheader").children()[i+o*r]).addClass("e-currentdayhighlight");for(s="12"==h._timeMode?t.format(new Date,"hh:mm tt",h.model.locale):t.format(new Date,"HH:mm",h.model.locale),r=0;r<h.res1.length;r++)h.element.find("#"+h._id+r+"_HighlightCurrentTimeline").find(".e-currenttime").html(s),"12"==h._timeMode&&h.element.find("#"+h._id+r+"_HighlightCurrentTimeline").find(".e-currenttime").addClass("e-timewidth")}else h._horizontalTimePosition(h,l)}}c(),t.isNullOrUndefined(this._intervalID)&&(this._intervalID=window.setInterval(c,6e4))}else window.clearInterval(this._intervalID),this._intervalID=null,this.element.find(".e-highlightcurrenttimeline").remove()}},_filter:function(){for(var t=[],i=e.extend(!0,[],this._processed),n=0;n<i.length;n++)new Date(i[n][this._appointmentSettings.endTime])>=this.model.minDate&&new Date(i[n][this._appointmentSettings.endTime])<=this.model.maxDate&&t.push(i[n]);return t},_getPreviousNextAppointment:function(){var e,t,i="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation&&this.model.showNextPrevMonth||"month"!=this.currentView()?this._dateRender:this.monthDays,n=[],s=[],r=this._filter();if("workweek"!=this.currentView())for(e=0;e<r.length;e++)new Date(r[e][this._appointmentSettings.startTime])<new Date(i[0])&&new Date(r[e][this._appointmentSettings.endTime])<new Date(i[0])?n.push(r[e]):new Date(r[e][this._appointmentSettings.startTime])>new Date(i[i.length-1])&&new Date(r[e][this._appointmentSettings.endTime])>new Date(i[i.length-1])&&s.push(r[e]);else for(e=0;e<r.length;e++)for(t=0;t<i.length;t++)new Date(r[e][this._appointmentSettings.startTime]).getDay()==new Date(i[t]).getDay()&&(new Date(r[e][this._appointmentSettings.startTime])<new Date(i[0])&&new Date(r[e][this._appointmentSettings.endTime])<new Date(i[0])?n.push(r[e]):new Date(r[e][this._appointmentSettings.startTime])>new Date(i[i.length-1])&&new Date(r[e][this._appointmentSettings.endTime])>new Date(i[i.length-1])&&s.push(r[e]));return{previous:n,next:s}},_nextPrevAppointment:function(e){var i,n;if(e&&!("msie"===this._browserInfo.name&&this._browserInfo.version<9)){var s=this.element.find("#"+this._id+"_scroller"),r=s.ejScroller("instance").isVScroll()?this.element.find("#"+this._id+"_scroller").find(".e-vscroll").outerWidth():0,a=t.buildTag("div.e-prevapp enable",this._getLocalizedLabels("PreviousAppointment"),{},{}),o=t.buildTag("div.e-nextapp enable",this._getLocalizedLabels("NextAppointment"),{},{});s.append(a).append(o),i=s.height()/2-75,n=this.element.find(".e-scrolltimecells").parent().outerWidth(),n=t.isNullOrUndefined(n)?0:n,this.model.enableRTL?(a.css({top:i+40+"px",transform:"rotate(-90deg)",right:n-61+"px"}),o.css({top:i+40+"px",transform:"rotate(90deg)",right:this.element.find(".e-workareadiv").width()-61-r-30+"px"})):(a.css({top:i+40+"px",transform:"rotate(90deg)",left:n-61+"px"}),o.css({top:i+40+"px",transform:"rotate(-90deg)",left:this.element.find(".e-workareadiv").width()-61-r-30+"px"}))}},_nextPrev:function(i){var n=this,s=this._getPreviousNextAppointment();e(i.currentTarget).hasClass("e-prevapp")?t.isNullOrUndefined(s)||(s.previous.sort(function(e,t){return new Date(t[n._appointmentSettings.startTime])-new Date(e[n._appointmentSettings.startTime])}),"customview"==this.currentView()&&(this._daterend=s.previous[0][this._appointmentSettings.startTime]),this._keyPressed=!0,this._navigateClick(this.currentDate(new Date(new Date(s.previous[0][this._appointmentSettings.startTime]).setHours(0,0,0,0))),"Previous")):e(i.currentTarget).hasClass("e-nextapp")&&(t.isNullOrUndefined(s)||(s.next.sort(function(e,t){return new Date(e[n._appointmentSettings.startTime])-new Date(t[n._appointmentSettings.startTime])}),"customview"==this.currentView()&&(this._daterend=s.next[0][this._appointmentSettings.startTime]),this._keyPressed=!0,this._navigateClick(this.currentDate(new Date(new Date(s.next[0][this._appointmentSettings.startTime]).setHours(0,0,0,0))),"Next")))},_nextPrevButton:function(){if(0!=this.getCurrentViewAppointments().length)this.element.find(".e-prevapp,.e-nextapp").css("display","none");else{"agenda"==this.currentView()&&this._refreshAppNavigation();var i=this._getPreviousNextAppointment();this.element.find(".e-prevapp,.e-nextapp").css("display","block"),0==i.previous.length?this.element.find(".e-prevapp").removeClass("enable").addClass("e-nextprevappdisable"):this.element.find(".e-prevapp").addClass("enable").removeClass("e-nextprevappdisable"),0==i.next.length?this.element.find(".e-nextapp").removeClass("enable").addClass("e-nextprevappdisable"):this.element.find(".e-nextapp").addClass("enable").removeClass("e-nextprevappdisable")}(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()&&this.element.find(".e-prevapp,.e-nextapp").hide()},_navigateView:function(i){var n,s,r,a,o,l,d,h=this.currentView(),p=e(i.target);if("agenda"==this.currentView())return!1;if("vertical"==this.model.orientation&&"vertical"==this._customOrientation){if(o=this.model.showWeekend?7:this.model.workWeek.length,"month"===this.currentView()||this._isCustomMonthView()){if(p.hasClass("e-monthheader")){if(-1==this.model.views.toString().toLowerCase().split(",").indexOf("day"))return!1;if(r=(a=p.parent().index())>o-1?a%o:a,s=new Date(this._dateRender[p.parent().parent().index()*o+r]),!(this.model.minDate<=s&&this.model.maxDate>=s))return!1;this.currentDate(s),n="day"}else if(p.hasClass("e-timecells")||p.hasClass("e-timecelldivs")){if(p=p.hasClass("e-timecells")?p:p.parent(),-1==this.model.views.toString().toLowerCase().split(",").indexOf("week"))return!1;if(s=new Date(this._dateRender[p.parent().index()*o]),!(this.model.minDate<=s&&this.model.maxDate>=s))return!1;this.currentDate(s),n="week"}}else if("week"===this.currentView()||"workweek"===this.currentView()||"customview"===this.currentView()&&this._renderDays<=7){if(l=p.hasClass("e-headercells")?p:p.parent().hasClass("e-headercells")?p.parent():p.closest(".e-headercells"),-1==this.model.views.toString().toLowerCase().split(",").indexOf("day")||!l.hasClass("e-headercells"))return!1;if(r=(a=l.index())>(d="workweek"===this.currentView()?this.model.workWeek.length:"customview"===this.currentView()?this._dateRender.length:o)-1?a%d:a,s=new Date(this._dateRender[r]),!(this.model.minDate<=s&&this.model.maxDate>=s))return!1;this.currentDate(new Date(s)),n="day"}this._navView=!0,"day"==h||t.isNullOrUndefined(n)||(this._viewChange(i,h,n),this._businessHourScroller())}else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&this._horizontalViewNavigation(i)},_appOverflowClick:function(i){var n,s;return-1!==this.model.views.toString().toLowerCase().split(",").indexOf("day")&&(!this._trigger("overflowButtonClick",{event:i,Datas:this._overflowApp})&&(t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("hide"),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?(n=this.model.showWeekend?7:this.model.workWeek.length,s=e(i.target).closest(".e-monthcells,.e-workcells").parent().index()*n+e(i.target).closest(".e-monthcells,.e-workcells").index()%n,this.currentDate(new Date(this._dateRender[s]))):(s=parseInt(e(i.target).attr("id").split("_")[e(i.target).attr("id").split("_").length-1]),this.currentDate("month"==this.currentView()||this._isCustomMonthView()?new Date(this.monthDays[s]):new Date(parseInt(e(i.target).attr("data-cellinfo"))))),this._navView=!0,void this._viewChange(i,this.currentView(),"day")))},_viewCalendar:function(){var i,n,s,r;(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()||((i=this.element.find("#"+this._id+"_navigator").data("ejDatePicker"))&&(i.show(),this.element.find("#"+this._id+"_navigator").ejDatePicker({value:new Date(this.currentDate())}),n=this.element.offset(),this.model.enableRTL?(s=n.left+this.element.width()-280)<0&&(s=0):(s=n.left+55,(r=e(document).scrollLeft()+e(window).width())-s<e("#e-"+this._id+"_navigator").width()&&(s=r-e("#e-"+this._id+"_navigator").width())),e("#e-"+this._id+"_navigator").css({top:n.top+47+"px",left:s+"px"})),this.element.find(".e-workcells").removeClass("e-selectedCell").removeClass("e-mousehover"),this.element.find(".e-appointment,.e-alldayappointment,.e-monthappointment").removeClass("e-selectedAppointment"))},_viewChange:function(i,n,s){this._viewchange=!0,this._renderedApp=[],s=t.isNullOrUndefined(s)?i.currentTarget.className.split("e-")[2].split(" ")[0]:s,(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"!==s&&(this.element.find(".e-datecommondiv").hasClass("e-datecursor")&&this.element.find(".e-datecommondiv").removeClass("e-datecursor"),this.element.find(".e-navigateprevious,.e-navigatenext").is(":visible")||this.element.find(".e-navigateprevious,.e-navigatenext").show(),this.element.find(".e-prevapp,.e-nextapp").is(":visible")||this.element.find(".e-prevapp,.e-nextapp").show());var r,a=!0;if(r={currentView:this.currentView(),currentDate:new Date(this.currentDate()),target:i},this._trigger("actionBegin",{data:r,requestType:"viewNavigate"}))return!1;if(!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),n!==s||!n&&!s){if(n=this.currentView(),this._navView?this.currentView(s):(a=this.currentView()!=i.currentTarget.className.split("e-")[2].split(" ")[0],this.currentView(e(i.currentTarget).hasClass("e-activeview")?this.currentView():i.currentTarget.className.split("e-")[2].split(" ")[0])),r={previousView:n,currentView:this.currentView(),currentDate:new Date(this.currentDate()),target:i,requestType:"viewNavigate"},this._trigger("navigation",r))return this.currentView(n),this._navView=!1,!1;n!==this.currentView()&&(this._customOrientation=this.model.orientation),a&&this._renderCurrentView("ViewChange")}r={previousView:n,currentView:this.currentView(),currentDate:new Date(this.currentDate()),target:i,requestType:"viewNavigate"},this._mediaQuery&&n!=this.currentView()&&this.element.find(".e-workareadiv,.e-navigate").addClass("navigate"),this._trigger("actionComplete",{data:r,requestType:"viewNavigate"})},_renderCurrentView:function(i){var n,s,r;if(t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("hide"),this.model.orientation==t.Schedule.Orientation.Horizontal&&this._grouping.length>1&&(s=this.element.find(".e-parentnodecategory"),n=this,s.each(function(t){e(this).hasClass("e-resourceexpand")&&n._expandCollapseState.push(t)})),this._resWorkWeek="vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showWeekend&&"workweek"==this.currentView()&&0!=this._tempResource.length&&!t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.workWeek),this._resCustomView="vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showWeekend&&"customview"==this.currentView()&&0!=this._tempResource.length&&!t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.renderDates),this.element.find(".e-commonviewbutton").blur().removeClass("e-activeview"),"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.element.find(".e-headerdaydisplay,.e-datedisplay,.e-headrealldaytable").children().remove(),this._getRenderDates(),this.wTR.children().remove(),this.aTR.children().remove(),this.element.find(".e-commonviewbutton.e-"+this.currentView()).addClass("e-activeview").attr("tabIndex",0).focus(),t.isNullOrUndefined(this._scheduleDrawer)||this._navSelected||this._scheduleDrawer.ejNavigationDrawer({listViewSettings:{selectedItemIndex:this.model.views.toString().toLowerCase().split(",").indexOf(this.currentView())+1}}),this._renderHeaderAllDayTemplate(),this._renderContentAreaTemplate(),this.model.showHeaderBar&&this.element.find("div.e-datedisplay").html(this._getCurrentDateHeaderValue()),this._renderCommon(),t.isNullOrUndefined(this.dataSource())||("ScheduleResize"!=i?this.model.enableLoadOnDemand?this._bindAppointmentsData(i):(this._dataProcessing(this._currentAppointmentData),this._renderAppointmentAll()):this._renderAppointmentAll()),this.model.orientation==t.Schedule.Orientation.Horizontal&&this._grouping.length>1){for(s=this.element.find(".e-parentnodecategory"),r=0;r<this._expandCollapseState.length;r++)s.eq(this._expandCollapseState[r]).click();"agenda"!=this.currentView()&&(this._expandCollapseState=[])}this.model.showAppointmentNavigator&&this._nextPrevButton(),this.model.blockoutSettings.enable&&this._renderBlockAppointments(),this._navView=!1},_renderHeaderDays:function(){var i,n,s,r,a,o,l,d,h;if(this.dateRender=[],i=e.extend(!0,[],this._getRenderDates()),this.res1=t.isNullOrUndefined(this.model.group)?[0]:this.res1,!this._resWorkWeek&&!this._resCustomView)for(l=0;l<this.res1.length;l++)for(n=0;n<i.length;n++)this.dateRender.push(new Date(i[n]));if(this.model.showHeaderBar&&this.element.find("div.e-datedisplay").html(this._getCurrentDateHeaderValue()),this.currentDate()<this.model.minDate&&this.currentDate(this.model.minDate),this.currentDate()>this.model.maxDate&&this.currentDate(this.model.maxDate),"vertical"==this.model.orientation&&"vertical"==this._customOrientation)if(this.element.find(".e-currentdayhighlight").removeClass("e-currentdayhighlight"),"month"===this.currentView()||this._isCustomMonthView())this._renderMonthTimeCells();else{if(t.isNullOrUndefined(this.model.dateHeaderTemplateId))for(l=0;l<this.dateRender.length;l++)s="day"===this.currentView()&&0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?this._dayFullNames[new Date(this.dateRender[l]).getDay()]:this._dayShortNames[new Date(this.dateRender[l]).getDay()],r="day"===this.currentView()&&0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?t.format(new Date(this.dateRender[l]),this._pattern.D,this.model.locale):s+" "+new Date(this.dateRender[l]).getDate(),this.element.find(".e-headerdaydisplay").eq(l).html(r),new Date(new Date(this.dateRender[l]).setHours(0,0,0,0)).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()&&this.element.find("td.e-headercells").eq(l).addClass("e-currentdayhighlight");else{if(a=[],o=this._getUserDateheaderTemplate(),0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources)for(l=0;l<this.res1.length;l++)a=e.merge(a,o);else a=e.merge(a,o);for(l=0;l<this.dateRender.length;l++)this.element.find(".e-headerdaydisplay").eq(l).html(a[l].currentDay),new Date(new Date(this.dateRender[l]).setHours(0,0,0,0)).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()&&this.element.find("td.e-headercells").eq(l).addClass("e-currentdayhighlight")}if(this.element.find(".e-alldaycells,.e-leftindent").addClass("e-alldaycellsheight"),this.element.find(".e-alldaycells").first().css(this.model.enableRTL?"border-right":"border-left","none"),!t.isNullOrUndefined(this.model.allDayCellsTemplateId)&&this.model.timeScale.enable){for(d=this._getUserAllDayCellsTemplate(),h=0;h<d.length;h++)this.element.find(".e-alldaycells").eq(h).html(d[h]);this.element.find(".e-leftindent").height(this.element.find(".e-alldaycells").height())}this.element.find(".e-headercells").addClass("e-dateheaderselect")}else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&this._renderHorizontalHeaderDays(this._culture)},_renderMonthTimeCells:function(){var e,i,n,s,r,a,o,l,d=0,h=this._dateRender,p=0,m=this.model.showWeekend?7:this.model.workWeek.length,c=t.isNullOrUndefined(this.model.group)?m:this.res1.length*m,u=!(0==this._tempResource.length||!t.scheduleFeatures.resources);for(c=u?this._isCustomMonthView()&&this._oneWeek?this.res1.length*this._dateRender.length:this.res1.length*m:t.isNullOrUndefined(this.model.group)?m:this._isCustomMonthView()&&this._oneWeek?this.res1.length*this._dateRender.length:7*this.res1.length,e=!!(u&&this._isCustomMonthView()&&this._oneWeek),i=this.element.find("div.e-monthheader"),n=0;n<h.length;n++){for(s=p;s<c;s=e?s+this._dateRender.length:s+m)r=1==new Date(this._dateRender[n]).getDate()?t.format(new Date(this._dateRender[n]),"MMM",this.model.locale)+" "+new Date(this._dateRender[n]).getDate():t.format(new Date(this._dateRender[n]),"dd",this.model.locale),i.eq(s).html(r),"customview"!==this.currentView()&&(new Date(h[n]).getMonth()!==new Date(this.currentDate()).getMonth()?this.model.showNextPrevMonth?i.eq(s).addClass("e-monthdateshighlight").closest(".e-monthcells").removeClass("e-othermonths").children().show():i.eq(s).addClass("e-monthdateshighlight").closest(".e-monthcells").addClass("e-othermonths").children().hide():i.eq(s).removeClass("e-monthdateshighlight").closest(".e-monthcells").removeClass("e-othermonths").children().show()),new Date(h[n]).getTime()==new Date((new Date).setHours(0,0,0,0)).getTime()&&(this.element.find("td.e-monthcells").eq(s).hasClass("e-othermonths")||this.element.find("td.e-monthcells").eq(s).addClass("e-currentdayhighlight"));p++,(n+1)%m==0&&(p=c,c+=(t.isNullOrUndefined(this.model.group)?1:this.res1.length)*m,this.model.showNextPrevMonth||"customview"==this.currentView()?(a=t.format(new Date(h[n-(m-1)]),"MMM dd",this.model.locale),o=t.format(new Date(h[n]),"MMM dd",this.model.locale)):(l=new Date(this.currentDate()),a=n==m-1?t.format(new Date(l.getFullYear(),l.getMonth(),1),"MMM dd",this.model.locale):t.format(new Date(h[n-(m-1)]),"MMM dd",this.model.locale),o=n==h.length-1?t.format(new Date(l.getFullYear(),l.getMonth()+1,0),"MMM dd",this.model.locale):t.format(new Date(h[n]),"MMM dd",this.model.locale)),this.model.timeScale.enable&&this.element.find(".e-timecelldivs").eq(d).html(a+" - "+o),d++)}this.model.showNextPrevMonth||"month"!=this.currentView()||this._refreshOtherMonthsBorder(),this.element.find(".e-timecells").addClass("e-dateheaderselect"),this.element.find(".e-monthcells, .e-timecells").outerHeight(this.model.cellHeight?parseInt(this.model.cellHeight)+1:parseInt(this.element.find(".e-draggableworkarea").height()/this.element.find(".e-draggableworkarea tr").length))},_refreshOtherMonthsBorder:function(){for(var e,t,i,n=this.model.enableRTL?"e-borderright":"e-borderleft",s=this.element.find(".e-workcellstab tr").first().find(".e-othermonths").length,r=s/this.res1.length,a=r;a<s;a+=r)this.element.find(".e-workcellstab tr").first().find(".e-othermonths").eq(a).addClass(n);for(t=(e=this.element.find(".e-workcellstab tr").last().find(".e-othermonths").length)/this.res1.length,i=0;i<e;i+=t)this.element.find(".e-workcellstab tr").last().find(".e-othermonths").eq(i).addClass(n)},_nextPrevDate:function(e){var t,i,n,s,r=new Date(new Date(this.currentDate()).setHours(0,0,0,0)),a="day"===this.currentView()||"agenda"===this.currentView()?1:"customview"===this.currentView()?this._dateRender.length:7;return"month"===this.currentView()?(i="navigateprevious"==e?new Date(r.getFullYear(),r.getMonth()-1,r.getDate()):new Date(r.getFullYear(),r.getMonth()+1,r.getDate()),n="navigateprevious"==e?new Date(r.getFullYear(),r.getMonth()-1,1):new Date(r.getFullYear(),r.getMonth()+1,1),t=i.getMonth()==n.getMonth()?new Date(i):new Date(n._currentMonthDates().end)):"customview"===this.currentView()?(this._daterend=this._dateRender,this._dateNavigation=!0,r=this.model.showWeekend?new Date(this._dateRender[0]):new Date(this._renderStart),a=this.model.showWeekend?a:this._isCustomMonthView()?this._numDays:this._renderDays,t="navigateprevious"==e?new Date(r.getTime()-864e5*a):new Date(r.getTime()+864e5*a)):"day"!=this.currentView()&&"agenda"!==this.currentView()||this.model.showWeekend?t="navigateprevious"==e?new Date(r.getTime()-864e5*a):new Date(r.getTime()+864e5*a):(s="navigateprevious"==e?new Date(r.getTime()-864e5):new Date(r.getTime()+864e5),a=this._getPrevNextDateCount(s,"navigateprevious"==e?"previous":"next")+1,r="navigateprevious"==e?new Date(r.getTime()-864e5*a):new Date(r.getTime()+864e5*a),t=new Date(r)),new Date(t.getFullYear(),t.getMonth(),t.getDate())},_navigateClick:function(i,n){var s;this._viewchange=!0;var r=n,a=new Date(this.currentDate()),o={currentView:this.currentView(),currentDate:new Date(this.currentDate()),target:i};if(this._trigger("actionBegin",{data:o,requestType:"dateNavigate"}))return!1;if(t.isNullOrUndefined(i)||t.isNullOrUndefined(i.value)||(this._keyPressed=!0,this.currentDate(t.parseDate(i.value,this._pattern.d))),null!=i&&!this._setCurrentDate){if(e(i.currentTarget).hasClass("e-disable"))return!1;e(i.currentTarget).hasClass("e-navigateprevious")?(this._keyPressed=!0,this.currentDate(this._nextPrevDate("navigateprevious")),this.element.find(".e-navigateprevious").attr("tabIndex",0).focus(),r="Previous"):e(i.currentTarget).hasClass("e-navigatenext")&&(this._keyPressed=!0,this.currentDate(this._nextPrevDate("navigatenext")),this.element.find(".e-navigatenext").attr("tabIndex",0).focus(),r="Next")}if(null!=i&&(e(i.currentTarget).hasClass("e-navigateprevious")||e(i.currentTarget).hasClass("e-navigatenext")||"select"==i.type)&&(o={previousDate:a,currentDate:new Date(this.currentDate()),currentView:this.currentView(),target:i,requestType:"dateNavigate"}),this._trigger("navigation",o))return this.currentDate(new Date(a)),!1;this.element.find(".e-workcells,.e-alldaycells,.e-monthcells").removeClass("e-selectedCell"),this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),this.element.find(".e-appsoverflow").remove(),this.element.find(".e-monthcells").removeClass("e-monthcurrenttime"),this.model.showCurrentTimeIndicator&&this.element.find(".e-highlightcurrenttimeline").remove(),!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),t.isNullOrUndefined(this._scheduleDrawer)||this._scheduleDrawer.ejNavigationDrawer("close"),"month"===this.currentView()||"agenda"===this.currentView()||this._isCustomMonthView()||"customview"===this.currentView()&&!this.model.showWeekend||"customview"===this.currentView()&&"horizontal"===this.model.orientation||!this.model.timeScale.enable||!t.isNullOrUndefined(this.model.workCellsTemplateId)?this._renderCurrentView(r):(this._renderHeaderDays(),t.isNullOrUndefined(this.model.queryCellInfo)||(this._renderQueryCellInfo("renderHeaderAllDayTemplate"),this._renderQueryCellInfo("renderContentAreaTemplate"),this._renderQueryCellInfo("emptycell")),this.model.showOverflowButton||"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||(this._horizontalRender(),this._reRenderScroller()),t.isNullOrUndefined(this.dataSource())||(this.model.enableLoadOnDemand?this._bindAppointmentsData(r):(this._dataProcessing(this._currentAppointmentData),this._renderAppointmentAll())),this.model.workHours.highlight?this._highlightBusinessHours():this.element.find(".e-workcells").removeClass("e-businesshighlightworkcells"),this._dragWeek||this._businessHourScroller(),this._highlightCurrentTime(this.model.showCurrentTimeIndicator),this.model.blockoutSettings.enable&&this._renderBlockAppointments()),this._validateMinMaxDate(),!t.isNullOrUndefined(this.oldDate)&&""!=this.oldDate&&this._setCurrentDate&&(this.currentDate(new Date(this.oldDate)),this.oldDate=""),this._setCurrentDate=!1,this._mediaQuery&&!t.isNullOrUndefined(i)&&(s=e(i.currentTarget).hasClass("e-navigateprevious")?this.element.width():e(i.currentTarget).hasClass("e-navigatenext")||"select"==i.type?-this.element.width():0,this.element.find(".e-headeralldaydiv,.e-draggableworkarea,.e-vscroll,.e-emptyscrolltd").toggle(),this.model.enableRTL?this.element.find(".e-headeralldaydiv,.e-draggableworkarea,.e-vscroll").css({marginRight:-s,marginLeft:s}).toggle().animate({marginLeft:0,marginRight:0},500,"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&1==this.element.find(".e-vscroll").length?e.proxy(this._animateScroll,this):""):this.element.find(".e-headeralldaydiv,.e-draggableworkarea,.e-vscroll").css({marginLeft:-s,marginRight:s}).toggle().animate({marginLeft:0,marginRight:0},500,"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&1==this.element.find(".e-vscroll").length?e.proxy(this._animateScroll,this):"")),this._trigger("actionComplete",{data:o,requestType:"dateNavigate"})},_animateScroll:function(){this.element.find(".e-emptyscrolltd").toggle(),this.element.find(".e-headeralldaydiv,.e-draggableworkarea,.e-vscroll").css({marginRight:0,marginLeft:0}),("webkit"==this._browserInfo.name||"msie"==this._browserInfo.name)&&(highScrol=0!=this.element.find(".e-businesshighlightworkcells").length?this.element.find(".e-businesshighlightworkcells").first().parent()[0].rowIndex*e(".e-workcells").height():0,e("#"+this._id+"_scroller").ejScroller({scrollTop:highScrol+1}),this.element.find(".e-scrolltimecells").css("top",-(highScrol+1)+"px"))},_validateMinMaxDate:function(){this.element.find(".e-navigateprevious,.e-navigatenext").removeClass("e-disable");var i="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?this._dateRender:this.monthDays,n=new Date(i[0]),s=new Date(i[i.length-1]);"workweek"==this.currentView()&&(n=new Date(n.setDate(n.getDate()-1)),s=new Date(s.setDate(s.getDate()+1))),n<=this.model.minDate?this.element.find(".e-navigateprevious").addClass("e-disable"):this.element.find(".e-navigateprevious").removeClass("e-disable"),s>=this.model.maxDate?this.element.find(".e-navigatenext").addClass("e-disable"):this.element.find(".e-navigatenext").removeClass("e-disable"),(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()&&this.element.find(".e-navigateprevious,.e-navigatenext").hide()},_onScheduleResize:function(){var i,n,s,r,a,o,l,d,h,p,m,c;if(t.isNullOrUndefined(this._scheduleDrawer)||(t.isNullOrUndefined(this._scheduleDrawer.data("ejNavigationDrawer"))?(e(this._scheduleDrawer).remove(),this._scheduleDrawer=null):this._scheduleDrawer.ejNavigationDrawer("close")),this._mediaQuery&&t.isMobile()){if(t.isNullOrUndefined(this._recurEditWindow)||this._recurEditWindow.ejDialog("refresh"),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.ejDialog("refresh"),window.orientation==this._screenOrientation)return!1;this._screenOrientation=window.orientation}if(!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),m=this._mediaQuery,i="number"==typeof innerWidth&&window.innerWidth>document.documentElement.clientWidth,this._mediaQuery=!("msie"==this._browserInfo.name&&parseInt(this._browserInfo.version,10)<=8)&&((document.documentElement.clientWidth+(i?17:0)<361||t.isMobile())&&this.model.isResponsive),this._mediaQuery?this.element.addClass("e-scheduleresponsive"):this.element.removeClass("e-scheduleresponsive"),n=this.element.find("div#"+this._id+"_scroller").data("ejScroller"),"agenda"!=this.currentView()){if(s=n.isVScroll()?this.element.find("div#"+this._id+"_scroller").find(".e-vscroll").width():0,this.element.find(".e-nextapp").css("left",this.element.width()-s-90+"px"),this.model.enableRTL&&this.element.find(".e-nextapp").css("left","-45px"),this.model.enableRTL&&this.element.find(".e-prevapp").css("left",this.element.width()-this.element.find(".e-scrolltimecells").width()-89+"px"),"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||(this.element.find(".resemptytd").width(this.element.find(".e-horizontalrestd").width()<100?5:this.element.find(".e-horizontalrestd").width()>=100&&this.element.find(".e-horizontalrestd").width()<=150?10:25),this.element.find(".e-horizontalresheader").width(this._mediaQuery?"50px":"100%"),this.element.find(".e-parentnodecategory").width(this._mediaQuery?"12px":"20px")),r="vertical"===this.model.orientation&&"vertical"===this._customOrientation?(i&&this._mediaQuery?this.element.outerWidth()+17:this.element.outerWidth())-(this._mediaQuery&&("month"==this.currentView()||this._isCustomMonthView())?1:this.element.find(".e-scrolltimecells").length>0?this.element.find(".e-scrolltimecells").parent().outerWidth():0):"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?this.element.width():this.element.width()-this.element.find(".e-resourceheadertable").width(),n.model.width=parseInt(r)-2,n.model.height=this.scHeight-1-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top),n.refresh(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation)this._renderHoriVerticalScroll(),this.element.find(".e-datecommondiv").parent().width(parseInt(this.element.width())-2),this.element.find(".e-headrealldaytable").css("left",-this.element.find(".e-draggableworkarea").scrollLeft()+"px"),this.element.find(".e-upicon, .e-downicon").children().width(this.element.find(".e-workcells").width()),this.element.find(".e-headeralldaydiv,.e-draggableworkarea,.e-emptyscrolltd").css("margin-left","0px"),this.element.find(".e-scrolltimecells").css("top",-this.element.find(".e-draggableworkarea").scrollTop()+"px");else if(!this._isCustomMonthView()||"month"!=this.currentView()||"day"!=this.currentView()||!this.model.enableRTL||this.model.timeScale.enable){for(this.element.find(".e-headeralldaydiv").width(this.element.find(".e-draggableworkarea").width()),this.element.find(".e-horizontaltimecells").find("table tr").eq(2).css("left",-this.element.find(".e-draggableworkarea").scrollLeft()+"px"),a=this.element.find(".e-horizontalalternatetd, .e-horizontaltimetd").children(),0,h=0;h<a.length;h++)this.element.find(".e-horizontalalternatetd, .e-horizontaltimetd").eq(h).width(this.element.find(".e-workcells").eq(h).width()),this.element.find(".e-workcells").eq(h).width();this.element.find(".e-horizontaltabletimecell").width(this.element.find(".e-workcellstab").width()),this._horizontalRender(),this.model.showOverflowButton||this._renderAppointmentAll()}"month"==this.currentView()||this._isCustomMonthView()||"vertical"!=this.model.orientation||"vertical"!=this._customOrientation?(this._isCustomMonthView()||"month"==this.currentView()||"day"==this.currentView()||this.model.enableRTL||!this.model.timeScale.enable)&&this._renderCurrentView("ScheduleResize"):this.model.enableRTL&&(this.model.cellWidth||this.model.cellHeight)?this._renderCurrentView("ScheduleResize"):(this.model.showAllDayRow&&this.model.timeScale.enable&&this.element.find("div.e-alldayappointment").remove()&&this._renderAllDayAppointments(),this.model.timeScale.enable||(this.element.find("div.e-monthappointment").remove(),this._currentViewAppointments=this.getCurrentViewAppointments(),this._renderMonthAppointment()),this._bindAppointmentAction()),this.model.showCurrentTimeIndicator&&this.element.find(".e-highlightcurrenttimeline").remove(),this._highlightCurrentTime(this.model.showCurrentTimeIndicator)}else n.model.width=parseInt(this.element.width())-2,n.model.height=this.scHeight-1-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top),n.refresh(),o=e("div#"+this._id+"_scroller"),this.element.find(".e-headeralldaydiv").width(this.element.find(".e-draggableworkarea").width()),this.element.find(".e-datecommondiv").parent().width(parseInt(this.element.width())-2),o.ejScroller("isVScroll")?this.element.find(".e-emptyscrolltd").show()&&this.element.find(".e-draggableworkarea").height(this.element.find(".e-draggableworkarea").height()+1):this.element.find(".e-emptyscrolltd").hide();if((this._mediaQuery||this.element.width()<600)&&!e("#"+this._id+"navDrawer").hasClass("e-scheduledrawer")&&this._renderNavigationDrawer(),!(l=this._mediaQuery!=m)&&(this.element.width()<600&&this.hTR.find(".e-mobileNavigation").length<1||this.element.width()>600&&this.hTR.find("table.e-viewstable").length<1)&&(this._reRenderHeaderBar(),this._on(this.element,"click","#"+this._id+"navDrawerIcon",e.proxy(this._drawerOpen,this))),l){if("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)for(d=this._dateRender,h=0;h<d.length;h++)p=!this._mediaQuery||"week"!=this.currentView()&&"workweek"!=this.currentView()?"day"===this.currentView()&&t.isNullOrUndefined(this._tempResource)&&t.isNullOrUndefined(this.model.group)?this._dayFullNames[new Date(d[h]).getDay()]:this._dayShortNames[new Date(d[h]).getDay()]:this._dayNames[new Date(d[h]).getDay()].split("")[0],m=!this._mediaQuery||"week"!=this.currentView()&&"workweek"!=this.currentView()?"day"===this.currentView()?t.isNullOrUndefined(this._tempResource)&&t.isNullOrUndefined(this.model.group)?p+" "+t.format(new Date(d[h]),"dd MMMM yyyy",this.model.locale):p+" "+t.format(new Date(d[h]),"dd MMM yy",this.model.locale):p+" "+new Date(d[h]).getDate():p+parseInt(t.format(new Date(d[h]),"dd",this.model.locale)),0!=this.element.find(".e-headerdaydisplay,.e-horizontalheaderdiv").length&&(this.element.find(".e-headerdaydisplay,.e-horizontalheaderdiv")[h].innerHTML=m);this.model.showAppointmentNavigator=l&&!this._mediaQuery,this.model.showAppointmentNavigator?this._nextPrevAppointment(this.model.showAppointmentNavigator):this.element.find(".e-prevapp,.e-nextapp").remove(),this.model.showHeaderBar&&this._reRenderHeaderBar(),this.element.find(".e-leftindenttable").width(this.element.find(".e-workleftindent").width()),"agenda"!=this.currentView()&&this.element.find(".e-ampmdisplay").outerHeight(this.element.find(".e-workcells, .e-monthcells")[0].offsetHeight),this._businessHourScroller(),this.model.showQuickWindow=!this._mediaQuery&&this._quickWindow,this._mediaQuery&&(this.model.allowInline=!1),t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._renderQuickWindow(),this._refreshAppointmentWindow(),t.isNullOrUndefined(this._alertWindow)||this._alertWindow.ejDialog("close"),t.isNullOrUndefined(this._recurEditWindow)||(this._recurEditWindow.ejDialog("close"),this._recurEditWindow.ejDialog({width:this._mediaQuery?"90%":360})),this._mediaQuery&&this._phoneChanges(),this._renderAppointmentAll(),this.model.blockoutSettings.enable&&this._renderBlockAppointments(),this._mediaQuery?(this._off(this.element,t.eventType.mouseDown,"td.e-workcells,td.e-monthcells,td.e-alldaycells"),this._off(this.element,"keydown click","td.e-workcells,td.e-monthcells,td.e-alldaycells"),this._on(this.element,"click","#"+this._id+"navDrawerIcon",e.proxy(this._drawerOpen,this))):(this._on(this.element,t.eventType.mouseDown,"td.e-workcells,td.e-monthcells,td.e-alldaycells",e.proxy(this._mouseButtonClick,this)),this._on(this.element,"keydown click","td.e-workcells,td.e-monthcells,td.e-alldaycells",e.proxy(this._shiftSelection,this)),this.element.width()>600&&this._off(this.element,"click","#"+this._id+"navDrawerIcon")),this._mediaQuery||t.isTouchDevice()?this._on(this.element,"swipeleft swiperight",".e-contentarearow .e-workcellstab,.e-agendacellstab",e.proxy(this._touchSchedule,this)):this._off(this.element,"swipeleft swiperight",".e-contentarearow .e-workcellstab,.e-agendacellstab"),this._on(this.element,t.isMobile()?"click":"dblclick",".e-workcells,.e-alldaycells,.e-alldayappointment,.e-monthcells",e.proxy(this._appointmentWindow,this)),this._mediaQuery||t.isMobile()?this._on(this.element,"tap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment",e.proxy(this._appointmentWindow,this)):this._off(this.element,"tap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment"),c=e("#"+this._id+"AppointmentAddEditWindow_wrapper,#"+this._id+"RecurrenceEdit_wrapper,#"+this._id+"navDrawer,#"+this._id+"alertWindow_wrapper"),this._mediaQuery?c.addClass("e-scheduleresponsive"):c.removeClass("e-scheduleresponsive"),this._mediaQuery&&this.res1.length>1&&this.element.addClass("e-resources")}(this._mediaQuery||this.element.width()<600)&&this.element.find(".e-mobileNavigation").css(this.model.enableRTL?"right":"left",this.element.outerWidth()-36),(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()&&(this._addMonthNameRow(),this.element.find(".e-datecommondiv").addClass("e-datecursor"),this.element.find(".e-navigateprevious,.e-navigatenext").hide()),this._trigger("actionComplete",{requestType:"scheduleResize"})},_reRenderHeaderBar:function(){var t=this.element.find(".e-scheduleheader");t.empty(),this._renderHeaderBar(t),this.element.find("#"+this._id+"_navigator").ejDatePicker({enableRTL:this.model.enableRTL,buttonText:this._getLocalizedLabels("Today"),select:e.proxy(this._onselect,this),locale:this.model.locale,cssClass:this.model.cssClass,minDate:this.model.minDate,maxDate:this.model.maxDate}),this.element.find(".e-datecommondiv").find(".e-datewidget").css("display","none"),this.element.find(".e-commonviewbutton.e-"+this.currentView()).addClass("e-activeview")},_renderTemplates:function(){this.workcellTemp=e.templates("<table class='e-table e-workcellstab' style='width:100%;height:100%;'><tbody >{{for cellrows  ~timesc=timeScale ~cols1=cols1 ~userTemp=userTemplate ~userHtml=userHtml}}<tr>{{for ~index=#index ~cwidth=cwidth ~cheight=cheight ~cols1 ~value=#getIndex()}}{{if ((~index+1) % ~timesc) == 0 }}<td class='e-workcells' style='width:{{:~cwidth}};height:{{:~cheight}};'>{{else}}<td class='e-workcells e-alternatecells' style='width:{{:~cwidth}};height:{{:~cheight}};'>{{/if}}{{if ~userTemp == true}}{{:~userHtml[~value][#getIndex()]}}{{/if}}</td>{{/for}}</tr>{{/for}}</tbody></table>"),this.addResWorkcellTemp=e.templates("{{for cols1 ~index=#index ~timesc=timeScale ~userTemp=userTemplate ~userHtml=userHtml ~cwidth=cwidth ~cheight=cheight  ~value=#getIndex() ~index=value ~wIndex=wIndex}}{{if ((~index) % ~timesc) == 0 }}<td class='e-workcells' style='width:{{:~cwidth}};height:{{:~cheight}};'>{{else}}<td class='e-workcells e-alternatecells' style='width:{{:~cwidth}};height:{{:~cheight}};'>{{/if}}{{if ~userTemp == true}}{{:~userHtml[~wIndex][#getIndex()]}}{{/if}}</td>{{/for}}"),this.addResMonthcellTemp=e.templates("{{for cols1 ~cwidth=cwidth ~cheight=cheight ~userTemp=userTemplate ~userHtml=userHtml ~tenable=tenable ~cview=cview ~value=#getIndex()}}<td class='e-monthcells' style='width:{{:~cwidth}};height:{{:~cheight}};'><div class='e-monthheader' {{if ~tenable == false && ~cview == true}}style='display:none'{{/if}}></div>{{if ~userTemp == true}}{{:~userHtml[~value][#getIndex()]}}{{/if}}</td>{{/for}}"),this.monthcellTemp=e.templates("<table class='e-table e-workcellstab' style='width:100%;height:100%;'><tbody>{{for cellrows ~cols1=cols1 ~userTemp=userTemplate ~userHtml=userHtml ~tenable=tenable ~cview=cview}}<tr>{{for ~cwidth=cwidth ~cheight=cheight ~cols1 ~value=#getIndex()}}<td class='e-monthcells' style='width:{{:~cwidth}};height:{{:~cheight}};'><div class='e-monthheader' {{if ~tenable == false && ~cview == true}}style='display:none'{{/if}}></div>{{if ~userTemp == true}}{{:~userHtml[~value][#getIndex()]}}{{/if}}</td>{{/for}}</tr>{{/for}}</tbody></table>"),this.timeCellTemplate=e.templates("<div class='e-scrolltimecells' style='width:auto;height:100%;'><table class='e-table e-timecelltable' style='width:100%;height:100%;'><tbody>{{for timerows ~timesc=timeScale ~cols1=cols1 ~view1=viewclass ~userTemplateId = userTemplateId ~timeValue1=timeValue1 ~template=template}}<tr>{{for ~name=time ~id=id ~view=~view1 ~index=#index }}{{if ~view == 0}}{{if ~userTemplateId==true}}<td class='e-timecells'>{{for ~cols1[~index] }}{{if (#index+1)% ~timesc ==0}}<div class='e-timecelldivs' style='height: 20px'>{{:~timeValue1[~index][#getIndex()]}}</div>{{else}}<div class='e-timecelldivs' style='height: 21px'>{{:~timeValue1[~index][#getIndex()]}}</div>{{/if}}{{/for}}</td>{{else}}<td class='e-timecells'><div class='e-timecelldivs'>{{if ~template==true}}{{:~name}}{{else}}{{:~name.slice(0,2)}}{{/if}}</div></td>{{/if}}<td class='e-timecells' rowspan='1'>{{for ~cols1[~index] }}{{if (#index+1)% ~timesc ==0}}{{if ~timesc==1}}{{:~name.slice(3,5)}}{{/if}}{{else}} {{if (#getIndex())== 0}}<div id='{{:~id}}' class='e-ampmdisplay e-ampmstyle e-idAmpmstyle'> {{if ~template ==true || ~userTemplateId==true }}{{else}}{{:~name.slice(3,6)}}{{/if}}</div>{{else}}<div class='e-ampmdisplay e-ampmstyle'></div>{{/if}} {{/if}}{{/for}}</td>{{else}}<td class='e-timecells'><div class='e-timecelldivs'></div></td>{{/if}}{{/for}}</tr>{{/for}}</tbody></table></div>"),this.userTimeCellTemplate=e.templates("<div class='e-scrolltimecells'><table class='e-table' style='width:70px'><tbody>{{for timerows ~timesc=timeScale ~cols1=cols1 ~view1=viewclass  ~userTemplateId = userTemplateId ~timeValue1=timeValue1 ~template=template ~cheight = cheight}}<tr height='21px'>{{if ~timesc == 1}}<th class='e-timecells' rowspan='1'>{{else}}<th class='' rowspan='1'>{{/if}}{{:~timeValue1[#getIndex()][0]}}</th></tr>{{for ~cols1 ~name=time ~id=id ~view=~view1 ~index=#index ~timeSc=~timesc}}{{if  (#getIndex()+2)% ~timeSc ==0}}<tr height='21px'><th class='e-timecells' style='text-align:left' rowspan='1'>{{:~timeValue1[~index][#getIndex()+1]}}</th></tr> {{else}}<tr height='21px'>{{if ~timesc == 1}}<th class='e-timecells' rowspan='1'>{{else}}<th class='' rowspan='1'>{{/if}}{{:~timeValue1[~index][#getIndex()+1]}}</th></tr>{{/if}}{{/for}}{{/for}}</tbody></table></div>"),this.headTemplate=e.templates("{{for cols ~view=view ~colspan=colspan}}{{if cellToday == 'e-headerToday'}}<td class='e-headercells e-currentdayhighlight' colspan='{{:~colspan}}'>{{else}}<td class='e-headercells' colspan='{{:~colspan}}'>{{/if}}<div class='e-dateheadercell' title='{{:currentDay}}'> <span class='e-headerdaydisplay'>{{:currentDay}}</span></div></td>{{/for}}"),this.alldayTemp=e.templates("{{for cols ~colspan=colspan ~userTemp=userTemp ~allDayHtml=userHtml}}<td class='e-alldaycells e-alldaycellsheight' colspan='{{:~colspan}}'>{{if ~userTemp==true}}{{:~allDayHtml[#getIndex()]}}{{/if}}</td>{{/for}}"),this.leftIndent=e.templates("<table class='e-table e-leftindenttable' style='height:100%'><tbody> {{for trs ~tdClass=tdClass ~divClass=divClass}} <tr>{{for ~tdClass=tdClass ~divClass=divClass}} <td class='{{:~tdClass}} {{if ~tdClass == 'e-leftindent' }}e-alldaycellsheight{{else}}e-headercellsheight{{/if}}'> <div class='{{:~divClass}}'></div></td>{{/for}}</tr>{{/for}}</tbody></table>"),this.agendaheadTemplate=e.templates("<tr>{{for cols}}<td class='e-headercells {{:className}} {{if (#index==0)}}e-firstcolumn{{/if}}'><div class='e-textwrapper'><b>{{:headertext}}</b></div></td>{{/for}}</tr>"),this.agendacellTemp=e.templates("<table class='e-table e-agendacellstab' style='width:100%'><tbody >{{for cols}}<tr>{{if resGroup}}{{for resGroup}}<td class='e-agendacells {{:resId}} e-resourcecolumn {{if (#index==0)}}e-firstcolumn{{/if}}'><div class='e-textwrapper'>{{:text}}</div></td>{{/for}}{{/if}}{{if resChild}}<td rowspan={{:resRowSpan}} class='e-agendacells e-resourcecolumn {{if (resGroup.length==0)}}e-firstcolumn{{/if}}'><div class='e-textwrapper'>{{if userResourceId == false}}{{:resName}}{{else}}{{:userResourceHtml}}{{/if}}</div></td>{{/if}}{{if dayChild}}<td rowspan={{:dayRowSpan}} class='e-agendacells e-datecolumn {{if (resGroup.length != 0) }}{{else (resName =='')}}e-firstcolumn{{/if}}'><div class='e-textwrapper'>{{if userDateId == false}}{{:date}}{{else}}{{:userDateHtml}}{{/if}}</div></td>{{/if}}<td class='e-agendacells e-timecolumn {{if dayBorderBottom==false}}e-alternatecells{{/if}}'><div class='e-textwrapper'>{{if userTimeId == false}}{{:time}}{{else}}{{:userTimeHtml}}{{/if}}</div></td><td class='e-agendacells e-eventcolumn {{if dayBorderBottom==false}}e-alternatecells{{/if}}'><div class='e-textwrapper'><div id='Appointment_{{:id}}'  data-guid= '{{:uid}}' class='e-agendaappointment'>{{if userAppTemplId == false}}<span class='e-agendacolordiv' style='background:{{:background}}; {{if ignoreColorFilter == true}}filter:none;{{/if}}'/>{{:event}}{{else}}{{:userTemplate}}{{/if}}{{if readOnly == false}}<div class='e-agendahover'><span class='e-icon e-edit_05 e-editapp' title={{:edittext}}/>{{if allowDelete == true}}<span class='e-icon e-close e-deleteapp' title={{:deletetext}}/></div>{{/if}}{{/if}}</div></div></td></tr>{{/for}}</tbody></table>"),this.appTemplate=e.templates("<div class='{{:appClass}} {{:appointCustomcss}}' id='Appointment_{{:id}}' data-guid= '{{:uid}}' data-resource='{{:resId}}' role='presentation' style='{{if rtl == true}}right{{else}}left{{/if}}: {{:left}}; {{if ignoreColorFilter == true}}filter:none;{{/if}} width: {{:appWidth}}; background: {{:appointData}};  color:{{:appointtextcolor}}; height:{{:appHeight}}px; top: {{:top}}px;' >{{if appResize == true}}{{if appClass == 'e-appointment'}}{{if orientation == 'vertical'}}<div class='e-tophandle'></div><div class='e-bottomhandle'></div>{{else}}<div class='e-lefthandle'></div><div class='e-righthandle'></div>{{/if}}{{else}}{{if currentview != 'day'}}<div class='e-lefthandle'></div><div class='e-righthandle'></div>{{/if}}{{/if}}{{/if}}<span class='e-icon e-schedulemouseclose'/></span>{{if (priority!=undefined && priority!='') && ((priorityTemplate!=undefined && priorityTemplate!=''))}}{{if enablePriority==null}}<div class='e-priority e-{{:priorityTemplate}}'></div>{{else}}<div class='e-priority'>{{:priorityTemplate}}</div>{{/if}}{{/if}}{{if userAppTemplId == false}}{{if leftInd ==true}}<span class='e-icon e-arrow-sans-left e-leftind'></span>{{/if}}{{if rightInd ==true}}<span class='e-icon e-arrow-sans-right e-rightind'></span>{{/if}}{{if bottomInd ==true}}<span class='e-icon e-arrow-sans-down e-bottomind'></span>{{/if}}{{if topInd ==true}}<span class='e-icon e-arrow-sans-up e-topind'></span>{{/if}}<div class='e-appointinnertext'><div class='e-apptext {{if (priority!=undefined && priority!='')}}e-priorwidth{{/if}}'>{{if recurrence == true}}{{if recurrenceEdit == true}}<span class='e-icon e-recureditapp'></span>{{else}}<span class='e-icon e-recurapp'></span>{{/if}}{{/if}}{{:subject}} </div><div class='e-apptime {{if (priority!=undefined && priority!='')}}e-priorwidth{{/if}}'> {{:startTime}} - {{:endTime}}</div>{{if value == true}}<div class='e-multipleCategory'>{{:multiDiv}}</div>{{/if}}</div>{{else}}{{if recurrence == true}}{{if recurrenceEdit == true}}<span class='e-icon e-recureditapp'></span>{{else}}<span class='e-icon e-recurapp'></span>{{/if}}{{/if}}{{:userTemplate}}{{/if}}</div>"),this.inlineTemplate=e.templates("<div class='{{:appClass}}' id='Appointment_{{:id}}' role='presentation' style='position:absolute; {{if rtl == true}}right{{else}}left{{/if}}: {{:left}}; width: {{:appWidth}}; background: {{:appointData}};  color:{{:appointtextcolor}}; {{if appHeight}}height:{{:appHeight}}px;{{/if}} top: {{:top}}px;' ><div class='e-appointinnertext'><input class='e-inlinetext' type='text' style='background:transparent; border: 0px solid; '/>{{:subject}}"),this.blockTimeTemplate=e.templates("<div class='e-blocktimewrapper'><div class='e-blocktimeappointment {{:blockClass}} {{:customStyle}}' id='BlockTime_{{:id}}' role='presentation' style='width: {{:appWidth}}; height: {{:appHeight}}px; left: {{:left}}px; top: {{:top}}px;'>{{if userTempId == false}}{{:subject}}{{else}}{{:userTemplate}}{{/if}}</div></div>"),t.scheduleFeatures.horizontal&&this._renderHorizontalTemplates(),t.scheduleFeatures.resources&&0!=this._tempResource.length&&this._renderResourcesTemplate(),!t.isNullOrUndefined(this.model.categorizeSettings)&&this.model.categorizeSettings.enable&&(this._renderCategorizeTemplate(),this._categorizeMultipleTemplate=e.templates("{{for renderData }}<div style='background:{{:value}};height:11px;width:6px;float:left'></div>{{/for}}"))},_setNewStartEndHours:function(){"month"===this.currentView()||this._isCustomMonthView()||(("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(this.aTR.children().remove(),this._renderHeaderAllDayTemplate()),this.wTR.children().remove(),this._renderContentAreaTemplate(),this._borderAddRemove(),this._renderScroller(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&this._horizontalRender(),this.element.find(".e-ampmdisplay").outerHeight(this.element.find(".e-workcells")[0].offsetHeight),this.model.workHours.highlight?this._highlightBusinessHours():this.element.find(".e-workcells").addClass("e-businesshighlightworkcells"),this._businessHourScroller(),this.model.showCurrentTimeIndicator&&this.element.find(".e-highlightcurrenttimeline").remove(),this._highlightCurrentTime(this.model.showCurrentTimeIndicator),this._renderAppointmentAll(),this.model.blockoutSettings.enable&&(this.model.blockoutSettings.dataSource instanceof t.DataManager?this._bindBlockData():this._renderBlockAppointments()))},_renderInitSchedule:function(){var i,n,s,r;this.element.addClass("e-scheduleouter"),this._screenOrientation=window.orientation,this._quickWindow=this.model.showQuickWindow,this._customOrientation=this.model.orientation,i="number"==typeof innerWidth&&window.innerWidth>document.documentElement.clientWidth,this._mediaQuery=!("msie"==this._browserInfo.name&&parseInt(this._browserInfo.version,10)<=8)&&((document.documentElement.clientWidth+(i?17:0)<361||t.isMobile())&&this.model.isResponsive),this._mediaQuery?this.element.addClass("e-scheduleresponsive"):this.element.removeClass("e-scheduleresponsive"),this._mediaQuery&&(this.model.showQuickWindow=!1),this._mediaQuery&&(this.model.allowInline=!1),t.isNullOrUndefined(this.model.group)||t.isNullOrUndefined(this.model.group.allowGroupEditing)||!this.model.group.allowGroupEditing||t.isNullOrUndefined(this._appointmentSettings.resourceFields)||!this.model.resources[this.model.resources.length-1].allowMultiple||(this._groupEditing=!0),t.isNullOrUndefined(this._clientWidth)&&(this._clientWidth=this.model.width),this.currentView(this.currentView().toLowerCase()),this.model.views=0==this.model.views.length?this.currentView().toString().toLowerCase().split(","):this.model.views.toString().toLowerCase().split(","),this.model.workWeek=""==this.model.workWeek||null==this.model.workWeek?this._dayNamesArray:this.model.workWeek,this._resWorkWeek="vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showWeekend&&"workweek"==this.currentView()&&0!=this._tempResource.length&&!t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.workWeek),this._resCustomView="vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showWeekend&&"customview"==this.currentView()&&0!=this._tempResource.length&&!t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.renderDates),this.model.endHour>24&&(this.model.endHour=24),this.model.startHour<0&&(this.model.startHour=0),n=t.preferredCulture(this.model.locale),s=t.isNullOrUndefined(this.model.timeMode)||"Hour12"!=this.model.timeMode&&"Hour24"!=this.model.timeMode?this.model.timeMode:this.model.timeMode.replace("Hour",""),this._timeMode=null==s?null==n.calendar.AM&&null==n.calendar.PM?"24":"12":null==n.calendar.AM&&null==n.calendar.PM?"24":s,1==n.calendar.patterns.T.split(/\s+/).length&&null!=n.calendar.AM&&null!=n.calendar.PM&&(this._timeMode="24"),null==s?this._pattern=n.calendar.patterns:this._pattern.t="12"==this._timeMode?"h:mm tt":"HH:mm",this._firstdayofweek=null!=this.model.firstDayOfWeek?"string"==typeof this.model.firstDayOfWeek?this._dayNamesArray.indexOf(this.model.firstDayOfWeek.toString().toLowerCase()):this.model.firstDayOfWeek:n.calendar.firstDay,this.model.workWeek=this.model.workWeek.toString().toLowerCase().split(","),this.model.width=this.model.width?this.element.width(this._clientWidth).width():this.element.width(),this.model.height=this.model.height?this.element.height(this.model.height).height():this.element.height(),this.scWidth=this._scWidth?parseInt(this._scWidth):parseInt(this.model.width),this.scHeight=this._scHeight?parseInt(this._scHeight):parseInt(this.model.height),this.currentDate()<this.model.minDate&&this.currentDate(this.model.minDate),this.currentDate()>this.model.maxDate&&this.currentDate(this.model.maxDate),-1==this.model.views.toString().toLowerCase().split(",").indexOf(this.currentView())&&this.currentView(this.model.views[0].toLowerCase()),this._getRenderDates(),this.element.css({width:this._clientWidth,height:this.model.height}).attr({role:"presentation",tabIndex:1});var a="vertical"==this.model.orientation&&"vertical"==this._customOrientation?"e-vertical":"e-horizontal",o=t.buildTag("div.e-scheduleinner "+a,"",{},{}).css({height:this.scHeight-2+"px",position:"relative"}),l=t.buildTag("table.e-table","",{},{}).addClass("e-scheduleoutertable"),d=t.buildTag("tbody");this.hTR=t.buildTag("tr.e-scheduleheader"),this.aTR=t.buildTag("tr.e-headerarearow"),this.wTR=t.buildTag("tr.e-contentarearow"),this.model.cellHeight?this.wTR.removeClass("e-celldefaultheight"):this.wTR.addClass("e-celldefaultheight"),this._renderTemplates(),this.model.showHeaderBar&&this._renderHeaderBar(this.hTR),this._renderHeaderAllDayTemplate(),this._renderContentAreaTemplate(),o.append(l.append(d.append(this.hTR).append(this.aTR).append(this.wTR))),this._mediaQuery&&this.res1.length>1&&this.element.addClass("e-resources"),this._renderToolTip(),this.element.append(o),this.model.showHeaderBar||this.element.find(".e-scheduleheader").hide(),this.model.showHeaderBar&&(this.hTR.find(".e-commonviewbutton.e-"+this.currentView()).addClass("e-activeview"),this.element.find("#"+this._id+"_navigator").ejDatePicker({startDay:this._firstdayofweek,enableRTL:this.model.enableRTL,buttonText:this._getLocalizedLabels("Today"),select:e.proxy(this._onselect,this),locale:this.model.locale,cssClass:this.model.cssClass,minDate:this.model.minDate,maxDate:this.model.maxDate}),this.element.find("span.e-datewidget").css("display","none")),(this._mediaQuery||this.element.width()<600)&&this._renderNavigationDrawer(),this._showContextMenu(this.model.contextMenuSettings.enable),r=e("#"+this._id+"AppointmentAddEditWindow_wrapper,#"+this._id+"RecurrenceEdit_wrapper,#"+this._id+"navDrawer,#"+this._id+"alertWindow_wrapper"),this._mediaQuery?r.addClass("e-scheduleresponsive"):r.removeClass("e-scheduleresponsive"),this._mediaQuery&&this._phoneChanges(),this.model.enableRTL&&"webkit"==this._browserInfo.name&&!t.isNullOrUndefined(this._appointmentAddWindow)&&this._appointmentAddWindow.find(".e-chk-image").css("margin-right","-13px"),this._renderCommon()},_addMonthNameRow:function(){var t,i,n,s,r,a=e.extend(!0,[],this._dateRender);if(a.sort(),new Date(a[0]).getMonth()!=new Date(a[a.length-1]).getMonth()||new Date(a[0]).getFullYear()!=new Date(a[a.length-1]).getFullYear()){if(t=new Date(a[0]).getFullYear()==new Date(a[a.length-1]).getFullYear(),0!=e.grep(e(".e-monthnamerow"),function(t){if(e(t).hasClass("e-monthnamerow"))return t}).length&&e(".e-monthnamerow").remove(),i="<tr class='e-monthnamerow'>",this._resCustomView)for(n=0;n<Object.keys(this._resCustomDate).length;n++){var o=this._resCustomDate[n],l=o.map(function(e){return new Date(e).getMonth()+","+new Date(e).getFullYear()}),d=e.unique(o.map(function(e){return new Date(e).getMonth()+","+new Date(e).getFullYear()})),h={};for(l.forEach(function(e){h[e]=(h[e]||0)+1}),s=0,r=d.length;s<r;s++)i+="<td class='e-monthrow e-monthnamecells' colspan='"+h[d[s]]+"'><div class='e-monthnameheadertext'>"+(t?this._monthNames[d[s].split(",")[0]]:this._monthNames[d[s].split(",")[0]]+" "+d[s].split(",")[1])+"</div></td>"}else{l=a.map(function(e){return new Date(e).getMonth()+","+new Date(e).getFullYear()}),d=e.unique(a.map(function(e){return new Date(e).getMonth()+","+new Date(e).getFullYear()})),h={};for(l.forEach(function(e){h[e]=(h[e]||0)+1}),s=0,r=d.length;s<r;s++)i+="<td class='e-monthrow e-monthnamecells' colspan='"+h[d[s]]+"'><div class='e-monthnameheadertext'>"+(t?this._monthNames[d[s].split(",")[0]]:this._monthNames[d[s].split(",")[0]]+" "+d[s].split(",")[1])+"</div></td>"}i+="</tr>",("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&a.length>7?(e(i).insertBefore(this.element.find(".e-headerdays").find("tr:first")),this.element.find(".e-horizontalmonthtimecellsht").addClass("e-monthheaderrow"),this.element.find(".e-horizontaltimecellsht").length>0&&this.element.find(".e-horizontaltimecellsht").addClass("e-monthheaderrow")):(e(i).insertBefore(this.element.find(".e-dateheader")),this.element.find(".e-headrealldaytable").addClass("e-monthheaderrow"),this.element.find(".e-headercellsheight").addClass("e-monthheaderrow")),0==this.element.find(".e-monthnameleftindentcell").length&&e("<tr><td class='e-monthnameleftindentcell e-headercellsheight'><div></div></td></tr>").insertBefore(this.element.find(".e-settingsindent").parent()),this.model.enableRTL?this.element.find(".e-monthnamerow td:first-child").css("border-right","none"):this.element.find(".e-monthnamerow td:first-child").css("border-left","none")}},_renderToolTip:function(){var i,n=this;t.isNullOrUndefined(this.element.data("ejTooltip"))&&(i=this.model.tooltipSettings.enable?".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendacells.e-eventcolumn,.e-appup,.e-appdown,.e-appsoverflow":".e-appup,.e-appdown,.e-appsoverflow",this.element.ejTooltip({target:i,associate:"mousefollow",isBalloon:!1,beforeOpen:function(e){n._showToolTip(e)?n._openTooltip=!0:(e.cancel=!0,n._openTooltip=!1)},containment:"#"+this._id,tip:{adjust:{xValue:20,yValue:20}},position:{target:{horizontal:"center",vertical:"bottom"},stem:{horizontal:"left",vertical:"top"}},tracking:function(t){(!n._openTooltip||e(t.event.target).is(".e-tophandle,.e-bottomhandle,.e-schedulemouseclose,.e-righthandle,.e-lefthandle,.e-schedulerepeat,.e-editapp,.e-deleteapp"))&&(t.cancel=!0,this.hide())}}))},_renderQuickWindow:function(){this.model.showQuickWindow&&(this._renderQuickAppWindow(),this._renderQuickAppDetailsView())},_renderDialogs:function(){this._renderQuickWindow(),this._renderAppointmentWindow(),this._renderRecurrenceEditor(),this._renderRecurEditWindow(),this._renderAlertWindow()},_renderCommon:function(){if("agenda"!=this.currentView()){if("vertical"==this.model.orientation&&"vertical"==this._customOrientation&&(this._headerbarWidth(),("month"===this.currentView()||this._isCustomMonthView())&&this._renderMonthTimeCells(),this.model.timeScale.enable||(this.element.find(".e-headercells").first("td").css("border-left","none"),this.element.find(".e-workcellstab tr td:first-child").css("border-left","none")),this.element.find(".e-schedulesettings").html(this._getLocalizedLabels("AllDay")),this.element.find(".e-ampmdisplay").length>0&&this.element.find(".e-ampmdisplay").css({outerHeight:this.element.find(".e-workcells")[0].offsetHeight})),"agenda"!=this.currentView()&&("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length){var i=this.model.enableRTL?"border-right":"border-left";this.element.find(".e-horizontaldaterender").css(i,"0px"),this.wTR.find(".e-workareadiv").parent().css(i,"0px"),this.model.timeScale.enable||"month"===this.currentView()||this._isCustomMonthView()||this.element.find(".e-workcellstab tr td:nth-child(1)").css(i,"0px")}this.model.enableRTL&&this.element.addClass("e-rtl"),this.model.timeScale.enable&&this._borderAddRemove(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?"month"!==this.currentView()&&!this._isCustomMonthView()&&this.element.find(".e-headercells").addClass("e-dateheaderselect"):this.element.find(".e-headercells").addClass("e-dateheaderselect"),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&("month"==this.currentView()||this._isCustomMonthView())&&this.element.find(".e-workcells").width()<this.element.find(".e-dateheadercell").width()&&""==this.model.cellWidth&&(this.model.timeScale.enable?this.element.find(".e-workcells").css({width:this.element.find(".e-horizontmonthheaderdaytd").width()}):this.element.find(".e-headerdays table tr td:nth-child(1)").css({width:this.element.find(".e-horizontmonthheaderdaytd").width()+1})),"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||this.model.timeScale.enable||"month"==this.currentView()||this._isCustomMonthView()||""!=this.model.cellWidth||this.element.find(".e-horizontmonthheaderdatetd,.e-horizontmonthheaderdaytd").width(this.element.find(".e-workcells").width()),this.element.find(".e-horizontalresheader").css({width:this._mediaQuery?"50px":"100%"}),(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()&&(this._addMonthNameRow(),this.element.find(".e-datecommondiv").addClass("e-datecursor")),this._renderScroller(),this.model.showAppointmentNavigator&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.element.find(".e-vscroll").length>0&&"month"!=this.currentView()&&!this._isCustomMonthView()&&!this._mediaQuery&&this._renderUpDownIcon(),"horizontal"==this.model.orientation||"horizontal"==this._customOrientation?this._horizontalRender():this.model.showOverflowButton||"month"!=this.currentView()?"month"==this.currentView()||this._isCustomMonthView()?(this.element.find(".e-monthcells, .e-timecells").outerHeight(this.model.cellHeight?parseInt(this.model.cellHeight)+1:parseInt(this.element.find(".e-draggableworkarea").height()/this.element.find(".e-draggableworkarea tr").length)),this.element.find(".e-timecells").width(this.element.find(".e-timecells").width()+1)):this.model.timeScale.enable&&this.element.find(".e-ampmdisplay").outerHeight(1==this.model.timeScale.minorSlotCount?this.element.find(".e-timecelldivs")[0].offsetHeight:this.element.find(".e-workcells")[0].offsetHeight):this._monthCellsRender(),"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||!t.scheduleFeatures.horizontal?t.isNullOrUndefined(this.model.allDayCellsTemplateId)||this.element.find(".e-leftindent").css({height:this.element.find(".e-alldaycells").height()}):(this.model.timeScale.enable||this.element.find(".e-headercells").removeClass("e-dateheaderselect"),t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length||this._horizontalResIcon(),!this.model.timeScale.enable||t.isNullOrUndefined(this.model.dateHeaderTemplateId)||"month"==this.currentView()||this._isCustomMonthView()||this.element.find(".e-headercells").parent().parent().parent().css("width",this.element.width()/10*this._dateRender.length+"px"),this.element.find(".e-parentnodecategory").css({width:this._mediaQuery?"12px":"20px"})),this.model.workHours.highlight&&this.model.highlightBusinessHours?this._highlightBusinessHours():this.element.find(".e-workcells").removeClass("e-businesshighlightworkcells"),this.model.timeScale.enable&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&("month"==this.currentView()||this._isCustomMonthView())&&((!this._resWorkWeek&&this._dateRender.length>60||e.isNumeric(this.element.find(".e-monthcells")[0].offsetHeight)&&this.element.find(".e-monthcells")[0].offsetHeight!=this.element.find(".e-timecells")[0].offsetHeight&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showOverflowButton)&&this.element.find("td.e-timecells .e-timecelldivs").addClass("e-timedivcells"),(!this._resCustomView&&this._dateRender.length>60||e.isNumeric(this.element.find(".e-monthcells")[0].offsetHeight)&&this.element.find(".e-monthcells")[0].offsetHeight!=this.element.find(".e-timecells")[0].offsetHeight&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showOverflowButton)&&this.element.find("td.e-timecells .e-timecelldivs").addClass("e-timedivcells")),this.model.orientation==t.Schedule.Orientation.Vertical&&"vertical"==this._customOrientation&&this._isCustomMonthView()&&this.model.timeScale.enable&&this.element.find(".e-timecelldivs")[0].offsetHeight>=this.element.find(".e-timecelldivs").parent()[0].offsetHeight&&this.element.find(".e-timecelldivs").addClass("e-timedivcells"),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&this._safariBrowser&&this.element.find(".e-workcells.e-dayend").width(this.element.find(".e-workcells.e-dayend").outerWidth()+1),"msie"==this._browserInfo.name&&this._browserInfo.version<9&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&(this.element.find(".e-workleftindent").find("tr").last().find("td").addClass("e-lastcell"),this.element.find(".e-workcellstab").find("tr").last().find("td").addClass("e-lastcell"))}this._highlightCurrentTime(this.model.showCurrentTimeIndicator),this._validateMinMaxDate(),t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("emptycell"),this._businessHourScroller()},_resourceSegregate:function(){var i,n,s="";if(this._tempResource=[],this._grouping=[],t.isNullOrUndefined(this.model.group)||t.isNullOrUndefined(this.model.resources))t.isNullOrUndefined(this.model.group)&&!t.isNullOrUndefined(this.model.resources)&&e.merge(this._tempResource,this.model.resources);else{for(i=0;i<this.model.group.resources.length;i++)if(n=this._findResourceIndex(this.model.resources,"name",this.model.group.resources[i],null,null),!t.isNullOrUndefined(n)){if(0==this.model.resources.length||0==this.model.resources[n].resourceSettings.dataSource.length)return!1;this._tempResource.push(e.extend(!0,[],this.model.resources[n])),this._grouping.push(this.model.group.resources[i]),s=i==this.model.group.resources.length-1?s+this.model.resources[n].field:s+this.model.resources[n].field+","}this._appointmentSettings.resourceFields=s}},_borderAddRemove:function(){this.model.enableRTL?(this.element.find(".e-headrealldaytable tr td:first-child,.e-workcellstab tr td:first-child,.e-headerdays table tr td:first-child").css("border-right","none"),this.element.find(".e-horizontalheader,.e-horizontalrestd,.e-monthleftindent,.e-workleftindent,.e-empty").addClass("e-borderleft")):(this.element.find(".e-headrealldaytable tr td:first-child,.e-workcellstab tr td:first-child,.e-headerdays table tr td:first-child").css("border-left","none"),this.element.find(".e-horizontalheader,.e-horizontalrestd,.e-monthleftindent,.e-workleftindent,.e-empty").addClass("e-borderright")),"horizontal"==this.model.orientation||"horizontal"==this._customOrientation?"month"==this.currentView()?this.element.find(".e-headerdays table tr td:first-child").width(this.element.find(".e-workcellstab tr td:first-child").width()):"webkit"==this._browserInfo.name&&this.element.find(".e-workcellstab tr td:first-child").width(this.element.find(".e-horizontaltimetd").first().width()):this._safariBrowser&&("month"==this.currentView()?this.element.find(".e-monthleftindent").width(this.element.find(".e-monthempty").width()+1):this.element.find(".e-workleftindent").attr("style","width:"+(this.element.find(".e-empty").width()+1)+"px !important")),t.isNullOrUndefined(this.oldDate)||""==this.oldDate||(this.currentDate(new Date(this.oldDate)),this.oldDate="")},_phoneChanges:function(){t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.ejDialog({allowDraggable:!1,position:{X:"0",Y:"0"}})},_dateConvert:function(i){if(t.isNullOrUndefined(i))n=null;else{var n=new Date(parseInt(i.match(/\d+/).toString()));n="date"==e.type(n)?n:new Date}return n},_calculateCustomDays:function(){var i,n,s,r;if("array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0){if(this.oldDate=this.currentDate(),"object"==e.type(this.model.renderDates[0])){if(i=this.model.renderDates.length,t.isNullOrUndefined(this._renderDays))for(this._renderDays=0,n=0;n<i;n++)this._renderDays=this._renderDays+Math.round(Math.abs((new Date(t.format(this.model.renderDates[n].end,this._datepattern(),this.model.locale)).getTime()-new Date(t.format(this.model.renderDates[n].start,this._datepattern(),this.model.locale)).getTime())/864e5)+1)}else this._renderDays=this.model.renderDates.length;this._customOrientation=this._renderDays>7?"horizontal":this.model.orientation}else if(s="date"!=e.type(this.model.renderDates.start)?t.parseDate(this.model.renderDates.start,this._datepattern()):new Date(this.model.renderDates.start),s=t.isNullOrUndefined(s)?"Invalid Date"==new Date(this.model.renderDates.start).toString()||"NaN"==new Date(this.model.renderDates.start).toString()?this._dateConvert(this.model.renderDates.start):new Date(this.model.renderDates.start):s,r="date"!=e.type(this.model.renderDates.end)?t.parseDate(this.model.renderDates.end,this._datepattern()):new Date(this.model.renderDates.end),r=t.isNullOrUndefined(r)?"Invalid Date"==new Date(this.model.renderDates.end).toString()||"NaN"==new Date(this.model.renderDates.end).toString()?this._dateConvert(this.model.renderDates.end):new Date(this.model.renderDates.end):r,t.isNullOrUndefined(this.model.minDate)||t.isNullOrUndefined(this.model.maxDate)||(s=this.model.minDate>=s&&this.model.maxDate<=s?s:this.model.minDate>=s&&this.model.maxDate>=s?this.model.minDate:this.model.maxDate<=s?this.model.minDate:s,r=this.model.minDate>=r&&this.model.maxDate<=r?r:this.model.minDate<=r&&this.model.maxDate<=r?this.model.maxDate:this.model.minDate>=r?this.model.maxDate:r),this._renderStart=t.isNullOrUndefined(s)?r:new Date(s.getFullYear(),s.getMonth(),s.getDate()),this._renderEnd=t.isNullOrUndefined(r)?s:new Date(r.getFullYear(),r.getMonth(),r.getDate()),this._renderDays=Math.round((this._renderEnd-this._renderStart)/864e5)+1,this.oldDate=this.currentDate(),this._dateNavigation||this._renderStart.getTime()>this.currentDate().getTime()||this._renderEnd.getTime()<this.currentDate().getTime()?(this._renderStart=new Date(this.currentDate()),this._renderEnd=new Date(this._renderStart.getTime()+864e5*(this._renderDays-1)),this._dateNavigation=!1):this.currentDate(new Date(this._renderStart)),this._renderDays>7){var a="vertical"==this.model.orientation&&"vertical"==this._customOrientation?new Date(this._firstweekdate(this._renderStart)):new Date(this._renderStart),o=new Date(this._renderEnd),l=o.getDay();0==this._firstdayofweek&&6!=l?o.setDate(new Date(this._renderEnd).getDate()+(6-l)):o.setDate(new Date(this._renderEnd).getDate()+(6-l)+this._firstdayofweek),o="vertical"==this.model.orientation&&"vertical"==this._customOrientation?o:new Date(this._renderEnd),this._numDays=Math.round((o-a)/864e5)+1}return this},_isCustomMonthView:function(){return"customview"==this.currentView()&&!this._resCustomView&&(this._oneWeek=!(this._dateRender.length>7),!this._oneWeek)},_headerbarWidth:function(){if(0==this.element.children().length)return!1;var e="workweek"==this.currentView()?this.model.workWeek.length:"day"==this.currentView()?1:"customview"===this.currentView()&&this._renderDays<=7?this._dateRender.length:7,i=t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?e:this.res1.length*e;this.element.outerWidth(),this.element.find(".e-draggableworkarea").offset().left,this.element.offset().left,parseInt(this.model.cellWidth)},_deviceRatio:function(){return"msie"==t.browserInfo().name?screen.deviceXDPI/screen.logicalXDPI:devicePixelRatio},_renderScroller:function(){if(0==this.element.children().length)return!1;var i=this.element.find("div#"+this._id+"_scroller"),n=this.scHeight-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top),s=Math.ceil(this._deviceRatio())-1>0?n-1:n,r=this,a="vertical"===this.model.orientation&&"vertical"===this._customOrientation?this.element.width()-(this._mediaQuery&&("month"==this.currentView()||this._isCustomMonthView())?1:this.element.find(".e-scrolltimecells").length>0?this.element.find(".e-scrolltimecells").parent().outerWidth():0):"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?this.element.width():this.element.width()-this.element.find(".e-resourceheadertable").width()-1;i.ejScroller({enableRTL:this.model.enableRTL,height:s-1,width:parseInt(a)-2,cssClass:this.model.cssClass,thumbStart:function(i){var n=e(i.originalEvent.target);if(!r._mediaQuery&&!t.isTouchDevice()&&n.closest(".e-workcells").hasClass("e-workcells")||n.closest(".e-appointment").hasClass("e-appointment")||n.closest(".e-monthappointment").hasClass("e-monthappointment")||n.closest(".e-categorybar").hasClass("e-categorybar"))return!1},scroll:function(i){var n,s,a,o;t.isNullOrUndefined(i.scrollTop)||(i.scrollTop=parseInt(i.scrollTop)),((n=r.element.find("div#"+r._id+"_scroller").data("ejScroller")).isVScroll()||n.isHScroll())&&("vertical"===r.model.orientation&&"vertical"===r._customOrientation?r.element.find(".e-scrolltimecells").css("top",-i.scrollTop+"px"):r.model.timeScale.enable&&"month"!==r.currentView()&&!r._isCustomMonthView()?e(r.element.find(".e-horizontaltimecells").find("table tr")[2]).css("left",-i.scrollLeft+"px"):r.element.find(".e-headerdays").css("left",-i.scrollLeft+"px"),1==r.element.find(".e-vhandle").length&&r.element.find(".e-horires").css("top",-i.scrollTop+"px"),"vertical"==r.model.orientation&&"vertical"==r._customOrientation?(r.element.find(".e-headrealldaytable").css("left",r.model.enableRTL?i.scrollData.scrollable-i.scrollLeft:-i.scrollLeft+"px"),s=r.element.find(".e-scrolltimecells").width()-3,r.element.find(".e-upicon, .e-downicon").css("left",-(i.scrollLeft-s)+"px"),"12"!=r._timeMode||"month"===r.currentView()||r._isCustomMonthView()||(a=i.scrollTop/(r.element.find(".e-workcells").height()*r.model.timeScale.minorSlotCount),a=Math.round(a)<a?Math.round(a)+1:Math.round(a),(o=t.preferredCulture(r.model.locale).calendar).AM&&o.PM&&r.element.find(".e-idAmpmstyle").each(function(t,i){t==a&&"00"==e(i).text().trim()?parseInt(e(i)[0].id)<12?e(i).text(o.AM[0]):e(i).text(o.PM[0]):(e(i).text()==o.AM[0]&&t>0||e(i).text()==o.PM[0]&&parseInt(e(i)[0].id)>12)&&e(i).text("00")})),r._mediaQuery&&r.element.find(".e-headrealldaytable").css("left","0px"),r.model.showAppointmentNavigator&&"vertical"==r.model.orientation&&"vertical"==r._customOrientation&&n.isVScroll()&&"month"!=r.currentView()&&!r._isCustomMonthView()&&!r._mediaQuery&&(r._renderUpDownIcon(),r._renderUpDownIconPosition())):t.scheduleFeatures.horizontal&&("horizontal"==r.model.orientation||"horizontal"==r._customOrientation)&&r._horizontalScroll(i,r)),t.isNullOrUndefined(r._quickAppointWindow)||!r.model.showQuickWindow||r._isQuickDialogOpened||(r._isQuickDialogOpened=!1,r._quickAppointWindow.ejDialog("close"),r._quickAppDetailsWindow.ejDialog("close"))}}),this._mediaQuery||this._nextPrevAppointment(this.model.showAppointmentNavigator),this._renderHoriVerticalScroll(),this.element.find(".e-mobileNavigation").css(this.model.enableRTL?"right":"left",this.element.outerWidth()-36),this._showScrollTd()},_showScrollTd:function(){var e=this.model.enableRTL?"e-borderright":"e-borderleft",i="horizontal"==this.model.orientation||"horizontal"==this._customOrientation?"16px":"17px";("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(this.element.find(".e-vscroll").length>0?(this.element.find(".e-scheduleheader td").first().attr("colspan","3"),this.element.find(".e-workareadiv").parent().attr("colspan","2"),0==this.element.find(".e-emptyscrolltd").length&&this.aTR.append(t.buildTag("td.e-emptyscrolltd","",{},{}).css({width:this._mediaQuery?"0px":"16px"})),this.element.find(".e-emptyscrolltd").addClass("e-horizontalemptytd")):(this.element.find(".e-scheduleheader td").first().attr("colspan","2"),this.element.find(".e-workareadiv").parent().attr("colspan","2"))),this.element.find(".e-vscroll").length>0?this.element.find(".e-emptyscrolltd").addClass(e).css("width",i).show():this.element.find(".e-emptyscrolltd").removeClass(e).css("width","0px").hide()},_renderHoriVerticalScroll:function(){var i,n,s,r,a,o,l=this.element.find("div#"+this._id+"_scroller"),d="vertical"===this.model.orientation&&"vertical"===this._customOrientation?this.element.width()-(this._mediaQuery&&("month"==this.currentView()||this._isCustomMonthView())?1:this.element.find(".e-scrolltimecells").length>0?this.element.find(".e-scrolltimecells").parent().outerWidth():0):"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?this.element.width():this.element.width()-this.element.find(".e-resourceheadertable").width();d=parseInt(d)-1;var h=parseInt(this.scHeight)-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top),p=l.ejScroller("isVScroll")?18:0,m=l.ejScroller("isHScroll")?18:0;if(this.element.find(".e-headeralldaydiv").width(this.element.find(".e-draggableworkarea").width()),!t.isNullOrUndefined(this.model.group)&&"day"!=this.currentView()&&this.model.timeScale.enable&&this.element.find(".e-headrealldaytable").css("table-layout","auto"),"vertical"==this.model.orientation&&"vertical"==this._customOrientation){if(this.model.cellWidth||this.model.cellHeight){this.model.cellHeight&&!this.model.cellWidth&&this.element.find(".e-headrealldaytable").css("table-layout","");var c=(parseInt(this.model.cellWidth)+1)*this.element.find("div.e-draggableworkarea tr:first td").length,u=parseInt(this.model.cellHeight)*this.element.find("div.e-draggableworkarea tr").length,g=this.element.find(".e-scrolltimecells").length>0?this.element.find(".e-scrolltimecells").width():0;this.element.find(".e-draggableworkarea").width(this.element.width()>c+g+p?c-1:d-1-p),this.model.cellHeight?this.element.find(".e-draggableworkarea").height(h>u?u:h-1-m):this.element.find(".e-draggableworkarea").height(h-1-m),this.model.cellWidth&&this.element.find(".e-datecommondiv").parent().width(parseInt(this.element.width())-2),"month"==this.currentView()||this._isCustomMonthView()||this.element.find(".e-workcells").css("width",this.model.cellWidth)}else this.element.find(".e-headrealldaytable").css("table-layout",""),this.element.find(".e-draggableworkarea").height(h-1),!this.model.showOverflowButton&&("month"==this.currentView()||this._isCustomMonthView())&&this._monthCellsRender(),this.element.find(".e-draggableworkarea").width(d-1-p);this.element.find(".e-timecells").height(this.element.find(".e-workcells").height()*this.model.timeScale.minorSlotCount+(this.model.timeScale.minorSlotCount-1)),this.element.find(".e-headrealldaytable").width(this.model.cellWidth?"":"100%"),i=this.model.cellWidth?this.model.cellWidth:this.element.find(".e-workcells,.e-monthcells").width()+"px",i="webkit"==t.browserInfo().name&&"day"!=this.currentView()?parseFloat(i)-1+"px":i,(this._tempResource.length>1&&!t.isNullOrUndefined(this.model.group)||this.model.cellWidth)&&this.element.find(".e-headercells").css({width:i,"min-width":i,"max-width":i}),(t.isNullOrUndefined(this.model.group)||this.model.cellWidth||"day"==this.currentView())&&this.element.find(".e-headrealldaytable").css("width",c-1),this._mediaQuery&&this.res1.length>1&&(n=this.element.find(".e-draggableworkarea").width()*this.res1.length,this.element.find(".e-draggableworkarea").width(n),this.element.find(".e-headrealldaytable").width(n)),this.element.find(".e-e-headeralldaydiv").width(this.element.find(".e-draggableworkarea").width()),"chrome"==this._browserInfo.name||"webkit"==this._browserInfo.name?this.element.find(".e-scrolltimecells").height(this.element.find(".e-workcellstab").height()):this.element.find(".e-scrolltimecells").height(this.element.find(".e-workcellstab").height()-1),!this.model.timeScale.enable||t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)&&t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId)||this.element.find(".e-scrolltimecells tr").height(this.element.find(".e-workcells,.e-monthcells").outerHeight()),r=0!=(s=t.isNullOrUndefined(this.element.find(".e-timecelltable td:first-child")[0])?0:this.element.find(".e-timecelltable td:first-child")[0].offsetHeight)?(s-2)/this.model.timeScale.minorSlotCount:s,this.element.find(".e-ampmstyle").css({height:r+"px",minHeight:(this.model.timeScale.enable&&this._mediaQuery&&"month"!=this.currentView()?this.element.find(".e-workcells").height():0)+"px"})}else this.model.timeScale.enable||this.element.find(".e-workcellstab tr td:first-child").css("border-left","none"),l.ejScroller("isHScroll")||this.element.find(".e-draggableworkarea").css("height","100%")&&this.element.find(".e-resfootertr").css("height","0px"),l.ejScroller("isVScroll")||this.element.find(".e-draggableworkarea").css("height",h-19),this._mediaQuery&&(this.element.find(".e-horizontresdiv").height(l.height()),this.element.find(".e-draggableworkarea").children().height("100%"),this.element.find(".e-horires").height(this.element.find(".e-draggableworkarea").height()),this.element.find(".e-horires").children().height("100%")),(this.model.cellWidth||this.model.cellHeight)&&(a=e(this.element.find(".e-workcells")[0]).parent().find("td").length,l.ejScroller("isHScroll")||this.element.find(".e-draggableworkarea").width(parseInt(this.model.cellWidth)*a+(a-1)),("month"==this.currentView()||this._isCustomMonthView()||!this.model.timeScale.enable)&&this.element.find(".e-headerdays").children().css("width",this.element.find(".e-draggableworkarea").children().width()+"px").css("table-layout","auto"),this.model.cellHeight&&!this._tempResource&&this.element.find(".e-draggableworkarea").height(parseInt(this.model.cellHeight)-1)),!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||("month"==this.currentView()||this._isCustomMonthView()?this.element.find(".e-headerdays table tr td:first-child").width(this.element.find(".e-workcellstab tr td:first-child").width()):this.element.find(".e-workcellstab").width(this.element.find(".e-workcellstab tr:first-child").children().length*(this.model.cellWidth?parseInt(this.model.cellWidth):this.element.find(".e-workcells,.e-monthcells").outerWidth()))),"day"==this.currentView()&&this.model.timeScale.enable&&e(this.element.find(".e-horizontaltimecells").find("table tr")[2]).css("left",-this.element.find(".e-draggableworkarea").scrollLeft()+"px"),this.element.find(".e-horizontaltabletimecell").width(this.element.find(".e-workcellstab").width()),!this.model.timeScale.enable||l.ejScroller("isHScroll")||"month"==this.currentView()||this._isCustomMonthView()||(o=Math.floor(this.element.find(".e-draggableworkarea").width()/e(this.element.find(".e-workcells")[0]).parent().find("td").length),this.element.find(".e-workcells").width(o),this.element.find(".e-horizontaltabletimecell").find("tr td").width(o),this.element.find(".e-horizontaltabletimecell").css("table-layout","fixed").width(this.element.find(".e-draggableworkarea").width()),l.ejScroller("refresh")),this.model.timeScale.enable||"month"==this.currentView()||this._isCustomMonthView()||(this.model.cellWidth||"webkit"==this._browserInfo.name?"webkit"==this._browserInfo.name&&"month"!=this.currentView()&&(this.model.cellWidth&&this.element.find(".e-headerdays").width(this.model.cellWidth),this.element.find(".e-workcells").width(this.element.find(".e-draggableworkarea").width/this._dateRender.length),this.element.find(".e-dateheadercell").width(this.element.find(".e-workcells").width()),this.element.find(".e-headerdays table tr td:not(:first-child)").find(".e-dateheadercell").width(this.element.find(".e-workcells").width()-1),this.element.find(".e-workcells").width(this.element.find(".e-workcells").width())):this.element.find(".e-workcells").width(this.element.find(".e-horizontmonthheaderdaytd").width()))},_getDayNameIndex:function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=[],n=this._firstdayofweek;do{n>6&&(n=0),i.push(t[n]),n++}while(i.length<7);return i.indexOf(e.capitalizeFirstString())},_highlightBusinessHours:function(){var i,n,s,r,a,o,l,d,h,p;if("agenda"==this.currentView())return!1;if(i=(this._resWorkWeek||this._resCustomView)&&this._resWorkWeek?"workWeek":"renderDates",!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&(!t.isNullOrUndefined(this.model.group)&&!t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings[i])||!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&!t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.start)||!t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.end))){this.element.find(".e-workcells, .e-monthcells").removeClass("e-businesshighlightworkcells e-monthcellhighlight");var m,c,u,g,_,f,w,D,S,y,v,C,T,b,R=0,A=[],I=this.element.find(".e-workcellstab tr"),k=("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&this._grouping.length>1?this._resourceSort():this.res1;if("vertical"==this.model.orientation&&"vertical"==this._customOrientation)for(h=0;h<k.length;h++)if(y=t.isNullOrUndefined(k[h][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?this.model.workWeek:k[h][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek],"month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable){for(x=this.dateRender,(t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.start))&&t.isNullOrUndefined(this._tempResource[this._tempResource.length-1].resourceSettings.end)?(m=this.model.workHours.start>=this.model.startHour?this.model.workHours.start-this.model.startHour:0,c=this.model.workHours.end<=this.model.endHour?this.model.workHours.end-this.model.startHour:this.model.endHour-this.model.startHour):(u=k[h][this._tempResource[this._tempResource.length-1].resourceSettings.start],g=k[h][this._tempResource[this._tempResource.length-1].resourceSettings.end],m=t.isNullOrUndefined(u)?this.model.workHours.start>=this.model.startHour?this.model.workHours.start:this.model.startHour:u>=this.model.startHour?u:this.model.workHours.start>=this.model.startHour?this.model.workHours.start:this.model.startHour,c=t.isNullOrUndefined(g)?this.model.workHours.end<=this.model.endHour?this.model.workHours.end:this.model.endHour:g<=this.model.endHour?g:this.model.workHours.end<=this.model.endHour?this.model.endHour:this.model.workHours.end),_=this.model.endHour-this.model.startHour,f=Math.floor(I.length/_*m)-this.model.startHour*this.model.timeScale.minorSlotCount,w=Math.floor(I.length/_*c)-this.model.startHour*this.model.timeScale.minorSlotCount,S="week"===this.currentView()?this.model.showWeekend?7:y.length:"workweek"===this.currentView()?y.length:"customview"===this.currentView()&&this._renderDays<=7?this._dateRender.length:1,this._resCustomView&&"customview"===this.currentView()&&(S=this._resCustomDate[h].length),n=f;n<w;n++)for(s=R;s<R+S;s++)for(r=0;r<y.length;r++)-1==(v=this._dayNamesArray.indexOf(y[r]))&&(v=this._getDayNameIndex(y[r])),v==new Date(x[s]).getDay()&&e(e(I[n]).children()[s]).addClass("e-businesshighlightworkcells");R+=S}else{if(this._resWorkWeek){for(n=0;n<y.length;n++)-1==(C=this._dayFullNames.indexOf(y[n].capitalizeFirstString()))&&(C=this._getDayNameIndex(y[n])),A.push(this._renderDates[C]);x=A}else x="month"==this.currentView()||this._isCustomMonthView()?this._dateRender:this.dateRender;for(S=this._resWorkWeek?y.length:"day"==this.currentView()?1:7,T="month"==this.currentView()||this._isCustomMonthView()?7*h:R,b="month"==this.currentView()||this._isCustomMonthView()?7*(h+1):R+S,n=0;n<I.length;n++)for(s=T;s<b;s++)for(r=0;r<y.length;r++)-1==(v=this._dayNamesArray.indexOf(y[r]))&&(v=this._getDayNameIndex(y[r])),v==new Date(x[s]).getDay()&&(e(e(I[n]).children()[s]).hasClass("e-othermonths")?e(e(I[n]).children()[s]).removeClass("e-monthcellhighlight"):e(e(I[n]).children()[s]).addClass("e-monthcellhighlight"));R+=S}else if("month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable){for(x=this._dateRender,h=0;h<k.length;h++)if("e-parentnode"!=k[h].classname)for(u=k[h][this._tempResource[this._tempResource.length-1].resourceSettings.start],g=k[h][this._tempResource[this._tempResource.length-1].resourceSettings.end],m=t.isNullOrUndefined(u)?this.model.workHours.start>=this.model.startHour?this.model.workHours.start:this.model.startHour:u>=this.model.startHour?u:this.model.workHours.start>=this.model.startHour?this.model.workHours.start:this.model.startHour,c=t.isNullOrUndefined(g)?this.model.workHours.end<=this.model.endHour?this.model.workHours.end:this.model.endHour:g<=this.model.endHour?g:this.model.workHours.end<=this.model.endHour?this.model.endHour:this.model.workHours.end,_=this.model.endHour-this.model.startHour,D=e(I[h]).children().length/x.length,f=Math.floor(D/_*m),w=Math.floor(D/_*c),n=0;n<x.length;n++)for(s=0;s<this.model.workWeek.length;s++)if(-1==(v=this._dayNamesArray.indexOf(this.model.workWeek[s]))&&(v=this._getDayNameIndex(this.model.workWeek[s])),v==new Date(x[n]).getDay())for(r=D*n+f;r<D*n+w;r++)if(e(e(I[h]).children()[r]).addClass("e-businesshighlightworkcells"),this._grouping.length>1){a=h,C=this._tempResource.length-1;do{o=new t.DataManager(this._tempResource[C-1].resourceSettings.dataSource).executeLocal((new t.Query).where(this._tempResource[C-1].resourceSettings.id,t.FilterOperators.equal,k[a][this._tempResource[this._tempResource.length-1].resourceSettings.groupId])),t.isNullOrUndefined(o)||(a=k.indexOf(o[0]),e(e(I[a]).children()[r]).addClass("e-businesshighlightworkcells")),C-=1}while(C>0)}}else this._horizontalBusinessHighlight(null,null,null,null,null)}else if("month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable){this.element.find(".e-workcells").removeClass("e-businesshighlightworkcells");var x=this.dateRender,O=(I=this.element.find(".e-workcells"),this.model.workHours.start>=this.model.startHour?this.model.workHours.start-this.model.startHour:0),M=this.model.workHours.end<=this.model.endHour?this.model.workHours.end-this.model.startHour:this.model.endHour-this.model.startHour,N=60/this.model.timeScale.majorSlot*this.model.timeScale.minorSlotCount;if(this.res1=t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?[0]:this.res1,S="week"===this.currentView()?this.model.showWeekend?7*this.res1.length:this.model.workWeek.length*this.res1.length:"workweek"===this.currentView()?this.model.workWeek.length*this.res1.length:"customview"===this.currentView()&&this._renderDays<=7?this._dateRender.length*this.res1.length:1*this.res1.length,"vertical"==this.model.orientation&&"vertical"==this._customOrientation)for(h=Math.ceil(O*N);h<M*N;h++)for(p=0;p<S;p++)for(l=0;l<this.model.workWeek.length;l++)this._dayNamesArray.indexOf(this.model.workWeek[l])==new Date(x[p]).getDay()&&e(I[h*S+p]).addClass("e-businesshighlightworkcells");else this._horizontalBusinessHighlight(this._dateRender,O,M,N,I)}else if("vertical"==this.model.orientation&&"vertical"==this._customOrientation)for(d=this.dateRender,(I=this.element.find(".e-monthcells")).removeClass("e-monthcellhighlight"),h=0;h<d.length;h++)for(p=0;p<this.model.workWeek.length;p++)this._dayNamesArray.indexOf(this.model.workWeek[p])==new Date(d[h]).getDay()&&(e(I[h]).hasClass("e-othermonths")?e(I[h]).removeClass("e-monthcellhighlight"):e(I[h]).addClass("e-monthcellhighlight"));else this._horizontalBusinessHighlight(null,null,null,null,null)},_onselect:function(e){this._navigateClick(e,"DateNavigation")},_renderHeaderBar:function(e){var i,n,s="vertical"==this.model.orientation&&"vertical"==this._customOrientation?1:3,r=t.buildTag("td","",{},{colspan:s}),a=t.buildTag("div.e-datecommondiv").append(t.buildTag("div.e-icon e-navigateprevious","",{},{title:this._getLocalizedLabels("Previous"),role:"button","aria-label":this._getLocalizedLabels("Previous"),tabindex:0})).append(t.buildTag("div","",{},{"aria-live":"assertive",tabindex:0}).html(this._getCurrentDateHeaderValue()).addClass("e-datedisplay")).append(t.buildTag("input#"+this._id+"_navigator","",{},{type:"text"}).css("display","none").addClass("dateCalendar")).append(t.buildTag("div.e-icon e-navigatenext","",{},{title:this._getLocalizedLabels("Next"),role:"button","aria-label":this._getLocalizedLabels("Next"),tabindex:0}));this._mediaQuery||this.element.width()<600?(this._mediaQuery&&(a=t.buildTag("div.e-datecommondiv").append(t.buildTag("div.e-icon e-navigateprevious","",{},{title:this._getLocalizedLabels("Previous")})).append(t.buildTag("div.e-icon e-navigatenext","",{},{title:this._getLocalizedLabels("Next")})).append(t.buildTag("div","",{},{"aria-live":"assertive",tabindex:0}).html(this._getCurrentDateHeaderValue()).addClass("e-datedisplay")).append(t.buildTag("input#"+this._id+"_navigator","",{},{type:"text"}).css("display","none").addClass("dateCalendar"))),i=t.buildTag("div#"+this._id+"navDrawerIcon.e-mobileNavigation e-icon"),e.append(r.append(t.buildTag("div").css("width","100%").append(a).append(i)))):(n=t.buildTag("div.e-viewsdiv"),e.append(r.append(t.buildTag("div").css("width","100%").append(a).append(n.append(this._renderViewNavigation(this.model.views)))))),t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("renderHeaderBar","",e)},_renderViewNavigation:function(e){for(var i,n=t.buildTag("table.e-table e-viewstable","",{},{}),s=t.buildTag("tbody"),r=t.buildTag("tr"),a=e,o=0;o<a.length;o++)switch(i=1==a.length?"e-"+a[o].toLowerCase()+" e-singleview":0==o?"e-"+a[o].toLowerCase()+" e-firstview":o==a.length-1?"e-"+a[o].toLowerCase()+" e-lastview":"e-"+a[o].toLowerCase(),a[o]){case"day":r.append(t.buildTag("td").append(t.buildTag("div",this._getLocalizedLabels("Day"),{},{role:"button","aria-label":this._getLocalizedLabels("Day")}).addClass("e-commonviewbutton").addClass(i)));break;case"week":r.append(t.buildTag("td").append(t.buildTag("div",this._getLocalizedLabels("Week"),{},{role:"button","aria-label":this._getLocalizedLabels("Week")}).addClass("e-commonviewbutton").addClass(i)));break;case"workweek":r.append(t.buildTag("td").append(t.buildTag("div",this._getLocalizedLabels("WorkWeek"),{},{role:"button","aria-label":this._getLocalizedLabels("WorkWeek")}).addClass("e-commonviewbutton").addClass(i)));break;case"month":r.append(t.buildTag("td").append(t.buildTag("div",this._getLocalizedLabels("Month"),{},{role:"button","aria-label":this._getLocalizedLabels("Month")}).addClass("e-commonviewbutton").addClass(i)));break;case"customview":r.append(t.buildTag("td").append(t.buildTag("div",this._getLocalizedLabels("CustomView"),{},{role:"button","aria-label":this._getLocalizedLabels("CustomView")}).addClass("e-commonviewbutton").addClass(i)));break;case"agenda":r.append(t.buildTag("td").append(t.buildTag("div",this._getLocalizedLabels("Agenda"),{},{role:"button","aria-label":this._getLocalizedLabels("Agenda")}).addClass("e-commonviewbutton").addClass(i)))}return n.append(s.append(r)),n},_renderNavigationDrawer:function(){var i,n;if(t.isNullOrUndefined(this._scheduleDrawer)){for(this._scheduleDrawer=t.buildTag("div#"+this._id+"navDrawer.navDrawerMenu e-scheduledrawer"),i="<ul><li data-ej-imageClass='e-icon e-mAddEvent' data-ej-text='"+this._getLocalizedLabels("AddEvent")+"' id='addEvent'></li>",n=0;n<this.model.views.length;n++)switch(this.model.views[n]){case"day":i+="<li data-ej-imageClass='e-icon e-m"+this.model.views[n]+" e-"+this.model.views[n]+"' data-ej-text='"+this._getLocalizedLabels("Day")+"' id='"+this.model.views[n]+"'></li>";break;case"week":i+="<li data-ej-imageClass='e-icon e-m"+this.model.views[n]+" e-"+this.model.views[n]+"' data-ej-text='"+this._getLocalizedLabels("Week")+"' id='"+this.model.views[n]+"'></li>";break;case"workweek":i+="<li data-ej-imageClass='e-icon e-m"+this.model.views[n]+" e-"+this.model.views[n]+"' data-ej-text='"+this._getLocalizedLabels("WorkWeek")+"' id='"+this.model.views[n]+"'></li>";break;case"month":i+="<li data-ej-imageClass='e-icon e-m"+this.model.views[n]+" e-"+this.model.views[n]+"' data-ej-text='"+this._getLocalizedLabels("Month")+"' id='"+this.model.views[n]+"'></li>";break;case"customview":i+="<li data-ej-imageClass='e-icon e-m"+this.model.views[n]+" e-"+this.model.views[n]+"' data-ej-text='"+this._getLocalizedLabels("CustomView")+"' id='"+this.model.views[n]+"'></li>";break;case"agenda":i+="<li data-ej-imageClass='e-icon e-m"+this.model.views[n]+" e-"+this.model.views[n]+"' data-ej-text='"+this._getLocalizedLabels("Agenda")+"' id='"+this.model.views[n]+"'></li>"}i+="</ul>",this._scheduleDrawer.append(i),this.element.find(".e-scheduleinner").append(this._scheduleDrawer),this._navDrawer=!0,this._scheduleDrawer.ejNavigationDrawer({type:"overlay",targetId:this._id+"navDrawerIcon",direction:this.model.enableRTL?"left":"right",enableListView:!0,listViewSettings:{persistSelection:!0,selectedItemIndex:this.model.views.toString().toLowerCase().split(",").indexOf(this.currentView())+1,width:100,height:"auto",mouseUp:e.proxy(this._slideMenuClick,this)},position:"normal"}),this.model.enableRTL&&this._scheduleDrawer.parent().css("left","0px"),this._navDrawer=!1}},_slideMenuClick:function(t){var i,n,s,r,a,o;if(this._navDrawer)return!1;if(this._scheduleDrawer.ejNavigationDrawer("close"),"open"!=(i=t.item.find("div").hasClass("e-day")?"day":t.item.find("div").hasClass("e-week")?"week":t.item.find("div").hasClass("e-workweek")?"workweek":t.item.find("div").hasClass("e-month")?"month":t.item.find("div").hasClass("e-customview")?"customview":t.item.find("div").hasClass("e-agenda")?"agenda":"open"))this._navView=this._navSelected=!0,this.currentView()!=i&&this._viewChange(null,this.currentView(),i),this._navSelected=!1;else if("agenda"!=this.currentView()){for(n=new Date(this.currentDate()),r=0,n=new Date(n.setHours(0,0,0,0)),a=0;a<this.dateRender.length;a++)if(new Date(this.dateRender[a]).getTime()==n.getTime()){r=a;break}o="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.model.startHour+(new Date).getHours()*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot):this.res1.length-1,s="month"!=this.currentView()&&"customview"!=this.currentView()&&this.model.timeScale.enable?this.element.find(".e-draggableworkarea tr")[o].cells[r]:this.element.find(".e-monthcells")[r],e(s).addClass(".e-selectedCell").trigger(e.Event("click")),this._appointmentWindow({target:s})}},_renderAlertWindow:function(){this._alertWindow=t.buildTag("div.e-alertdialog#"+this._id+"alertWindow");var i="<div><div class='e-alerttext'></div><div class='e-alertbtn'><button id='"+this._id+"alertok' type='button' class='e-alertbutton e-alertOk e-buttonactive'>"+this._getLocalizedLabels("Ok")+"</button></div></div>";this._alertWindow.append(i),this.element.append(this._alertWindow),this._alertWindow.find(".e-alertbutton").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"100px",click:e.proxy(this._alertClose,this),cssClass:"e-flat"+this.model.cssClass}),this._alertWindow.ejDialog({width:this._mediaQuery?"75%":450,cssClass:this.model.cssClass,showOnInit:!1,enableRTL:this.model.enableRTL,enableModal:!0,title:this._getLocalizedLabels("RecurrenceAlert"),enableResize:!1,allowKeyboardNavigation:!1,close:e.proxy(this._alertClose,this)}),e("#"+this._id+"alertWindow_wrapper").addClass("e-scheduledialog").find(".e-titlebar").addClass("e-dialogheader")},_alertClose:function(t){this._alertWindow.ejDialog("close"),this._alertWindow.hasClass("e-recurAlert")?(this._alertWindow.removeClass("e-recurAlert"),e(t.target).hasClass("e-alertOk")?(this._appointmentAddWindow.find(".recurrence").ejCheckBox({checked:!0}),this._appointmentAddWindow.find("."+this._id+"summary").css("display","table-row"),this._appointmentAddWindow.find(".e-recurFinalRule").html(this._rRuleStr),this._appointmentAddWindow.find(".e-recuredit").css("display","inline"),this._appointmentAddWindow.find(".e-recurEditor").toggle(),this._appointmentAddWindow.find(".e-appwindow").css("margin-left",700).toggle().animate({"margin-left":10},300),this._mediaQuery&&this._appointmentAddWindow.parent().parent().find(".e-dialog-icon").css("display","block"),this._appointmentAddWindow.find(".done").focus()):this._appointmentAddWindow.find(".recurrence").ejCheckBox({checked:!1})):this._alertWindow.hasClass("e-seriesAlert")?(this._alertWindow.removeClass("e-seriesAlert"),e(t.target).hasClass("e-alertOk")?this._appointmentAddWindow.find("#done").click():this._seriesAlert=!0):this._alertWindow.hasClass("e-deleteAlert")&&(this._alertWindow.removeClass("e-deleteAlert"),e(t.target).hasClass("e-alertOk")&&this._deletingAppointment()),0!=this._alertWindow.find("#"+this._id+"alertcancel").length&&this._alertWindow.find("#"+this._id+"alertcancel").remove()},_renderAppointmentWindow:function(){var i,n;e("#"+this._id+"AppointmentAddEditWindow_wrapper")&&e("#"+this._id+"AppointmentAddEditWindow_wrapper").remove(),this._appointmentAddWindow=t.buildTag("div.e-scheduledialog e-appointmentaddwindow#"+this._id+"AppointmentAddEditWindow"),i="<div class='e-appwindow e-windowmargin'><form id='"+this._id+"_AddEditForm'><table class='e-table' width='100%' cellpadding='7'><tbody>",this._mediaQuery?(i+="<tr id='"+this._id+"subjectlabeltr'><td colspan='3' class='e-leftfields e-textlabel'>"+this._getLocalizedLabels("AppointmentSubject")+":</td></tr><tr id='"+this._id+"subjecttr' class='"+this._id+"subjecttr'><td colspan='3' class='e-rightfields'><input id='"+this._id+"subject' tabIndex='0' class='subject e-textbox e-animation e-inputtext' name='"+this._appointmentSettings.subject+"' type='text' /><span class='e-ripple-bar'><input id='id' class='id' type='text' name='"+this._appointmentSettings.id+"' value='' style='display: none'/></td></tr>",this.model.showLocationField&&(i+="<tr><td colspan='3' class='e-leftfields e-textlabel'>"+this._getLocalizedLabels("Location")+":</td></tr><tr><td colspan='3' class='e-rightfields'><input id='"+this._id+"location' tabIndex='0' class='location e-textbox e-animation e-inputtext' name='"+this._appointmentSettings.location+"' type='text' /><span class='e-ripple-bar'></td></tr>"),i+="<tr id='"+this._id+"_appStartTime'><td class='e-textlabel' colspan='3'>"+this._getLocalizedLabels("StartTime")+":</td></tr><tr><td width='37%'><input id='"+this._id+"startdate' class='startenddate' type='text' name='StartDate' value='' /></td><td width=31%'><input type='text' id='"+this._id+"starttime' class='startendtime' name='StartTime'/></td>",this.model.showTimeZoneFields&&(i+="<td width='31%'><input id='"+this._id+"startTimeZone' class='startutc'  name='"+this._appointmentSettings.startTimeZone+"' type='text' value=''/><div id='Timezoneliststr'></div></td>"),i+="</tr>",i+="<tr id='"+this._id+"_appEndTime'><td class='e-textlabel' colspan='3'>"+this._getLocalizedLabels("EndTime")+":</td></tr><tr><td><input id='"+this._id+"enddate' class='startenddate' type='text' name='EndDate' value='' /></td><td><input type=''text' id='"+this._id+"endtime' class='startendtime' name='EndTime'/></td>",this.model.showTimeZoneFields&&(i+="<td><input  id='"+this._id+"endTimeZone' class='endutc' name='"+this._appointmentSettings.endTimeZone+"' type='text' value=''/><div id='Timezonelistend'></div></td>"),i+="</tr>",this.model.prioritySettings.enable&&(i+="<tr><td class='e-leftfields e-textlabel' colspan='3'>"+this._getLocalizedLabels("Priority")+":</td></tr><tr><td colspan='3' class='e-rightfields'><input id= '"+this._id+"priority' class='priority' type='text' name='"+this._appointmentSettings.priority+"' value=''/><div id='prioritylist'></div></td></tr>"),i+="<tr class='"+this._id+"parrow'><td class='"+this._id+"allDay' colspan='3'><table class='e-table e-appchecktable' cellpadding='3'><tr><td><div class='e-allday e-checkboxmargin'><input id='"+this._id+"allday' tabIndex='0' class='allday' type='checkbox' name='"+this._appointmentSettings.allDay+"'/></div></td><td><div class='e-alldaytext'><label for='"+this._id+"allday'>"+this._getLocalizedLabels("AllDay")+"</label></div></td><td><div class='e-checkboxmargin e-recurrence'><input id='"+this._id+"recurrence' tabIndex='0' class='recurrence' type='checkbox' name='"+this._appointmentSettings.recurrence+"' value='recurrence'/></div></td><td><label class='e-repeatlbl' for='"+this._id+"recurrence'>"+this._getLocalizedLabels("Recurrence")+"</label></td></tr></table></td></tr>",i+="<tr id='"+this._id+"summary' class='"+this._id+"summary' style='display:none'><td class='e-textlabel'><label>"+this._getLocalizedLabels("Summary")+":</label></td></tr><tr class='"+this._id+"summary' style='display:none'><td colspan='4'><table><tr><td><label class='e-recurFinalRule'></label></td><td><div class='e-recuredit'><a class='e-recuredit' href='#' onclick='return false;'>"+this._getLocalizedLabels("Edit")+"</a><span class='e-icon e-edit_01 e-scheduleedit'></span></div></td></tr></table></td></tr>",this.model.categorizeSettings.enable&&(i+="<tr id='"+this._id+"categorizetr'><td class='e-leftfields e-textlabel' colspan='3'>"+this._getLocalizedLabels("Categorize")+":</td></tr><tr><td colspan='3' class='e-rightfields'><input id= '"+this._id+"categorize' name='"+this._appointmentSettings.categorize+"' class='e-categorizevalue' type='text' value=''/></td></tr>"),this._tempResource.length>0&&t.scheduleFeatures.resources&&(i=this._renderResourceElements(i)),i+="<tr><td colspan='3'><textarea class='e-description e-textarea e-animation e-inputtext' id='"+this._id+"description' name='"+this._appointmentSettings.description+"'></textarea><span class='e-ripple-bar'></td></tr>",i+="</tbody></table></form>",i+="<div class='e-floatright' style='width:100%'><table width='100%' class='e-table' cellpadding='5'><tr><td width='30%'><div class='e-btnmargin e-floatleft'><button id='mDelete' class='e-btndelete e-appdelete'>"+this._getLocalizedLabels("Delete")+"</button></div></td><td width='30%'><div class='e-btnmargin e-floatleft'><button id='done' class='e-btndone e-appsave e-buttonactive'>"+this._getLocalizedLabels("Done")+"</button></div></td><td width='30%'><div class='e-btnmargin e-floatleft'><button id='cancel' class='e-appointcancel cancel'>"+this._getLocalizedLabels("Cancel")+"</button></div></td></tr></table></div></div>"):(i+="<tr  id='"+this._id+"subjecttr' class='"+this._id+"subjecttr'><td class='e-leftfields e-textlabel'>"+this._getLocalizedLabels("AppointmentSubject")+":</td><td colspan='3' class='e-rightfields'><input id='"+this._id+"subject' tabIndex='0' class='subject e-textbox e-animation e-inputtext' name='"+this._appointmentSettings.subject+"' type='text' /><span class='e-ripple-bar'><input id='id' class='id' type='text' name='"+this._appointmentSettings.id+"' value='' style='display: none'/></td></tr>",this.model.showLocationField&&(i+="<tr id='"+this._id+"showLocation' class='"+this._id+"showLocation'><td class='e-leftfields e-textlabel'>"+this._getLocalizedLabels("Location")+":</td><td colspan='3' class='e-rightfields'><input id='"+this._id+"location' tabIndex='0' class='location e-textbox e-animation e-inputtext' name='"+this._appointmentSettings.location+"' type='text' /><span class='e-ripple-bar'></td></tr>"),i+="<tr id='"+this._id+"_appStartTime'><td class='e-textlabel'>"+this._getLocalizedLabels("StartTime")+":</td><td width='25%'><input id='"+this._id+"startdate' class='startenddate' type='text' name='StartDate' value='' /></td><td width=22%'><input type='text' id='"+this._id+"starttime' class='startendtime' name='StartTime'/></td>",this.model.showTimeZoneFields&&(i+="<td width='28%'><input  id='"+this._id+"startTimeZone'  class='startutc'  name='"+this._appointmentSettings.startTimeZone+"' type='text' value=''/><div id='Timezoneliststr'></div></td>"),i+="</tr>",i+="<tr id='"+this._id+"_appEndTime'><td class='e-textlabel'>"+this._getLocalizedLabels("EndTime")+":</td><td><input id='"+this._id+"enddate' class='startenddate' type='text' name='EndDate' value='' /></td><td><input type=''text' id='"+this._id+"endtime' class='startendtime' name='EndTime'/></td>",this.model.showTimeZoneFields&&(i+="<td><input id='"+this._id+"endTimeZone'  class='endutc'  name='"+this._appointmentSettings.endTimeZone+"'  type='text' value=''/><div id='Timezonelistend'></div></td>"),i+="</tr>",n=this.model.prioritySettings.enable?"<td colspan='1' class='e-textlabel "+this._id+"priorityshow'>"+this._getLocalizedLabels("Priority")+":</td><td colspan='1' class='"+this._id+"prioritylistshow'><input id='"+this._id+"priority' class='priority' type='text' name='"+this._appointmentSettings.priority+"' value='' /><div id='prioritylist'></div></td>":"",i+="<tr class='"+this._id+"parrow'>"+n+"<td class='"+this._id+"allDay' colspan='4'><table class='e-table e-appchecktable' cellpadding='3'><tr><td><div class='e-allday e-checkboxmargin'><input id='"+this._id+"allday' tabIndex='0' class='allday' type='checkbox' name='"+this._appointmentSettings.allDay+"'/></div></td><td><div class='e-alldaytext'><label for='"+this._id+"allday'>"+this._getLocalizedLabels("AllDay")+"</label></div></td><td><div class='e-checkboxmargin e-recurrence'><input id='"+this._id+"recurrence' tabIndex='0' class='recurrence' type='checkbox' name='"+this._appointmentSettings.recurrence+"' value='recurrence'/></div></td><td><label class='e-repeatlbl' for='"+this._id+"recurrence'>"+this._getLocalizedLabels("Recurrence")+"</label></td></tr></table></td></tr>",i+="<tr id='"+this._id+"summary' class='"+this._id+"summary' style='display:none'><td class='e-textlabel'><label>"+this._getLocalizedLabels("Summary")+":</label></td><td colspan='3'><table><tr><td><label class='e-recurFinalRule'></label></td><td><div class='e-recuredit'><a class='e-recuredit' href='#' onclick='return false;'>"+this._getLocalizedLabels("Edit")+"</a><span class='e-icon e-edit_01 e-scheduleedit'></span></div></td></tr></table></td></tr>",this.model.categorizeSettings.enable&&(i+="<tr id='"+this._id+"categorizetr'><td class='e-leftfields e-textlabel'>"+this._getLocalizedLabels("Categorize")+":</td><td colspan='3' class='e-rightfields'><input id= '"+this._id+"categorize' name='"+this._appointmentSettings.categorize+"' class='e-categorizevalue' type='text' value=''/></td></tr>"),this._tempResource.length>0&&t.scheduleFeatures.resources&&(i=this._renderResourceElements(i)),i+="<tr><td colspan='4'><textarea class='e-description e-textarea e-animation e-inputtext' id='"+this._id+"description' name='"+this._appointmentSettings.description+"'></textarea><span class='e-ripple-bar'></td></tr>",i+="</tbody></table></form>",i+="<div class='e-floatright'><table class='e-table' cellpadding='5'><tr><td><div class='e-btnmargin e-floatleft'><button id='done' class='e-btndone e-appsave e-buttonactive'>"+this._getLocalizedLabels("Done")+"</button></div></td><td><div class='e-btnmargin e-floatleft'><button id='cancel' class='e-appointcancel cancel'>"+this._getLocalizedLabels("Cancel")+"</button></div></td></tr></table></div></div>"),this._appointmentAddWindow.append(i),this.element.append(this._appointmentAddWindow),this._renderControls(),this._appointmentAddWindow.ejDialog({width:this._mediaQuery?"100%":600,height:this._mediaQuery?"100%":"auto",cssClass:this.model.cssClass,showOnInit:!1,enableRTL:this.model.enableRTL,enableModal:!0,title:this._getLocalizedLabels("CreateAppointmentTitle"),enableResize:!1,allowKeyboardNavigation:!1,close:e.proxy(this._onclose,this)}),this._mediaQuery?e("#"+this._id+"AppointmentAddEditWindow_wrapper").addClass("e-scheduledialog e-scheduleresponsive").find(".e-titlebar").addClass("e-dialogheader"):e("#"+this._id+"AppointmentAddEditWindow_wrapper").addClass("e-scheduledialog").find(".e-titlebar").addClass("e-dialogheader"),e("#"+this._id+"priority_popup_wrapper").addClass("e-schedulepriority"),this._on(this._appointmentAddWindow,"click","a.e-recuredit",e.proxy(this._editRecurrence,this)),this._mediaQuery&&this._appointmentAddWindow.ejDialog("refresh"),e.isFunction(e.validator)&&this._setValidation(),this._mediaQuery&&this._phoneChanges()},_renderRecurrenceEditor:function(){t.isNullOrUndefined(this._recurrenceEditor)&&(this._recurrenceEditor=t.buildTag("div.e-recurEditor#"+this._id+"recurrenceEditor").ejRecurrenceEditor({selectedRecurrenceType:1,frequencies:["daily","weekly","monthly","yearly","everyweekday"],startDate:this.currentDate(),minDate:this.model.minDate,maxDate:this.model.maxDate,firstDayOfWeek:this.model.firstDayOfWeek,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,dateFormat:this.model.dateFormat,locale:this.model.locale}));var i="<div class='e-floatright'><table class='e-table' cellpadding='5'><tr><td><div class='e-btnmargin e-floatleft'><button id='"+this._id+"donerecur'  class='recurbutton e-buttonactive'>"+this._getLocalizedLabels("Done")+"</button></div></td><td><div class='e-btnmargin e-floatleft'><button id='"+this._id+"cancelrecur' class='e-cancelrecur recurbutton'>"+this._getLocalizedLabels("Cancel")+"</button></div></td></tr></table></div>";t.isNullOrUndefined(this._appointmentAddWindow)||(e(this._recurrenceEditor).insertAfter(this._appointmentAddWindow.find(".e-appwindow")),this._appointmentAddWindow.find(".e-recurEditor").append(i),this._appointmentAddWindow.find("#"+this._id+"donerecur").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"100px",click:e.proxy(this._closeRecurence,this),cssClass:"e-flat"+this.model.cssClass}),this._appointmentAddWindow.find("#"+this._id+"cancelrecur").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"100px",click:e.proxy(this._closeRecurence,this),cssClass:"e-flat"+this.model.cssClass}),this._appointmentAddWindow.find(".e-recurEditor").css("display","none"),this._mediaQuery&&this._phoneChanges())},_refreshAppointmentWindow:function(){this._destorySubControls(e("#"+this._id+"_AddEditForm")),this._destorySubControls(e("#"+this._id+"_RecurForm")),e("#"+this._id+"AppointmentAddEditWindow_wrapper").remove(),this._renderAppointmentWindow(),e.isFunction(e.validator)&&this._setValidation()},_renderQuickAppWindow:function(){var i,n;this._quickAppointWindow=t.buildTag("div.e-scheduledialog#"+this._id+"AppointmentQuickWindow"),i="<div id='"+this._id+"_quickAppwindow' class='e-tableAppoint'><table cellpadding='7' class='e-qappwindow'><tbody>",i+="<tr><td colspan='2'><div class='e-quickstartend'></div> <div title='"+this._getLocalizedLabels("Close")+"'class='e-icon e-scheduleclose e-schedclosemargin e-pointercursor'></div></td></tr><tr><td class='e-subjectlabel'>"+this._getLocalizedLabels("AppointmentSubject")+":</td><td colspan='2' class='e-rightfields'><form id='"+this._id+"_AddForm' onsubmit='return false;'><input id='"+this._id+"quicksubject' class='subject e-textbox e-animation e-inputtext' name='"+this._appointmentSettings.subject+"'  type='text' /><span class='e-ripple-bar'></span></form></td></tr></tbody></table>",i+="<div class='e-quickcreatebottomcontainer'><div tabIndex='0' class='e-detailedapp e-detailedwindow'> "+this._getLocalizedLabels("Detailed")+" >></div><div style='margin-right:-3px;' class='e-floatright'><div class='e-quickAppDone'><button id='done' class='e-btndone e-qAppDone e-buttonactive' style='font-size:12px !important;'>"+this._getLocalizedLabels("CreateAppointmentTitle")+"</button></div></div></div></div>",this._quickAppointWindow.append(i),this.element.append(this._quickAppointWindow),this._quickAppointWindow.append(t.buildTag("div.e-quickarrow").append("<div class='e-outerarrowline'></div>").append("<div class='e-innerarrow'></div>")),(n=this._quickAppointWindow).find(".e-btndone").ejButton({showRoundedCorner:!0,click:e.proxy(this._saveAppointment,this),cssClass:"e-flat"+this.model.cssClass,enableRTL:this.model.enableRTL}),this._on(n.find(".e-scheduleclose"),"click",e.proxy(this._quickWindowClose,this)),this._on(n.find(".e-detailedapp"),"click",e.proxy(this._appointmentWindow,this)),this._quickAppointWindow.ejDialog({width:330,minHeight:0,cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableAnimation:!1,showOnInit:!1,enableResize:!1,allowDraggable:!1,showHeader:!1,allowKeyboardNavigation:!1,close:e.proxy(function(){this._processFocus()},this)}),e.isFunction(e.validator)&&this._setQuickValidation(),e("#"+this._id+"AppointmentQuickWindow_wrapper").addClass("e-scheduledialog e-schedulequickdialog").css("overflow","visible").find("#"+this._id+"AppointmentQuickWindow").addClass("e-dialogouter")},_renderQuickAppDetailsView:function(){var i;this._quickAppDetailsWindow=t.buildTag("div.e-scheduledialog#"+this._id+"AppDetailsWindow"),i="<div id='"+this._id+"_quickAppDetailswindow' class='e-tableAppoint e-appdetails'><table cellpadding='1' class='e-qappwindow'><tbody>",i+="<tr><td colspan='2'><div class='e-quicksubject e-textellipsis'></div> <div title='"+this._getLocalizedLabels("Close")+"' class='e-icon e-scheduleclose e-schedclosemargin e-pointercursor'></div></td></tr><tr><td colspan='2' class='e-quickduein e-rightfields'></td></tr><tr><td colspan='2'><div class='e-quickstartendtime'></div></td></tr></tbody></table>",i+="<div class='e-quickbottomcontainer'><div title='"+this._getLocalizedLabels("Delete")+"' class='e-icon e-delete e-scheduledelete e-pointercursor' tabIndex='0'></div><div class='e-floatright'><div class='e-editevents'><div class='e-editevent e-textellipsis' tabIndex='0'>"+this._getLocalizedLabels("Editevent")+" | </div><div class='e-editseries e-textellipsis' tabIndex='0'>"+this._getLocalizedLabels("Editseries")+" >></div> </div></div></div></div>",this._quickAppDetailsWindow.append(i),this._recurrenceFutureActions&&e("<div class='e-editfutureonly e-textellipsis' tabIndex='0'>"+this._getLocalizedLabels("Editfollowingevent")+" | </div>").insertAfter(this._quickAppDetailsWindow.find(".e-editevent")),this.element.append(this._quickAppDetailsWindow),this._quickAppDetailsWindow.append(t.buildTag("div.e-quickarrow").append("<div class='e-outerarrowline'></div>").append("<div class='e-innerarrow'></div>")),this._on(this._quickAppDetailsWindow.find(".e-scheduleclose"),"click",e.proxy(this._quickAppDetailWindowClose,this)),this._on(this._quickAppDetailsWindow.find(".e-scheduledelete"),"click",e.proxy(this._deleteAppoint,this)),this._on(this._quickAppDetailsWindow.find(".e-editevent,.e-editfutureonly,.e-editseries"),"click",e.proxy(this._editClick,this)),this._quickAppDetailsWindow.ejDialog({width:this._recurrenceFutureActions?360:270,minHeight:0,cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableAnimation:!1,showOnInit:!1,enableResize:!1,allowDraggable:!1,showHeader:!1,allowKeyboardNavigation:!1,close:e.proxy(function(){this._processFocus()},this)}),e("#"+this._id+"AppDetailsWindow_wrapper").addClass("e-scheduledialog e-schedulequickdialog").css("overflow","visible").find("#"+this._id+"AppDetailsWindow").addClass("e-dialogouter")},_editClick:function(i){if(this._editclick=!0,e(i.target).hasClass("e-editseries")&&this._quickAppDetailsWindow.find(".e-editseries").hasClass("e-disable")||e(i.target).hasClass("e-editfutureonly")&&this._quickAppDetailsWindow.find(".e-editfutureonly").hasClass("e-disable"))return!1;var n=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid));e(i.target).hasClass("e-editevent")?n[0][this._appointmentSettings.recurrence]?(this._parentId=n[0].ParentId,this._currentAction=t.Schedule.Actions.EditOccurrence,this._showAppointmentDetails(this._appUid,!0)):t.isNullOrUndefined(n[0][this._appointmentSettings.recurrence])?(this._currentAction=t.Schedule.Actions.Save,this._showAppointmentDetails(this._appUid,!0)):(this._currentAction=t.Schedule.Actions.Save,this._showAppointmentDetails(n[0].Guid,!0)):e(i.target).hasClass("e-editfutureonly")?n[0][this._appointmentSettings.recurrence]&&(this._parentId=n[0].ParentId,this._currentAction=t.Schedule.Actions.EditFutureOccurrences,this._showAppointmentDetails(this._appUid,!0)):e(i.target).hasClass("e-editseries")&&n[0][this._appointmentSettings.recurrence]&&(this._parentId=null==n[0][this._appointmentSettings.recurrenceId]?n[0].ParentId:n[0][this._appointmentSettings.recurrenceId],this._currentAction=t.Schedule.Actions.EditSeries,this._showAppointmentDetails(this._parentId,!1)),this._editclick=!1,this.model.showQuickWindow&&this._quickAppDetailsWindow.ejDialog("close")},_deleteAppoint:function(i){var n,s;!this.model.readOnly&&this.model.allowDelete&&(t.isNullOrUndefined(i)||!t.isNullOrUndefined(this._quickAppDetailsWindow)&&this._quickAppDetailsWindow.ejDialog("isOpen")?new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0][this._appointmentSettings.recurrence]||!this.model.showDeleteConfirmationDialog?(this.model.showQuickWindow&&this._quickAppDetailsWindow.ejDialog("isOpen")&&this._quickAppDetailsWindow.ejDialog("close"),this._deletingAppointment()):this._deleteConfirmation():(s=(n=e(i.target).parent()).hasClass("e-appointment")||n.hasClass("e-monthappointment")||n.hasClass("e-alldayappointment")||n.hasClass("e-agendaappointment")?n:n.parents(".e-appointment,.e-alldayappointment,.e-monthappointment,.e-agendaappointment"),this._appUid=s.attr("data-guid"),this._mediaQuery&&(this._mAppId=this._appUid),new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0][this._appointmentSettings.recurrence]||!this.model.showDeleteConfirmationDialog?this._deletingAppointment():this._deleteConfirmation()))},_deletingAppointment:function(){if(this._appUid=t.isNullOrUndefined(this._appUid)?this._deleteUid:this._appUid,this._appUid){this._currentAction=t.Schedule.Actions.Delete;var e=this._getAppointmentByParentId(this._mediaQuery?t.isNullOrUndefined(this._mAppId)?this._appUid:this._mAppId:this._appUid);e[this._appointmentSettings.recurrence]?this.model.showRecurrenceAlert?(t.isNullOrUndefined(this._recurEditWindow)&&this._renderRecurEditWindow(),this._parentId=e.ParentId,this._recurEditWindow.ejDialog("open"),this._recurEditWindow.focus(),this._deleteBeforeOpen()):(this._currentAction=this._actionType=t.Schedule.Actions.DeleteSeries,this._deleteApp(e.ParentId)):this._deleteApp(this._mediaQuery?t.isNullOrUndefined(this._mAppId)?this._appUid:this._mAppId:this._appUid)}t.isNullOrUndefined(this._alertWindow)||this._alertWindow.ejDialog("close")},_deleteConfirmation:function(){!t.isNullOrUndefined(this._quickAppDetailsWindow)&&this.model.showQuickWindow&&this._quickAppDetailsWindow.ejDialog("close"),t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),0==this._alertWindow.find(".e-alertCancel").length&&(this._alertWindow.find(".e-alertbtn").append("<button id='"+this._id+"alertcancel' class='e-alertbutton e-alertCancel'></button>"),this._alertWindow.find(".e-alertCancel").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"100px",click:e.proxy(this._alertClose,this),cssClass:"e-flat"+this.model.cssClass}),this._mediaQuery&&this._alertWindow.find(".e-alertbutton").css({margin:"0px 20px 15px 10px"}),e("#"+this._id+"alertWindow").ejDialog({width:this._mediaQuery?"90%":450,title:this._getLocalizedLabels("MouseOverDeleteTitle")}),this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("DeleteConfirmation")),this._alertWindow.find(".e-alertCancel").html(this._getLocalizedLabels("Cancel")),this._alertWindow.find(".e-alertOk").html(this._getLocalizedLabels("Delete"))),this._alertWindow.ejDialog("isOpen")||(this._alertWindow.addClass("e-deleteAlert"),this._alertWindow.ejDialog("open"),this._alertWindow.find(".e-alertOk").attr("tabIndex",0).focus())},_quickAppDetailWindowClose:function(){this._quickAppDetailsWindow.ejDialog("close"),this._processFocus()},_alldayCheck:function(){if(this._appointmentAddWindow.find(".allday").ejCheckBox("option","checked"))this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker({value:"12"==this._timeMode?"12:00 AM":"00:00",enabled:!1}),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker({value:"12"==this._timeMode?"11:59 PM":"23:59",enabled:!1}),this._appointmentAddWindow.find(".startutc,.endutc").ejDropDownList({enabled:!1});else{if(""!=this._tempStart||""!=this._tempEnd){var e=t.format(new Date((new Date).setHours(0,0,0)),this._pattern.t,this.model.locale),i=t.format(new Date((new Date).setHours(23,59,59)),this._pattern.t,this.model.locale);this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker({value:this._tempStart}),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker({value:this._tempEnd}),("12"==this._timeMode?this._tempStart==e&&this._tempEnd==i:"00:00"==this._tempStart&&"23:59"==this._tempEnd)&&(this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker({value:t.format(new Date("1/1/2000 "+this.model.workHours.start+":00:00"),this._pattern.t,this.model.locale)}),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker({value:t.format(new Date("1/1/2000 "+this.model.workHours.start+":30:00"),this._pattern.t,this.model.locale)}))}this._appointmentAddWindow.find(".startendtime").ejTimePicker({enabled:!0}),this._appointmentAddWindow.find(".startutc,.endutc").ejDropDownList({enabled:!0}),this._endSlotChange=!0,this._startSlotChange=!0}},_renderRecurEditWindow:function(){var i;e("#"+this._id+"RecurrenceEdit_wrapper")&&e("#"+this._id+"RecurrenceEdit_wrapper").remove(),this._recurEditWindow=t.buildTag("div.e-scheduledialog#"+this._id+"RecurrenceEdit");var n=t.buildTag("div.e-recureditmsg",this._getLocalizedLabels("RecurrenceEditMessage")),s=this._getLocalizedLabels("RecurrenceEditOnly"),r=this._getLocalizedLabels("RecurrenceEditSeries"),a=t.buildTag("div.e-recureditbtns").append(t.buildTag("button.e-editonly#"+this._id+"Editonly",s,{},{name:"recurrenceeditonly",value:s})).append(t.buildTag("button.e-editseries#"+this._id+"EditSeries",r,{},{name:"recurrenceeditseries",value:r}));this._recurrenceFutureActions&&(i=this._getLocalizedLabels("RecurrenceEditFollowingEvent"),t.buildTag("button.e-editfutureonly#"+this._id+"EditFutureOnly",i,{},{name:"recurrenceeditfutureonly",value:i}).insertAfter(a.find(".e-editonly"))),this._recurEditWindow.append(n).append(a),a.find(".e-editonly,.e-editfutureonly,.e-editseries").ejButton({cssClass:"e-flat"+this.model.cssClass,enableRTL:this.model.enableRTL,showRoundedCorner:!0}),this._on(this._recurEditWindow,"click",".e-editonly,.e-editfutureonly,.e-editseries",e.proxy(this._recurBtnClick,this)),this._on(this._recurEditWindow,"click","div.e-scheduleclose",e.proxy(this._recrConformClose,this)),this._recurEditWindow.appendTo(this.element),this._mediaQuery&&this._recurEditWindow.find(".e-editonly,.e-editfutureonly,.e-editseries").css({"margin-top":"10px"}),this._recurEditWindow.ejDialog({width:this._mediaQuery?"90%":this._recurrenceFutureActions?500:360,cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,title:this._getLocalizedLabels("RecurrenceEditTitle"),showOnInit:!1,enableModal:!0,enableResize:!1,allowKeyboardNavigation:!1,close:e.proxy(this._processFocus,this),beforeOpen:e.proxy(this._deleteBeforeOpen,this)}),e("#"+this._id+"RecurrenceEdit_wrapper").addClass("e-scheduledialog")},_recrConformClose:function(){t.isNullOrUndefined(this._recurEditWindow)||this._recurEditWindow.ejDialog("close"),this._processFocus()},_deleteBeforeOpen:function(){e("#"+this._id+"RecurrenceEdit_title").addClass("e-dialogheader"),e("#"+this._id+"RecurrenceEdit_title").find(".e-title").html(this._currentAction==t.Schedule.Actions.Delete?this._getLocalizedLabels("RecurrenceDeleteTitle"):this._getLocalizedLabels("RecurrenceEditTitle"))},_recurBtnClick:function(i){var n,s,r,a,o,l,d,h,p,m;if(e(i.target).hasClass("e-editonly"))if(this._editOnlyClicked=!0,this._currentAction==t.Schedule.Actions.Delete){if(-1!=(n=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0])[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID")){if(this._trigger("actionBegin",{id:this._appUid,requestType:"appointmentDelete",currentAction:t.Schedule.Actions.DeleteOccurrence}))return!1;var c=null==n[this._appointmentSettings.recurrenceId]?n.ParentId:n[this._appointmentSettings.recurrenceId],u=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,c)),g=n[this._appointmentSettings.recurrence]?{appointment:n,currentAction:t.Schedule.Actions.DeleteOccurrence,recurrenceCollection:{occurrences:n,parentData:u[0]}}:{appointment:n,currentAction:t.Schedule.Actions.DeleteOccurrence};if(this._trigger("beforeAppointmentRemove",g))return!1;for(D=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"Guid",S=this._dataManager.remove(D,n[D],this.model.appointmentSettings.query._fromTable),this._groupEditing||this._groupEdit?new t.DataManager(this._currentAppointmentData).remove(this._appointmentSettings.id,n):this.dataSource()instanceof t.DataManager&&new t.DataManager(this._currentAppointmentData).remove("Guid",n),this._refreshCellsHeight(),this._groupEditing&&this._groupEdit?(s=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,n[this._appointmentSettings.startTime].toString())),s=new t.DataManager(s).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,n[this._appointmentSettings.id]))):s=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:s},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:s},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:s},"Guid"),r=0;r<s.length;r++)this._appointmentRemove(s[r]),this._refreshDayAppointments(s[r]);this._trigger("appointmentRemoved",{appointment:u,requestType:"appointmentDeleted",currentAction:t.Schedule.Actions.DeleteOccurrence}),this._trigger("actionComplete",{appointment:u,requestType:"appointmentDelete",currentAction:t.Schedule.Actions.DeleteOccurrence}),!t.isNullOrUndefined(S)&&e.isFunction(S.promise)&&this.dataSource()instanceof t.DataManager&&(m=this,S.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&m._processUrlBinding(i)}))}else{if(this._trigger("actionBegin",{id:this._appId,requestType:"appointmentDelete",currentAction:t.Schedule.Actions.DeleteOccurrence}))return!1;c=null==n[this._appointmentSettings.recurrenceId]?n.ParentId:n[this._appointmentSettings.recurrenceId];var _=this._deleteOcurrence(c,n[this._appointmentSettings.startTime]),f=this._timeZoneAppointments(_[0],""),w=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,n[this._appointmentSettings.id]));g=n[this._appointmentSettings.recurrence]?{appointment:n,currentAction:t.Schedule.Actions.DeleteOccurrence,recurrenceCollection:{occurrences:n,parentData:w[0]}}:{appointment:n,currentAction:t.Schedule.Actions.DeleteOccurrence};if(this._trigger("beforeAppointmentRemove",g))return this._recurEditWindow.ejDialog("close"),!1;var D=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",S=this._dataManager.update(D,f,this.model.appointmentSettings.query._fromTable),y=this._timeZoneAppointments(f,"reverse");if(new t.DataManager(this._currentAppointmentData).update("AppTaskId",y),this._refreshCellsHeight(),this._groupEditing||this._groupEdit?(a=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,n[this._appointmentSettings.startTime].toString())),a=new t.DataManager(a).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,n[this._appointmentSettings.id]))):a=this._processed.filter(function(e){return e.Guid==n.Guid}),a.length>1)for(d=[],o=0;o<a.length;o++)(l=this._processed.filter(function(e){return e.Guid==a[o].Guid})).length>0&&d.push(l[0]),new t.DataManager(this._processed).remove("Guid",a[o].Guid),new t.DataManager(this._renderedApp).remove("Guid",a[o].Guid),new t.DataManager(this._renderedAllDay).remove("Guid",a[o].Guid);else d=this._processed.filter(function(e){return e.Guid==n.Guid}),new t.DataManager(this._processed).remove("Guid",this._appUid),new t.DataManager(this._renderedApp).remove("Guid",this._appUid),new t.DataManager(this._renderedAllDay).remove("Guid",this._appUid),this._appUid=null;for(h=0,p=d.length;h<p;h++)this._appointmentRemove(d[h]),this._refreshDayAppointments(d[h]);this._trigger("appointmentRemoved",{appointment:n,requestType:"appointmentDeleted",currentAction:t.Schedule.Actions.DeleteOccurrence}),this._trigger("actionComplete",{appointment:n,requestType:"appointmentDelete",currentAction:t.Schedule.Actions.DeleteOccurrence}),!t.isNullOrUndefined(S)&&e.isFunction(S.promise)&&this.dataSource()instanceof t.DataManager&&(m=this,S.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&m._processUrlBinding(i)}))}this._currentViewAppointments=this.getCurrentViewAppointments(),this.model.showAppointmentNavigator&&this._nextPrevButton()}else this._currentAction=t.Schedule.Actions.EditOccurrence,this._showAppointmentDetails(this._appUid,!0);else e(i.target).hasClass("e-editfutureonly")?(this._editOnlyClicked=!1,this._currentAction==t.Schedule.Actions.Delete?(this._actionType=t.Schedule.Actions.DeleteFutureOccurrences,this._deleteApp(this._appUid)):(this._currentAction=t.Schedule.Actions.EditFutureOccurrences,this._showAppointmentDetails(this._appUid,!0))):(this._editOnlyClicked=!1,this._currentAction==t.Schedule.Actions.Delete?(this._actionType=t.Schedule.Actions.DeleteSeries,this._deleteApp(this._appUid)):(this._currentAction=t.Schedule.Actions.EditSeries,this._showAppointmentDetails(this._parentId,!1)));t.isNullOrUndefined(this._recurEditWindow)||this._recurEditWindow.ejDialog("close")},_repeat:function(e){var i,n;e.isInteraction&&(t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),0==this._appointmentAddWindow.find(".e-recurEditor").length&&this._renderRecurrenceEditor(),e.isChecked||this._recurChecked?this._currentAction==t.Schedule.Actions.EditSeries||""!=this._appointmentAddWindow.find(".e-recurFinalRule").html()?this._appointmentAddWindow.find("."+this._id+"summary").css("display","table-row"):(this._mediaQuery&&this._appointmentAddWindow.parent().parent().find(".e-dialog-icon").css("display","none"),this._appointmentAddWindow.find(".e-appwindow").toggle(),this._appointmentAddWindow.find(".e-recurEditor").css("margin-left",700).toggle().animate({"margin-left":10},400),(i=this._appointmentAddWindow.find(".e-recurrenceeditor").data("ejRecurrenceEditor")).clearRecurrenceFields(),this._appointmentAddWindow.find(".e-recurEditor").css("display","block"),n=new Date(this._appointmentAddWindow.find(".startenddate").ejDatePicker("option","value")),i.model.startDate=n,i.setDefaultValues()):(this._currentAction==t.Schedule.Actions.EditSeries||""!=this._appointmentAddWindow.find(".e-recurFinalRule").html())&&this._appointmentAddWindow.find("."+this._id+"summary").css("display","none"),this._recurChecked=!1)},_resourceDaysReorder:function(e){var i,n,s,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],a=[],o=[],l=[],d=[],h=this._firstdayofweek;do{h>6&&(h=0),a.push(r[h]),h++}while(a.length<7);for(i=0;i<e.length;i++)o.push(e[i].toLowerCase());for(n=0;n<o.length;n++)-1!=a.indexOf(o[n])&&(l[a.indexOf(o[n])]=o[n]);for(s=0;s<l.length;s++)t.isNullOrUndefined(l[s])||d.push(l[s]);return d},_daysReorder:function(e){var t=[],i=e,n=[0,1,2,3,4,5,6];do{i>6&&(i=0),t.push(n[i]),i++}while(t.length<7);return t},_getWeekDays:function(){for(var e,t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],i=[],n=0;n<this.model.workWeek.length;n++)-1!=(e=t.indexOf(this.model.workWeek[n]))&&i.push(e);return i},_resourceRenderDates:function(){var i,n,s,r,a,o,l,d,h;if(this._tempResource.length>1){for(i=this._resourceSort(),s=[],n=0;n<i.length;n++)-1!=(l=this._tempResource[this._tempResource.length-1].resourceSettings.dataSource.indexOf(i[n]))&&s.push(i[n]);this.res1=s}else s=this._tempResource[this._tempResource.length-1].resourceSettings.dataSource;var p=[],m=[];for(this._resDateRen={},r=0;r<s.length;r++)if(a=s[r][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek],t.isNullOrUndefined(a))d=e.extend(!0,[],this._dateRender),h=this._getWeekDays(),d=d.filter(function(e){return-1!=h.indexOf(new Date(e).getDay())}),e.merge(p,d),this._resDateRen[r]=d;else{for(a=this._resourceDaysReorder(a),o=0;o<a.length;o++)-1==(l=this._getDayNameIndex(a[o].capitalizeFirstString()))&&(l=this._getDayNameIndex(a[o])),p.push(this._renderDates[l]),m.push(this._renderDates[l]);this._resDateRen[r]=m,m=[]}return p},_resourceCustomDates:function(){var i,n,s,r,a,o,l,d,h,p,m;if(this._tempResource.length>1){for(i=this._resourceSort(),s=[],n=0;n<i.length;n++)-1!=this._tempResource[this._tempResource.length-1].resourceSettings.dataSource.indexOf(i[n])&&s.push(i[n]);this.res1=s}else s=this._tempResource[this._tempResource.length-1].resourceSettings.dataSource;var c=[],u=[];for(this._resCustomDate={},this._resCustomCollection=[],r=0;r<s.length;r++){if(a=s[r][this._tempResource[this._tempResource.length-1].resourceSettings.renderDates],t.isNullOrUndefined(a)){h=this._firstweekdate(this.currentDate());do{u.push(new Date(h.getFullYear(),h.getMonth(),h.getDate()).getTime()),h.setDate(h.getDate()+1)}while(u.length<7)}else{if("object"==e.type(a[0]))for(l=0;l<a.length;l++){var g=a[l].start,_=a[l].end,f=Math.round(Math.abs((_.getTime()-g.getTime())/864e5))+1,w=g;for(p=0;p<f;p++)u.push(new Date(w.getFullYear(),w.getMonth(),w.getDate()+p).getTime())}else for(d=0;d<a.length;d++)o=new Date(new Date(a[d]).getTime()),u.push(new Date(o.getFullYear(),o.getMonth(),o.getDate()).getTime());u.sort()}for(p=0;p<u.length;p++)c.push(u[p]);u.length>1&&(this._resCustomDate[r]=u,(m={}).id=s[r].id,m.renderDates=u,this._resCustomCollection.push(m),u=[])}return c},_customviewRenderDates:function(){var i,n,s,r,a;if(t.isNullOrUndefined(this.model.renderDates))a=this._monthdates();else if(this._calculateCustomDays(),a=[],i=this._getWeekDays(),"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0){if("object"==e.type(this.model.renderDates[0]))for(n=0;n<this.model.renderDates.length;n++){var o=new Date(t.parseDate(t.format((new Date).parseISO8601(this.model.renderDates[n].start),this._datepattern(),this.model.locale))),l=new Date(t.parseDate(t.format((new Date).parseISO8601(this.model.renderDates[n].end),this._datepattern(),this.model.locale))),d=Math.round(Math.abs((l.getTime()-o.getTime())/864e5))+1,h=o;for(s=0;s<d;s++)this.model.showWeekend?a.push(new Date(h.getFullYear(),h.getMonth(),h.getDate()+s).getTime()):(c=new Date(h.getFullYear(),h.getMonth(),h.getDate()+s),-1!=i.indexOf(c.getDay())&&a.push(new Date(h.getFullYear(),h.getMonth(),h.getDate()+s).getTime()))}else if("string"==e.type(this.model.renderDates[0])||"date"==e.type(this.model.renderDates[0]))for(m=this._renderDays,r=0;r<m;r++)c=new Date(new Date(t.parseDate(t.format((new Date).parseISO8601(this.model.renderDates[r]),this._datepattern(),this.model.locale))).getTime()),this.model.showWeekend?a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime()):-1!=i.indexOf(c.getDay())&&a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime());cusomRenderDates=a.sort(),this._customOrientation=cusomRenderDates.length>7?"horizontal":this.model.orientation}else{this._setCurrentDate&&"horizontal"!=this.model.orientation&&(this.oldDate=this.currentDate(),this._renderStart.getTime()<this.currentDate().getTime()&&this._renderEnd.getTime()>this.currentDate().getTime()?this.currentDate(new Date(this._renderStart)):(this._renderStart=new Date(this.currentDate()),this._renderEnd=new Date(this._renderStart.getTime()+864e5*(this._renderDays-1))));var p=this._renderDays<=7?new Date(this.currentDate()):"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this._firstweekdate(this.currentDate()):new Date(this.currentDate()),m=this._renderDays<=7?this._renderDays:this._numDays,c=new Date(p.getFullYear(),p.getMonth(),p.getDate());for(r=0;r<m;r++)c=new Date(c.getFullYear(),c.getMonth(),c.getDate()),this.model.showWeekend?a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime()):-1!=i.indexOf(c.getDay())&&a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime()),c.setDate(c.getDate()+1)}return 0==this._intialRenderedDates.length&&(this._intialRenderedDates=a),0==a.length&&(a=this._intialRenderedDates),a},_getRenderDates:function(){var t,n,s,r;if(this.currentDate(new Date(new Date(this.currentDate()).setHours(0,0,0,0))),this._dateRender=[],"week"===this.currentView()||"workweek"===this.currentView()){if(this.model.showWeekend){t=this._firstweekdate(this.currentDate());do{this._dateRender.push(new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()),t.setDate(t.getDate()+1)}while(this._dateRender.length<7);this._renderDates=e.extend(!0,[],this._dateRender)}else{s=this._getWeekDays(),n=this._firstweekdate(this.currentDate());do{-1!=s.indexOf(n.getDay())&&this._dateRender.push(new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()),n=new Date(new Date(n).getTime()+864e5)}while(this._dateRender.length!=this.model.workWeek.length);this._renderDates=e.extend(!0,[],this._dateRender)}if(this._resWorkWeek)this.dateRender=this._dateRender=this._resourceRenderDates();else if("workweek"==this.currentView()&&this.model.showWeekend){var a=this,o=this._daysReorder(this._firstdayofweek),l=this.model.workWeek.map(function(e){return a._dayNamesArray.indexOf(e)}),d=o.filter(function(e){return-1!==l.indexOf(e)}),h=this._dateRender.map(function(e){if(-1!=d.indexOf(new Date(e).getDay()))return e});this._dateRender=h.filter(function(e){return e!=i})}}else"month"===this.currentView()?this._dateRender=this._monthdates():"customview"===this.currentView()?this._dateRender=this._resCustomView?this._resourceCustomDates():this._customviewRenderDates():(this.model.showWeekend||-1==(s=this._getWeekDays()).indexOf(this.currentDate().getDay())&&(r=this._getPrevNextDateCount(this.currentDate(),"next"),this.currentDate(new Date(this.currentDate().getTime()+864e5*r))),this._dateRender.push(new Date(this.currentDate().getFullYear(),this.currentDate().getMonth(),this.currentDate().getDate()).getTime()));return this._dateRender},_getAgendaDateCount:function(){var e=this.model.agendaViewSettings.daysInAgenda>0?this.model.agendaViewSettings.daysInAgenda-1:0;if(!this.model.showWeekend){var t=this._getWeekDays(),i=0,n=agendaDate=new Date(this.currentDate());do{-1!=t.indexOf(n.getDay())&&i++,n=new Date(new Date(n).getTime()+864e5)}while(this.model.agendaViewSettings.daysInAgenda!=i);e=(n.getTime()-agendaDate.getTime())/864e5-1}return e},_getCurrentDateHeaderValue:function(){var i,n,s,r,a,o=this._resWorkWeek?this._renderDates:this._dateRender;return"day"===this.currentView()?i=this._formatDateHeaderValue(new Date(o[0]),new Date(o[o.length-1])):"week"===this.currentView()||"workweek"===this.currentView()||"agenda"==this.currentView()?(n="agenda"==this.currentView()?new Date(this.currentDate()):new Date(o[0]),s="agenda"==this.currentView()?new Date(new Date(this.currentDate()).setDate(n.getDate()+this._getAgendaDateCount())):new Date(o[o.length-1]),"agenda"===this.currentView()&&0==this._getAgendaDateCount()?(i=this._formatDateHeaderValue(n,null),0):i=this._formatDateHeaderValue(n,s)):"customview"===this.currentView()?1==o.length?""==this.model.dateFormat||t.isNullOrUndefined(this.model.dateFormat)?i=(r=this._pattern.D.toString().replace(/\s*dddd,?/,"").trim()).toLowerCase().startsWith("d")?t.format(new Date(o[0]),"dd MMM yyyy",this.model.locale):r.toLowerCase().startsWith("m")?t.format(new Date(o[0]),"MMM dd, yyyy",this.model.locale):t.format(new Date(o[0]),r,this.model.locale):i=t.format(new Date(o[0]),this.model.dateFormat,this.model.locale):o.length>1&&o.length<=7&&!this._resCustomView&&!t.isNullOrUndefined(this.model.renderDates)&&"object"==e.type(this.model.renderDates)?i=this._formatDateHeaderValue(new Date(o[0]),new Date(o[o.length-1])):(a=o,o=o.concat().sort(),i=new Date(o[0]).getFullYear()==new Date(o[o.length-1]).getFullYear()?new Date(o[0]).getMonth()==new Date(o[o.length-1]).getMonth()?t.format(new Date(o[0]),"MMM yyyy",this.model.locale):t.format(new Date(o[0]),"MMM",this.model.locale)+" - "+t.format(new Date(o[o.length-1]),"MMM yyyy",this.model.locale):t.format(new Date(o[0]),"MMM yyyy",this.model.locale)+" - "+t.format(new Date(o[o.length-1]),"MMM yyyy",this.model.locale),o=a):i=t.format(new Date(this.currentDate()),"MMM yyyy",this.model.locale),i},_firstweekdate:function(e){var t,i=new Date(e),n=i.getDay();return 0==this._firstdayofweek?0!=n&&(i.setDate(i.getDate()-n),!this.model.timeScale.enable&&("workweek"==this.currentView()||this._oneWeek)&&this._resize&&(i=new Date(this._dateRender[0]))):0!=this._firstdayofweek&&(t=i.getDay()-this._firstdayofweek<0?7+i.getDay()-this._firstdayofweek:i.getDay()-this._firstdayofweek,i=new Date(i.setDate(i.getDate()-t))),i},_formatDateHeaderValue:function(e,i){var n,s;if("day"===this.currentView()||"agenda"===this.currentView()&&0==this._getAgendaDateCount())""==this.model.dateFormat||t.isNullOrUndefined(this.model.dateFormat)?s=(n=this._pattern.D.toString().replace(/\s*dddd,?/,"").trim()).toLowerCase().startsWith("d")?t.format(new Date(e),"dd MMM yyyy",this.model.locale):n.toLowerCase().startsWith("m")?t.format(new Date(e),"MMM dd, yyyy",this.model.locale):t.format(new Date(e),n,this.model.locale):s=t.format(new Date(e),this.model.dateFormat,this.model.locale);else{if(""!=this.model.dateFormat&&!t.isNullOrUndefined(this.model.dateFormat))return t.format(e,this.model.dateFormat,this.model.locale)+" - "+t.format(i,this.model.dateFormat,this.model.locale);s=(n=this._pattern.D.toString().replace(/\s*dddd,?/,"").trim()).toLowerCase().startsWith("d")?new Date(e).getYear()===new Date(i).getYear()?new Date(e).getMonth()===new Date(i).getMonth()?t.format(new Date(e),"dd",this.model.locale)+" - "+t.format(new Date(i),"dd MMM yyyy",this.model.locale):t.format(new Date(e),"dd MMM",this.model.locale)+" - "+t.format(new Date(i),"dd MMM yyyy",this.model.locale):t.format(new Date(e),"dd MMM yyyy",this.model.locale)+" - "+t.format(new Date(i),"dd MMM yyyy",this.model.locale):n.toLowerCase().startsWith("m")?new Date(e).getYear()===new Date(i).getYear()?new Date(e).getMonth()===new Date(i).getMonth()?t.format(new Date(e),"MMM dd",this.model.locale)+" - "+t.format(new Date(i),"dd, yyyy",this.model.locale):t.format(new Date(e),"MMM dd",this.model.locale)+" - "+t.format(new Date(i),"MMM dd, yyyy",this.model.locale):t.format(new Date(e),"MMM dd, yyyy",this.model.locale)+" - "+t.format(new Date(i),"MMM dd, yyyy",this.model.locale):t.format(new Date(e),n,this.model.locale)+" - "+t.format(new Date(i),n,this.model.locale)}return s},_getHeaderAllDayCellsCount:function(){var i,n,s,r,a,o=[],l=[],d=1;if(this.dateRender=[],this._value=[],this.value=[],"vertical"==this.model.orientation&&"vertical"==this._customOrientation){if(t.isNullOrUndefined(this.model.dateHeaderTemplateId)||"month"==this.currentView()||this._isCustomMonthView())for(s=this._getColumnCount().length,0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources&&(d=this._getMultipleResourceCellsCount(s).resCount,0!=this._tempResource.length&&0==this._tempResource[0].resourceSettings.dataSource.length&&(d=1)),a=0;a<s;a++)r=("month"===this.currentView()||this._isCustomMonthView())&&0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?this._dayFullNames[new Date(this._dateRender[a]).getDay()]:this._dayShortNames[new Date(this._dateRender[a]).getDay()],n=new Date(new Date(this._dateRender[a]).setHours(0,0,0,0)).getTime()===new Date((new Date).setHours(0,0,0,0)).getTime()?"e-headerToday":"",i="month"===this.currentView()||this._isCustomMonthView()?{currentDay:r,currentDateClass:"",cellToday:""}:"day"===this.currentView()?0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?{currentDay:t.format(new Date(this._dateRender[a]),this._pattern.D,this.model.locale),currentDateClass:"",cellToday:n}:{currentDay:r+" "+new Date(this._dateRender[a]).getDate(),currentDateClass:"",cellToday:n}:{currentDay:r+" "+new Date(this._dateRender[a]).getDate(),currentDateClass:new Date(this._dateRender[a]).getDate()===new Date(this.currentDate()).getDate()?"e-activeview":"",cellToday:n},o.push(i),this._value.push(a);else o=this._getUserDateheaderTemplate(),0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources&&(d=this._getMultipleResourceCellsCount(s).resCount,0!=this._tempResource.length&&0==this._tempResource[0].resourceSettings.dataSource.length&&(d=1));if(this._resWorkWeek||this._resCustomView)l=e.merge(l,o),this.dateRender=e.merge(this.dateRender,this._dateRender),this.value=e.merge(this.value,this._value);else for(a=0;a<d;a++)this.dateRender=e.merge(this.dateRender,this._dateRender),l=e.merge(l,o),this.value=e.merge(this.value,this._value)}else l=this._getHorizontalheaderCellCount(this._culture);return l},_findResourceIndex:function(e,i,n,s,r){var a,o,l;if(!t.isNullOrUndefined(n))for(a=n.toString().split(","),t.isNullOrUndefined(r)||(o=r.toString().split(",")),l=0;l<e.length;l++)if(t.isNullOrUndefined(r)){if(e[l][i]==n||e[l][i]==a[0])return l}else if(!(e[l][i]!=n&&e[l][i]!=a[0]||e[l][s]!==r&&e[l][s]!=o[0]))return l},_renderHeaderAllDayTemplate:function(){var i,n,s,r,a,o,l;if("agenda"!=this.currentView())if(!t.scheduleFeatures.horizontal||"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation){var d=t.buildTag("div.e-headerscrolldiv"),h=t.buildTag("div.e-headeralldaydiv","",{},{}).css({position:"relative",overflow:"hidden"}),p=0,m=t.buildTag("table.e-table e-headrealldaytable","",{},{}).css({width:"100%"}),c=t.buildTag("tbody"),u=t.buildTag("tr.e-dateheader"),g=this._getHeaderAllDayCellsCount(),_=this.headTemplate.render({cols:g,view:this.currentView(),colspan:1});0!=this._tempResource.length&&t.scheduleFeatures.resources&&(c=this._renderMultipleResourceHeaderTemplate(c,g),p=t.isNullOrUndefined(this.model.group)?0:this._grouping.length,0!=this._tempResource.length&&0==this._tempResource[0].resourceSettings.dataSource.length&&(p=0));var f=t.buildTag("div.e-navigate","",{},{}),w=t.buildTag("table.e-table e-headertable","",{},{}),D=t.buildTag("tbody"),S=t.buildTag("tr.e-headertr"),y=p+("month"==this.currentView()||this._isCustomMonthView()?1:2),v=[];for(i=0;i<y;i++)"month"==this.currentView()||this._isCustomMonthView()?v.push({tdClass:i==y-1?"e-monthleftcells":"e-resourceleftindentcells",divClass:i==y-1?"e-dateheadercell":""}):v.push({tdClass:i==y-1?"e-leftindent":i==y-2?"e-settingsindent":"e-resourceleftindentcells",divClass:i==y-1?"e-schedulesettings e-textellipsis":i==y-2?"e-dateheadercell":""});this.model.showAllDayRow||new t.DataManager(v).remove("tdClass","e-leftindent"),n=this.leftIndent.render({trs:v}),this.model.timeScale.enable?this.aTR.append(t.buildTag("td").append(f.append(w.append(D.append(S.append(t.buildTag("td.e-empty").addClass("month"==this.currentView()||this._isCustomMonthView()?"e-monthempty":"").append(n)).append(t.buildTag("td").append(d.append(h.append(m.append(c.append(u.append(_))))))).append(t.buildTag("td.e-emptyscrolltd","",{},{}).css({width:"month"==this.currentView()||this._isCustomMonthView()?"0px":this._mediaQuery?"0px":"18px"}))))))):this.aTR.append(t.buildTag("td").append(f.append(w.append(D.append(S.append(t.buildTag("td").append(d.append(h.append(m.append(c.append(u.append(_))))))).append(t.buildTag("td.e-emptyscrolltd","",{},{}).css({width:"month"==this.currentView()||this._isCustomMonthView()?"0px":this._mediaQuery?"0px":"18px"}))))))),"month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable&&this.model.showAllDayRow&&((s=!t.isNullOrUndefined(this.model.allDayCellsTemplateId))&&(r=this._getUserAllDayCellsTemplate()),a=this.alldayTemp.render({cols:g,colspan:1,userTemp:s,userHtml:r}),c.append(t.buildTag("tr").append(a)))}else 0!=this._tempResource.length&&t.scheduleFeatures.resources&&this._renderMultipleResourceHeaderTemplate(null,null),this._renderHorizontalHeaderBar();else{f=t.buildTag("div.e-navigate","",{},{}),w=t.buildTag("table.e-table e-headertable","",{},{}),D=t.buildTag("tbody"),S=t.buildTag("tr.e-headertr"),d=t.buildTag("div.e-headerscrolldiv"),h=t.buildTag("div.e-headeralldaydiv","",{},{}).css({position:"relative",overflow:"hidden"}),m=t.buildTag("table.e-table e-headrealldaytable","",{},{}).css({width:"100%"}),c=t.buildTag("tbody tr"),g=[{headertext:this._getLocalizedLabels("Date"),className:"e-datecolumn"},{headertext:this._getLocalizedLabels("Time"),className:"e-timecolumn"},{headertext:this._getLocalizedLabels("Event"),className:"e-eventcolumn"}];if(0!=this._tempResource.length&&t.scheduleFeatures.resources){for(this._renderMultipleResourceHeaderTemplate(null,null),o=[],l=0;l<this.render_Resources.length;l++)o.push({headertext:"",className:"e-resourcecolumn"});t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length||(g=e.merge(o,g))}_=this.agendaheadTemplate.render({cols:g}),this.aTR.append(t.buildTag("td").append(f.append(w.append(D.append(S.append(t.buildTag("td").append(d.append(h.append(m.append(c.append(_)))))).append(t.buildTag("td.e-emptyscrolltd","",{},{}).css({width:"18px"})))))))}t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("renderHeaderAllDayTemplate")},_getDateTime:function(e){var t,i,n=e;return this._cellIndex=this.model.timeScale.enable?n.is(".e-workcells, .e-alldaycells, .e-horizontmonthheaderdaytd")||this._isCustomMonthView()&&this._oneWeek?n.index():7-(7*(parseInt(n.index()/7)+1)-n.index())+7*n.parent().index():"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&"month"==this.currentView()||"customview"==this.currentView()&&this._dateRender.length>=7?7-(7*(parseInt(n.index()/7)+1)-n.index())+7*n.parent().index():n.index(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(this._cellIndex=this.model.timeScale.enable?"month"===this.currentView()||this._isCustomMonthView()?this._cellIndex:Math.floor(this._cellIndex/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))):n.index(),this._workCellIndex=n.parent().index()),t="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation||"customview"==this.currentView()&&this._dateRender.length<=7?this._resWorkWeek||this._resCustomView?this._dateRender:this.dateRender:this._dateRender:this.monthDays,t=("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&"customview"==this.currentView()&&this._dateRender.length<=7?this._dateRender:t,i=new Date(t[this._cellIndex]),!(this.model.minDate>i||this.model.maxDate<i)&&(n.hasClass("e-workcells")&&this.model.showTimeScale&&"month"!==this.currentView()&&!this._isCustomMonthView()?this._calcCurrentTime(i,n,""):(this.cur_StartTime=new Date(new Date(i).setHours(0,0,0)),this.cur_EndTime=new Date(new Date(i).setHours(23,59,59))),n.hasClass("e-horizontmonthheaderdaytd")?{startTime:new Date(this.cur_StartTime),endTime:this.cur_EndTime,currentDate:i,cellIndex:this._cellIndex}:{startTime:new Date(this.cur_StartTime),endTime:this.cur_EndTime,currentDate:i,cellIndex:this._cellIndex,resources:0!=this._tempResource.length?this._getResourceValue(n,this._cellIndex):null})},_getAgendaAppointment:function(i){var n,s,r,a,o,l=[];if(i.hasClass("e-datecolumn")){if(n=e(i).attr("rowspan"),(s=e(i).parent().nextAll("tr").andSelf().slice(0,parseInt(n))).length>0)for(r=0;r<s.length;r++)a=e(s[r]).find(".e-eventcolumn .e-agendaappointment").attr("data-guid"),l.push(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,a))[0])}else o=(l=i.hasClass("e-agendaappointment")?i:i.parent().find(".e-agendaappointment")).attr("data-guid"),this._mediaQuery&&(this._mAppId=o),l=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,o));return l},_monthdates:function(){var e,t,i,n,s=new Date(this.currentDate()),r=s._currentMonthDates(),a=r.start._currentWeekDates(this._firstdayofweek).start,o=r.end._currentWeekDates(this._firstdayofweek).end;this.model.showWeekend||this.model.showNextPrevMonth||(a=(e=this._excludePrevMonthDates(r)).start,o=e.end),t=[],this.monthDays=[],i=this._getWeekDays(),n=new Date(a.getFullYear(),a.getMonth(),a.getDate());do{this.model.showWeekend?(t.push(new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()),new Date(s).getMonth()===new Date(n).getMonth()&&this.monthDays.push(new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime())):-1!=i.indexOf(new Date(n).getDay())&&(t.push(new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()),new Date(s).getMonth()===new Date(n).getMonth()&&this.monthDays.push(new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime())),n.setDate(n.getDate()+1)}while(n.getTime()<=o.getTime());return"vertical"==this.model.orientation&&"vertical"==this._customOrientation?t:this.monthDays},_excludePrevMonthDates:function(e){var t,i=new Date(e.start),n=new Date(e.end),s=this._getWeekDays(),r=function(e,t){return e.filter(function(e){return-1!=t.indexOf(new Date(e).getDay())}).map(function(e){return new Date(e).getMonth()})},a=i._currentWeekDates(this._firstdayofweek),o=this._getWeekDates(a.start,a.end),l=r(o,s);if(-1==l.indexOf(i.getMonth())){t=new Date(a.end);do{t=new Date(t.setDate(t.getDate()+1))}while(-1==s.indexOf(t.getDay()));i=new Date(t)}else i=new Date(o[0]);if(a=n._currentWeekDates(this._firstdayofweek),-1==(l=r(o=this._getWeekDates(a.start,a.end),s)).indexOf(n.getMonth())){t=new Date(a.start);do{t=new Date(t.setDate(t.getDate()-1))}while(-1==s.indexOf(t.getDay()));n=new Date(t)}else n=new Date(o.slice(-1)[0]);return{start:i,end:n}},_getWeekDates:function(e,t){for(var i=[],n=e;n<=t;)i.push(new Date(n).getTime()),n=new Date(n.setDate(n.getDate()+1));return i},_getStartEndTime:function(){var e,i,n,s,r,a,o=[];if(this._timeInitial=0,i=this._culture.calendar,"vertical"===this.model.orientation&&"vertical"===this._customOrientation)if("month"==this.currentView()||this._isCustomMonthView())for(n=this._dateRender.length,s=this.model.showWeekend?7:this.model.workWeek.length,a=0;a<n/s;a++)o.push(a);else if(t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId))for(r=new Date((new Date).setHours(0,0,0,0)),a=60*this.model.startHour;a<60*this.model.endHour;)"12"==this._timeMode?new Date(new Date(r).setHours(this.model.endHour,0,0,0)).getTime()>new Date(new Date(r).setHours(0,a,0,0)).getTime()&&(e=(a/60===this.model.startHour||a/60==12)&&i.AM&&i.PM?t.format(new Date(new Date(r).setHours(0,a,0,0)),"hh tt",this.model.locale):t.format(new Date(new Date(r).setHours(0,a,0,0)),"hh mm",this.model.locale),o.push({time:e,id:a/60})):o.push({time:new Date(new Date(r).setHours(0,a,0,0)).toTimeString().slice(0,5)+" 00"}),a+=this.model.timeScale.majorSlot;else o=this._getUserTimeCellsTemplate();else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&(o=this._getHoriStartEndTime(i));return o},_getWorkCellsCount:function(){var e,t,i,n,s=[],r=this.model.showWeekend?7:this.model.workWeek.length;if(this.model.timeScale.enable)if("month"==this.currentView()||this._isCustomMonthView())for(i=this._dateRender.length,n=0;n<i/r;n++)s.push({crow:n,cwidth:this.model.cellWidth,cheight:this.model.cellHeight});else for(e=this._getStartEndTime(),t=0,n=0;n<this.model.timeScale.minorSlotCount*e.length;n++){if((t+=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)>60*(this.model.endHour-this.model.startHour)){s.push({crow:n,cwidth:this.model.cellWidth,cheight:this.model.cellHeight});break}s.push({crow:n,cwidth:this.model.cellWidth,cheight:this.model.cellHeight})}else for(i=this._resWorkWeek||this._resCustomView?1:this._dateRender.length,n=0;n<i/r;n++)s.push({crow:n,cwidth:this.model.cellWidth,cheight:this.model.cellHeight});return s},_renderContentAreaTemplate:function(){var e,i,n=t.buildTag("div.e-workareadiv"),s=t.buildTag("table.e-table e-worktable","",{},{}),r=t.buildTag("tbody"),a=t.buildTag("tr"),o=t.buildTag("td"),l=t.buildTag("div#"+this._id+"_scroller");if(this.$WorkCellDiv=t.buildTag("div.e-draggableworkarea"),"agenda"!=this.currentView())if(!t.scheduleFeatures.horizontal||"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation){this.$TimeCellTD=t.buildTag("td","",{},{}).addClass("month"==this.currentView()||this._isCustomMonthView()?"e-monthleftindent":"e-workleftindent");var d,h,p=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)&&!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId)||!t.isNullOrUndefined(this.model.timeScale.minorSlotTemplateId),m=!t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId),c="month"==this.currentView()||this._isCustomMonthView()?1:0,u=this._timeSlotCount(p,m);!p&&!m||"month"==this.currentView()||this._isCustomMonthView()?d=this.timeCellTemplate.render({timerows:this._getStartEndTime(),cols1:u.columnCount,viewclass:c,timeScale:this.model.timeScale.minorSlotCount,userTemplateId:p,template:m}):(u.columnCount.pop(),d=this.userTimeCellTemplate.render({timerows:this._getStartEndTime(),cols1:u.columnCount,viewclass:c,timeScale:this.model.timeScale.minorSlotCount,cheight:this.model.cellHeight,userTemplateId:p,timeValue1:u.timeValue1,template:m})),(e=!t.isNullOrUndefined(this.model.workCellsTemplateId))&&(i=this._getUserWorkCellsTemplate()),h="month"!=this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable?this.workcellTemp.render({cellrows:this._getWorkCellsCount(),cols1:this.value,orientation:this.model.orientation,timeScale:this.model.timeScale.minorSlotCount,userTemplate:e,userHtml:i}):this.monthcellTemp.render({cellrows:this._getWorkCellsCount(),cols1:this.value,orientation:this.model.orientation,timeScale:this.model.timeScale.minorSlotCount,userTemplate:e,userHtml:i,tenable:this.model.timeScale.enable,cview:"month"!==this.currentView()&&!this._isCustomMonthView()}),this.model.timeScale.enable?this.wTR.append(t.buildTag("td").append(n.append(s.append(r.append(a.append(this.$TimeCellTD.append(d)).append(o.append(l.append(this.$WorkCellDiv.append(h))))))))):this.wTR.append(t.buildTag("td").append(n.append(s.append(r.append(a.append(o.append(l.append(this.$WorkCellDiv.append(h)))))))))}else this._renderHorizontalContent(n,s,r,a,o,l);else this.wTR.append(t.buildTag("td").append(n.append(s.append(r.append(a.append(o.append(l.append(this.$WorkCellDiv))))))));t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("renderContentAreaTemplate")},_renderQueryCellInfo:function(i,n,s){var r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S;if("renderHeaderBar"==i&&this._trigger("queryCellInfo",{element:s,requestType:"headerBar"}),"appointment"==i&&this._trigger("queryCellInfo",{appointment:n,element:s,requestType:"appointment"}),"blockAppointment"==i&&this._trigger("queryCellInfo",{appointment:n,element:s,requestType:"blockoutCells"}),"emptycell"==i&&(r=this.aTR.find(".e-emptyscrolltd"),this._trigger("queryCellInfo",{element:e(r[0]),requestType:"emptytd"})),"renderAgendaContent"==i){for(T=this.aTR.find(".e-headercells"),w=0;w<T.length;w++)this._trigger("queryCellInfo",{element:e(T[w]),cellType:"agendaheadercells",requestType:"agendacells"});var y=this.element.find(".e-draggableworkarea").find(".e-datecolumn"),v=this.element.find(".e-draggableworkarea").find(".e-timecolumn"),C=this.element.find(".e-draggableworkarea").find(".e-eventcolumn");if(0!=this._tempResource.length)for(a=this.element.find(".e-draggableworkarea").find(".e-resourcecolumn"),w=0;w<a.length;w++)D=this._getAgendaAppointment(e(a[w])),this._trigger("queryCellInfo",{appointment:D[0],element:e(a[w]),cellType:"agendaresourcecell",requestType:"agendacells"});for(w=0;w<y.length;w++)D=this._getAgendaAppointment(e(y[w])),this._trigger("queryCellInfo",{currentAppointmentDate:new Date(new Date(D[0][this._appointmentSettings.startTime]).setHours(0,0,0)),appointments:D,element:e(y[w]),cellType:"agendadatecell",requestType:"agendacells"});for(w=0;w<v.length;w++)D=this._getAgendaAppointment(e(v[w])),this._trigger("queryCellInfo",{appointment:D[0],element:e(v[w]),cellType:"agendatimecell",requestType:"agendacells"});for(w=0;w<C.length;w++)D=this._getAgendaAppointment(e(C[w])),this._trigger("queryCellInfo",{appointment:D[0],element:e(C[w]),cellType:"agendaeventcell",requestType:"agendacells"})}else if("renderHeaderAllDayTemplate"==i)if("vertical"==this.model.orientation&&"vertical"==this._customOrientation){var T=this.aTR.find(".e-headercells"),b=this.res1,R=this._getHeaderAllDayCellsCount();if(this.res1=b,this.model.showAllDayRow)for(o=this.aTR.find(".e-alldaycells"),w=0;w<o.length;w++)S={cellIndex:(D=this._getDateTime(e(o[w]))).cellIndex,currentDate:D.currentDate,resources:D.resources},this._trigger("queryCellInfo",{cell:S,element:e(o[w]),requestType:"alldaycells"});if("agenda"!=this.currentView())for(l=T.length/this.res1.length,w=0;w<T.length;w++)d=Math.floor(w/l),this._trigger("queryCellInfo",{resource:this.res1[d],currentDay:R[w].currentDay,element:e(T[w]),requestType:"headercells"});if(0!=this._tempResource.length){var A=[],I=this.aTR.find(".e-resourcecells"),k=this.aTR.find(".e-resourceleftindentcells");for(h=0;h<this._tempResource.length;h++)e.merge(A,this._tempResource[h].resourceSettings.dataSource);for(w=0;w<I.length;w++)this._trigger("queryCellInfo",{resource:A[w],element:e(I[w]),cellType:"headercells",requestType:"resourceheadercells"});for(w=0;w<k.length;w++)this._trigger("queryCellInfo",{element:e(k[w]),cellType:"headerdivcells",requestType:"resourceheadercells"})}"month"==this.currentView()&&this._isCustomMonthView()||(p=this.aTR.find(".e-leftindent"),this._trigger("queryCellInfo",{element:p,requestType:"leftindentcells"})),m="month"==this.currentView()||this._isCustomMonthView()?this.aTR.find(".e-monthleftcells"):this.aTR.find(".e-settingsindent"),this._trigger("queryCellInfo",{element:m,requestType:"leftheadercells"})}else{var x=this.aTR.find(".e-headercells");b=this.res1,R=this._getHeaderAllDayCellsCount();this.res1=b;var O=this.aTR.find(".e-horizontaltimetd "),M=this.aTR.find(".e-horizontalalternatetd"),N=this._getStartEndTime();for(w=0;w<O.length;w++)this._trigger("queryCellInfo",{cell:N[w],element:e(O[w]),cellType:"timecell",requestType:"timecells"});for(w=0;w<M.length;w++)this._trigger("queryCellInfo",{element:e(M[w]),cellType:"timeampmcell",requestType:"timecells"});if("agenda"!=this.currentView())for(w=0;w<x.length;w++)this._trigger("queryCellInfo",{currentDay:R[w].currentDay,element:e(x[w]),requestType:"headercells"});for(c=this.aTR.find(".e-horizontmonthheaderdaytd"),w=0;w<c.length;w++)S={cellIndex:(D=this._getDateTime(e(c[w]))).cellIndex,currentDate:D.currentDate},this._trigger("queryCellInfo",{cell:S,element:e(c[w]),requestType:"headerdate"});if(0!=this._tempResource.length)for(u=this.aTR.find(".e-horizontalheader"),w=0;w<u.length;w++)this._trigger("queryCellInfo",{element:e(u[w]),requestType:"resourcegroupheader"})}else if("renderContentAreaTemplate"==i)if("vertical"==this.model.orientation&&"vertical"==this._customOrientation){for(M=this.wTR.find(".e-timecelldivs"),timeCellAMPM=this.wTR.find(".e-ampmdisplay"),N=this._getStartEndTime(),"month"!=this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable?(_=this.wTR.find(".e-workcells"),g="workcells"):(_=this.wTR.find(".e-monthcells"),g="monthcells"),w=0;w<M.length;w++)this._trigger("queryCellInfo",{cell:N[w],element:e(M[w]).parent(),cellType:"timecell",requestType:"timecells"});for(w=0;w<timeCellAMPM.length;w++)this._trigger("queryCellInfo",{element:e(timeCellAMPM[w]),cellType:"timeampmcell",requestType:"timecells"});for(w=0;w<_.length;w++)D=this._getDateTime(e(_[w])),S="month"!=this.currentView()&&"customview"!=this.currentView()&&this.model.timeScale.enable?{cellIndex:D.cellIndex,startTime:D.startTime,endTime:D.endTime,resources:D.resources}:{cellIndex:D.cellIndex,currentDate:D.currentDate,resources:D.resources},this._trigger("queryCellInfo",{cell:S,element:e(_[w]),requestType:g})}else{if(_=t.isNullOrUndefined(this.$WorkCellDiv)?null:this.$WorkCellDiv.find(".e-workcells"),0!=this._tempResource.length&&!t.isNullOrUndefined(this.$WorkCellDiv)){for(A=this._resourceSort(),f=this.wTR.find(".e-horizontresheaderdiv"),w=0;w<f.length;w++)this._trigger("queryCellInfo",{resource:A[e(f[w]).index()],element:e(f[w]),cellType:"headerdivcells",requestType:"resourceheadercells"});for(w=0;w<f.length;w++)this._trigger("queryCellInfo",{resource:A[e(e(f[w]).parent()).index()],element:e(f[w]),cellType:"headercells",requestType:"resourceheadercells"})}if(!t.isNullOrUndefined(_))for(w=0;w<_.length;w++)e(_[w]).hasClass("e-childworkcell")&&e(_[w]).hasClass("e-workcells")&&(S={cellIndex:(D=this._getDateTime(e(_[w]))).cellIndex,startTime:D.startTime,endTime:D.endTime,resources:D.resources},this._trigger("queryCellInfo",{cell:S,element:e(_[w]),requestType:"workcells"}))}},_timeSlotCount:function(i,n){var s,r,a,o,l,d=0,h=[],p=[];if(!i&&!n||"month"===this.currentView()||this._isCustomMonthView()){for(s=this._getStartEndTime(),r="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.model.timeScale.minorSlotCount:this.model.timeScale.minorSlotCount-1,g=0;g<s.length;g++){for(o=0;o<r;o++)if((d+=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)>60*(this.model.endHour-this.model.startHour)){if(h.push(o),o==this.model.timeScale.minorslotcount-2){d=0;break}}else h.push(o);p.push(h),d+=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount,h=[]}a=p}else{for(o=0;o<this.model.timeScale.minorSlotCount;o++)h.push(o);a=h}if((i||n)&&"month"!==this.currentView()&&!this._isCustomMonthView()){var m=e.templates(e(this.model.timeScale.minorSlotTemplateId).html()),c=e.templates(e(this.model.timeScale.majorSlotTemplateId).html()),u=[],g=0;for(o=this.model.startHour;o<this.model.endHour;){for(var _=[],f=(d=this.model.timeScale.majorSlot+g,g);g<d;)l=g,g*=6e4,this._timeMode,l!=f||t.isNullOrUndefined(this.model.timeScale.majorSlotTemplateId)?_.push(m.render(object={date:new Date(new Date(this._dateRender[0]).setHours(o,0,0,g))}).trim()):_.push(c.render(object={date:new Date(new Date(this._dateRender[0]).setHours(o,0,0,g))}).trim()),g=g/6e4+this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount;o=this.model.timeScale.majorSlot>60?o+this.model.timeScale.majorSlot/60:g>=60?o+1:o,g=t.isNullOrUndefined(g)?0:g%60,u.push(_)}n=!0}return{columnCount:a,timeValue1:u,strTime:s}},_renderAgendaContent:function(){var e,i,n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y;this.element.find(".e-agendacellstab").remove();var v,C,T,b,R,A,I,k,x,O,M,N,H,W,E,L=new Date(new Date(this.currentDate()).setHours(0,0,0,0)),U=[],F=[];for(this.model.group||(this.res1=["0"]),e=this._getLocalizedLabels("Recurrence"),i=this._getAgendaDateCount(),n=0;n<this.res1.length;n++)if(c=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(L)).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(new Date(L).setDate(L.getDate()+i)).setHours(23,59,59))),c=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?c.and(this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim(),t.FilterOperators.equal,this.res1[n][this._tempResource[this._tempResource.length-1].resourceSettings.id]):c,s=new t.DataManager(this._processed).executeLocal((new t.Query).where(c)),s=this._appointmentSort(s),this._currentViewAppointments=this.getCurrentViewAppointments(),s.length>0){if(r=[],!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources){for(a=this.res1[n][this._tempResource[this._tempResource.length-1].resourceSettings.groupId],f=(_=this._resCollection).length-1;f>0;f--)o=new t.DataManager(_[f-1].dataSource).executeLocal((new t.Query).where(_[f-1].id,t.FilterOperators.equal,a)),r.push({resId:"resLevel_"+f+"_"+o[0][_[f-1].id],text:o[0][_[f-1].text]}),a=o[0][_[f-1].groupId];r.reverse()}for(l=!(t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length||!t.scheduleFeatures.resources),d=s.length,E=(W=!!this.model.resourceHeaderTemplateId)?this._getResourceHeadTemplate(this.res1[n]):"",h=0,new Date(L)<this.model.minDate&&(h=Math.floor((new Date(this.model.minDate)-new Date(L))/864e5)),new Date(new Date(L).setDate(L.getDate()+i))>this.model.maxDate&&(i-=Math.floor((new Date(new Date(L).setDate(L.getDate()+i))-new Date(this.model.maxDate))/864e5));h<=i;h++)if((this.model.showWeekend||(p=this._getWeekDays(),m=new Date(new Date(L).setDate(L.getDate()+h)),-1!=p.indexOf(m.getDay())))&&(c=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(new Date(L).setDate(L.getDate()+h))).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(new Date(L).setDate(L.getDate()+h)).setHours(23,59,59))),c=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?c.and(this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim(),t.FilterOperators.equal,this.res1[n][this._tempResource[this._tempResource.length-1].resourceSettings.id]):c,u=new t.DataManager(s).executeLocal((new t.Query).where(c)),(u=this._resourceOrderSort(u)).length>0)){U.push(U.length+1);u.length;var V=!0,z=!1;for(f=0;f<u.length;f++)f==u.length-1&&(z=!0),v="12"==this._timeMode?t.format(u[f][this._appointmentSettings.startTime],this._pattern.t,this.model.locale):t.format(u[f][this._appointmentSettings.startTime],"HH:mm",this.model.locale),C="12"==this._timeMode?t.format(u[f][this._appointmentSettings.endTime],this._pattern.t,this.model.locale):t.format(u[f][this._appointmentSettings.endTime],"HH:mm",this.model.locale),T="<strong class='e-agendaday'>"+t.format(new Date(u[f][this._appointmentSettings.startTime]),"dd",this.model.locale)+"</strong><span class='e-agendaweek'>"+t.format(new Date(u[f][this._appointmentSettings.startTime]),"dddd",this.model.locale)+"</span><span class='e-agendamonth'>"+t.format(new Date(u[f][this._appointmentSettings.startTime]),"MMM, yyyy",this.model.locale)+"</span>",b=!t.isNullOrUndefined(u[f][this._appointmentSettings.allDay])&&JSON.parse(u[f][this._appointmentSettings.allDay])?"<div class='e-icon e-circle e-scheduleallday'></div>"+this._getLocalizedLabels("AllDay"):v+" - "+C,R=!t.isNullOrUndefined(u[f][this._appointmentSettings.recurrence])&&JSON.parse(u[f][this._appointmentSettings.recurrence])?-1!=u[f][this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID")?"<span class='e-icon e-schedulerepeatedit' title='"+e+"'/>"+u[f][this._appointmentSettings.subject]:"<span class='e-icon e-schedulerepeat' title='"+e+"'/>"+u[f][this._appointmentSettings.subject]:u[f][this._appointmentSettings.subject],A=this.model.categorizeSettings.enable&&!t.isNullOrUndefined(u[f][this._appointmentSettings.categorize])&&""!=u[f][this._appointmentSettings.categorize]?this._getCategorizeColor(u[f]):0!=this._tempResource.length&&t.scheduleFeatures.resources?this._getResourceColor(u[f]):{appointData:"",appointCustomcss:"",appointtextcolor:""},I=!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources&&0!=this._tempResource.length?this.res1[n][this._tempResource[this._tempResource.length-1].resourceSettings.text]:"",x=(k=!!this.model.appointmentTemplateId)?u[f][this._appointmentSettings.recurrence]?-1!=u[f][this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID")?"<span class='e-icon e-schedulerepeatedit' title='"+e+"'/>"+this._getUserAppointmentTemplate(u[f]):"<span class='e-icon e-schedulerepeat' title='"+e+"'/>"+this._getUserAppointmentTemplate(u[f]):this._getUserAppointmentTemplate(u[f]):"",M=(O=!!this.model.agendaViewSettings.dateColumnTemplateId)?this._getUserTemplate(this.model.agendaViewSettings.dateColumnTemplateId,u[f]):"",H=(N=!!this.model.agendaViewSettings.timeColumnTemplateId)?this._getUserTemplate(this.model.agendaViewSettings.timeColumnTemplateId,u[f]):"",F.push({readOnly:this.model.readOnly,allowDelete:this.model.allowDelete,edittext:this._getLocalizedLabels("Edit"),deletetext:this._getLocalizedLabels("Delete"),userResourceId:W,userResourceHtml:E,userDateId:O,userDateHtml:M,userTimeId:N,userTimeHtml:H,userAppTemplId:k,userTemplate:x,resGroup:r,resName:I,resChild:l,resRowSpan:d,id:u[f].AppTaskId,uid:u[f].Guid,dayRowSpan:u.length,dayChild:V,dayBorderBottom:z,ignoreColorFilter:"msie"==this._browserInfo.name&&this._browserInfo.version<=9&&!A.applyFilter,background:A.appointData,date:T,time:b,event:R}),V=!1,l=!1}}if(g=this.agendacellTemp.render({rows:U,cols:F}),this.element.find(".e-draggableworkarea").append(g),!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources)for(_=this.render_Resources,f=0;f<_.length-1;f++)for(w=0;w<_[f].length;w++)D="resLevel_"+(f+1)+"_"+_[f][w][this._resCollection[f].id],this.element.find("."+D).first().attr("rowspan",this.element.find("."+D).length),this.element.find("."+D).slice(1).addClass("e-hide"),this.element.find(".e-hide").remove(),this.model.resourceHeaderTemplateId&&this.element.find("."+D).children().empty().append(this._getResourceHeadTemplate(_[f][w]));S=this.element.find("div#"+this._id+"_scroller"),t.isNullOrUndefined(S.data("ejScroller"))&&(S.ejScroller({enableRTL:this.model.enableRTL,height:this.scHeight-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top)-1,width:parseInt(this.element.width())-2,cssClass:this.model.cssClass}),this._mediaQuery||this._nextPrevAppointment(this.model.showAppointmentNavigator)),S.ejScroller("refresh"),y=this.model.enableRTL?"e-borderright":"e-borderleft",S.ejScroller("isVScroll")?this.element.find(".e-emptyscrolltd").addClass(y).show()&&this.element.find(".e-draggableworkarea").height(this.element.find(".e-draggableworkarea").height()+1):this.element.find(".e-emptyscrolltd").removeClass(y).hide(),this.element.find(".e-vscroll").css("left",this.model.enableRTL?0:this.element.outerWidth()-(S.ejScroller("isVScroll")?19:0)),this.element.find(".e-mobileNavigation").css(this.model.enableRTL?"right":"left",this.element.outerWidth()-36),this.element.find(".e-headeralldaydiv").width(this.element.find(".e-draggableworkarea").width()),this.model.showAppointmentNavigator&&this._nextPrevButton(),t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("renderAgendaContent")},_getUserTemplate:function(t,i){var n=e.extend(n,i);return n.View=this.currentView(),e.templates(e(t).html()).render(n)},_getColumnCount:function(){var e,t=[],i="month"===this.currentView()||this._isCustomMonthView()?this._isCustomMonthView()&&this._renderDays<=7?this._renderDays:this.model.showWeekend?7:this.model.workWeek.length:this._dateRender.length;for(this._resCustomView&&"customview"==this.currentView()&&(i=this._dateRender.length),e=0;e<i;e++)t.push(e);return t},_bindAppointmentsData:function(i){if(t.isNullOrUndefined(this.model.appointmentSettings)||null==this.dataSource())this.model.showAppointmentNavigator&&this._nextPrevButton();else if(this.model.enablePersistence&&(this.model.appointmentSettings.query=new t.Query,this._enablePersist=!0),!this.dataSource()instanceof t.DataManager&&this.dataSource().dataSource.offline&&this._dateFormat(this.dataSource()),this.dataSource()instanceof t.DataManager&&!this.dataSource().dataSource.offline)this._initDataSource(i);else{this._bindAppointments=this.dataSource().length>0;var n="Refresh"!=i&&this._viewchange;this._angular=this._bindAppointments&&!this._bindapp&&!this._setmodelvalue&&1==n&&this._obj.length>0&&this.dataSource()[0][this._appointmentSettings.id]==this._obj[0][this._appointmentSettings.id],this._true=!!this.model.isDST,this._timeZoneOffset=t.isNullOrUndefined(this.model.timeZone)&&!this.model.isDST?(new Date).getTimezoneOffset()-this._stdTimezoneOffset():0,this._currentAppointmentData=this.dataSource(),e.extend(!0,this._obj=[],this.dataSource()),!t.isNullOrUndefined(this.dataSource().dataSource)&&this.dataSource().dataSource.json&&(this._currentAppointmentData=this.dataSource().dataSource.json),this._dataCount=this._currentAppointmentData.length,0==this._dataCount&&(this._processed=[],this._currentViewAppointments=[]),this._dataCount>0&&(this._dataProcessing(this._currentAppointmentData),this.element.children().length>0&&this._renderAppointmentAll()),this.model.showAppointmentNavigator&&this._nextPrevButton(),this.tzone=this.model.timeZone,this._bindapp=!1,this._setmodelvalue=!1,this._viewchange=!1}},_initDataSource:function(i){var n,s,r,a,o,l,d;if(this._trigger("actionBegin",{currentAction:i,requestType:"dataBinding"}),n=this._columnToSelect(this.model.appointmentSettings,i),s=e.extend(!0,[],n._params),this._true=!!this.model.isDST,this._timeZoneOffset=t.isNullOrUndefined(this.model.timeZone)&&!this.model.isDST?(new Date).getTimezoneOffset()-this._stdTimezoneOffset():0,n._params=[],(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"==this.currentView())r=new Date(new Date(this._dateRender[0]).setHours(0,0,0)),a=new Date(new Date(this._dateRender[this._dateRender.length-1]).setHours(0,0,0)),n.addParams("StartDate",r).addParams("EndDate",a);else for(o=new Date(new Date(this.currentDate()).setHours(0,0,0)),new Date(o.getTime()+6e4*-this._timeZoneCalculate()),n.addParams("CurrentDate",o).addParams("CurrentView",this.currentView()).addParams("CurrentAction",i),l=0;l<s.length;l++)"CurrentDate"!=s[l].key&&"CurrentView"!=s[l].key&&"CurrentAction"!=s[l].key&&n.addParams(s[l].key,s[l].value);d=this,this.dataSource().executeQuery(n).done(function(e){d._dataCount=e.result.length,t.isNullOrUndefined(e.result.result)||(d._dataCount=e.result.count+1,e.result=e.result.result),d._bindAppointments=e.result.length>0,d._currentAppointmentData=e.result,d._dataProcessing(e.result),d._renderAppointmentAll(),d.model.showAppointmentNavigator&&d._nextPrevButton(),d._trigger("actionComplete",{requestType:"dataBound"})}),this.model.showAppointmentNavigator&&this._nextPrevButton()},_bindCategorizeData:function(){t.isNullOrUndefined(this.model.categorizeSettings)||(this._categoryInfo=[],!t.isNullOrUndefined(this.model.categorizeSettings.query)&&this.model.categorizeSettings.query instanceof t.Query||(this.model.categorizeSettings.query=t.Query()),this.model.categorizeSettings.dataSource instanceof t.DataManager?this._initCategorizeData(this.model.categorizeSettings):this._categoryInfo.push(this.model.categorizeSettings))},_initCategorizeData:function(e){var i=this._columnToSelect(e),n=this;e.dataSource.executeQuery(i).done(function(i){t.isNullOrUndefined(n._appointmentAddWindow)&&n._renderAppointmentWindow(),e.dataSource=i.result,n._categoryInfo.push(e),n._renderCategoryItems(n._appointmentAddWindow)})},_bindPriorityData:function(){t.isNullOrUndefined(this.model.prioritySettings)||(this._priorityInfo=[],!t.isNullOrUndefined(this.model.prioritySettings.query)&&this.model.prioritySettings.query instanceof t.Query||(this.model.prioritySettings.query=t.Query()),this.model.prioritySettings.dataSource instanceof t.DataManager?this._initPriorityData(this.model.prioritySettings):this._priorityInfo.push(this.model.prioritySettings))},_initPriorityData:function(e){var i=this._columnToSelect(e),n=this;e.dataSource.executeQuery(i).done(function(i){t.isNullOrUndefined(n._appointmentAddWindow)&&n._renderAppointmentWindow(),e.dataSource=i.result,n._priorityInfo.push(e),n._renderPriorityItems(n._appointmentAddWindow)})},_bindBlockData:function(){if(!t.isNullOrUndefined(this.model.blockoutSettings)&&(!t.isNullOrUndefined(this.model.blockoutSettings.query)&&this.model.blockoutSettings.query instanceof t.Query||(this.model.blockoutSettings.query=t.Query()),this.model.blockoutSettings.dataSource instanceof t.DataManager)){var e=this._columnToSelect(this.model.blockoutSettings),i=this;this.model.blockoutSettings.dataSource.executeQuery(e).done(function(e){i.model.blockoutSettings.dataSource=e.result,i._renderBlockAppointments()})}},_dateFormat:function(e){if(e.length>0&&"Invalid Date"==new Date(e[0][this._appointmentSettings.startTime]).toString())for(var t=0,i=e.length;t<i;t++)e[t][this._appointmentSettings.startTime]=(new Date).parseISO8601(e[t][this._appointmentSettings.startTime]),e[t][this._appointmentSettings.endTime]=(new Date).parseISO8601(e[t][this._appointmentSettings.endTime])},_columnToSelect:function(e){var i=t.Query();return t.isNullOrUndefined(e.tableName)||this.dataSource().dataSource.url.match(e.tableName+"$")?i=e.query:(i=e.query).from(e.tableName),i},_getColumns:function(e){var i=[];for(var n in e)"tableName"!==n&&"query"!==n&&"dataSource"!==n&&(t.isNullOrUndefined(e[n])||i.push(e[n]));return i},_sortAppById:function(e){return e.sort(function(e,t){var i=e.AppTaskId,n=t.AppTaskId;return i<n?-1:i>n?1:0}),e},_stdTimezoneOffset:function(){return Math.max(new Date((new Date).getFullYear(),0,1).getTimezoneOffset(),new Date((new Date).getFullYear(),6,1).getTimezoneOffset())},_timeZoneCalculate:function(){var i,n,s,r,a=(new Date)._isDST()&&!this.model.isDST?-(new Date).getTimezoneOffset()+this._timeZoneOffset:-(new Date).getTimezoneOffset();return i=a,t.isNullOrUndefined(this.model.timeZone)||(-1!==this.model.timeZone.indexOf(":")?(t.isNullOrUndefined(this.tzone)&&(this.tzone=this.model.timeZone),n=this.model.timeZone.split(" ")[this.model.timeZone.split(" ").length-1].split(":"),s=this.tzone.split(" ")[this.tzone.split(" ").length-1].split(":"),e.isNumeric(parseInt(n[0]))&&parseInt(n[0]).toString.length<=2||-1!==n[0].indexOf("UTC")?(r=-(60*(-1!==this.model.timeZone.indexOf("-")?-parseInt(n[0].replace(/\D/g,"")):parseInt(n[0].replace(/\D/g,"")))+parseInt(n[1])),1==this._setmodelvalue?this.tzone==this.model.timeZone?i=-(-a+r):i=-(- -(60*(-1!==this.tzone.indexOf("-")?-parseInt(s[0].replace(/\D/g,"")):parseInt(s[0].replace(/\D/g,"")))+parseInt(s[1]))+r):i=-r):i=-a):i=-a),i},_timeZoneAppointments:function(i,n){var s,r,a,o,l,d;if(this.model.appointmentSettings.applyTimeOffset){if(!i[this._appointmentSettings.allDay]||!this._dataManager.dataSource.offline){if(t.isNullOrUndefined(this._dayLight)?(a=i[this._appointmentSettings.startTimeZone],o=i[this._appointmentSettings.endTimeZone],t.isNullOrUndefined(o)&&!t.isNullOrUndefined(a)&&(i[this._appointmentSettings.endTimeZone]=o=a),!t.isNullOrUndefined(o)&&t.isNullOrUndefined(a)&&(i[this._appointmentSettings.startTimeZone]=a=o),t.isNullOrUndefined(a)||t.isNullOrUndefined(o)||(a=-1!=a.indexOf("UTC")?60*parseInt(a.split(" ")[1].split(":")[0])+parseInt(a.split(" ")[1].split(":")[1]):60*parseInt(a.split(":")[0])+parseInt(a.split(":")[1]),o=-1!=o.indexOf("UTC")?60*parseInt(o.split(" ")[1].split(":")[0])+parseInt(o.split(" ")[1].split(":")[1]):60*parseInt(o.split(":")[0])+parseInt(o.split(":")[1])),l=t.isNullOrUndefined(a)&&!e.isNumeric(a)?this._timeZoneCalculate(i):a-this._timeZoneCalculate(i)):l=this._timeValue,l=""==n?-l:l,!this._dataManager.dataSource.offline&&!t.isNullOrUndefined(i[this._appointmentSettings.startTimeZone])){var h=null==this.model.timeZone?"UTC "+this._timezoneStringValue():this.model.timeZone,p=(new Date)._isDST()&&!this.model.isDST?(new Date).getTimezoneOffset()+this._timeZoneOffset:(new Date).getTimezoneOffset(),m=this._dataProcess?i[this._appointmentSettings.startTimeZone]:i[this._appointmentSettings.startTimeZone]!=h?h:i[this._appointmentSettings.startTimeZone];m=-1!=m.indexOf("UTC")?60*parseInt(m.split(" ")[1].split(":")[0])+parseInt(m.split(" ")[1].split(":")[1]):60*parseInt(m.split(":")[0])+parseInt(m.split(":")[1]),d=this._dataProcess?p- -m:-(p- -m),(new Date)._isDST()&&null==this.model.timeZone&&!this._dataProcess&&this.model.isDST&&(d-=60)}return s=new Date(i[this._appointmentSettings.startTime]),r=new Date(i[this._appointmentSettings.endTime]),i[this._appointmentSettings.allDay]&&Math.round((new Date(i[this._appointmentSettings.endTime])-new Date(i[this._appointmentSettings.startTime]))/36e5)<24?i:(i[this._appointmentSettings.startTime]=this._dataManager.dataSource.offline||t.isNullOrUndefined(i[this._appointmentSettings.startTimeZone])?new Date(s.setMinutes(s.getMinutes()+l)):new Date(s.setMinutes(s.getMinutes()+l+d)),i[this._appointmentSettings.endTime]=this._dataManager.dataSource.offline||t.isNullOrUndefined(i[this._appointmentSettings.startTimeZone])?new Date(r.setMinutes(r.getMinutes()+l)):new Date(r.setMinutes(r.getMinutes()+l+d)),this._universalTimeConversion(i,n),i)}return i[this._appointmentSettings.startTime]=new Date(i[this._appointmentSettings.startTime]),i[this._appointmentSettings.endTime]=new Date(i[this._appointmentSettings.endTime]),i}return i},_universalTimeConversion:function(e,i){if(!this._dataManager.dataSource.offline&&!t.isNullOrUndefined(e[this._appointmentSettings.startTimeZone])&&""==i&&(t.isNullOrUndefined(this._dataProcess)||!this._dataProcess)){var n=(new Date)._isDST()&&!this.model.isDST&&null==this.model.timeZone?(new Date).getTimezoneOffset()+this._timeZoneOffset:(new Date).getTimezoneOffset();e[this._appointmentSettings.startTime]=new Date(e[this._appointmentSettings.startTime].getTime()+6e4*n),e[this._appointmentSettings.endTime]=new Date(e[this._appointmentSettings.endTime].getTime()+6e4*n)}},_processtimeZone:function(e){var t,i,n;return this.model.appointmentSettings.applyTimeOffset&&(t=new Date(e[this.model.blockoutSettings.startTime]),i=new Date(e[this.model.blockoutSettings.endTime]),e[this.model.blockoutSettings.isAllDay]?(e[this.model.blockoutSettings.startTime]=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e[this.model.blockoutSettings.endTime]=new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59)):(n=this._timeZoneCalculate(e),e[this.model.blockoutSettings.startTime]=new Date(t.setMinutes(t.getMinutes()+n)),e[this.model.blockoutSettings.endTime]=new Date(i.setMinutes(i.getMinutes()+n)))),e},_dataProcessing:function(i){var n,s;if(this._processed=[],this._appMainId=null,i.length>0){for(this._dataProcess=!0,this._sortAppById(i),this._maxId=t.isNullOrUndefined(i[0])||t.isNullOrUndefined(i[0].AppTaskId)?1:i[0].AppTaskId,n=0;n<i.length;n++)if(i[n][this._appointmentSettings.startTime]=(new Date).parseISO8601(i[n][this._appointmentSettings.startTime]),i[n][this._appointmentSettings.endTime]=(new Date).parseISO8601(i[n][this._appointmentSettings.endTime]),1==this._bindAppointments&&!this._angular&&!this._setmodelvalue&&this._applyTimeOffset&&t.isNullOrUndefined(this._enablePersist)){var r,a=e.extend(a,i[n]),o=new Date(new Date(a.StartTime).setHours(0,0,0)),l=(new Date((new Date).setHours(0,0,0)),new Date(o)._isDST()),d=(new Date)._isDST();if(this._dataManager.dataSource.offline||t.isNullOrUndefined(i[n][this._appointmentSettings.startTimeZone]))r="reverse";else{r="";var h=(new Date)._isDST()&&!this.model.isDST&&null==this.model.timeZone?(new Date).getTimezoneOffset()+this._timeZoneOffset:(new Date).getTimezoneOffset(),p=i[n][this._appointmentSettings.startTime],m=i[n][this._appointmentSettings.endTime];i[n][this._appointmentSettings.startTime]=new Date(p.setMinutes(p.getMinutes()-h)),i[n][this._appointmentSettings.endTime]=new Date(m.setMinutes(m.getMinutes()-h))}s=this._timeZoneAppointments(i[n],r),this.model.isDST&&null==this.model.timeZone&&(p=new Date(s[this._appointmentSettings.startTime]),m=new Date(s[this._appointmentSettings.endTime]),d&!l&&(s[this._appointmentSettings.startTime]=new Date(p.setHours(p.getHours()-1)),s[this._appointmentSettings.endTime]=new Date(m.setHours(m.getHours()-1))),!d&l&&(s[this._appointmentSettings.startTime]=new Date(p.setHours(p.getHours()+1)),s[this._appointmentSettings.endTime]=new Date(m.setHours(m.getHours()+1)))),this._appointmentProcessing(s)}else this._appointmentProcessing(i[n]);return this._bindAppointments=this._dataProcess=!1,this._setmodelvalue=!1,this._processed=this._sortAppById(this._processed),this._processed}},_guidFormatGenerate:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_groupAppointment:function(i){var n,s,r,a,o,l;if(i.AppTaskId=t.isNullOrUndefined(i.AppTaskId)?this._maxId:i.AppTaskId,t.isNullOrUndefined(i[this._appointmentSettings.id])&&(i[this._appointmentSettings.id]=i.AppTaskId),s=[],i[(n=this._appointmentSettings.resourceFields.split(","))[n.length-1]].length>1?s=i[n[n.length-1]].split(","):s.push(i[n[n.length-1]]),r=[],n.length-1>0)for(l=0;l<n.length-1;l++)i[n[l]].length>1?r.push(i[n[l]].split(",")):r.push((i[n[l]]+",").split(","));for(a=0,o=s;a<o.length;){var d={},h=new Date(i[this._appointmentSettings.startTime]),p=new Date(i[this._appointmentSettings.endTime]);if(this._idChecking(),(d=this._addAppData(i,this._maxId,h,p,i.ParentId))[n[n.length-1]]=parseInt(s[a]),n.length-1>0)for(l=0;l<n.length-1;l++)d[n[l]]=parseInt(r[l][a]);new Date(new Date(i[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(i[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&(i[this._appointmentSettings.endTime]-i[this._appointmentSettings.startTime])/36e5<24&&!0!==i[this._appointmentSettings.allDay]?(d.Guid=this._guidFormatGenerate(),this._multipleDayApp(d,this._maxId,d[this._appointmentSettings.startTime],p)):Math.round((d[this._appointmentSettings.endTime]-d[this._appointmentSettings.startTime])/36e5)>24?(d.Guid=this._guidFormatGenerate(),this._multipleSplit(d,this._maxId,d[this._appointmentSettings.startTime],d[this._appointmentSettings.endTime])):e.isEmptyObject(d)||(d.Guid=this._guidFormatGenerate(),this._processed.push(d)),a++,this._maxId++}},_groupRecurrenceAppointment:function(i){var n,s,r,a,o,l,d,h,p,m,c;if(t.RecurrenceEditor.prototype._initializePrivateProperties(),(n=t.RecurrenceEditor.prototype)._rRule={},i.AppTaskId=t.isNullOrUndefined(i.AppTaskId)?this._maxId:i.AppTaskId,t.isNullOrUndefined(i[this._appointmentSettings.id])&&(i[this._appointmentSettings.id]=i.AppTaskId),n.model.startDate=new Date(this.currentDate()),r=i[(s=this._appointmentSettings.resourceFields.split(","))[s.length-1]].length>1?i[s[s.length-1]].split(","):(i[s[s.length-1]]+",").split(","),a=[],s.length-1>0)for(l=0;l<s.length-1;l++)i[s[l]].length>1?a.push(i[s[l]].split(",")):a.push((i[s[l]]+",").split(","));for(o=n.recurrenceDateGenerator(i[this._appointmentSettings.recurrenceRule],i[this._appointmentSettings.startTime],i[this._appointmentSettings.recurrenceExDate]),l=0;l<=r.length-1;l++)if(""!=r[l])for(d=this._guidFormatGenerate(),h=0;h<o.length;){var u={},g=new Date(o[h]);i[this._appointmentSettings.endTime];if("MONTHLY"!=n._rRule.freq&&"YEARLY"!=n._rRule.freq||t.isNullOrUndefined(n._rRule.setPositions)||(g=n._dayOfWeekInMonth(g,n._rRule.weekDays,n._rRule.setPositions)),p=new Date(g.getFullYear(),g.getMonth(),g.getDate(),new Date(i[this._appointmentSettings.startTime]).getHours(),new Date(i[this._appointmentSettings.startTime]).getMinutes(),new Date(i[this._appointmentSettings.startTime]).getSeconds()),m=new Date(new Date(p).setMilliseconds(i[this._appointmentSettings.endTime].getTime()-i[this._appointmentSettings.startTime].getTime())),this._idChecking(),i[this._appointmentSettings.recurrenceId]=i[this._appointmentSettings.recurrenceId]||i[this._appointmentSettings.id]||i.AppTaskId,i.ParentId=i[this._appointmentSettings.recurrenceId],t.isNullOrUndefined(n._rRule.exDate)?u=this._addAppData(i,this._maxId,p,m,i.ParentId):-1==n._rRule.exDate.indexOf(t.format(new Date(g),this._pattern.d,this.model.locale))&&(u=this._addAppData(i,this._maxId,p,m,i.ParentId)),new Date(new Date(i[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(i[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&(i[this._appointmentSettings.endTime]-i[this._appointmentSettings.startTime])/36e5<24&&!0!==i[this._appointmentSettings.allDay]){if(u.Guid=this._guidFormatGenerate(),u.commonGuid=d,u[s[s.length-1]]=parseInt(r[l]),s.length-1>0)for(c=0;c<s.length-1;c++)u[s[c]]=parseInt(a[c][l]);this._multipleDayApp(u,this._maxId,u[this._appointmentSettings.startTime],m)}else if(Math.round((u[this._appointmentSettings.endTime]-u[this._appointmentSettings.startTime])/36e5)>24){if(u.Guid=this._guidFormatGenerate(),u.commonGuid=d,u[s[s.length-1]]=parseInt(r[l]),s.length-1>0)for(c=0;c<s.length-1;c++)u[s[c]]=parseInt(a[c][l]);this._multipleSplit(u,this._maxId,u[this._appointmentSettings.startTime],u[this._appointmentSettings.endTime])}else if(!e.isEmptyObject(u)){if(u.Guid=this._guidFormatGenerate(),u.commonGuid=d,u[s[s.length-1]]=parseInt(r[l]),s.length-1>0)for(c=0;c<s.length-1;c++)u[s[c]]=parseInt(a[c][l]);this._processed.push(u)}h++,this._maxId++}},_RecurrenceAppointment:function(i){var n,s,r;t.isNullOrUndefined(this._recurrenceEditor)&&this._renderRecurrenceEditor(),(n=this._recurrenceEditor.ejRecurrenceEditor("instance"))._rRule={},i.AppTaskId=t.isNullOrUndefined(i.AppTaskId)?this._maxId:i.AppTaskId,t.isNullOrUndefined(i[this._appointmentSettings.id])&&(i[this._appointmentSettings.id]=i.AppTaskId),n.model.startDate=new Date(this.currentDate());for(var a=0,o=n.recurrenceDateGenerator(i[this._appointmentSettings.recurrenceRule],i[this._appointmentSettings.startTime],i[this._appointmentSettings.recurrenceExDate]);a<o.length;){var l={},d=new Date(o[a]);i[this._appointmentSettings.endTime];"MONTHLY"!=n._rRule.freq&&"YEARLY"!=n._rRule.freq||t.isNullOrUndefined(n._rRule.setPositions)||(d=n._dayOfWeekInMonth(d,n._rRule.weekDays,n._rRule.setPositions)),s=new Date(d.getFullYear(),d.getMonth(),d.getDate(),new Date(i[this._appointmentSettings.startTime]).getHours(),new Date(i[this._appointmentSettings.startTime]).getMinutes(),new Date(i[this._appointmentSettings.startTime]).getSeconds()),r=new Date(new Date(s).setMilliseconds(i[this._appointmentSettings.endTime].getTime()-i[this._appointmentSettings.startTime].getTime())),this._idChecking(),i[this._appointmentSettings.recurrenceId]=i[this._appointmentSettings.recurrenceId]||i[this._appointmentSettings.id]||i.AppTaskId,i.ParentId=i[this._appointmentSettings.recurrenceId],t.isNullOrUndefined(n._rRule.exDate)?l=this._addAppData(i,this._maxId,s,r,i.ParentId):-1==n._rRule.exDate.indexOf(t.format(new Date(d),this._pattern.d,this.model.locale))&&(l=this._addAppData(i,this._maxId,s,r,i.ParentId)),new Date(new Date(i[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(i[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&(i[this._appointmentSettings.endTime]-i[this._appointmentSettings.startTime])/36e5<24&&!0!==i[this._appointmentSettings.allDay]?(l.Guid=this._guidFormatGenerate(),this._multipleDayApp(l,this._maxId,l[this._appointmentSettings.startTime],r)):Math.round((l[this._appointmentSettings.endTime]-l[this._appointmentSettings.startTime])/36e5)>24?(l.Guid=this._guidFormatGenerate(),this._multipleSplit(l,this._maxId,l[this._appointmentSettings.startTime],l[this._appointmentSettings.endTime])):!e.isEmptyObject(l)&&(t.isNullOrUndefined(this._appointmentSettings.resourceFields)||t.isNullOrUndefined(i[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]),1)&&(l.Guid=this._guidFormatGenerate(),this._processed.push(l)),a++,this._maxId++}},_recurrenceAppSort:function(i){for(var n,s,r=[],a=0;a<i.length;a++)(n=new t.DataManager(i).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,i[a].Guid))).length>1?((s=e.extend(!0,[],n))[0][this._appointmentSettings.endTime]=s[s.length-1][this._appointmentSettings.endTime],r.push(s[0]),a++):r.push(i[a]);return r},_appointmentProcessing:function(e){var n,s;this._maxId=t.isNullOrUndefined(this._appMainId)?parseInt(this._maxId):parseInt(this._appMainId)+1,t.isNullOrUndefined(this._recurrenceEditor)&&this._renderRecurrenceEditor(),(n=this._recurrenceEditor.ejRecurrenceEditor("instance"))._rRule={},t.isNullOrUndefined(e[this._appointmentSettings.recurrence])||t.isNullOrUndefined(e[this._appointmentSettings.recurrenceRule])||n.recurrenceRuleSplit(e[this._appointmentSettings.recurrenceRule],e[this._appointmentSettings.recurrenceExDate]),e[this._appointmentSettings.recurrence]&&t.isNullOrUndefined(n._rRule.recurEditId)?this._groupEditing?this._groupRecurrenceAppointment(e):this._RecurrenceAppointment(e):new Date(new Date(e[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(e[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&(e[this._appointmentSettings.endTime]-e[this._appointmentSettings.startTime])/36e5<24&&!0!==e[this._appointmentSettings.allDay]&&(e[this._appointmentSettings.recurrence]&&!t.isNullOrUndefined(n._rRule.recurEditId)||!e[this._appointmentSettings.recurrence])?(this._appMainId=e.AppTaskId=null==e.AppTaskId?this._maxId:e.AppTaskId,t.isNullOrUndefined(e[this._appointmentSettings.id])&&(e[this._appointmentSettings.id]=e.AppTaskId),e.ParentId=t.isNullOrUndefined(n._rRule.recurEditId)?e[this._appointmentSettings.id]:n._rRule.recurEditId,e[this._appointmentSettings.recurrence]&&(e.ParentId=e[this._appointmentSettings.recurrenceId]=null==e[this._appointmentSettings.recurrenceId]?e.ParentId:e[this._appointmentSettings.recurrenceId]),e.Guid=t.isNullOrUndefined(e.Guid)?this._guidFormatGenerate():e.Guid,this._maxId=e.AppTaskId,this._groupEditing||this._groupEdit?this._groupAppointment(e):(t.isNullOrUndefined(this._appointmentSettings.resourceFields)||t.isNullOrUndefined(e[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]),this._multipleDayApp(e,this._maxId,e[this._appointmentSettings.startTime],e[this._appointmentSettings.endTime]))):(e[this._appointmentSettings.endTime]-e[this._appointmentSettings.startTime])/36e5>=24?(this._appMainId=e.AppTaskId=null==e.AppTaskId?this._maxId:e.AppTaskId,t.isNullOrUndefined(e[this._appointmentSettings.id])&&(e[this._appointmentSettings.id]=e.AppTaskId),e.ParentId=t.isNullOrUndefined(n._rRule.recurEditId)?e[this._appointmentSettings.id]:n._rRule.recurEditId,e[this._appointmentSettings.recurrence]&&(e.ParentId=e[this._appointmentSettings.recurrenceId]=null==e[this._appointmentSettings.recurrenceId]?e.ParentId:e[this._appointmentSettings.recurrenceId]),e.Guid=t.isNullOrUndefined(e.Guid)?this._guidFormatGenerate():e.Guid,this._maxId=e.AppTaskId,endTime=new Date(e[this._appointmentSettings.endTime]),s=new Date(e[this._appointmentSettings.startTime]),this._groupEditing||this._groupEdit||new Date(s).getDate()==new Date(endTime).getDate()&&new Date(s).getMonth()==new Date(endTime).getMonth()&&new Date(s).getFullYear()==new Date(endTime).getFullYear()?this._groupEditing||this._groupEdit||new Date(endTime.setMilliseconds(-1e3)).getDate()!=e[this._appointmentSettings.startTime].getDate()?this._groupAppointment(e):this._processed.push(e):(t.isNullOrUndefined(this._appointmentSettings.resourceFields)||t.isNullOrUndefined(e[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]),this._multipleSplit(e,this._maxId,e[this._appointmentSettings.startTime],e[this._appointmentSettings.endTime]))):e[this._appointmentSettings.recurrence]&&t.isNullOrUndefined(n._rRule.recurEditId)?e[this._appointmentSettings.recurrence]!=i&&e[this._appointmentSettings.allDay]!=i||e[this._appointmentSettings.recurrence]||(this._appMainId=e.AppTaskId=null==e.AppTaskId?this._maxId:e.AppTaskId,t.isNullOrUndefined(e[this._appointmentSettings.id])&&(e[this._appointmentSettings.id]=e.AppTaskId),e.ParentId=e[this._appointmentSettings.id],e.Guid=t.isNullOrUndefined(e.Guid)?this._guidFormatGenerate():e.Guid,e.RecurrenceId=e.recurrenceExDate=null,t.isNullOrUndefined(this._appointmentSettings.resourceFields)||t.isNullOrUndefined(e[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]),this._processed.push(e)):(this._appMainId=e.AppTaskId=null==e.AppTaskId?this._maxId:e.AppTaskId,t.isNullOrUndefined(e[this._appointmentSettings.id])&&(e[this._appointmentSettings.id]=e.AppTaskId),e.ParentId=t.isNullOrUndefined(n._rRule.recurEditId)?e[this._appointmentSettings.id]:n._rRule.recurEditId,e[this._appointmentSettings.recurrence]&&(e.ParentId=e[this._appointmentSettings.recurrenceId]=null==e[this._appointmentSettings.recurrenceId]?e.ParentId:e[this._appointmentSettings.recurrenceId]),this._groupEditing||this._groupEdit?(this._maxId=e.AppTaskId,this._groupAppointment(e)):(t.isNullOrUndefined(this._appointmentSettings.resourceFields)||t.isNullOrUndefined(e[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]),e.Guid=t.isNullOrUndefined(e.Guid)?this._guidFormatGenerate():e.Guid,this._processed.push(e))),this._appMainId=t.isNullOrUndefined(this._appMainId)||this._appMainId<this._maxId?this._maxId:this._appMainId},_idChecking:function(){for(var e,i=0;i<this._currentAppointmentData.length;i++){if(e=(new t.Query).where("AppTaskId",t.FilterOperators.equal,this._maxId),0==new t.DataManager(this._currentAppointmentData).executeLocal(e).length){this._maxId;break}this._maxId++}for(;;){if(e=(new t.Query).where("AppTaskId",t.FilterOperators.equal,this._maxId),0==new t.DataManager(this._processed).executeLocal(e).length){this._maxId;break}this._maxId++}return this._maxId},_getTotalDays:function(e,t){var i=this._getWeekDays(),n=new Date(e),s=0;do{s=-1!=i.indexOf(n.getDay())?s+1:s,n=new Date(new Date(n).getTime()+864e5)}while(new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()<=new Date(t).getTime());return s},_getPrevNextDateCount:function(e,t){for(var i=this._getWeekDays(),n=new Date(e),s=0;i.indexOf(n.getDay())<0;)n="next"==t?new Date(new Date(n).getTime()+864e5):new Date(new Date(n).getTime()-864e5),s++;return s},_getPrevNextDates:function(e,t){for(var i=0,n=this._dateRender;n.indexOf(e.getTime())<0;)e="next"==t?new Date(new Date(e).getTime()+864e5):new Date(new Date(e).getTime()-864e5),i++;return i},_getPrevNextCustomDates:function(e,t,i){for(var n,s=0,r=0,a=0,o=[],l=0;l<this._resCustomCollection.length;l++)this._resCustomCollection[l].id==i&&(o=this._resCustomCollection[l].renderDates);for(;o.indexOf(e.getTime())<0;)n=e,e="next"==t?new Date(new Date(e).getTime()+864e5):new Date(new Date(e).getTime()-864e5),n.getFullYear()!=e.getFullYear()?(s=0,r=0,a++):n.getMonth()==e.getMonth()?s++:(s=0,r++);return{count:s,monthCount:r,yearCount:a}},_getCustomDatesCount:function(i,n){var s=this.res1[i][n];return 0+(t.isNullOrUndefined(s)||"object"!=e.type(s[0])?s.length:this._getMultipleCustomDatesCount(s))},_getMultipleCustomDatesCount:function(e){for(var t=0,i=0;i<e.length;i++){var n=e[i].start,s=e[i].end;t+=Math.round(Math.abs((s.getTime()-n.getTime())/864e5))+1}return t},_multipleDayApp:function(e,t,i,n){0==n.getHours()&&0==n.getMinutes()&&(n=new Date(n.getTime()-1e3));var s=new Date(i),r=new Date(n);for(("vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.timeScale.enable||("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(i<new Date(this._dateRender[0])||n>new Date(new Date(this._dateRender[this._dateRender.length-1]).setHours(23,59,59))))&&(r=new Date(new Date(i).setHours(23,59,59)));s>=new Date(i)&&s<=r&&r<=new Date(n);)this._processed.push(this._addAppData(e,t,s,r,e.ParentId)),s=new Date(new Date(r).setHours(24,0,0)),r=e[this._appointmentSettings.endTime],this._maxId=t=this._idChecking()},_multipleSplit:function(i,n,s,r){var a,o,l,d,h,p,m,c,u,g;for(s=new Date(s),a=new Date(new Date(s).getFullYear(),new Date(s).getMonth(),new Date(s).getDate(),new Date(s).getHours(),new Date(s).getMinutes(),new Date(s).getSeconds()),o=new Date(new Date(r).getFullYear(),new Date(r).getMonth(),new Date(r).getDate(),23,59,59);a<=o;)l=0,d=new Date(a),"day"!==this.currentView()&&"agenda"!=this.currentView()&&(h=d._currentWeekDates(this._firstdayofweek),!this._isCustomMonthView()&&this._oneWeek?(a=new Date(new Date(d).getFullYear(),new Date(d).getMonth(),new Date(d).getDate()),l=-1!=this._dateRender.indexOf(a.getTime())?this._dateRender.length-1-this._dateRender.indexOf(a.getTime()):a.getTime()<new Date(this._dateRender[0]).getTime()?(new Date(new Date(this._dateRender[0]).setDate(new Date(this._dateRender[0]).getDate()-1)).getTime()-new Date(a).setHours(0,0,0,0))/864e5:a.getTime()>new Date(this._dateRender[this._dateRender.length-1]).setHours(23,59,59)?this._dateRender.length-1:0):l="month"!=this.currentView()||"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation&&(this.model.showNextPrevMonth||new Date(new Date(this.currentDate()).getFullYear(),new Date(this.currentDate()).getMonth(),1).getTime()==new Date(a.getFullYear(),a.getMonth(),1).getTime())?(h.end.getTime()-new Date(d).setHours(0,0,0))/864e5:new Date(d.getFullYear(),d.getMonth()+1,0).getDate()-d.getDate()),"workweek"==this.currentView()&&new Date(d).getTime()==new Date(h.start).getTime()&&0==this._firstdayofweek&&(m=new Date(new Date(d).setHours(23,59,59)),p=this._addAppData(i,n,d,m,i.ParentId),this._processed.push(p),this._maxId=n=this._idChecking(),d=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1)),!this._isCustomMonthView()||"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation?(c=new Date(a.getFullYear(),a.getMonth(),a.getDate()+l),(m=new Date(c).getDate()==new Date(o).getDate()&&new Date(c).getMonth()==new Date(o).getMonth()&&new Date(c).getFullYear()==new Date(o).getFullYear()&&"month"!==this.currentView()?new Date(new Date(c).setHours(r.getHours(),r.getMinutes(),r.getSeconds())):new Date(new Date(c).setHours(23,59,59)))>=new Date(r)&&"day"!==this.currentView()&&(m=i[this._appointmentSettings.endTime]),this.model.showNextPrevMonth||"month"!=this.currentView()||new Date(a.getFullYear(),a.getMonth(),1).getTime()==new Date(m.getFullYear(),m.getMonth(),1).getTime()||(m=new Date(a.getFullYear(),a.getMonth()+1,0,m.getHours(),m.getMinutes(),m.getSeconds()))):(-1==this._dateRender.indexOf(o.setHours(0,0,0,0))&&(m=new Date(this._dateRender[this._dateRender.length-1])),-1==this._dateRender.indexOf(a.setHours(0,0,0,0))&&(m=new Date(new Date(this._dateRender[0]).setDate(new Date(this._dateRender[0]).getDate()-1))),(m<d||t.isNullOrUndefined(m))&&(m=new Date(r))),p=this._addAppData(i,n,d,m,i.ParentId),this._processed.push(p),this._maxId=n=this._idChecking(),u=this.model.showWeekend?1:this._getPrevNextDateCount(new Date(new Date(m).setHours(0,0,0,0)+864e5),"next")+1,(a=new Date(new Date(m).getFullYear(),new Date(m).getMonth(),new Date(m).getDate()+u))<=o&&(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()&&(g=0,this._resCustomView?a=(g=this._getPrevNextCustomDates(a,"next",i[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]])).yearCount>0?new Date(a.getFullYear()+g.yearCount,new Date(a.setMonth(0)).getMonth()+g.monthCount,new Date(a.setDate(1)).getDate()+g.count):g.monthCount>0?new Date(a.getFullYear(),a.getMonth()+g.monthCount,new Date(a.setDate(1)).getDate()+g.count):new Date(a.getFullYear(),a.getMonth()+g.monthCount,a.getDate()+g.count):(g=this._getPrevNextDates(a,"next"),a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+g)))},_deleteOcurrence:function(e,i){var n,s,r,a,o;t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor(),t.isNullOrUndefined(this._appointmentAddWindow)&&t.RecurrenceEditor.prototype._initializePrivateProperties();var l=t.isNullOrUndefined(this._appointmentAddWindow)?t.RecurrenceEditor.prototype:this._appointmentAddWindow.find(".e-recurrenceeditor").data("ejRecurrenceEditor"),d=(new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,e),h=new t.DataManager(this._currentAppointmentData).executeLocal(d);if(("delete"==this._currentAction||"editOccurrence"==this._currentAction)&&h[0][this._appointmentSettings.endTime].getDay()>h[0][this._appointmentSettings.startTime].getDay()&&(n=0==(n=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,i))).length?this._objDate:n,n=new t.DataManager(this._processed).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,n[0].AppTaskId))),!t.isNullOrUndefined(h)&&!t.isNullOrUndefined(h[0][this._appointmentSettings.recurrenceRule])){if(s=h[0][this._appointmentSettings.recurrenceRule],l.recurrenceRuleSplit(s,h[0][this._appointmentSettings.recurrenceExDate]),t.isNullOrUndefined(l._rRule.exDate))("delete"==this._currentAction||"editOccurrence"==this._currentAction)&&h[0][this._appointmentSettings.endTime].getDay()>h[0][this._appointmentSettings.startTime].getDay()&&n[0][this._appointmentSettings.startTime].getDay()==n[0][this._appointmentSettings.endTime].getDay()?(i=n[0][this._appointmentSettings.startTime],h[0][this._appointmentSettings.recurrenceRule]=s+";EXDATE="+t.format(i,this._pattern.d,this.model.locale),h[0][this._appointmentSettings.recurrenceExDate]=t.isNullOrUndefined(h[0][this._appointmentSettings.recurrenceExDate])?t.format(i,this._pattern.d,this.model.locale).toString():h[0][this._appointmentSettings.recurrenceExDate]+","+t.format(i,this._pattern.d,this.model.locale).toString()):(h[0][this._appointmentSettings.recurrenceRule]=s+";EXDATE="+t.format(i,this._pattern.d,this.model.locale),h[0][this._appointmentSettings.recurrenceExDate]=t.isNullOrUndefined(h[0][this._appointmentSettings.recurrenceExDate])?t.format(i,this._pattern.d,this.model.locale).toString():h[0][this._appointmentSettings.recurrenceExDate]+","+t.format(i,this._pattern.d,this.model.locale).toString());else{for(r=s.split(";"),a="",o=0;o<r.length;o++)""!=a&&(a+=";"),"EXDATE"==r[o].replace(/ /g,"").split("=")[0]&&(("delete"==this._currentAction||"editOccurrence"==this._currentAction)&&h[0][this._appointmentSettings.endTime].getDay()>h[0][this._appointmentSettings.startTime].getDay()&&n[0][this._appointmentSettings.startTime].getDay()==n[0][this._appointmentSettings.endTime].getDay()?(i=n[0][this._appointmentSettings.startTime],r[o]=r[o]+","+t.format(i,this._pattern.d,this.model.locale)):r[o]=r[o]+","+t.format(i,this._pattern.d,this.model.locale)),a+=r[o];h[0][this._appointmentSettings.recurrenceRule]=a,h[0][this._appointmentSettings.recurrenceExDate]=t.isNullOrUndefined(h[0][this._appointmentSettings.recurrenceExDate])?t.format(i,this._pattern.d,this.model.locale).toString():h[0][this._appointmentSettings.recurrenceExDate]+","+t.format(i,this._pattern.d,this.model.locale).toString()}return h}},_getWeekIndex:function(e){var t=0,i=new Date(e.getFullYear(),e.getMonth(),1),n=e.getDay();if(n!=i.getDay())do{i=new Date(i.setDate(i.getDate()+1))}while(n!=i.getDay());for(;i.getDate()!=e.getDate();)i=new Date(i.setDate(i.getDate()+7)),t++;return t},_addAppData:function(i,n,s,r,a){var o,l,d,h,p={};for(o in this._appointmentSettings)if("dataSource"!=o&&"query"!=o&&"tableName"!=o&&"resourceFields"!=o&&(p[this._appointmentSettings[o]]=i[this._appointmentSettings[o]]),"resourceFields"==o&&!t.isNullOrUndefined(this._appointmentSettings.resourceFields))for(d=0,h=(l=this._appointmentSettings.resourceFields.split(",")).length;d<h;d++)p[l[d]]=i[l[d]];return t.isNullOrUndefined(n)||(p.AppTaskId=n),t.isNullOrUndefined(s)||(p[this._appointmentSettings.startTime]=s),t.isNullOrUndefined(r)||(p[this._appointmentSettings.endTime]=r),t.isNullOrUndefined(a)||(p.ParentId=a),e.extend({},i,p)},_renderAppointments:function(){var i,n,s,r,a,o,l,d=e.extend(!0,[],this._dateRender);for(this._overflowFlag=!1,this._renderedApp=[],this._renderedAllDay=[],1,this.level=0,this.model.showOverflowButton||(this.initialCellHeight=this.model.cellHeight?parseInt(this.model.cellHeight):parseInt(this.element.find(".e-draggableworkarea").height()/this.element.find(".e-draggableworkarea tr").length)),this.cellwidth=this.element.find(".e-workcells").width(),this.cellheight=this.element.find(".e-workcells")[0].offsetHeight,"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showAllDayRow&&(this.element.find(".e-alldaycells,.e-leftindent").addClass("e-alldaycellsheight"),this.element.find(".e-alldaycells").first().css(this.model.enableRTL?"border-right":"border-left","none")),this.alldaycellsheight="vertical"!=this.model.orientation||"vertical"!=this._customOrientation||t.isNullOrUndefined(this.element.find(".e-alldaycells")[0])?this.element.find(".e-alldaycells").height():this.element.find(".e-alldaycells")[0].offsetHeight-1,this._horiHeaderCollection=this._horiGroupCollection(),this.leftPosition=0,this._variable=[],this.model.group&&(0==this._tempResource.length||0!=this._tempResource[0].resourceSettings.dataSource.length)||(this.res1=["0"]),this.resIndex=0,this._processed=this._appointmentSort(this._processed),i=0;i<this.res1.length;i++){if(n=0,r=d.length,new Date(d[0])<this.model.minDate&&(n=Math.floor((new Date(this.model.minDate)-new Date(d[0]))/864e5)),new Date(d[d.length-1])>this.model.maxDate&&(s=Math.floor((new Date(d[d.length-1])-new Date(this.model.maxDate))/864e5),r=d.length-s),this._resWorkWeek)for(r=0,n=0,a=0,o=0;o<i+1;o++)if(t.isNullOrUndefined(this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?(r+=this.model.workWeek.length,o==i&&(a+=this.model.workWeek.length)):(r+=this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length,o==i&&(a+=this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length)),o==i){n=r-a;break}if(this._resCustomView)for(r=0,n=0,a=0,o=0;o<i+1;o++)if(l=this._tempResource[this._tempResource.length-1].resourceSettings.renderDates,t.isNullOrUndefined(this.res1[o][l])||(r+=this._getCustomDatesCount(o,l),o==i&&(a+=this._getCustomDatesCount(o,l))),o==i){n=r-a;break}for(;n<r;n++)this._getDayAppointments(n,i)}(this._overflowFlag||this._allDayDrag)&&this._reRenderScroller(),this._overflowFlag=this._allDayDrag=!1},_appointmentRemove:function(e){this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment").filter("div[data-guid="+e.Guid+"]").remove(),this.element.find(".e-categorybar").filter("div[id=categorybar_"+e.Guid+"]").remove()},_resourceCustomView:function(e,i){for(var n,s=0,r=0,a=0,o=0,l=0;l<e+1;l++)if(n=this._tempResource[this._tempResource.length-1].resourceSettings.renderDates,t.isNullOrUndefined(this.res1[l][n])||(s+=this._getCustomDatesCount(l,n),l==e&&(a+=this._getCustomDatesCount(l,n),o=this._resCustomDate[e].indexOf(i))),l==e){r=s-a;break}return-1!=o&&(r+=o),r},_resourceWorkWeek:function(e,i){for(var n=0,s=0,r=0,a=0,o=0;o<e+1;o++)if(t.isNullOrUndefined(this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?(n+=this.model.workWeek.length,o==e&&(r+=this.model.workWeek.length,a=this._resDateRen[e].indexOf(i))):(n+=this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length,o==e&&(r+=this.res1[o][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length,a=this._resDateRen[e].indexOf(i))),o==e){s=n-r;break}return-1!=a&&(s+=a),s},_refreshDayAppointments:function(e){var i,n,s,r,a,o;if(this.model.timeScale.enable&&"agenda"!=this.currentView()&&"month"!=this.currentView()&&!this._isCustomMonthView()){this._overflowFlag=!1;var l=new Date(e[this._appointmentSettings.startTime]).setHours(0,0,0,0),d=t.scheduleFeatures.resources&&this._tempResource.length>0&&this._grouping.length>0?1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,e[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],null,null):this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,e[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,e[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2]]):0,h=this._dateRender.indexOf(l),p=0;"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this._grouping.length>0&&(this._resWorkWeek?h=this._resourceWorkWeek(d,l):this._resCustomView?h=this._resourceCustomView(d,l):p+=d*("day"==this.currentView()?1:"workweek"==this.currentView()?this.model.workWeek.length:"week"==this.currentView()||"week"==this.currentView()||this._isCustomMonthView()?this.model.showWeekend?7:this.model.workWeek.length:this._dateRender.length)),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(i=this._grouping.length>1?this._resCollect.indexOf(this.res1[d]):d),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find(".e-workcellstab tr td:nth-child("+(h+p+1)+")").find(".e-appointwrapper").remove():this.element.find(".e-workcellstab tr:nth("+i+")").find(".e-appointwrapper").remove(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?(n=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(l)).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(l).setHours(23,59,59))),n=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?n.and(this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim(),t.FilterOperators.equal,this.res1[d][this._tempResource[this._tempResource.length-1].resourceSettings.id]):n,o=new t.DataManager(this._renderedApp).executeLocal((new t.Query).where(n))):(s=this.getCurrentViewAppointments(),this._grouping.length>0&&(r=this,a=s.filter(function(t){return t[r._appointmentSettings.resourceFields.toString().split(",")[r._tempResource.length-1].trim()]==e[r._appointmentSettings.resourceFields.toString().split(",")[r._tempResource.length-1].trim()]})),o=this._grouping.length>0?a:s),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:o},"AppTaskId"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:o},"AppTaskId");var m="vertical"==this.model.orientation&&"vertical"==this._customOrientation?1:this._dateRender.length,c="vertical"==this.model.orientation&&"vertical"==this._customOrientation?h:0,u=0;c="vertical"==this.model.orientation&&"vertical"==this._customOrientation?h:0;this.model.showOverflowButton||(this.initialCellHeight=this.model.cellHeight?parseInt(this.model.cellHeight):parseInt(this.element.find(".e-draggableworkarea").height()/this.element.find(".e-draggableworkarea tr").length)),this.cellwidth=this.element.find(".e-workcells").width(),this.cellheight=this.element.find(".e-workcells")[0].offsetHeight,this.alldaycellsheight=t.isNullOrUndefined(this.alldaycellsheight)?"vertical"!=this.model.orientation||"vertical"!=this._customOrientation||t.isNullOrUndefined(this.element.find(".e-alldaycells")[0])?this.element.find(".e-alldaycells").height():this.element.find(".e-alldaycells")[0].offsetHeight-1:this.alldaycellsheight,this._horiHeaderCollection=this._horiGroupCollection();do{this._getDayAppointments(c,d),u++,c++}while(u<m);"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.showAllDayRow&&this._renderAllDayAppointments(),this._overflowFlag&&(this._reRenderScroller(),this._overflowFlag=!1),this.model.showAppointmentNavigator&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.element.find(".e-vscroll").length>0&&"month"!=this.currentView()&&!this._isCustomMonthView()&&!this._mediaQuery&&this._renderUpDownIconPosition()}else"agenda"==this.currentView()?this._renderAgendaContent():this._renderMonthAppointment();this.model.blockoutSettings.enable&&this._renderBlockAppointments(),this._bindAppointmentAction()},_renderUpDownIcon:function(){var t;if(0==this.element.find(".e-upicon, .e-downicon").length){var i,n="",s="",r=0==this.element.find(".e-hscroll").length?"0px":this.element.find(".e-hscroll").outerHeight()+"px";for(t=0;t<this.dateRender.length;t++)n=n+"<div class='upicon_"+t+"' style='width:100%;height:100%;'><span class='e-icon e-arrow-sans-up e-appup'></span></div>",s=s+"<div class='downicon_"+t+"' style='width:100%;height:100%;'><span class='e-icon e-arrow-sans-down e-appdown'></span></div>";i="<div class='e-downicon' style='pointer-events:none;bottom:"+r+";'>"+s+"</div>",e("<div class='e-upicon' style='pointer-events:none;top:0px;'>"+n+"</div>").insertBefore(this.element.find(".e-draggableworkarea").parent()),e(i).insertAfter(this.element.find(".e-draggableworkarea").parent()),this.model.enableRTL&&this.element.find(".e-appup, .e-appdown").addClass("e-rtl"),this.element.find(".e-upicon, .e-downicon").css({width:this.element.find(".e-workcellstab").width()}),this.element.find(".e-appup, .e-appdown").css({pointerEvents:"visible"}),this.element.find(".e-upicon, .e-downicon").children().css({float:this.model.enableRTL?"right":"left",visibility:"hidden",width:Math.floor(this.element.find(".e-workcellstab").width()/this.element.find(".e-upicon").children().length)})}},_renderUpDownIconPosition:function(){var e,i,n,s,r,a,o,l,d,h,p,m,c;if(this.element.find(".e-upicon, .e-downicon").children().css({visibility:"hidden"}),this.element.find(".e-vscroll").length>0){var u=this.element.find("div#"+this._id+"_scroller").data("ejScroller"),g=t.isNullOrUndefined(u._scrollYdata)?this.element.height():u._scrollYdata.scrollable,_=u.scrollTop(),f=_>g?g:_,w=f+this.element.find(".e-draggableworkarea").height(),D=parseInt(f/this.element.find(".e-workcells")[0].offsetHeight)+1,S=parseInt(w/this.element.find(".e-workcells")[0].offsetHeight),y=this.element.find(".e-upicon"),v=this.element.find(".e-downicon"),C=6e4*(60*this.model.startHour+D*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)),T=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount*6e4,b=6e4*(60*this.model.startHour+S*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))+T;for(this._currentViewAppointments=this.getCurrentViewAppointments(),e=this,i=this._currentViewAppointments.filter(function(t){return(t[e._appointmentSettings.endTime]-t[e._appointmentSettings.startTime])/36e5<24}),n=0;n<this._dateRender.length;n++){var R=this.model.endHour<24?new Date(new Date(this._dateRender[n]).setHours(this.model.endHour,0,0)):new Date(new Date(this._dateRender[n]).setHours(23,59,59)),A=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(new Date(this._dateRender[n]).setHours(this.model.startHour,0,0))).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(R)),I=new t.DataManager(i).executeLocal((new t.Query).where(A));if(0!=I.length){if(s=new Date(new Date(this._dateRender[n]).setMilliseconds(C)),r=new t.DataManager(I).executeLocal((new t.Query).where(this._appointmentSettings.endTime,t.FilterOperators.lessThan,new Date(s))),r=this._appointmentSort(r).reverse(),!t.isNullOrUndefined(y)&&0!=r.length)if(0==this._grouping.length)y.children().eq(n).css({visibility:"visible"});else if(1==this._grouping.length)for(a=0;a<this.res1.length;a++)0!=(M=new t.DataManager(r).executeLocal((new t.Query).where(this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1],t.FilterOperators.equal,this.res1[a].id))).length&&y.children().eq(n+a*this._dateRender.length).css({visibility:"visible"});else for(a=0;a<this.res1.length;a++){var k=t.Predicate(this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1],t.FilterOperators.equal,this.res1[a].id),x=t.Predicate(this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2],t.FilterOperators.equal,this.res1[a].groupId),O=k.and(x),M=new t.DataManager(r).executeLocal((new t.Query).where(O)),N=this._resWorkWeek?this._resDateRen:this._resCustomDate;if((H=this._resWorkWeek||this._resCustomView)&&-1==N[a].indexOf(this._dateRender[n])&&(M=[]),0==M.length||H){if(0!=M.length&&H){for(p=0,o=0;o<a;o++)p+=N[o].length;for(l=0;l<N[a].length&&N[a][l]!=this._dateRender[n];l++);y.children().eq(p+l).css({visibility:"visible"})}}else y.children().eq(n+a*this._dateRender.length).css({visibility:"visible"})}if(d=new t.DataManager(I).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.greaterThan,new Date(new Date(this._dateRender[n]).setMilliseconds(b)))),d=this._appointmentSort(d),!t.isNullOrUndefined(v)&&0!=d.length)if(0==this._grouping.length)v.children().eq(n).css({visibility:"visible"});else if(1==this._grouping.length)for(h=0;h<this.res1.length;h++)0!=new t.DataManager(d).executeLocal((new t.Query).where(this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1],t.FilterOperators.equal,this.res1[h].id)).length&&v.children().eq(n+h*this._dateRender.length).css({visibility:"visible"});else for(h=0;h<this.res1.length;h++){var H;k=t.Predicate(this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1],t.FilterOperators.equal,this.res1[h].id),x=t.Predicate(this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2],t.FilterOperators.equal,this.res1[h].groupId),O=k.and(x),M=new t.DataManager(d).executeLocal((new t.Query).where(O)),N=this._resWorkWeek?this._resDateRen:this._resCustomDate;if((H=this._resWorkWeek||this._resCustomView)&&-1==N[h].indexOf(this._dateRender[n])&&(M=[]),0==M.length||H){if(0!=M.length&&H){for(p=0,m=0;m<h;m++)p+=N[m].length;for(c=0;c<N[h].length&&N[h][c]!=this._dateRender[n];c++);v.children().eq(p+c).css({visibility:"visible"})}}else v.children().eq(n+h*this._dateRender.length).css({visibility:"visible"})}}}}},_renderAppPosition:function(i){var n=e(i.target).hasClass("e-appup")?"e-appup":"e-appdown",s=e(i.target).parent().index(),r=this.getCurrentViewAppointments(),a=this.element.find("div#"+this._id+"_scroller").data("ejScroller");switch(n){case"e-appup":var o=a.scrollTop(),l=parseInt(o/this.element.find(".e-workcells")[0].offsetHeight)+1,d=(this.element.find(".e-draggableworkarea").find("tr").eq(l),6e4*(60*this.model.startHour+l*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))),h=new Date(new Date(this.dateRender[s]).setMilliseconds(d)),p=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(this.dateRender[s])).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(h)),m=new t.DataManager(r).executeLocal((new t.Query).where(p));if(0!=m.length){var c=Math.abs(m[0][this._appointmentSettings.startTime]-h),u=o-(l-(D=parseInt((d-c)/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount*6e4))))*(this.element.find(".e-workcells")[0].offsetHeight-1);this.element.find("div#"+this._id+"_scroller").ejScroller({scrollTop:u}),this.element.find(".e-scrolltimecells").css({top:-this.element.find(".e-draggableworkarea").scrollTop()+"px"})}break;case"e-appdown":var g=a.scrollTop()+e(this.element.find(".e-vscroll")[0]).height(),_=parseInt(g/(this.element.find(".e-workcells")[0].offsetHeight-1)),f=(this.element.find(".e-draggableworkarea").find("tr").eq(_),d=6e4*(60*this.model.startHour+_*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)),h=new Date(new Date(this.dateRender[s]).setMilliseconds(d)),p=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(h)).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(this.dateRender[s]).setHours(23,59,59))),new t.DataManager(r).executeLocal((new t.Query).where(p)));if(0!=f.length){var w=h.getTime()-f[0][this._appointmentSettings.endTime].getTime(),D=parseInt((d-w)/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount*6e4));u=a.scrollTop()+(D-_)*(this.element.find(".e-workcells")[0].offsetHeight-1)+this.element.find("div#Appointment_"+f[0].AppTaskId).height();this.element.find("div#"+this._id+"_scroller").ejScroller({scrollTop:u}),this.element.find(".e-scrolltimecells").css({top:-this.element.find(".e-draggableworkarea").scrollTop()+"px"})}}this._renderUpDownIconPosition(),t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("hide")},_findAllDayApp:function(e){var i;if(!e[this._appointmentSettings.allDay])return i=e[this._appointmentSettings.recurrence]?new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,e[this._appointmentSettings.id])):new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,e.ParentId)),!t.isNullOrUndefined(i[0])&&(i[0][this._appointmentSettings.endTime]-i[0][this._appointmentSettings.startTime])/36e5>=24},_resourceOrderSort:function(i){if(i.length>0&&0==this._grouping.length&&this._tempResource.length>0){var n=this,s=[],r=this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim(),a=this._tempResource[this._tempResource.length-1].resourceSettings;i.forEach(function(t){var o,l,d,h,p=i.filter(function(e){return new Date(e[n._appointmentSettings.startTime]).getTime()==new Date(t[n._appointmentSettings.startTime]).getTime()&&new Date(e[n._appointmentSettings.endTime]).getTime()==new Date(t[n._appointmentSettings.endTime]).getTime()}),m=e(p).not(s);if(0!=m.length){var c=e.unique(m.map(function(e,t){return t[n._id+"_ownerfield_"+(n._tempResource.length-1)]})),u=a.dataSource.map(function(e){return e[a.id]}).toString(),g=c.length>0?c[0].split(","):u.split(",");for(o=0,l=g.length;o<l;o++)for(d=m.filter(function(e,t){return t[r]==(g[o]||parseInt(g[o]))}),h=0;h<d.length;h++)s.push(d[h])}}),new t.DataManager(i).saveChanges({added:[],changed:[],deleted:s},"Guid"),e.merge(i,s)}return i},_getDayAppointments:function(e,i){var n,s,r,a,o=this._dateRender,l=this._currentViewAppointments=this.getCurrentViewAppointments(),d=new Date(new Date(o[e]).setHours(0,0,0)),h=new Date(new Date(o[e]).setHours(23,59,59)),p=t.Predicate(this._appointmentSettings.endTime,t.FilterOperators.greaterThanOrEqual,new Date(d)).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(h)),m=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(d)).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(h)),c=p.or(m);if(c=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?c.and(this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim(),t.FilterOperators.equal,this.res1[i][this._tempResource[this._tempResource.length-1].resourceSettings.id]):c,c=!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1?c.and(this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim(),t.FilterOperators.equal,this.res1[i][this._tempResource[this._tempResource.length-1].resourceSettings.groupId]):c,l=new t.DataManager(l).executeLocal((new t.Query).where(c)),n=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(new Date(o[e-1]).setHours(24,0,0))).or(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(o[e])),l=new t.DataManager(l).executeLocal((new t.Query).where(n)),l=this._resourceOrderSort(l),"vertical"==this.model.orientation&&"vertical"==this._customOrientation)for(s=0;s<l.length;s++)r=(l[s][this._appointmentSettings.endTime]-l[s][this._appointmentSettings.startTime])/36e5>=24,a=l[s][this._appointmentSettings.allDay],a=!t.isNullOrUndefined(a)&&""!=a&&a,new Date(new Date(o[e]).setHours(0,0,0,0)).getTime()==new Date(new Date(l[s][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()&&a||r?this._setAllDayPos(l[s],e,i):new Date(new Date(l[s][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(o[e]).setHours(0,0,0,0)).getTime()&&new Date(new Date(l[s][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()>=new Date(new Date(o[e]).setHours(0,0,0,0)).getTime()&&new Date(new Date(l[s][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()==new Date(new Date(l[s][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(l[s][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(l[s][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&!a&&(this._findAllDayApp(l[s])?this._setAllDayPos(l[s],e,i):0==this._renderedApp.filter(function(e){return e.Guid==l[s]}).length&&this._renderApp(l[s],e,i));else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&this._getHorizontalDayAppointments(l,o,e,i)},_startUtc:function(e){!t.isNullOrUndefined(this.startutcValue)&&t.isNullOrUndefined(this.tempValue)?this._utcValue(e,"startUtc"):""!=e.model.value&&(e.model.value==this._appointmentAddWindow.find("#"+this._id+"endTimeZone").ejDropDownList("model.value")&&"true"==this._appointmentAddWindow.find("#"+this._id+"startTimeZone").attr("aria-expanded")&&this._appointmentAddWindow.find("#"+this._id+"endTimeZone").ejDropDownList("option",{text:e.text,value:e.value}))},_endUtc:function(e){"true"==this._appointmentAddWindow.find("#"+this._id+"endTimeZone").attr("aria-expanded")?this._utcValue(e,"endUtc"):this.startutcValue=this.tempValue=null},_utcValue:function(e,i){var n,s,r,a,o;t.preferredCulture(this.model.locale),"endUtc"==i&&this._appointmentAddWindow.find(".endutc").val(e.text);var l={StartDate:this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("model.value"),EndDate:this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("model.value")},d={StartTime:this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("model.value"),EndTime:this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("model.value")},h=this._timeFormat(d.StartTime).split(":"),p=this._timeFormat(d.EndTime).split(":"),m=new Date(l.StartDate.setHours(parseInt(h[0],10),parseInt(h[1],10))),c=new Date(l.EndDate.setHours(parseInt(p[0],10),parseInt(p[1],10))),u=new Date(m),g=(new Date(c),"Appoint"==i?this.endTimeAppoint:"endUtc"==i?e.value:this._appointmentAddWindow.find("#"+this._id+"endTimeZone").ejDropDownList("model.value")),_="Appoint"==i?this.startTimeAppoint:"startUtc"==i?e.value:this._appointmentAddWindow.find("#"+this._id+"startTimeZone").ejDropDownList("model.value");if(_=""==_?this._timezoneStringValue():_,n=(g=-1!=(g=""==g?this._timezoneStringValue():g).indexOf("UTC")?60*parseInt(g.split(" ")[1].split(":")[0])+parseInt(g.split(" ")[1].split(":")[1]):60*parseInt(g.split(":")[0])+parseInt(g.split(":")[1]))-(_=-1!=_.indexOf("UTC")?60*parseInt(_.split(" ")[1].split(":")[0])+parseInt(_.split(" ")[1].split(":")[1]):60*parseInt(_.split(":")[0])+parseInt(_.split(":")[1])),m=new Date(m.setMinutes(m.getMinutes()+n)),"Appoint"==i){var f=new Date(e[this._appointmentSettings.startTime]),w=new Date(e[this._appointmentSettings.endTime]),D=t.isNullOrUndefined(this.model.timeZone)?-(new Date).getTimezoneOffset()+this._timeZoneOffset:-1!=this.model.timeZone.indexOf("UTC")?60*parseInt(this.model.timeZone.split(" ")[1].split(":")[0])+parseInt(this.model.timeZone.split(" ")[1].split(":")[1]):60*parseInt(this.model.timeZone.split(":")[0])+parseInt(this.model.timeZone.split(":")[1]),S=_==D?0:D-_;S=new Date(f.setMinutes(f.getMinutes()-S)),s="12"==this._timeMode?t.format(new Date(S),this._pattern.t,this.model.locale):t.format(new Date(S),"HH:mm",this.model.locale),this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker({value:t.format(new Date(S),this._datepattern(),this.model.locale)}),r=g-D,this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker({value:s})}c="endUtc"==i||"Appoint"==i?new Date(u.setMinutes(u.getMinutes()+n)):m,c="Appoint"==i?new Date(w.setMinutes(w.getMinutes()+r)):c,"12"==this._timeMode?t.format(new Date(m),this._pattern.t,this.model.locale):t.format(new Date(m),"HH:mm",this.model.locale),"Appoint"==i?o="12"==this._timeMode?t.format(new Date(w),this._pattern.t,this.model.locale):t.format(new Date(w),"HH:mm",this.model.locale):(a=new Date(c.setMinutes(c.getMinutes()+30)),o="12"==this._timeMode?t.format(new Date(a),this._pattern.t,this.model.locale):t.format(new Date(a),"HH:mm",this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker({value:t.format(new Date(c),this._datepattern(),this.model.locale)}),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker({value:o}),this.startutcValue=1},_rowHandlesOver:function(t){this.model.enableAppointmentResize&&e(t.target).addClass("e-rowcursor")},_colHandlesOver:function(t){this.model.enableAppointmentResize&&e(t.target).addClass("e-columncursor")},_getDateCount:function(e){var i,n,s,r;if(this._resWorkWeek)for(r=[],n=t.isNullOrUndefined(this.res1[e][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?this.model.workWeek:this.res1[e][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek],n=this._resourceDaysReorder(n),s=0;s<n.length;s++)-1==(i=this._dayFullNames.indexOf(n[s].capitalizeFirstString()))&&(i=this._getDayNameIndex(n[s])),r.push(this._renderDates[i]);else r=this._resCustomView?this._resCustomDate[e]:this._dateRender;return r},_renderApp:function(i,n,s){var r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T=this.cellheight,b=parseInt(this.model.startHour)<parseInt(this.model.endHour)?parseInt(this.model.startHour):0,R=parseInt(this.model.startHour)<parseInt(this.model.endHour)?parseInt(this.model.endHour):24,A=this._getDateCount(s),I=new Date(i[this._appointmentSettings.startTime]),k=new Date(i[this._appointmentSettings.endTime]),x=60-I.getMinutes();if(I=new Date(I).getHours()<b?new Date(new Date(I).setHours(b-1,I.getMinutes()+x,I.getSeconds())):I,"vertical"==this.model.orientation&&"vertical"==this._customOrientation){if(z=-1,I<=k&&new Date(A[0]).getTime()<=I.getTime()&&new Date(new Date(A[A.length-1]).setHours(23,59,59))>=I.getTime()&&(o=new Date(I).getHours()<b?new Date(I).getHours()+-new Date(I).getHours()+-new Date(I).getMinutes():new Date(I).getHours()+-b,l=new Date(k).getHours()>R?new Date(k).getHours()+(-new Date(k).getHours()+(R-b))+-new Date(k).getMinutes():new Date(k).getHours()+-b,l=new Date(k).getHours()==R?new Date(l).getMinutes()+-new Date(k).getMinutes():l,R<=k.getHours()?(d=new Date(k.setHours(R,0,0)),a=parseFloat(60*new Date(d).getHours()+new Date(d).getMinutes()-(60*new Date(I).getHours()+new Date(I).getMinutes()))*T*this.model.timeScale.minorSlotCount/this.model.timeScale.majorSlot-2):(a=parseFloat(new Date(new Date(k).getTime())-new Date(new Date(I).getTime()))/6e4*T*this.model.timeScale.minorSlotCount/this.model.timeScale.majorSlot-2,a=i[this._appointmentSettings.endTime].getTimezoneOffset()-i[this._appointmentSettings.startTime].getTimezoneOffset()!=0?a-T*this.model.timeScale.minorSlotCount:a),a=a<0?T-2:a,h=(parseFloat(60*new Date(I).getHours()+new Date(I).getMinutes()+new Date(I).getSeconds()/60)-parseInt(60*o/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-60*this.model.startHour)*T*(this.model.timeScale.minorSlotCount/this.model.timeScale.majorSlot),this.model.startHour<=new Date(I).getHours())){for(p=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?this.res1[s][this._tempResource[this._tempResource.length-1].resourceSettings.id]:null,m=this._overlapApp(i.AppTaskId,i[this._appointmentSettings.startTime],i[this._appointmentSettings.endTime],p),g=this,(c=this._grouping.length>0&&this._tempResource.length>0&&this._tempResource[0].resourceSettings.dataSource.length>0&&t.scheduleFeatures.resources?m.filter(function(e){return(e[g._appointmentSettings.startTime].getTime()==i[g._appointmentSettings.startTime].getTime()&&e[g._appointmentSettings.endTime].getTime()>i[g._appointmentSettings.endTime].getTime()||e[g._appointmentSettings.endTime]>i[g._appointmentSettings.startTime]&&e[g._appointmentSettings.startTime]<i[g._appointmentSettings.endTime]||e[g._appointmentSettings.endTime].getTime()==i[g._appointmentSettings.startTime].getTime()&&e[g._appointmentSettings.startTime].getTime()==i[g._appointmentSettings.endTime].getTime())&&e[g._appointmentSettings.resourceFields.toString().split(",")[g._tempResource.length-1].trim()]==g.res1[s][g._tempResource[g._tempResource.length-1].resourceSettings.id]}):m.filter(function(e){return e[g._appointmentSettings.startTime].getTime()==i[g._appointmentSettings.startTime].getTime()&&e[g._appointmentSettings.endTime].getTime()>i[g._appointmentSettings.endTime].getTime()||e[g._appointmentSettings.endTime]>i[g._appointmentSettings.startTime]&&e[g._appointmentSettings.startTime]<i[g._appointmentSettings.endTime]||e[g._appointmentSettings.endTime].getTime()==i[g._appointmentSettings.startTime].getTime()&&e[g._appointmentSettings.startTime].getTime()==i[g._appointmentSettings.endTime].getTime()})).length>0&&(u=e.map(c,function(e){return[e.Index]}),z=this._smallestMissingNumber(u)),z=-1==z?0:z,i.Index=z,m.push(i),1!=m.length?t.isNullOrUndefined(this._variable[z])?this._variable.push([i]):this._variable[z].push(i):(this._variable=[],this._variable.push([i])),r=((this.element.find(".e-workcells").width()<20?60:90)-this._variable.length)/this._variable.length+"%",this.leftPosition="0%",_=this._resWorkWeek||this._resCustomView?0:this._dateRender.length*s,f=0,w=this._variable.length;f<w;f++)for(D=0,S=this._variable[f].length;D<S;D++){var O=this.element.find(".e-workcellstab tr td:nth-child("+(_+n+1)+")").find(".e-appointwrapper").find(".e-appointment"),M=this._variable[f][D].Guid,N=O.filter("div[data-guid="+M+"]");t.isNullOrUndefined(N[0])||M==i.Guid?(r=t.isNullOrUndefined(this._variable[f-1])?(90-this._variable.length)/this._variable.length:!t.isNullOrUndefined(this.element.find("[data-guid="+this._variable[f-1][0].Guid+"]")[0])&&parseFloat(this.element.find("[data-guid="+this._variable[f-1][0].Guid+"]")[0].style.width),this.leftPosition=(r+1)*z+"%"):parseFloat(r)<=parseFloat(N[0].style.width)?(this.model.enableRTL?N[0].style.right=(parseFloat(r)+1)*f+"%":N[0].style.left=(parseFloat(r)+1)*f+"%",N[0].style.width=parseFloat(r)+"%"):(M=this._variable[t.isNullOrUndefined(this._variable[f-1])?f:f-1][0].Guid,y=O.filter("div[data-guid="+M+"]"),N[0].style.width=y[0].style.width,this.model.enableRTL?N[0].style.right=(parseFloat(N[0].style.width)+1)*f+"%":N[0].style.left=(parseFloat(N[0].style.width)+1)*f+"%")}if(r=parseFloat(r)+"%",i.inline||this._renderedApp.push(e.extend(!0,{},i)),v=this._appointmentColor(i),this.model.allowInline&&!t.isNullOrUndefined(i.inline))this._inlineTemplate(i,this.leftPosition,h,r,a,v,!0),C=this._resWorkWeek||this._resCustomView?o*this.model.timeScale.minorSlotCount*this.element.find(".e-headercells").length+n:parseInt(60*o/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))*A.length*this.res1.length+n+A.length*s,(P=this.element.find("td.e-workcells").eq(C)).prepend(e("<div class='e-inlinewrapper' style='position:relative;'></div>").append(this._inlineText));else{var H=!!this.model.appointmentTemplateId,W=H?this._getUserAppointmentTemplate(i):"",E="12"==this._timeMode?t.format(i[this._appointmentSettings.startTime],this._pattern.t,this.model.locale):t.format(i[this._appointmentSettings.startTime],"HH:mm",this.model.locale),L="12"==this._timeMode?t.format(i[this._appointmentSettings.endTime],this._pattern.t,this.model.locale):t.format(i[this._appointmentSettings.endTime],"HH:mm",this.model.locale),U=!t.isNullOrUndefined(i[this._appointmentSettings.recurrenceRule])&&-1!=i[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID"),F=this._indicationApp(i),V=e(this.appTemplate.render({id:i.AppTaskId,appResize:this.model.enableAppointmentResize,currentview:this.currentView(),appHeight:a,rtl:this.model.enableRTL,ignoreColorFilter:"msie"==this._browserInfo.name&&this._browserInfo.version<=9&&!v.appointColor.applyFilter,subject:i[this._appointmentSettings.subject],startTime:E,endTime:L,left:this.leftPosition,top:h,appWidth:r,userAppTemplId:H,userTemplate:W,appClass:"e-appointment",appointData:v.appointColor.appointData,appointCustomcss:v.appointColor.appointCustomcss,appointtextcolor:v.appointColor.appointtextcolor,value:v.value,multiDiv:v.multiDiv,orientation:this.model.orientation,priority:this.model.prioritySettings.enable?i[this._appointmentSettings.priority]:"",enablePriority:this.model.prioritySettings.template,priorityTemplate:this.model.prioritySettings.template?this._priorityTemplate(i):i[this._appointmentSettings.priority],uid:i.Guid,recurrence:i[this._appointmentSettings.recurrence],recurrenceEdit:U,topInd:F.leftIndication,bottomInd:F.rightIndication,resId:t.isNullOrUndefined(this._appointmentSettings.resourceFields)?"":i[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]]})),z=this._resWorkWeek||this._resCustomView?o*this.model.timeScale.minorSlotCount*this.element.find(".e-headercells").length+n:parseInt(60*o/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))*A.length*this.res1.length+n+A.length*s,P=this.element.find("td.e-workcells").eq(z);t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("appointment",i,V),P.find("div.e-appointwrapper").length>0?P.find("div.e-appointwrapper").append(V):P.prepend(e("<div class='e-appointwrapper'></div>").append(V))}}}else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&this._renderHorizontalApp(I,k,i,n,T,this.model.timeScale.minorSlotCount,b,R);delete i.Index},_priorityTemplate:function(e){return this.model.prioritySettings.template.replace("{","").replace("$","").replace("}","").replace(-1!=this.model.prioritySettings.template.indexOf("value")?this.model.prioritySettings.value:this.model.prioritySettings.text,e[this._appointmentSettings.priority])},_getUserAppointmentTemplate:function(t){var i=e.templates(e(this.model.appointmentTemplateId).html()),n=e.extend(n,t);return n.View=this.currentView(),i.render(n)},_getUserTimeCellsTemplate:function(){for(var i,n,s=e.templates(e(this.model.timeScale.minorSlotTemplateId).html()),r=[],a=this.model.startHour;a<this.model.endHour;){for(i=t.isNullOrUndefined(i)?0:i%60;i<60;)i*=6e4,n=s.render({date:new Date(new Date(this._dateRender[0]).setHours(a,0,0,i))}),r.push({time:n.trim(),id:a+"_"+i}),i=i/6e4+this.model.timeScale.majorSlot;a=this.model.timeScale.majorSlot>60?a+this.model.timeScale.majorSlot/60:a+1}return r},_getUserAllDayCellsTemplate:function(){for(var t,i,n,s=[],r=e.templates(e(this.model.allDayCellsTemplateId).html()),a=0;a<this.res1.length;a++)for(n=0;n<this._dateRender.length;n++)t=new Date(new Date(this._dateRender[n]).setHours(this.model.startHour,0,0)),i=r.render({date:t,view:this.currentView(),resource:this.res1[a],timescale:this.model.timeScale.enable}),s.push(i.trim());return s},_getUserDateheaderTemplate:function(){for(var i,n,s,r,a=[],o=e.templates(e(this.model.dateHeaderTemplateId).html()),l=0;l<this._dateRender.length;l++)i=o.render({date:new Date(this._dateRender[l])}),n=("month"===this.currentView()||"day"===this.currentView()||this._isCustomMonthView())&&0==this._tempResource.length&&t.isNullOrUndefined(this.model.group)?this._dayFullNames[new Date(this._dateRender[l]).getDay()]:this._dayShortNames[new Date(this._dateRender[l]).getDay()],s=new Date(new Date(this._dateRender[l]).setHours(0,0,0,0)).getTime()===new Date((new Date).setHours(0,0,0,0)).getTime()?"e-headerToday":"",r="month"===this.currentView()||this._isCustomMonthView()?{currentDay:n,currentDateClass:"",cellToday:""}:{currentDay:i,currentDateClass:new Date(this._dateRender[l]).getDate()===new Date(this.currentDate()).getDate()?"e-activeview":"",cellToday:s},a.push(r),this._value.push(l);return a},_getUserWorkCellsTemplate:function(){var t,i,n,s,r,a,o,l,d,h,p,m,c=[],u=[],g=0,_=this.model.timeScale.minorSlotCount;if(i=e.templates(e(this.model.workCellsTemplateId).html()),this._isCustomMonthView(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation)if("month"==this.currentView()||this._isCustomMonthView())for(s=0,r=this.model.showWeekend?7:this.model.workWeek.length,p=0;p<this._dateRender.length/r;p++){for(c=[],m=0;m<this.res1.length;m++)for(s=7*p,a=0;a<r;a++)t=new Date(new Date(this._dateRender[s]).setHours(this.model.startHour,g,0)),n=i.render({date:t,view:this.currentView(),resource:this.res1[m],timescale:this.model.timeScale.enable}),c.push(n.trim()),s++;u.push(c)}else for(p=0;p<(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot);p++){for(c=[],m=0;m<this.res1.length;m++)for(a=0;a<this._dateRender.length;a++)t=new Date(new Date(this._dateRender[a]).setHours(this.model.startHour,g,0)),n=i.render({date:t,view:this.currentView(),resource:this.res1[m],timescale:this.model.timeScale.enable}),c.push(n.trim());g+=this.model.timeScale.majorSlot/_,u.push(c)}else{var f,w=[],D=[],S=[],y=0==this._tempResource.length?this.res1:this._resourceSort();if(this.model.timeScale.enable&&"month"!=this.currentView()&&!this._isCustomMonthView())for(p=0;p<y.length;p++){for(c=[],D=[],S=[],m=0;m<this._dateRender.length;m++)for(g=0,a=0;a<(this.model.endHour-this.model.startHour)*(60/this.model.timeScale.majorSlot);a++)for(o=0;o<_;o++)t=new Date(new Date(this._dateRender[m]).setHours(this.model.startHour,g,0)),0==o?(n=i.render({date:t,view:this.currentView(),resource:y[p],timescale:this.model.timeScale.enable}),c.push(n.trim())):(f=i.render({date:t,view:this.currentView(),resource:y[p],timescale:this.model.timeScale.enable}),w.push(f.trim()),w.length==_-1&&(S.push(w),w=[])),g+=this.model.timeScale.majorSlot/_;l=e.extend(!0,[],c),d=e.extend(!0,[],S),D.push(l,d),u.push(D)}else for(h=!this.model.timeScale.enable&&"month"!=this.currentView()||"customview"==this.currentView()&&this._oneWeek?this._dateRender:this.monthDays,p=0;p<y.length;p++){for(c=[],m=0;m<h.length;m++)t=new Date(new Date(h[m]).setHours(this.model.startHour,g,0)),n=i.render({date:t,view:this.currentView(),resource:y[p],timescale:this.model.timeScale.enable}),c.push(n.trim());u.push(c)}}return u},_overlapApp:function(i,n,s,r){var a,o,l=this._renderedApp,d=[],h=[],p=[],m=[];if("vertical"==this.model.orientation&&"vertical"==this._customOrientation)a=this,(d=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?l.filter(function(e){return(e[a._appointmentSettings.startTime].getTime()==n.getTime()&&e[a._appointmentSettings.endTime].getTime()>s.getTime()||e[a._appointmentSettings.endTime]>n&&e[a._appointmentSettings.startTime]<s||e[a._appointmentSettings.endTime].getTime()==n.getTime()&&e[a._appointmentSettings.startTime].getTime()==s.getTime())&&e[a._appointmentSettings.resourceFields.toString().split(",")[a._tempResource.length-1].trim()]==r}):l.filter(function(e){return e[a._appointmentSettings.startTime].getTime()==n.getTime()&&e[a._appointmentSettings.endTime].getTime()>s.getTime()||e[a._appointmentSettings.endTime]>n&&e[a._appointmentSettings.startTime]<s||e[a._appointmentSettings.endTime].getTime()==n.getTime()&&e[a._appointmentSettings.startTime].getTime()==s.getTime()})).forEach(function(i){p=!t.isNullOrUndefined(a.model.group)&&0!=a._tempResource.length&&0!=a._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?l.filter(function(e){return e[a._appointmentSettings.endTime]>=new Date(i[a._appointmentSettings.startTime])&&e[a._appointmentSettings.startTime]<=new Date(i[a._appointmentSettings.endTime])&&e[a._appointmentSettings.resourceFields.toString().split(",")[a._tempResource.length-1].trim()]==r}):l.filter(function(e){return e[a._appointmentSettings.endTime]>=new Date(i[a._appointmentSettings.startTime])&&e[a._appointmentSettings.startTime]<=new Date(i[a._appointmentSettings.endTime])});var n=e(p).not(d);return 0!=n.length&&(h=e.merge(h,n)),h}),m=e.merge(d,h);else if(("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal)for(o=0;o<l.length;o++)t.scheduleFeatures.resources&&0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)?new Date(l[o][this._appointmentSettings.endTime])>new Date(n)&&new Date(l[o][this._appointmentSettings.startTime])<=new Date(s)&&l[o][this._tempResource[this._tempResource.length-1].field]==r&&new Date(new Date(l[o][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()===new Date(new Date(n).setHours(0,0,0,0)).getTime()&&m.push(l[o]):new Date(l[o][this._appointmentSettings.endTime])>new Date(n)&&new Date(l[o][this._appointmentSettings.startTime])<=new Date(s)&&new Date(new Date(l[o][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()===new Date(new Date(n).setHours(0,0,0,0)).getTime()&&m.push(l[o]);return m},_getOverlapCount:function(i,n,s,r){var a,o,l,d,h,p,m,c,u,g;if(0==this._renderedAllDay.length)i.Index=0,u=0;else{if(g=[],a=this,o=("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.resources&&this._tempResource.length>0&&this._grouping.length>0?this._renderedAllDay.filter(function(e){return(e[a._appointmentSettings.endTime]>=new Date(s[n])&&e[a._appointmentSettings.startTime]<=new Date(new Date(s[n]).setHours(23,59,59))||e[a._appointmentSettings.startTime]>=new Date(s[n])&&e[a._appointmentSettings.startTime]<=new Date(new Date(s[n]).setHours(23,59,59)))&&e[a._appointmentSettings.resourceFields.toString().split(",")[a._tempResource.length-1].trim()]==i[a._appointmentSettings.resourceFields.toString().split(",")[a._tempResource.length-1].trim()]}):this._renderedAllDay.filter(function(e){return e[a._appointmentSettings.endTime]>=new Date(s[n])&&e[a._appointmentSettings.startTime]<=new Date(new Date(s[n]).setHours(23,59,59))||e[a._appointmentSettings.startTime]>=new Date(s[n])&&e[a._appointmentSettings.startTime]<=new Date(new Date(s[n]).setHours(23,59,59))}),l=[],"vertical"==this.model.orientation&&"vertical"==this._customOrientation)for(d=0,h=o.length;d<h;d++)p=(o[d][this._appointmentSettings.endTime]-o[d][this._appointmentSettings.startTime])/36e5>=24,new Date(new Date(o[d][this._appointmentSettings.endTime]).setMilliseconds(-1e3)).getDate()==o[d][this._appointmentSettings.startTime].getDate()&&o[d][this._appointmentSettings.startTime].getTimezoneOffset()!=o[d][this._appointmentSettings.endTime].getTimezoneOffset()&&(p=!1),m=!(!p||new Date(new Date(o[d][this._appointmentSettings.endTime]).setMilliseconds(-1e3)).getDate()!=o[d][this._appointmentSettings.startTime].getDate()),c=o[d][this._appointmentSettings.allDay],(new Date(new Date(s[n]).setHours(0,0,0,0)).getTime()==new Date(new Date(o[d][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()&&c||p)&&(!t.scheduleFeatures.resources||t.isNullOrUndefined(this.model.group)||o[d][this._tempResource[this._tempResource.length-1].field]==r)&&(m||l.push(o[d]));else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&(l=this._getHorizontalOverlapCount(o,s,n,i,r));u=-1,u=this._findResourceIndex(l,"AppTaskId",i.AppTaskId,null,null),g=e.map(l,function(e){return[e.Index]}),u=this._smallestMissingNumber(g),i.Index=u,u=-1==u?0:u}return u},_smallestMissingNumber:function(e){var t,i;if(0==e.length)return 0;for(t=Math.max.apply(Math,e),i=0;i<t;i++)if(-1==e.indexOf(i))return i;return t+1},_setAllDayPos:function(i,n,s){var r,a,o,l,d,h,p,m,c,u,g,_=t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length?this._getOverlapCount(i,n,this._dateRender,i[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()]):this._getOverlapCount(i,n,this._dateRender,null),f=new Date(i[this._appointmentSettings.startTime]),w=new Date(i[this._appointmentSettings.endTime]);if(new Date(f)<=new Date(w)){var D,S=this._dateRender,y=0,v=this.element.find(".e-alldayappointment").length>0?this.element.find(".e-alldayappointment").outerHeight(!0):this._getElementHeight("e-alldayappointment"),C=v;if(this.level<=_&&(r=(_+1)*C+this.alldaycellsheight,this.element.find(".e-alldaycells,.e-leftindent").removeClass("e-alldaycellsheight").css("height",r+"px"),this.element.find(".e-alldaycells").first().css(this.model.enableRTL?"border-right":"border-left","none"),0==this.element.find(".e-vscroll").length&&0==this.level&&this._reRenderScroller()),this._overflowFlag=!0,this._resWorkWeek){for(o=[],a=t.isNullOrUndefined(this.res1[s][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?this.model.workWeek:this.res1[s][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek],l=0;l<a.length;l++)-1==(h=this._dayFullNames.indexOf(a[l].capitalizeFirstString()))&&(h=this._getDayNameIndex(a[l])),o.push(this._renderDates[h]);S=o}if(this._resCustomView&&(S=this._resCustomDate[s]),-1==e.inArray(new Date(i[this._appointmentSettings.startTime]).getTime(),S)?i[this._appointmentSettings.startTime]:new Date(S[0]),d=new Date(new Date(S[S.length-1]).setHours(23,59,59)),w=new Date(w)>new Date(d)?d:w,("workweek"==this.currentView()||"week"==this.currentView()&&!this.model.showWeekend)&&-1==e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime(),this._dateRender))for(c=1;c<this._dateRender.length;c++)if(e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()-c).getTime(),this._dateRender)>0){h=e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()-c).getTime(),this._dateRender),w=new Date(new Date(this._dateRender[h]).setHours(i[this._appointmentSettings.endTime].getHours(),i[this._appointmentSettings.endTime].getMinutes(),i[this._appointmentSettings.endTime].getSeconds()));break}if(i.inline||this._renderedAllDay.push(e.extend(!0,{},i)),p=this._resWorkWeek||"workweek"==this.currentView()||"week"==this.currentView()&&!this.model.showWeekend?0==w.getHours()&&0==w.getMinutes()?i[this._appointmentSettings.allDay]?e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime(),S)-e.inArray(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),S)+1:e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime(),S)-e.inArray(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),S):e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime(),S)-e.inArray(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),S)+1:"week"==this.currentView()||"day"==this.currentView()||"customview"==this.currentView()&&parseFloat((w-f)/36e5)<=24?0==w.getHours()&&0==w.getMinutes()?i[this._appointmentSettings.allDay]?Math.ceil((new Date(w)-new Date(f))/864e5)+1:Math.ceil((new Date(w)-new Date(f))/864e5):Math.ceil((new Date(w).setHours(23,59,59)-new Date(f).setHours(0,0,0))/864e5):e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime(),this._dateRender)-e.inArray(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),this._dateRender)+1,-1==e.inArray(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),S)&&"workweek"==this.currentView()||"week"==this.currentView()&&!this.model.showWeekend){for(m=new Date(i[this._appointmentSettings.startTime]),c=0;c<this._dateRender.length&&(-1==e.inArray(new Date(m.getFullYear(),m.getMonth(),m.getDate()).getTime(),S)&&m.setDate(m.getDate()+1),-1==e.inArray(new Date(m.getFullYear(),m.getMonth(),m.getDate()).getTime(),S));c++);f=m,p=e.inArray(new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime(),S)-e.inArray(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),S)+1}(p=f.getTimezoneOffset()!=w.getTimezoneOffset()?p-1:p)<=0&&(p=1);var T=this.element.find(".e-alldaycells").width(),b=this._dateRender.length,R=t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?0:this._grouping.length,A="day"===this.currentView()?0:this._dateRender.indexOf(new Date(f).setHours(0,0,0));if(this._resWorkWeek||this._resCustomView?y=this.model.enableRTL?this.element.find(".e-headrealldaytable").width()-this.element.find(".e-alldaycells")[n].offsetLeft-this.element.find(".e-alldaycells").width():this.element.find(".e-alldaycells")[n].offsetLeft:t.isNullOrUndefined(this.element.find(".e-alldaycells")[A+s*b])||(y=this.model.enableRTL?this.element.find(".e-headrealldaytable").width()-this.element.find(".e-alldaycells")[A+s*b].offsetLeft-this.element.find(".e-alldaycells").width():this.element.find(".e-alldaycells")[A+s*b].offsetLeft),D=p*T+p-2,v=_*v+(_+1)+this.element.find(".e-headercells").outerHeight()+(0!=R?R*this.element.find(".e-headerbar").first().height():R),(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()&&this.element.find(".e-monthnamerow").length>0&&(v=this.element.find(".e-monthnamerow").height()+v),u=this._appointmentColor(i),this.model.allowInline&&!t.isNullOrUndefined(i.inline))this._inlineTemplate(i,y,v,D,C,u,!1),this.element.find(".e-headrealldaytable").append(this._inlineText);else{var I=!!this.model.appointmentTemplateId,k=I?this._getUserAppointmentTemplate(i):"",x="12"==this._timeMode?t.format(i[this._appointmentSettings.startTime],this._pattern.t,this.model.locale):t.format(i[this._appointmentSettings.startTime],"HH:mm",this.model.locale),O="12"==this._timeMode?t.format(i[this._appointmentSettings.endTime],this._pattern.t,this.model.locale):t.format(i[this._appointmentSettings.endTime],"HH:mm",this.model.locale),M=!!i[this._appointmentSettings.recurrence]&&-1!=i[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID"),N=this._indicationApp(i),H=e(this.appTemplate.render({id:i.AppTaskId,appResize:this.model.enableAppointmentResize,currentview:this.currentView(),top:v,rtl:this.model.enableRTL,ignoreColorFilter:"msie"==this._browserInfo.name&&this._browserInfo.version<=9&&!u.appointColor.applyFilter,subject:i[this._appointmentSettings.subject],startTime:x,endTime:O,appHeight:this.model.appointmentTemplateId?C:"",appWidth:D+"px",allday:!0,left:y+"px",userAppTemplId:I,userTemplate:k,appClass:"e-alldayappointment",appointData:u.appointColor.appointData,appointCustomcss:u.appointColor.appointCustomcss,appointtextcolor:u.appointColor.appointtextcolor,value:u.value,multiDiv:u.multiDiv,orientation:this.model.orientation,priority:this.model.prioritySettings.enable?i[this._appointmentSettings.priority]:"",enablePriority:this.model.prioritySettings.template,priorityTemplate:this.model.prioritySettings.template?this._priorityTemplate(i):i[this._appointmentSettings.priority],uid:i.Guid,recurrence:i[this._appointmentSettings.recurrence],recurrenceEdit:M,leftInd:N.leftIndication,rightInd:N.rightIndication,resId:t.isNullOrUndefined(this._appointmentSettings.resourceFields)?"":i[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]]}));t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("appointment",i,H),this.element.find(".e-headrealldaytable").append(H)}}this._alldayLevel=!1,this.level=this.level<_?_:this.level,i[this._appointmentSettings.recurrence]||this.model.allowInline||(g=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,i.ParentId)),new Date(i[this._appointmentSettings.endTime])<g[0][this._appointmentSettings.endTime]&&(this.model.enableRTL?this.element.find("div[data-guid="+i.Guid+"]").children(".e-lefthandle").remove():this.element.find("div[data-guid="+i.Guid+"]").children(".e-righthandle").remove()),new Date(i[this._appointmentSettings.startTime])>g[0][this._appointmentSettings.startTime]&&(this.model.enableRTL?this.element.find("div[data-guid="+i.Guid+"]").children(".e-righthandle").remove():this.element.find("div[data-guid="+i.Guid+"]").children(".e-lefthandle").remove())),t.isNullOrUndefined(N)||(N.leftIndication&&(this.model.enableRTL?this.element.find("div[data-guid="+i.Guid+"]").find(".e-schedulemouseclose").css("margin-left","11px"):this.element.find("div[data-guid="+i.Guid+"]").find(".e-apptime,.e-apptext").css("margin-left","13px")),N.rightIndication&&(this.model.enableRTL?this.element.find("div[data-guid="+i.Guid+"]").find(".e-apptime,.e-apptext").css("margin-right","13px"):this.element.find("div[data-guid="+i.Guid+"]").find(".e-schedulemouseclose").css("margin-right","11px"))),delete i.Index},_indicationApp:function(i){var n,s,r,a,o,l,d=!1,h=!1,p=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,i.ParentId))[0];return t.isNullOrUndefined(p)?{leftIndication:!1,rightIndication:!1}:(0==p[this._appointmentSettings.endTime].getHours()&&0==p[this._appointmentSettings.endTime].getMinutes()&&((p=e.extend(!0,[],p))[this._appointmentSettings.endTime]=new Date(p[this._appointmentSettings.endTime].getTime()-1e3)),r="day"==this.currentView()?[new Date(this._dateRender[0]).getTime()]:this._dateRender,a=(n=e.inArray(new Date(new Date(i[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime(),r))!=(s=e.inArray(new Date(new Date(i[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime(),r))&&new Date(new Date(p[this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(p[this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&(p[this._appointmentSettings.endTime]-p[this._appointmentSettings.startTime])/36e5<24||i[this._appointmentSettings.endTime].getHours()==this.model.endHour&&i[this._appointmentSettings.endTime].getMinutes()>0||i[this._appointmentSettings.endTime].getHours()>this.model.endHour||i[this._appointmentSettings.startTime].getHours()<this.model.startHour,i[this._appointmentSettings.recurrence]?(o=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,i.Guid))).length>=1&&(l=this._sortAppById(o),a&&l[l.length-1][this._appointmentSettings.endTime].getHours()>=this.model.endHour&&"month"!=this.currentView()?this.model.enableRTL?d=!0:h=!0:a&&l[0][this._appointmentSettings.startTime].getHours()<this.model.startHour&&"month"!=this.currentView()&&(this.model.enableRTL?h=!0:d=!0),(l[0][this._appointmentSettings.startTime]<i[this._appointmentSettings.startTime]||-1==n)&&!a&&(this.model.enableRTL?h=!0:d=!0),(l[l.length-1][this._appointmentSettings.endTime]>i[this._appointmentSettings.endTime]||-1==s)&&!a&&(this.model.enableRTL?d=!0:h=!0)):(a&&p[this._appointmentSettings.endTime].getHours()>=this.model.endHour&&"month"!=this.currentView()?this.model.enableRTL?d=!0:h=!0:a&&p[this._appointmentSettings.startTime].getHours()<this.model.startHour&&"month"!=this.currentView()&&(this.model.enableRTL?h=!0:d=!0),(new Date(p[this._appointmentSettings.startTime])<i[this._appointmentSettings.startTime]||-1==n)&&!a&&(this.model.enableRTL?h=!0:d=!0),(new Date(p[this._appointmentSettings.endTime])>i[this._appointmentSettings.endTime]||-1==s)&&!a&&(this.model.enableRTL?d=!0:h=!0)),{leftIndication:!t.isNullOrUndefined(d)&&d,rightIndication:!t.isNullOrUndefined(h)&&h})},_reRenderScroller:function(){var e,i,n;t.isNullOrUndefined(this._appointmentAddWindow)||((e=this._appointmentAddWindow.data("ejDialog")).option("enableAnimation",!1),e.close());var s=this.element.find("div#"+this._id+"_scroller"),r=s.data("ejScroller"),a="vertical"===this.model.orientation&&"vertical"===this._customOrientation?parseInt(this.element.width())-(this._mediaQuery&&("month"==this.currentView()||this._isCustomMonthView())?1:this.element.find(".e-scrolltimecells").length>0?this.element.find(".e-scrolltimecells").parent().outerWidth():0):"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?parseInt(this.element.width()):parseInt(this.element.width())-parseInt(this.element.find(".e-resourceheadertable").width());r.model.width=parseInt(a)-2,r.model.height=this.scHeight-1-(this.wTR.find(".e-draggableworkarea").offset().top-this.element.offset().top),r.refresh(),""!=this.model.cellWidth&&(i=(parseInt(this.model.cellWidth)+1)*this.element.find("div.e-draggableworkarea tr:first td").length,n=this.wTR.find(".e-scrolltimecells").length>0?this.wTR.find(".e-scrolltimecells").width():0,this.wTR.find(".e-draggableworkarea").width(this.element.width()>i+n+(s.ejScroller("isVScroll")?18:0)?i-1:a-2-(s.ejScroller("isVScroll")?18:0)),this.aTR.find(".e-headeralldaydiv").width(this.wTR.find(".e-draggableworkarea").width())),"vertical"!=this.model.orientation||"vertical"!=this._customOrientation||this.model.cellHeight||"month"==this.currentView()||this._isCustomMonthView()||!this.model.timeScale.enable||this.element.find(".e-draggableworkarea").height(r.model.height-(s.ejScroller("isHScroll")?18:0)),"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this._mediaQuery&&this.res1.length>1&&this.element.find(".e-draggableworkarea").width(this.element.find(".e-draggableworkarea").width()*this.res1.length),this.aTR.find(".e-headeralldaydiv").width(this.wTR.find(".e-draggableworkarea").width()),this.wTR.find(".e-scrolltimecells").css("top",-this.wTR.find(".e-draggableworkarea").scrollTop()+"px"),this._mediaQuery&&!t.isNullOrUndefined(this._appointmentAddWindow)&&this._appointmentAddWindow.ejDialog("close"),t.isNullOrUndefined(this._appointmentAddWindow)||e.option("enableAnimation",!0),(("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&s.ejScroller("isVScroll")||this._mediaQuery)&&this._renderHoriVerticalScroll(),this._showScrollTd()},_appointmentSort:function(e){var t=this;return"agenda"==this.currentView()?e.sort(function(e,i){var n=e[t._appointmentSettings.startTime],s=i[t._appointmentSettings.startTime],r=e[t._appointmentSettings.endTime],a=i[t._appointmentSettings.endTime];return n.getTime()-s.getTime()||r.getTime()-a.getTime()}):"day"!=this.currentView()?e.sort(function(e,i){var n=e[t._appointmentSettings.endTime]-e[t._appointmentSettings.startTime],s=i[t._appointmentSettings.endTime]-i[t._appointmentSettings.startTime],r=new Date(e[t._appointmentSettings.startTime]),a=new Date(i[t._appointmentSettings.startTime]),o=new Date(e[t._appointmentSettings.endTime]),l=new Date(i[t._appointmentSettings.endTime]),d=e[t._appointmentSettings.startTime],h=i[t._appointmentSettings.startTime];return r==a&&o==l?d-h||e.Guid.localeCompare(i.Guid):r-a==0?s-n||d-h||e.Guid.localeCompare(i.Guid):d-h||e.Guid.localeCompare(i.Guid)}):e.sort(function(e,i){var n=e[t._appointmentSettings.startTime],s=i[t._appointmentSettings.startTime],r=e[t._appointmentSettings.endTime]-e[t._appointmentSettings.startTime],a=i[t._appointmentSettings.endTime]-i[t._appointmentSettings.startTime];return n-s||a-r||e.Guid.localeCompare(i.Guid)}),e},_alldaySort:function(e){for(var t=[],i=0;i<e.length;i++)(new Date(e[i][this._appointmentSettings.endTime])-new Date(e[i][this._appointmentSettings.startTime]))/36e5<24&&!e[i][this._appointmentSettings.allDay]&&t.push(e[i]);return t},_appointmentRecurrenceSort:function(e){var t=this;return e.sort(function(e,i){return e[t._appointmentSettings.startTime]-i[t._appointmentSettings.startTime]}),e},_renderMonthAppointment:function(){var i,n,s,r,a,o,l,d,h,p,m,c;this._overflowFlag=!1,this.filterData=[],this._renderedApp=[],this.element.find(".e-appointwrapper").remove(),this.model.showOverflowButton||(this.initialCellHeight=this.model.cellHeight?parseInt(this.model.cellHeight):parseInt(this.element.find(".e-draggableworkarea").height()/this.element.find(".e-draggableworkarea tr").length)),i="vertical"==this.model.orientation&&"vertical"==this._customOrientation&&("month"!=this.currentView()||this.model.showNextPrevMonth)?this._dateRender:this.monthDays,this._resCustomView?(n=e.extend(!0,[],i)).sort():n=i;var u=this._currentViewAppointments=this.getCurrentViewAppointments(),g=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(n[0])).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(n[n.length-1]).setHours(23,59,59))),_=new t.DataManager(u).executeLocal((new t.Query).where(g));for(u=_,i="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this._dateRender:this.monthDays,this.model.group&&(0==this._tempResource.length||0!=this._tempResource[0].resourceSettings.dataSource.length)||(this.res1=["0"]),s=0,r=i.length,new Date(i[0])<this.model.minDate&&(s=Math.floor((new Date(this.model.minDate)-new Date(i[0]))/864e5)),new Date(i[i.length-1])>this.model.maxDate&&(r=i.length-Math.floor((new Date(i[i.length-1])-new Date(this.model.maxDate))/864e5));s<r;s++)for(a=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(i[s])).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(i[s]).setHours(23,59,59))),u=new t.DataManager(_).executeLocal((new t.Query).where(a)),o=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(i[s])),u=new t.DataManager(u).executeLocal((new t.Query).where(o)),u=this._resourceOrderSort(u),l=0;l<u.length;l++)0!=(("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1?new t.DataManager(this._tempResource[this._tempResource.length-1].resourceSettings.dataSource).executeLocal((new t.Query).where(this._tempResource[this._tempResource.length-1].resourceSettings.groupId,t.FilterOperators.equal,u[l][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2]])):this.res1).length&&new Date(new Date(i[s]).setHours(0,0,0,0)).getTime()==new Date(new Date(u[l][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(i[s]).setHours(0,0,0,0)).getTime()<=new Date(new Date(u[l][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(u[l][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(u[l][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&(d=0==this._tempResource.length?0:this._tempResource.length>0&&1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],null,null):this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2]]),h=t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length?this._grouping.length>1?this._getIndex(s,u[l],i,this._renderedApp,u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()],u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()]):this._getIndex(s,u[l],i,this._renderedApp,u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()],null):this._getIndex(s,u[l],i,this._renderedApp,null,null),0!=this._tempResource.length&&(p=this._resCollection,m=this._horiGroupCollection()),c="vertical"==this.model.orientation&&"vertical"==this._customOrientation?!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1?this._findResourceIndex(p[0].dataSource,p[0].id,u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()],null,null)+1:0:!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1?this._findResourceIndex(m,this._tempResource[this._tempResource.length-2].resourceSettings.id,u[l][this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()],null,null)+1:0,cellId=this._renderCellId(u[l],s,d),celltd="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("td.e-monthcells").eq(cellId-1):this.element.find(".e-workcellstab tr").eq(d-1+c-1).find("td.e-workcells").eq(cellId-1),this.model.showOverflowButton&&celltd.find(".e-appsoverflow").length>0?(celltd.find(".e-appsoverflow").attr("data-appcount",h+1),this._renderedApp.push(e.extend(!0,{},u[l])),delete u[l].Index):this._renderAppointmentMonth(u[l],s,d,h));this._overflowFlag&&(this._reRenderScroller(),this._overflowFlag=!1),this.model.showAppointmentNavigator&&this._nextPrevButton()},_wireResizeEvents:function(){this.model.enableAppointmentResize&&!this.model.readOnly&&(this.element.find("div.e-lefthandle,div.e-righthandle,div.e-tophandle,div.e-bottomhandle").on("mousedown",e.proxy(this._appointmentResizeStart,this)),this._on(this.element.find("div.e-lefthandle,div.e-righthandle"),"mouseover",e.proxy(this._colHandlesOver,this)),this._on(this.element.find("div.e-tophandle,div.e-bottomhandle"),"mouseover",e.proxy(this._rowHandlesOver,this)))},_unWireResizeEvents:function(){this.model.enableAppointmentResize&&(this.element.find("div.e-lefthandle,div.e-righthandle,div.e-tophandle,div.e-bottomhandle").off("mousedown",e.proxy(this._appointmentResizeStart,this)),this._off(this.element.find("div.e-lefthandle,div.e-righthandle"),"mouseover",e.proxy(this._colHandlesOver,this)),this._off(this.element.find("div.e-tophandle,div.e-bottomhandle"),"mouseover",e.proxy(this._rowHandlesOver,this)))},_recuCollectionIndex:function(e,t){this._appointmentSettings;for(var i,n=0;n<e.length;n++)if(e[n].Guid==t.Guid&&e[n].AppTaskId==t.AppTaskId){i=n;break}return i},_getIndex:function(i,n,s,r,a,o){var l,d,h,p;if(0==this._renderedApp.length)n.Index=0,p=0;else{var m=[],c=this,u=(s.length,[]);for(d=0,h=(l=("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.resources&&this._tempResource.length>0&&this._grouping.length>0?r.filter(function(e){return e[c._appointmentSettings.resourceFields.toString().split(",")[c._tempResource.length-1].trim()]==n[c._appointmentSettings.resourceFields.toString().split(",")[c._tempResource.length-1].trim()]}):r).length;d<h;d++)(!t.scheduleFeatures.resources||t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length||(this._grouping.length>1?l[d][this._tempResource[this._tempResource.length-1].field]==a&&l[d][this._tempResource[this._tempResource.length-2].field]==o:l[d][this._tempResource[this._tempResource.length-1].field]==a))&&new Date(new Date(l[d][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(s[i]).setHours(0,0,0,0)).getTime()&&new Date(new Date(l[d][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()>=new Date(new Date(s[i]).setHours(0,0,0,0)).getTime()&&new Date(new Date(l[d][this._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(l[d][this._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime()&&u.push(l[d]);p=-1,u.length>0&&(m=e.map(u,function(e){return[e.Index]}),p=this._smallestMissingNumber(m)),p=-1==p?0:p,n.Index=p}return p},_recurrenceLocal:function(){var i=t.RecurrenceEditor.Locale[this.model.locale]=e.extend(!0,{},t.RecurrenceEditor.Locale["en-US"]),n=this;e.each(i,function(e){t.RecurrenceEditor.Locale[n.model.locale][e]=n._getLocalizedLabels(e)})},_minMaxIndex:function(){var t=e.unique(this._dateRender.map(function(e){return new Date(e).getDay()}));return{minIndex:Math.min.apply(Math,t),maxIndex:Math.max.apply(Math,t)}},_renderCellId:function(e,i,n){var s,r=this.model.showWeekend?7:this._minMaxIndex().maxIndex+1,a=new Date(e[this._appointmentSettings.startTime]),o=Math.ceil((i+1)/(this.model.showWeekend?r:this.model.workWeek.length));return s=this.model.showWeekend?0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources?"vertical"==this.model.orientation&&"vertical"==this._customOrientation?"day"==this.currentView()?n+1:"workweek"==this.currentView()||this._isCustomMonthView()&&this._oneWeek?n*this._dateRender.length+(i+1):"workweek"==this.currentView()?n*this._dateRender.length+(new Date(a).getDay()+1)+(o-1)*this.res1.length*this._dateRender.length:0==this._firstdayofweek?n*r+(new Date(a).getDay()+1)+(o-1)*this.res1.length*r:"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&0!=this._firstdayofweek?n*r+(new Date(a).getDay()+1)+(o-1)*this.res1.length*r-this._firstdayofweek:i+1:i+1:"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this._isCustomMonthView()&&!this._oneWeek?n*r+(new Date(a).getDay()+1)+(o-1)*this.res1.length*r:i+1:"vertical"==this.model.orientation&&"vertical"==this._customOrientation?(o-1)*this.res1.length*this.model.workWeek.length+n*this.model.workWeek.length+i%this.model.workWeek.length+1:i+1,"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&0!=this._firstdayofweek&&new Date(a).getDay()<this._firstdayofweek&&(s=n*r+(new Date(a).getDay()+1)+(o-1)*this.res1.length*r-this._firstdayofweek+r),s},_renderAppointmentMonth:function(i,n,s,r){var a,o,l,d,h,p,m,c,u,g,_,f,w,D="vertical"==this.model.orientation&&"vertical"==this._customOrientation||!this.model.timeScale.enable?this._dateRender:this.monthDays,S="vertical"==this.model.orientation&&"vertical"==this._customOrientation?"td.e-monthcells":"td.e-workcells",y=(this._renderedApp,new Date(i[this._appointmentSettings.startTime])),v=new Date(i[this._appointmentSettings.endTime]),C=0,T=new Date(y),b=new Date(v),R=new Date(new Date(D[D.length-1]).setHours(23,59,59));for(b=b>R?R:b,o=0==T.getHours()&&0==b.getHours()?i[this._appointmentSettings.allDay]?Math.ceil((new Date(b)-new Date(T))/864e5)+1:Math.ceil((new Date(b)-new Date(T))/864e5):Math.ceil((new Date(b).setHours(23,59,59)-new Date(T).setHours(0,0,0))/864e5),o=new Date(new Date(b).setMilliseconds(-1e3)).getDate()==T.getDate()&&T.getTimezoneOffset()!=b.getTimezoneOffset()?o-1:o,i[this._appointmentSettings.allDay]||(l=new Date(T.getFullYear(),T.getMonth(),T.getDate()),d=new Date(T.getFullYear(),T.getMonth(),T.getDate(),23,59,59),o=l.getTimezoneOffset()!=d.getTimezoneOffset()&&new Date(T.getFullYear(),T.getMonth(),T.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())==0?o-1:o),Y=0,h=y,K=0;K<o;K++)-1!=this._dateRender.indexOf(new Date(h.setHours(0,0,0)).getTime())&&Y++,h=new Date(h.getFullYear(),h.getMonth(),h.getDate()+1);this.leftPosition=0,this.CellWidth=this.element.find(".e-monthcells, .e-workcells").width(),this.CellHeight=this.element.find(".e-monthcells, .e-workcells")[0].offsetHeight,i.inline||this._renderedApp.push(e.extend(!0,{},i));var A=Y,I=this.model.showWeekend?7:this._minMaxIndex().maxIndex+1,k=!this.model.timeScale.enable&&this._oneWeek?I-D.indexOf(T.getTime()):I-new Date(T).getDay()+this._firstdayofweek;if(y.getTime()<=v.getTime()){if("vertical"==this.model.orientation&&"vertical"==this._customOrientation?a=(A=A>=k?k:A)*this.CellWidth-this.CellWidth/20:a=!this.model.timeScale.enable||"month"==this.currentView()||this._isCustomMonthView()?""!=this.model.cellWidth?A*this.CellWidth+A:A*this.CellWidth:this.CellWidth*A-parseInt(this.CellWidth/10),p=this._renderCellId(i,n,s),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&""==this.model.cellWidth&&A>1&&!this.model.enableRTL){var x=this.element.find(".e-workcellstab tr:first").children().eq(p-1).offset().left,O=this.element.find(".e-workcellstab tr:first").children().eq(p-2+A);a=O.offset().left+O.width()-x}var M=a-1,N=!!this.model.appointmentTemplateId,H=N?this._getUserAppointmentTemplate(i):"",W=0!=this.element.find(".e-monthheader").length?this.element.find(".e-monthheader").height():0,E=this.model.appointmentTemplateId?"100%"==e(H).css("height")?this.model.showOverflowButton?this.CellHeight-W-15:this.initialCellHeight:"0px"==e(H).css("height")?this.element.find(".e-monthappointment").length>0?this.element.find(".e-monthappointment").outerHeight(!0):this._getElementHeight("e-monthappointment"):e(H).height():this.element.find(".e-monthappointment").length>0?this.element.find(".e-monthappointment").outerHeight(!0):this._getElementHeight("e-monthappointment");a=this.model.appointmentTemplateId?"100%"==e(H).css("width")||"0px"==e(H).css("width")?a:e(H).width():a,C=r*E,this.leftPosition=0,!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0&&!t.isNullOrUndefined(this._diffDays)&&(a=Math.abs(Y)*this.CellWidth),0!=this._tempResource.length&&(m=this._resCollection,c=this._horiGroupCollection()),u="vertical"==this.model.orientation&&"vertical"==this._customOrientation?!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1?this._findResourceIndex(m[0].dataSource,m[0].id,i[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()],null,null)+1:0:!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1?this._findResourceIndex(c,this._tempResource[this._tempResource.length-2].resourceSettings.id,i[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()],null,null)+1:0,a=a<0?this.CellWidth-this.CellWidth/20:a;var L=this._appointmentColor(i),U=t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length?1:1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],null,null)+1:this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,i[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-2].trim()])+1,F=0!=this.element.find(".e-monthappointment").length?this.element.find(".e-monthappointment").outerWidth(!0)-this.element.find(".e-monthappointment").width():0,V=parseInt(this.CellWidth/(this.CellWidth<=a?this.CellWidth:a+F)),z=parseInt((this.CellHeight-W-10)/(this.element.find(".e-monthappointment").length>0?this.element.find(".e-monthappointment").outerHeight(!0):E));this.CellHeight="horizontal"==this.model.orientation||"horizontal"==this._customOrientation?isNaN(U)?0:this.element.find(".e-workcellstab tr").eq(U+u-1).find(".e-workcells")[0].offsetHeight:this.element.find(".e-workcellstab tr").eq(this.element.find("td.e-monthcells").eq(p-1).parent().index()).height();var P=this._indicationApp(i),j="12"==this._timeMode?t.format(i[this._appointmentSettings.startTime],this._pattern.t,this.model.locale):t.format(i[this._appointmentSettings.startTime],"HH:mm",this.model.locale),q="12"==this._timeMode?t.format(i[this._appointmentSettings.endTime],this._pattern.t,this.model.locale):t.format(i[this._appointmentSettings.endTime],"HH:mm",this.model.locale);if(this.model.showOverflowButton&&N&&"0px"!=e(H).css("height")&&"horizontal"!=this.model.orientation?r+1<=V*z||!t.isNullOrUndefined(i.inline):this.CellHeight>W+(r+1)*E+10||!t.isNullOrUndefined(i.inline))if(N&&a<M&&this.element.find(".e-appointwrapper").eq(p-1).attr("style","height:"+(parseInt(r/V)+1)*E+"px !important;width:"+this.CellWidth+"px !important;position:absolute !important;"),this.model.allowInline&&!t.isNullOrUndefined(i.inline))C=0,this._inlineTemplate(i,this.leftPosition,C,a,E,L,!1),Q="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("td.e-monthcells").eq(p-1):this.element.find(".e-workcellstab tr").eq(U+u-1).find("td.e-workcells").eq(p-1),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?Q.find(".e-monthheader").after(e("<div class='e-inlinewrapper'></div>").append(this._inlineText)):Q.prepend(e("<div class='e-inlinewrapper'></div>").append(this._inlineText));else{C>1&&(C=r*E),this.leftPosition=this.leftPosition>1?this.leftPosition-1:this.leftPosition;var B=!t.isNullOrUndefined(i[this._appointmentSettings.recurrenceRule])&&-1!=i[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID"),G=e(this.appTemplate.render({id:i.AppTaskId,appResize:this.model.enableAppointmentResize,currentview:this.currentView(),rtl:this.model.enableRTL,ignoreColorFilter:"msie"==this._browserInfo.name&&this._browserInfo.version<=9&&!L.appointColor.applyFilter,subject:i[this._appointmentSettings.subject],startTime:j,endTime:q,left:this.leftPosition+"px",top:C,appHeight:this.model.appointmentTemplateId?E:"",appWidth:a+"px",userAppTemplId:N,userTemplate:H,appClass:"e-monthappointment",appointData:L.appointColor.appointData,appointCustomcss:L.appointColor.appointCustomcss,appointtextcolor:L.appointColor.appointtextcolor,value:L.value,multiDiv:L.multiDiv,priority:this.model.prioritySettings.enable?i[this._appointmentSettings.priority]:"",enablePriority:this.model.prioritySettings.template,priorityTemplate:this.model.prioritySettings.template?this._priorityTemplate(i):i[this._appointmentSettings.priority],uid:i.Guid,recurrence:i[this._appointmentSettings.recurrence],recurrenceEdit:B,leftInd:P.leftIndication,rightInd:P.rightIndication,resId:t.isNullOrUndefined(this._appointmentSettings.resourceFields)?"":i[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]]})),Q="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("td.e-monthcells").eq(p-1):this.element.find(".e-workcellstab tr").eq(U+u-1).find("td.e-workcells").eq(p-1);t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("appointment",i,G),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?Q.find("div.e-appointwrapper").length>0?Q.find("div.e-appointwrapper").append(G):Q.find(".e-monthheader").after(e("<div class='e-appointwrapper'></div>").append(G)):("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&(Q.find("div.e-appointwrapper").length>0?Q.find("div.e-appointwrapper").append(G):Q.prepend(e("<div class='e-appointwrapper'></div>").append(G)),!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1&&this._renderAppointmentCategory(c,u,p-1,i,a,this.leftPosition)),G=""}else{if(0!=e("#"+this._id+"_"+t.format(new Date(i[this._appointmentSettings.startTime]),"MM_dd_yyyy",this.model.locale)+"_"+(U+u-1)+"_"+(p-1)).length&&e("#"+this._id+"_"+t.format(new Date(i[this._appointmentSettings.startTime]),"MM_dd_yyyy",this.model.locale)+"_"+(U+u-1)+"_"+(p-1)).remove(),this.model.showOverflowButton){var Y=p-1,Z=Math.round((i[this._appointmentSettings.endTime]-i[this._appointmentSettings.startTime])/864e5),K=Y,X=r+1;do{Q="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("td.e-monthcells").eq(K):this.element.find(".e-workcellstab tr").eq(U+u-1).find("td.e-workcells").eq(K),g='<div id="'+this._id+"_"+t.format(new Date(i[this._appointmentSettings.startTime]),"MM_dd_yyyy",this.model.locale)+"_"+(U+u-1)+"_"+K+'" class="e-icon e-arrowhead-down e-appsoverflow" data-cellinfo="'+D[n]+'" data-appcount="'+X+'"></div>',1==t.isNullOrUndefined(i.inline)&&(Q.find("div.e-appointwrapper").length>0?Q.find("div.e-appointwrapper").append(g):"vertical"==this.model.orientation&&"vertical"==this._customOrientation?Q.find(".e-monthheader").after(e("<div class='e-appointwrapper'></div>").append(g)):Q.prepend(e("<div class='e-appointwrapper'></div>").append(g))),K++}while(K<Z+Y);("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1&&this._renderAppointmentCategory(c,u,p-1,i,a,this.leftPosition)}else{if("vertical"==this.model.orientation&&"vertical"==this._customOrientation){C=r*E;B=!t.isNullOrUndefined(i[this._appointmentSettings.recurrenceRule])&&-1!=i[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID");var J=this.element.find("td.e-monthcells").eq(p-1).parent().index(),$=(G=this.appTemplate.render({id:i.AppTaskId,appResize:this.model.enableAppointmentResize,currentview:this.currentView(),rtl:this.model.enableRTL,ignoreColorFilter:"msie"==this._browserInfo.name&&this._browserInfo.version<=9&&!L.appointColor.applyFilter,subject:i[this._appointmentSettings.subject],startTime:j,endTime:q,left:this.leftPosition+"px",top:C,appHeight:this.model.appointmentTemplateId?E:"",appWidth:a+"px",userAppTemplId:N,userTemplate:H,appClass:"e-monthappointment",appointData:L.appointColor.appointData,appointCustomcss:L.appointColor.appointCustomcss,appointtextcolor:L.appointColor.appointtextcolor,value:L.value,multiDiv:L.multiDiv,uid:i.Guid,recurrence:i[this._appointmentSettings.recurrence],recurrenceEdit:B,resId:t.isNullOrUndefined(this._appointmentSettings.resourceFields)?"":i[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]]}),Q=this.element.find("td.e-monthcells").eq(p-1),this.element.find("td.e-monthcells").eq(p-1).parent().children().outerHeight());this.CellHeight=$>E*(r+1)+W?E*(r+1)+W+E:$+(E-1),this.element.find("td.e-monthcells").eq(p-1).parent().children().css("height",this.CellHeight+"px"),this.element.find(".e-timecells").eq(J).css("height",this.CellHeight+"px"),Q.find("div.e-appointwrapper").length>0?Q.find("div.e-appointwrapper").append(G):Q.find(".e-monthheader").after(e("<div class='e-appointwrapper'></div>").append(G))}else C=r*E,this.CellHeight-10<E*(r+1)&&(this.element.find(".e-workcellstab tr").eq(U+u-1).find(".e-workcells").css("height",this.CellHeight+E+"px"),this.element.find(".e-resourceheadertable tr").eq(U+u-1).find(".e-childnode").css("height",this.CellHeight+E+"px")),B=!t.isNullOrUndefined(i[this._appointmentSettings.recurrenceRule])&&-1!=i[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID"),G=e(this.appTemplate.render({id:i.AppTaskId,appResize:this.model.enableAppointmentResize,currentview:this.currentView(),rtl:this.model.enableRTL,ignoreColorFilter:"msie"==this._browserInfo.name&&this._browserInfo.version<=9&&!L.appointColor.applyFilter,subject:i[this._appointmentSettings.subject],startTime:j,endTime:q,left:this.leftPosition+"px",top:C,appHeight:this.model.appointmentTemplateId?E:"",appWidth:a+"px",userAppTemplId:N,userTemplate:H,appClass:"e-monthappointment",appointData:L.appointColor.appointData,appointCustomcss:L.appointColor.appointCustomcss,appointtextcolor:L.appointColor.appointtextcolor,value:L.value,multiDiv:L.multiDiv,priority:this.model.prioritySettings.enable?i[this._appointmentSettings.priority]:"",enablePriority:this.model.prioritySettings.template,priorityTemplate:this.model.prioritySettings.template?this._priorityTemplate(i):i[this._appointmentSettings.priority],uid:i.Guid,recurrence:i[this._appointmentSettings.recurrence],recurrenceEdit:B,leftInd:P.leftIndication,rightInd:P.rightIndication,resId:t.isNullOrUndefined(this._appointmentSettings.resourceFields)?"":i[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]]})),t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("appointment",i,G),(Q=this.element.find(".e-workcellstab tr").eq(U+u-1).find("td.e-workcells").eq(p-1)).find("div.e-appointwrapper").length>0?Q.find("div.e-appointwrapper").append(G):Q.prepend(e("<div class='e-appointwrapper'></div>").append(G)),!t.isNullOrUndefined(this.model.group)&&this._grouping.length>1&&this._renderAppointmentCategory(c,u,p-1,i,a,this.leftPosition);this._overflowFlag=!0}_=this.element.find(".e-appsoverflow").length>0?this.element.find(".e-appsoverflow").height():0,C=this.CellHeight-(W+_-2),this.model.enableRTL?this.element.find(".e-icon.e-appsoverflow").css({right:this.CellWidth+this.leftPosition-25+"px",top:C+"px"}):this.element.find(".e-icon.e-appsoverflow").css({left:this.CellWidth+this.leftPosition-25+"px",top:C+"px"})}delete i.Index}i[this._appointmentSettings.recurrence]||this.model.allowInline||(f=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,i.ParentId)),w=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,i.Guid)),new Date(i[this._appointmentSettings.endTime])<f[0][this._appointmentSettings.endTime]&&(this.model.enableRTL?this.element.find(S).eq(p-1).find("div[data-guid="+f[0].Guid+"]").children(".e-lefthandle").remove():this.element.find(S).eq(p-1).find("div[data-guid="+f[0].Guid+"]").children(".e-righthandle").remove()),new Date(i[this._appointmentSettings.startTime])>f[0][this._appointmentSettings.startTime]&&(this.model.enableRTL?this.element.find(S).eq(p-1).find("div[data-guid="+i.Guid+"]").children(".e-righthandle").remove():this.element.find(S).eq(p-1).find("div[data-guid="+i.Guid+"]").children(".e-lefthandle").remove())),!t.isNullOrUndefined(w)&&w>1&&(this.element.find(S).eq(p-1).find("div[data-guid="+i.Guid+"]").children(".e-lefthandle").remove(),this.element.find(S).eq(p-1).find("div[data-guid="+i.Guid+"]").children(".e-righthandle").remove()),t.isNullOrUndefined(P)||(P.leftIndication&&(this.model.enableRTL?this.element.find("div[data-guid="+i.Guid+"]").find(".e-schedulemouseclose").css("margin-left","11px"):this.element.find("div[data-guid="+i.Guid+"]").find(".e-apptime,.e-apptext").css("margin-left","13px")),P.rightIndication&&(this.model.enableRTL?this.element.find("div[data-guid="+i.Guid+"]").find(".e-apptime,.e-apptext").css("margin-right","13px"):this.element.find("div[data-guid="+i.Guid+"]").find(".e-schedulemouseclose").css("margin-right","11px")))},_getElementHeight:function(e){var i,n=t.buildTag("div").addClass(e).clone(!1);return n.css({visibility:"hidden",position:"absolute"}),n.appendTo(this.element.find(".e-scheduleinner")),i=n.outerHeight(!0),n.remove(),i},_quickWindowClose:function(){this._quickAppointWindow.find(".e-error").remove(),this._quickAppointWindow.ejDialog("close"),this._scrollerPosition(),this._processFocus()},_appointmentWindow:function(i){var n,s,r,a,o,l;if(e(i.target).closest(".e-appointment,.e-alldayappointment,.e-monthappointment")&&"tap"==i.type&&(l=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,e(i.target).closest(".e-appointment,.e-alldayappointment,.e-monthappointment").attr("data-guid"))),this._trigger("appointmentClick",{appointment:l[0],events:i})))return!1;if(this.model.allowInline){if(e(i.target).hasClass("e-inlineedit"))return!1;(e(i.currentTarget).hasClass("e-agendacells")||e(i.currentTarget).hasClass("e-inline")||e(i.currentTarget).hasClass("e-monthcells")||e(i.currentTarget).hasClass("e-workcells")||e(i.currentTarget).hasClass("e-alldaycells"))&&!t.isNullOrUndefined(this._inlineText)&&this._inlineRemove()}if(t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor(),!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&this._quickAppointWindow.ejDialog("close"),r=t.isNullOrUndefined(i.target)?e(i):e(i.target),"agenda"==this.currentView()||r.hasClass("e-detailedapp")||t.isNullOrUndefined(this.model.workCellsTemplateId)&&t.isNullOrUndefined(this.model.allDayCellsTemplateId)||(r=t.isNullOrUndefined(e(i.target).closest(".e-appointment,.e-alldayappointment,.e-monthappointment"))?r.closest(".e-workcells, .e-alldaycells, .e-monthcells"):e(i.target).closest(".e-appointment,.e-alldayappointment,.e-monthappointment")),r.hasClass("e-appup")||r.hasClass("e-appdown")||r.closest(".e-categorybar").hasClass("e-categorybar")||(a=r.closest(".e-blocktimeappointment"),r.hasClass("e-blocktimeappointment")&&r.hasClass(".e-blockenable")||a.length>0&&r.closest(".e-blockenable").length>0))return!1;a.length>0&&(i.target.closest(".e-blocktimeappointment").style.pointerEvents="none",r=e(document.elementFromPoint(i.pageX,i.pageY)),i.target.closest(".e-blocktimeappointment").style.pointerEvents="");var d=(r.hasClass("e-workcells")||r.hasClass("e-alldaycells")||r.hasClass("e-monthcells")||this._cellClick||r.hasClass("e-detailedapp"))&&!r.hasClass("e-resourceheadercells")&&!r.hasClass("e-schedulemouseclose")&&!r.hasClass("e-appointinnertext")&&!r.hasClass("e-apptext")&&!r.hasClass("e-apptime"),h=null!=this.model.appointmentWindowOpen||null!=this.model.cellDoubleClick||!t.isNullOrUndefined(this.model.serverEvents)&&(-1!=this.model.serverEvents.indexOf("appointmentWindowOpen")||-1!=this.model.serverEvents.indexOf("cellDoubleClick")),p={startTime:new Date(this.cur_StartTime),endTime:this.cur_EndTime,target:i,resources:h&&d&&0!=this._tempResource.length?this._getResourceValue(r):null};if(!(r.hasClass("e-workcells")||r.hasClass("e-alldaycells")||r.hasClass("e-monthcells")||this._cellClick||r.hasClass("e-detailedapp"))||r.hasClass("e-resourceheadercells")||r.hasClass("e-schedulemouseclose")||r.hasClass("e-appointinnertext")||r.hasClass("e-apptext")||r.hasClass("e-apptime")){if(!r.hasClass("e-resourceheadercells")&&!r.hasClass("e-schedulemouseclose")){if(r.hasClass("e-monthheader")||r.hasClass("e-appsoverflow"))return!1;o=this._editKey?e(i):r.hasClass("e-appointment")||r.hasClass("e-monthappointment")||r.hasClass("e-alldayappointment")||r.hasClass("e-agendaappointment")?r:r.parents(".e-monthappointment,.e-appointment,.e-alldayappointment,.e-agendaappointment"),"agenda"==this.currentView()&&(o=o.hasClass("e-agendaappointment")?o:this.element.find(".e-selectedCell").parent().find(".e-agendaappointment")),o.length>0&&!t.isNullOrUndefined(o[0].id)&&(this._currentAction=t.Schedule.Actions.Save,this._appUid=o.attr("data-guid"),(l=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)))[0][this._appointmentSettings.recurrence]?(this._parentId=l[0].ParentId,this._appId=l[0].Id,this.model.showRecurrenceAlert?(t.isNullOrUndefined(this._recurEditWindow)&&this._renderRecurEditWindow(),this._recurEditWindow.ejDialog("open"),this._recurEditWindow.focus(),this._deleteBeforeOpen()):(this._editclick=!1,this._showAppointmentDetails(this._appId,!1))):this._showAppointmentDetails(this._appUid,!0),!t.isNullOrUndefined(this._quickAppDetailsWindow)&&this.model.showQuickWindow&&this._quickAppDetailsWindow.ejDialog("close")),this._editKey=!1}}else{if(!t.isNullOrUndefined(this.model.cellDoubleClick)&&this._trigger("cellDoubleClick",p))return!1;this._currentAction=t.Schedule.Actions.Add,t.isNullOrUndefined(this._appointmentAddWindow)||(this._appointmentAddWindow.find(".e-recurEditor").css("display","none"),this._appointmentAddWindow.find(".e-appwindow").css("display","block"));var m=this._cellIndex,c="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.dateRender:this._dateRender:this.monthDays,u=new Date(c[m]);if(this.model.minDate>u||this.model.maxDate<u||(n=new Date(this.cur_StartTime),s=new Date(this.cur_EndTime),(!t.isNullOrUndefined(this.model.appointmentWindowOpen)||!t.isNullOrUndefined(this.model.serverEvents)&&-1!=this.model.serverEvents.indexOf("appointmentWindowOpen"))&&this._trigger("appointmentWindowOpen",p)))return!1;t.isNullOrUndefined(this._appointmentAddWindow)||(this._appointmentAddWindow.find("#"+this._id+"subject").val(this.model.showQuickWindow?this._quickAppointWindow.find(".subject").val():""),this._appointmentAddWindow.find("#"+this._id+"location").val(this.model.showQuickWindow?this._quickAppointWindow.find(".location").val():""),this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option",{value:t.format(new Date(n),this._datepattern(),this.model.locale)}),this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option",{value:t.format(new Date(s),this._datepattern(),this.model.locale)}),this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value",t.format(new Date(n),this._pattern.t,this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value",t.format(new Date(s),this._pattern.t,this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"priority").ejDropDownList("option","value",this.model.prioritySettings.dataSource[0][this.model.prioritySettings.value]),(e(i.currentTarget).hasClass("e-alldaycells")||"month"==this.currentView()||this._isCustomMonthView())&&this._appointmentAddWindow.find(".allday").ejCheckBox({checked:!0}),this._timeZoneCollection(null),this._tempStart=this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value"),this._tempEnd=this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value"),this._alldayCheck(),t.scheduleFeatures.resources&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&this._renderResourceData(r,this._cellIndex),this.model.readOnly||(this._appointmentAddWindow.find(".e-appsave ,#"+this._id+"donerecur").ejButton("enable",!0),this._mediaQuery&&this._appointmentAddWindow.find(".e-btndelete").css("display","none"),this._appointmentAddWindow.ejDialog("open")),this._mediaQuery||this._appointmentAddWindow.find(".subject").focus(),this._cellClick=!1)}},_openWindow:function(i){this._currentAction=t.Schedule.Actions.Add,t.isNullOrUndefined(this._appointmentAddWindow)||(this._appointmentAddWindow.find(".e-recurEditor").css("display","none"),this._appointmentAddWindow.find(".e-appwindow").css("display","block")),i=e(i);var n=this.getSlotByElement(i),s=n.startTime,r=n.endTime;if((!t.isNullOrUndefined(this.model.appointmentWindowOpen)||!t.isNullOrUndefined(this.model.serverEvents)&&-1!=this.model.serverEvents.indexOf("appointmentWindowOpen"))&&this._trigger("appointmentWindowOpen",n))return!1;t.isNullOrUndefined(this._appointmentAddWindow)||(this._appointmentAddWindow.find("#"+this._id+"subject").val(""),this._appointmentAddWindow.find("#"+this._id+"location").val(""),this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option",{value:t.format(new Date(s),this._datepattern(),this.model.locale)}),this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option",{value:t.format(new Date(r),this._datepattern(),this.model.locale)}),this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value",t.format(new Date(s),this._pattern.t,this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value",t.format(new Date(r),this._pattern.t,this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"priority").ejDropDownList("option","value",this.model.prioritySettings.dataSource[0][this.model.prioritySettings.value]),this._timeZoneCollection(null),this._tempStart=this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value"),this._tempEnd=this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value"),this._alldayCheck(),t.scheduleFeatures.resources&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&this._renderResourceData(i,i[0].cellIndex),this.model.readOnly||(this._appointmentAddWindow.find(".e-appsave ,#"+this._id+"donerecur").ejButton("enable",!0),this._mediaQuery&&this._appointmentAddWindow.find(".e-btndelete").css("display","none"),this._appointmentAddWindow.ejDialog("open")),this._mediaQuery||this._appointmentAddWindow.find(".subject").focus(),this._cellClick=!1)},showAppointmentWindow:function(e,i){switch(t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor(),this._currentAction=i,i){case t.Schedule.Actions.Add:this._openWindow(e);break;case t.Schedule.Actions.Save:case t.Schedule.Actions.EditSeries:case t.Schedule.Actions.EditOccurrence:t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.ejDialog({title:this._getLocalizedLabels("Editevent")});var n=e.Guid;this._parentId=e.ParentId,i==t.Schedule.Actions.EditSeries&&(this._appUid=e.Guid,n=e[this._appointmentSettings.id]),this._showAppointmentDetails(n,i!=t.Schedule.Actions.EditSeries)}},_editRecurrence:function(){this._appointmentAddWindow.find(".e-appwindow").toggle(),this._mediaQuery&&this._appointmentAddWindow.parent().parent().find(".e-dialog-icon").css("display","none"),this._appointmentAddWindow.find(".e-recurEditor").css("margin-left",700).toggle().animate({"margin-left":10},300)},_showAppointmentDetails:function(e,i){var n,s,r,a,o,l;t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor(),t.isNullOrUndefined(this._appointmentAddWindow)&&t.RecurrenceEditor.prototype._initializePrivateProperties(),n=t.isNullOrUndefined(this._appointmentAddWindow)?t.RecurrenceEditor.prototype:this._appointmentAddWindow.find(".e-recurrenceeditor").data("ejRecurrenceEditor"),this._appUid=t.isNullOrUndefined(this._appUid)?e:this._appUid;var d=1==i?(new t.Query).where("Guid",t.FilterOperators.equal,e):(new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,e),h=1==i?this._processed:this._currentAppointmentData,p=this._sortAppById(new t.DataManager(h).executeLocal(d)),m=this._recurrenceAppSort(p);if(this.model.showRecurrenceAlert||(s=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))),r=this._recurrenceAppSort(s)),a=m[0][this._appointmentSettings.recurrence]?this.model.showRecurrenceAlert?{appointment:m[0],edit:i,editSeries:!i}:{appointment:m[0],edit:i,editSeries:!0,recurrenceCollection:{occurrences:r[0],parentData:m[0]}}:{appointment:m[0],edit:i},this._trigger("appointmentWindowOpen",a))return!1;i=!t.isNullOrUndefined(a.editSeries)&&!a.editSeries,this._currentAction=this.model.showRecurrenceAlert?t.isNullOrUndefined(this._currentAction)||""==this._currentAction?t.Schedule.Actions.Save:this._currentAction:this._editclick?this._currentAction:a.editSeries?t.Schedule.Actions.EditSeries:t.Schedule.Actions.EditOccurrence,i&&(t.isNullOrUndefined(m[0][this._appointmentSettings.recurrenceRule])||-1==m[0][this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID")||this._currentAction==t.Schedule.Actions.EditFutureOccurrences||(this._currentAction=t.Schedule.Actions.Save)),t.isNullOrUndefined(this._appointmentAddWindow)||(o=this.model.showRecurrenceAlert?m[0]:a.editSeries?m[0]:r[0],this._appointmentAddWindow.find(".subject").val(o[this._appointmentSettings.subject]),this._appointmentAddWindow.find(".location").val(o[this._appointmentSettings.location]),this._appointmentAddWindow.find(".id").val(o.AppTaskId),this._appointmentAddWindow.find(".e-description").val(o[this._appointmentSettings.description]?o[this._appointmentSettings.description]:""),this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value",t.format(o[this._appointmentSettings.startTime],this._datepattern(),this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value",t.format(o[this._appointmentSettings.endTime],this._datepattern(),this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value",t.format(o[this._appointmentSettings.startTime],this._pattern.t,this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value",t.format(o[this._appointmentSettings.endTime],this._pattern.t,this.model.locale)),this.model.prioritySettings.enable&&(t.isNullOrUndefined(o[this._appointmentSettings.priority])?this._appointmentAddWindow.find("#"+this._id+"priority").ejDropDownList("option",{value:this.model.prioritySettings.dataSource[0][this.model.prioritySettings.value]}):this._appointmentAddWindow.find("#"+this._id+"priority").ejDropDownList("option",{value:o[this._appointmentSettings.priority]})),this._timeZoneCollection(o),this._tempStart=this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value"),this._tempEnd=this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value"),o[this._appointmentSettings.allDay]&&this._appointmentAddWindow.find(".allday ").ejCheckBox({checked:!0}),o[this._appointmentSettings.recurrence]&&(n._recRule=o[this._appointmentSettings.recurrenceRule],(i=this.model.showRecurrenceAlert?i:!a.editSeries)?(this._appointmentAddWindow.find(".recurrence").ejCheckBox({checked:!0,enabled:this._currentAction==t.Schedule.Actions.EditFutureOccurrences}),this._currentAction!=t.Schedule.Actions.EditFutureOccurrences&&this._appointmentAddWindow.find(".e-repeatlbl").addClass("e-disable"),this._appointmentAddWindow.find("."+this._id+"summary").css({display:this._currentAction==t.Schedule.Actions.EditFutureOccurrences?"table-row":"none"}),this._appointmentAddWindow.find(".e-recurFinalRule").html(""),this._currentAction==t.Schedule.Actions.EditFutureOccurrences&&(n.recurrenceRuleSplit(o[this._appointmentSettings.recurrenceRule]),this._appointmentAddWindow.find(".recurstartdate").ejDatePicker({value:t.format(o[this._appointmentSettings.startTime],this._datepattern(),this.model.locale)}),this._appointmentAddWindow.find(".e-recurFinalRule").html(n.showRecurrenceSummary()),this._appointmentAddWindow.find(".e-recuredit").css("display","inline"))):(n.recurrenceRuleSplit(o[this._appointmentSettings.recurrenceRule],o[this._appointmentSettings.recurrenceExDate]),this._appointmentAddWindow.find(".recurstartdate").ejDatePicker({value:t.format(o[this._appointmentSettings.startTime],this._datepattern(),this.model.locale)}),this._appointmentAddWindow.find("."+this._id+"summary").css("display","table-row"),this._appointmentAddWindow.find(".e-recurFinalRule").html(n.showRecurrenceSummary(e)),this._appointmentAddWindow.find(".recurrence").ejCheckBox({checked:!0}),this._appointmentAddWindow.find(".e-recuredit").css("display","inline"))),this.model.categorizeSettings.enable&&!t.isNullOrUndefined(o[this._appointmentSettings.categorize])&&this._showCategorizeDetails(o),0!=this._tempResource.length&&t.scheduleFeatures.resources&&this._showMultipleResourceDetails(o),(o[this._appointmentSettings.allDay]||"agenda"==this.currentView())&&this._alldayCheck(),l=this.model.readOnly?"disable":"enable",this._appointmentAddWindow.find(".e-appsave,#"+this._id+"donerecur").ejButton(l,!0),this._mediaQuery&&this._appointmentAddWindow.find(".e-btndelete").css("display","block"),this._appointmentAddWindow.ejDialog("open"),this._mediaQuery||this._appointmentAddWindow.find(".subject").focus())},_recurDateChange:function(e){this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value",e),this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value")<this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value")?this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value",e):e!=this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value")&&this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value",e)},_cancel:function(){this._appointmentAddWindow.ejDialog("close")},_timeChange:function(e){var i=this._appointmentAddWindow.find("#"+this._id+"starttime").data("ejTimePicker");if(t.isNullOrUndefined(e.value))i.option("value",new Date(this.cur_StartTime));else if(i.showDropdown&&i._id==this._id+"starttime"){if(this._appointmentAddWindow.find(".startutc").val()!=this._appointmentAddWindow.find(".endutc").val())this._utcValue("","starttime");else{var n=this._timeFormat(this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value")).split(":"),s=new Date(new Date("1/1/2000").setHours(parseInt(n[0],10),parseInt(n[1],10))),r=this._timeFormat(this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value")).split(":"),a=new Date(new Date("1/1/2000").setHours(parseInt(r[0],10),parseInt(r[1],10))),o=this._timeFormat(e.prevTime).split(":"),l=new Date(new Date("1/1/2000").setHours(parseInt(o[0],10),parseInt(o[1],10))),d=new Date(new Date(a).setHours(a.getHours()+s.getHours()-l.getHours(),a.getMinutes()+s.getMinutes()-l.getMinutes()));this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value",d)}this._startSlotChange=!0}},_setQuickValidation:function(){var i,n,s,r;if(t.isNullOrUndefined(this._quickAppointWindow))return!1;i=this._id+"_AddForm",this._initValidator(i),t.isNullOrUndefined(this.model.appointmentSettings.subject)||t.isNullOrUndefined(this.model.appointmentSettings.subject.validationRules)||(n=this.model.appointmentSettings.subject.field,s=this.model.appointmentSettings.subject.validationRules,ele=this._quickAppointWindow.find(".subject"),ele.attr("name")||ele.attr("name",n),ele.rules("add",s),r=e("#"+this._id+"_AddForm").validate(),t.isNullOrUndefined(s.required)||(t.isNullOrUndefined(r.settings.messages[n])&&(r.settings.messages[n]={}),r.settings.messages[n].required=t.isNullOrUndefined(s.messages&&s.messages.required)?n+" is required.":s.messages.required))},_setValidation:function(){var i,n=this._id+"_AddEditForm";this._initValidator(n),i=this,e.each(this.model.appointmentSettings,function(e){t.isNullOrUndefined(i.model.appointmentSettings[e])||t.isNullOrUndefined(i.model.appointmentSettings[e].validationRules)||i._setValidationToField(e,i.model.appointmentSettings[e].field,i.model.appointmentSettings[e].validationRules)})},_initValidator:function(i){e("#"+i).validate({onfocusout:!1,ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(i,n){var s,r=n.closest("td"),a=e(i).addClass("e-error"),o=t.buildTag("div.e-errortail e-toparrow");r.find(".e-error").remove(),n.parent().hasClass("e-in-wrap")?a.insertAfter(n.closest(".e-widget")):a.insertAfter(n),a.prepend(o),s="checkbox"==n[0].type||"hidden"==n[0].type?n.parent().offset().top+n.parent().height():n.offset().top+n.height(),a.offset({top:s}),a.fadeIn("slow")}})},_setValidationToField:function(i,n,s){var r,a,o;for(ele="startTime"==i?this._appointmentAddWindow.find("#"+this._id+"startdate,#"+this._id+"starttime"):"endTime"==i?this._appointmentAddWindow.find("#"+this._id+"enddate,#"+this._id+"endtime"):"resourceFields"==i?e("#"+this._id+"AppointmentAddEditWindow").find("[id^="+this._id+"_ownerfield_][type!=hidden]").find(".e-autocomplete"):e("#"+this._id+"AppointmentAddEditWindow").find("[name="+n+"][type!=hidden]"),ele.length<1&&(ele=e("#"+this._id+i)),r=0;r<ele.length;r++)e(ele[r]).hasClass("e-autocomplete")&&(a=e(ele[r]).data("ejAutocomplete"),ele[r]="visualmode"==a.model.multiSelectMode?a._hiddenInput:a.element),e(ele[r]).rules("add",s),o=e("#"+this._id+"_AddEditForm").validate(),t.isNullOrUndefined(s.required)||(t.isNullOrUndefined(o.settings.messages[n])&&(o.settings.messages[n]={}),o.settings.messages[n].required=t.isNullOrUndefined(s.messages&&s.messages.required)?n+" is required.":s.messages.required)},_endTimeChange:function(e){var i=this._appointmentAddWindow.find("#"+this._id+"endtime").data("ejTimePicker");t.isNullOrUndefined(e.value)?i.option("value",new Date(this.cur_EndTime)):i.showDropdown&&i._id==this._id+"endtime"&&(this._endSlotChange=!0)},_renderControls:function(){var i=this._appointmentAddWindow;i.find(".allday").ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,change:e.proxy(this._alldayCheck,this)}),i.find(".startenddate").ejDatePicker({buttonText:this._getLocalizedLabels("Today"),startDay:this._firstdayofweek,enableRTL:this.model.enableRTL,width:"100%",value:this.currentDate(),locale:this.model.locale,dateFormat:this.model.dateFormat,cssClass:this.model.cssClass,minDate:this.model.minDate,maxDate:this.model.maxDate}),i.find("#"+this._id+"starttime").ejTimePicker({enableRTL:this.model.enableRTL,width:"100%",value:this.currentDate(),locale:this.model.locale,change:e.proxy(this._timeChange,this),cssClass:this.model.cssClass,interval:30,timeFormat:"12"==this._timeMode?this._pattern.t:"HH:mm"}),i.find("#"+this._id+"endtime").ejTimePicker({enableRTL:this.model.enableRTL,width:"100%",value:this.currentDate(),locale:this.model.locale,change:e.proxy(this._endTimeChange,this),cssClass:this.model.cssClass,interval:30,timeFormat:"12"==this._timeMode?this._pattern.t:"HH:mm"}),i.find("#"+this._id+"startTimeZone").ejDropDownList({enableRTL:this.model.enableRTL,dataSource:this.model.timeZoneCollection.dataSource,fields:{text:this.model.timeZoneCollection.text,id:this.model.timeZoneCollection.id,value:this.model.timeZoneCollection.value},width:"100%",select:e.proxy(this._startUtc,this),cssClass:this.model.cssClass}),i.find("#"+this._id+"endTimeZone").ejDropDownList({enableRTL:this.model.enableRTL,dataSource:this.model.timeZoneCollection.dataSource,fields:{text:this.model.timeZoneCollection.text,id:this.model.timeZoneCollection.id,value:this.model.timeZoneCollection.value},width:"100%",select:e.proxy(this._endUtc,this),cssClass:this.model.cssClass}),!this.model.prioritySettings.enable||this.model.prioritySettings.dataSource instanceof t.DataManager||this._renderPriorityItems(i),0!=this._tempResource.length&&t.scheduleFeatures.resources&&this._renderAppWindowResources(i),!this.model.categorizeSettings.enable||this.model.categorizeSettings.dataSource instanceof t.DataManager||this._renderCategoryItems(i),i.find(".recurrence").ejCheckBox({enableRTL:this.model.enableRTL,change:e.proxy(this._repeat,this),cssClass:this.model.cssClass}),i.find(".e-btndone").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:this._mediaQuery?"100%":"100px",click:e.proxy(this._saveAppointment,this),cssClass:"e-flat"+this.model.cssClass}),i.find(".cancel").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:this._mediaQuery?"100%":"100px",click:e.proxy(this._cancel,this),cssClass:"e-flat"+this.model.cssClass}),this._mediaQuery&&i.find(".e-btndelete").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"100%",click:e.proxy(this._mobileAppDelete,this),cssClass:"e-flat"+this.model.cssClass})},_mobileAppDelete:function(){this._mediaQuery&&!t.isNullOrUndefined(this._editOnlyClicked)&&!this._editOnlyClicked&&this._appointmentAddWindow.find(".recurrence").ejCheckBox("option","checked")?this._deleteApp(this._appUid):this._deleteAppoint(),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.ejDialog("close")},_renderPriorityItems:function(e){t.isNullOrUndefined(e)||e.find(".priority").ejDropDownList({enableRTL:this.model.enableRTL,template:t.isNullOrUndefined(this.model.prioritySettings.template)?"<div class='e-${"+this.model.prioritySettings.value+"}'></div><div>${"+this.model.prioritySettings.text+"}</div>":this.model.prioritySettings.template+"${"+this.model.prioritySettings.text+"}",dataSource:this.model.prioritySettings.dataSource,fields:{text:this.model.prioritySettings.text,value:this.model.prioritySettings.value},width:"100%",cssClass:this.model.cssClass})},_renderCategoryItems:function(i){t.isNullOrUndefined(i)||i.find(".e-categorizevalue").ejAutocomplete({enableRTL:this.model.enableRTL,showPopupButton:!0,width:"100%",cssClass:this.model.cssClass,delaySuggestionTimeout:10,multiSelectMode:this.model.categorizeSettings.allowMultiple?"visualmode":"none",open:function(){this.suggestionList.find(".e-ul").width("auto")},focusOut:e.proxy(this._categorizeValidate,this),dataSource:this.model.categorizeSettings.dataSource,fields:{text:this.model.categorizeSettings.text,key:this.model.categorizeSettings.id},template:this._categorizeTemplate,emptyResultText:this._getLocalizedLabels("EmptyResultText")})},_categorizeValidate:function(){if(e.isFunction(e.validator)&&!e("#"+this._id+"_AddEditForm").validate().form())return!1},_appointmentColor:function(e){var i=this.model.categorizeSettings.enable&&!t.isNullOrUndefined(e[this._appointmentSettings.categorize])&&""!=e[this._appointmentSettings.categorize]?this._getCategorizeColor(e):0!=this._tempResource.length&&t.scheduleFeatures.resources?this._getResourceColor(e):{appointData:"",appointCustomcss:"",appointtextcolor:"",applyFilter:!0};if(this.model.categorizeSettings.enable&&this.model.categorizeSettings.allowMultiple&&!t.isNullOrUndefined(e[this._appointmentSettings.categorize]))var n=e[this._appointmentSettings.categorize].split(","),s=n.length,r=s>1,a=this._categorizeMultipleDiv(e,n,s);return!t.isNullOrUndefined(a)&&i.appointData.length>0&&this.model.categorizeSettings.allowMultiple?{appointColor:i,value:r,multiDiv:a,applyFilter:!1}:i.appointData.length>0&&!this.model.categorizeSettings.allowMultiple||0!=this._tempResource.length&&t.scheduleFeatures.resources?{appointColor:i,applyFilter:!1}:{appointColor:i,value:r="",multiDiv:a,applyFilter:!0}},_categorizeMultipleDiv:function(e,i,n){for(var s,r,a=[],o=0;o<=n-1;o++)if(o!=n-1){if(s=this.model.categorizeSettings,r=this._findResourceIndex(s.dataSource,this.model.categorizeSettings.id,i[o],null,null),t.isNullOrUndefined(r)&&(r=this._findResourceIndex(s.dataSource,this.model.categorizeSettings.id,parseInt(i[o]),null,null)),t.isNullOrUndefined(r))return e[this._appointmentSettings.categorize]="",null;a.push({text:s.dataSource[r][s.text],value:s.dataSource[r][s.color],key:s.dataSource[r][s.id],fontColor:s.dataSource[r][s.fontColor]})}return this._categorizeMultipleTemplate.render({renderData:a})},_getResCategorySaveData:function(e,i,n,s,r){var a,o,l,d,h,p,m,c,u,g,_,f,w,D,S;if(this._groupEditing){if(a=[],h=[],o=this._addAppData(n,s,new Date(n[this._appointmentSettings.startTime]),new Date(n[this._appointmentSettings.endTime]),r),e.length>0&&!t.isNullOrUndefined(e[0][0])){for(p=e[e.length-1].length-1,m="",S=0;S<=p;S++)c=e[e.length-1][S][this.model.categorizeSettings.id],m=S!=p?m+c.toString()+",":m+c.toString();o[this._appointmentSettings.categorize]=m}if(i.length>0){if(u=o[this._appointmentSettings.categorize],D=this._appointmentSettings.resourceFields.toString().split(","),0!=this._grouping.length&&D.length!=this._grouping.length){for(S=0;S<this._grouping.length;S++)h.push(D[S]);D=h}if(g=this._getResourceCollection(),_=this._guidFormatGenerate(),i[i.length-1].length>0){for(n.commonGuid=_,o=this._addAppData(n,s,new Date(n[this._appointmentSettings.startTime]),new Date(n[this._appointmentSettings.endTime]),r),e.length>0&&(o[this._appointmentSettings.categorize]=u),i[i.length-1].length>1&&(n.Guid=this._guidFormatGenerate(),s++,s=0==new t.DataManager(this._processed).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,s)).length?s:this._sortAppById(this._processed)[this._processed.length-1].AppTaskId+1,n[this._appointmentSettings.id]=r=s,this._currentAction==t.Schedule.Actions.EditSeries&&(n[this._appointmentSettings.recurrenceId]=s)),f=0;f<i[i.length-1].length;f++){for(t.isNullOrUndefined(o[D[D.length-1].trim()])?o[D[D.length-1].trim()]=i[D.length-1][f][g[g.length-1].id]+",":o[D[D.length-1].trim()]+=i[D.length-1][f][g[g.length-1].id]+",",w=i[D.length-1][f][g[g.length-1].id],S=D.length-1;S>0;S--)l=this.render_Resources[S]instanceof t.DataManager?this.render_Resources[S]:t.DataManager(this.render_Resources[S]),query=(new t.Query).where(g[S].id,t.FilterOperators.equal,w),appointId=l.executeLocal(query),d=this.render_Resources[S-1]instanceof t.DataManager?this.render_Resources[S-1]:t.DataManager(this.render_Resources[S-1]),query1=(new t.Query).where(g[S-1].id,t.FilterOperators.equal,appointId[0][g[S].groupId]),appointGroupId=d.executeLocal(query1),w=appointGroupId[0][g[S-1].id],grpId=appointGroupId[0][this._tempResource[S-1].resourceSettings.groupId],t.isNullOrUndefined(o[D[S-1]])?o[D[S-1]]=w+",":o[D[S-1]]+=w+",";this._currentAction==t.Schedule.Actions.EditOccurrence&&(o[this._appointmentSettings.id]=o.AppTaskId)}for(S=0;S<D.length;S++)o[D[S]]=o[D[S]].slice(",",-1);a.push(o),this._groupEdit=!0}else{if(D=this._appointmentSettings.resourceFields.toString().split(","),o=this._addAppData(n,s,new Date(n[this._appointmentSettings.startTime]),new Date(n[this._appointmentSettings.endTime]),r),e.length>0&&(o[this._appointmentSettings.categorize]=u),D.length>1)for(S=0;S<D.length;S++)o[D[S].trim()]=this._tempResource[S].resourceSettings.dataSource[0][this._tempResource[S].resourceSettings.id];else o[D[D.length-1].trim()]=this._tempResource[0].resourceSettings.dataSource[0].id;this._currentAction==t.Schedule.Actions.EditOccurrence&&(o[this._appointmentSettings.id]=o.AppTaskId),a.push(o)}}return 0==i.length&&e.length>0&&(this._currentAction==t.Schedule.Actions.EditOccurrence&&(o[this._appointmentSettings.id]=o.AppTaskId),a.push(o)),a}if(a=[],h=[],o=this._addAppData(n,s,new Date(n[this._appointmentSettings.startTime]),new Date(n[this._appointmentSettings.endTime]),r),e.length>0&&!t.isNullOrUndefined(e[0][0])){for(p=e[e.length-1].length-1,m="",S=0;S<=p;S++)c=e[e.length-1][S][this.model.categorizeSettings.id],m=S!=p?m+c.toString()+",":m+c.toString();o[this._appointmentSettings.categorize]=m}if(i.length>0){if(u=o[this._appointmentSettings.categorize],D=this._appointmentSettings.resourceFields.toString().split(","),0!=this._grouping.length&&D.length!=this._grouping.length){for(S=0;S<this._grouping.length;S++)h.push(D[S]);D=h}if(g=this._getResourceCollection(),_=this._guidFormatGenerate(),i[i.length-1].length>0)for(f=0;f<i[i.length-1].length;f++){for(n.commonGuid=_,o=this._addAppData(n,s,new Date(n[this._appointmentSettings.startTime]),new Date(n[this._appointmentSettings.endTime]),r),e.length>0&&(o[this._appointmentSettings.categorize]=u),i[i.length-1].length>1&&(n.Guid=this._guidFormatGenerate(),s++,s=0==new t.DataManager(this._processed).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,s)).length?s:this._sortAppById(this._processed)[this._processed.length-1].AppTaskId+1,n[this._appointmentSettings.id]=r=s,this._currentAction==t.Schedule.Actions.EditSeries&&(n[this._appointmentSettings.recurrenceId]=s)),o[D[D.length-1].trim()]=i[D.length-1][f][g[g.length-1].id],w=i[D.length-1][f][g[g.length-1].id],S=D.length-1;S>0;S--)l=this.render_Resources[S]instanceof t.DataManager?this.render_Resources[S]:t.DataManager(this.render_Resources[S]),query=(new t.Query).where(g[S].id,t.FilterOperators.equal,w),appointId=l.executeLocal(query),d=this.render_Resources[S-1]instanceof t.DataManager?this.render_Resources[S-1]:t.DataManager(this.render_Resources[S-1]),query1=(new t.Query).where(g[S-1].id,t.FilterOperators.equal,i[D.length-1][f][g[g.length-1].groupId]),appointGroupId=d.executeLocal(query1),w=appointGroupId[0][g[S-1].id],grpId=appointGroupId[0][this._tempResource[S-1].resourceSettings.groupId],o[D[S-1]]=w;this._currentAction==t.Schedule.Actions.EditOccurrence&&(o[this._appointmentSettings.id]=o.AppTaskId),a.push(o)}else{if(D=this._appointmentSettings.resourceFields.toString().split(","),o=this._addAppData(n,s,new Date(n[this._appointmentSettings.startTime]),new Date(n[this._appointmentSettings.endTime]),r),e.length>0&&(o[this._appointmentSettings.categorize]=u),D.length>1)for(S=0;S<D.length;S++)o[D[S].trim()]=this._tempResource[S].resourceSettings.dataSource[0][this._tempResource[S].resourceSettings.id];else o[D[D.length-1].trim()]=this._tempResource[0].resourceSettings.dataSource[0].id;this._currentAction==t.Schedule.Actions.EditOccurrence&&(o[this._appointmentSettings.id]=o.AppTaskId),a.push(o)}}return 0==i.length&&e.length>0&&(this._currentAction==t.Schedule.Actions.EditOccurrence&&(o[this._appointmentSettings.id]=o.AppTaskId),a.push(o)),a},_timeZoneCollection:function(e){var i;t.isNullOrUndefined(e)||(this.startTimeAppoint=e[this._appointmentSettings.startTimeZone],this.endTimeAppoint=e[this._appointmentSettings.endTimeZone]),this.startutcValue=this.tempValue=null,!t.isNullOrUndefined(e)&&this.endTimeAppoint&&(this._utcValue(e,"Appoint"),this.tempValue=1);var n=null==this.model.timeZone?this._timezoneStringValue():this.model.timeZone,s=t.isNullOrUndefined(e)?n:t.isNullOrUndefined(this.startTimeAppoint)?n:this.startTimeAppoint,r=0!=s.indexOf("UTC")?"UTC "+s:s,a=3!=r.split(" ")[1].split(":")[0].length?"+"==r.split(" ")[1].split(":")[0][0]?"+0"+r.split(" ")[1].split(":")[0].split("+")[1]+":"+r.split(" ")[1].split(":")[1]:"-0"+r.split(" ")[1].split(":")[0].split("-")[1]+":"+r.split(" ")[1].split(":")[1]:r,o=0!=a.indexOf("UTC")?"UTC "+a:a,l=t.isNullOrUndefined(this._findResourceIndex(this.model.timeZoneCollection.dataSource,this.model.timeZoneCollection.value,o,null,null))?"add":this._findResourceIndex(this.model.timeZoneCollection.dataSource,this.model.timeZoneCollection.value,o,null,null);t.isNullOrUndefined(e)||"add"===l?"add"!==l&&(this._appointmentAddWindow.find("#"+this._id+"startTimeZone").ejDropDownList("option",{text:this.model.timeZoneCollection.dataSource[l][this.model.timeZoneCollection.text],value:this.model.timeZoneCollection.dataSource[l][this.model.timeZoneCollection.value]}),this._appointmentAddWindow.find("#"+this._id+"endTimeZone").ejDropDownList("option",{text:this.model.timeZoneCollection.dataSource[l][this.model.timeZoneCollection.text],value:this.model.timeZoneCollection.dataSource[l][this.model.timeZoneCollection.value]})):(this._appointmentAddWindow.find("#"+this._id+"startTimeZone").ejDropDownList("option",{value:t.isNullOrUndefined(e)||t.isNullOrUndefined(this.startTimeAppoint)?this.model.timeZoneCollection.dataSource[l][this.model.timeZoneCollection.value]:this.startTimeAppoint}),this._appointmentAddWindow.find("#"+this._id+"endTimeZone").ejDropDownList("option",{value:t.isNullOrUndefined(e)||t.isNullOrUndefined(this.endTimeAppoint)?this.model.timeZoneCollection.dataSource[l][this.model.timeZoneCollection.value]:this.endTimeAppoint})),"add"==l&&((i={})[this.model.timeZoneCollection.text]=o,i[this.model.timeZoneCollection.id]=(this.model.timeZoneCollection.dataSource.length+1).toString(),i[this.model.timeZoneCollection.value]=o,this.model.timeZoneCollection.dataSource.push(i),this._appointmentAddWindow.find("#"+this._id+"startTimeZone").ejDropDownList({dataSource:this.model.timeZoneCollection.dataSource}),this._appointmentAddWindow.find("#"+this._id+"endTimeZone").ejDropDownList({dataSource:this.model.timeZoneCollection.dataSource}),null!=e?this._timeZoneCollection(e):this._timeZoneCollection(null)),this.tempValue=null},_timezoneStringValue:function(){var e=(new Date).getTimezoneOffset()<Math.max(new Date((new Date).getFullYear(),0,1).getTimezoneOffset(),new Date((new Date).getFullYear(),6,1).getTimezoneOffset()),t=(new Date).getTimezoneOffset()+(e?new Date((new Date).getFullYear(),0,1).getTimezoneOffset()-new Date((new Date).getFullYear(),6,1).getTimezoneOffset():0),i=t>0?"-":"+",n=Math.abs(t);return i+(Math.floor(n/60)<10?"0"+Math.floor(n/60):Math.floor(n/60))+":"+(n%60<10?"0"+n%60:n%60)},_showCategorizeDetails:function(t){for(var i,n=t[this._appointmentSettings.categorize].split(","),s=0;s<n.length;s++)i="string"==e.type(n[s])?n[s]:parseInt(n[s]),this._appointmentAddWindow.find(".e-categorizevalue").data("ejAutocomplete").selectValueByKey(i)},_renderCategorizeTemplate:function(){var e=this.model.enableRTL?"margin-right:30px;margin-top:-18px":"",i=this.model.enableRTL?"float:none":"float:left";t.isNullOrUndefined(this.model.categorizeSettings)||(this._categorizeTemplate="<div class='e-categorizeTemplate' style='height:15px;margin-right:5px;margin-top:3px;"+i+";width:15px;background-color: ${"+this.model.categorizeSettings.color+"}'></div><div style= "+e+">${"+this.model.categorizeSettings.text+"}</div>")},_getCategorizeColor:function(e){var i,n=null,s="",r="",a=this.model.categorizeSettings;return i=this.model.categorizeSettings.allowMultiple||"string"==typeof e[this._appointmentSettings.categorize]?e[this._appointmentSettings.categorize].split(",")[e[this._appointmentSettings.categorize].split(",").length-1]:e[this._appointmentSettings.categorize],n=this._findResourceIndex(a.dataSource,this.model.categorizeSettings.id,i,null,null),t.isNullOrUndefined(n)&&(n=this._findResourceIndex(a.dataSource,this.model.categorizeSettings.id,parseInt(categorizeItems[categorizeItemsLength]),null,null)),t.isNullOrUndefined(n)?(e[this._appointmentSettings.categorize]="",{appointData:s,appointCustomcss:"",appointtextcolor:r}):(s=t.isNullOrUndefined(a.dataSource[n][a.color])?s:a.dataSource[n][a.color],r=t.isNullOrUndefined(a.dataSource[n][a.fontColor])?r:a.dataSource[n][a.fontColor],0!=this._tempResource.length&&t.scheduleFeatures.resources&&""==s?this._getResourceColor(e):{appointData:s,appointCustomcss:"",appointtextcolor:r,applyFilter:!1})},_currentDateFormat:function(i){var n,s,r,a;t.isNullOrUndefined(i)||"date"==e.type(this.currentDate())&&"date"==e.type(this.model.minDate)&&"date"==e.type(this.model.maxDate)?"MM/dd/yyyy"==i&&("date"!=e.type(this.currentDate())||"date"!=e.type(this.model.minDate)||"date"!=e.type(this.model.maxDate))&&(a=t.parseDate(this.currentDate()),n=t.parseDate(this.model.minDate),s=t.parseDate(this.model.maxDate),t.isNullOrUndefined(a)?this.currentDate(new Date):this.currentDate(a),this.model.minDate=t.isNullOrUndefined(n)?this.model.minDate:n,this.model.maxDate=t.isNullOrUndefined(s)?this.model.maxDate:s):(r=t.parseDate(this.currentDate(),this.model.dateFormat),n=t.parseDate(this.model.minDate,this.model.dateFormat),s=t.parseDate(this.model.maxDate,this.model.dateFormat),this.currentDate(t.isNullOrUndefined(r)?"Invalid Date"==new Date(this.currentDate()).toString()||"NaN"==new Date(this.currentDate()).toString()?this._dateConvert(this.currentDate()):new Date(this.currentDate()):r),this.model.minDate=t.isNullOrUndefined(n)?"Invalid Date"==new Date(this.model.minDate).toString()||"NaN"==new Date(this.model.minDate).toString()?this._dateConvert(this.model.minDate):new Date(this.model.minDate):n,this.model.maxDate=t.isNullOrUndefined(s)?"Invalid Date"==new Date(this.model.maxDate).toString()||"NaN"==new Date(this.model.maxDate).toString()?this._dateConvert(this.model.maxDate):new Date(this.model.maxDate):s)},_datepattern:function(){return""==this.model.dateFormat||t.isNullOrUndefined(this.model.dateFormat)?this._pattern.d:this.model.dateFormat},_businessHourScroller:function(){var e,i,n,s,r;if("agenda"==this.currentView())return!1;e=0,"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.timeScale.enable&&"month"!=this.currentView()&&!this._isCustomMonthView()?(e=0!=this.element.find(".e-businesshighlightworkcells").length&&this.model.workHours.highlight?this.element.find(".e-businesshighlightworkcells").first().parent().index()*(this.element.find(".e-workcells")[0].offsetHeight-1):0,this.element.find("div#"+this._id+"_scroller").ejScroller({scrollTop:e}),this.element.find(".e-scrolltimecells").css({top:-this.element.find(".e-draggableworkarea").scrollTop()+"px"})):("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&this.model.timeScale.enable&&(0!=this.element.find(".e-businesshighlightworkcells").length&&this.model.workHours.highlight&&"month"!=this.currentView()?(e=this.element.find(".e-businesshighlightworkcells")[0].offsetLeft,("week"===this.currentView()||"workweek"===this.currentView()||"customview"===this.currentView()&&this._renderDays<=7)&&(i=this.element.find(".e-activeview.e-horizontalheaderdiv").parent().index(),!t.isNullOrUndefined(i)&&i>=0&&("customview"==this.currentView()?this.currentDate(new Date(this._dateRender[0])):this.currentDate(new Date(this._dateRender[i])),e=this.element.find(".e-workcells")[Math.ceil(i*(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))].offsetLeft,n=this.model.workHours.start-this.model.startHour<=0?0:this.model.workHours.start-this.model.startHour,-1==[0,6].indexOf(new Date(this._dateRender[i]).getDay())&&"customview"!=this.currentView()&&(s=n*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot),e=this.element.find(".e-workcells")[Math.ceil(i*(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)+s)].offsetLeft)))):(s=(s=this.element.find(".e-activeview.e-horizontalheaderdiv").parent().index()*(this.model.endHour-this.model.startHour)*Math.ceil(this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)))>this.element.find(".e-workcells").length?this.element.find(".e-workcells").length-1:s,e=-1!=this.element.find(".e-activeview.e-horizontalheaderdiv").parent().index()?this.element.find(".e-workcells")[s].offsetLeft:0),r=this.model.enableRTL?this.element.find(".e-workcells")[0].offsetLeft-e:e,this.element.find("div#"+this._id+"_scroller").ejScroller({scrollLeft:r}))},_minToHour:function(e){return{h:parseInt(e/60),m:e%60}},_onclose:function(){this._appointmentAddWindow.find(".e-error").remove(),this._appointmentAddWindow.find(".e-recurEditor").hide(),this._appointmentAddWindow.find(".e-appwindow").css("margin-left",700).show().animate({"margin-left":10},300),this._clearFields(),this._processFocus()},_printAppointment:function(i){var n,s,r,a,o,l,d=t.buildTag("div");"object"==typeof i?n=i:(s=(new t.Query).where("Guid",t.FilterOperators.equal,i),list=new t.DataManager(this._processed).executeLocal(s),list.length>1?((r=e.extend(!0,[],list))[0][this._appointmentSettings.endTime]=r[r.length-1][this._appointmentSettings.endTime],n=r[0]):n=list[0]);var h="<table align='center' style='margin-top:50px;margin-left:50;'>",p=this,m=["Guid","ParentId","RecurrenceId","RecurrenceExDate","AppTaskId"];return e.each(n,function(e,i){-1!=m.indexOf(e)||t.isNullOrUndefined(i)||t.isNullOrUndefined(e)||"null"==e||((e==p._appointmentSettings.startTime||e==p._appointmentSettings.endTime)&&(i=i),h+="<tr style='height:30px'><td style='width:300px'><b>"+e+":</b></td><td  style='width:600px'>"+i+"</td></tr>")}),h+="</table>",a="",0!=this._tempResource.length&&(t.isNullOrUndefined(n[this._tempResource[this._tempResource.length-1].field])||(o=p._appointmentSettings.resourceFields.split(","),e.each(this._tempResource[this._tempResource.length-1].resourceSettings.dataSource,function(e,t){t.id==n[o[o.length-1].trim()]&&(a=t.text)}))),l="<font size='20' style='margin-top:50px;margin-left:50;font-family:Times New Roman'><b>"+(a=""==a?"Unknown":a)+"</b></font></br><hr style='margin-left:50' size='10'>"+h,d.append(l),t.print(d),!1},_recurrenceValidate:function(e,i,n,s){var r,a,o,l,d,h,p,m,c,u,g,_,f=t.isNullOrUndefined(this._appointmentAddWindow)?t.RecurrenceEditor.prototype:this._appointmentAddWindow.find(".e-recurrenceeditor").data("ejRecurrenceEditor");if(t.isNullOrUndefined(e)||f.recurrenceRuleSplit(e,i),t.isNullOrUndefined(s)?(l=this._timeFormat(this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value")).split(":"),r=new Date(this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value").setHours(parseInt(l[0],10),parseInt(l[1],10)))):r=s,t.isNullOrUndefined(n)?(d=this._timeFormat(this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value")).split(":"),a=new Date(this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value").setHours(parseInt(d[0],10),parseInt(d[1],10)))):a=n,h=t.isNullOrUndefined(n)?this._appointmentAddWindow.find(".recurstartdate").ejDatePicker("option","value"):n,p=f._rRule.interval,t.isNullOrUndefined(f._rRule.until))if(t.isNullOrUndefined(f._rRule.count))o=new Date(new Date(this.currentDate()).setDate(h.getDate()+42*p));else switch(f._rRule.freq){case"DAILY":o=new Date(new Date(h).setDate(h.getDate()+f._rRule.count*p));break;case"WEEKLY":m=f._rRule.weekDays.split(","),c=Math.round(h.getDate()+f._rRule.count/m.length*7*p),o=new Date(new Date(h).setDate(c+1));break;case"MONTHLY":o=new Date(new Date(h).setMonth(h.getMonth()+f._rRule.count*p));break;case"YEARLY":o=new Date(new Date(h).setFullYear(h.getFullYear()+f._rRule.count*p))}else(o=new Date(f._rRule.until)).setDate(o.getDate()+1);if((o-h)/864e5<("DAILY"==f._rRule.freq?2:"WEEKLY"==f._rRule.freq?7:1))return!0;switch(f._rRule.freq){case"DAILY":return u=f._rRule.interval,!((r-a)/36e5>24*parseInt(u));case"WEEKLY":if("INTERVAL"==e.split(";")[1].split("=")[0]){var w=f._rRule.weekDays.split(","),D={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},S=[],y=[];for(_=0;_<w.length*(parseInt(f._rRule.interval)+1);_++)S[_]=w.length>_?D[w[_]]:S[_-w.length]+7*parseInt(f._rRule.interval);for(g=S.sort(function(e,t){return e-t}),_=1;_<g.length;_++)y.push(g[_]-g[_-1]);return!((r-a)/36e5>24*Math.min.apply(Math,y))}return!((r-a)/36e5>24);case"MONTHLY":return!(r.getTime()>new Date(a).setMonth(a.getMonth()+parseInt(f._rRule.interval)));case"YEARLY":return!(r.getTime()>new Date(a).setFullYear(a.getFullYear()+parseInt(f._rRule.interval)))}return!0},_saveAppointment:function(){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b,R,A,I,k,x,O,M,N,H,W,E,L,U,F,V,z,P,j,q,B,G,Q,Y,Z,K,X,J,$;if(t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor(),n=this._appointmentAddWindow.find(".e-recurrenceeditor").data("ejRecurrenceEditor"),""!=this._currentAction){if(t.isNullOrUndefined(this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value"))||t.isNullOrUndefined(this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value")))return!1;var ee=this._timeFormat(this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value")).split(":"),te=this._timeFormat(this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value")).split(":");if(new Date(this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value").setHours(parseInt(ee[0],10),parseInt(ee[1],10)))>new Date(this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value").setHours(parseInt(te[0],10),parseInt(te[1],10))))return t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),this._alertWindow.ejDialog("instance").option("title",this._getLocalizedLabels("RecurrenceAlert")),this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("StartEndError")),this._alertWindow.find(".e-alertOk").html(this._getLocalizedLabels("Ok")),this._alertWindow.ejDialog("open"),!1}if(this._appointmentAddWindow.find("#"+this._id+"recurrence").ejCheckBox("option","checked")&&""!=n._recRule&&!t.isNullOrUndefined(n._recRule)&&this.model.enableRecurrenceValidation&&"add"==this._currentAction&&!this._recurrenceValidate(n._recRule))return this._alertCreateError(),!1;this._sortAppById(this._processed);var ie,ne,se=this,re=this._currentAppointmentData.length>0?this._currentAppointmentData.map(function(e){return e[se._appointmentSettings.id]}).sort():[0],ae=Math.max.apply(Math,re);if(this._cellClick&&(this.model.showQuickWindow||this.model.allowInline)){if(e.isFunction(e.validator)&&!e("#"+this._id+"_AddForm").validate().form())return!1;if(le={},ie=t.isNullOrUndefined(this._appMainId)?1:this._appMainId+1,this.model.enableLoadOnDemand&&(ie=ae+1),le[this._appointmentSettings.id]=le.AppTaskId=le.ParentId=ie,le[this._appointmentSettings.subject]=this.model.allowInline&&this._inline?this.element.find(".e-inlinetext").length>1&&"month"!=this.currentView()?e(this.element.find(".e-inlinetext")[1]).val():this.element.find(".e-inlinetext").val():this._quickAppointWindow.find(".subject").val(),le[this._appointmentSettings.startTime]=new Date(this.cur_StartTime),le[this._appointmentSettings.endTime]=new Date(this.cur_EndTime),le[this._appointmentSettings.allDay]=!!("month"===this.currentView()||0==new Date(this.cur_StartTime).getHours()&&23==new Date(this.cur_EndTime).getHours()&&59==new Date(this.cur_EndTime).getMinutes()||this._isCustomMonthView()),this.model.appointmentSettings.applyTimeOffset&&!le[this._appointmentSettings.allDay]&&(le[this._appointmentSettings.startTimeZone]=null==this.model.timeZone?"UTC "+this._timezoneStringValue():this.model.timeZone,le[this._appointmentSettings.endTimeZone]=null==this.model.timeZone?"UTC "+this._timezoneStringValue():this.model.timeZone),le[this._appointmentSettings.recurrence]=!1,(!t.isNullOrUndefined(this.model.group)||0!=this._tempResource.length&&t.scheduleFeatures.resources)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&(le=this._getResourceFields(le)),"null"in le&&delete le.null,T=this._checkAvailability(le),f={appointment:le},this._trigger("actionBegin",{data:f.appointment,requestType:"appointmentSave"})||T.length>0)return this._showBlockAlert&&T.length>0&&this._alertBlockError(),t.isNullOrUndefined(this._quickAppointWindow)||this._quickAppointWindow.ejDialog("close"),!1;if(t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentCreate")||this._timeZoneAppointments(f.appointment,""),this._trigger("beforeAppointmentCreate",f))return t.isNullOrUndefined(this._quickAppointWindow)||this._quickAppointWindow.ejDialog("close"),!1;for(this._currentAction,t.Schedule.Actions.Add,f.appointment.Guid=this._guidFormatGenerate(),e.extend(!0,s={},f.appointment),de=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentCreate")?this._timeZoneAppointments(s,""):s,Z=this._dataManager.insert(de,this.model.appointmentSettings.query._fromTable),this.dataSource()instanceof t.DataManager&&this._currentAppointmentData.push(f.appointment),new t.DataManager(this._currentAppointmentData).update("AppTaskId",f.appointment),this._appointmentProcessing(f.appointment),this._currentViewAppointments=this.getCurrentViewAppointments(),this.model.enableLoadOnDemand&&(this._dataCount=this._currentAppointmentData.length),r=this._groupEditing?this._currentViewAppointments.filter(function(e){return e.ParentId==f.appointment.ParentId}):this._currentViewAppointments.filter(function(e){return e.Guid==f.appointment.Guid}),a=0;a<r.length;a++)this._refreshDayAppointments(r[a]);this._appMainId=this._sortAppById(this._processed)[this._processed.length-1].AppTaskId,this._trigger("appointmentCreated",{appointment:f.appointment,requestType:"appointmentSaved"}),this._trigger("actionComplete",{data:f.appointment,requestType:"appointmentSave"}),this._cellClick=!1,t.isNullOrUndefined(this._quickAppointWindow)||this._quickAppointWindow.ejDialog("close"),this._scrollerPosition(),!t.isNullOrUndefined(Z)&&e.isFunction(Z.promise)&&this.dataSource()instanceof t.DataManager&&(se=this,Z.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))se._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(se._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)f.appointment[se._appointmentSettings.id]=r.added[n][se._appointmentSettings.id],f.appointment[se._appointmentSettings.recurrence]||(f.appointment.ParentId=r.added[n][se._appointmentSettings.id]),new t.DataManager(se._processed).update("Guid",f.appointment)}))}else{if(o=[],l=[],t.isNullOrUndefined(this._inline)||0==this._inline){if(e.isFunction(e.validator)&&!e("#"+this._id+"_AddEditForm").validate().form())return!1;var oe,le={},de={},he=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid));for(ie=this._currentAction==t.Schedule.Actions.Add||this._currentAction==t.Schedule.Actions.EditOccurrence||this._currentAction==t.Schedule.Actions.EditFutureOccurrences?this.model.enableLoadOnDemand?ae+1:t.isNullOrUndefined(this._appMainId)?parseInt(this._appId):this._appMainId+1:he[0].AppTaskId,oe=e("#"+this._id+"AppointmentAddEditWindow").find("#"+this._id+"_AddEditForm").get(0),g=0;g<oe.length;g++)d=oe[g].name,h=e(oe[g]),d!=i&&(p=oe[g].value,""!=d&&null==le[d]?(d==this._appointmentSettings.id&&(p=""==p?parseInt(ie):parseInt(p)),e(oe[g]).hasClass("e-datepicker")?p=h.ejDatePicker("option","value"):e(oe[g]).hasClass("e-timepicker")?p=h.ejTimePicker("option","value"):h.data("ejDropDownList")?p=h.ejDropDownList("model.value"):h.data("ejAutocomplete")&&(e(oe[g])[0].id==this._id+"categorize"?l.push(h.data("ejAutocomplete").getSelectedItems()):0==e(oe[g])[0].id.indexOf(this._id+"_ownerfield_")&&o.push(h.data("ejAutocomplete").getSelectedItems())),"StartDate"!=d&&"EndDate"!=d&&"StartTime"!=d&&"EndTime"!=d?le[d]="checkbox"!=oe[g].type?p:e(oe[g]).is(":checked"):de[d]="StartDate"==d||"EndDate"==d?new Date(p):p):h.data("ejAutocomplete")&&(e(oe[g])[0].id==this._id+"categorize"?l.push(h.data("ejAutocomplete").getSelectedItems()):0==e(oe[g])[0].id.indexOf(this._id+"_ownerfield_")&&o.push(h.data("ejAutocomplete").getSelectedItems())));this.startutcValue=this.tempValue=null,this.model.showTimeZoneFields||(le[this._appointmentSettings.startTimeZone]=null==this.model.timeZone?"UTC "+this._timezoneStringValue():this.model.timeZone,le[this._appointmentSettings.endTimeZone]=null==this.model.timeZone?"UTC "+this._timezoneStringValue():this.model.timeZone),"null"in le&&delete le.null,ue=this._timeFormat(de.StartTime).split(":"),ge=this._timeFormat(de.EndTime).split(":"),le[this._appointmentSettings.startTime]=new Date(de.StartDate.setHours(parseInt(ue[0],10),parseInt(ue[1],10))),le[this._appointmentSettings.endTime]=new Date(de.EndDate.setHours(parseInt(ge[0],10),parseInt(ge[1],10))),le[this._appointmentSettings.recurrence]&&(le[this._appointmentSettings.recurrenceRule]=n._recRule),this._publicMethodSave=!0,t.isNullOrUndefined(this.model.serverEvents)&&this._dataManager.dataSource.offline&&(le=(p=this._timeZoneSavingAppoint(le,de)).obj),_e="save"==this._currentAction?"edit":this._currentAction}else{le={};var pe,me=[],ce=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)));if(0==ce.length)return!1;if(ce[0][this._appointmentSettings.endTime]=ce.length>1?ce[ce.length-1][this._appointmentSettings.endTime]:ce[0][this._appointmentSettings.endTime],le=ce[0],this._tempResource.length>0){for(e.extend(!0,[],this._resourceCollection).reverse(),N=0;N<this.res1.length;N++)if(1==this._grouping.length){if(this.res1[N][this._tempResource[this._tempResource.length-1].resourceSettings.id]==le[this._tempResource[this._tempResource.length-1].field])break}else if(this.res1[N][this._tempResource[this._tempResource.length-1].resourceSettings.id]==le[this._tempResource[this._tempResource.length-1].field]&&this.res1[N][this._tempResource[this._tempResource.length-1].resourceSettings.groupId]==le[this._tempResource[this._tempResource.length-2].field])break;if(me.push(this.res1[N]),o.push(me),z=0,[],this._tempResource.length>1){for(x=1,V=this._tempResource.length-2;V>=0;V--)pe=this._tempResource[V].resourceSettings.dataSource,m=new t.DataManager(pe).executeLocal((new t.Query).where(this._tempResource[x].resourceSettings.id,t.FilterOperators.equal,o[z][0][this._tempResource[V+1].resourceSettings.groupId])),o.push(m),z++,x=++x==this._tempResource.length?x-1:x;o.reverse()}}ie=le.AppTaskId;var ue=this._timeFormat(t.format(new Date(le[this._appointmentSettings.startTime]),this._pattern.t,this.model.locale)).split(":"),ge=this._timeFormat(t.format(new Date(le[this._appointmentSettings.endTime]),this._pattern.t,this.model.locale)).split(":"),_e=this._currentAction=1==le[this._appointmentSettings.recurrence]?"editOccurrence":"save",fe=this.element.find(".e-inlineedit").val();if(le[this._appointmentSettings.recurrence],e.trim(this._subject)==fe)return this._inlineRemove(),!1;le[this._appointmentSettings.subject]=fe,le[this._appointmentSettings.startTimeZone]=t.isNullOrUndefined(le[this._appointmentSettings.startTimeZone])?"UTC "+this._timezoneStringValue():le[this._appointmentSettings.startTimeZone],le[this._appointmentSettings.endTimeZone]=t.isNullOrUndefined(le[this._appointmentSettings.endTimeZone])?"UTC "+this._timezoneStringValue():le[this._appointmentSettings.endTimeZone]}if(this.model.categorizeSettings.enable&&!this.model.categorizeSettings.allowMultiple&&0!=l.length&&0!=l[0].length&&(c=this._findResourceIndex(this.model.categorizeSettings.dataSource,this.model.categorizeSettings.id,l[0][0][this.model.categorizeSettings.id],null,null),l[0].push(this.model.categorizeSettings.dataSource[c]),l[0].shift()),u=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),""!=le[this._appointmentSettings.recurrenceRule]&&!t.isNullOrUndefined(le[this._appointmentSettings.recurrenceRule])&&this.model.enableRecurrenceValidation&&("editSeries"==this._currentAction||"editOccurrence"==this._currentAction||"save"==this._currentAction))if("editOccurrence"==this._currentAction){var we,De=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0],Se=null==De[this._appointmentSettings.recurrenceId]?De.ParentId:De[this._appointmentSettings.recurrenceId],ye=null==De[this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId;if(we=this._groupEditing||this._groupEdit?new t.DataManager(this._processed).executeLocal((new t.Query).where("commonGuid",t.FilterOperators.equal,De.commonGuid)):new t.DataManager(this._processed).executeLocal((new t.Query).where(ye,t.FilterOperators.equal,Se)),(le[this._appointmentSettings.endTime]-le[this._appointmentSettings.startTime])/36e5<24&&le[this._appointmentSettings.endTime].getDate()!=le[this._appointmentSettings.startTime].getDate()&&(we=this._recurrenceAppSort(we)),we=this._appointmentRecurrenceSort(we),g=this._recuCollectionIndex(we,De),_=this._appointmentSettings,0==g?!t.isNullOrUndefined(we[g+1])&&!(new Date(new Date(we[g+1][_.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(le[_.endTime]).setHours(0,0,0,0)).getTime()):g==we.length-1?!(new Date(new Date(we[g-1][_.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(le[_.startTime]).setHours(0,0,0,0)).getTime()):!(new Date(new Date(we[g-1][_.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(le[_.startTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(we[g+1][_.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(le[_.endTime]).setHours(0,0,0,0)).getTime()))return this._alertCreateError(),!1}else if(!this._recurrenceValidate(le[this._appointmentSettings.recurrenceRule],u[0][this._appointmentSettings.recurrenceExDate]))return this._alertCreateError(),!1;if(this._currentAction==t.Schedule.Actions.EditOccurrence)this._objDate=u,ye=null==this._objDate[0][this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId,ne=this._deleteOcurrence(this._objDate[0][ye],new Date(u[0][this._appointmentSettings.startTime])),le[this._appointmentSettings.recurrence]=!0,le[this._appointmentSettings.recurrenceRule]=ne[0][this._appointmentSettings.recurrenceRule]+";RECUREDITID="+ne[0].ParentId,le[this._appointmentSettings.recurrenceId]=ne[0][this._appointmentSettings.recurrenceId],le.Guid=this._appUid,le[this._appointmentSettings.recurrenceExDate]=ne[0][this._appointmentSettings.recurrenceExDate],this._appointmentRemove(le);else if(this._currentAction==t.Schedule.Actions.EditSeries){if(Se=null==u[0][this._appointmentSettings.recurrenceId]?u[0].ParentId:u[0][this._appointmentSettings.recurrenceId],-1!=(ne=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,Se)))[0][this._appointmentSettings.recurrenceRule].toString().indexOf("EXDATE")&&this._seriesAlert)return this._seriesAlert=!1,t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),0==this._alertWindow.find(".e-alertbtn").find(".e-alertCancel").length&&(this._alertWindow.find(".e-alertbtn").append("<button id='"+this._id+"alertcancel' class='e-alertbutton e-alertCancel'></button>"),this._alertWindow.find(".e-alertCancel").ejButton({enableRTL:this.model.enableRTL,showRoundedCorner:!0,width:"100px",click:e.proxy(this._alertClose,this),cssClass:"e-flat"+this.model.cssClass}),this._mediaQuery&&this._alertWindow.find(".e-alertbutton").css({margin:"0px 20px 15px 10px"})),this._alertWindow.ejDialog("instance").option("title",this._getLocalizedLabels("RecurrenceAlert")),this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("SeriesChangeAlert")),this._alertWindow.find(".e-alertCancel").html(this._getLocalizedLabels("Cancel")),this._alertWindow.find(".e-alertOk").html(this._getLocalizedLabels("Ok")),this._alertWindow.addClass("e-seriesAlert"),this._alertWindow.ejDialog("open"),!1;-1!=ne[0][this._appointmentSettings.recurrenceRule].toString().indexOf("EXDATE")&&(this._seriesAlert=!0),le.AppTaskId=ne[0].AppTaskId,le[this._appointmentSettings.id]=ne[0][this._appointmentSettings.id],le.Guid=this._appUid,ie=ne[0].AppTaskId,le[this._appointmentSettings.recurrenceId]=ne[0][this._appointmentSettings.recurrenceId],le[this._appointmentSettings.recurrenceExDate]=null,le[this._appointmentSettings.recurrenceRule]=t.isNullOrUndefined(n._recRule)||""==n._recRule?ne[0][this._appointmentSettings.recurrenceRule]:n._recRule}if(this._currentAction!=t.Schedule.Actions.Add){if(le.Guid=u[0].Guid,le.AppTaskId=u[0].AppTaskId,le[this._appointmentSettings.id]=this._currentAction!=t.Schedule.Actions.EditSeries?u[0][this._appointmentSettings.id]:le[this._appointmentSettings.id],Ce=e.extend(Ce,le),this._trigger("actionBegin",{data:le,requestType:"appointmentEdit",currentAction:_e}))return this._appointmentAddWindow.ejDialog("close"),!1}else if(le.Guid=t.isNullOrUndefined(le.Guid)?this._guidFormatGenerate():le.Guid,this._trigger("actionBegin",{data:le,requestType:"appointmentSave"}))return this._appointmentAddWindow.ejDialog("close"),!1;if(f=[],this._startTimezone!=this._endTimezone&&(le[this._appointmentSettings.endTime]=p.cloneEnddiffer),D=this._currentAction==t.Schedule.Actions.Add?ie:u[0].ParentId,!t.isNullOrUndefined(this.model.categorizeSettings)&&l.length>0&&!t.isNullOrUndefined(l[0][0])||0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources?f=this._getResCategorySaveData(l,o,le,ie,D,ue,ge):(w=this._addAppData(le,ie,new Date(le[this._appointmentSettings.startTime]),new Date(le[this._appointmentSettings.endTime]),D),this._currentAction==t.Schedule.Actions.EditOccurrence&&(w[this._appointmentSettings.id]=w.AppTaskId),f.push(w)),this._currentAction==t.Schedule.Actions.Add){if(!t.isNullOrUndefined(this.model.serverEvents)&&-1!=this.model.serverEvents.indexOf("beforeAppointmentCreate"))for(V=0;V<f.length;V++)this._timeZoneAppointments(f[V],"");if(this._trigger("beforeAppointmentCreate",{appointment:f,currentAction:_e}))return this._appointmentAddWindow.ejDialog("close"),!1}if(this._currentAction!=t.Schedule.Actions.Add&&this._currentAction!=t.Schedule.Actions.EditFutureOccurrences){if(this._currentAction!=t.Schedule.Actions.EditOccurrence)(y=new t.DataManager(f).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.notEqual,Ce[this._appointmentSettings.id]))).length>0&&(y=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")?y:[this._timeZoneAppointments(y[0],"")]),S=new t.DataManager(f).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,Ce[this._appointmentSettings.id])),S=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")?S:[this._timeZoneAppointments(S[0],"")];else for(N=0;N<f.length;N++)S=new t.DataManager(f).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,Ce[this._appointmentSettings.id])),S=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")?S:[this._timeZoneAppointments(S[N],"")],(y=new t.DataManager(f).executeLocal((new t.Query).where("ParentId",t.FilterOperators.notEqual,Ce[this._appointmentSettings.id]))).length>0&&(y=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")?y:[this._timeZoneAppointments(y[N],"")]);if(v=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,Ce[this._appointmentSettings.id])),v=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")?v:[this._timeZoneAppointments(v[0],"")],C=f[0][this._appointmentSettings.recurrence]?{appointment:{added:y,changed:S},currentAction:_e,recurrenceCollection:{occurrences:S[0],parentData:v[0]}}:{appointment:{added:y,changed:S},currentAction:_e},_e==t.Schedule.Actions.EditSeries&&(C.ignoreEditedOccurrences=!1),this._trigger("beforeAppointmentChange",C))return this._appointmentAddWindow.ejDialog("close"),!1;this._ignoreModifyOccurrences=C.ignoreEditedOccurrences}for(N=0;N<f.length&&!((T=this._checkAvailability(f[N])).length>0);N++);if(f[this._appointmentSettings.startTime]>f[this._appointmentSettings.endTime]||T.length>0)return this._showBlockAlert&&this._alertBlockError(),!1;if(this._currentAction==t.Schedule.Actions.Add||this._currentAction==t.Schedule.Actions.EditOccurrence){for(de=[],V=0;V<f.length;V++)b=f[V][this._appointmentSettings.startTimeZone],t.isNullOrUndefined(this.model.serverEvents)?de.push(this._timeZoneAppointments(f[V],"")):de.push(f[V]),new t.DataManager(this._currentAppointmentData).update("AppTaskId",f[V]);for(ne=[],this._currentAction==t.Schedule.Actions.EditOccurrence&&(R=this._inline?u[0].ParentId:this._parentId,A=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,R)),new t.DataManager(this._currentAppointmentData).update("AppTaskId",A[0]),t.isNullOrUndefined(this.model.serverEvents)?ne.push(this._timeZoneAppointments(A[0],"")):ne.push(A[0])),Y=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",Z=this._dataManager.saveChanges({added:de,changed:ne,deleted:[]},Y,this.model.appointmentSettings.query._fromTable),this.model.enableLoadOnDemand&&(this._dataCount=this._currentAppointmentData.length),I=[],P=0;P<de.length;P++)I=t.isNullOrUndefined(this.model.serverEvents)&&b!=this.model.timeZone?this._timeZoneAppointments(de[P],"reverse"):de[P],new t.DataManager(this._currentAppointmentData).update("AppTaskId",I);for(k=[],P=0;P<ne.length;P++)k=t.isNullOrUndefined(this.model.serverEvents)&&b!=this.model.timeZone?this._timeZoneAppointments(ne[P],"reverse"):ne[P],new t.DataManager(this._currentAppointmentData).update("AppTaskId",k);for(j=0,x=f.length;j<x;j++)for(this.dataSource()instanceof t.DataManager&&this._currentAppointmentData.push(f[j]),Ie=this._groupEditing||this._groupEdit?new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,f[j][this._appointmentSettings.startTime].toString())):this._processed.filter(function(e){return e.Guid==f[j].Guid}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:Ie},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:Ie},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:Ie},"Guid"),this._maxId=t.isNullOrUndefined(this._maxId)?f[j].AppTaskId:this._maxId,this._appointmentProcessing(f[j]),this._currentViewAppointments=this.getCurrentViewAppointments(),X=0,J=(K=this._currentViewAppointments.filter(function(e){return e.ParentId==f[j].ParentId})).length;X<J;X++)this._refreshDayAppointments(K[X]);this._trigger("appointmentCreated",{appointment:f[0],requestType:"appointmentSaved"}),this._trigger("actionComplete",{data:f,requestType:"appointmentSave"}),!t.isNullOrUndefined(Z)&&e.isFunction(Z.promise)&&this.dataSource()instanceof t.DataManager&&(se=this,Z.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))se._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(se._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)f[0][se._appointmentSettings.id]=r.added[n][se._appointmentSettings.id],f[0][se._appointmentSettings.recurrence]||(f[0].ParentId=r.added[n][se._appointmentSettings.id]),new t.DataManager(se._processed).update("Guid",f[0])}))}else if(this._currentAction==t.Schedule.Actions.Save||this._currentAction==t.Schedule.Actions.EditSeries){var ve=[],Ce=[],Te=[];for(N=0;N<f.length;N++)if(0!=o.length&&this._groupEditing)if(O=this._currentAction==t.Schedule.Actions.Save?f[N].ParentId:f[N][this._appointmentSettings.recurrenceId],M=this._currentAction==t.Schedule.Actions.Save?"ParentId":this._appointmentSettings.recurrenceId,ne=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(M,t.FilterOperators.equal,O)),!t.isNullOrUndefined(ne)&&ne.length>0?Ce.push(f[N]):ve.push(f[N]),ne.length>1&&this._currentAction!=t.Schedule.Actions.EditSeries)for(new t.DataManager(this._currentAppointmentData).remove(this._appointmentSettings.id,Ce[N][this._appointmentSettings.id]),W=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,Ce[N][this._appointmentSettings.id])),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:W},"Guid"),L=0,J=(E=this.getCurrentViewAppointments(W)).length;L<J;L++)this._appointmentRemove(E[L]),this._refreshDayAppointments(E[L]);else for(new t.DataManager(this._currentAppointmentData).remove("ParentId",Ce[N].ParentId),W=this._processed.filter(function(e){return e.ParentId==Ce[N].ParentId}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:W},"Guid"),L=0,J=(E=this.getCurrentViewAppointments(W)).length;L<J;L++)this._appointmentRemove(E[L]),this._refreshDayAppointments(E[L]);else O=this._currentAction==t.Schedule.Actions.Save?f[N].Guid:f[N][this._appointmentSettings.recurrenceId],M=this._currentAction==t.Schedule.Actions.Save?"Guid":this._appointmentSettings.recurrenceId,ne=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(M,t.FilterOperators.equal,O)),!t.isNullOrUndefined(ne)&&ne.length>0?Ce.push(f[N]):ve.push(f[N]);if(this._currentAction==t.Schedule.Actions.EditSeries)if(this._ignoreModifyOccurrences)for(se=this,Re=this._getAppointmentByParentId(this._appUid),Ce[0][this._appointmentSettings.recurrenceRule]=Re[this._appointmentSettings.recurrenceRule],Ce[0][this._appointmentSettings.recurrenceExDate]=Re[this._appointmentSettings.recurrenceExDate],W=this._processed.filter(function(e){return e.ParentId==Ce[0].ParentId&&-1==e[se._appointmentSettings.recurrenceRule].indexOf("RECUREDITID")}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:W},"Guid"),L=0,J=(E=this.getCurrentViewAppointments(W)).length;L<J;L++)this._appointmentRemove(E[L]),this._refreshDayAppointments(E[L]);else for(N=0;N<Ce.length;N++)for(H=new t.DataManager(this._currentAppointmentData).executeLocal(t.Query().where(t.Predicate(this._appointmentSettings.recurrenceRule,t.FilterOperators.contains,"RECUREDITID="+f[N][this._appointmentSettings.recurrenceId],!0))),Te=Te.concat(H),this._appointmentAddWindow.find(".recurbutton").click(),Ce[N][this._appointmentSettings.recurrenceRule]=n._recRule,Ce[N][this._appointmentSettings.recurrenceExDate]=null,new t.DataManager(this._currentAppointmentData).remove("ParentId",Ce[N].ParentId),W=this._processed.filter(function(e){return e.ParentId==Ce[N].ParentId}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:W},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:W},"Guid"),L=0,J=(E=this.getCurrentViewAppointments(W)).length;L<J;L++)this._appointmentRemove(E[L]),this._refreshDayAppointments(E[L]);for(U=[],F=[],V=0;V<ve.length;V++)t.isNullOrUndefined(this.model.serverEvents)?U.push(this._timeZoneAppointments(ve[V],"")):U.push(ve[V]);for(z=0;z<Ce.length;z++)t.isNullOrUndefined(this.model.serverEvents)?F.push(this._timeZoneAppointments(Ce[z],"")):F.push(Ce[z]);for(Y=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",Z=this._dataManager.saveChanges({added:U,changed:F,deleted:Te},Y,this.model.appointmentSettings.query._fromTable),P=0;P<U.length;P++)t.isNullOrUndefined(this.model.serverEvents)?new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(U[P],"reverse")):new t.DataManager(this._currentAppointmentData).update("AppTaskId",U[P]);for(j=0;j<F.length;j++)t.isNullOrUndefined(this.model.serverEvents)?new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(F[j],"reverse")):new t.DataManager(this._currentAppointmentData).update("AppTaskId",F[j]);if(Ce.length>0){for(q=0;q<f.length;q++)for(new t.DataManager(this._currentAppointmentData).remove("Guid",f[q]),B=this._processed.filter(function(e){return e.Guid==f[q].Guid}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:B},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:B},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:B},"Guid"),this._currentAppointmentData.push(f[q]),this._appointmentProcessing(f[q]),this._appointmentRemove(f[q]),this._currentViewAppointments=this.getCurrentViewAppointments(),X=0,J=(K=this._currentViewAppointments.filter(function(e){return e.ParentId==f[q].ParentId})).length;X<J;X++)this._refreshDayAppointments(K[X]);this._trigger("appointmentChanged",{appointment:Ce[0],requestType:"appointmentChanged",currentAction:_e}),this._trigger("actionComplete",{data:Ce,requestType:"appointmentEdit",currentAction:_e}),!t.isNullOrUndefined(Z)&&e.isFunction(Z.promise)&&this.dataSource()instanceof t.DataManager&&(se=this,Z.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))se._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(se._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)f[0][se._appointmentSettings.id]=r.added[n][se._appointmentSettings.id],f[0][se._appointmentSettings.recurrence]||(f[0].ParentId=r.added[n][se._appointmentSettings.id])}))}}else if(this._currentAction==t.Schedule.Actions.EditFutureOccurrences){if(this._trigger("beforeAppointmentChange",{appointment:f[0],currentAction:t.Schedule.Actions.EditFutureOccurrences}))return this._appointmentAddWindow.ejDialog("close"),!1;se=this;var be=e.extend(!0,{},f[0]),Re=this._getAppointmentByParentId(this._appUid),Ae=this._updateRecurrenceRule(Re,be),Ie=this._processed.filter(function(e){return e.ParentId==Re.ParentId});new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:Ie},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:Ie},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:Ie},"Guid");var ke=this._currentAppointmentData.filter(function(e){return e.ParentId==Re.ParentId}),xe=[],Oe=[];if(t.isNullOrUndefined(Re[this._appointmentSettings.recurrenceExDate])||(xe=ke.filter(function(e){return new Date(new Date(e[se._appointmentSettings.startTime]).setHours(0,0,0,0))>=new Date(new Date(be[se._appointmentSettings.startTime]).setHours(0,0,0,0))&&-1!=e[se._appointmentSettings.recurrenceRule].indexOf("RECUREDITID")})),G=new t.DataManager(ke).remove("Guid",be.Guid),G=t.isNullOrUndefined(G)?[]:G,e.merge(G,xe),new t.DataManager(ke).saveChanges({added:[],changed:[],deleted:xe},"Guid"),new Date(Re[this._appointmentSettings.startTime]).setHours(0,0,0,0)==new Date(be[this._appointmentSettings.startTime]).setHours(0,0,0,0)&&new t.DataManager(ke).update(this._appointmentSettings.id,be),new Date(Re[this._appointmentSettings.startTime]).setHours(0,0,0,0)!=new Date(be[this._appointmentSettings.startTime]).setHours(0,0,0,0)){for(Q=0,J=ke.length;Q<J;Q++)ke[Q][this._appointmentSettings.recurrenceRule]=-1!=ke[Q][this._appointmentSettings.recurrenceRule].indexOf("RECUREDITID")?ke[Q][this._appointmentSettings.recurrenceRule].replace(Ae.mainRule,Ae.parentRule):Ae.parentRule,this._appointmentProcessing(ke[Q]);be[this._appointmentSettings.recurrenceRule]=Ae.followRule,be.AppTaskId=this._appMainId,be.ParentId=be[this._appointmentSettings.id]=Math.max.apply(Math,this._processed.map(function(e){return e.AppTaskId}))+1,Oe=[be]}for(Y=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",Z=this._dataManager.saveChanges({added:Oe,changed:ke,deleted:G},Y,this.model.appointmentSettings.query._fromTable),this._appointmentProcessing(be),this._currentViewAppointments=this.getCurrentViewAppointments(),X=0,J=(K=this._currentViewAppointments.filter(function(e){return e.ParentId==Re.ParentId||be.ParentId})).length;X<J;X++)this._refreshDayAppointments(K[X]);this._trigger("appointmentChanged",{appointment:be,requestType:"appointmentChanged",currentAction:t.Schedule.Actions.EditFutureOccurrences}),this._trigger("actionComplete",{data:be,requestType:"appointmentEdit",currentAction:t.Schedule.Actions.EditFutureOccurrences}),!t.isNullOrUndefined(Z)&&e.isFunction(Z.promise)&&this.dataSource()instanceof t.DataManager&&(se=this,Z.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))se._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(se._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)be[se._appointmentSettings.id]=r.added[n][se._appointmentSettings.id],be[se._appointmentSettings.recurrence]||(be.ParentId=r.added[n][se._appointmentSettings.id]),new t.DataManager(se._processed).update("Guid",be)}))}t.isNullOrUndefined(this._appointmentAddWindow)||(this._clearFields(),this._appointmentAddWindow.ejDialog("close"))}this.element.find("div.e-draggableworkarea tr").find("td").hasClass("e-selectedCell")&&this._processFocus(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&"agenda"!=this.currentView()&&this.element.find(".e-draggableworkarea").offset().top>this.element.find(".e-workcellstab").offset().top&&($=this.element.find(".e-draggableworkarea").offset().top-this.element.find(".e-workcellstab").offset().top,this.element.find(".e-horires").css("top",-$+"px")),this._recRule="",this.model.showAppointmentNavigator&&this._nextPrevButton(),this.model.allowInline&&this._inlineRemove()},_updateRecurrenceRule:function(e,i){var n,s,r,a,o,l,d;t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor();var h=previousRule=e[this._appointmentSettings.recurrenceRule],p=new Date(i[this._appointmentSettings.startTime]),m=new Date(p.setDate(p.getDate()-1)),c=this._appointmentAddWindow.find(".e-recurrenceeditor").data("ejRecurrenceEditor"),u=c.recurrenceDateGenerator(e[this._appointmentSettings.recurrenceRule],e[this._appointmentSettings.startTime]),g=(p=new Date(u[u.length-1]),new Date(e[this._appointmentSettings.startTime])),_=[];for(n=0;n<2;n++){var f=previousRule.split(";"),w="",D="";for(w=-1==previousRule.indexOf("COUNT")&&0==n?"UNTIL="+t.format(m,this._pattern.d,this.model.locale):w,s=0;s<f.length;s++)""!=w&&(w+=";"),r=f[s].replace(/ /g,"").split("="),f[s]="COUNT"==r[0]?"UNTIL="+t.format(m,this._pattern.d,this.model.locale):f[s],D="EXDATE"==r[0]?f[s]:D,w+=f[s];this._recurrenceEditor.find(".recurstartdate").ejDatePicker({value:t.format(g,this._datepattern(),this.model.locale)}),c.recurrenceRuleSplit(w),c.showRecurrenceSummary(),a=c.getRecurrenceRule(),a=""!=D&&0==n?a+";"+D:a,_.push(a),o=new Date(i[this._appointmentSettings.startTime]),this._recurrenceEditor.find(".recurstartdate").ejDatePicker({value:t.format(o,this._datepattern(),this.model.locale)}),l=c.recurrenceDateGenerator(i[this._appointmentSettings.recurrenceRule],i[this._appointmentSettings.startTime]),d=new Date(l[l.length-1]),m=new Date(d),g=new Date(i[this._appointmentSettings.startTime]),previousRule=i[this._appointmentSettings.recurrenceRule]}return{mainRule:h,parentRule:_[0],followRule:_[1]}},_alertCreateError:function(){t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),this._alertWindow.ejDialog("instance").option("title",this._getLocalizedLabels("RecurrenceAlert")),this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("CreateError")),this._alertWindow.find(".e-alertOk").html(this._getLocalizedLabels("Ok")),this._alertWindow.ejDialog("open")},_timeZoneSavingAppoint:function(e,i){var n,s,r,a;if(this.model.appointmentSettings.applyTimeOffset){if(this._startTimezone=e[this._appointmentSettings.startTimeZone],this._endTimezone=e[this._appointmentSettings.endTimeZone],!t.isNullOrUndefined(this._startTimezone)&&""!=this._startTimezone){var o=-1!=this._startTimezone.indexOf("UTC")?this._startTimezone.split(" ")[1].split(":"):this._startTimezone.split(":"),l=60*parseInt(o[0])+parseInt(o[1]);if(null==this.model.timeZone?(n=(new Date).getTimezoneOffset()-this._timeZoneOffset,r=this._minToHour(n+l)):(s=-1!=this.model.timeZone.indexOf("UTC")?this.model.timeZone.split(" ")[1].split(":"):this.model.timeZone.split(":"),(r=this._minToHour(l)).h=r.h-parseInt(s[0]),r.m=r.m-parseInt(s[1])),new Date(e[this._appointmentSettings.startTime].setHours(e[this._appointmentSettings.startTime].getHours()-r.h,e[this._appointmentSettings.startTime].getMinutes()-r.m)),this._startTimezone!=this._endTimezone&&this._publicMethodSave){this.startutcValue=null,this.tempValue=null;var d=-1!=this._endTimezone.indexOf("UTC")?this._endTimezone.split(" ")[1].split(":"):this._endTimezone.split(":"),h=l-(60*parseInt(d[0])+parseInt(d[1])),p=(new Date(i.StartDate),new Date(e[this._appointmentSettings.startTime]),new Date(i.EndDate));duration=new Date(p.setMinutes(p.getMinutes()+h)),duration=new Date(duration.setMinutes(duration.getMinutes()-(60*r.h+r.m))),a=duration}else new Date(e[this._appointmentSettings.endTime].setHours(e[this._appointmentSettings.endTime].getHours()-r.h,e[this._appointmentSettings.endTime].getMinutes()-r.m))}return{obj:e,cloneEnddiffer:a}}return{obj:e,cloneEnddiffer:a}},_renderAllDayAppointments:function(){var e,i,n,s,r,a,o;this.element.find(".e-workcells").width();if(this.level=0,e=this._dateRender,this._renderedAllDay=[],i=[],this.element.find(".e-alldayappointment").remove(),n=this.getCurrentViewAppointments(this._processed),this.model.group||(this.res1=["0"]),this._resWorkWeek)for(l=0,s=0,r=0;r<this.res1.length;r++)for(l+=t.isNullOrUndefined(this.res1[r][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?this.model.workWeek.length:this.res1[r][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length;s<l;s++)for(o=0;o<n.length;o++)this._getMultipleResourceAlldayApp(e,s,r,n[o]),t.isNullOrUndefined(this.allDayCount[0])||i.push(this.allDayCount[0]);else if(this._resCustomView){var l=0,d=0,h=this._tempResource[this._tempResource.length-1].resourceSettings.renderDates;for(r=0;r<this.res1.length;r++)for(t.isNullOrUndefined(this.res1[r][h])||(l+=this._getCustomDatesCount(r,h));d<l;d++)for(o=0;o<n.length;o++)this._getMultipleResourceAlldayApp(e,d,r,n[o]),t.isNullOrUndefined(this.allDayCount[0])||i.push(this.allDayCount[0])}else for(r=0;r<this.res1.length;r++)for(a=0;a<e.length;a++)for(o=0;o<n.length;o++)0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources?(this._getMultipleResourceAlldayApp(e,a,r,n[o]),t.isNullOrUndefined(this.allDayCount[0])||i.push(this.allDayCount[0])):t.format(new Date(e[a]),this._pattern.d,this.model.locale)==t.format(new Date(n[o][this._appointmentSettings.startTime]),this._pattern.d,this.model.locale)&&(!0===n[o][this._appointmentSettings.allDay]||this._findAllDayApp(n[o]))&&(this._setAllDayPos(n[o],a,r),i.push(n[o]));this.allDayLevel=i.length,0==i.length&&0==this.level&&(this.element.find(".e-alldaycells,.e-leftindent").addClass("e-alldaycellsheight"),this.element.find(".e-alldaycells").first().css(this.model.enableRTL?"border-right":"border-left","none")),this._reRenderScroller()},_renderSingleApp:function(){this.element.find(".e-prevapp,.e-nextapp").css("display","none"),this._dataProcessing(this._currentAppointmentData),this._renderAppointmentAll()},_timeFormat:function(e){var i,n,s,r,a,o=t.parseDate(e,"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale);return o?(i=o.getHours(),n=o.getMinutes()):(i=Number(e.match(/^(\d+)/)[1]),n=Number(e.match(/:(\d+)/)[1]),t.isNullOrUndefined(e.split(" ")[1])||(s=e.match(/\s(.*)$/)[1],t.isNullOrUndefined(this._culture.calendar.AM)||t.isNullOrUndefined(this._culture.calendar.PM)||(s==this._culture.calendar.PM[0]&&i<12&&(i+=12),s==this._culture.calendar.AM[0]&&12==i&&(i-=12)))),r=i.toString(),a=n.toString(),i<10&&(r="0"+r),n<10&&(a="0"+a),r+":"+a},_processEscapeKey:function(){t.isNullOrUndefined(this._inlineText)||("vertical"!=this.model.orientation||"vertical"!=this._customOrientation||t.isNullOrUndefined(this._inlineDate)||"month"==this.currentView()||this._isCustomMonthView()||this._refreshDayAppointments(this._app),this._inlineRemove()),t.isNullOrUndefined(this._quickAppointWindow)||this._quickAppointWindow.find(".e-error").remove(),this._processFocus(),this.element.find("#"+this._id+"_navigator").ejDatePicker("hide")},_processFocus:function(){var i,n,s=this.element.find("div.e-selectedAppointment");if(0!=s.length&&s.focus(),this.element.find("td.e-selectedCell").hasClass("e-workcells")){var r,a,o,l,d=this.element.find("div.e-draggableworkarea tr"),h=d.length-1,p=this.currentView();this.element.find("td.e-selectedCell").each(function(t,i){var n,s=e(i).index();if(null!=s&&!isNaN(s))if(null==r?(r=s,e(i).parent()[0].rowIndex):r<s?r=r:r!=s&&(r=s,e(i).parent()[0].rowIndex),null==a){if(a=s,"month"!=p)for(l=parseInt(a),n=0;n<=h;n++)e(d[n].cells[l]).hasClass("e-selectedCell")&&(o=n)}else if(a>s)a=a;else if(a!=s&&(a=s,"month"!=p))for(l=parseInt(a),n=0;n<=h;n++)e(d[n].cells[l]).hasClass("e-selectedCell")&&(o=n)}),"month"!=p?e(d[o].cells[a]).attr("tabIndex",0).focus():(i=d.find("td.e-selectedCell"),n=parseInt(i.length)-1,e(i[n]).attr("tabIndex",0).focus())}else this.element.focus(),this.element.find("td.e-selectedCell").attr("tabIndex",0).focus(),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.ejDialog("isOpened")&&this._appointmentAddWindow.find(".subject").focus()},_clearFields:function(){this._appointmentAddWindow.find(".subject").val(""),this._appointmentAddWindow.find(".id").val(""),this._appointmentAddWindow.find(".e-description").val("").css("height",""),this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value",new Date),this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value",new Date),this._appointmentAddWindow.find(".startendtime").ejTimePicker({enabled:!0}),this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value",t.format(new Date,this._pattern.t,this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value",t.format(new Date,this._pattern.t,this.model.locale)),this._appointmentAddWindow.find(".recurrence,.weekdays").ejCheckBox({checked:!1,enabled:!0}),this._appointmentAddWindow.find(".e-repeatlbl").removeClass("e-disable"),this._appointmentAddWindow.find(".allday").ejCheckBox({checked:!1}),this._appointmentAddWindow.find(".startutc,.endutc").ejDropDownList("clearText"),this._appointmentAddWindow.find("."+this._id+"summary").css("display","none"),this._appointmentAddWindow.find(".e-recurFinalRule").html(""),this._appointmentAddWindow.find(".e-recuredit").hide(),this._appointmentAddWindow.find(".e-categorizevalue").ejAutocomplete("clearText")},_getNumericModel:function(){return numericModel={width:"100px",minValue:1,value:1,cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,localize:this.model.locale}},_deleteApp:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b,R=[],A=this._actionType==t.Schedule.Actions.DeleteSeries?t.Schedule.Actions.DeleteSeries:this._actionType==t.Schedule.Actions.DeleteOccurrence?t.Schedule.Actions.DeleteOccurrence:this._actionType==t.Schedule.Actions.DeleteFutureOccurrences?t.Schedule.Actions.DeleteFutureOccurrences:t.Schedule.Actions.Delete,I=this.model.showRecurrenceAlert?this._processed:A==t.Schedule.Actions.DeleteSeries?this._currentAppointmentData:this._processed,k=this.model.showRecurrenceAlert?(new t.Query).where("Guid",t.FilterOperators.equal,i):A==t.Schedule.Actions.DeleteOccurrence?(new t.Query).where("Guid",t.FilterOperators.equal,i):(new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,i);if(this._trigger("actionBegin",{id:i,requestType:"appointmentDelete",currentAction:A})||0==(n=new t.DataManager(I).executeLocal(k)).length||(this.model.showRecurrenceAlert||(s=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))),r=this.model.showRecurrenceAlert?n[0][this._appointmentSettings.recurrence]?{appointment:n[0],currentAction:A,recurrenceCollection:{occurrences:n[0],parentData:this._getAppointmentByParentId(i)}}:{appointment:n[0],currentAction:A}:{appointment:n[0],currentAction:A,recurrenceCollection:{occurrences:s[0],parentData:n[0]},deleteSeries:!0},a=this.model.showRecurrenceAlert?this._getAppointmentByParentId(i):r.deleteSeries?n[0]:s[0],this._trigger("beforeAppointmentRemove",r)))return!1;if((A=this.model.showRecurrenceAlert?A:this._currentAction=r.deleteSeries?A:t.Schedule.Actions.DeleteOccurrence)==t.Schedule.Actions.Delete&&this._groupEditing)var x=null==n[0][this._appointmentSettings.recurrenceId]?n[0].ParentId:n[0][this._appointmentSettings.recurrenceId],O=null==n[0][this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId,M=t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(O,t.FilterOperators.equal,x)),N=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId";if(a[this._appointmentSettings.recurrence]){x=null==n[0][this._appointmentSettings.recurrenceId]?n[0].ParentId:n[0][this._appointmentSettings.recurrenceId],O=null==n[0][this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId,M=t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(O,t.FilterOperators.equal,x)),N=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId";if(A==t.Schedule.Actions.DeleteFutureOccurrences){for(o=this._updateRecurrenceRule(a,n[0]),l=this._processed.filter(function(e){return e.ParentId==a.ParentId}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:l},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:l},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:l},"Guid"),_=0,v=l.length;_<v;_++)this._appointmentRemove(l[_]),this._refreshDayAppointments(l[_]);for(d=this._currentAppointmentData.filter(function(e){return e.ParentId==a.ParentId}),t.isNullOrUndefined(a[this._appointmentSettings.recurrenceExDate])||(T=this,R=d.filter(function(e){return new Date(new Date(e[T._appointmentSettings.startTime]).setHours(0,0,0,0))>=new Date(new Date(n[0][T._appointmentSettings.startTime]).setHours(0,0,0,0))&&-1!=e[T._appointmentSettings.recurrenceRule].indexOf("RECUREDITID")})),h=new t.DataManager(d).remove("Guid",n[0].Guid),h=t.isNullOrUndefined(h)?[]:h,e.merge(h,R),new t.DataManager(d).saveChanges({added:[],changed:[],deleted:R},"Guid"),p=0,v=d.length;p<v;p++)d[p][this._appointmentSettings.recurrenceRule]=-1!=d[p][this._appointmentSettings.recurrenceRule].indexOf("RECUREDITID")?d[p][this._appointmentSettings.recurrenceRule].replace(o.mainRule,o.parentRule):o.parentRule;E=this._dataManager.saveChanges({added:[],changed:d,deleted:h},N,this.model.appointmentSettings.query._fromTable)}else if(A==t.Schedule.Actions.DeleteOccurrence)if(-1!=(a=s)[0][this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID"))E=this._dataManager.remove("Guid",a[0].Guid,this.model.appointmentSettings.query._fromTable),this.dataSource()instanceof t.DataManager&&new t.DataManager(this._currentAppointmentData).remove("Guid",a[0]),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:a},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:a},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:a},"Guid"),this._appointmentRemove(a[0]),this._refreshDayAppointments(a[0]),!t.isNullOrUndefined(E)&&e.isFunction(E.promise)&&this.dataSource()instanceof t.DataManager&&(T=this,E.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&T._processUrlBinding(i)}));else{x=null==s[0][this._appointmentSettings.recurrenceId]?s[0].ParentId:s[0][this._appointmentSettings.recurrenceId];var H=this._deleteOcurrence(x,s[0][this._appointmentSettings.startTime]),W=this._timeZoneAppointments(H[0],""),E=(N=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",this._dataManager.update(N,W,this.model.appointmentSettings.query._fromTable)),L=this._timeZoneAppointments(W,"reverse");if(new t.DataManager(this._currentAppointmentData).update("AppTaskId",L),this._refreshCellsHeight(),(m=this._processed.filter(function(e){return e.Guid==s[0].Guid})).length>1)for(g=[],c=0;c<m.length;c++)(u=this._processed.filter(function(e){return e.Guid==m[c].Guid})).length>0&&g.push(u[0]),new t.DataManager(this._processed).remove("Guid",m[c].Guid),new t.DataManager(this._renderedApp).remove("Guid",m[c].Guid),new t.DataManager(this._renderedAllDay).remove("Guid",m[c].Guid);else g=this._processed.filter(function(e){return e.Guid==s[0].Guid}),new t.DataManager(this._processed).remove("Guid",this._appUid),new t.DataManager(this._renderedApp).remove("Guid",this._appUid),new t.DataManager(this._renderedAllDay).remove("Guid",this._appUid),this._appUid=null;for(_=0,v=g.length;_<v;_++)this._appointmentRemove(g[_]),this._refreshDayAppointments(g[_]);!t.isNullOrUndefined(E)&&e.isFunction(E.promise)&&this.dataSource()instanceof t.DataManager&&(T=this,E.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&T._processUrlBinding(i)}))}else E=this._dataManager.saveChanges({added:[],changed:[],deleted:M},N,this.model.appointmentSettings.query._fromTable)}else N=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",E=this._dataManager.remove(N,a[N],this.model.appointmentSettings.query._fromTable),this.dataSource()instanceof t.DataManager&&new t.DataManager(this._currentAppointmentData).remove(N,a[N]);if(this._refreshCellsHeight(),A!=t.Schedule.Actions.DeleteOccurrence)if("agenda"!=this.currentView())if(this._currentAppointmentData.length>0){for(C=n[0][this._appointmentSettings.recurrence]||this._groupEditing?this._processed.filter(function(e){return e[O]==x}):this._processed.filter(function(e){return e.Guid==i}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:C},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:C},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:C},"Guid"),w=0,v=(f=this.getCurrentViewAppointments(C)).length;w<v;w++)this._appointmentRemove(f[w]),this._refreshDayAppointments(f[w]);if(A==t.Schedule.Actions.DeleteFutureOccurrences){for(S=0,v=(D=this._currentAppointmentData.filter(function(e){return e.ParentId==a.ParentId})).length;S<v;S++)this._appointmentProcessing(D[S]);for(this._currentViewAppointments=this.getCurrentViewAppointments(),y=0,v=this._currentViewAppointments.length;y<v;y++)this._refreshDayAppointments(this._currentViewAppointments[y])}}else this._processed=[],this._renderedApp=[],this._renderedAllDay=[],this.element.find("div.e-appointwrapper").remove(),this._appointmentRemove(n[0]),this._refreshDayAppointments(n[0]);else new t.DataManager(this._processed).remove("Guid",i),C=new t.DataManager(this._processed).executeLocal((new t.Query).where(t.Predicate("ParentId",t.FilterOperators.equal,n[0].ParentId))),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:C},"Guid"),this._renderAgendaContent();this._trigger("appointmentRemoved",{appointment:a,requestType:"appointmentDeleted",currentAction:A}),this._trigger("actionComplete",{data:a,requestType:"appointmentDelete",currentAction:A}),!t.isNullOrUndefined(E)&&e.isFunction(E.promise)&&this.dataSource()instanceof t.DataManager&&(T=this,E.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&T._processUrlBinding(i)})),this.model.timeScale.enable&&((n[0][this._appointmentSettings.endTime]-n[0][this._appointmentSettings.startTime])/36e5>24||n[0][this._appointmentSettings.allDay])&&"month"!=this.currentView()&&!this._isCustomMonthView()&&"agenda"!=this.currentView()&&0==this.allDayLevel&&(this.element.find(".e-alldaycells,.e-leftindent").addClass("e-alldaycellsheight"),this.element.find(".e-alldaycells").first().css(this.model.enableRTL?"border-right":"border-left","none"),this._reRenderScroller()),this._currentViewAppointments=this.getCurrentViewAppointments(),this.model.showAppointmentNavigator&&this._nextPrevButton(),this.model.showOverflowButton||"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"agenda"==this.currentView()||(b=this.element.find(".e-draggableworkarea").offset().top-this.element.find(".e-workcellstab").offset().top,this.element.find(".e-horires").css("top",-b+"px")),this._appUid=null,this._actionType=""},getCurrentViewAppointments:function(e){var i;if(this._resCustomView)i=this._processed;else{var n="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()&&!this._isCustomMonthView()?this._resWorkWeek?this._renderDates:this._dateRender:this.monthDays,s=t.isNullOrUndefined(e)?this._appointmentSort(this._processed):this._appointmentSort(e),r="agenda"==this.currentView()?new Date(new Date(this.currentDate()).setHours(0,0,0)):new Date(n[0]),a="agenda"==this.currentView()?new Date(new Date(new Date(this.currentDate()).setDate(r.getDate()+(this.model.agendaViewSettings.daysInAgenda>0?this.model.agendaViewSettings.daysInAgenda-1:0))).setHours(23,59,59)):new Date(new Date(n[n.length-1]).setHours(23,59,59)),o=t.Predicate(this._appointmentSettings.startTime,t.FilterOperators.greaterThanOrEqual,r).and(this._appointmentSettings.startTime,t.FilterOperators.lessThanOrEqual,a);i=new t.DataManager(s).executeLocal((new t.Query).where(o))}return i},_reRenderAllDayAppointments:function(){this._alldayLevel=1==this.level,this.model.showAllDayRow&&this.element.find("div.e-alldayappointment").remove()&&this._renderAllDayAppointments(),this._bindAppointmentAction()},_appointmentResizeStart:function(i){if(this.model.enableAppointmentResize){this._tooltipEvents("disable"),this._appointdata=e(i.target).parent();var n=e(i.target).parent().attr("data-guid"),s=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,n))),r={element:e(i.target).parent(),appointment:s[0]};if(this._trigger("actionBegin",{data:r,requestType:"appointmentResize"})||this._trigger("resizeStart",r))return this._tooltipEvents("enable"),!1;if(i.preventDefault(),!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),this.resizeStart=!0,e(i.target).hasClass("e-lefthandle")||e(i.target).hasClass("e-righthandle")?(this.resize=i.pageX,this.appoint_width=e(i.target).parent().width(),this.appoint_left=parseInt(e(i.target).parent()[0].style.left),this._appointleft=parseInt(e(e(i.target).parent()[0]).offset().left),this._appointright=parseInt(e(e(i.target).parent()[0]).css("right")),"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||!this.model.enableRTL?e(i.target).hasClass("e-lefthandle")?this._leftResizing=!0:this._rightResizing=!0:e(i.target).hasClass("e-lefthandle")?this._rightResizing=!0:this._leftResizing=!0):(e(i.target).hasClass("e-tophandle")||e(i.target).hasClass("e-bottomhandle"))&&(this.resize=i.pageY,this.appoint_height=e(i.target).parent().height(),this.appoint_top=parseInt(e(i.target).parent()[0].style.top),e(i.target).hasClass("e-tophandle")?this._topResizing=!0:this._bottomResizing=!0),this._curElmt=e(i.target).parent(),this._resizeflag=!1,this.element.find(".e-workcells").removeClass("e-selectedCell,e-mousehover"),e(document).on(t.eventType.mouseMove,e.proxy(this._appointmentResizing,this)),e(document).on(t.eventType.mouseUp,e.proxy(this._appointmentResizeStop,this)),e(i.target).hasClass("e-rowcursor")||e(i.target).hasClass("e-columncursor"))return!1}},_appointmentResizing:function(i){var n,s,r,a={element:e(i.target).parent(),interval:10};t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("hide"),n=e(i.target).hasClass("e-appointment")||e(i.target).hasClass("e-monthappointment")||e(i.target).hasClass("e-alldayappointment")?e(i.target):e(i.target).parents(".e-appointment,.e-alldayappointment,.e-monthappointment"),0==e(".e-scheduleAppGlassy").length&&(n.find(".e-schedulemouseclose").addClass("e-schedulemouseclosetemp").removeClass("e-schedulemouseclose e-icon"),n.clone().prop("id","cloneElement").appendTo(n.parent()),n.addClass("e-draggableAppointment e-scheduleAppGlassy").removeClass("e-schedulemouseclose").appendTo(n.parent()),this._topResizing||this._bottomResizing?(this.model.enableRTL?n.css("right","0"):n.css("left","0"),n.css("width","98%")):(this._rightResizing||this._leftResizing)&&("horizontal"!=this.model.orientation?"month"===this.currentView()||this._isCustomMonthView()?this._appointmentResizeHeight(n,-this.element.find(".e-monthheader").height(),"e-monthcells"):this.model.timeScale.enable?(n.css("top",this.element.find(".e-headerarearow").height()-this.element.find(".e-alldaycells")[0].offsetHeight-2),n.css("height",this.element.find(".e-alldaycells")[0].offsetHeight-2)):n.css("height",this.element.find(".e-monthcells").height()-2):this.model.timeScale.enable||n.css("height",this.element.find(".e-workcells").height()-2))),n=e(i.target).hasClass("e-appointment")||e(i.target).hasClass("e-monthappointment")||e(i.target).hasClass("e-workcells")||e(i.target).hasClass("e-monthcells")||e(i.target).hasClass("e-alldayappointment")||e(i.target).hasClass("e-alldaycells")?e(i.target):e(i.target).parents(".e-appointment,.e-alldayappointment,.e-monthappointment"),s=this.element.find(".e-workcells").height(),r=e(n[0]).height()/s,this._topResizing?r>0&&!e(i.target).hasClass("e-alldaycells")&&!e(i.target).hasClass("e-apptext")&&(this._curElmt.height(this.appoint_height+this.resize-i.pageY+3),this._curElmt.css("top",this.appoint_top-(this.resize-i.pageY)-3)):this._bottomResizing?this._curElmt.height(this.appoint_height+(i.pageY-this.resize)+2):this._rightResizing?"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||!this.model.enableRTL?(this._curElmt.width(this.appoint_width+(i.pageX-this.resize)+2),this._curElmt.css("right",this._appointright-(i.pageX-this.resize)-2)):(this._curElmt.width(this.appoint_width+this.resize-i.pageX+3),this._curElmt.css("left",this.appoint_left-(this.resize-i.pageX)-3)):this._leftResizing&&("horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||!this.model.enableRTL?(this._curElmt.width(this.appoint_width+this.resize-i.pageX+3),this._curElmt.css("left",this.appoint_left-(this.resize-i.pageX)-3)):(this._curElmt.width(this.appoint_width+(i.pageX-this.resize)+2),this._curElmt.css("right",this._appointright-(i.pageX-this.resize)-2))),this._trigger("resize",a),this._resizeInterval=a.interval,this._curElmt.hasClass("e-appointment")&&this._appointmentCurrentTimeUpdate()},_appointmentResizeHeight:function(i,n,s){if(i.length>0){var r=this.model.showOverflowButton?this.element.find("."+s):i.closest("td");i.css("top",n).css("height",(t.isNullOrUndefined(e(r)[0])?e(r).height():e(r)[0].offsetHeight)-2)}},_appointmentMonthUpdate:function(e,t){var i=new Date(this._dateRender[t]);return i.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),new Date(i)},_appointmentCurrentTimeUpdate:function(){var i,n,s,r,a=new t.DataManager(this._processed).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,parseInt(this._curElmt.attr("id").split("_")[1])))[0],o=new Date(a[this._appointmentSettings.startTime]),l=new Date(a[this._appointmentSettings.endTime]),d=this.element.find(".e-workcells")[0].offsetHeight,h=parseInt(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount);if("month"!==this.currentView()&&!this._isCustomMonthView())var p=this.element.find(".e-draggableworkarea"),m=e(this._curElmt[0]).offset().top,c=p.height()+p.scrollTop(),u=e(this._curElmt[0]).outerHeight(),g=m-p.offset().top+p.scrollTop(),_=g-d/this.model.timeScale.minorSlotCount<c?g:c-u;if(this._topResizing)i=_*this.model.timeScale.majorSlot/(this.model.timeScale.minorSlotCount*d),o.setHours(parseInt(this.model.startHour)+parseInt(i/60)),o.setMinutes(parseInt(i%60)),h>=this._resizeInterval?o.setMinutes(Math.round(o.getMinutes()/this._resizeInterval)*this._resizeInterval):o.setMinutes(o.getMinutes()/this._resizeInterval*this._resizeInterval);else if(this._bottomResizing)i=(_+e(this._curElmt[0]).outerHeight()/d*d)*this.model.timeScale.majorSlot/(this.model.timeScale.minorSlotCount*d),l.setHours(parseInt(this.model.startHour)+parseInt(i/60)),l.setMinutes(i%60),h>=this._resizeInterval?l.setMinutes(Math.round(l.getMinutes()/this._resizeInterval)*this._resizeInterval):l.setMinutes(l.getMinutes()/this._resizeInterval*this._resizeInterval);else if(this._rightResizing){if(T=60*(this.model.endHour-this.model.startHour==24?this._curElmt.width()-this.appoint_width:this._curElmt.width())/(this.element.find(".e-workcells").width()*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)+1),this.model.endHour-this.model.startHour==24)l.setHours(new Date(l).getHours()+parseInt(T/60)),l.setMinutes(new Date(l).getMinutes()+parseInt(T%60));else{var f=this.element.find(".e-scheduleAppGlassy").width(),w=this.element.find(".e-workcells").width(),D=new Date(o),S=new Date(l),y=this._dateRender.indexOf(new Date(S).setHours(0,0,0)),v=60*(this.model.endHour-this.model.startHour),C=w/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount),T=(f-this.appoint_width)/C;l.setDate(S.getDate()),l.setMinutes(S.getMinutes()+T),(l.getHours()>=this.model.endHour||S.getDate()!=l.getDate())&&0==this._resizeflag?(s=60*(this.model.endHour-S.getHours()),(r=T-(s=(s=0===S.getMinutes()?s:s-S.getMinutes())<0?0:s))>v&&(r%=v),(y+=Math.ceil((T-s)/v))>=this._dateRender.length?(y=this._dateRender.length-1,(l=this._appointmentMonthUpdate(l,y)).setDate(new Date(this._dateRender[y]).getDate()),l.setHours(this.model.endHour,0,0)):((l=this._appointmentMonthUpdate(l,y)).setDate(new Date(this._dateRender[y]).getDate()),l.setHours(this.model.startHour,0,0),l.setMinutes(r))):(l.getHours()<this.model.startHour||S.getDate()!=l.getDate())&&(this._resizeflag=!0,s=60*(this.model.startHour-S.getHours()),s=0===S.getMinutes()?s:s-S.getMinutes(),(r=Math.abs(T-s))>v&&(r%=v),y=(y-=Math.ceil(Math.abs(T-s)/v))<0?0:y,(l=this._appointmentMonthUpdate(l,y)).setDate(new Date(this._dateRender[y]).getDate()),l.setHours(this.model.endHour,0,0),l.setMinutes(-r))}h>=this._resizeInterval?l.setMinutes(Math.round(l.getMinutes()/this._resizeInterval)*this._resizeInterval):l.setMinutes(l.getMinutes()/this._resizeInterval*this._resizeInterval),l>new Date(new Date(this._dateRender[this._dateRender.length-1]).setHours(23,59,59))&&(l=new Date(new Date(this._dateRender[this._dateRender.length-1]).setHours(23,59,59)))}else if(this._leftResizing){if(n=e(this.element.find(".e-workcells.e-childworkcell")[0]).offset().left<e(this._curElmt).offset().left?this._curElmt.offset().left-this._appointleft:e(this.element.find(".e-workcells.e-childworkcell")[0]).offset().left-this._appointleft,this.model.enableRTL&&(n=-(this._curElmt.width()-this.appoint_width)),T=60*n/(this.element.find(".e-workcells").width()*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)+1),this.model.endHour-this.model.startHour==24)o.setHours(parseInt(new Date(o).getHours())+parseInt(T/60)),o.setMinutes(new Date(o).getMinutes()+parseInt(T%60));else{f=this.element.find(".e-scheduleAppGlassy").width(),w=this.element.find(".e-workcells").width(),D=new Date(o),S=new Date(l),y=this._dateRender.indexOf(new Date(D).setHours(0,0,0)),v=60*(this.model.endHour-this.model.startHour),C=w/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount),T=(f-this.appoint_width)/C;o.setDate(D.getDate()),o.setMinutes(D.getMinutes()-T),(o.getHours()<this.model.startHour||D.getDate()!=o.getDate())&&0==this._resizeflag?(s=60*(D.getHours()-this.model.startHour),(r=T-(s=(s=0===D.getMinutes()?s:s+D.getMinutes())<0?0:s))>v&&(r%=v),(y-=Math.ceil((T-s)/v))<0?(y=0,o.setMonth(new Date(this._dateRender[y]).getMonth()),o.setDate(new Date(this._dateRender[y]).getDate()),o.setHours(this.model.startHour,0,0)):(o.setMonth(new Date(this._dateRender[y]).getMonth()),o.setDate(new Date(this._dateRender[y]).getDate()),o.setHours(this.model.endHour,0,0),o.setMinutes(-r))):(o.getHours()>=this.model.endHour||D.getDate()!=o.getDate())&&(this._resizeflag=!0,s=60*(this.model.endHour-D.getHours()),s=0===D.getMinutes()?s:s-D.getMinutes(),(r=Math.abs(T+s))>v&&(r%=v),y=(y+=Math.ceil(Math.abs(T+s)/v))>=this._dateRender.length?this._dateRender.length-1:y,o.setMonth(new Date(this._dateRender[y]).getMonth()),o.setDate(new Date(this._dateRender[y]).getDate()),o.setHours(this.model.startHour,0,0),o.setMinutes(r))}h>=this._resizeInterval?o.setMinutes(Math.round(o.getMinutes()/this._resizeInterval)*this._resizeInterval):o.setMinutes(o.getMinutes()/this._resizeInterval*this._resizeInterval),o<new Date(this._dateRender[0])&&(o=new Date(this._dateRender[0]))}this.model.enableRTL?(this._curElmt.find(".e-apptext").html(t.format(new Date(o),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)).css("font-size","12px").css("white-space","normal"),this._curElmt.find(".e-apptime").html(t.format(new Date(l),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)).css("font-size","12px").css("white-space","normal").css("float","left").css("margin-top",this._curElmt.height()-(this._curElmt.find(".e-apptime").outerHeight()+this._curElmt.find(".e-apptext").outerHeight())+"px")):this.model.endHour-this.model.startHour==24?(this._curElmt.find(".e-apptext").html(t.format(new Date(o),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)).css("font-size","12px").css("white-space","normal"),this._curElmt.find(".e-apptime").html(t.format(new Date(l),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)).css("font-size","12px").css("white-space","normal").css("float","right").css("margin-top",this._curElmt.height()-(this._curElmt.find(".e-apptime").outerHeight()+this._curElmt.find(".e-apptext").outerHeight())+"px")):isNaN(o)||isNaN(l)||(this._curElmt.find(".e-apptext").html(t.format(new Date(o),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)).css("font-size","12px").css("white-space","normal"),this._curElmt.find(".e-apptime").html(t.format(new Date(l),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)).css("font-size","12px").css("white-space","normal").css("float","right").css("margin-top",this._curElmt.height()-(this._curElmt.find(".e-apptime").outerHeight()+this._curElmt.find(".e-apptext").outerHeight())+"px")),this._resizeNewStartTime=o,this._resizeNewEndTime=l},_leftRightResize:function(t,i,n,s,r,a){var o,l,d,h,p,m=this._leftResizing?r:a,c=this._leftResizing?a:r;if(this._resWorkWeek||this._resCustomView?(h=i.offset(),this.element.find(".e-appointment,.e-monthappointment").css("pointer-events","none"),u=this._leftResizing?t.elementFromPoint(h.left-e(t).scrollLeft(),h.top-e(t).scrollTop()):t.elementFromPoint(h.left+i.width()-e(t).scrollLeft(),h.top-e(t).scrollTop()),_=this._leftResizing?Math.floor(i.offset().left/this.element.find(".e-alldaycells").width())-1:Math.floor(i.offset().left/this.element.find(".e-alldaycells").width())+1,this.element.find(".e-appointment,.e-monthappointment").css("pointer-events","visible")):_=this._leftResizing?n*s:n==this.res1.length-1?(n+1)*s-1:(n+1)*s,this.model.enableRTL)if(this._resWorkWeek||this._resCustomView){(d=e.extend(!0,[],this._dateRender)).reverse(),h=i.offset(),this.element.find(".e-appointment,.e-monthappointment").css("pointer-events","none");var u=this._rightResizing?t.elementFromPoint(h.left-e(t).scrollLeft(),h.top-e(t).scrollTop()):t.elementFromPoint(h.left+i.width()-e(t).scrollLeft(),h.top-e(t).scrollTop()),g=e.grep(u,function(t){if(e(t).closest("td").hasClass("e-alldaycells"))return t}),_=this.element.find(".e-alldaycells").length-1-e(g[0]).index();this.element.find(".e-appointment,.e-monthappointment").css("pointer-events","visible"),newEndTime=new Date(d[_]),newEndTime.setHours(new Date(c).getHours(),new Date(c).getMinutes(),new Date(c).getSeconds())}else e(i[0]).width()-this.appoint_width,p=Math.round(e(i[0]).width()/this.element.find(".e-alldaycells").width())-1,newEndTime=this._rightResizing?new Date(a):new Date(m),this._rightResizing?newEndTime.setDate(new Date(newEndTime).getDate()-p):newEndTime.setDate(new Date(newEndTime).getDate()+p),newEndTime.setHours(new Date(c).getHours(),new Date(c).getMinutes(),new Date(c).getSeconds()),newEndTime>new Date(new Date(this._dateRender[this._dateRender.length-1]).setHours(new Date(c).getHours(),new Date(c).getMinutes(),new Date(c).getSeconds()))?newEndTime=new Date(new Date(this._dateRender[this._dateRender.length-1]).setHours(new Date(c).getHours(),new Date(c).getMinutes(),new Date(c).getSeconds())):newEndTime<new Date(new Date(this._dateRender[this._dateRender.length-1]).setHours(new Date(c).getHours(),new Date(c).getMinutes(),new Date(c).getSeconds()))&&(newEndTime=new Date(new Date(newEndTime).setHours(new Date(c).getHours(),new Date(c).getMinutes(),new Date(c).getSeconds())));else this._rightResizing?(l=i[0].offsetLeft+e(i[0]).width(),this._resWorkWeek&&this._resCustomView||(p=Math.floor(l/this.element.find(".e-alldaycells").width())-n*s),o=n==this.res1.length-1?e(this.element.find(".e-alldaycells")[_]).offset().left+this.element.find(".e-alldaycells").width():e(this.element.find(".e-alldaycells")[_]).offset().left):(l=this.element.find(".e-alldaycells").eq(_).offset().left,o=e(i[0]).offset().left),o>=l?(newStartTime=new Date(this._dateRender[0]),this._resWorkWeek&&this._resCustomView||!this._leftResizing||(l=e(i[0]).offset().left-e(this.element.find(".e-alldaycells")[n*s]).offset().left,p=Math.round(l/(this.element.find(".e-alldaycells").width()+1))),this.model.workWeek.length>0?this._resWorkWeek?(newStartTime=new Date(this._dateRender[_]),newStartTime.setHours(new Date(m).getHours(),new Date(m).getMinutes(),new Date(m).getSeconds())):(newStartTime=new Date(this._dateRender[0]),newStartTime.setDate(new Date(this._dateRender[p]).getDate()),newStartTime.setMonth(new Date(this._dateRender[p]).getMonth()),newStartTime.setHours(new Date(m).getHours(),new Date(m).getMinutes(),new Date(m).getSeconds())):(newStartTime=new Date(this._dateRender[0]),newStartTime.setDate(new Date(newStartTime).getDate()+(p>=s?p-1:p)),newStartTime.setHours(new Date(m).getHours(),new Date(m).getMinutes(),new Date(m).getSeconds()))):(this._rightResizing?this._rightResizing=!1:this._leftResizing=!1,this.model.enableRTL?newEndTime=a:newStartTime=r);return this.model.enableRTL?newEndTime:newStartTime},_appointmentResizeStop:function(n){var s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b,R,A,I,k,x,O,M,N,H,W,E,L,U,F,V,z,P,j,q;this._tooltipEvents("enable");try{s=this.element.find(".e-draggableworkarea"),this.resizeStart=!1,e(document).off(t.eventType.mouseMove,e.proxy(this._appointmentResizing,this)),e(document).off(t.eventType.mouseUp,e.proxy(this._appointmentResizeStop,this));var B=this._appointmentSettings,G=this.element.find(".e-workcellstab").find("tr").length*this.element.find(".e-workcells,.e-monthcells").height(),Q=e(n.target).hasClass("e-appointment")||e(n.target).hasClass("e-monthappointment")||e(n.target).hasClass("e-alldayappointment")?e(n.target):e(n.target).parents(".e-appointment,.e-alldayappointment,.e-monthappointment");0==Q.length&&(Q=this._appointdata),Q.attr("data-guid")!=this._appointdata.attr("data-guid")&&(Q=this._appointdata),this._appUid=Q.attr("data-guid");var Y=(ce=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))).length>1,Z=ce[0][B.recurrence]&&-1==ce[0][B.recurrenceRule].toString().indexOf("RECUREDITID")?this._getAppointmentByParentId(this._appUid):ce[0][B.recurrence]?ce[0]:this._getAppointmentByParentId(this._appUid),K="week"===this.currentView()||"month"===this.currentView()||this._isCustomMonthView()?this.model.showWeekend?7:this.model.workWeek.length:"workweek"===this.currentView()&&this.model.workWeek.length>0?this.model.workWeek.length:1;if(K="customview"==this.currentView()&&this._renderDays<=7?this._renderDays:K,this._resWorkWeek&&(a=new t.DataManager(this.res1).executeLocal((new t.Query).where(this._tempResource[this._tempResource.length-1].resourceSettings.id,t.FilterOperators.equal,ce[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]])),K=(r=t.isNullOrUndefined(a[0][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?this.model.workWeek:a[0][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek]).length),this._resCustomView&&(a=new t.DataManager(this.res1).executeLocal((new t.Query).where(this._tempResource[this._tempResource.length-1].resourceSettings.id,t.FilterOperators.equal,ce[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1]])),t.isNullOrUndefined(a[0][this._tempResource[this._tempResource.length-1].resourceSettings.renderDates])||(r=a[0][this._tempResource[this._tempResource.length-1].resourceSettings.renderDates],K=t.isNullOrUndefined(r)||"object"!=e.type(r[0])?r.length:this._getMultipleCustomDatesCount(r))),null!=Z||Z!==i){Z[this._appointmentSettings.startTime].getDate(),new Date(Z[this._appointmentSettings.endTime]).getDate();var X=new Date(Z[this._appointmentSettings.startTime]),J=new Date(Z[this._appointmentSettings.endTime]);Y&&ce[0][B.recurrence]?(o=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,ce[0].Guid))),X=new Date(o[0][this._appointmentSettings.startTime]),J=new Date(o[1][this._appointmentSettings.endTime])):ce[0][B.recurrence]&&(X=new Date(ce[0][this._appointmentSettings.startTime]),J=new Date(ce[0][this._appointmentSettings.endTime])),this.element.find("div[data-guid="+ce[0].Guid+"]").removeClass("e-selectedAppointment");var $=Z[this._appointmentSettings.startTime],ee=Z[this._appointmentSettings.endTime],te=e(Q[0]).outerHeight(),ie=this.element.find(".e-workcells").outerHeight();if("month"!==this.currentView()&&!this._isCustomMonthView())var ne=e(Q[0]).offset().top,se=s.height()+s.scrollTop(),re=ne-s.offset().top+s.scrollTop(),ae=re-ie/this.model.timeScale.minorSlotCount<se?re:se-te;var oe=((ae=t.isNullOrUndefined(ae)?0:ae)+e(Q[0]).outerHeight()/ie*ie)*this.model.timeScale.majorSlot/(this.model.timeScale.minorSlotCount*ie)/30,le=ae+(te-parseInt(oe));if(this._topResizing)this._topResizing,ae>0?X=this._resizeNewStartTime:X.setHours(0,0,0),this._topResizing=!1,this._leftStartTime=!0;else if(this._bottomResizing)this._bottomResizing,ae>=0&&le<G?J=this._resizeNewEndTime:J.setHours(23,59,59),this._bottomResizing=!1,this._leftStartTime=!1;else if(this._leftResizing){if("vertical"==this.model.orientation&&"vertical"==this._customOrientation){if(pe=this.model.group?1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,Z[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],null,null):this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,Z[this._appointmentSettings.resourceFields.split(",")[this._tempResource.length-1].trim()],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,Z[this._appointmentSettings.resourceFields.split(",")[this._tempResource.length-2].trim()]):0,"month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable)this.model.enableRTL?J=this._leftRightResize(document,Q,pe,K,$,ee):X=this._leftRightResize(document,Q,pe,K,$,ee);else if(p=this.model.enableRTL?e(this.element.find(".e-monthcells")[(pe+1)*K-1]).offset().left:e(this.element.find(".e-monthcells")[pe*K]).offset().left,e(Q[0]).offset().left>p)if(this.model.enableRTL)if(this.model.showWeekend)c=Math.round((e(Q[0]).width()-this.appoint_width)/this.element.find(".e-monthcells").width()),J.setDate(new Date(J).getDate()+c),J.setHours(new Date(ee).getHours(),new Date(ee).getMinutes(),new Date(ee).getSeconds());else{for(l=this._getWeekDays();l.indexOf(J.getDay())<0;)J=new Date(new Date(J).getTime()+864e5);u=this._dateRender.indexOf(new Date(J).setHours(0,0,0,0))+c,(J=new Date(this._dateRender[u])).setHours(new Date(ee).getHours(),new Date(ee).getMinutes(),new Date(ee).getSeconds())}else if(this._resize=!0,X=new Date(this._firstweekdate(new Date(ce[0][B.startTime]))),this._resize=!1,c=Math.round((e(Q[0]).offset().left-e(this.element.find(".e-monthcells")[pe*K]).offset().left)/this.element.find(".e-monthcells").width()),this.model.showWeekend)X.setDate(X.getDate()+c),X.setHours(new Date($).getHours(),new Date($).getMinutes(),new Date($).getSeconds());else{for(l=this._getWeekDays();l.indexOf(X.getDay())<0;)X=new Date(new Date(X).getTime()+864e5);u=this._dateRender.indexOf(new Date(X).setHours(0,0,0,0))+c,(X=new Date(this._dateRender[u])).setHours(new Date($).getHours(),new Date($).getMinutes(),new Date($).getSeconds())}}else d=e(this.element.find(".e-workcells.e-childworkcell")[0]).offset().left<e(Q[0]).offset().left?e(Q[0]).offset().left-this._appointleft:e(this.element.find(".e-workcells.e-childworkcell")[0]).offset().left-this._appointleft,this.model.enableRTL&&(d=-(e(Q[0]).width()-this.appoint_width)),"month"==this.currentView()||this._isCustomMonthView()||!this.model.timeScale.enable?(c=Math.round(d/(this.element.find(".e-workcells").width()+1)),this._diffDays=Math.round(e(Q[0]).width()/this.element.find(".e-workcells").width()),!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0?(u=this._dateRender.indexOf(new Date(X).setHours(0,0,0,0))+c,g=new Date(new Date(this._dateRender[u]).setHours(new Date(X).getHours(),new Date(X).getMinutes(),new Date(X).getSeconds())),X=new Date(g)):this.model.showWeekend?X.setDate(new Date(X).getDate()+c):(u=this._dateRender.indexOf(new Date(X).setHours(0,0,0,0))+c,g=new Date(new Date(this._dateRender[u]).setHours(new Date(X).getHours(),new Date(X).getMinutes(),new Date(X).getSeconds())),X=new Date(g))):X=this._resizeNewStartTime;this._leftResizing=!1,this._leftStartTime=!0}else this._rightResizing&&("vertical"==this.model.orientation&&"vertical"==this._customOrientation?(pe=this.model.group?1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,Z[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1]],null,null):this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,Z[this._appointmentSettings.resourceFields.split(",")[this._tempResource.length-1].trim()],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,Z[this._appointmentSettings.resourceFields.split(",")[this._tempResource.length-2].trim()]):0,"month"!==this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable?this.model.enableRTL?X=this._leftRightResize(document,Q,pe,K,$,ee):J=this._leftRightResize(document,Q,pe,K,$,ee):(h=this.element.find(".e-monthcells").width(),(p=this.model.enableRTL?e(this.element.find(".e-monthcells")[pe*K]).offset().left+h:pe==this.res1.length-1?e(this.element.find(".e-monthcells")[(pe+1)*K-1]).offset().left+h:e(this.element.find(".e-monthcells")[(pe+1)*K]).offset().left)>=e(Q[0]).offset().left+e(Q[0]).width()&&(c=this._diffDays=Math.round((e(Q[0]).width()-this.appoint_width)/h),this.model.enableRTL?this.model.showWeekend?(X.setDate(new Date(X).getDate()-c),X.setHours(new Date($).getHours(),new Date($).getMinutes(),new Date($).getSeconds())):(u=this._dateRender.indexOf(new Date(X).setHours(0,0,0,0))-c,(X=new Date(this._dateRender[u])).setHours(new Date($).getHours(),new Date($).getMinutes(),new Date($).getSeconds())):this.model.showWeekend?(J.setDate(new Date(J).getDate()+c),J.setHours(new Date(ee).getHours(),new Date(ee).getMinutes(),new Date(ee).getSeconds())):(u=this._dateRender.indexOf(new Date(J).setHours(0,0,0,0))+c,(J=new Date(this._dateRender[u])).setHours(new Date(ee).getHours(),new Date(ee).getMinutes(),new Date(ee).getSeconds()))))):(m=this.model.endHour-this.model.startHour==24?e(Q[0]).width()-this.appoint_width:e(Q[0]).width(),"month"==this.currentView()||this._isCustomMonthView()||!this.model.timeScale.enable?(m=e(Q[0]).width()-this.appoint_width,c=Math.round(m/(this.element.find(".e-workcells").width()+1)),this._diffDays=Math.round(e(Q[0]).width()/this.element.find(".e-workcells").width()),!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0?(u=this._dateRender.indexOf(new Date(J).setHours(0,0,0,0))+c,g=new Date(new Date(this._dateRender[u]).setHours(new Date(J).getHours(),new Date(J).getMinutes(),new Date(J).getSeconds())),J=new Date(g)):this.model.showWeekend?J.setDate(new Date(J).getDate()+c):(u=this._dateRender.indexOf(new Date(J).setHours(0,0,0,0))+c,g=new Date(new Date(this._dateRender[u]).setHours(new Date(J).getHours(),new Date(J).getMinutes(),new Date(J).getSeconds())),J=new Date(g))):(J=this._resizeNewEndTime,new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,Q.attr("data-guid")))[0][this.model.appointmentSettings.allDay]=!1)),this._rightResizing=!1,this._leftStartTime=!1);if((X>=J||0==e(Q[0]).width())&&(X=ce[0][B.startTime],J=ce[0][B.endTime]),X.getTime()==ce[0][B.startTime].getTime()&&J.getTime()==ce[0][B.endTime].getTime())return this.element.find("#cloneElement").length>0&&(_=this.element.find(".e-monthappointment").length>1?this.element.find("#cloneElement").outerHeight():this.element.find("#cloneElement").height(),this.model.enableRTL?this._curElmt.removeClass("e-draggableAppointment e-scheduleAppGlassy").css({width:this.element.find("#cloneElement").width(),height:_,top:this.element.find("#cloneElement").css("top"),right:this.element.find("#cloneElement").css("right")}):this._curElmt.removeClass("e-draggableAppointment e-scheduleAppGlassy").css({width:this.element.find("#cloneElement").width(),height:_,top:this.element.find("#cloneElement").css("top"),left:this.element.find("#cloneElement").css("left")}),this._curElmt.find(".e-apptext").replaceWith(this.element.find("#cloneElement").find(".e-apptext")).prop("style",!1),this._curElmt.find(".e-apptime").html(this.element.find("#cloneElement").find(".e-apptime").text()).prop("style",!1),this._curElmt.css("width",this.element.find("#cloneElement")[0].style.width),this._curElmt.hasClass("e-alldayappointment")&&this._curElmt.height(19),this.element.find("#cloneElement").remove(),e(Q[0]).find(".e-schedulemouseclosetemp").addClass("e-schedulemouseclose e-icon").removeClass("e-schedulemouseclosetemp")),!1;this.element.find("#cloneElement").length>0&&this.element.find("#cloneElement").remove(),this._refreshCellsHeight();var de=new Date(new Date(this.currentDate()).getFullYear(),new Date(this.currentDate()).getMonth(),1),he=new Date(new Date(this.model.maxDate).getTime()).setHours(23,59,59);if(!(!this.model.showNextPrevMonth&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&"month"==this.currentView()&&(de.getTime()!=new Date(X.getFullYear(),X.getMonth(),1).getTime()||de.getTime()!=new Date(J.getFullYear(),J.getMonth(),1).getTime()))&&J>=new Date(this.model.minDate)&&J<=he)if(1==Z[B.recurrence]&&-1==Z[B.recurrenceRule].toString().indexOf("RECUREDITID")){var pe,me=!1,ce=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),ue=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),ge=e.extend(!0,{},ue[0]);if(ge[this._appointmentSettings.endTime]=ue[ue.length-1][this._appointmentSettings.endTime],v=null==ge[this._appointmentSettings.recurrenceId]?ge.ParentId:ge[this._appointmentSettings.recurrenceId],f=null==ge[this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId,A=this._groupEditing||this._groupEdit?new t.DataManager(this._processed).executeLocal((new t.Query).where("commonGuid",t.FilterOperators.equal,ge.commonGuid)):new t.DataManager(this._processed).executeLocal((new t.Query).where(f,t.FilterOperators.equal,v)),Y&&(_e=ce,A=this._recurrenceAppSort(A)),A=this._appointmentRecurrenceSort(A),w=e.extend({},ce[0]),this._groupEditing)for(x=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,w[this._appointmentSettings.id])),z=0;z<this._appointmentSettings.resourceFields.split(",").length;z++)w[this._appointmentSettings.resourceFields.split(",")[z].trim()]=x[0][this._appointmentSettings.resourceFields.split(",")[z].trim()];if(Y&&(w=e.extend({},A.filter(function(e){return e.Guid==ce[0].Guid})[0]),this._groupEditing))for(z=0;z<this._appointmentSettings.resourceFields.split(",").length;z++)w[this._appointmentSettings.resourceFields.split(",")[z].trim()]=w[this._id+"_ownerfield_"+[z]];for(this.model.enableRecurrenceValidation&&w[B.recurrence]&&(pe=this._recuCollectionIndex(A,ge)),this.model.enableRecurrenceValidation&&w[B.recurrence]&&!(0==pe?t.isNullOrUndefined(A[pe+1])||new Date(new Date(A[pe+1][B.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(J).setHours(0,0,0,0)).getTime():pe==A.length-1?new Date(new Date(A[pe-1][B.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(X).setHours(0,0,0,0)).getTime():new Date(new Date(A[pe-1][B.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(X).setHours(0,0,0,0)).getTime()&&new Date(new Date(A[pe+1][B.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(J).setHours(0,0,0,0)).getTime())?(w[B.startTime]=ge[B.startTime],w[B.endTime]=ge[B.endTime],this._alertDragResizeError(),me=!0,this._groupEditing&&(w[B.resourceFields.split(",")[B.resourceFields.split(",").length-1].trim()]=ge[B.resourceFields.split(",")[B.resourceFields.split(",").length-1].trim()])):(D=w[B.startTime],S=w[B.endTime],w[B.startTime]=new Date(X),w[B.endTime]=new Date(J),N=this._checkAvailability(w),H=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("resizeStop")?n:{type:n.type},t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("resizeStop")||this._timeZoneAppointments(w,""),this._trigger("resizeStop",{appointment:w,target:H})||N.length>0?(this._showBlockAlert&&N.length>0&&this._alertBlockError(),w[B.startTime]=new Date(D),w[B.endTime]=new Date(S),me=!0):(y=this.model.enableLoadOnDemand?this._dataCount:this._appMainId+1,v=null==w[B.recurrenceId]?w.ParentId:w[B.recurrenceId],this._deleteOcurrence(v,new Date(ge[B.startTime])),w[B.recurrenceRule]=ce[0][B.recurrenceRule]+";RECUREDITID="+w.ParentId,w[B.id]=w.AppTaskId=y)),W=[],C=[],t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("resizeStop")?W.push(this._timeZoneAppointments(w,"")):W.push(w),T=null==w[this._appointmentSettings.recurrenceId]?w.ParentId:w[this._appointmentSettings.recurrenceId],b=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,T)),t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("resizeStop")?C.push(this._timeZoneAppointments(b[0],"")):C.push(b[0]),L=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",me||(E=this._dataManager.saveChanges({added:W,changed:C,deleted:[]},L,this.model.appointmentSettings.query._fromTable)),R=0;R<W.length;R++)t.isNullOrUndefined(this.model.serverEvents)?new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(W[R],"reverse")):new t.DataManager(this._currentAppointmentData).update("AppTaskId",W[R]);for(R=0;R<C.length;R++)t.isNullOrUndefined(this.model.serverEvents)?new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(C[R],"reverse")):new t.DataManager(this._currentAppointmentData).update("AppTaskId",C[R]);if(me)for(this._appointmentRemove(w),this._groupEditing||this._groupEdit?(_e=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,w[this._appointmentSettings.startTime].toString())),_e=new t.DataManager(_e).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,w.ParentId))):_e=this._processed.filter(function(e){return e.Guid==w.Guid}),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:_e},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:_e},"Guid"),n=0,j=_e.length;n<j;n++)this._refreshDayAppointments(_e[n]);else{if(this.dataSource()instanceof t.DataManager&&this._currentAppointmentData.push(w),this._groupEditing||this._groupEdit)if(this._leftStartTime)if(Y){var _e=[],fe=this._processed.filter(function(e){return e.Guid==w.Guid}),we=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.endTime,t.FilterOperators.equal,fe[0][this._appointmentSettings.endTime].toString()));for(we=new t.DataManager(we).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,fe[0].ParentId)),z=0;z<we.length;z++)_e.push(we[z]);for(fe=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.endTime,t.FilterOperators.equal,w[this._appointmentSettings.endTime].toString())),z=0;z<we.length;z++)_e.push(we[z]);this._leftStartTime=!1}else _e=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.endTime,t.FilterOperators.equal,w[this._appointmentSettings.endTime].toString())),_e=new t.DataManager(_e).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,w.ParentId)),this._leftStartTime=!1;else if(Y){_e=[],fe=this._processed.filter(function(e){return e.Guid==w.Guid}),we=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,fe[0][this._appointmentSettings.startTime].toString()));for(we=new t.DataManager(we).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,fe[0].ParentId)),z=0;z<we.length;z++)_e.push(we[z]);for(fe=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,w[this._appointmentSettings.startTime].toString())),z=0;z<we.length;z++)_e.push(we[z])}else _e=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,w[this._appointmentSettings.startTime].toString())),_e=new t.DataManager(_e).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,w.ParentId));else _e=this._processed.filter(function(e){return e.Guid==w.Guid});for(new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:_e},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:_e},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:_e},"Guid"),z=0;z<_e.length;z++)this._appointmentRemove(_e[z]);for(this._appointmentProcessing(w),this._currentViewAppointments=this.getCurrentViewAppointments(),n=0,j=(we=this._groupEditing||this._groupEdit?this._currentViewAppointments.filter(function(e){return e.ParentId==w.ParentId}):this._currentViewAppointments.filter(function(e){return e.Guid==w.Guid})).length;n<j;n++)this._refreshDayAppointments(we[n])}this._trigger("actionComplete",{data:w,requestType:"appointmentResize"}),!t.isNullOrUndefined(E)&&e.isFunction(E.promise)&&this.dataSource()instanceof t.DataManager&&(q=this,E.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))q._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(q._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)w[q._appointmentSettings.id]=r.added[n][q._appointmentSettings.id],new t.DataManager(q._processed).update("Guid",w)}),E.fail(function(){q._renderAppointmentAll()}))}else{if(me=!1,I=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),A=new t.DataManager(this._processed).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,I[0].ParentId)),Y&&(A=this._recurrenceAppSort(A)),A=this._appointmentRecurrenceSort(A),k=e.extend({},I[0]),this._groupEditing)for(x=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,k[this._appointmentSettings.id])),z=0;z<this._appointmentSettings.resourceFields.split(",").length;z++)k[this._appointmentSettings.resourceFields.split(",")[z].trim()]=x[0][this._appointmentSettings.resourceFields.split(",")[z].trim()];if(this.model.enableRecurrenceValidation&&k[B.recurrence]&&(pe=this._recuCollectionIndex(A,I[0])),O=k[B.startTime],M=k[B.endTime],k[B.startTime]=X,k[B.endTime]=J,N=this._checkAvailability(k),H=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("resizeStop")?n:{type:n.type},t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("resizeStop")||this._timeZoneAppointments(k,""),(this._trigger("resizeStop",{appointment:k,target:H})||N.length>0)&&(this._showBlockAlert&&N.length>0&&this._alertBlockError(),k[B.startTime]=O,k[B.endTime]=M,me=!0),W=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("resizeStop")?this._timeZoneAppointments(k,""):k,L=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",me||(E=this._dataManager.update(L,W,this.model.appointmentSettings.query._fromTable)),U=this._timeZoneAppointments(W,"reverse"),t.isNullOrUndefined(this.model.serverEvents)?new t.DataManager(this._currentAppointmentData).update("AppTaskId",U):new t.DataManager(this._currentAppointmentData).update("AppTaskId",W),this._groupEditing&&!I[0][this._appointmentSettings.recurrence]){for(new t.DataManager(this._currentAppointmentData).update("ParentId",U),V=new t.DataManager(this._processed).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,k.ParentId)),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:V},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:V},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:V},"Guid"),F=0;F<V.length;F++)this._appointmentRemove(V[F]);for(this._appointmentProcessing(k),this._currentViewAppointments=this.getCurrentViewAppointments(),n=0,j=(we=this._groupEditing||this._groupEdit?this._processed.filter(function(e){return e.ParentId==k.ParentId}):this._processed.filter(function(e){return e.Guid==k.Guid})).length;n<j;n++)this._refreshDayAppointments(we[n]);this._trigger("actionComplete",{data:k,requestType:"appointmentResize"}),this._appMainId=this._sortAppById(this._processed)[this._processed.length-1].AppTaskId,!t.isNullOrUndefined(E)&&e.isFunction(E.promise)&&this.dataSource()instanceof t.DataManager&&(q=this,E.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&q._processUrlBinding(i)}),E.fail(function(){q._renderAppointmentAll()}))}if(Y&&t.isNullOrUndefined(this._appointmentSettings.resourceFields)||Y&&!this._groupEditing){for(V=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,k.Guid)),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:V},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:V},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:V},"Guid"),z=0;z<V.length;z++)this._appointmentRemove(V[z]);for(this._appointmentProcessing(k),this._currentViewAppointments=this.getCurrentViewAppointments(),n=0,j=(we=this._currentViewAppointments.filter(function(e){return e.ParentId==k.ParentId})).length;n<j;n++)this._refreshDayAppointments(we[n])}else if(this._groupEditing)for(new t.DataManager(this._currentAppointmentData).update(this._appointmentSettings.id,U),P=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,k[this._appointmentSettings.id])),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:P},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:P},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:P},"Guid"),this._appointmentProcessing(k),this._currentViewAppointments=this.getCurrentViewAppointments(),n=0,j=(we=this._currentViewAppointments.filter(function(e){return e.ParentId==k.ParentId})).length;n<j;n++)this._refreshDayAppointments(we[n]);else new t.DataManager(this._processed).update("Guid",k),new t.DataManager(this._renderedApp).remove("Guid",k),new t.DataManager(this._renderedAllDay).remove("Guid",k);for(this._currentViewAppointments=this.getCurrentViewAppointments(),n=0,j=(we=this._groupEditing?this._currentViewAppointments.filter(function(e){return e[this._appointmentSettings.id]==k[this._appointmentSettings.id]}):this._currentViewAppointments.filter(function(e){return e.Guid==k.Guid})).length;n<j;n++)this._refreshDayAppointments(we[n]);this._trigger("actionComplete",{data:k,requestType:"appointmentResize"}),this._appMainId=this._sortAppById(this._processed)[this._processed.length-1].AppTaskId,!t.isNullOrUndefined(E)&&e.isFunction(E.promise)&&this.dataSource()instanceof t.DataManager&&(q=this,E.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&q._processUrlBinding(i)}),E.fail(function(){q._renderAppointmentAll()}))}else this._renderAppointmentAll()}this.element.find("div.e-tophandle,div.e-bottomhandle").removeClass("e-rowcursor"),this.element.find("div.e-lefthandle,div.e-righthandle").removeClass("e-columncursor")}catch(n){}},_dragdropAppointments:function(){var i,n,s;if(this.model.readOnly)return!1;this._topResizing=!1,this._bottomResizing=!1,this._leftResizing=!1,this._rightResizing=!1,n="vertical"==this.model.orientation?"div.e-draggableworkarea":"table.e-workcellstab",this.model.allowDragAndDrop&&(s=this,this.element.find(".e-appointment").ejDraggable({handle:".e-appointment",dragOnTaphold:!!s._mediaQuery,dragArea:""==s.model.appointmentDragArea?s.element.find(n,".e-headrealldaytable tr"[t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?1:this._grouping.length+1]):e(s.model.appointmentDragArea),cursorAt:""==s.model.appointmentDragArea?{top:0,left:0}:{top:-40,left:-40},dragStart:function(e){s._dragStart(e)},drag:function(e){s._dragOver(e);var i=t.widgetBase.droppables[this.model.scope].helper;0===e.event.pageX&&"mousemove"===e.event.type&&(e.event.pageX=1),""==s.model.appointmentDragArea&&s._updatePosition(e,this,i)},dragStop:function(e){s._dragStop(e)},helper:function(t){return i=e(t.sender.target).hasClass("e-appointment")?e(t.sender.target):e(t.sender.target).parents(".e-appointment"),s._appointElement(i,s)}}),this.element.find(".e-alldayappointment").ejDraggable({handle:".e-alldayappointment",dragOnTaphold:!!s._mediaQuery,dragArea:""==s.model.appointmentDragArea?s.element:e(s.model.appointmentDragArea),cursorAt:{top:17,left:0},dragStart:function(e){s._dragStart(e)},drag:function(e){s._dragOver(e);var i=t.widgetBase.droppables[this.model.scope].helper;0===e.event.pageX&&"mousemove"===e.event.type&&(e.event.pageX=1),""==s.model.appointmentDragArea&&s._updatePosition(e,this,i)},dragStop:function(e){s._dragStop(e)},helper:function(t){return i=e(t.sender.target).hasClass("e-alldayappointment")?e(t.sender.target):e(t.sender.target).parents(".e-alldayappointment"),s._appointElement(i,s)}}),this.element.find(".e-monthappointment").ejDraggable({handle:".e-monthappointment",dragOnTaphold:!!s._mediaQuery,dragArea:""==s.model.appointmentDragArea?s.element.find(n):e(s.model.appointmentDragArea),cursorAt:""==s.model.appointmentDragArea?{top:0,left:0}:{top:-20,left:10},dragStart:function(e){s._dragStart(e)},drag:function(e){s._dragOver(e);var i=t.widgetBase.droppables[this.model.scope].helper;0===e.event.pageX&&"mousemove"===e.event.type&&(e.event.pageX=1),""==s.model.appointmentDragArea&&s._updatePosition(e,this,i)},dragStop:function(e){s._dragStop(e)},helper:function(t){return i=e(t.sender.target).hasClass("e-monthappointment")?e(t.sender.target):e(t.sender.target).parents(".e-monthappointment"),s._appointElement(i,s)}}))},_updatePosition:function(e,t,i){var n,s;"horizontal"==this.model.orientation&&"horizontal"==this._customOrientation&&((n=e.element.offsetParent().find(".e-scroller").ejScroller("instance")).scrollLeft()>0&&n.scrollLeft()+this.element.find(".e-draggableworkarea").width()!==this.element.find(".e-workcellstab").width()?(s=i.offsetParent().offset(),e.position.left=t.position.left-[s.left+t["border-left-width"]]):t._pageX-this.element.find(".e-draggableworkarea").offset().left>this.element.find(".e-draggableworkarea").width()-this.cellWidth&&(e.position.left=e.element[0].offsetLeft),n.scrollLeft()>0&&n.scrollLeft()+e.element[0].offsetLeft+e.element[0].offsetWidth>this.element.find(".e-workcellstab").width()&&(e.position.left=this.element.find(".e-draggableworkarea").width()-e.element[0].offsetWidth),t.position.top+e.element[0].offsetHeight-this.element.find(".e-draggableworkarea").offset().top>this.element.find(".e-draggableworkarea").height()&&(e.position.top=this.element.find(".e-draggableworkarea").height()-e.element[0].offsetHeight))},_appointElement:function(t,i){var n,s="vertical"==i.model.orientation&&"vertical"==i._customOrientation&&t.hasClass("e-appointment")?.85*t.closest("td").width():t.width();return t.find(".e-schedulemouseclose").removeClass("e-schedulemouseclose e-icon"),t.find(".e-tophandle").removeClass("e-tophandle e-appointresizer-top e-icon e-nsexpand"),t.find(".e-bottomhandle").removeClass("e-bottomhandle e-appointresizer-bottom e-icon e-nsexpand"),t.find(".e-lefthandle").removeClass("e-lefthandle e-appointresizer-left e-icon e-ewexpand"),t.find(".e-righthandle").removeClass("e-righthandle e-appointresizer-right e-icon e-ewexpand"),t.clone().prop("id","cloneElement").appendTo(t.parent()),t.css("cursor","move"),n="vertical"==this.model.orientation?i.element:i.element.find(".e-worktable .e-scroller"),""==i.model.appointmentDragArea?t.addClass("e-draggableAppointment e-scheduleAppGlassy").removeClass("e-schedulemouseclose e-tophandle e-bottomhandle").css("width",s+"px").appendTo(n):t.addClass("e-draggableAppointment e-scheduleAppGlassy").removeClass("e-schedulemouseclose e-tophandle e-bottomhandle").css("width",s+"px").appendTo(e(document.body))},_dragStart:function(i){var n,s,r,a,o,l;if(e(i.element[0]).hasClass("e-appointment")||e(i.element[0]).hasClass("e-monthappointment")||e(i.element[0]).hasClass("e-alldayappointment")){if(this._tooltipEvents("disable"),(this._mediaQuery||t.isMobile())&&this._off(this.element,"tap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment"),n=this._curDragElmt=i.element,s=this._appointmentSettings,this._appUid=e(i.element[0]).attr("data-guid"),a=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))),(this._groupEditing||this._groupEdit)&&(this._groupAppId=a[0].ParentId,this._groupRes=a[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()],this._appointmentSettings.resourceFields.split(",").length>1&&(this._groupRess=a[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2].trim()]),a[0][this._appointmentSettings.recurrence]&&(this._recStart=a[0][this._appointmentSettings.startTime])),this._dragApp=this._recurrenceAppSort(a),a[0][this._appointmentSettings.recurrence]&&!this._groupEditing&&(this._recAppGuid=this._appUid,this._recAppId=a[0].AppTaskId),a.length>1?((o=e.extend(!0,[],a))[0][s.endTime]=o[o.length-1][s.endTime],r=o[0]):r=a[0],l={target:n,appointment:r},this._trigger("actionBegin",{data:l,requestType:"appointmentDrag"})||this._trigger("dragStart",l))return i.cancel=!0,e(document.body).find(".e-scheduleAppGlassy").length>0&&e(document.body).find(".e-scheduleAppGlassy").remove(),this._renderAppointmentAll(),this._tooltipEvents("enable"),(this._mediaQuery||t.isMobile())&&this._on(this.element,"tap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment",e.proxy(this._appointmentWindow,this)),!1}else i.cancel=!0;!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close"))},_dragOver:function(i){var n,s,r,a,o,l,d,h,p,m,c;if(this.element.find(".e-draggableworkarea")[0].offsetWidth>i.element[0].offsetWidth){n={target:e(i.element),interval:10,timeDelay:3e3,scrollBy:15},t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("hide"),this.element.find(".e-workcells").removeClass("e-selectedCell").removeClass("e-mousehover"),this._trigger("drag",n),this._dragInterval=n.interval,this._scrollBy=n.scrollBy,this._timeDelay=n.timeDelay;var u=this.element.find("#"+this._id+"_scroller").ejScroller("instance"),g=this.element.find(".e-draggableworkarea").offset().top,_=this.element.find(".e-draggableworkarea").offset().left,f=Math.round(_+this.element.find(".e-draggableworkarea").width()),w=Math.round(g+this.element.find(".e-draggableworkarea").height()),D=this,S=i.event;function y(e){u.isHScroll()&&("left"==e&&D.element.find("#"+D._id+"_scroller").ejScroller({scrollLeft:u.scrollLeft()-D._scrollBy}),"right"==e&&D.element.find("#"+D._id+"_scroller").ejScroller({scrollLeft:u.scrollLeft()+D._scrollBy}))}if(this.element.find(".e-draggableworkarea").height()>e(window).height()&&u._vScroll&&(i.element.offset().top<=e(window).scrollTop()?window.scrollBy(0,-this._scrollBy):Math.round(i.element.offset().top+i.element.outerHeight())>=e(window).scrollTop()+e(window).height()&&window.scrollBy(0,this._scrollBy)),this.element.find(".e-draggableworkarea").width()>e(window).width()&&u._hScroll&&(i.element.offset().left<=e(window).scrollLeft()?window.scrollBy(-this._scrollBy,0):Math.round(i.element.offset().left+i.element.outerWidth())>=e(window).width()-(i.element.offset().left+i.element.outerWidth())&&window.scrollBy(this._scrollBy,0)),u.isVScroll()&&(g==i.element.offset().top?this.element.find("#"+this._id+"_scroller").ejScroller({scrollTop:u.scrollTop()-this._scrollBy}):w<=Math.round(i.element.offset().top+i.element.outerHeight())&&this.element.find("#"+this._id+"_scroller").ejScroller({scrollTop:u.scrollTop()+this._scrollBy})),_+D.cellwidth>S.pageX&&_<S.pageX?t.isNullOrUndefined(this._autoScroll)&&(s=this.model.enableRTL?"right":"left",this._autoScroll=window.setInterval(y,1,s)):f-D.cellwidth<S.pageX&&f>S.pageX?t.isNullOrUndefined(this._autoScroll)&&(s=this.model.enableRTL?"left":"right",this._autoScroll=window.setInterval(y,1,s)):(clearInterval(this._autoScroll),this._autoScroll=null),"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.model.timeScale.enable&&this.model.showAllDayRow&&this._curDragElmt.hasClass("e-alldayappointment")){var v=(this.model.timeScale.enable?this.element.find(".e-scrolltimecells").width():0)+this.element.offset().left+1>=parseInt(this._curDragElmt.css("left")),C=this.element.width()+this.element.offset().left<=this._curDragElmt.width()+parseInt(this._curDragElmt.css("left"))+(this.element.find("#"+this._id+"_scroller").data("ejScroller").isVScroll()?18:0),T=this._curDragElmt.find(".e-leftind").length;v?this.element.offset().left+(this.element.find(".e-leftindenttable").length>0?this.element.find(".e-leftindenttable").width():0)>=parseInt(this._curDragElmt.css("left"))&&(a=(a=Math.floor(i.event.clientX/this.element.find(".e-alldaycells").width()))<1?1:a,o=this.element.find(".e-alldaycells").width()*a-a,this._curDragElmt.css({width:o})):C?(r=this.element.width()+this.element.offset().left,a=(a=this._dateRender.length-Math.floor(i.event.clientX/this.element.find(".e-alldaycells").width()))<1?1:a,o=this.element.find(".e-alldaycells").width()*a-a,this._curDragElmt.css({width:o,left:r-o})):T>0&&(o=Math.floor(i.event.clientX/this.element.find(".e-alldaycells").width())*this.element.find(".e-alldaycells").width(),l=this.element.offset().left+(this.model.timeScale.enable?this.element.find(".e-scrolltimecells").width():0),this._curDragElmt.css({width:o,left:l}))}if("month"!=this.currentView()&&!this._isCustomMonthView()&&(e(i.element[0]).hasClass("e-appointment")||!t.isNullOrUndefined(i.target)&&!t.isNullOrUndefined(i.target.className)&&i.target.className.indexOf("e-workcells")>-1)&&this._dragAppointmentCurrentTime(i),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&0!=this._tempResource.length&&0!=this._grouping.length){if(i.element.css("pointer-events","none"),this.model.group.resources.length>1){var b=document.elementFromPoint(i.element.offset().left,i.element.offset().top),R=e(b).closest(".e-workcells").parent().index(),A=e(this.element.find(".e-resourceheadertable tr")[R]).children();if(A.hasClass("e-parentnode")&&e(A.children()[0]).hasClass("e-resourceexpand")){for(e(A.children()[0]).removeClass("e-resourceexpand").addClass("e-resourcecollapse"),d=e(A.children()[0]).attr("id").split("_")[0],h=new t.DataManager(this.res1).executeLocal((new t.Query).where(this._tempResource[this._tempResource.length-1].resourceSettings.groupId,t.FilterOperators.equal,d)),p=0;p<h.length;p++)m=R+p+1,e(this.element.find(".e-resourceheadertable tr")[m]).is(":hidden")&&(e(this.element.find(".e-resourceheadertable tr")[m]).toggle(),e(this.element.find(".e-workcellstab tr")[m]).toggle());this.element.find(".e-horires").height(this.element.find(".e-draggableworkarea").height()),this._horizontalRender(),this.model.cellHeight&&this._reRenderScroller(),this._horizontalResIcon()}}i.element.css("pointer-events","")}if(!this.model.enableLoadOnDemand||!(this.dataSource()instanceof t.DataManager)){D=this,e(i.element[0]).hasClass("e-monthappointment")&&this._monthdrag(i),t.isNullOrUndefined(this._dragCountPrev)&&(this._Prevstart=Date.now(),this._dragCountPrev=window.setInterval(function(){var i,n,s,r;D._Prevend=Date.now(),(i=new Date(D._Prevstart).getSeconds()+parseInt(D._timeDelay/1e3))>=60&&(i-=60);var a=i==new Date(D._Prevend).getSeconds(),o=(D.model.timeScale.enable?"horizontal"==D.model.orientation||"horizontal"==D._customOrientation?D.element.offset().left+1:D.element.find(".e-scrolltimecells").width()+D.element.offset().left+1:D.element.offset().left+1)>=parseInt(D.element.find(".e-scheduleAppGlassy").css("left"));return o="horizontal"!=D.model.orientation&&"horizontal"!=D._customOrientation||!D.model.timeScale.enable?o:new Date(D._dateRender[0]).getDate()==D._dragNewStartTime.getDate()&&new Date(D._dateRender[0]).getHours()==D._dragNewStartTime.getHours(),!t.isNullOrUndefined(D._dragNewStartTime)&&((t.isNullOrUndefined(D._appointmentSettings.resourceFields)||1!=D.model.resources[D.model.resources.length-1].allowGroupEdit)&&1!=D._groupEdit||(D._groupAutoDrag=!0),o&&a?(D._dragWeek=!0,D.currentDate(D._nextPrevDate("navigateprevious")),D._navigateClick(null,"Previous"),t.isNullOrUndefined(D._recAppGuid)||((n=D._sortAppById(new t.DataManager(D._processed).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,D._recAppId))))[0].Guid=D._recAppGuid,new t.DataManager(D._processed).update("AppTaskId",n[0])),s=new Date(D._dateRender[0]),r=new Date(D._dateRender[0]),s.setHours(D._dragNewStartTime.getHours(),D._dragNewStartTime.getMinutes(),D._dragNewStartTime.getSeconds()),r.setHours(D._dragNewEndTime.getHours(),D._dragNewEndTime.getMinutes(),D._dragNewEndTime.getSeconds()),D._dragNewStartTime=new Date(s),D._dragNewEndTime=new Date(r),D._Prevstart=D._Nextstart=D._Prevend,D._Prevend=Date.now(),""==D.model.appointmentDragArea?D._curDragElmt.appendTo(D.element):D._curDragElmt.appendTo(e(document.body))):void 0)},D._timeDelay)),t.isNullOrUndefined(this._dragCountNext)&&(this._Nextstart=Date.now(),this._dragCountNext=window.setInterval(function(){var i,n,s,r,a,o;D._Nextend=Date.now(),(i=new Date(D._Nextstart).getSeconds()+parseInt(D._timeDelay/1e3))>=60&&(i-=60);var l=i==new Date(D._Nextend).getSeconds(),d=e("#"+D._id+"_scroller").ejScroller("instance").isVScroll();return(t.isNullOrUndefined(D._appointmentSettings.resourceFields)||1!=D.model.resources[D.model.resources.length-1].allowGroupEdit)&&1!=D._groupEdit||(D._groupAutoDrag=!0),n=1==d?D.element.find(".e-scheduleAppGlassy").width()+parseInt(D.element.find(".e-scheduleAppGlassy").css("left"))-D.element.offset().left+25:D.element.find(".e-scheduleAppGlassy").width()+parseInt(D.element.find(".e-scheduleAppGlassy").css("left"))-D.element.offset().left+6,s=D.element.width()<=n,s="horizontal"!=D.model.orientation&&"horizontal"!=D._customOrientation||!D.model.timeScale.enable?s:new Date(D._dateRender[D._dateRender.length-1]).getDate()==D._dragNewEndTime.getDate()&&s,!t.isNullOrUndefined(D._dragNewStartTime)&&(s&&l?(D._dragWeek=!0,D.currentDate(D._nextPrevDate("navigatenext")),D._navigateClick(null,"Next"),t.isNullOrUndefined(D._recAppGuid)||((r=D._sortAppById(new t.DataManager(D._processed).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,D._recAppId))))[0].Guid=D._recAppGuid,new t.DataManager(D._processed).update("AppTaskId",r[0])),a=new Date(D._dateRender[D._dateRender.length-1]),o=new Date(D._dateRender[D._dateRender.length-1]),a.setHours(D._dragNewStartTime.getHours(),D._dragNewStartTime.getMinutes(),D._dragNewStartTime.getSeconds()),o.setHours(D._dragNewEndTime.getHours(),D._dragNewEndTime.getMinutes(),D._dragNewEndTime.getSeconds()),D._dragNewStartTime=new Date(a),D._dragNewEndTime=new Date(o),D._Nextstart=D._Prevstart=D._Nextend,D._Nextend=Date.now(),""==D.model.appointmentDragArea?D._curDragElmt.appendTo(D.element):D._curDragElmt.appendTo(e(document.body))):void 0)},D._timeDelay))}}else i.element.width(this.element.find(".e-draggableworkarea").width()),c=this._processed.filter(function(e){return e.Guid==i.element.attr("data-guid")}),this._dragNewStartTime=new Date(c[0][this._appointmentSettings.startTime]),this._dragNewEndTime=new Date(c[c.length-1][this._appointmentSettings.endTime])},_monthdrag:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w=this._appointmentSettings,D=this.element.find(".e-draggableworkarea"),S=new Date(this._dragApp[0][w.startTime]),y=new Date(this._dragApp[0][w.endTime]);if("vertical"==this.model.orientation&&"vertical"==this._customOrientation){var v=e.extend(!0,{},this._dragApp),C=(w=this._appointmentSettings,D=this.element.find(".e-draggableworkarea"),Math.ceil((v[w.endTime]-v[w.startTime])/36e5)<24&&v[w.endTime].getDay()!=v[w.startTime].getDay());this._dragApp[0][w.recurrence]&&-1==this._dragApp[0][w.recurrenceRule].toString().indexOf("RECUREDITID")&&(S=this._dragApp[0][w.startTime],y=this._dragApp[this._dragApp.length-1][w.endTime]),n=(l=new Date(new Date(this.model.currentDate).getFullYear(),new Date(this.model.currentDate).getMonth(),1)).getDay(),l.setDate(l.getDate()-n),"month"==this.currentView()||"customview"==this.currentView()&&!this._oneWeek?(c=Math.round((e(i.element[0]).offset().left+D.scrollLeft()-D.offset().left)/this.element.find(".e-monthcells").eq(1).outerWidth()),c=this.model.enableRTL?6-c:c):(s=t.isNullOrUndefined(this.model.group)?this._dateRender.length:this._dateRender.length*this.res1.length,c=parseInt((e(i.element[0]).offset().left-D.offset().left)/Math.round(D.width()/s))),C&&parseInt(i.element.attr("id").split("_")[1])==this._dragApp[this._dragApp.length-1].AppTaskId&&(c-=1),r=parseInt((e(i.element[0]).offset().top+D.scrollTop()-D.offset().top)/this.element.find(".e-monthcells").outerHeight()),this.model.showOverflowButton||(r=this._findRowIndex(i)),a="month"==this.currentView()||this._isCustomMonthView()&&!this._oneWeek?this.model.showWeekend?7:this.model.workWeek.length:this._dateRender.length,o=this.model.enableRTL?r*a+(c-Math.floor(c/a)*a)-(y.getDay()-S.getDay()):r*a+(c-Math.floor(c/a)*a),l=new Date(new Date(this._dateRender[o]).setHours(S.getHours(),S.getMinutes(),S.getSeconds()))}else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&(l=cellstrtime=this._dragNewStartTime,d=cellendtime=this._dragNewEndTime,this.element.find(".e-appointment,.e-monthappointment").css({"pointer-events":"none"}),h=this.model.enableRTL?document.elementFromPoint(e(i.element[0]).offset().left,e(i.element[0]).offset().top-1).cellIndex-Math.round(e(i.element[0]).width()/30-1):Math.round((e(i.element[0]).offset().left+D.scrollLeft()-D.offset().left)/this.element.find(".e-workcells").eq(1).outerWidth()),this.element.find(".e-appointment,.e-monthappointment").css({"pointer-events":"visible"}),p=parseInt((e(i.element[0]).offset().top+D.scrollTop()-D.offset().top)/this.element.find(".e-workcells")[0].offsetHeight),this.model.showOverflowButton?this.element.find(".e-resourceheadertable .e-resourceexpand").length>0&&(p+=e(this.element.find(".e-resourceheadertable").find("tr").filter(function(){return"none"!==e(this).css("display")})[p]).prevUntil("table.e-resourceheadertable").filter(function(){return"none"==e(this).css("display")}).length):p=this._findRowIndex(i),m=e(this.element.find(".e-workcellstab tr")[p]).find("td")[h],c=p,e(m).hasClass("e-resourceheadercells")||t.isNullOrUndefined(m)||(this._cellIndex=this.model.enableRTL?this.element.find(".e-workcells").length-Math.floor(e(i.element[0]).offset().left/this.element.find(".e-workcells").width()):Math.floor((e(i.element[0]).offset().left+D.scrollLeft()-D.offset().left)/this.element.find(".e-workcells").width()),e(i.element[0]).hasClass("e-monthappointment")&&(this._dragApp[0][w.recurrence]&&-1==this._dragApp[0][w.recurrenceRule].toString().indexOf("RECUREDITID")?(S=this._dragApp[0][w.startTime],y=this._dragApp[0][w.endTime]):this._dragApp[0][w.recurrence]&&this._dragApp[0][w.recurrenceRule].toString().indexOf("RECUREDITID")>0&&(S=this._dragApp[0][w.startTime],y=this._dragApp[0][w.endTime]),l=new Date(this.monthDays[h]),"month"!=this.currentView()&&(this._cellIndex>0?(Math.floor(i.element[0].offsetWidth/this.CellWidth)+this._cellIndex==this._dateRender.length&&l.setHours(S.getHours()+24,S.getMinutes(),S.getSeconds()),l.setHours(S.getHours(),S.getMinutes(),S.getSeconds())):l.setHours(S.getHours()-24,S.getMinutes(),S.getSeconds()),l.setHours(S.getHours(),S.getMinutes(),S.getSeconds())))));if(Math.ceil((this._dragApp[0][w.endTime]-this._dragApp[0][w.startTime])/36e5)>24?(u=new t.DataManager(this._processed).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,parseInt(i.element.attr("id").split("_")[1]))),g=new Date(u[0][w.startTime])-new Date(this._dragApp[0][w.startTime]),cellstrtime=new Date(l-g),l&&(_=l.getTime()-new Date(S).getTime()-new Date(g).getTime())):(cellstrtime=new Date(l),_=l.getTime()-new Date(S).getTime()),d=new Date(new Date(y).getTime()+_),cellendtime=new Date(d),cellendtime.getHours()==this.model.endHour&&cellendtime.getMinutes()>0||cellendtime.getHours()>this.model.endHour||cellendtime.getHours()==this.model.startHour&&cellendtime.getMinutes()<0||cellendtime.getHours()<this.model.startHour){var T=new Date(cellendtime),b=this._dateRender.indexOf(new Date(T).setHours(0,0,0)),R=60*(this.model.endHour-this.model.startHour);cellendtime.getHours()>=this.model.endHour||T.getDate()!=cellendtime.getDate()?(f=60*(T.getHours()-this.model.endHour),(f=(f=0===T.getMinutes()?f:T.getMinutes()+f)<0?0:f)>R&&(f%=R),(b+=Math.floor(f/R))>=this._dateRender.length?(b=this._dateRender.length-1,cellendtime.setDate(new Date(this._dateRender[b]).getDate()),cellendtime.setHours(this.model.endHour,0,0)):(cellendtime.setDate(new Date(this._dateRender[b]).getDate()),cellendtime.setHours(this.model.startHour,0,0),cellendtime.setMinutes(f))):(cellendtime.getHours()<this.model.startHour||T.getDate()!=cellendtime.getDate())&&(this._resizeflag=!0,f=60*(this.model.startHour-T.getHours()),(f=0===T.getMinutes()?f:f-T.getMinutes())>R&&(f%=R),b=(b-=Math.ceil(f/R))<0?0:b,cellendtime.setDate(new Date(this._dateRender[b]).getDate()),cellendtime.setHours(this.model.endHour,0,0),cellendtime.setMinutes(-f))}if(cellstrtime.getHours()<this.model.startHour){var A=new Date(l);T=new Date(d),b=this._dateRender.indexOf(new Date(A).setHours(0,0,0)),R=60*(this.model.endHour-this.model.startHour);l.setDate(A.getDate()),l.getHours()<this.model.startHour||A.getDate()!=l.getDate()?(f=60*(this.model.startHour-A.getHours()),(f=(f=0===A.getMinutes()?f:f-A.getMinutes())<0?0:f)>R&&(f%=R),(b-=Math.ceil(f/R))<0?(b=0,l.setDate(new Date(this._dateRender[b]).getDate()),l.setHours(this.model.startHour,0,0)):(l.setDate(new Date(this._dateRender[b]).getDate()),l.setHours(this.model.endHour,0,0),l.setMinutes(-f))):(l.getHours()>=this.model.endHour||A.getDate()!=l.getDate())&&(this._resizeflag=!0,f=60*(this.model.endHour-A.getHours()),(f=0===A.getMinutes()?f:f-A.getMinutes())>R&&(f%=R),b=(b+=Math.ceil(f/R))>=this._dateRender.length?this._dateRender.length-1:b,l.setDate(new Date(this._dateRender[b]).getDate()),l.setHours(this.model.startHour,0,0),l.setMinutes(f))}return this._dragNewStartTime=cellstrtime,this._dragNewEndTime=cellendtime,this.model.orientation==t.Schedule.Orientation.Vertical&&"vertical"==this._customOrientation&&(c="month"==this.currentView()||"customview"==this.currentView()&&!this._oneWeek?Math.round((e(i.element[0]).offset().left+D.scrollLeft()-D.offset().left)/this.element.find(".e-monthcells").eq(1).outerWidth()):parseInt((e(i.element[0]).offset().left-D.offset().left)/Math.round(D.width()/s))),c},_dragStop:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b,R,A,I,k,x,O,M,N,H,W,E,L,U,F,V,z,P,j,q,B,G,Q,Y,Z,K,X,J,$,ee,te,ie,ne,se,re,ae,oe,le,de,he,pe,me,ce,ue,ge,_e;clearInterval(this._dragCountPrev),clearInterval(this._dragCountNext),clearInterval(this._autoScroll),"month"!=this.currentView()&&!this._isCustomMonthView()&&(e(i.element[0]).hasClass("e-appointment")||!t.isNullOrUndefined(i.target)&&!t.isNullOrUndefined(i.target.className)&&i.target.className.indexOf("e-workcells")>-1)&&this._dragAppointmentCurrentTime(i),this._dragCountPrev=this._dragCountNext=this._autoScroll=null,this._dragWeek=!1,(this._mediaQuery||t.isMobile())&&this._on(this.element,"tap",".e-appointment,.e-alldayappointment,div.e-monthappointment,.e-agendaappointment",e.proxy(this._appointmentWindow,this)),this._tooltipEvents("enable"),!t.isNullOrUndefined(this._quickAppDetailsWindow)&&this.model.showQuickWindow&&this._quickAppDetailsWindow.ejDialog("close");var fe=this,we=this._appointmentSettings,De=this.element.find(".e-draggableworkarea");if(this._appUid=i.element.attr("data-guid"),this._groupAutoDrag){if((n=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,this._groupAppId))))[0].Recurrence)for(s=0;s<n.length;s++)n[s][this._appointmentSettings.startTime].toString()==this._recStart.toString()&&(this._appUid=n[s].Guid,n[0]=n[s]);else for(s=0;s<n.length;s++)n[s][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]==this._groupRes&&(this._appUid=n[s].Guid,n[0]=n[s]);(r=[]).push(n[0])}else r=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)));if(a=e.extend(!0,{},r[0]),this.tempResApp=r[0],r.length>1&&!r[0][we.recurrence]?(o=!0,ee=this._groupEditing||this._groupEdit?new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,r[0].ParentId)):new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0]):(o=r.length>1,(l=e.extend(!0,[],r))[0][we.endTime]=l[l.length-1][we.endTime],ee=r[0][we.recurrence]&&-1==r[0][we.recurrenceRule].toString().indexOf("RECUREDITID")?this._getAppointmentByParentId(this._appUid):r[0][we.recurrence]?r.length>1?l[0]:r[0]:this._getAppointmentByParentId(this._appUid)),(t.isNullOrUndefined(this._dragNewStartTime)||t.isNullOrUndefined(this._dragNewEndTime)||("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&("month"==this.currentView()||this._isCustomMonthView())&&0!=r.length&&fe._dragWeek)&&(this._dragNewStartTime=new Date(r[0][this._appointmentSettings.startTime]),this._dragNewEndTime=new Date(r[r.length-1][this._appointmentSettings.endTime])),d=e.extend(!0,{},ee),Math.ceil((d[we.endTime]-d[we.startTime])/36e5)<24&&d[we.endTime].getDay()!=d[we.startTime].getDay(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation)if(e(i.element[0]).hasClass("e-appointment"))h=m=this._dragNewStartTime,p=c=this._dragNewEndTime,(!t.isNullOrUndefined(i.target.className)&&i.target.className.indexOf("e-alldaycells")>-1||Math.ceil((this._dragNewEndTime.getTime()-this._dragNewStartTime.getTime())/36e5)>=24)&&(u=!0,m=new Date(m.setHours(0,0,0,0)),c=new Date(c.setHours(23,59,59,59))),Se=Math.round((e(i.element[0]).offset().left+De.scrollLeft()-De.offset().left)/this.element.find(".e-workcells").eq(1).outerWidth());else if(e(i.element[0]).hasClass("e-alldayappointment"))if(!t.isNullOrUndefined(i.target)&&!t.isNullOrUndefined(i.target.className)&&i.target.className.indexOf("e-workcells")>-1)Se=i.target.cellIndex,m=this._dragNewStartTime,c=this._dragNewEndTime,u=!1,this._allDayDrag=!0;else{h=new Date(ee[we.startTime]),p=new Date(ee[we.endTime]),r[0][we.recurrence]&&-1==r[0][we.recurrenceRule].toString().indexOf("RECUREDITID")&&(h=new Date(r[0][we.startTime]),p=new Date(r[0][we.endTime]));var Se=Math.round((e(i.element[0]).offset().left+De.scrollLeft()-De.offset().left)/this.element.find(".e-workcells").eq(1).outerWidth()),ye=(Math.round(e(i.element[0]).width()/(this.element.find(".e-alldaycells").width()+1)),Math.ceil((p-h)/864e5),Math.round(e(i.element[0]).width()/(this.element.find(".e-alldaycells").width()+1)),"week"===this.currentView()?7:"workweek"===this.currentView()?this.model.workWeek.length:"customview"==this.currentView()?this._renderDays:1),ve=new Date(h),Ce=!0;-1==this._dateRender.indexOf(new Date(ve).setHours(0,0,0))?(g=Math.ceil(this.element.find("#cloneElement").width()/this.element.find(".e-alldaycells").width())-Math.ceil(i.element.width()/this.element.find(".e-alldaycells").width()),h.setDate(h.getDate()-g),p.setDate(p.getDate()-g),Ce=!1,m=new Date(h)):(h=new Date(this._dateRender[Se]),(p=new Date(this._dateRender[Se])).setHours(ee[we.endTime].getHours(),ee[we.endTime].getMinutes(),ee[we.endTime].getSeconds()),(_=Math.ceil(this.element.find("#cloneElement").width()/this.element.find(".e-alldaycells").width()))!=(f=Math.ceil(i.element.width()/this.element.find(".e-alldaycells").width()))&&(w=this.element.offset().left+(this.element.find(".e-leftindenttable").length>0?this.element.find(".e-leftindenttable").width():0)>=parseInt(i.element.css("left"))?_-f:0,h.setDate(h.getDate()-w),Ce=!1,m=new Date(h))),Se<0&&Ce?h<=new Date(this._dateRender[0])?((m=new Date(h)).setDate(m.getDate()+Se),m.setHours(new Date(ee[we.startTime]).getHours(),new Date(ee[we.startTime]).getMinutes()),m=new Date(m)):((D=new Date(this._dateRender[0])).setDate(D.getDate()+Se),D.setHours(new Date(ee[we.startTime]).getHours(),new Date(ee[we.startTime]).getMinutes()),m=new Date(D)):Ce&&(h<new Date(this._dateRender[0])?(S=Se>ye-1?Se%ye:Se,S=this.model.enableRTL?this._dateRender.length-1-S:S,this._resWorkWeek||this._resCustomView?h=new Date(new Date(this._dateRender[Se])):h.setDate(new Date(ee[fe._appointmentSettings.startTime]).getDate()+S),h.setHours(new Date(ee[we.startTime]).getHours(),new Date(ee[we.startTime]).getMinutes()),m=new Date(h)):(S=Se>ye-1?Se%ye:Se,S=this.model.enableRTL?this._dateRender.length-1-S:S,(m=this._resWorkWeek||this._resCustomView?new Date(new Date(this._dateRender[Se])):new Date(new Date(this._dateRender[S]))).setHours(new Date(ee[we.startTime]).getHours(),new Date(ee[we.startTime]).getMinutes()))),y=new Date(m),v=new Date(ee[we.endTime]).getTime()-new Date(ee[we.startTime]).getTime(),c=new Date(new Date(y).setMilliseconds(v))}else e(i.element[0]).hasClass("e-monthappointment")&&(Se=this._monthdrag(i),h=m=this._dragNewStartTime,p=c=this._dragNewEndTime);else("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&(Se=this._monthdrag(i),h=m=this._dragNewStartTime,p=c=this._dragNewEndTime);if(this.model.orientation==t.Schedule.Orientation.Horizontal&&r[0][we.allDay]&&this.res1.length>1&&!(this.currentView()==t.Schedule.CurrentView.Month||this._isCustomMonthView())&&(m=new Date(r[0][we.startTime]),c=new Date(r[0][we.endTime])),b=!0,C=!!((C=this.element.find(".e-resourceheadertable .e-horizontresheaderdiv").eq(Se).children().hasClass("e-parentnode"))&&Se>0),this._grouping.length>0&&(I=e.extend(!0,{},r[0]),I=Se>=0?this._getDragDropResourceData(this,Se,I):I,T=this._appointmentSettings.resourceFields.split(","),b=I[this._appointmentSettings.resourceFields.split(",")[T.length-1]]==r[0][this._appointmentSettings.resourceFields.split(",")[T.length-1]]),b&&!t.isNullOrUndefined(h)&&new Date(h).getTime()==new Date(this._dragApp[0][we.startTime]).getTime()&&new Date(p).getTime()==new Date(this._dragApp[this._dragApp.length-1][we.endTime]).getTime()||C){if(this.element.find("#cloneElement").length>0){var Te=this._curDragElmt.clone(),be="12"==this._timeMode?t.format(r[0][we.startTime],this._pattern.t,this.model.locale):t.format(r[0][we.startTime],"HH:mm",this.model.locale),Re="12"==this._timeMode?t.format(r[0][we.endTime],this._pattern.t,this.model.locale):t.format(r[0][we.endTime],"HH:mm",this.model.locale);Te.find(".e-apptime").remove(),Te.find(".e-appointinnertext").append(e("<div class='e-apptime'>"+be+" - "+Re+"</div>")),this.model.enableRTL?Te.removeClass("e-draggableAppointment e-scheduleAppGlassy").css({width:"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("#cloneElement").outerWidth():this.element.find("#cloneElement").width(),height:"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("#cloneElement").outerHeight():this.element.find("#cloneElement").height(),top:this.element.find("#cloneElement").css("top"),right:this.element.find("#cloneElement").css("right"),cursor:""}):Te.removeClass("e-draggableAppointment e-scheduleAppGlassy").css({width:"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("#cloneElement").outerWidth():this.element.find("#cloneElement").width(),height:"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find("#cloneElement").outerHeight():this.element.find("#cloneElement").height(),top:this.element.find("#cloneElement").css("top"),left:this.element.find("#cloneElement").css("left"),cursor:""}),!this.model.timeScale.enable||"vertical"!=this.model.orientation||"vertical"!=this._customOrientation||"month"==this.currentView()||this._isCustomMonthView()||Te.hasClass("e-alldayappointment")?(Te.children().eq(0).addClass("e-lefthandle e-appointresizer-left e-icon"),Te.children().eq(1).addClass("e-righthandle e-appointresizer-right e-icon")):(Te.children().eq(0).addClass("e-tophandle e-appointresizer-top e-icon"),Te.children().eq(1).addClass("e-bottomhandle e-appointresizer-bottom e-icon")),Te.children().eq(2).addClass("e-schedulemouseclose e-icon").removeAttr("style"),("month"==this.currentView()||"vertical"==this.model.orientation)&&(Te[0].style.height="vertical"==this.model.orientation?this.element.find("#cloneElement")[0].style.height:this.element.find("#cloneElement")[0].offsetHeight+"px",Te[0].style.width="vertical"==this.model.orientation?this.element.find("#cloneElement")[0].style.width:this.element.find("#cloneElement")[0].offsetWidth+"px"),this.element.find("#cloneElement").parent().append(Te),this._bindAppointmentAction()}return this.element.find("#cloneElement").remove(),_e=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?i:{type:i.type},this._trigger("dragStop",{appointment:r[0],event:_e,draggedAppointment:a}),e(document.body).find(".e-scheduleAppGlassy").length>0&&e(document.body).find(".e-scheduleAppGlassy").remove(),!1}if(R=new Date(new Date(this.model.maxDate).getTime()).setHours(23,59,59),!(!this.model.showNextPrevMonth&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&"month"==this.currentView()&&new Date(new Date(this.currentDate()).getFullYear(),new Date(this.currentDate()).getMonth(),1).getTime()!=new Date(m.getFullYear(),m.getMonth(),1).getTime())&&c>=new Date(this.model.minDate)&&c<=R)if(this._refreshCellsHeight(),1==ee[we.recurrence]&&-1==ee[we.recurrenceRule].indexOf("RECUREDITID")){for((A=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)))).length>1&&((I=e.extend(!0,[],A))[0][we.endTime]=I[I.length-1][we.endTime]),H=null==(A=A.length>1?I[0]:A[0])[we.recurrenceId]?A.ParentId:A[we.recurrenceId],k=null==A[we.recurrenceId]?"ParentId":we.recurrenceId,Ae=this._groupEditing||this._groupEdit?new t.DataManager(this._processed).executeLocal((new t.Query).where("commonGuid",t.FilterOperators.equal,A.commonGuid)):new t.DataManager(this._processed).executeLocal((new t.Query).where(k,t.FilterOperators.equal,H)),o&&(Ae=this._recurrenceAppSort(Ae)),Ae=this._appointmentRecurrenceSort(Ae),x=e.extend({},A),P=!1,this._groupEditing&&(O=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,x[this._appointmentSettings.id])),x[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]=O[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()],this._appointmentSettings.resourceFields.split(",").length>1&&(x[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2].trim()]=O[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2].trim()])),o&&(x=e.extend({},Ae.filter(function(e){return e.Guid==r[0].Guid})[0]),this._groupEditing&&(x[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-1].trim()]=x[this._id+"_ownerfield_"+[this._appointmentSettings.resourceFields.split(",").length-1]],this._appointmentSettings.resourceFields.split(",").length>1&&(x[this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2].trim()]=O[0][this._appointmentSettings.resourceFields.split(",")[this._appointmentSettings.resourceFields.split(",").length-2].trim()]))),this.model.enableRecurrenceValidation&&x[we.recurrence]&&(z=this._recuCollectionIndex(Ae,A)),this.model.enableRecurrenceValidation&&x[we.recurrence]&&!(0==z?t.isNullOrUndefined(Ae[z+1])||new Date(new Date(Ae[z+1][we.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(p).setHours(0,0,0,0)).getTime():z==Ae.length-1?new Date(new Date(Ae[z-1][we.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(h).setHours(0,0,0,0)).getTime():new Date(new Date(Ae[z-1][we.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(h).setHours(0,0,0,0)).getTime()&&new Date(new Date(Ae[z+1][we.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(p).setHours(0,0,0,0)).getTime())?(x[we.startTime]=A[we.startTime],x[we.endTime]=A[we.endTime],this._alertDragResizeError(),P=!0):(K=e.extend(!0,[],A),x[we.startTime]=m,x[we.endTime]=c,!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources&&(x=Se>0?this._getDragDropResourceData(this,Se,x):x),this._reverse&&(P=!0,this._reverse=!1),t.isNullOrUndefined(u)||(x[we.allDay]=u),$=this._checkAvailability(x),_e=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?i:{type:i.type},t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")||this._timeZoneAppointments(x,""),this._trigger("dragStop",{appointment:x,event:_e,draggedAppointment:a})||$.length>0?(this._showBlockAlert&&$.length>0&&this._alertBlockError(),x=e.extend(!0,[],K),P=!0):(this._processed=this._sortAppById(this._processed),M=this.model.enableLoadOnDemand?this._dataCount:this._appMainId+1,this._appMainId=M,H=null==ee[we.recurrenceId]?ee.ParentId:ee[we.recurrenceId],this._deleteOcurrence(H,this.tempResApp[we.startTime]),x[we.recurrenceRule]=ee[we.recurrenceRule]+";RECUREDITID="+x.ParentId,x[we.recurrenceExDate]=ee[we.recurrenceExDate],x[we.id]=x.AppTaskId=M)),te=[],N=[],t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?te.push(this._timeZoneAppointments(x,"")):te.push(x),H=null==x[we.recurrenceId]?ee.ParentId:x[we.recurrenceId],W=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,H)),t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?N.push(this._timeZoneAppointments(W[0],"")):N.push(W[0]),re=this.dataSource()instanceof t.DataManager?we.id:"AppTaskId",P||(ae=this._dataManager.saveChanges({added:te,changed:N,deleted:[]},re,this.model.appointmentSettings.query._fromTable)),E=0;E<te.length;E++)t.isNullOrUndefined(this.model.serverEvents)?new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(te[E],"reverse")):new t.DataManager(this._currentAppointmentData).update("AppTaskId",te[E]);for(E=0;E<N.length;E++)t.isNullOrUndefined(this.model.serverEvents)?new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(N[E],"reverse")):new t.DataManager(this._currentAppointmentData).update("AppTaskId",N[E]);if(P)for(this._appointmentRemove(x),F=this._processed.filter(function(e){return e.Guid==x.Guid}),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:F},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:F},"Guid"),V=this._processed.filter(function(e){return e.Guid==x.Guid}),oe=0;oe<V.length;oe++)this._refreshDayAppointments(V[oe]);else{for(this.dataSource()instanceof t.DataManager&&this._currentAppointmentData.push(x),this._groupEditing||this._groupEdit?(F=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.startTime,t.FilterOperators.equal,this.tempResApp[this._appointmentSettings.startTime].toString())),F=new t.DataManager(F).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,this.tempResApp.ParentId))):F=this._processed.filter(function(e){return e.Guid==x.Guid}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:F},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:F},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:F},"Guid"),de=0;de<F.length;de++)this._appointmentRemove(F[de]);for(this._appointmentProcessing(x),L=this._groupEditing||this._groupEdit?this._processed.filter(function(e){return e.ParentId==x.ParentId}):this._processed.filter(function(e){return e.Guid==x.Guid}),U=0;U<L.length;U++)this._refreshDayAppointments(L[U]);this._groupEditing||this._refreshDayAppointments(K)}this._trigger("actionComplete",{appointment:x,requestType:"appointmentDrag"}),this._groupAutoDrag&&(this._groupAutoDrag=!1),!t.isNullOrUndefined(ae)&&e.isFunction(ae.promise)&&this.dataSource()instanceof t.DataManager&&(ae.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))fe._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(fe._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)x[fe._appointmentSettings.id]=r.added[n][fe._appointmentSettings.id],new t.DataManager(fe._processed).update("Guid",x)}),ae.fail(function(){fe._renderAppointmentAll()}))}else{if(P=!1,q=o?this._currentAppointmentData:this._processed,(j=this._groupEditing?o&&!t.isNullOrUndefined(ee[0])?new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,ee[0].ParentId)):new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,ee.ParentId)):new t.DataManager(q).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,r[0].Guid))).length>1&&j[0][this._appointmentSettings.recurrence]){B=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,ee.Guid)),Ae=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,B[0][this._appointmentSettings.id])),o&&(Ae=this._recurrenceAppSort(Ae));var Ae=this._appointmentRecurrenceSort(Ae),Ie=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,B[0][this._appointmentSettings.id])),ke=e.extend({},Ie[0]);for(this.model.enableRecurrenceValidation&&ke[we.recurrence]&&(z=this._recuCollectionIndex(Ae,B[0])),j[0]=ke,new t.DataManager(this._currentAppointmentData).remove(this._appointmentSettings.id,Ie[0][this._appointmentSettings.id]),G=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,Ie[0][this._appointmentSettings.id])),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:G},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:G},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:G},"Guid"),Y=0,me=(Q=this.getCurrentViewAppointments(G)).length;Y<me;Y++)this._appointmentRemove(Q[Y])}else Ae=new t.DataManager(this._processed).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,j[0].ParentId)),o&&(Ae=this._recurrenceAppSort(Ae)),Ae=this._appointmentRecurrenceSort(Ae),this._groupEditing&&(Z=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("AppTaskId",t.FilterOperators.equal,j[0].AppTaskId)),j[0]=Z[0]),K=e.extend({},j[0]),this.model.enableRecurrenceValidation&&(z=this._recuCollectionIndex(Ae,j[0]));if(X=j[0][we.startTime],J=j[0][we.endTime],j[0][we.startTime]=m,j[0][we.endTime]=c,this._groupEditing?(j[0]=Se>0?this._getDragDropResourceData(this,Se,j[0]):j[0],t.isNullOrUndefined(u)||(j[0][we.allDay]=u),$=this._checkAvailability(j[0]),_e=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?i:{type:i.type},t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")||this._timeZoneAppointments(j[0],""),(this._trigger("dragStop",{appointment:j[0],event:_e,draggedAppointment:a})||$.length>0)&&(this._showBlockAlert&&$.length>0&&this._alertBlockError(),j[0]=e.extend(!0,{},K),P=!0)):this.model.enableRecurrenceValidation&&j[0][we.recurrence]&&!(0==z?t.isNullOrUndefined(Ae[z+1])||new Date(new Date(Ae[z+1][we.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(p).setHours(0,0,0,0)).getTime():z==Ae.length-1?new Date(new Date(Ae[z-1][we.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(h).setHours(0,0,0,0)).getTime():new Date(new Date(Ae[z-1][we.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(h).setHours(0,0,0,0)).getTime()&&new Date(new Date(Ae[z+1][we.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(p).setHours(0,0,0,0)).getTime())?(j[0][we.startTime]=X,j[0][we.endTime]=J,this._alertDragResizeError(),P=!0):(!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&t.scheduleFeatures.resources&&(j[0]=Se>=0?this._getDragDropResourceData(this,Se,j[0]):j[0]),t.isNullOrUndefined(u)||(j[0][we.allDay]=u),$=this._checkAvailability(j[0]),_e=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?i:{type:i.type},t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")||this._timeZoneAppointments(j[0],""),(this._trigger("dragStop",{appointment:j[0],event:_e,draggedAppointment:a})||$.length>0)&&(this._showBlockAlert&&$.length>0&&this._alertBlockError(),j[0]=e.extend(!0,{},K),P=!0)),""!=this.model.appointmentDragArea&&0==(ee=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))).length)return!1;if(te=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?this._timeZoneAppointments(j[0],""):j[0],re=this.dataSource()instanceof t.DataManager?we.id:"AppTaskId",P||(ae=this._dataManager.update(re,te,this.model.appointmentSettings.query._fromTable)),ie=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?this._timeZoneAppointments(te,"reverse"):te,ne=o?"Guid":"AppTaskId",new t.DataManager(this._currentAppointmentData).update(ne,ie),this._groupEditing){if(j[0][this._appointmentSettings.recurrence]&&j.length>1){var xe=[],Oe=(i=[],[]);for(xe.push(j[0]),i.push(j[0]),se=0;se<xe.length;se++)Oe.push(this._timeZoneAppointments(xe[se],""));for(re=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",ae=this._dataManager.saveChanges({added:[],changed:Oe,deleted:[]},re,this.model.appointmentSettings.query._fromTable),oe=0;oe<Oe.length;oe++)new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(Oe[oe],"reverse"));for(le=0;le<i.length;le++)this._currentAppointmentData.push(i[le]),this._appointmentProcessing(i[le]),this._appointmentRemove(i[le]),this._currentViewAppointments=this.getCurrentViewAppointments();this._trigger("actionComplete",{appointment:j[0],requestType:"appointmentDrag"}),this._groupAutoDrag&&(this._groupAutoDrag=!1),this._appMainId=this._sortAppById(this._processed)[this._processed.length-1].AppTaskId,!t.isNullOrUndefined(ae)&&ae&&e.isFunction(ae.promise)&&this.dataSource()instanceof t.DataManager&&(ae.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&fe._processUrlBinding(i)}),ae.fail(function(){fe._renderAppointmentAll()}))}else{for(ce=new t.DataManager(this._processed).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,j[0].ParentId)),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:ce},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:ce},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:ce},"Guid"),de=0;de<ce.length;de++)this._appointmentRemove(ce[de]);this._appointmentProcessing(j[0])}for(this._currentViewAppointments=this.getCurrentViewAppointments(),pe=0,me=(he=this._groupEditing||this._groupEdit?this._currentViewAppointments.filter(function(e){return e.ParentId==j[0].ParentId}):this._processed.filter(function(e){return e.Guid==j[0].Guid})).length;pe<me;pe++)this._refreshDayAppointments(he[pe]);this._trigger("actionComplete",{appointment:j[0],requestType:"appointmentDrag"}),this._groupAutoDrag&&(this._groupAutoDrag=!1),this._appMainId=this._sortAppById(this._processed)[this._processed.length-1].AppTaskId,!t.isNullOrUndefined(ae)&&ae&&e.isFunction(ae.promise)&&this.dataSource()instanceof t.DataManager&&(ae.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&fe._processUrlBinding(i)}),ae.fail(function(){fe._renderAppointmentAll()}))}else{for(new Date(new Date(j[0][we.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(j[0][we.endTime]).setHours(0,0,0,0)).getTime()||o?(ce=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,j[0].Guid)),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:ce},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:ce},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:ce},"Guid"),this._appointmentProcessing(j[0])):(new t.DataManager(this._processed).update("AppTaskId",j[0]),new t.DataManager(this._renderedApp).remove("AppTaskId",j[0]),new t.DataManager(this._renderedAllDay).remove("AppTaskId",j[0])),this._appointmentRemove(j[0]),ue=this._processed.filter(function(e){return e.Guid==j[0].Guid}),ge=0;ge<ue.length;ge++)this._refreshDayAppointments(ue[ge]);this._groupEditing||this._refreshDayAppointments(K),this._trigger("actionComplete",{appointment:j[0],requestType:"appointmentDrag"}),this._appMainId=this._sortAppById(this._processed)[this._processed.length-1].AppTaskId,!t.isNullOrUndefined(ae)&&ae&&e.isFunction(ae.promise)&&this.dataSource()instanceof t.DataManager&&(ae.done(function(i){var n=t.isNullOrUndefined(i.record)?i:i.record;(e.isArray(n)||e.isPlainObject(n)&&t.isNullOrUndefined(n.added))&&fe._processUrlBinding(i)}),ae.fail(function(){fe._renderAppointmentAll()}))}}else this._renderAppointmentAll(),_e=t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("dragStop")?i:{type:i.type},this._trigger("dragStop",{appointment:r[0],event:_e});e(document.body).find(".e-scheduleAppGlassy").length>0&&e(document.body).find(".e-scheduleAppGlassy").remove(),this.element.find("#cloneElement").length>0&&this.element.find("#cloneElement").remove(),this.model.showAppointmentNavigator&&this.model.timeScale.enable&&this._nextPrevButton()},_findRowIndex:function(t){var i,n,s=e(t.element[0]).offset();return this.element.find(".e-appointment,.e-monthappointment").css("pointer-events","none"),i=e(document.elementFromPoint(Math.round(s.left-e(document).scrollLeft()),Math.round(s.top-e(document).scrollTop()+2))),n=e(i).closest("td").parent().index(),this.element.find(".e-appointment,.e-monthappointment").css("pointer-events","visible"),n},_alertDragResizeError:function(){t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),this._alertWindow.ejDialog("instance").option("title",this._getLocalizedLabels("RecurrenceAlert")),this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("DragResizeError")),this._alertWindow.find(".e-alertOk").html(this._getLocalizedLabels("Ok")),this._alertWindow.ejDialog("open")},_processUrlBinding:function(i){if(this.model.enableLoadOnDemand||this.dataSource()instanceof t.DataManager&&this.dataSource().adaptor instanceof t.ODataAdaptor)this._initDataSource("refresh");else{var n=t.isNullOrUndefined(i.record)?i:i.record;this._currentAppointmentData.length=0,this._dateFormat(n),this._bindAppointments=!0,this._currentAppointmentData=e.merge(this._currentAppointmentData,n),this._dataProcessing(n),this._renderAppointmentAll()}},_refreshCellsHeight:function(){if("agenda"==this.currentView())return!1;"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||this.model.showOverflowButton||(this._horizontalRender(),this._reRenderScroller()),"vertical"!=this.model.orientation||"vertical"!=this._customOrientation||this.model.showOverflowButton||"month"!=this.currentView()||(this._monthCellsRender(),this._reRenderScroller())},_dragAppointmentCurrentTime:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b;if(this._groupAutoDrag)if(r=[],(n=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,this._groupAppId))))[0].Recurrence){for(s=0;s<n.length;s++)n[s][this._appointmentSettings.startTime].toString()==this._recStart.toString()&&(this._appUid=n[s].Guid,n[0]=n[s]);r.push(n[0])}else r.push(n[0]);else r=this._sortAppById(new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,i.element.attr("data-guid"))));var R,A=this.element.find(".e-draggableworkarea"),I=parseInt(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount),k=this,x=k._appointmentSettings;if(r[0][x.recurrence]?((a=e.extend(!0,[],r))[0][x.endTime]=a[a.length-1][x.endTime],R=r[0][x.recurrence]&&1==r[0][x.recurrenceRule].toString().indexOf("RECUREDITID")?this._getAppointmentByParentId(this._appUid):r[0][x.recurrence]?a[0]:this._getAppointmentByParentId(this._appUid)):this._groupEditing?R=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,r[0].ParentId))[0]:R=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0],"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&(e(i.element[0]).hasClass("e-appointment")||!t.isNullOrUndefined(i.target.className)&&i.target.className.indexOf("e-workcells")>-1)){var O,M,N,H,W=A.height()+A.scrollTop(),E=i.element[0].offsetHeight,L=this.element.find(".e-workcells")[0].offsetHeight,U=e(i.element[0]).offset().top-A.offset().top+A.scrollTop(),F=U-L/(60/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))<W?U:W-E;if(e(i.element[0]).hasClass("e-alldayappointment"))c=i.target.cellIndex,O=new Date(this.dateRender[c]),o=F>0?60*F/(60/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*L):60/(60/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*L),O.setHours(parseInt(this.model.startHour)+Math.round(o/60)),O.setMinutes(parseInt(o%60)),(O=new Date(O).getMinutes()>=30?new Date(new Date(O).setHours(new Date(O).getHours()-1)):new Date(O)).setMinutes(Math.round(O.getMinutes()/this._dragInterval)*this._dragInterval),N=new Date(O),M=new Date(O).setMinutes(O.getMinutes()+this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount),H=new Date(M);else if(!(F>0)&&this.model.showAllDayRow||t.isNullOrUndefined(i.target)||!t.isNullOrUndefined(i.target.className)&&1==i.target.className.indexOf("e-alldaycells"))m="week"===this.currentView()?7:"workweek"===this.currentView()?this.model.workWeek.length:"customview"==this.currentView()?this._renderDays:1,m=t.isNullOrUndefined(this.model.group)?m:m*this.res1.length,c=Math.round((e(i.element[0]).offset().left+A.scrollLeft()-A.offset().left)/this.element.find(".e-workcells").eq(1).outerWidth()),O=this.model.enableRTL?new Date(this.dateRender[m-c-1]):new Date(this.dateRender[c]),N=new Date(O.setHours(0,0,0)),H=new Date(O.setHours(23,59,59));else{if(o=Math.round(F>0?60*F/(60/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*L):60/(60/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*L)),l=new Date(new Date(R[k._appointmentSettings.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(R[k._appointmentSettings.endTime]).setHours(0,0,0,0)).getTime(),"month"===k.currentView()||k._isCustomMonthView()?(O=R[x.startTime],M=new Date(O)):(d=new Date(k._firstweekdate(k.currentDate())),("workweek"===k.currentView()||"customview"==k.currentView()&&5==k._renderDays)&&(h=0==new Date(d).getDay()?1:0,d.setDate(d.getDate()+h)),O=d,m="week"===k.currentView()?this.model.showWeekend?7:this.model.workWeek.length:"workweek"===k.currentView()?this.model.workWeek.length:"customview"==k.currentView()?k._renderDays:1,m=t.isNullOrUndefined(k.model.group)?m:m*k.res1.length,c=Math.round((e(i.element[0]).offset().left+A.scrollLeft()-A.offset().left)/this.element.find(".e-workcells").eq(1).outerWidth()),M=O=this.model.enableRTL?new Date(this.dateRender[m-c-1]):new Date(this.dateRender[c])),l)O=this._getNewStartTime(o,O),N=new Date(O);else{var V=(o%60).toFixed(1),z=V.toString().split("."),P=t.isNullOrUndefined(z[1])?0:z[1]/1;O.setHours(parseInt(this.model.startHour)+Math.round(o/60),parseInt(V.toString().split(".")[0]),P,0),O=new Date(O).getMinutes()>=30?new Date(new Date(O).setHours(new Date(O).getHours()-1)):new Date(O),I>=this._dragInterval?O.setMinutes(Math.round(O.getMinutes()/this._dragInterval)*this._dragInterval):O.setMinutes(O.getMinutes()/this._dragInterval*this._dragInterval),N=new Date(O)}p=new Date(R[x.endTime]).getTime()-new Date(R[x.startTime]).getTime(),H=new Date(new Date(O).setMilliseconds(p))}}else if(("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&e(i.element[0]).hasClass("e-appointment")&&(N=new Date(R[k._appointmentSettings.startTime]),H=new Date(R[k._appointmentSettings.endTime]),g=this.model.enableRTL?document.elementFromPoint(e(i.element[0]).offset().left,e(i.element[0]).offset().top-1).cellIndex-Math.round(e(i.element[0]).width()/30-1):Math.round((e(i.element[0]).offset().left+A.scrollLeft()-A.offset().left)/this.element.find(".e-workcells").eq(1).outerWidth()),this.element.find(".e-appointment,.e-monthappointment").css({"pointer-events":"visible"}),_=parseInt((e(i.element[0]).offset().top+A.scrollTop()-A.offset().top)/this.element.find(".e-workcells")[0].offsetHeight),this.model.showOverflowButton?this.element.find(".e-resourceheadertable .e-resourceexpand").length>0&&(_+=e(this.element.find(".e-resourceheadertable").find("tr").filter(function(){return"none"!==e(this).css("display")})[_]).prevUntil("table.e-resourceheadertable").filter(function(){return"none"==e(this).css("display")}).length):_=this._findRowIndex(i),f=e(this.element.find(".e-workcellstab tr")[_]).find("td")[g],!e(f).hasClass("e-resourceheadercells")&&!t.isNullOrUndefined(f))){O=new Date(this._dateRender[0]),g>=0?(w=this.element.find(".e-table .e-workcellstab tr:first td").length,D=Math.ceil(i.element[0].offsetWidth/this.CellWidth)+g,u=this.model.enableRTL?30*g:(e(i.element[0]).offset().left+A.scrollLeft()-A.offset().left)*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)/e(this.element.find(".e-workcells")[1]).outerWidth(),S=this.model.startHour+g*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)/60,y=parseInt(g/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))),S=S>=this.model.endHour?Math.round(u/60)+y*(24-this.model.endHour+this.model.startHour):Math.round(u/60),O.setHours(parseInt(k.model.startHour)+S),O.setMinutes(parseInt(u%60)),O=new Date(O).getMinutes()>=30?new Date(new Date(O).setHours(new Date(O).getHours()-1)):new Date(O),O=new Date(O).getHours()<this.model.startHour?new Date(new Date(O).setDate(new Date(O).getDate()-1)):O,O=new Date(O).getHours()<this.model.startHour?new Date(new Date(O).setHours(this.model.endHour-1)):O,I>=this._dragInterval?O.setMinutes(Math.round(O.getMinutes()/this._dragInterval)*this._dragInterval):O.setMinutes(O.getMinutes()/this._dragInterval*this._dragInterval),O=new Date(O).getHours()>=this.model.endHour?new Date(new Date(O).setDate(new Date(O).getDate()+1)):O,O=new Date(O).getHours()>=this.model.endHour?new Date(new Date(O).setHours(this.model.startHour)):O,N=new Date(O),w<=D&&(t.isNullOrUndefined(r.length)||r.length>1?(O=this._recurrenceAppSort(r)[0][k._appointmentSettings.startTime],O=new Date(O)):O=new Date(O).getMinutes()>=30?new Date(new Date(O).setHours(new Date(O).getHours()+1)):new Date(O),O=new Date(O.setMinutes(O.getMinutes()+this._dragInterval)),N=new Date(O))):(t.isNullOrUndefined(r.length)||r.length>1?(O=this._recurrenceAppSort(r)[0][k._appointmentSettings.startTime],O=new Date(O)):O=new Date(O).getMinutes()>=30?new Date(new Date(O).setHours(new Date(O).getHours())):new Date(O),O=new Date(O).getMinutes()>0?new Date(O.setMinutes(O.getMinutes()-this._dragInterval)):O,N=new Date(O));var j=R[k._appointmentSettings.startTime],q=(R[k._appointmentSettings.endTime]-j)/1e3,B=Math.floor(q/3600),G=q/3600;"workweek"==this.currentView()&&5!=this.model.workWeek&&new Date(R.StartTime).getDay()!=new Date(R.EndTime).getDay()&&(B-=(new Date(R.EndTime).getDay()-new Date(R.StartTime).getDay()-1)*(this.model.endHour-this.model.startHour)),v=Math.round(Math.floor(q%3600/60)/this._dragInterval)*this._dragInterval,M=k._getNewEndTime(O,G,v),new Date(R.StartTime).getDay()==new Date(R.EndTime).getDay()&&"workweek"==this.currentView()&&5!=this.model.workWeek.length&&(totalhrs=O.getHours()+B,totalhrs>24&&(C=e.inArray(new Date(O.getFullYear(),O.getMonth(),O.getDate()).getTime(),this._dateRender)+1,M.setDate(new Date(this._dateRender[C]).getDate()))),T=parseInt(g)+parseInt(e(i.element[0]).width()/this.element.find(".e-workcells").width())-1,T=parseInt(T/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)));var Q=new Date(M).getHours()>=this.model.endHour?parseInt(parseInt((new Date(M)-new Date(new Date(new Date(O).setHours(0,0,0,0)).setHours(this.model.endHour)))/36e5)/(this.model.endHour-this.model.startHour)):0,Y=new Date(O),Z="workweek"==this.currentView()?(Q-1)*(this.model.endHour-this.model.startHour):0;S=new Date(M).getHours()>=this.model.endHour?new Date(new Date(Y).setHours(new Date(O).getHours()+Z+parseInt(e(i.element[0]).width()/this.element.find(".e-workcells").width())/(this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot))+Q*(24-this.model.endHour+this.model.startHour))):M,this.model.endHour-this.model.startHour!=24&&(S.getHours()>=this.model.endHour?(b=new Date(S).getHours()-this.model.endHour,S.setDate(new Date(this._dateRender[T]).getDate()),S.setHours(this.model.startHour+b),S.setMinutes(new Date(S).getMinutes())):(new Date(M).getHours()>=this.model.endHour&&S.setMinutes(new Date(O).getMinutes()+Math.round(parseInt(u%60)/this._dragInterval)*this._dragInterval),S=new Date(this._dateRender[T]).setHours(new Date(S).getHours(),new Date(S).getMinutes(),new Date(S).getSeconds(),new Date(S).getMilliseconds()))),H=new Date(S),this._cellIndex=this.model.enableRTL?this.element.find(".e-workcells").length-Math.round(e(i.element[0]).offset().left/this.element.find(".e-workcells").width()):Math.round((e(i.element[0]).offset().left+A.scrollLeft()-A.offset().left)/this.element.find(".e-workcells").eq(1).outerWidth())}i.element.find(".e-apptime").html(t.format(N,"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)+" - "+t.format(H,"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)).insertBefore(i.element.find(".e-apptext")).css("font-size","12px").css("white-space","nowrap"),this._dragNewStartTime=N,this._dragNewEndTime=H},_unWireDragDrop:function(){this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment").ejDraggable("destroy")},_getAppointmentByParentId:function(i){var n=this._currentAppointmentData,s=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,i)),r=new t.DataManager(n).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,s[0].ParentId));return e.isEmptyObject(r)?r:r[0]},_renderAppointmentAll:function(){if(0==this.element.children().length)return!1;if("agenda"==this.currentView())this._renderAgendaContent();else if(t.preferredCulture(this.model.locale),this.element.find("div.e-appointwrapper,.e-alldayappointment,.e-scheduleAppGlassy").remove(),this._currentViewAppointments=this.getCurrentViewAppointments(),"month"!=this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable?("vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this._reRenderScroller(),this._renderAppointments(),this.model.showAppointmentNavigator&&("vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this.element.find(".e-vscroll").length>0&&!this._mediaQuery&&this._renderUpDownIconPosition(),this._nextPrevButton())):this._renderMonthAppointment(),this._bindAppointmentAction(),!this.model.showOverflowButton&&("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)){var e=this.element.find(".e-draggableworkarea").offset().top-this.element.find(".e-workcellstab").offset().top;this.element.find(".e-horires").css({top:-e+"px"})}},_bindAppointmentAction:function(){this._unWireResizeEvents(),this._wireResizeEvents(),this._dragdropAppointments()},_renderBlockAppointments:function(){var i,n,s,r,a,o,l,d;if(this.element.find(".e-blocktimewrapper").remove(),this.model.blockoutSettings.enable&&!(this.model.blockoutSettings.dataSource instanceof t.DataManager)&&"agenda"!=this.currentView())for(this._processBlockApps(),i="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?e.extend(!0,[],this._dateRender):e.extend(!0,[],this.monthDays),this.model.group||(this.res1=["0"]),n=0;n<this.res1.length;n++){if(s=0,a=i.length,new Date(i[0])<this.model.minDate&&(s=Math.floor((new Date(this.model.minDate)-new Date(i[0]))/864e5)),new Date(i[i.length-1])>this.model.maxDate&&(r=Math.floor((new Date(i[i.length-1])-new Date(this.model.maxDate))/864e5),a=i.length-r),this._resWorkWeek)for(a=0,s=0,o=0,d=0;d<n+1;d++)if(t.isNullOrUndefined(this.res1[d][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek])?(a+=this.model.workWeek.length,d==n&&(o+=this.model.workWeek.length)):(a+=this.res1[d][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length,d==n&&(o+=this.res1[d][this._tempResource[this._tempResource.length-1].resourceSettings.workWeek].length)),d==n){s=a-o;break}if(this._resCustomView)for(a=0,s=0,o=0,l=this._tempResource[this._tempResource.length-1].resourceSettings.renderDates,d=0;d<n+1;d++)if(t.isNullOrUndefined(this.res1[d][l])||(a+=this._getCustomDatesCount(d,l),d==n&&(o+=this._getCustomDatesCount(d,l))),d==n){s=a-o;break}for(;s<a;s++)this._getBlockIntervals(s,n,i)}},_processBlockApps:function(){var t,i;for(this._processedIntervals=[],t=e.extend(!0,[],this.model.blockoutSettings.dataSource),i=0;i<t.length;i++)t[i]=this._processtimeZone(t[i]),new Date(new Date(t[i][this.model.blockoutSettings.startTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(t[i][this.model.blockoutSettings.endTime]).setHours(0,0,0,0)).getTime()?this._blockTimeSplit(t[i],new Date(t[i][this.model.blockoutSettings.startTime]),new Date(t[i][this.model.blockoutSettings.endTime])):this._processedIntervals.push(t[i])},_blockTimeSplit:function(t,i,n){for(var s,r,a,o,l,d=new Date(this._dateRender[0])<=i?i:new Date(this._dateRender[0]),h=new Date(new Date(n).getFullYear(),new Date(n).getMonth(),new Date(n).getDate(),23,59,59),p=0;d<=h&&(s=0,a=d,("month"==this.currentView()||this._isCustomMonthView()||"agenda"!=this.currentView()&&"day"!=this.currentView()&&("horizontal"==this.model.orientation||"horizontal"==this._customOrientation))&&("horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"customview"==this.currentView()&&(this._renderDays<=7||"horizontal"==this.model.orientation||"horizontal"==this._customOrientation)?(d=new Date(new Date(a).getFullYear(),new Date(a).getMonth(),new Date(a).getDate()),s=-1!=this._dateRender.indexOf(d.getTime())?this._dateRender.length-1-this._dateRender.indexOf(d.getTime()):d.getTime()<new Date(this._dateRender[0]).getTime()?(new Date(new Date(this._dateRender[0]).setDate(new Date(this._dateRender[0]).getDate()-1)).getTime()-new Date(d).setHours(0,0,0,0))/864e5:d.getTime()>new Date(this._dateRender[this._dateRender.length-1]).setHours(23,59,59)?this._dateRender.length-1:0):(s=this.model.showNextPrevMonth||"month"!=this.currentView()||new Date(new Date(this.currentDate()).getFullYear(),new Date(this.currentDate()).getMonth(),1).getTime()==new Date(d.getFullYear(),d.getMonth(),1).getTime()?6-a.getDay()+this._firstdayofweek:new Date(a.getFullYear(),a.getMonth()+1,0).getDate()-a.getDate(),this._firstdayofweek>a.getDay()&&(s=6-a.getDay()-(7-this._firstdayofweek))):s=new Date(a.getFullYear(),a.getMonth()+1,0).getDate()-a.getDate()),r=new Date(new Date(d).getFullYear(),new Date(d).getMonth(),new Date(d).getDate()+s),(o=new Date(r).getDate()==new Date(n).getDate()?new Date(new Date(r).setHours(n.getHours(),n.getMinutes(),n.getSeconds())):new Date(new Date(r).setHours(23,59,59)))>=new Date(n)&&(o=t[this.model.blockoutSettings.endTime]),this.model.showNextPrevMonth||"month"!=this.currentView()||new Date(d.getFullYear(),d.getMonth(),1).getTime()==new Date(o.getFullYear(),o.getMonth(),1).getTime()||(o=new Date(d.getFullYear(),d.getMonth()+1,0,o.getHours(),o.getMinutes(),o.getSeconds())),(l={})[this.model.blockoutSettings.startTime]=a,l[this.model.blockoutSettings.endTime]=o,this._processedIntervals.push(e.extend({},t,l)),p="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"workweek"!=this.currentView()||1!=new Date(this._dateRender[0]).getDay()||5!=new Date(this._dateRender[this._dateRender.length-1]).getDay()?1:3,d=new Date(new Date(o).getFullYear(),new Date(o).getMonth(),new Date(o).getDate()+p),!(new Date(this._dateRender[this._dateRender.length-1])<d)););},_getBlockIntervals:function(e,i,n){var s,r=this._processedIntervals,a=t.Predicate(this.model.blockoutSettings.endTime,t.FilterOperators.greaterThanOrEqual,new Date(n[e])).and(this.model.blockoutSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(n[e]).setHours(23,59,59))),o=t.Predicate(this.model.blockoutSettings.startTime,t.FilterOperators.greaterThanOrEqual,new Date(n[e])).and(this.model.blockoutSettings.startTime,t.FilterOperators.lessThanOrEqual,new Date(new Date(n[e]).setHours(23,59,59))),l=a.or(o);for(l=!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources?l.and(this.model.blockoutSettings.resourceId,t.FilterOperators.equal,this.res1[i][this._tempResource[this._tempResource.length-1].resourceSettings.id]):l,l=this._grouping.length>1?l.and(this.model.blockoutSettings.groupId,t.FilterOperators.equal,this.res1[i][this._tempResource[this._tempResource.length-1].resourceSettings.groupId]):l,r=new t.DataManager(r).executeLocal((new t.Query).where(l)),s=0;s<r.length;s++)new Date(new Date(n[e]).setHours(0,0,0,0)).getTime()==new Date(new Date(r[s][this.model.blockoutSettings.startTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(n[e]).setHours(0,0,0,0)).getTime()<=new Date(new Date(r[s][this.model.blockoutSettings.endTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(r[s][this.model.blockoutSettings.startTime]).setHours(0,0,0,0)).getTime()<=new Date(new Date(r[s][this.model.blockoutSettings.endTime]).setHours(0,0,0,0)).getTime()&&("month"==this.currentView()||this._isCustomMonthView()||!this.model.timeScale.enable?r[s][this.model.blockoutSettings.isAllDay]&&this._renderMonthBlockTime(r[s],e,i):this._renderBlockTime(r[s],e,i))},_renderBlockTime:function(i,n,s){var r,a,o,l,d,h,p,m,c,u=this.element.find(".e-workcells")[0].offsetHeight,g=parseInt(this.model.startHour)<parseInt(this.model.endHour)?parseInt(this.model.startHour):0,_=parseInt(this.model.startHour)<parseInt(this.model.endHour)?parseInt(this.model.endHour):24,f=this._getDateCount(s),w=i[this.model.blockoutSettings.startTime],D=i[this.model.blockoutSettings.endTime];if(w=new Date(w).getHours()<g?new Date(new Date(w).setHours(g,w.getMinutes(),w.getSeconds())):w,D=_<=D.getHours()?new Date(new Date(D).setHours(_,0,0)):D,r=new Date(w).getHours()<g?new Date(w).getHours()+-new Date(w).getHours()+-new Date(w).getMinutes():new Date(w).getHours()+-g,w<=D&&new Date(f[0]).getTime()<=w.getTime()&&new Date(new Date(f[f.length-1]).setHours(23,59,59))>=w.getTime())if("vertical"==this.model.orientation&&"vertical"==this._customOrientation)S="100%",y=0,C=parseFloat(new Date(new Date(D).getTime())-new Date(new Date(w).getTime()))/6e4*u*this.model.timeScale.minorSlotCount/this.model.timeScale.majorSlot,T=(parseFloat(60*new Date(w).getHours()+new Date(w).getMinutes()+new Date(w).getSeconds()/60)-parseInt(60*r/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-60*this.model.startHour)*u*(this.model.timeScale.minorSlotCount/this.model.timeScale.majorSlot),c=this._generateBlockElement(i,S,C,T,y),this._resWorkWeek||this._resCustomView?e(this.element.find("td.e-workcells")[r*this.model.timeScale.minorSlotCount*this.element.find(".e-headercells").length+n]).append(c):e(this.element.find("td.e-workcells")[parseInt(60*r/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))*f.length*this.res1.length+n+f.length*s]).append(c);else{var S,y,v=this._horiGroupCollection(),C=u,T=0,b=0;if(!t.isNullOrUndefined(this.model.group)&&this.model.group.resources.length>1&&(predicate1=t.Predicate(this._tempResource[this._tempResource.length-1].resourceSettings.id,t.FilterOperators.equal,i[this.model.blockoutSettings.resourceId]),predicate2=t.Predicate(this._tempResource[this._tempResource.length-1].resourceSettings.groupId,t.FilterOperators.equal,i[this.model.blockoutSettings.groupId]),a=predicate1.and(predicate2),o=new t.DataManager(this.res1).executeLocal((new t.Query).where(a)),b=this._findResourceIndex(v,this._tempResource[this._tempResource.length-2].resourceSettings.id,o[0][this._tempResource[this._tempResource.length-1].resourceSettings.groupId],null,null)+1),H=t.isNullOrUndefined(this.model.group)||t.isNullOrUndefined(this._tempResource)?1:1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId],null,null)+1:this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,i[this.model.blockoutSettings.groupId])+1,new Date(new Date(new Date(i[this.model.blockoutSettings.startTime]).setHours(0,0,0,0)).getTime())<new Date(new Date(new Date(i[this.model.blockoutSettings.endTime]).setHours(0,0,0,0)).getTime())){var R,A,I,k,x=new Date(D)<new Date(new Date(D).setHours(this.model.endHour,0,0))&&new Date(D)<new Date(new Date(D).setHours(this.model.startHour,0,0))?30*this.model.endHour:60*new Date(D).getHours()+new Date(D).getMinutes(),O=new Date(w)>new Date(new Date(D).setHours(this.model.startHour,0,0))?60*this.model.startHour:60*new Date(w).getHours()+new Date(w).getMinutes(),M=1;if(R=this._dateRender.indexOf(new Date(D).setHours(0,0,0,0)),A=this._dateRender.indexOf(new Date(w).setHours(0,0,0,0)),-1==R)for(;M<7;){if(new Date(this._dateRender[this._dateRender.length-M]).getTime()<new Date(D).setHours(0,0,0,0)){I=this._dateRender.length-M,x=60*this.model.endHour;break}M++}else I=R;-1==A?(k=n,O=60*this.model.startHour):k=A,d=(I-k)*(_-g)*60-O+x,h=Math.floor((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)*n+(-1==A?0:r*this.model.timeScale.minorSlotCount)*(60/this.model.timeScale.majorSlot)),S=d/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*this.element.find(".e-workcells").width()+d/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-1,l>this._dateRender.length&&(S=(d=(l=new Date(this._dateRender[this._dateRender.length-1]).getDay()+1-new Date(w).getDay())*(_-g)*60)/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)*this.element.find(".e-workcells").width()+(d/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)-3)),y=-1==A?0:parseFloat(new Date(w).getMinutes())*this.element.find(".e-workcells")[0].offsetWidth*this.model.timeScale.minorSlotCount/this.model.timeScale.majorSlot}else p=Math.ceil((new Date(w).getMinutes()+new Date(w).getMilliseconds()/60)/Math.round(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))-1,y=parseFloat(new Date(w).getMinutes()+new Date(w).getMilliseconds()/60)*e(this.element.find(".e-workcells")[1]).width()*this.model.timeScale.minorSlotCount/this.model.timeScale.majorSlot+p,m=(d=60*new Date(D).getHours()+new Date(D).getMinutes()-(60*new Date(w).getHours()+new Date(w).getMinutes())+1)*(this.element.find(".e-workcells").width()/(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))/this.element.find(".e-workcells").width(),S=(m=Math.floor(m)<2?m:Math.floor(m))*this.element.find(".e-workcells").width()+m,h=Math.floor((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)*n+r*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot));var N=this.element.find(".e-workcellstab tr"),H=(b=!t.isNullOrUndefined(this.model.group)&&0!=this._tempResource.length&&0!=this._tempResource[0].resourceSettings.dataSource.length&&this._grouping.length>1?this._findResourceIndex(this._horiGroupCollection(),this._tempResource[this._tempResource.length-2].resourceSettings.id,i[this.model.blockoutSettings.groupId.trim()],null,null)+1:0,t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||0==this._tempResource[0].resourceSettings.dataSource.length?1:1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId],null,null)+1:this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId.trim()],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,i[this.model.blockoutSettings.groupId.trim()])+1);celltd=N.eq(H+b-1).children().eq(h),C=celltd.outerHeight(),S+=Math.ceil((D.getTime()-w.getTime())/864e5)-1,S+="px",c=this._generateBlockElement(i,S,C,T,y),e(e(this.element.find(".e-workcellstab tr")[H+b-1]).find("td.e-workcells")[h]).append(c)}},_generateBlockElement:function(i,n,s,r,a){var o=!!this.model.blockoutSettings.templateId,l=o?this._getUserTemplate(this.model.blockoutSettings.templateId,i):"",d=i[this.model.blockoutSettings.isBlockAppointment]?"e-blockenable":"",h=e(this.blockTimeTemplate.render({id:i[this.model.blockoutSettings.id],subject:i[this.model.blockoutSettings.subject],appWidth:n,appHeight:s,left:a,top:r,blockClass:d,customStyle:i[this.model.blockoutSettings.customStyle],userTempId:o,userTemplate:l}));return t.isNullOrUndefined(this.model.queryCellInfo)||this._renderQueryCellInfo("blockAppointment",i,h),h},_renderMonthBlockTime:function(i,n){var s,r,a,o,l,d,h,p,m,c,u,g,_,f="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this._dateRender:this.monthDays,w=new Date(i[this.model.blockoutSettings.startTime]),D=new Date(i[this.model.blockoutSettings.endTime]),S="vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.element.find(".e-monthcells").width():this.element.find(".e-workcells").width(),y=new Date(w),v=new Date(new Date(f[f.length-1]).setHours(23,59,59)),C=new Date(D)>v?v:new Date(D),T=0==y.getHours()&&0==C.getHours()?Math.ceil((new Date(C)-new Date(y))/864e5):Math.ceil((new Date(C).setHours(23,59,59)-new Date(y).setHours(0,0,0))/864e5);w<=D&&("vertical"==this.model.orientation&&"vertical"==this._customOrientation&&(T=T>=(a=0==this._firstdayofweek?7-new Date(y).getDay():7-new Date(y).getDay()+this._firstdayofweek)?a:T,o=Math.ceil((n+1)/7)),s=T*S+(Math.ceil((D.getTime()-w.getTime())/864e5)-1)+"px",l=0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources?1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId],null,null):this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,i[this.model.blockoutSettings.groupId]):0,d="vertical"==this.model.orientation&&"vertical"==this._customOrientation?7*l+(new Date(w).getDay()+1)+(o-1)*this.res1.length*7-this._firstdayofweek:n+1,"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&0!=this._firstdayofweek&&new Date(w).getDay()<this._firstdayofweek&&(d=7*l+(new Date(w).getDay()+1)+(o-1)*this.res1.length*7-this._firstdayofweek+7),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?r=e(this.element.find("td.e-monthcells")[d-1]).closest("tr").find(".e-monthcells")[0].offsetHeight-this.element.find(".e-monthheader").height():(h=this._horiGroupCollection(),p=0,!t.isNullOrUndefined(this.model.group)&&this.model.group.resources.length>1&&(predicate1=t.Predicate(this._tempResource[this._tempResource.length-1].resourceSettings.id,t.FilterOperators.equal,i[this.model.blockoutSettings.resourceId]),predicate2=t.Predicate(this._tempResource[this._tempResource.length-1].resourceSettings.groupId,t.FilterOperators.equal,i[this.model.blockoutSettings.groupId]),m=predicate1.and(predicate2),c=new t.DataManager(this.res1).executeLocal((new t.Query).where(m)),p=this._findResourceIndex(h,this._tempResource[this._tempResource.length-2].resourceSettings.id,c[0][this._tempResource[this._tempResource.length-1].resourceSettings.groupId],null,null)+1),u=t.isNullOrUndefined(this.model.group)||t.isNullOrUndefined(this._tempResource)?1:1==this._grouping.length?this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId],null,null)+1:this._findResourceIndex(this.res1,this._tempResource[this._tempResource.length-1].resourceSettings.id,i[this.model.blockoutSettings.resourceId],this._tempResource[this._tempResource.length-1].resourceSettings.groupId,i[this.model.blockoutSettings.groupId])+1,r=(_=this.element.find(".e-workcellstab tr").eq(u+p-1).children().eq(d-1)).outerHeight()),g=this._generateBlockElement(i,s,r,0,0),_=e(this.element.find("td.e-monthcells")[d-1]),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?_.find(".e-monthheader").after(g):("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&t.scheduleFeatures.horizontal&&e(e(this.element.find(".e-workcellstab tr")[u+p-1]).find("td.e-workcells")[d-1]).prepend(g))},_checkAvailability:function(e){var i,n;if(this.model.blockoutSettings.enable){var s,r=new Date(e[this._appointmentSettings.startTime]),a=new Date(e[this._appointmentSettings.endTime]),o=t.Predicate(this.model.blockoutSettings.startTime,t.FilterOperators.greaterThanOrEqual,r).and(this.model.blockoutSettings.endTime,t.FilterOperators.greaterThanOrEqual,r).and(this.model.blockoutSettings.startTime,t.FilterOperators.lessThan,a),l=t.Predicate(this.model.blockoutSettings.startTime,t.FilterOperators.lessThanOrEqual,r).and(this.model.blockoutSettings.endTime,t.FilterOperators.greaterThan,r),d=o.or(l);if(!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources)if(this._groupEditing){for(s=e[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()].toString().split(","),i=new t.Predicate(this.model.blockoutSettings.resourceId,t.FilterOperators.equal,s[0]),n=1;n<s.length;n++)i=i.or(new t.Predicate(this.model.blockoutSettings.resourceId,t.FilterOperators.equal,s[n]));d=d.and(i)}else s=e[this._appointmentSettings.resourceFields.toString().split(",")[this._tempResource.length-1].trim()],d=d.and(this.model.blockoutSettings.resourceId,t.FilterOperators.equal,s);return d=d.and(this.model.blockoutSettings.isBlockAppointment,t.FilterOperators.equal,!0),new t.DataManager(this._processedIntervals).executeLocal((new t.Query).where(d))}return[]},_alertBlockError:function(){t.isNullOrUndefined(this._alertWindow)&&this._renderAlertWindow(),this._alertWindow.ejDialog("instance").option("title",this._getLocalizedLabels("BlockIntervalAlertTitle")),this._alertWindow.find(".e-alerttext").html(this._getLocalizedLabels("BlockIntervalError")),this._alertWindow.find(".e-alertOk").html(this._getLocalizedLabels("Ok")),this._alertWindow.ejDialog("open")},_getNewEndTime:function(e,t){var i=new Date(e);return i.setMilliseconds(36e5*t),i},_getNewStartTime:function(e,t){return t.setHours(t.getHours()+parseInt(this.model.startHour)+parseInt(e/60)),t.setMinutes(t.getMinutes()+parseInt(e%60)),t.setMinutes(10*Math.round(t.getMinutes()/10)),t},_documentOnKeyDown:function(e){if(this.model.allowKeyboardNavigation){var t=e.target||document.activeElement||e.srcElement;27==e.which?this._processEscapeKey():13==e.which?this._processEnterKey(t):0==e.shiftKey&&9==e.which&&this._processWindowTab(t)}},_processWindowTab:function(i){e(i).hasClass("e-qAppDone")&&!t.isNullOrUndefined(this._quickAppointWindow)?this._quickAppointWindow.find(".subject").focus():t.isNullOrUndefined(this._appointmentAddWindow)||!e(i).hasClass("e-appointcancel")&&!e(i).hasClass("e-cancelrecur")?e(i).hasClass("e-editseries")&&!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppDetailsWindow.focus():this._appointmentAddWindow.find(".subject").focus()},_onKeyDown:function(i){var n,s,r,a,o,l,d;if(this.model.allowKeyboardNavigation){if(!t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._quickAppointWindow.data("ejDialog")&&(this._quickAppointWindow.ejDialog("close"),this._quickAppDetailsWindow.ejDialog("close")),n=this.element.find("div.e-draggableworkarea tr"),s=i.target||document.activeElement||i.srcElement,e(s).hasClass("e-alldaycells")&&(n=this.element.find(".e-alldaycells").parent()),this._trigger("keyDown",{event:i}))return!1;if(e(s).hasClass("e-workcells")||e(s).hasClass("e-alldaycells")||e(s).hasClass("e-monthcells"))this._getDateByElement(e(s),null),r=this.curDate,39==i.which&&r.setDate(r.getDate()+1),37==i.which&&r.setDate(r.getDate()-1),r>=this.model.minDate&&r<=this.model.maxDate&&(this.element.find("#"+this._id+"_navigator").ejDatePicker("hide"),(e(s).hasClass("e-workcells")||e(s).hasClass("e-alldaycells")||e(s).hasClass("e-monthcells"))&&e(s).addClass("e-selectedCell"),0==i.shiftKey&&38==i.which?(this._stopDefaultAction(i),this._processUpArrow(s,n)):0==i.shiftKey&&40==i.which?(this._stopDefaultAction(i),this._processDown(s,n)):0==i.ctrlKey&&0==i.shiftKey&&39==i.which?(this._stopDefaultAction(i),this._processRight(s,n)):0==i.ctrlKey&&0==i.shiftKey&&37==i.which?(this._stopDefaultAction(i),this._processLeft(s,n)):1==i.shiftKey&&38==i.which?(this._stopDefaultAction(i),this._processShiftUp(s,i,n)):1==i.shiftKey&&40==i.which?(this._stopDefaultAction(i),this._processShiftDown(s,i,n)):1==i.shiftKey&&37==i.which?(this._stopDefaultAction(i),this._processShiftLeft(s,i,n)):1==i.shiftKey&&39==i.which&&(this._stopDefaultAction(i),this._processShiftRight(s,i,n)));else if("agenda"==this.currentView()&&e(s).hasClass("e-agendacells")&&(this._stopDefaultAction(i),38==i.which||40==i.which)){this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment");var h=n.length-1,p=this.element.find(".e-selectedCell").parent().index(),m=38==i.which?parseInt(p)-1:parseInt(p)+1;m>=0&&m<=h&&"undefined"!=p&&(e(n).find(".e-eventcolumn,.e-timecolumn").removeClass("e-selectedCell"),e(n[m]).find(".e-eventcolumn,.e-timecolumn").addClass("e-selectedCell").attr("tabIndex",0).focus())}1==i.altKey&&67==i.which?(this._stopDefaultAction(i),this.element.find(".e-datedisplay").click()):1==i.ctrlKey&&37==i.which?(this._stopDefaultAction(i),this.element.find("div.e-navigateprevious").click(),this.element.find("div.e-navigateprevious").attr("tabIndex",0).focus(),this.element.find("#"+this._id+"_navigator").ejDatePicker({value:new Date(this.currentDate())})):1==i.ctrlKey&&39==i.which?(this._stopDefaultAction(i),this.element.find("div.e-navigatenext").click(),this.element.find("div.e-navigatenext").attr("tabIndex",0).focus(),this.element.find("#"+this._id+"_navigator").ejDatePicker({value:new Date(this.currentDate())})):1==i.altKey&&107==i.which||1==i.altKey&&187==i.which||1==i.altKey&&61==i.which?(this._stopDefaultAction(i),this._navigateToolbarRight(i)):1==i.altKey&&189==i.which||1==i.altKey&&109==i.which||1==i.altKey&&45==i.which||1==i.altKey&&173==i.which?(this._stopDefaultAction(i),this._navigateToolbarLeft(i)):1==i.ctrlKey&&67==i.which?(this._stopDefaultAction(i),this._cancel()):32==i.which?e(document.activeElement)[0]===this.element.find("div.e-navigateprevious")[0]?(this._stopDefaultAction(i),this.element.find("div.e-navigateprevious").click(),this.element.find("div.e-navigateprevious").attr("tabIndex",0).focus(),this.element.find("#"+this._id+"_navigator").ejDatePicker({value:new Date(this.currentDate())})):e(document.activeElement)[0]===this.element.find("div.e-navigatenext")[0]&&(this._stopDefaultAction(i),this.element.find("div.e-navigatenext").click(),this.element.find("div.e-navigatenext").attr("tabIndex",0).focus(),this.element.find("#"+this._id+"_navigator").ejDatePicker({value:new Date(this.currentDate())})):1==i.altKey&&78==i.which?(this._stopDefaultAction(i),"agenda"!=this.currentView()&&this._newAppWindow(s,n),this.element.find("#"+this._id+"_navigator").ejDatePicker("hide")):1==i.ctrlKey&&69==i.which?(this._stopDefaultAction(i),a=this.element.find(".e-selectedAppointment"),"agenda"==this.currentView()&&this.element.find(".e-selectedCell").length>0&&((l=this.element.find(".e-selectedCell").parent().find(".e-agendaappointment")).hasClass("e-agendaappointment")&&(a=l)),a.length>0&&(this._editKey=!0,this._cellClick=!1,this._appointmentWindow(a),this.element.find("#"+this._id+"_navigator").ejDatePicker("hide"))):46==i.which?(this._stopDefaultAction(i),o=this.element.find(".e-selectedAppointment"),"agenda"==this.currentView()&&this.element.find(".e-selectedCell").length>0&&((l=this.element.find(".e-selectedCell").parent().find(".e-agendaappointment")).hasClass("e-agendaappointment")&&(o=l)),o.length>0&&(this._appUid=o.attr("data-guid"),this._deleteAppoint())):1==i.shiftKey&&9==i.which?(this._stopDefaultAction(i),this._reverseTab(s,i,n),this.element.find("#"+this._id+"_navigator").ejDatePicker("hide")):0==i.shiftKey&&9==i.which&&(this._stopDefaultAction(i),this._processTab(s,i,n),this.element.find("#"+this._id+"_navigator").ejDatePicker("hide")),d=this,"agenda"!=this.currentView()&&this._moveScrollContent(s,d)}},_processShiftUp:function(t,i,n){var s,r,a;if("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)return!1;if(e(t).hasClass("e-workcells")){var o=n.length-1,l=e(t).parent()[0].rowIndex,d=e(t)[0].cellIndex;l>0&&l<=o&&"undefined"!=l?((s=parseInt(l)-1)>=0&&(e(n[s].cells[d]).hasClass("e-selectedCell")?(e(n[s].cells[d]).attr("tabIndex",0).focus(),e(n[l].cells[d]).removeClass("e-selectedCell")):(e(n[l].cells[d]).addClass("e-selectedCell"),e(n[s].cells[d]).addClass("e-selectedCell").attr("tabIndex",0).focus())),this._currentRowIndex=s,this._currentColIndex=d):(e(n[l].cells[d]).attr("tabIndex",0).focus(),this._currentRowIndex=l,this._currentColIndex=d)}else{if(!e(t).hasClass("e-monthcells"))return!1;var h=Math.floor(e(t).index()/7),p=(o=n.length-1,7*(h+1)),m=7*parseInt(h);l=e(t).parent()[0].rowIndex,d=e(t)[0].cellIndex;if(!(l>0&&l<=o&&"undefined"!=l))return!1;if((s=parseInt(l)-1)>=0)if(e(n[s].cells[d]).hasClass("e-selectedCell")){for(r=d;r>=m;r--)e(n[l].cells[r]).attr("tabIndex",0).focus(),e(n[l].cells[r]).removeClass("e-selectedCell");for(a=p-1;a>=d;a--)s>=0&&(e(n[s].cells[a]).attr("tabIndex",0).focus(),e(n[s].cells[a]).removeClass("e-selectedCell"));e(n[s].cells[d]).hasClass("e-othermonths")||e(n[s].cells[d]).addClass("e-selectedCell").attr("tabIndex",0).focus()}else{for(r=d;r>=m;r--)e(n[l].cells[r]).addClass("e-selectedCell").attr("tabIndex",0).focus();for(a=p-1;a>=d;a--)s>=0&&(e(n[s].cells[a]).hasClass("e-othermonths")||e(n[s].cells[a]).addClass("e-selectedCell").attr("tabIndex",0).focus())}else e(n[s+1].cells[d]).attr("tabIndex",0).focus()}},_processShiftDown:function(t,i,n){var s,r,a;if("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)return!1;if(e(t).hasClass("e-workcells")){var o=n.length-1,l=e(t).parent()[0].rowIndex,d=e(t)[0].cellIndex;l>=0&&l<=o&&"undefined"!=l&&(e(n[l].cells[d]).addClass("e-selectedCell").attr("tabIndex",0).focus(),(s=parseInt(l)+1)<=o?(e(n[s].cells[d]).hasClass("e-selectedCell")?(e(n[s].cells[d]).attr("tabIndex",0).focus(),e(n[l].cells[d]).removeClass("e-selectedCell")):(e(n[l].cells[d]).addClass("e-selectedCell"),e(n[s].cells[d]).addClass("e-selectedCell").attr("tabIndex",0).focus()),this._currentRowIndex=s,this._currentColIndex=d):(e(n[l].cells[d]).attr("tabIndex",0).focus(),this._currentRowIndex=l,this._currentColIndex=d))}else{if(!e(t).hasClass("e-monthcells"))return!1;var h=Math.floor(e(t).index()/7),p=(o=n.length-1,7*(h+1)),m=7*parseInt(h);l=e(t).parent()[0].rowIndex,d=e(t)[0].cellIndex;if(!(l>=0&&l<=o&&"undefined"!=l))return!1;if((s=parseInt(l)+1)<this._dateRender.length/7)if(e(n[s].cells[d]).hasClass("e-selectedCell")){for(r=d;r<=p-1;r++)e(n[l].cells[r]).attr("tabIndex",0).focus(),e(n[l].cells[r]).removeClass("e-selectedCell");for(a=m;a<=d;a++)s<this._dateRender.length/7&&(e(n[s].cells[a]).attr("tabIndex",0).focus(),e(n[s].cells[a]).removeClass("e-selectedCell"));e(n[s].cells[d]).hasClass("e-othermonths")||e(n[s].cells[d]).addClass("e-selectedCell")}else{for(r=d;r<=p-1;r++)e(n[l].cells[r]).hasClass("e-othermonths")||e(n[l].cells[r]).addClass("e-selectedCell").attr("tabIndex",0).focus();for(a=m;a<=d;a++)s<this._dateRender.length/7&&(e(n[s].cells[a]).hasClass("e-othermonths")||e(n[s].cells[a]).addClass("e-selectedCell").attr("tabIndex",0).focus())}else e(n[s-1].cells[d]).attr("tabIndex",0).focus()}},_processShiftLeft:function(t,i,n){var s,r,a,o,l=n.length-1;if(e(t).hasClass("e-workcells")){var d=t,h="day"==this.currentView()?1:"workweek"==this.currentView()?this.model.workWeek.length:7,p="vertical"==this.model.orientation&&"vertical"==this._customOrientation?h:"month"==this.currentView()?this.totdays.length:h*(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot),m=p*(S=Math.floor(e(d).index()/p)),c=e(d)[0].cellIndex,u=e(d).parent()[0].rowIndex,g=c-1,_="vertical"==this.model.orientation&&"vertical"==this._customOrientation?0:u,f="vertical"==this.model.orientation&&"vertical"==this._customOrientation?l:u,w=!("vertical"!=this.model.orientation||"vertical"!=this._customOrientation||!this.model.showAllDayRow),D=this.element.find(".e-alldaycells").parent();if(c>0&&g>parseInt(m)-1&&"undefined"!=c){if(e(n[u].cells[g]).hasClass("e-selectedCell")){for(s=_;s<=parseInt(u);s++)e(n[s].cells[c]).removeClass("e-selectedCell");for(r=f;r>=parseInt(u);r--)e(n[r].cells[g]).removeClass("e-selectedCell");w&&e(D[0].cells[c]).removeClass("e-selectedCell").attr("tabIndex",0).focus(),e(n[u].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus()}else{for(s=_;s<=parseInt(u);s++)e(n[s].cells[c]).addClass("e-selectedCell");for(r=f;r>=parseInt(u);r--)e(n[r].cells[g]).addClass("e-selectedCell");w&&(e(D[0].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus(),e(D[0].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus()),e(n[u].cells[g]).attr("tabIndex",0).focus()}this._currentRowIndex=u,this._currentColIndex=g}else e(n[u].cells[g+1]).attr("tabIndex",0).focus(),this._currentRowIndex=u,this._currentColIndex=g+1}else if(e(t).hasClass("e-monthcells")){var S=Math.floor(e(t).index()/7),y=(l=n.length-1,7*(parseInt(S)+1)),v=7*parseInt(S),C=e(t).parent()[0].rowIndex,T=e(t)[0].cellIndex;if(!(T>=v&&T<=y&&"undefined"!=T))return!1;newcur=parseInt(T)-1,e(n[C].cells[newcur]).hasClass("e-selectedCell")?T==v&&C>=1?(a=parseInt(C)-1,o=parseInt(y)-1,a>=0&&(e(n[a].cells[o]).attr("tabIndex",0).focus(),e(n[a].cells[T]).removeClass("e-selectedCell"),e(n[C].cells[v]).removeClass("e-selectedClass"))):T<y&&(newcur=parseInt(T)-1,e(n[C].cells[newcur]).attr("tabIndex",0).focus(),e(n[C].cells[T]).removeClass("e-selectedCell")):T==v&&C>=0?(a=parseInt(C)-1,o=parseInt(y)-1,a>=0?e(n[a].cells[o]).hasClass("e-othermonths")||e(n[a].cells[o]).addClass("e-selectedCell").attr("tabIndex",0).focus():e(n[a+1].cells[T]).attr("tabIndex",0).focus()):T<y&&(newcur=parseInt(T)-1,e(n[C].cells[newcur]).hasClass("e-othermonths")||e(n[C].cells[newcur]).addClass("e-selectedCell").attr("tabIndex",0).focus())}else{if(!e(t).hasClass("e-alldaycells"))return!1;m=(h="day"==this.currentView()?1:"workweek"==this.currentView()?this.model.workWeek.length:7)*(S=Math.floor(e(t).index()/h)),g=(c=e(t)[0].cellIndex)-1;c>0&&g>parseInt(m)-1&&"undefined"!=c?(e(n[0].cells[g]).hasClass("e-selectedCell")?(e(n[0].cells[c]).removeClass("e-selectedCell"),e(n[0].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(n[0].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus(),this._currentRowIndex=0,this._currentColIndex=g):(e(n[0].cells[g+1]).attr("tabIndex",0).focus(),this._currentRowIndex=0,this._currentColIndex=g+1)}},_processShiftRight:function(t,i,n){var s,r,a;if(e(t).hasClass("e-workcells")){var o=n.length-1,l="day"==this.currentView()?1:"workweek"==this.currentView()?this.model.workWeek.length:7,d="vertical"==this.model.orientation&&"vertical"==this._customOrientation?l:"month"==this.currentView()?this.totdays.length:l*(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot),h=d*((w=Math.floor(e(t).index()/d))+1),p=e(t).parent()[0].rowIndex,m=e(t)[0].cellIndex,c=parseInt(m)+1,u="vertical"==this.model.orientation&&"vertical"==this._customOrientation?0:p,g="vertical"==this.model.orientation&&"vertical"==this._customOrientation?o:p,_=this.element.find(".e-alldaycells").parent(),f=!("vertical"!=this.model.orientation||"vertical"!=this._customOrientation||!this.model.showAllDayRow);if(m>=0&&m<parseInt(h)-1&&"undefined"!=m){if(e(n[p].cells[c]).hasClass("e-selectedCell")){for(s=parseInt(p);s<=g;s++)e(n[s].cells[m]).removeClass("e-selectedCell");for(r=u;r<=p;r++)e(n[r].cells[c]).removeClass("e-selectedCell").attr("tabIndex",0).focus();f&&e(_[0].cells[m]).removeClass("e-selectedCell"),e(n[p].cells[c]).addClass("e-selectedCell")}else{for(s=parseInt(p);s<=g;s++)e(n[s].cells[m]).addClass("e-selectedCell");for(r=u;r<=p;r++)e(n[r].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus();f&&(e(_[0].cells[c]).addClass("e-selectedCell"),e(_[0].cells[m]).addClass("e-selectedCell"))}this._currentRowIndex=p,this._currentColIndex=c}else e(n[p].cells[m]).attr("tabIndex",0).focus()}else if(e(t).hasClass("e-monthcells")){var w=Math.floor(e(t).index()/7),D=(o=n.length-1,h=7*(parseInt(w)+1)),S=7*parseInt(w);p=e(t).parent()[0].rowIndex,m=e(t)[0].cellIndex,c=parseInt(m)+1;if(!(m>=0&&m<=parseInt(h)-1&&"undefined"!=m))return!1;e(n[p].cells[c]).hasClass("e-selectedCell")?(c<D&&(e(n[p].cells[c]).attr("tabIndex",0).focus(),e(n[p].cells[m]).removeClass("e-selectedCell")),m==parseInt(h)-1&&p<this._dateRender.length/7&&(m=S,(a=parseInt(p)+1)<this._dateRender.length/7&&(e(n[a].cells[m]).hasClass("e-othermonths")||e(n[a].cells[m]).removeClass("e-selectedCell").attr("tabIndex",0).focus(),c<D&&(e(n[a].cells[c]).attr("tabIndex",0).focus(),e(n[a].cells[m]).removeClass("e-selectedCell"))))):(c<D&&(e(n[p].cells[c]).hasClass("e-othermonths")||e(n[p].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus()),m==parseInt(h)-1&&p<this._dateRender.length/7&&(m=S,(a=parseInt(p)+1)<this._dateRender.length/7?(e(n[a].cells[m]).hasClass("e-othermonths")&&e(n[a].cells[m]).addClass("e-selectedCell").attr("tabIndex",0).focus(),c<D&&e(n[a].cells[c]).hasClass("e-othermonths")&&e(n[a].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(n[a-1].cells[c-1]).attr("tabIndex",0).focus()))}else{if(!e(t).hasClass("e-alldaycells"))return!1;h=(l="day"==this.currentView()?1:"workweek"==this.currentView()?this.model.workWeek.length:7)*((w=Math.floor(e(t).index()/l))+1),m=e(t)[0].cellIndex,c=parseInt(m)+1;m>=0&&m<parseInt(h)-1&&"undefined"!=m?(e(n[0].cells[c]).hasClass("e-selectedCell")?(e(n[0].cells[m]).removeClass("e-selectedCell"),e(n[0].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(n[0].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus(),this._currentRowIndex=0,this._currentColIndex=c):e(n[0].cells[m]).attr("tabIndex",0).focus()}},_processEnterKey:function(i){var n;if(t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor(),e(i).hasClass("e-workcells")||e(i).hasClass("e-monthcells")||e(i).hasClass("e-alldaycells"))if(0==this.element.find("td.e-selectedCell").length-1){var s=this.getSlotByElement(i),r=this;0==this.model.blockoutSettings.dataSource.filter(function(e){return(e[r._appointmentSettings.endTime]>s.startTime&&e[r._appointmentSettings.startTime]<s.endTime||e[r._appointmentSettings.endTime].getTime()==s.startTime.getTime()&&e[r._appointmentSettings.startTime].getTime()==s.endTime.getTime())&&(!!t.isNullOrUndefined(e[r.model.blockoutSettings.resourceId])||e[r.model.blockoutSettings.resourceId]==s.resources.id)}).length&&this._cellSelection(i)}else this._multipleCellAppointCreation(i);else e(i).hasClass("e-inlinetext")||e(i).hasClass("e-inlineedit")?this._saveAppointment():e(i).hasClass("e-detailedapp e-detailedwindow")?this._appointmentWindow(i):e(i).parent().hasClass("e-allday")?(n=!this._appointmentAddWindow.find("#"+this._id+"allday").ejCheckBox("option","checked"),this._appointmentAddWindow.find(".allday").ejCheckBox({checked:n})):e(i).parent().hasClass("e-recurrence")?(n=!this._appointmentAddWindow.find("#"+this._id+"recurrence").ejCheckBox("option","checked"),this._appointmentAddWindow.find(".recurrence").ejCheckBox({checked:n}),this._recurChecked=!!n,this._repeat(i)):e(i).hasClass("e-scheduledelete")?this.model.showQuickWindow&&this._quickAppDetailsWindow.find(".e-scheduledelete").click():e(i).hasClass("e-editevent")?this.model.showQuickWindow&&this._quickAppDetailsWindow.find(".e-editevent").click():e(i).hasClass(".e-editseries")?this.model.showQuickWindow&&this._quickAppDetailsWindow.find(".e-editseries").click():e(i).hasClass("e-appointment")||e(i).hasClass("e-alldayappointment")||e(i).hasClass("e-monthappointment")?this._cellSelection(i):e(i).parent().hasClass("e-weekday")&&(n=!this._appointmentAddWindow.find("#"+e(i).children()[0].id).ejCheckBox("option","checked"),this._appointmentAddWindow.find("#"+e(i).children()[0].id).ejCheckBox({checked:n}))},_findMinMaxCellIndex:function(){var t,i,n,s,r,a=this.element.find("div.e-draggableworkarea tr"),o=a.length-1,l=this.currentView();"day"==l||"workweek"==l&&this.model.workWeek.length;return this.element.find("td.e-selectedCell").each(function(d,h){var p,m=e(h).index();if(null!=m&&!isNaN(m)){if(null==t?(t=m,n=e(h).parent()[0].rowIndex):t<m?t=t:t!=m&&(t=m,n=e(h).parent()[0].rowIndex),"month"!=l)for(p=0;p<=o;p++)if(e(a[p].cells[t]).hasClass("e-selectedCell")){n=p;break}if(null==i){if(i=m,"month"!=l)for(r=parseInt(i),p=0;p<=o;p++)e(a[p].cells[r]).hasClass("e-selectedCell")&&(s=p)}else if(i>m)i=i;else if(i!=m&&(i=m,"month"!=l))for(r=parseInt(i),p=0;p<=o;p++)e(a[p].cells[r]).hasClass("e-selectedCell")&&(s=p)}}),{rowInx:n,maxrowInx:s,omincolIndex:t,omaxcolIndex:i}},_multipleCellAppointCreation:function(i){var n;if(t.isNullOrUndefined(this._quickAppointWindow)&&this.model.showQuickWindow&&this._renderQuickWindow(),n=t.isNullOrUndefined(i.target)?e(i):e(i.target),this._multiple=!0,this.element.find(".e-inline").length>0&&""!=this.element.find(".e-inlinetext").val()&&this._saveAppointment(),this.element.find(".e-inlineedit").length>0&&this._saveAppointment(),this._slotByCellSelect(n),this.model.allowInline)"vertical"!=this.model.orientation||"vertical"!=this._customOrientation||t.isNullOrUndefined(this._inlineDate)||"month"==this.currentView()||this._isCustomMonthView()||this._refreshDayAppointments(this._app),this.element.find(".e-inlinetext").removeClass("e-inlinetext"),this.element.find(".e-inlinewrapper").remove(),t.scheduleFeatures.resources&&0!=this._tempResource.length&&this._getResourceDetails(n,this._cellIndex),this._inlineAppointment(n);else if(this.model.showQuickWindow&&"beforeOpen"!==i.type){this._quickAppointWindow.find("#"+this._id+"_quickAppwindow").css("display","block"),new Date(new Date(this.cur_StartTime).setHours(0,0,0,0)).getTime()==new Date(new Date(this.cur_EndTime).setHours(0,0,0,0)).getTime()?this._quickAppointWindow.find(".e-quickstartend").html(this._dayFullNames[new Date(this.cur_StartTime).getDay()]+", "+t.format(new Date(this.cur_StartTime),"M",this.model.locale)+", "+t.format(new Date(this.cur_StartTime),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)+" - "+t.format(new Date(this.cur_EndTime),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)):this._quickAppointWindow.find(".e-quickstartend").html(this._dayFullNames[new Date(this.cur_StartTime).getDay()]+", "+t.format(new Date(this.cur_StartTime),"M",this.model.locale)+", "+t.format(new Date(this.cur_StartTime),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)+" - "+this._dayFullNames[new Date(this.cur_EndTime).getDay()]+", "+t.format(new Date(this.cur_EndTime),"M",this.model.locale)+", "+t.format(new Date(this.cur_EndTime),"12"==this._timeMode?this._pattern.t:"HH:mm",this.model.locale)),this._quickAppointWindow.find(".subject").val(""),this.model.readOnly||this._quickAppointWindow.ejDialog("open");var s=e(n).offset().left-(this._quickAppointWindow.width()-e(n).width())/2+10,r=e(n).offset().top-this._quickAppointWindow.height()-10,a=this._quickWindowPosition(s,r,e(n),this._quickAppointWindow);this._quickAppointWindow.ejDialog({position:{X:a.X,Y:a.Y}}),this._quickAppointWindow.find(".subject").focus(),t.scheduleFeatures.resources&&0!=this._tempResource.length&&this._getResourceDetails(e(n))}this._cellClick=!0},_slotByCellSelect:function(t){var i,n,s=this.model.showWeekend?7:this.model.workWeek.length;this._cellIndex=e(t).hasClass("e-workcells")?e(t).index():e(t).hasClass("e-alldaycells")?e(t).index():s-((parseInt(e(t).index()/s)+1)*s-e(t).index())+e(t).parent().index()*s,this._cellIndex=this._resCustomView?e(t).index():this._cellIndex,("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(this._cellIndex="month"!==this.currentView()?Math.floor(this._cellIndex/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount)):this._cellIndex,this._workCellIndex=e(t).parent().index());var r=this._findMinMaxCellIndex(),a="horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.dateRender:this._dateRender:this.monthDays,o=r.omincolIndex,l=r.omaxcolIndex,d=r.rowInx,h=r.maxrowInx,p=a[o],m=a[l];if("vertical"==this.model.orientation&&"vertical"==this._customOrientation)if(e(t).hasClass("e-workcells")){var c=this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount,u=36e5*this.model.startHour+d*c*6e4,g=(this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)-1==h?36e5*this.model.startHour+(h+1)*c*6e4-1:36e5*this.model.startHour+(h+1)*c*6e4;this.cur_StartTime=new Date(new Date(p).setMilliseconds(u)),this.cur_EndTime=new Date(new Date(m).setMilliseconds(g))}else if(e(t).hasClass("e-monthcells")){if(n=(i=this.element.find("td.e-selectedCell")).length-1,this.model.timeScale.enable||"month"==this.currentView())var _=e(i[0]).parent().index()*s+(e(i[0]).index()-Math.floor(e(i[0]).index()/s)*s),f=e(i[n]).parent().index()*s+(e(i[n]).index()-Math.floor(e(i[n]).index()/s)*s),w=new Date(this._dateRender[_]),D=new Date(this._dateRender[f]);else{s=this._dateRender.length;_=(e(i[0]).parent().index()*s+(e(i[0]).index()-Math.floor(e(i[0]).index()/s)*s))%s,f=(e(i[n]).parent().index()*s+(e(i[n]).index()-Math.floor(e(i[n]).index()/s)*s))%s,w=new Date(this._dateRender[_]),D=new Date(this._dateRender[f])}this.cur_StartTime=new Date(w.setHours(0,0,0)),this.cur_EndTime=new Date(D.setHours(23,59,59))}else e(t).hasClass("e-alldaycells")&&(this.cur_StartTime=new Date(p),this.cur_EndTime=new Date(new Date(m).setHours(23,59,59)));else if("month"!=this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable){var S=this.element.find(".e-workcellstab tr:first-child").children().length/this._dateRender.length,y=S<l?l-l%S:l,v=(p=a[parseInt((S<o?o-o%S:o)/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)))],m=a[parseInt(y/((this.model.endHour-this.model.startHour)*this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)))],o%(this.element.find(".e-workcellstab tr:first-child").children().length/this._dateRender.length)),C=(u=this.model.startHour+v/(this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot)),l%(this.element.find(".e-workcellstab tr:first-child").children().length/this._dateRender.length));g=this.model.startHour+C/(this.model.timeScale.minorSlotCount*(60/this.model.timeScale.majorSlot));this.cur_StartTime=new Date(p).setMinutes(60*u),this.cur_EndTime=new Date(m).setMinutes(60*g),this.cur_EndTime=new Date(new Date(this.cur_EndTime).setMinutes(new Date(this.cur_EndTime).getMinutes()+this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount))}else p=this.totdays[o],m=this.totdays[l],this.cur_StartTime=new Date(p),this.cur_EndTime=new Date(new Date(m).setHours(23,59,59))},_addCellSelection:function(t){this.element.find("td.e-selectedCell").length-1>0&&(this.element.find("td.e-selectedCell").removeClass("e-selectedCell"),e(t[this._currentRowIndex].cells[this._currentColIndex]).addClass("e-selectedCell").attr("tabIndex",0).focus())},_processUpArrow:function(t,i){var n;if(e(t).hasClass("e-selectedAppointment")?(this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),e(i[0].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(t).hasClass("e-selectedCell")&&this._addCellSelection(i),n=this.element.find(".e-alldaycells"),e(t).hasClass("e-workcells")){var s=i.length-1,r=this.element.find("td.e-selectedCell").parent()[0].rowIndex,a=this.element.find("td.e-selectedCell")[0].cellIndex,o=parseInt(r)-1;if(r>0&&r<=s&&"undefined"!=r){if(e(i[r-1].cells[a]).hasClass("e-resourceheadercells"))return!1;e(i[r].cells[a]).removeClass("e-selectedCell").blur(),e(i[o].cells[a]).addClass("e-selectedCell").attr("tabIndex",0).focus()}else 0==r&&("vertical"==this.model.orientation&&"vertical"==this._customOrientation?(r=this.element.find("td.e-selectedCell").parent()[0].rowIndex,a=this.element.find("td.e-selectedCell")[0].cellIndex,e(i[r].cells[a]).removeClass("e-selectedCell").blur(),e(this.element).attr("tabIndex",0).focus(),e(n[a]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(i[0].cells[a]).addClass("e-selectedCell").attr("tabIndex",0).focus())}else{if(e(t).hasClass("e-alldaycells"))return!1;if(!e(t).hasClass("e-monthcells"))return!1;s=i.length-1,r=this.element.find("td.e-selectedCell").parent()[0].rowIndex,a=this.element.find("td.e-selectedCell")[0].cellIndex,o=parseInt(r)-1;if(!(r>=0&&r<=s&&"undefined"!=r))return!1;o>=0?(e(i[r].cells[a]).removeClass("e-selectedCell").blur(),e(i[o].cells[a]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(i[0].cells[a]).addClass("e-selectedCell").attr("tabIndex",0).focus(),this._selectCurrentMonth(i,r,a)}},_processDown:function(t,i){var n,s;if(e(t).hasClass("e-selectedAppointment")?(this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),e(i[0].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(t).hasClass("e-selectedCell")&&this._addCellSelection(i),e(t).hasClass("e-workcells")){var r=i.length-1,a=this.element.find("td.e-selectedCell").parent()[0].rowIndex,o=this.element.find("td.e-selectedCell")[0].cellIndex,l=parseInt(a)+1;if(a>=0&&a<=r&&"undefined"!=a)if(l<=r){if(e(i[a+1].cells[o]).hasClass("e-resourceheadercells"))return!1;e(i[a].cells[o]).removeClass("e-selectedCell").blur(),e(i[l].cells[o]).addClass("e-selectedCell").attr("tabIndex",0).focus()}else e(i[a].cells[o]).attr("tabIndex",0).focus()}else if(e(t).hasClass("e-alldaycells"))n=this.element.find("td.e-selectedCell")[0].cellIndex,s=this.element.find(".e-alldaycells"),e(s[n]).removeClass("e-selectedCell").blur(),e(this.element.find(".e-workcells")[n]).addClass("e-selectedCell").attr("tabIndex",0).focus();else{if(!e(t).hasClass("e-monthcells"))return!1;r=i.length-1,a=this.element.find("td.e-selectedCell").parent()[0].rowIndex,o=this.element.find("td.e-selectedCell")[0].cellIndex,l=parseInt(a)+1;a>=0&&a<r&&"undefined"!=a&&(l<=7?(e(i[a].cells[o]).removeClass("e-selectedCell").blur(),e(i[l].cells[o]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(i[l-1].cells[o]).addClass("e-selectedCell").attr("tabIndex",0).focus()),this._selectCurrentMonth(i,a,o)}},_processRight:function(i,n){var s,r,a,o,l,d;if(e(i).hasClass("e-selectedAppointment")?(this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),e(n[0].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(i).hasClass("e-selectedCell")&&this._addCellSelection(n),e(i).hasClass("e-workcells")){var h=n[0].cells.length,p=this.element.find("td.e-selectedCell").parent()[0].rowIndex,m=this.element.find("td.e-selectedCell")[0].cellIndex,c=parseInt(m)+1;if(m>=0&&m<parseInt(h)-1&&"undefined"!=m)e(n[p].cells[m]).removeClass("e-selectedCell").blur(),e(n[p].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus();else{if(m!=parseInt(h)-1)return!1;"month"!=this.currentView()?(s=e(i).parent()[0].rowIndex,this.element.find("div.e-navigatenext").click(),e(n[s].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()):(this.element.find("div.e-navigatenext").click(),e(this.element.find("div.e-draggableworkarea tr")[p].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus())}}else if(e(i).hasClass("e-monthcells")){var u=Math.floor(e(i).index()/7),g=(n.length,resmaxcolindex=7*(parseInt(u)+1)),_=7*parseInt(u);p=e(i).parent()[0].rowIndex,m=e(i)[0].cellIndex;(c=parseInt(m)+1)<g&&(e(n[p].cells[m]).removeClass("e-selectedCell").blur(),e(n[p].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus()),m==parseInt(resmaxcolindex)-1&&p<this._dateRender.length/7&&(e(n[p].cells[m]).removeClass("e-selectedCell").blur(),m=_,(r=parseInt(p)+1)<this._dateRender.length/7?(e(n[r].cells[m]).addClass("e-selectedCell").attr("tabIndex",0).focus(),c<g&&e(n[r].cells[c]).addClass("e-selectedCell").attr("tabIndex",0).focus()):(a=m/7,this.element.find("div.e-navigatenext").click(),o=t.isNullOrUndefined(this.model.group)?0:7*a,e(this.element.find(".e-monthcells")[o]).addClass("e-selectedCell").attr("tabIndex",0).focus())),this._selectCurrentMonth(n,p,m)}else if(e(i).hasClass("e-alldaycells"))if(l=this.element.find("td.e-selectedCell")[0].cellIndex,d=parseInt(this.element.find(".e-alldaycells").length)-1,l>=0&&l<d)e(this.element.find(".e-alldaycells")[l]).removeClass("e-selectedCell").blur(),e(this.element.find(".e-alldaycells")[parseInt(l)+1]).addClass("e-selectedCell").attr("tabIndex",0).focus();else{if(l!=d)return!1;this.element.find("div.e-navigatenext").click(),e(this.element.find(".e-alldaycells")[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()}this._keyPressed=!0},_processLeft:function(i,n){var s,r,a,o,l,d,h,p;if(e(i).hasClass("e-selectedAppointment")?(this.element.find(".e-selectedAppointment").removeClass("e-selectedAppointment"),e(n[0].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()):e(i).hasClass("e-selectedCell")&&this._addCellSelection(n),e(i).hasClass("e-workcells")){var m=n[0].cells.length,c=this.element.find("td.e-selectedCell").parent()[0].rowIndex,u=this.element.find("td.e-selectedCell")[0].cellIndex,g=parseInt(u)-1;if(u>0&&u<=parseInt(m)-1&&"undefined"!=u)e(n[c].cells[u]).removeClass("e-selectedCell").blur(),e(n[c].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus();else{if(0!=u)return!1;"month"!=this.currentView()?(s=e(i).parent()[0].rowIndex,this.element.find("div.e-navigateprevious").click(),e(n[s].cells[m-1]).addClass("e-selectedCell").attr("tabIndex",0).focus()):(this.element.find("div.e-navigateprevious").click(),e(this.element.find("div.e-draggableworkarea tr")[c].cells[this.totdays.length-1]).addClass("e-selectedCell").attr("tabIndex",0).focus())}}else if(e(i).hasClass("e-monthcells")){var _=Math.floor(e(i).index()/7),f=(n.length,7*(parseInt(_)+1)),w=7*parseInt(_),D="day"==this.currentView()?1:"workweek"==this.currentView()?this.model.workWeek.length:7,S="vertical"==this.model.orientation&&"vertical"==this._customOrientation?D:"month"==this.currentView()?this.totdays.length:D*(this.model.endHour-this.model.startHour)*2;m=0!=this._tempResource.length&&!t.isNullOrUndefined(this.model.group)&&t.scheduleFeatures.resources&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.render_Resources[this.render_Resources.length-1].length*S:S,c=this.element.find("td.e-selectedCell").parent()[0].rowIndex,(u=this.element.find("td.e-selectedCell")[0].cellIndex)==w&&c>=0?(r=parseInt(c)-1,a=parseInt(f)-1,r>=0?(e(n[c].cells[u]).removeClass("e-selectedCell").blur(),e(n[r].cells[a]).addClass("e-selectedCell").attr("tabIndex",0).focus()):(o=u/7,this.element.find("div.e-navigateprevious").click(),l=this._dateRender.length/7,d=t.isNullOrUndefined(this.model.group)?0:7*o,e(this.element.find("div.e-draggableworkarea tr")[l-1].cells[d+6]).addClass("e-selectedCell").attr("tabIndex",0).focus())):u<f&&(g=parseInt(u)-1,e(n[c].cells[u]).removeClass("e-selectedCell").blur(),e(n[c].cells[g]).addClass("e-selectedCell").attr("tabIndex",0).focus()),this._selectCurrentMonth(n,c,u)}else if(e(i).hasClass("e-alldaycells"))if(h=this.element.find("td.e-selectedCell")[0].cellIndex,p=parseInt(this.element.find(".e-alldaycells").length)-1,h>0&&h<=p)e(this.element.find(".e-alldaycells")[h]).removeClass("e-selectedCell").blur(),e(this.element.find(".e-alldaycells")[parseInt(h)-1]).addClass("e-selectedCell").attr("tabIndex",0).focus();else{if(0!=h)return!1;this.element.find("div.e-navigateprevious").click(),e(this.element.find(".e-alldaycells")[p]).addClass("e-selectedCell").attr("tabIndex",0).focus()}this._keyPressed=!0},_selectCurrentMonth:function(t,i,n){t.find(".e-selectedCell").hasClass("e-othermonths")&&(t.find(".e-selectedCell").removeClass("e-selectedCell").blur(),e(t[i].cells[n]).addClass("e-selectedCell").attr("tabIndex",0).focus())},_navigateToolbarRight:function(e){var t,i=this.model.views,n=this.element.find(".e-commonviewbutton.e-"+this.currentView()).parent().index();n<i.length-1&&(t=i[n+1].toLowerCase(),this._navView=!0,this._viewChange(e,this.currentView(),t),this.element.find("#"+this._id+"_navigator").ejDatePicker({value:new Date(this.currentDate())}))},_navigateToolbarLeft:function(e){var t,i=this.element.find(".e-commonviewbutton.e-"+this.currentView()).parent().index();i>0&&(t=this.model.views[i-1].toLowerCase(),this._navView=!0,this._viewChange(e,this.currentView(),t),this.element.find("#"+this._id+"_navigator").ejDatePicker({value:new Date(this.currentDate())}))},_newAppWindow:function(i){var n,s,r,a,o;if(e(i).hasClass("e-selectedCell")){t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),this._currentAction=t.Schedule.Actions.Add;var l=null==i?o:i,d=(e(l).parent().index(),e(l).index(),"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||"month"!=this.currentView()?"vertical"==this.model.orientation&&"vertical"==this._customOrientation||"customview"==this.currentView()&&this._dateRender.length<=7?this.dateRender:this._dateRender:this.monthDays);if(d=("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&"customview"==this.currentView()&&this._dateRender.length<=7?this._dateRender:d,n=parseInt(this.element.find("td.e-selectedCell").length)-1,_target=e(l),this._cellIndex=this.model.timeScale.enable?_target.hasClass("e-workcells")?_target.index():_target.hasClass("e-alldaycells")?_target.index():this._isCustomMonthView()&&this._oneWeek?_target.index():7-(7*(parseInt(_target.index()/7)+1)-_target.index())+7*_target.parent().index():"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&"month"==this.currentView()||"customview"==this.currentView()&&this._dateRender.length>=7?7-(7*(parseInt(_target.index()/7)+1)-_target.index())+7*_target.parent().index():_target.index(),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&(this._cellIndex=this.model.timeScale.enable?"month"===this.currentView()||this._isCustomMonthView()?this._cellIndex:Math.floor(this._cellIndex/(2*(this.model.endHour-this.model.startHour))):_target.index(),this._workCellIndex=_target.parent().index()),0==n){if(s=new Date(d[this._cellIndex]),this.model.minDate>s||this.model.maxDate<s)return!1;_target.hasClass("e-workcells")&&this.model.timeScale.enable&&"month"!==this.currentView()&&!this._isCustomMonthView()?(r=("vertical"==this.model.orientation&&"vertical"==this._customOrientation?this.model.startHour+_target.parent().index()/2:this.model.startHour+(_target.index()-2*(this.model.endHour-this.model.startHour)*this._cellIndex)/2).toString().split("."),startTime=new Date(s).setHours(parseInt(r[0]),5==parseInt(r[1])?30:0),a=23==parseInt(new Date(startTime).getHours())&&30==parseInt(new Date(startTime).getMinutes())?new Date(startTime).getMinutes()+29:new Date(startTime).getMinutes()+30,endTime=new Date(new Date(startTime).setMinutes(a)),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.find(".allday").ejCheckBox({checked:!1})):(startTime=new Date(new Date(s).setHours(0,0,0)),endTime=new Date(new Date(s).setHours(23,59,59)),t.isNullOrUndefined(this._appointmentAddWindow)||this._appointmentAddWindow.find(".allday").ejCheckBox({checked:!0}))}else if(n>0){var h=this._findMinMaxCellIndex(),p=h.omincolIndex,m=h.omaxcolIndex,c=h.rowInx,u=h.maxrowInx;if("vertical"==this.model.orientation&&"vertical"==this._customOrientation)if(e(i).hasClass("e-workcells")){var g=d[p],_=d[m],f=(this.model.startHour+c/2).toString().split("."),w=(this.model.startHour+u/2).toString().split(".");startTime=new Date(new Date(g).setHours(parseInt(f[0]),5==parseInt(f[1])?30:0)),endTime=new Date(_).setHours(parseInt(w[0]),5==parseInt(w[1])?30:0),endTime=new Date(new Date(endTime).setMinutes(new Date(endTime).getMinutes()+30))}else if(e(i).hasClass("e-monthcells")){var D=this.element.find("td.e-selectedCell"),S=7*e(D[0]).parent().index()+(e(D[0]).index()-7*Math.floor(e(D[0]).index()/7)),y=7*e(D[n]).parent().index()+(e(D[n]).index()-7*Math.floor(e(D[n]).index()/7)),v=new Date(this._dateRender[S]),C=new Date(this._dateRender[y]);startTime=new Date(new Date(v).setHours(0,0,0)),endTime=new Date(new Date(C).setHours(23,59,59))}else e(i).hasClass("e-alldaycells")&&(startTime=new Date(new Date(d[p]).setHours(0,0,0)),endTime=new Date(new Date(d[m]).setHours(23,59,59)));else if("month"!=this.currentView()&&!this._isCustomMonthView()&&this.model.timeScale.enable){g=d[0],_=d[0],f=(this.model.startHour+p/2).toString().split("."),w=(this.model.startHour+m/2).toString().split(".");startTime=new Date(new Date(g).setHours(parseInt(f[0]),5==parseInt(f[1])?30:0)),endTime=new Date(_).setHours(parseInt(w[0]),5==parseInt(w[1])?30:0),endTime=new Date(new Date(endTime).setMinutes(new Date(endTime).getMinutes()+30))}else{g=this.totdays[p],_=this.totdays[m],f=this.model.startHour.toString().split("."),w=this.model.startHour.toString().split(".");startTime=new Date(g).setHours(parseInt(f[0]),5==parseInt(f[1])?30:0),endTime=new Date(_).setHours(parseInt(w[0]),5==parseInt(w[1])?30:0),endTime=new Date(new Date(endTime).setMinutes(new Date(endTime).getMinutes()+30)),endTime=new Date(new Date(endTime).setHours(23,59,59))}}if(o={startTime:new Date(startTime),endTime:new Date(endTime),target:_target,resources:null==this.model.appointmentWindowOpen&&null==this.model.cellDoubleClick||0==this._tempResource.length?null:this._getResourceValue(_target)},this._trigger("appointmentWindowOpen",o))return!1;t.scheduleFeatures.resources&&0!=this._tempResource.length&&this._renderResourceData(e(l),this._cellIndex),this._appointmentAddWindow.find("#"+this._id+"startdate").ejDatePicker("option","value",new Date(startTime)),this._appointmentAddWindow.find("#"+this._id+"enddate").ejDatePicker("option","value",new Date(endTime)),this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value",t.format(new Date(startTime),this._pattern.t,this.model.locale)),this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value",t.format(new Date(endTime),this._pattern.t,this.model.locale)),(e(i).hasClass("e-alldaycells")||"month"==this.currentView()||this._isCustomMonthView())&&this._appointmentAddWindow.find(".allday").ejCheckBox({checked:!0}),this._timeZoneCollection(null),this._tempStart=this._appointmentAddWindow.find("#"+this._id+"starttime").ejTimePicker("option","value"),this._tempEnd=this._appointmentAddWindow.find("#"+this._id+"endtime").ejTimePicker("option","value"),this._alldayCheck(),this.model.readOnly||(this._appointmentAddWindow.find(".e-appsave,#"+this._id+"donerecur").ejButton("enable",!0),this._mediaQuery&&this._appointmentAddWindow.find(".e-btndelete").css("display","none"),this._appointmentAddWindow.ejDialog("open")),this._appointmentAddWindow.find(".subject").focus(),this._cellClick=!1}},_tooltipEvents:function(e){"disable"==e?t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("instance")._wireEvents(!1):t.isNullOrUndefined(this.element.data("ejTooltip"))||this.element.ejTooltip("instance")._wireEvents(!0)},_showToolTip:function(i){var n,s;i=i.event;if(t.isNullOrUndefined(i.target))return!1;if(n=this.element.data("ejTooltip"),e(i.target).hasClass("e-appup")||e(i.target).hasClass("e-appdown"))return n.setModel({content:this._getLocalizedLabels("AppointmentIndicator")}),!0;if(e(i.target).hasClass("e-appsoverflow"))return this._showAppCount(i);if(this.model.tooltipSettings.enable&&!t.isTouchDevice()){if(0==(s=this._getAppDetails(i.currentTarget)))return!1;if(t.isNullOrUndefined(this.model.tooltipSettings.templateId))var r="12"==this._timeMode?t.format(s[this._appointmentSettings.startTime],this._pattern.t,this.model.locale):t.format(s[this._appointmentSettings.startTime],"HH:mm",this.model.locale),a="12"==this._timeMode?t.format(s[this._appointmentSettings.endTime],this._pattern.t,this.model.locale):t.format(s[this._appointmentSettings.endTime],"HH:mm",this.model.locale),o=(""==s[this._appointmentSettings.subject]||t.isNullOrUndefined(s[this._appointmentSettings.subject])?this._getLocalizedLabels("NoTitle"):s[this._appointmentSettings.subject])+":&nbsp;("+r+"-"+a+")";else o=e(this.model.tooltipSettings.templateId).render(s).trim();return n.setModel({content:o}),!0}return!1},_showAppCount:function(i){var n,s,r,a,o,l,d=i.target.id.split("_"),h="day"!=this.currentView()?new Date(parseInt(e(i.currentTarget).attr("data-cellinfo"))):new Date(e(i.currentTarget).attr("data-cellinfo"));if(t.scheduleFeatures.resources&&!t.isNullOrUndefined(this.model.group)&&(n=this._resourceSort()[parseInt(d[d.length-2])].id),("horizontal"==this.model.orientation||"horizontal"==this._customOrientation)&&"month"!=this.currentView())var p=parseInt(d[d.length-1]),m=new Date(h.setMilliseconds(6e4*(60*this.model.startHour+p*(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount)))),c=new Date(m.setMilliseconds(this.model.timeScale.majorSlot/this.model.timeScale.minorSlotCount*6e4));if(s=e.templates(e(this.model.appointmentTemplateId).html()),w=this.element.find(".e-appsoverflow").height(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation){var u=this.element.find(".e-monthcells").outerHeight(),g=this.element.find(".e-monthappointment").outerHeight(),_=this.element.find(".e-monthheader").height();t.isNullOrUndefined(g)&&(g=this.model.appointmentTemplateId?"100%"==e(s.markup).css("height")?u-this.element.find(".e-monthheader").height()-15:"0px"==e(s.markup).css("height")?20:e(s.markup).height():19);var f=parseInt(e(i.currentTarget).attr("data-appcount"))*g+_+w;D=0==(D=Math.round((f-u)/g))?1:D}else{r=this.element.find(".e-workcells")[0].offsetHeight,a="month"==this.currentView()?a=this.element.find(".e-monthappointment").outerHeight():this.element.find(".e-appointment").height(),t.isNullOrUndefined(a)&&(a=this.model.appointmentTemplateId?"100%"==e(s.markup).css("height")?r-15:"0px"==e(s.markup).css("height")?20:e(s.markup).height():20);var w=this.element.find(".e-appsoverflow").height(),D=(f=parseInt(e(i.currentTarget).attr("data-appcount"))*a+w,Math.ceil((f-r)/a))}return o={Date:h,ResourceValue:n,StartTime:m,EndTime:c},this._overflowApp=o,l=this.element.data("ejTooltip"),!this._trigger("overflowButtonHover",{event:i,datas:o})&&(l.setModel({content:D+"&nbsp;"+this._getLocalizedLabels("OverFlowAppCount")}),!0)},_horizontalRender:function(){var e,i,n,s,r;t.isNullOrUndefined(this.model.group)||0==this._tempResource.length||this.element.find(".resemptytd").width(this.element.find(".e-horizontalrestd").width()<100?5:this.element.find(".e-horizontalrestd").width()>=100&&this.element.find(".e-horizontalrestd").width()<=150?10:25),this._mediaQuery?this.element.find(".e-parentnode,.e-childnode").css({height:this.element.find(".e-workcells").height()}):(e=0==this._tempResource.length?this.res1.length:this._resourceSort().length,i=this.element.find("div#"+this._id+"_scroller").ejScroller("isHScroll")?this.element.find("div#"+this._id+"_scroller").find(".e-hscroll").outerHeight():0,i=t.isNullOrUndefined(i)?0:i,n=this.scHeight-1-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top+i),t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?this.element.find(".e-workcells").css({height:this.model.cellHeight?parseInt(this.model.cellHeight):Math.round(n-1)+"px"}):(s=(s=Math.round(n/e)-1)<20?20:s,this.element.find(".e-workcells").css({height:this.model.cellHeight?parseInt(this.model.cellHeight):s+"px"}),this.element.find(".e-childnode").css({height:this.model.cellHeight?parseInt(this.model.cellHeight):s+"px"}),this.element.find(".e-parentnode").css({height:this.model.cellHeight?parseInt(this.model.cellHeight):s+"px"}),"agenda"!=this.currentView()&&(r=this.element.find(".e-draggableworkarea").offset().top-this.element.find(".e-workcellstab").offset().top,this.element.find(".e-horires").css({top:-r+"px"})))),this.element.find(".e-workcells").height()>n&&this.element.find("div#"+this._id+"_scroller").ejScroller("refresh"),this.element.find("div#"+this._id+"_scroller").ejScroller("isVScroll")&&this._showScrollTd()},_monthCellsRender:function(){var e=this.element.find(".e-workcellstab tr").length,t=parseInt(this.scHeight)-1-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top);this.element.find(".e-monthcells, .e-timecells").outerHeight(this.model.cellHeight?parseInt(this.model.cellHeight)+1:Math.round(t/e))},_processTab:function(t,i,n){var s,r,a,o,l,d,h=this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,div.e-agendaappointment");if((t.id==this._id||e(t).hasClass("e-datedisplay"))&&(0!=h.length?e(h[0]).addClass("e-selectedAppointment").attr("tabIndex",0).focus():e(n[0].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()),e(t).hasClass("e-selectedCell")&&0!=h.length){if(s=this.element.find("td.e-selectedCell"),(r=parseInt(s.length)-1)>0)for(a=0;a<=r;a++)s.eq(a).removeClass("e-selectedCell").blur();else e(t).removeClass("e-selectedCell").blur();e(h[0]).addClass("e-selectedAppointment").attr("tabIndex",0).focus()}e(t).hasClass("e-navigateprevious")?this.element.find(".e-navigatenext").attr("tabIndex",0).focus():e(t).hasClass("e-navigatenext")&&(e(n[0].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus(),e(n[0].cells[0]).hasClass("e-resourceheadercells")&&e(n[1].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()),(e(t).hasClass("e-appointment")||e(t).hasClass("e-alldayappointment")||e(t).hasClass("e-monthappointment")||e(t).hasClass("e-agendaappointment"))&&(o=h.length,(l=this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,div.e-agendaappointment").index(this.element.find(".e-selectedAppointment")))<o&&l>=0?(e(h[l]).removeClass("e-selectedAppointment").blur(),(d=parseInt(l)+1)<o?e(h[d]).addClass("e-selectedAppointment").attr("tabIndex",0).focus():d==o&&this.element.find(".e-navigateprevious").attr("tabIndex",0).focus()):l==o&&this.element.find(".e-navigateprevious").attr("tabIndex",0).focus())},_reverseTab:function(t,i,n){var s,r,a,o,l,d,h,p=this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,div.e-agendaappointment");if((t.id==this._id||e(t).hasClass("e-datedisplay"))&&(r=parseInt(p.length)-1,0!=p.length&&e(p[r]).addClass("e-selectedAppointment").attr("tabIndex",0).focus()),s=p.length,e(t).hasClass("e-selectedCell")&&(r=p.length-1,0!=p.length)){if(a=this.element.find("td.e-selectedCell"),(o=parseInt(a.length)-1)>0)for(l=0;l<=o;l++)a.eq(l).removeClass("e-selectedCell").blur();else e(t).removeClass("e-selectedCell").blur();e(p[r]).addClass("e-selectedAppointment").attr("tabIndex",0).focus()}e(t).hasClass("e-navigatenext")?e(this.element).find(".e-navigateprevious").attr("tabIndex",0).focus():e(t).hasClass("e-navigateprevious")&&(e(n[0].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus(),e(n[0].cells[0]).hasClass("e-resourceheadercells")&&e(n[1].cells[0]).addClass("e-selectedCell").attr("tabIndex",0).focus()),(e(t).hasClass("e-appointment")||e(t).hasClass("e-alldayappointment")||e(t).hasClass("e-monthappointment")||e(t).hasClass("e-agendaappointment"))&&((d=this.element.find("div.e-appointment,div.e-alldayappointment,div.e-monthappointment,div.e-agendaappointment").index(this.element.find(".e-selectedAppointment")))<s&&d>0?(e(p[d]).removeClass("e-selectedAppointment").blur(),(h=parseInt(d)-1)<s&&d>=0?e(p[h]).addClass("e-selectedAppointment").attr("tabIndex",0).focus():0==h&&e(this.element).find(".e-navigatenext").attr("tabIndex",0).focus()):0==d&&(e(p[d]).removeClass("e-selectedAppointment").blur(),e(this.element).find(".e-navigatenext").attr("tabIndex",0).focus()))},_stopDefaultAction:function(e){e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault()},_getLocalizedLabels:function(e){return"Categorize"==e?t.isNullOrUndefined(this.model.categorizeSettings.title)?this._localizedLabels[e]===i?t.Schedule.Locale["en-US"][e]:this._localizedLabels[e]:this.model.categorizeSettings.title:"Priority"==e?t.isNullOrUndefined(this.model.prioritySettings.title)?this._localizedLabels[e]===i?t.Schedule.Locale["en-US"][e]:this._localizedLabels[e]:this.model.prioritySettings.title:this._localizedLabels[e]===i?t.Schedule.Locale["en-US"][e]:this._localizedLabels[e]},_refreshDatasource:function(){var e,i,n;if(!t.isNullOrUndefined(this.dataSource())&&this.dataSource().length>0)for(i=0,n=(e=this.dataSource()).length;i<n;i++)this._timeZoneAppointments(e[i],"")},refreshAppointments:function(){t.isNullOrUndefined(this._appointmentSettings)||(this._dataManager=this.dataSource()instanceof t.DataManager?this.dataSource():null!=this.dataSource()?t.DataManager(this.dataSource()):null),this._refreshDatasource(),this._bindAppointmentsData("Refresh")},refresh:function(){this._refreshDatasource();var e=this._getSetScrollPosition();this._destroy(),this._init(),this._getSetScrollPosition(e)},getSlotByElement:function(i){var n=t.isNullOrUndefined(i)?e(this.element.find("td.e-selectedCell")):e(i);return!t.isNullOrUndefined(n)&&0!=n.length&&"agenda"!=this.currentView()&&((n.hasClass("e-workcells")||n.hasClass("e-monthcells")||n.hasClass("e-alldaycells"))&&(1==n.length?this._slotByElement(n,""):this._slotByCellSelect(n)),{startTime:new Date(this.cur_StartTime),endTime:new Date(this.cur_EndTime),resources:t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?null:this._getResourceValue(n)})},saveAppointment:function(i){var n,s,r,a,o,l,d,h,p,m,c,u,g,_,f,w,D,S,y,v,C,T,b,R,A;if(!this.model.readOnly){if(t.isNullOrUndefined(this._appointmentAddWindow)&&this._renderAppointmentWindow(),t.isNullOrUndefined(this._appointmentAddWindow)||0!=this._appointmentAddWindow.find(".e-recurEditor").length||this._renderRecurrenceEditor(),t.isNullOrUndefined(this._appointmentAddWindow)&&t.RecurrenceEditor.prototype._initializePrivateProperties(),n=t.isNullOrUndefined(this._appointmentAddWindow)?t.RecurrenceEditor.prototype:this._appointmentAddWindow.find(".e-recurrenceeditor").data("ejRecurrenceEditor"),this._sortAppById(this._processed),this._publicMethodSave=!1,this.model.appointmentSettings.applyTimeOffset&&(t.isNullOrUndefined(i[this._appointmentSettings.startTimeZone])&&(i[this._appointmentSettings.startTimeZone]=null==this.model.timeZone?"UTC "+this._timezoneStringValue():this.model.timeZone),t.isNullOrUndefined(i[this._appointmentSettings.endTimeZone])&&(i[this._appointmentSettings.endTimeZone]=null==this.model.timeZone?"UTC "+this._timezoneStringValue():this.model.timeZone)),t.isNullOrUndefined(this.model.serverEvents)&&this._dataManager.dataSource.offline&&(r=this._timeZoneSavingAppoint(i,""),i=r.obj),t.isNullOrUndefined(i[this._appointmentSettings.id])&&""!=!i[this._appointmentSettings.id]||(a=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,i[this._appointmentSettings.id])),t.isNullOrUndefined(a[0])||(i.Guid=a[0].Guid,i.AppTaskId=a[0].AppTaskId,i[this._appointmentSettings.recurrenceId]=a[0][this._appointmentSettings.recurrenceId],i[this._appointmentSettings.recurrenceExDate]=a[0][this._appointmentSettings.recurrenceExDate],i.ParentId=a[0].ParentId)),B=this,this._maxId=s=t.isNullOrUndefined(this._appMainId)?1:this._appMainId+1,o="save"==this._currentAction?"edit":this._currentAction,t.isNullOrUndefined(i.AppTaskId)||""==i.AppTaskId){if(i[this._appointmentSettings.id]=t.isNullOrUndefined(i[this._appointmentSettings.id])||""==i[this._appointmentSettings.id]?s:i[this._appointmentSettings.id],i.AppTaskId=i.ParentId=s,i.Guid=this._guidFormatGenerate(),this._trigger("actionBegin",{data:i,requestType:"appointmentSave",methodType:"public"})||(t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentCreate")||this._timeZoneAppointments(i,""),this._trigger("beforeAppointmentCreate",{appointment:i,methodType:"public"})))return!1;for(Y=t.isNullOrUndefined(this.model.serverEvents)?this._timeZoneAppointments(i,""):i,K=this._dataManager.insert(Y,this.model.appointmentSettings.query._fromTable),t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentCreate")?new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(Y,"reverse")):new t.DataManager(this._currentAppointmentData).update("AppTaskId",Y),this.dataSource()instanceof t.DataManager&&this._currentAppointmentData.push(Y),this._appointmentProcessing(i),this._currentViewAppointments=this.getCurrentViewAppointments(),d=0,A=(l=this._currentViewAppointments.filter(function(e){return i.ParentId==e.ParentId})).length;d<A;d++)this._refreshDayAppointments(l[d]);this._appMainId=this._sortAppById(this._processed)[this._processed.length-1].AppTaskId,this._trigger("appointmentCreated",{appointment:Y,requestType:"appointmentSaved",methodType:"public"}),this._trigger("actionComplete",{data:Y,requestType:"appointmentSave",methodType:"public"}),!t.isNullOrUndefined(K)&&e.isFunction(K.promise)&&this.dataSource()instanceof t.DataManager&&K.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))B._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(B._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)Y[B._appointmentSettings.id]=r.added[n][B._appointmentSettings.id],Y[B._appointmentSettings.recurrence]||(Y.ParentId=r.added[n][B._appointmentSettings.id]),new t.DataManager(B._processed).update("Guid",Y)})}else if("editOccurrence"==this._currentAction){if(this._trigger("actionBegin",{data:i,requestType:"appointmentEdit",currentAction:o})||(g=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,i[this._appointmentSettings.id])),t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")||(g=[this._timeZoneAppointments(g[0],"")],i=this._timeZoneAppointments(i,"")),_=i[this._appointmentSettings.recurrence]?{appointment:i,currentAction:o,recurrenceCollection:{occurrences:i,parentData:g[0]}}:{appointment:i,currentAction:o},this._trigger("beforeAppointmentChange",_)))return!1;var I=null==(E=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0])[this._appointmentSettings.recurrenceId]?E.ParentId:E[this._appointmentSettings.recurrenceId],k=null==E[this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId,x=this._appointmentRecurrenceSort(new t.DataManager(this._processed).executeLocal((new t.Query).where(k,t.FilterOperators.equal,I))),O=this._recuCollectionIndex(x,E),M=this._appointmentSettings;if(0==O?!t.isNullOrUndefined(x[O+1])&&!(new Date(new Date(x[O+1][M.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(i[M.endTime]).setHours(0,0,0,0)).getTime()):O==x.length-1?!(new Date(new Date(x[O-1][M.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(i[M.startTime]).setHours(0,0,0,0)).getTime()):!(new Date(new Date(x[O-1][M.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(i[M.startTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(x[O+1][M.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(i[M.endTime]).setHours(0,0,0,0)).getTime()))return this._alertCreateError(),!1;u=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),this._objDate=u,k=null==this._objDate[0][this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId,H=this._deleteOcurrence(this._objDate[0][k],new Date(u[0][this._appointmentSettings.startTime])),i[this._appointmentSettings.recurrence]=!0,i[this._appointmentSettings.recurrenceRule]=H[0][this._appointmentSettings.recurrenceRule]+";RECUREDITID="+H[0].ParentId,i[this._appointmentSettings.recurrenceId]=H[0][this._appointmentSettings.recurrenceId],i[this._appointmentSettings.recurrenceExDate]=H[0][this._appointmentSettings.recurrenceExdate],i.Guid=u[0].Guid,i[this._appointmentSettings.id]=u[0][this._appointmentSettings.id],U=[],(L=this._addAppData(i,s,new Date(i[this._appointmentSettings.startTime]),new Date(i[this._appointmentSettings.endTime]),i[this._appointmentSettings.recurrenceId]))[this._appointmentSettings.id]=L.AppTaskId,U.push(L);var N=[],H=[],W=U[0][this._appointmentSettings.startTimeZone];for(t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")?N.push(this._timeZoneAppointments(U[0],"")):N.push(U[0]),h=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,this._parentId)),t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")?H.push(this._timeZoneAppointments(h[0],"")):H.push(h[0]),Z=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",K=this._dataManager.saveChanges({added:N,changed:H,deleted:[]},Z,this.model.appointmentSettings.query._fromTable),p=(t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentCreate"))&&W!=this.model.timeZone?this._timeZoneAppointments(N[0],"reverse"):N[0],new t.DataManager(this._currentAppointmentData).update("AppTaskId",p),m=(t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentCreate"))&&W!=this.model.timeZone?this._timeZoneAppointments(H[0],"reverse"):H[0],new t.DataManager(this._currentAppointmentData).update("AppTaskId",m),this.dataSource()instanceof t.DataManager&&this._currentAppointmentData.push(U[0]),c=this._processed.filter(function(e){return e.Guid==U[0].Guid}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:c},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:c},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:c},"Guid"),this._appointmentProcessing(U[0]),this._currentViewAppointments=this.getCurrentViewAppointments(),b=0,A=(T=this._currentViewAppointments.filter(function(e){return e.ParentId==U[0].ParentId})).length;b<A;b++)this._refreshDayAppointments(T[b]);this._trigger("appointmentChanged",{appointment:U[0],requestType:"appointmentChanged",currentAction:o,methodType:"public"}),this._trigger("actionComplete",{data:U,requestType:"appointmentEdit",currentAction:o,methodType:"public"}),!t.isNullOrUndefined(K)&&e.isFunction(K.promise)&&this.dataSource()instanceof t.DataManager&&K.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))B._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(B._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)U[0][B._appointmentSettings.id]=r.added[n][B._appointmentSettings.id],U[0][B._appointmentSettings.recurrence]||(U[0].ParentId=r.added[n][B._appointmentSettings.id]),new t.DataManager(B._processed).update("Guid",U[0])})}else if("save"==this._currentAction&&i[this._appointmentSettings.recurrence]||this._currentAction==t.Schedule.Actions.EditSeries){if(u=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid)),this._currentAction!=t.Schedule.Actions.EditSeries){t.isNullOrUndefined(u[0][this._appointmentSettings.recurrenceRule])||(i[this._appointmentSettings.recurrenceRule]=u[0][this._appointmentSettings.recurrenceRule]);var E;I=null==(E=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,this._appUid))[0])[this._appointmentSettings.recurrenceId]?E.ParentId:E[this._appointmentSettings.recurrenceId],k=null==E[this._appointmentSettings.recurrenceId]?"ParentId":this._appointmentSettings.recurrenceId,x=this._appointmentRecurrenceSort(new t.DataManager(this._processed).executeLocal((new t.Query).where(k,t.FilterOperators.equal,I))),O=this._recuCollectionIndex(x,E),M=this._appointmentSettings;if(0==O?!t.isNullOrUndefined(x[O+1])&&!(new Date(new Date(x[O+1][M.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(i[M.endTime]).setHours(0,0,0,0)).getTime()):O==x.length-1?!(new Date(new Date(x[O-1][M.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(i[M.startTime]).setHours(0,0,0,0)).getTime()):!(new Date(new Date(x[O-1][M.endTime]).setHours(0,0,0,0)).getTime()<new Date(new Date(i[M.startTime]).setHours(0,0,0,0)).getTime()&&new Date(new Date(x[O+1][M.startTime]).setHours(0,0,0,0)).getTime()>new Date(new Date(i[M.endTime]).setHours(0,0,0,0)).getTime()))return this._alertCreateError(),!1}else I=null==u[0][this._appointmentSettings.recurrenceId]?u[0].ParentId:u[0][this._appointmentSettings.recurrenceId],H=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,I)),s=i.AppTaskId=H[0].AppTaskId,i[this._appointmentSettings.id]=H[0][this._appointmentSettings.id],i[this._appointmentSettings.recurrenceId]=H[0][this._appointmentSettings.recurrenceId],i[this._appointmentSettings.recurrenceExDate]=H[0][this._appointmentSettings.recurrenceExDate],i[this._appointmentSettings.recurrenceRule]=t.isNullOrUndefined(n._recRule)||""==n._recRule?H[0][this._appointmentSettings.recurrenceRule]:n._recRule;i.Guid=u[0].Guid,i[this._appointmentSettings.id]=this._currentAction!=t.Schedule.Actions.EditSeries?u[0][this._appointmentSettings.id]:i[this._appointmentSettings.id];var L,U=[],F=this._currentAction==t.Schedule.Actions.EditOccurrence||!t.isNullOrUndefined(i[this._appointmentSettings.recurrenceRule])&&-1!=i[this._appointmentSettings.recurrenceRule].toString().indexOf("RECUREDITID")?this._parentId:this._currentAction==t.Schedule.Actions.Save?u[0].AppTaskId:s,V=(new Date(i[this._appointmentSettings.endTime])-new Date(i[this._appointmentSettings.startTime]))/36e5>24&&this._currentAction!=t.Schedule.Actions.EditOccurrence&&1==i[this._appointmentSettings.allDay]?F:this._currentAction==t.Schedule.Actions.Save?u[0].AppTaskId:this._appMainId+1;if(V=this._currentAction==t.Schedule.Actions.EditSeries?F:V,L=this._addAppData(i,V,new Date(i[this._appointmentSettings.startTime]),new Date(i[this._appointmentSettings.endTime]),F),U.push(L),this._trigger("actionBegin",{data:i,requestType:"appointmentEdit",currentAction:o})||(g=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,i[this._appointmentSettings.id])),t.isNullOrUndefined(this.model.serverEvents)||-1==this.model.serverEvents.indexOf("beforeAppointmentChange")||(g=[this._timeZoneAppointments(g[0],"")],i=this._timeZoneAppointments(i,"")),_=i[this._appointmentSettings.recurrence]?{appointment:i,currentAction:o,recurrenceCollection:{occurrences:i,parentData:g[0]}}:{appointment:i,currentAction:o},this._trigger("beforeAppointmentChange",_)))return!1;this._currentAction!=t.Schedule.Actions.EditSeries||t.isNullOrUndefined(i.RecurrenceExDate)||(this._isCustomAlert=!0);N=[];var z=[],P=[],j=this._currentAction==t.Schedule.Actions.Save?U[0].Guid:U[0][this._appointmentSettings.recurrenceId],q=this._currentAction==t.Schedule.Actions.Save?"Guid":this._appointmentSettings.recurrenceId;H=new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).where(q,t.FilterOperators.equal,j));if(!t.isNullOrUndefined(H)&&H.length>0?z.push(U[0]):N.push(U[0]),this._currentAction==t.Schedule.Actions.EditSeries)for(f=t.Query().where(t.Predicate(this._appointmentSettings.recurrenceRule,t.FilterOperators.contains,"RECUREDITID="+U[0].ParentId,!0)),w=new t.DataManager(this._currentAppointmentData).executeLocal(f),P=P.concat(w),z[0][this._appointmentSettings.recurrenceRule]=n._recRule,z[0][this._appointmentSettings.recurrenceExDate]=null,D=this._processed.filter(function(e){return e.ParentId==z[0].ParentId}),new t.DataManager(this._currentAppointmentData).remove("ParentId",z[0].ParentId),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:D},"ParentId"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:D},"ParentId"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:D},"ParentId"),S=0,A=D.length;S<A;S++)this._appointmentRemove(D[S]),this._refreshDayAppointments(D[S]);else if(z.length>0)for(y=0;y<z.length;y++)new t.DataManager(this._processed).remove("Guid",z[y].Guid),new t.DataManager(this._renderedApp).remove("Guid",z[y].Guid),new t.DataManager(this._renderedAllDay).remove("Guid",z[y].Guid),this._appointmentRemove(z[y]),this._refreshDayAppointments(z[y]);var B=this,G=[],Q=[];for(N.length>0&&(t.isNullOrUndefined(this.model.serverEvents)?G.push(this._timeZoneAppointments(N[0],"")):G.push(N[0])),z.length>0&&(t.isNullOrUndefined(this.model.serverEvents)?Q.push(this._timeZoneAppointments(z[0],"")):Q.push(z[0])),Z=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",K=this._dataManager.saveChanges({added:G,changed:Q,deleted:P},Z,this.model.appointmentSettings.query._fromTable),z.length>0&&(v=t.isNullOrUndefined(this.model.serverEvents)?Q[0]:this._timeZoneAppointments(Q[0],"reverse")),N.length>0&&(v=t.isNullOrUndefined(this.model.serverEvents)?G[0]:this._timeZoneAppointments(G[0],"reverse")),new t.DataManager(this._currentAppointmentData).update("AppTaskId",v),new t.DataManager(this._currentAppointmentData).remove("Guid",z[0]),C=this._processed.filter(function(e){return e.Guid==z[0].Guid}),new t.DataManager(this._processed).saveChanges({added:[],changed:[],deleted:C},"Guid"),new t.DataManager(this._renderedApp).saveChanges({added:[],changed:[],deleted:C},"Guid"),new t.DataManager(this._renderedAllDay).saveChanges({added:[],changed:[],deleted:C},"Guid"),this._currentAppointmentData.push(z[0]),this._appointmentProcessing(z[0]),this._currentViewAppointments=this.getCurrentViewAppointments(),b=0,A=(T=this._currentViewAppointments.filter(function(e){return e.ParentId==z[0].ParentId})).length;b<A;b++)this._refreshDayAppointments(T[b]);for(R=0,A=P.length;R<A;R++)this._refreshDayAppointments(P[R]);this._trigger("appointmentChanged",{appointment:z[0],requestType:"appointmentChanged",currentAction:o,methodType:"public"}),this._trigger("actionComplete",{data:z,requestType:"appointmentEdit",currentAction:o,methodType:"public"}),!t.isNullOrUndefined(K)&&e.isFunction(K.promise)&&this.dataSource()instanceof t.DataManager&&K.done(function(i){var n,s,r=t.isNullOrUndefined(i.record)?i:i.record;if(e.isArray(r)||e.isPlainObject(r)&&t.isNullOrUndefined(r.added))B._processUrlBinding(i);else if(e.isPlainObject(r)&&!t.isNullOrUndefined(r.added)&&r.added.length>0)for(B._dateFormat(r.added),n=0,s=r.added.length;n<s;n++)z[0][B._appointmentSettings.id]=r.added[n][B._appointmentSettings.id],z[0][B._appointmentSettings.recurrence]||(z[0].ParentId=r.added[n][B._appointmentSettings.id])})}else{if(this._trigger("actionBegin",{data:i,requestType:"appointmentEdit",currentAction:o,methodType:"public"})||this._trigger("beforeAppointmentChange",{appointment:i,currentAction:o,methodType:"public"}))return!1;var Y=this._timeZoneAppointments(i,""),Z=this.dataSource()instanceof t.DataManager?this._appointmentSettings.id:"AppTaskId",K=this._dataManager.update(Z,Y,this.model.appointmentSettings.query._fromTable);new t.DataManager(this._currentAppointmentData).update("AppTaskId",this._timeZoneAppointments(Y,"reverse")),this._renderSingleApp(),this._trigger("appointmentChanged",{appointment:i,requestType:"appointmentChanged",currentAction:o,methodType:"public"}),this._trigger("actionComplete",{data:i,requestType:"appointmentEdit",currentAction:o,methodType:"public"}),!t.isNullOrUndefined(K)&&e.isFunction(K.promise)&&this.dataSource()instanceof t.DataManager&&K.done(function(n){var s,r,a=t.isNullOrUndefined(n.record)?n:n.record;if(e.isArray(a)||e.isPlainObject(a)&&t.isNullOrUndefined(a.added))B._processUrlBinding(n);else if(e.isPlainObject(a)&&!t.isNullOrUndefined(a.added)&&a.added.length>0)for(B._dateFormat(a.added),s=0,r=a.added.length;s<r;s++)i[B._appointmentSettings.id]=a.added[s][B._appointmentSettings.id],i[B._appointmentSettings.recurrence]||(i.ParentId=a.added[s][B._appointmentSettings.id])})}this._currentViewAppointments=this.getCurrentViewAppointments(),this.model.showAppointmentNavigator&&this._nextPrevButton()}},print:function(i){if(t.isNullOrUndefined(i)){var n=this.element.clone();"agenda"==this.currentView()?(n.width(this.element.find(".e-agendacellstab").width()+2),n.height(e("#"+this._id+" .e-headertr").height()+this.element.find(".e-agendacellstab").height()+e("#"+this._id+" .e-scheduleheader").height()+2),n.find("div#"+this._id+"_scroller").ejScroller({width:this.element.find(".e-agendacellstab").width(),height:this.element.find(".e-agendacellstab").height()+2}),n.find(".e-commonviewbutton").css({"margin-top":"0px"}),n.find(".e-viewstable").css({"padding-top":"15px"})):(n.find(".e-upicon,.e-downicon").remove(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?(n.find(".e-borderleft").remove(),this.model.timeScale.enable?(n.width(this.element.find(".e-scheduleoutertable").width()),n.height(e("#"+this._id+" .e-headertr").height()+e("#"+this._id+" .e-workcellstab").height()+e("#"+this._id+" .e-scheduleheader").height()+2),n.find(".e-scroller").ejScroller({width:e(".e-dateheader").width(),height:e("#"+this._id+" .e-workcellstab").height()+2}),n.find(".e-scrolltimecells").css({top:0}),n.find(".e-commonviewbutton").css({"margin-top":"0px"}),n.find(".e-viewstable").css({"padding-top":"15px"}),n.children().first().css({border:"0px solid #bbbcbb"}),n.css({border:"1px solid #bbbcbb"}),"month"==this.currentView()&&n.find(".e-draggableworkarea").css({height:this.element.find(".e-timecells").height()*this.element.find(".e-timecells").length+2})):(n.width(this.element.find(".e-scheduleoutertable").width()),n.find(".e-workcellstab").css({left:-e("div#"+this._id+"_scroller").data("ejScroller").scrollLeft(),position:"absolute"}))):"month"==this.currentView()||this._isCustomMonthView()&&this._renderDays>7?n.width(this.element.find(".e-workcellstab").width()):(n.find(".e-workcellstab").css({left:-e("div#"+this._id+"_scroller").data("ejScroller").scrollLeft(),position:"absolute"}),n.find(".e-horizontaltimecells tr:nth-child(2)").css("left",this.model.enableRTL?this.element.find("div#"+this._id+"_scroller").data("ejScroller").scrollLeft()+"px":-this.element.find("div#"+this._id+"_scroller").data("ejScroller").scrollLeft()))),this._schedulePrint(n)}else this._printAppointment(i)},_schedulePrint:function(i,n){var s,r,a=t.buildTag("div"),o=i.clone(),l=100*Math.round(o.width()/100);a.append(o),n||(n=window.open("","print","height=452,width="+l+",tabbar=no")),n.document.write("<!DOCTYPE html>"),s=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(r="",s.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),r+=i.outerHTML}),n.document.write("<html><head></head><body>"+r+a[0].innerHTML+"</body></html>")):(r="",n.document.write("<html><head>"),s.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),r+=i.outerHTML}),n.document.writeln(r+"</head><body>"),n.document.writeln(a[0].innerHTML+"</body></html>")),n.document.close(),n.focus(),setTimeout(function(){t.isNullOrUndefined(n.window)||(n.print(),setTimeout(function(){n.close()},1e3))},1e3)},notifyChanges:function(i,n){var s,r,a,o,l;t.isNullOrUndefined(n)&&0==n.length||("beforeAppointmentChange"==i?(s=n.added[0],r=n.changed[0]):r=t.isNullOrUndefined(n[0])?n:n[0],(a=e.extend(!0,{},r))[this._appointmentSettings.startTime]=new Date(a[this._appointmentSettings.startTime]),a[this._appointmentSettings.endTime]=new Date(a[this._appointmentSettings.endTime]),t.isNullOrUndefined(s)||((o=e.extend(!0,{},s))[this._appointmentSettings.startTime]=new Date(o[this._appointmentSettings.startTime]),o[this._appointmentSettings.endTime]=new Date(o[this._appointmentSettings.endTime])),"beforeAppointmentCreate"==i?(new t.DataManager(this._currentAppointmentData).insert(a),this._appointmentProcessing(a),this._renderAppointmentAll()):"beforeAppointmentChange"==i||"dragStop"==i||"resizeStop"==i?(t.isNullOrUndefined(s)||(new t.DataManager(this._currentAppointmentData).insert(o),this._appointmentProcessing(o)),new t.DataManager(this._currentAppointmentData).update(this._appointmentSettings.id,a),new t.DataManager(this._processed).remove(this._appointmentSettings.id,a[this._appointmentSettings.id]),this._dataProcessing(this._currentAppointmentData),this._renderAppointmentAll()):"beforeAppointmentRemove"==i&&(l=new t.DataManager(this._processed).executeLocal((new t.Query).where(this._appointmentSettings.id,t.FilterOperators.equal,a[this._appointmentSettings.id])),new t.DataManager(this._currentAppointmentData).remove(this._appointmentSettings.id,l[0][this._appointmentSettings.id]),new t.DataManager(this._processed).remove(this._appointmentSettings.id,l[0][this._appointmentSettings.id]),this._renderAppointmentAll()))},deleteAppointment:function(e){var i;!this.model.readOnly&&this.model.allowDelete&&("string"==typeof e?(i=new t.DataManager(this._processed).executeLocal((new t.Query).where("Guid",t.FilterOperators.equal,e)))[0][this._appointmentSettings.recurrence]?(this._deleteUid=e,this._deletingAppointment()):this._deleteApp(e):"object"==typeof e&&(this._deleteUid=e.Guid,t.isNullOrUndefined(this._deleteUid)&&(i=new t.DataManager(this._processed).executeLocal((new t.Query).where("ParentId",t.FilterOperators.equal,e.ParentId)),this._deleteUid=i[0].Guid),e[this._appointmentSettings.recurrence]?this._deletingAppointment():this._deleteApp(this._deleteUid)))},getAppointments:function(){return this.dataSource()},searchAppointments:function(e,i,n,s){var r,a=t.isNullOrUndefined(i)?this._getColumns(this._appointmentSettings):i,o=t.isNullOrUndefined(n)?"contains":n,l=!!t.isNullOrUndefined(s)||s;return"string"==typeof e?r=""==e?[]:new t.DataManager(this._currentAppointmentData).executeLocal((new t.Query).search(e,a,o,l)):"object"==typeof e&&(r=this.filterAppointments(e)),r},filterAppointments:function(e){var i,n,s,r,a,o=t.Query();if(!t.isNullOrUndefined(e)){for(s=e[0],n=!!t.isNullOrUndefined(s.matchcase)||s.matchcase,r=t.Predicate(s.field,s.operator,s.value,n),a=1;a<e.length;a++)n=!!t.isNullOrUndefined(e[a].matchcase)||e[a].matchcase,r=r[e[a].predicate](e[a].field,e[a].operator,e[a].value,n);o.where(r),i=new t.DataManager(this._currentAppointmentData).executeLocal(o)}return i},refreshScroller:function(){var i=this.element.find("div#"+this._id+"_scroller").data("ejScroller"),n="vertical"===this.model.orientation&&"vertical"===this._customOrientation?this.element.width()-(this._mediaQuery&&("month"==this.currentView()||this._isCustomMonthView())?1:this.element.find(".e-scrolltimecells").length>0?this.element.find(".e-scrolltimecells").parent().outerWidth():0):"horizontal"!=this.model.orientation&&"horizontal"!=this._customOrientation||t.isNullOrUndefined(this.model.group)||0==this._tempResource.length?this.element.width():this.element.width()-this.element.find(".e-resourceheadertable").width();i.model.width=parseInt(n)-2,i.model.height=this.scHeight-1-(this.element.find(".e-draggableworkarea").offset().top-this.element.offset().top),i.refresh(),"vertical"==this.model.orientation&&"vertical"==this._customOrientation?(this._renderHoriVerticalScroll(),this.element.find(".e-datecommondiv").parent().width(parseInt(this.element.width())-2),this.element.find(".e-headrealldaytable").css("left",-this.element.find(".e-draggableworkarea").scrollLeft()+"px")):(e(this.element.find(".e-horizontaltimecells").find("table tr")[2]).css("left",-this.element.find(".e-draggableworkarea").scrollLeft()+"px"),this.element.find(".e-horizontresdiv").height(this.element.find(".e-draggableworkarea").height())),this._reRenderHeaderBar(),this.model.showAppointmentNavigator&&this._refreshAppNavigation(),this.model.showCurrentTimeIndicator&&this.element.find(".e-highlightcurrenttimeline").remove(),this._highlightCurrentTime(this.model.showCurrentTimeIndicator),("month"==this.currentView()||this._isCustomMonthView())&&"vertical"==this.model.orientation&&"vertical"==this._customOrientation&&this._renderCurrentView("ScheduleResize"),this._showScrollTd(),this.element.find(".e-mobileNavigation").css(this.model.enableRTL?"right":"left",this.element.outerWidth()-36),(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView()&&(this.element.find(".e-datecommondiv").addClass("e-datecursor"),this.element.find(".e-navigateprevious,.e-navigatenext").hide(),this.element.find(".e-prevapp,.e-nextapp").hide())},_refreshAppNavigation:function(){var e=this.element.find("#"+this._id+"_scroller");if(!("msie"===this._browserInfo.name&&this._browserInfo.version<9||t.isNullOrUndefined(e.data("ejScroller")))){var i=e.ejScroller("instance").isVScroll()?e.find(".e-vscroll").outerWidth():0,n=e.height()/2-75,s=this.element.find(".e-scrolltimecells").parent().outerWidth();s=t.isNullOrUndefined(s)?0:s,this.model.enableRTL?(this.element.find(".e-prevapp").css({top:n+40+"px",transform:"rotate(-90deg)",right:s-61+"px"}),this.element.find(".e-nextapp").css({top:n+40+"px",transform:"rotate(90deg)",right:this.element.find(".e-workareadiv").width()-61-i-30+"px"})):(this.element.find(".e-prevapp").css({top:n+40+"px",transform:"rotate(90deg)",left:s-61+"px"}),this.element.find(".e-nextapp").css({top:n+40+"px",transform:"rotate(-90deg)",left:this.element.find(".e-workareadiv").width()-61-i-30+"px"}))}},getDifference:function(e){var t="";return-1!=e.toString().indexOf("-")?(t=e.toString().substring(e.toString().indexOf("-")+1,e.toString().indexOf("-")+5),-60*parseInt(t.substring(0,2))+parseInt(t.substring(2,4))):(t=e.toString().substring(e.toString().indexOf("+")+1,e.toString().indexOf("+")+5),60*parseInt(t.substring(0,2))+parseInt(t.substring(2,4)))},_getExportModel:function(i){var n,s=t.isNullOrUndefined(i)?this.model:i,r=JSON.parse(JSON.stringify(e.extend(!0,{},s)));if(this._ignoreFromModelOnExport)for(n=0;n<this._ignoreFromModelOnExport.length;n++)delete r[this._ignoreFromModelOnExport[n]];return delete r.appointmentSettings.dataSource,delete r.blockoutSettings.dataSource,r},exportToExcel:function(i,n,s){var r,a,o,l,d,h,p=s?this._processed:this._currentAppointmentData,m=this,c=e.extend(!0,[],p);return c.forEach(function(e){delete e.AppTaskId,delete e.Guid,delete e[m._appointmentSettings.recurrenceId],delete e[m._appointmentSettings.recurrenceExDate],e[m._appointmentSettings.startTime]=new Date(e[m._appointmentSettings.startTime].getTime()+6e4*m.getDifference(e[m._appointmentSettings.startTime])),e[m._appointmentSettings.endTime]=new Date(e[m._appointmentSettings.endTime].getTime()+6e4*m.getDifference(e[m._appointmentSettings.endTime]))}),c.sort(function(e,t){var i=e[m._appointmentSettings.id],n=t[m._appointmentSettings.id];return i==n?0:i>n?1:-1}),r=t.buildTag("form","",null,{action:i,method:"post"}),a=this._getExportModel(),t.isNullOrUndefined(t.raiseWebFormsServerEvents)?(d=t.buildTag("input","",null,{name:"ScheduleModel",type:"hidden",value:JSON.stringify(a)}),h=t.buildTag("input","",null,{name:"ScheduleAppointment",type:"hidden",value:JSON.stringify(c)}),r.append(d),r.append(h),r.append(this),e("body").append(r),r.submit()):(o={model:a,originalEventType:n},l={ScheduleAppointment:JSON.stringify(c)},t.raiseWebFormsServerEvents(n,o,l)),!0},exportSchedule:function(i,n,s){var r,a,o,l,d,h,p,m,c,u,g={},_=[],f=[];for(this._currentViewAppointments=this.getCurrentViewAppointments(),e.extend(!0,g,this.model),e.extend(!0,_,this._currentViewAppointments),e.extend(!0,f,this._processedIntervals),h=0;h<_.length;h++)_[h][this._appointmentSettings.startTime]=new Date(_[h][this._appointmentSettings.startTime].getTime()+6e4*this.getDifference(_[h][this._appointmentSettings.startTime])),_[h][this._appointmentSettings.endTime]=new Date(_[h][this._appointmentSettings.endTime].getTime()+6e4*this.getDifference(_[h][this._appointmentSettings.endTime]));for(r=0;r<f.length;r++)f[r][this.model.blockoutSettings.startTime]=new Date(f[r][this.model.blockoutSettings.startTime].getTime()+6e4*this.getDifference(f[r][this.model.blockoutSettings.startTime])),f[r][this.model.blockoutSettings.endTime]=new Date(f[r][this.model.blockoutSettings.endTime].getTime()+6e4*this.getDifference(f[r][this.model.blockoutSettings.endTime]));if(a=new Date(new Date(this.currentDate()).setHours(0,0,0)),g.currentView=t.isNullOrUndefined(g.currentView_two)?g.currentView:g.currentView_two,g.currentDate=new Date(a.getTime()+6e4*this.getDifference(a)),(!t.isNullOrUndefined(this.model.renderDates)&&"array"==e.type(this.model.renderDates)&&this.model.renderDates.length>0||this._resCustomView)&&"customview"===this.currentView())for(h=0;h<this._dateRender.length;h++)o=new Date(new Date(this._dateRender[h]).setHours(0,0,0)),g.renderDates.custom[h]=new Date(o.getTime()+6e4*this.getDifference(o));l=JSON.parse(JSON.stringify(this._appointmentSettings)),e.extend(!0,g.appointmentSettings,l),d=JSON.parse(JSON.stringify(this.model.blockoutSettings)),e.extend(!0,g.blockoutSettings,d);var w=this._getExportModel(g),D={action:i,method:"post"},S=t.buildTag("form","",null,D),y="day"==this.currentView()?"Day":"month"==this.currentView()?"Month":"week"==this.currentView()?"Week":"agenda"==this.currentView()?"Agenda":"workweek"==this.currentView()?"WorkWeek":"CustomView";if(this._ignoreFromAppointmentOnExport)for(h=0;h<this._ignoreFromAppointmentOnExport.length;h++)delete l[this._ignoreFromAppointmentOnExport[h]],delete d[this._ignoreFromAppointmentOnExport[h]];if(t.raiseWebFormsServerEvents)p={model:w,originalEventType:n},m={appSetting:JSON.stringify(l),appId:s,processedApp:JSON.stringify(_),blockedApp:JSON.stringify(f),model:JSON.stringify(w),locale:this._getLocalizedLabels(y)+","+this._getLocalizedLabels("AllDay")+","+this._getLocalizedLabels("Date")+","+this._getLocalizedLabels("Time")+","+this._getLocalizedLabels("Event")},t.raiseWebFormsServerEvents(n,p,m);else{var v={name:"ScheduleApps",type:"hidden",value:JSON.stringify(l)},C=t.buildTag("input","",null,v),T={name:"ScheduleBlockedApps",type:"hidden",value:JSON.stringify(d)},b=t.buildTag("input","",null,T),R={name:"ScheduleModel",type:"hidden",value:JSON.stringify(w)},A=t.buildTag("input","",null,R),I=(_={name:"ScheduleProcesedApps",type:"hidden",value:JSON.stringify(_)},t.buildTag("input","",null,_)),k=(f={name:"ScheduleProcesedIntervalsApps",type:"hidden",value:JSON.stringify(f)},t.buildTag("input","",null,f)),x={name:"Locale",type:"hidden",value:this._getLocalizedLabels(y)+","+this._getLocalizedLabels("AllDay")+","+this._getLocalizedLabels("Date")+","+this._getLocalizedLabels("Time")+","+this._getLocalizedLabels("Event")},O=t.buildTag("input","",null,x);S.append(A),S.append(I),S.append(k),S.append(O),t.isNullOrUndefined(s)||(c={name:"AppointmentId",type:"hidden",value:s},u=t.buildTag("input","",null,c),S.append(u)),S.append(C),S.append(b),S.append(this),e("body").append(S),S.submit()}return!0}}),t.scheduleFeatures.resources&&e.extend(t.Schedule.prototype,t.scheduleFeatures.resources),t.scheduleFeatures.horizontal&&e.extend(t.Schedule.prototype,t.scheduleFeatures.horizontal),t.Schedule.Locale=t.Schedule.Locale||{},t.Schedule.Locale.default=t.Schedule.Locale["en-US"]={ReminderWindowTitle:"Reminder window",CreateAppointmentTitle:"Create Appointment",RecurrenceEditTitle:"Edit Repeat Appointment",RecurrenceEditMessage:"How would you like to change the appointment in the series?",RecurrenceEditOnly:"Only this appointment",RecurrenceEditFollowingEvent:"Following Events",RecurrenceEditSeries:"Entire series",PreviousAppointment:"Previous Appointment",NextAppointment:"Next Appointment",AppointmentSubject:"Subject",StartTime:"Start Time",EndTime:"End Time",AllDay:"All day",StartTimeZone:"Start TimeZone",EndTimeZone:"End TimeZone",Today:"Today",Recurrence:"Repeat",Done:"Done",Cancel:"Cancel",Ok:"OK",Repeat:"Repeat",RepeatBy:"Repeat by",RepeatEvery:"Repeat every",RepeatOn:"Repeat on",StartsOn:"Starts on",Ends:"Ends",Summary:"Summary",Daily:"Daily",Weekly:"Weekly",Monthly:"Monthly",Yearly:"Yearly",Every:"Every",EveryWeekDay:"Every weekday",Never:"Never",After:"After",Occurrence:"Occurrence(s)",On:"On",Edit:"Edit",RecurrenceDay:"Day(s)",RecurrenceWeek:"Week(s)",RecurrenceMonth:"Month(s)",RecurrenceYear:"Year(s)",The:"The",OfEvery:"of every",First:"First",Second:"Second",Third:"Third",Fourth:"Fourth",Last:"Last",WeekDay:"Weekday",WeekEndDay:"Weekendday",Subject:"Subject",Categorize:"Categories",DueIn:"Due In",DismissAll:"Dismiss All",Dismiss:"Dismiss",OpenItem:"Open Item",Snooze:"Snooze",Day:"Day",Week:"Week",WorkWeek:"Work Week",Month:"Month",AddEvent:"Add Event",CustomView:"Custom View",Agenda:"Agenda",Detailed:"Edit Appointment",EventBeginsin:"Appointment begins in",Editevent:"Edit Appointment",Editfollowingevent:"Following Events",Editseries:"Edit Series",Times:"times",Until:"until",Eventwas:"Appointment was",Hours:"hrs",Minutes:"mins",Overdue:"Overdue Appointment",Days:"day(s)",Event:"Event",Select:"select",Previous:"Previous",Next:"Next",Close:"Close",Delete:"Delete",Date:"Date",Showin:"Show in",Gotodate:"Go To Date",Resources:"RESOURCES",RecurrenceDeleteTitle:"Delete Repeat Appointment",Location:"Location",Priority:"Priority",RecurrenceAlert:"Alert",RecurrenceDateValidation:"Some months have fewer than selected dates. For these months, the occurrence will fall on the last date of the month.",NoTitle:"No Title",OverFlowAppCount:"more appointment(s)",AppointmentIndicator:"Click for more appointments",WrongPattern:"The recurrence pattern is not valid",CreateError:"The duration of the appointment must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the Appointment Recurrence dialog box.",DragResizeError:"Cannot reschedule an occurrence of the recurring appointment if it skips over a later occurrence of the same appointment.",StartEndError:"The selected end date occurs before the start date.",SeriesChangeAlert:"The changes made to specific instances of this series will be cancelled and those appointments will match the series again.",MouseOverDeleteTitle:"Delete Appointment",DeleteConfirmation:"Are you sure you want to delete this appointment?",Time:"Time",EmptyResultText:"No suggestions",BlockIntervalAlertTitle:"Alert",BlockIntervalError:"The selected time interval has been blocked and is unavailable for selection."},t.Schedule.Actions={Add:"add",Save:"save",Delete:"delete",DeleteOccurrence:"deleteOccurrence",DeleteFutureOccurrences:"deleteFutureOccurrences",DeleteSeries:"deleteSeries",EditOccurrence:"editOccurrence",EditFutureOccurrences:"editFutureOccurrences",EditSeries:"editSeries"},t.Schedule.CurrentView={Day:"day",Week:"week",Workweek:"workweek",Month:"month",CustomView:"customview",Agenda:"agenda"},t.Schedule.TimeMode={Hour12:"12",Hour24:"24"},t.Schedule.Orientation={Vertical:"vertical",Horizontal:"horizontal"},t.Schedule.DayOfWeek={Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday"}}(jQuery,Syncfusion)})},461:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var s,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,i,a):s(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),r=i(78),a=i(1508),o=i(1395),l=i(1396),d=i(1397),h=i(1398),p=i(1399),m=i(1394);t.scheduleAppRoutes=[{path:"default",component:o.DefaultComponent,data:{name:"Default",location:"app/components/schedule/default.component"}},{path:"horizontal",component:l.HorizontalComponent,data:{name:"Timeline View",location:"app/components/schedule/horizontal.component"}},{path:"multipleresource",component:d.MultipleResourceComponent,data:{name:"Multiple Resources",location:"app/components/schedule/multipleresource.component"}},{path:"resourcegrouping",component:h.ResourceGroupComponent,data:{name:"Resource Grouping",location:"app/components/schedule/resourcegrouping.component"}},{path:"timescale",component:p.TimeScaleComponent,data:{name:"Time Scale",location:"app/components/schedule/timescale.component"}},{path:"categorize",component:m.CategorizeComponent,data:{name:"Categorize",location:"app/components/schedule/categorize.component"}},{path:"",redirectTo:"default"}],t.ScheduleRouting=r.RouterModule.forChild(t.scheduleAppRoutes);var c=function(){function e(){}return e=n([s.NgModule({imports:[t.ScheduleRouting],declarations:[o.DefaultComponent,a.EJ_SCHEDULE_COMPONENTS,l.HorizontalComponent,d.MultipleResourceComponent,h.ResourceGroupComponent,p.TimeScaleComponent,m.CategorizeComponent]})],e)}();t.ScheduleModule=c}});