webpackJsonp([42],{1064:function(e,t,i){var l,o,s;
/*!
*  filename: ej.heatmap.min.js
*  version : 17.1.0.47
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.heatmap.min.js
*  version : 17.1.0.47
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(n){o=[i(4),i(21),i(15),i(65),i(16),i(80)],void 0===(s="function"==typeof(l=n)?l.apply(t,o):l)||(e.exports=s)}(function(){!function(e,t){"use strict";var i=function(){function i(e,i){this._heatmap=i||null,i&&(i._grid=this),this._rootCSS="e-grid",this.element=null,this.validTags=["div"],this.model=null,this._requiresID=!0,this.keyConfigs={focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",nextPage:"34",previousPage:"33",lastPage:"ctrl+alt+34",firstPage:"ctrl+alt+33",nextPager:"alt+34",previousPager:"alt+33",firstCellSelection:"36",lastCellSelection:"35",firstRowSelection:"ctrl+36",lastRowSelection:"ctrl+35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",moveCellRight:"9",moveCellLeft:"shift+9",selectedGroupExpand:"alt+40",totalGroupExpand:"ctrl+40",selectedGroupCollapse:"alt+38",totalGroupCollapse:"ctrl+38",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40"},this._ignoreOnPersist=["query","isEdit","toolbarClick","queryCellInfo","mergeCellInfo","currentViewData","enableAltRow","enableRTL","contextClick","contextOpen","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","childGrid","summaryRows","toolbarSettings","editSettings","allowMultiSorting","enableAutoSaveOnSelectionChange","locale","allowCellMerging","allowTextWrap","textWrapSettings","cssClass","dataSource","groupSettings.enableDropAreaAnimation","enableRowHover","showSummary","allowGrouping","enableHeaderHover","allowKeyboardNavigation","scrollSettings.frozenRows","scrollSettings.frozenColumns","enableTouch","contextMenuSettings.enableContextMenu","exportToExcelAction","exportToWordAction","exportToPdfAction"],this.ignoreOnExport=["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","editSettings","pageSettings","enableAutoSaveOnSelectionChange","localization","allowScrolling","cssClass","dataSource","groupSettings.enableDropAreaAnimation","enableRowHover","allowSummary","enableHeaderHover","allowKeyboardNavigation"],this.observables=["dataSource","selectedRowIndex","pageSettings.currentPage"],this._tags=[{tag:"columns",attr:["allowEditing","allowFiltering","allowGrouping","allowResizing","allowSorting","cssClass","customAttributes","dataSource","defaultValue","disableHtmlEncode","editTemplate","editType","foreignKeyField","foreignKeyValue","headerTemplateID","headerText","isFrozen","isIdentity","isPrimaryKey","filterBarTemplate","textAlign","templateID","textAlign","headerTextAlign","tooltip","clipMode","validationRules.minlength","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","editParams.decimalPlaces",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["showCaptionSummary","showTotalSummary",[{tag:"summaryColumns",attr:["customSummaryValue","dataMember","displayColumn","summaryType","template"]}]]},{tag:"stackedHeaderRows",attr:[[{tag:"stackedHeaderColumns",attr:["headerText","column"]}]]},{tag:"filterSettings.filteredColumns",attr:[]},{tag:"sortSettings.sortedColumns",attr:[]}],this._dataSource=t.util.valueFunction("dataSource"),this._selectedRow=t.util.valueFunction("selectedRowIndex"),this._currentPage=t.util.valueFunction("pageSettings.currentPage"),this.dataTypes={dataSource:"data",query:"data",columns:"array",childGrid:"parent",gridLines:"enum",summaryRows:"array",stackedHeaderRows:"array",toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},contextMenuSettings:{contextMenuItems:"array",customContextMenuItems:"array",subContextMenu:"array"},selectionSettings:{selectionMode:"array",selectedRecords:"array"},sortSettings:{sortedColumns:"array"},filterSettings:{filteredColumns:"array",filterType:"enum",filterBarMode:"enum"},groupSettings:{groupedColumns:"array"},editSettings:{editMode:"enum",formPosition:"enum",rowPosition:"enum"},searchSettings:{fields:"array"},textWrapSettings:{wrapMode:"enum"}},this.model={allowPaging:!1,showColumnChooser:!1,gridLines:"both",allowSorting:!1,showStackedHeader:!1,selectedRecords:[],stackedHeaderRows:[],allowFiltering:!1,allowMultipleExporting:!1,allowSelection:!0,allowGrouping:!1,showSummary:!1,allowResizing:!1,allowResizeToFit:!1,allowTextWrap:!1,allowCellMerging:!1,enableRowHover:!0,enablePersistence:!1,enableFocusout:!1,selectedRowIndex:-1,allowSearching:!1,enableToolbarItems:!1,enableHeaderHover:!1,allowReordering:!1,allowKeyboardNavigation:!0,allowRowDragAndDrop:!1,enableTouch:!0,columnLayout:"auto",selectionType:"single",dataSource:null,cssClass:"",allowScrolling:!1,locale:"en-US",enableAutoSaveOnSelectionChange:!0,allowMultiSorting:!1,exportToExcelAction:"",exportToWordAction:"",exportToPdfAction:"",_groupingCollapsed:[],editSettings:{allowEditing:!1,showAddNewRow:!1,allowAdding:!1,allowDeleting:!1,editMode:"normal",rowPosition:"top",dialogEditorTemplateID:null,allowEditOnDblClick:!0,externalFormTemplateID:null,inlineFormTemplateID:null,formPosition:"bottomleft",titleColumn:null,showConfirmDialog:!0,showDeleteConfirmDialog:!1},selectionSettings:{selectionMode:["row"],enableToggle:!1,cellSelectionMode:"flow"},pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:null,enableTemplates:!1,showDefaults:!1,template:null,totalRecordsCount:null,enableQueryString:!1,printMode:"allpages"},groupSettings:{showDropArea:!0,showToggleButton:!1,showGroupedColumn:!0,showUngroupButton:!0,enableDropAreaAutoSizing:!0,captionFormat:null,groupedColumns:[]},contextMenuSettings:{enableContextMenu:!1,contextMenuItems:["Add Record","Edit Record","Delete Record","Sort In Ascending Order","Sort In Descending Order","Next Page","Last Page","Previous Page","First Page","Save","Cancel","Grouping","Ungrouping"],customContextMenuItems:[],subContextMenu:[],disableDefaultItems:!1},filterSettings:{filterType:"filterbar",filterBarMode:"immediate",showFilterBarStatus:!0,statusBarWidth:450,showPredicate:!1,filteredColumns:[],enableInterDeterminateState:!0,maxFilterChoices:1e3,enableCaseSensitivity:!1,immediateModeDelay:1500,enableComplexBlankFilter:!0,blankValue:""},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0},sortSettings:{sortedColumns:[]},toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},minWidth:0,currentIndex:0,rowDropSettings:{dropMapper:null,dragMapper:null,dropTargetID:null},scrollSettings:{width:"auto",height:0,enableTouchScroll:!0,allowVirtualScrolling:!1,virtualScrollMode:"normal",frozenRows:0,frozenColumns:0,buttonSize:18,autoHide:!1,scrollerSize:18,scrollOneStepBy:57,enableVirtualization:!1},textWrapSettings:{wrapMode:"both"},summaryRows:[],enableRTL:!1,enableAltRow:!0,currentViewData:null,detailsTemplate:null,childGrid:null,keySettings:null,rowTemplate:null,detailsDataBound:null,rowDataBound:null,queryCellInfo:null,mergeCellInfo:null,create:null,actionBegin:null,actionComplete:null,actionFailure:null,beginEdit:null,endEdit:null,endAdd:null,endDelete:null,beforeBatchAdd:null,beforeBatchSave:null,beforeBatchDelete:null,batchAdd:null,batchDelete:null,cellSave:null,cellEdit:null,resizeStart:null,resizeEnd:null,resized:null,load:null,destroy:null,rowSelecting:null,rowSelected:null,cellSelecting:null,cellSelected:null,columnSelecting:null,columnSelected:null,columnDragStart:null,columnDrag:null,columnDrop:null,dataBound:null,recordClick:null,recordDoubleClick:null,templateRefresh:null,rightClick:null,detailsCollapse:null,detailsExpand:null,toolbarClick:null,contextOpen:null,contextClick:null,columns:[],query:null,isEdit:!1,isResponsive:!1,enableResponsiveRow:!1,virtualLoading:null}}return i.prototype._dataSource=t.util.valueFunction("dataSource"),i.prototype._selectedRow=t.util.valueFunction("selectedRowIndex"),i.prototype._currentPage=t.util.valueFunction("pageSettings.currentPage"),i.prototype._mapValues=function(){},i.prototype._createElement=function(i,l){this.element=i.jquery?i:e(i),this.sfType="ej-grid",this.pluginName="ej.Grid",this.model=t.copyObject(!0,{},this.model,l),this.model.keyConfigs=t.copyObject(this.keyConfigs),this.element.addClass("e-grid e-js").data("ej.Grid",this)},i.prototype._init=function(e,i,l){var o,s,n;this._createElement(e,i),!t.isNullOrUndefined(this.model.query)&&this.model.query instanceof t.Query||(this.model.query=t.Query()),t.isNullOrUndefined(this.model.parentDetails)||(o=this.model.queryString,s=this.model.foreignKeyField,this.model.query=this.model.query.clone(),n=void 0===this.model.parentDetails.parentKeyFieldValue?"undefined":this.model.parentDetails.parentKeyFieldValue,this.model.query.where(t.isNullOrUndefined(s)?o:s,"equal",n,!0)),this._initPrivateProperties(),this._initScrolling(),this.model.enableResponsiveRow&&this.element.addClass("e-responsive"),this._checkForeignKeyBinding(),this._checkDataBinding(l),this._refreshScroller({})},i.prototype._checkDataBinding=function(e){var i,l,o,s;if(!this.model.columns.length&&((null==this._dataSource()||!this._dataSource().length)&&!(this._dataSource()instanceof t.DataManager)||this._dataSource()instanceof t.DataManager&&void 0==this._dataManager.dataSource.url&&!this._dataSource().dataSource.json.length))return this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource),void this._alertDialog.ejDialog("open");if(this._initialRenderings(),this.model.editSettings.allowDeleting&&"multiple"==this.model.selectionType&&(this.multiDeleteMode=!0),this.initialRender=!0,this.model.enableRTL&&this.element.addClass("e-rtl"),this.model.allowFiltering&&this._isExcelFilter&&this._renderExcelFilter(),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this.model.allowGrouping&&this.element.append(this._renderGroupDropArea()),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this.element.append(this._renderToolBar()),(i=this.model.columns)&&i.length){if(l=this.model.query._expands,"string"==typeof i[0])for(o=0;o<i.length;o++)i[o]={field:i[o]};for(o=0;o<i.length;o++)i[o].field&&-1!==i[o].field.indexOf(".")&&this._getExpands(i[o].field,l);this.model.query.expand(l),this.commonQuery.expand(l),this._renderAfterColumnInitialize()}this.model.allowPaging&&this.element.append(this._renderGridPager()),this.model.contextMenuSettings.enableContextMenu&&this.element.append(this._renderContext()),this.model.scrollSettings.allowVirtualScrolling&&(this._loadedJsonData=[],this._prevPage=1),this._dataSource()instanceof t.DataManager?void 0!=this._dataSource().ready?(s=this,this._dataSource().ready.done(function(e){s._initDataSource(),s.model.dataSource=t.DataManager(e.result)})):this._initDataSource():(this._ensureDataSource(),this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender(e),this._vRowHeight=Math.floor(this.getRowHeight())),this.model.showColumnChooser&&this._renderColumnChooser()},i.prototype._initialRenderings=function(){var i,l;if(this.model.groupSettings.groupedColumns.length){for(i=[],l=0;l<this.model.sortSettings.sortedColumns.length;l++)t.isNullOrUndefined(this.model.sortSettings.sortedColumns[l].direction)&&(this.model.sortSettings.sortedColumns[l].direction=t.sortOrder.Ascending),i.push(this.model.sortSettings.sortedColumns[l].field);if(this.model.allowGrouping)for(l=0;l<this.model.groupSettings.groupedColumns.length;l++)-1==e.inArray(this.model.groupSettings.groupedColumns[l],i)&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[l],direction:t.sortOrder.Ascending})}},i.prototype._renderAfterColumnInitialize=function(){this.element.append(this._renderGridHeader())},i.prototype.setGridHeaderContent=function(e){this._gridHeaderContent=e},i.prototype._renderGridHeader=function(){var e,i,l=t.buildTag("div.e-gridheader"),o=t.buildTag("div");return this.model.allowScrolling&&o.addClass("e-headercontent"),this.setGridHeaderContent(l),this.initialRender&&(this.columnsWidthCollection=[],this._hiddenColumns=[],this._hiddenColumnsField=[]),this._visibleColumns=[],this._visibleColumnsField=[],this._disabledGroupableColumns=[],this._fieldColumnNames={},this._headerColumnNames={},this.model.scrollSettings.frozenColumns>0?(e=t.buildTag("div.e-frozenheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(0,this.model.scrollSettings.frozenColumns),!0)),i=t.buildTag("div.e-movableheader",t.buildTag("div.e-movableheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(this.model.scrollSettings.frozenColumns),!1))),o.append(e).append(i)):o.append(this._renderGridHeaderInternalDesign(this.model.columns)),l.html(o),this.model.isResponsive&&l.addClass("e-textover"),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),l},i.prototype.setGridHeaderTable=function(e){this._gridHeaderTable=e},i.prototype._renderGridHeaderInternalDesign=function(i,l){var o,s,n,r,a,d,h=t.buildTag("table.e-table","",{},{"data-role":"heatmap"}),c=t.buildTag("thead"),u=t.buildTag("tbody.e-hide"),p=t.buildTag("tr.e-columnheader"),g=e(document.createElement("colgroup")),m=e(document.createElement("tr"));if((this.model.childGrid||this.model.detailsTemplate)&&(p.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g.append(this._getIndentCol())),this.model.showStackedHeader)for(d=0;d<this.model.stackedHeaderRows.length;d++)o=this._createStackedRow(this.model.stackedHeaderRows[d],l),c.append(o);for(s=0;s<i.length;s++){var f=t.buildTag("th.e-headercell e-default","",{},{"data-role":"columnheader"}),_=document.createElement("td"),C=t.buildTag("div.e-headercelldiv",void 0===i[s].headerText?i[s].headerText=i[s].field:i[s].headerText,{},{"data-ej-mappingname":i[s].field});if(i[s].disableHtmlEncode&&C.text(i[s].headerText),t.isNullOrUndefined(i[s].headerTooltip)||C.addClass("e-headertooltip"),t.isNullOrUndefined(i[s].tooltip)||C.addClass("e-gridtooltip"),(i[s].clipMode==t.HeatMapGrid.ClipMode.Ellipsis||i[s].clipMode==t.HeatMapGrid.ClipMode.EllipsisWithTooltip)&&C.addClass("e-gridellipsis"),f.append(C),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&(void 0==i[s].allowFiltering||!0===i[s].allowFiltering)&&(!t.isNullOrUndefined(i[s].field)||""==i[s].field)){if(n="e-filterset",!this.initialRender&&this.model.filterSettings.filteredColumns)for(r=0;r<this.model.filterSettings.filteredColumns.length;r++)this.model.filterSettings.filteredColumns[r].field==i[s].field&&(n="e-filterset e-filteredicon e-filternone");f.append(t.buildTag("div.e-filtericon e-icon "+n)),f.addClass("e-headercellfilter"),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version&&this.model.enableRTL&&e(C).css("padding","0 0 0 2em")}a=document.createElement("col"),i[s].priority&&e(_).addClass("e-table-priority-"+i[s].priority),m.append(_),p.append(f),g.append(a),!1===i[s].visible?(f.addClass("e-hide")&&e(a).css("display","none"),-1==e.inArray(i[s].headerText,this._hiddenColumns)&&-1==e.inArray(i[s].field,this._hiddenColumnsField)&&(this._hiddenColumns.push(i[s].headerText)&&void 0!=i[s].field?this._hiddenColumnsField.push(i[s].field):this._hiddenColumnsField.push(i[s].headerText)),-1!=e.inArray(i[s].field,this._visibleColumnsField)&&this._visibleColumnsField.splice(e.inArray(i[s].field,this._visibleColumnsField),1)&&this._visibleColumns.splice(e.inArray(i[s].headerText,this._visibleColumns),1)):(this._visibleColumns.push(i[s].headerText)&&void 0!=i[s].field?this._visibleColumnsField.push(i[s].field):this._visibleColumnsField.push(i[s].headerText),i[s].visible=!0,-1!=e.inArray(""==i[s].field?i[s].headerText:i[s].field,this._hiddenColumnsField)&&this._hiddenColumnsField.splice(e.inArray(""==i[s].field?i[s].headerText:i[s].field,this._hiddenColumnsField),1)&&this._hiddenColumns.splice(e.inArray(i[s].headerText,this._hiddenColumns),1)),this.model.showColumnChooser&&!1!==i[s].showInColumnChooser&&(i[s].showInColumnChooser=!0),this.model.allowResizing&&!1!==i[s].allowResizing&&(i[s].allowResizing=!0),t.isNullOrUndefined(i[s].headerTextAlign)?void 0!=i[s].textAlign?C.css("text-align",i[s].textAlign):this.model.enableRTL&&C.css("text-align",i[s].textAlign="right"):C.css("text-align",i[s].headerTextAlign),!1===i[s].allowResizing&&this._disabledResizingColumns.push(i[s].field),!1===i[s].allowSorting&&this._disabledSortableColumns.push(i[s].field),!1===i[s].allowGrouping&&this._disabledGroupableColumns.push(i[s].field),!1===i[s].allowEditing&&this._disabledEditableColumns.push(i[s].field),t.isNullOrUndefined(i[s].cssClass)||(f.addClass(i[s].cssClass),e(a).addClass(i[s].cssClass)),t.isNullOrUndefined(i[s].headerTemplateID)||(C.html(e(i[s].headerTemplateID).hide().html()).parent().addClass("e-headertemplate"),-1==(d=e.inArray(i[s].field,this._disabledGroupableColumns))&&t.isNullOrUndefined(i[s].field)&&this._disabledGroupableColumns.push(i[s].field)),this.model.isResponsive&&f.attr("title",this._decode(i[s].headerText)),i[s].priority&&(f.attr("data-priority",i[s].priority).addClass("e-table-priority-"+i[s].priority),e(a).addClass("e-table-priority-"+i[s].priority)),this.initialRender&&("string"==typeof i[s].width&&-1!=i[s].width.indexOf("%")?this.columnsWidthCollection.push(parseInt(i[s].width)/100*this.element.width()):this.columnsWidthCollection.push(i[s].width)),void 0==i[s].width&&void 0!==this.model.commonWidth&&(this.columnsWidthCollection[s]=this.model.commonWidth),this._fieldColumnNames[i[s].headerText]=i[s].field,this._headerColumnNames[i[s].field]=i[s].headerText}return c.append(p),u.append(m),h.append(g).append(c).append(u),h},i.prototype._decode=function(t){return e("<div/>").html(t).text()},i.prototype._checkForeignKeyBinding=function(){if(this.model.columns.length){var e,i,l,o;for(e=0,l=(i=this.model.columns).length;e<l;e++)(o=i[e]).hasOwnProperty("foreignKeyField")&&o.dataSource instanceof t.DataManager&&this._relationalColumns.push({field:o.field,key:o.foreignKeyField,value:o.foreignKeyValue,dataSource:o.dataSource});this._$fkColumn=!0}},i.prototype._initScrolling=function(){for(var i,l=[],o=[],s=0;s<this.model.columns.length;s++)!1===this.model.columns[s].visible&&s<this.model.scrollSettings.frozenColumns&&0,!0===this.model.columns[s].isFrozen?l.push(this.model.columns[s]):o.push(this.model.columns[s]);l.length>0&&(i=this.model.scrollSettings.frozenColumns,this.model.columns=e.merge(e.merge([],l),o),this.model.scrollSettings.frozenColumns=l.length,l.length!=i&&0!=i&&(this.model.scrollSettings.frozenColumns=i)),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&(this.model.allowGrouping||null!=this.model.rowTemplate||null!=this.model.detailsTemplate||null!=this.model.childGrid||this.model.scrollSettings.allowVirtualScrolling||"batch"==this.model.editSettings.editMode)||(this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this.model.scrollSettings.enableVirtualization?(this._vRowHeight=Math.floor(this.getRowHeight()+1),this._virtualRowCount=Math.round(this.model.scrollSettings.height/this._vRowHeight)+1,this.model.pageSettings.pageSize<5*this._virtualRowCount&&(this.model.pageSettings.pageSize=5*this._virtualRowCount)):(this.model.pageSettings.pageSize=12==this.model.pageSettings.pageSize?Math.round(this.model.scrollSettings.height/32)+1:this.model.pageSettings.pageSize,this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize))),(this.model.width||this.model.height)&&(this.model.allowScrolling=!0,this.model.width&&(this.model.scrollSettings.width=this.model.width),this.model.height&&(this.model.scrollSettings.height=this.model.height)),this._originalScrollWidth=t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)?this.model.scrollSettings.width:this.model.scrollSettings.previousStateWidth)},i.prototype._initPrivateProperties=function(){this._click=0,this._tabKey=!1,this._gridHeaderTable=null,this._gridWidth=this.element.width(),this._id=this.element.attr("id"),this._gridRows=null,this._unboundRow=null,this._gridContentTable=null,this._gridContent=null,this._remoteSummaryData=null,this._gridSort=null,this._gridHeaderContent=null,this._gridFooterContent=null,this._gridFooterTable=null,this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._links=null,this._gridPager=null,this._cSortedColumn=null,this._cSortedDirection=null,this._$curSElementTarget=null,this._gridFilterBar=null,this._$curFieldName=null,this._$prevFieldName=null,this._mediaStatus=!1,this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1,this._$colType=null,this._$colFormat=null,this._$prevColType=null,this._$prevSElementTarget=null,this._currentFilterColumn=null,this._filteredRecordsCount=null,this._filteredRecords=[],this._validatedColumns=[],this.filterColumnCollection=[],this._previousFilterCount=null,this._excelFilter=null,this._isExcelFilter="excel"==this.model.filterSettings.filterType,this._$fkColumn=!1,this._fkParentTblData=[],this._primaryKeys=[],this._identityKeys=[],this._primaryKeyValues=[],this._modifiedRecords=[],this._addedRecords=[],this._tdsOffsetWidth=[],this._deletedRecords=[],this._disabledToolItems=e(),this._validationRules={},this._groupedColumns=[],this._scolumns=[],this._currentJsonData=[],this._groupingColumnIndex=0,this._dataManager=this._dataSource()instanceof t.DataManager?this._dataSource():null!=this._dataSource()?t.DataManager(this._dataSource()):null,null!=this._dataManager&&this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&null!=this.model.pageSettings.totalRecordsCount&&null!=this._dataManager.dataSource.json&&this._dataManager.dataSource.json.splice(this.model.pageSettings.totalRecordsCount),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!0,this._disabledResizingColumns=[],this._disabledSortableColumns=[],this._disabledGroupableColumns=[],this._disabledFilterableColumns=[],this._disabledEditableColumns=[],this._hiddenColumns=[],this._visibleColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._ccVisibleColumns=[],this._ccHiddenColumns=[],this._sortedColumns=[],this.multiSortRequest=!1,this.multiSelectCtrlRequest=!1,this.multiSelectShiftRequest=!1,this._enableSelectMultiTouch=!1,this._enableSortMultiTouch=!1,this._templateRefresh=!1,this.initialRender=!1,this._selectDrag=!1,this._isAddNew=!1,this._fieldColumnNames={},this._headerColumnNames={},this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualPageRecords={},this._queryCellView=[],this._currentPageViews=[],this._virtualLoadedPages=[],this._currentLoadedIndexes=[],this._prevVirtualSort=[],this._prevVirtualFilter=[],this._prevVirtualIndex=0,this._currentVirtualIndex=1,this._virtualRowCount=0,this._virtualSelectedRecords={},this.selectedRowsIndexes=[],this._isReorder=!1,this._searchString="",this._searchCount=null,this.columnsWidthCollection=[],this._Indicator=null,this._resizer=null,this._bulkEditCellDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null},this.batchChanges={added:[],deleted:[],changed:[]},this._bulkEditTemplate=e(),this._confirmDialog=null,this._confirmedValue=!1,this._lastRow=!1,this._isVirtualRecordsLoaded=!1,this._scrollValue=0,this._currentTopFrozenRow=this.model.scrollSettings.frozenRows,this._rowHeightCollection=[],this._scrollObject=null,this._customPop=null,this.selectedRowCellIndexes=[],this._rowIndexesColl=[],this.selectedColumnIndexes=[],this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.commonQuery=e.extend(!0,{},this.model.query),this.phoneMode=!!(this.model.isResponsive&&document.documentElement.clientWidth<360),this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection(),this._mediaQuery=!1,this._columnChooserList=null,this._$headerCols=null,this._$contentCols=null,this._detailsOuterWidth=null,this._editForm=null,this._cloneQuery=null,this.localizedLabels=this._getLocalizedLabels(),this._searchBar=null,this._relationalColumns=[],this._dropDownManager={},this._isUngrouping=!1,this._columnChooser=!1},i.prototype._getLocalizedLabels=function(){return t.getLocalizedConstants("ej.HeatMapGrid",this.model.locale)},i.prototype._initSelection=function(){for(var e=this.model.selectionSettings.selectionMode,t=0;t<e.length;t++)this["_allow"+e[t]+"Selection"]=!0},i.prototype._getSelectedViewData=function(t,i,l){var o,s,n=t%this._virtualRowCount,r={};return o=i?parseInt(e(i).closest("tr").attr("name"),32):l||(t>1?Math.ceil((t+1)/this._virtualRowCount):1),r.viewIndex=o,this._virtualLoadedRecords[o]&&(r.data=this._virtualLoadedRecords[o][n]),s=t%this._virtualRowCount,r.rowIndex=o*this._virtualRowCount-(this._virtualRowCount-s),r},i.prototype._frozenCell=function(t,i){var l=i,o=0,s=this.getRowByIndex(t);return i>=this.model.scrollSettings.frozenColumns&&(o=1,l-=this.model.scrollSettings.frozenColumns),e(s.eq(o).find(".e-rowcell:eq("+l+")"))},i.prototype.selectCells=function(i){var l,o,s,n,r,a,d,h;if(!this._allowcellSelection)return!1;switch(null,n=this._excludeDetailRows(),l=this.model.scrollSettings.frozenColumns?this._frozenCell(i[0][0],i[0][1][0]):n.eq(i[0][0]).find(".e-rowcell:eq("+i[0][1]+")"),t.isNullOrUndefined(this._previousRowCellIndex)||0==this._previousRowCellIndex.length||(this.model.scrollSettings.enableVirtualization?(o=this._prevRowCell,s=this._preVirRowCellIndex):(o=e(this.getRowByIndex(this._previousRowCellIndex[0][0]).find(".e-rowcell:eq("+this._previousRowCellIndex[0][1]+")")),s=this._previousRowCellIndex)),r=this._currentJsonData[i[0][0]],a=i[0][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(r=(d=this._getSelectedViewData(i[0][0],l)).data,a=d.rowIndex),h={currentCell:l,cellIndex:i[0][1],data:r,previousRowCellIndex:s,previousRowCell:o},"multiple"==this.model.selectionType&&(h.isCtrlPressed=this.multiSelectCtrlRequest,h.isShiftPressed=this.multiSelectShiftRequest),this.model.selectionType){case t.HeatMapGrid.SelectionType.Single:this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[],this._virtualRowCellSelIndex=[],-1==e.inArray(a,this._rowIndexesColl)&&this._rowIndexesColl.push(a),this.selectedRowCellIndexes.push({rowIndex:a,cellIndex:i[0][1]}),this.model.scrollSettings.frozenColumns?this._frozenCell(i[0][0],i[0][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(i[0][0]).find(".e-rowcell:eq("+i[0][1]+")")).addClass("e-cellselectionbackground e-activecell")}h={currentCell:l,cellIndex:i[0][1],data:r,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCellIndex:s,previousRowCell:o},(!this.multiSelectShiftRequest||t.isNullOrUndefined(this._previousRowCellIndex))&&(this._previousRowCellIndex=i,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._preVirRowCellIndex=e.extend(!0,[],i),this._preVirRowCellIndex[0][0]=a),this._prevRowCell=l),this._heatmap&&this._heatmap._cellSelected(h)},i.prototype.clearSelection=function(i){var l,o;return this._selectedRow()>=-1&&(l=this.model.scrollSettings.frozenColumns?this._excludeDetailRows():e(this.element.find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(this.model.scrollSettings.frozenColumns>0&&(l=e(l[0]).add(l[1])),l.removeAttr("aria-selected").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-selectionbackground").removeClass("e-active"),this._clearVirtualSelection||(this.selectedRowsIndexes=[],this.model.selectedRecords=[])):(this.getRowByIndex(i).removeAttr("aria-selected").find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active"),o=this.getRowByIndex(i),this.model.scrollSettings.enableVirtualization&&this.multiSelectCtrlRequest&&-1==e.inArray(i,this.selectedRowsIndexes)&&(i=parseInt(o.attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-o.index()%this._virtualRowCount)),-1!=(i=e.inArray(i,this.selectedRowsIndexes))&&this.selectedRowsIndexes.splice(i,1)),this.selectedRowsIndexes.length||this._selectedRow(-1)),!0},i.prototype._excludeDetailRows=function(){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)?e(this.getRows()):e(this.getRows()).not(".e-detailrow,.e-gridSummaryRows")},i.prototype.clearCellSelection=function(i,l){var o,s,n;if(this._allowcellSelection)if(o=this.model.scrollSettings.frozenColumns||!t.isNullOrUndefined(i)?this._excludeDetailRows():e(this.element.find(".e-cellselectionbackground")).parent(),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(o=e(o[0]).add(o[1])),o.find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-cellselectionbackground").removeClass("e-activecell"),this.selectedRowCellIndexes=[],this._rowIndexesColl=[];else{for(n=0;n<this.selectedRowCellIndexes.length;n++)if(this.selectedRowCellIndexes[n].rowIndex==i){s=e.inArray(l,this.selectedRowCellIndexes[n].cellIndex),this.model.scrollSettings.frozenColumns?this._frozenCell(i,l).removeClass("e-cellselectionbackground").removeClass("e-activecell"):o.eq(i).find(".e-rowcell").eq(l).removeClass("e-cellselectionbackground").removeClass("e-activecell");break}n!=this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[n].cellIndex.splice(s,1),0==this.selectedRowCellIndexes[n].cellIndex.length&&(this.selectedRowCellIndexes.splice(n,1),this._rowIndexesColl.splice(e.inArray(i,this._rowIndexesColl),1)))}return!0},i.prototype.clearColumnSelection=function(i){var l,o,s,n,r,a;if(this._allowcolumnSelection)if(l=e(this._excludeDetailRows()),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(l=e(l[0]).add(l[1])),l.find(".e-rowcell").removeClass("e-columnselection"),e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")).removeClass("e-columnselection"),this.selectedColumnIndexes=[];else{if(o=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++i,o=1),this.model.scrollSettings.frozenColumns)for(s=0,n=i,i>=this.model.scrollSettings.frozenColumns&&(s=1,n=i-this.model.scrollSettings.frozenColumns),r=0;r<l[s].length;r++)e(l[s][r].cells[n]).removeClass("e-columnselection");else for(a=0;a<l.length;a++)e(l[a].cells[i]).removeClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[i]).removeClass("e-columnselection"),this.selectedColumnIndexes.splice(0,i-o)}return!0},i.prototype.getSelectedRecords=function(){var e,t=[];if(this._virtualScrollingSelection)return this._virtualSelRecords;for(e=0;e<this.selectedRowsIndexes.length;e++)-1!=this.selectedRowsIndexes[e]&&(this.model.scrollSettings.allowVirtualScrolling?t.push(this._virtualSelectedRecords[this.selectedRowsIndexes[e]]):t.push(this._currentJsonData[this.selectedRowsIndexes[e]]));return t},i.prototype._setCurrentRow=function(e){(e==t.HeatMapGrid.Actions.Refresh||e==t.HeatMapGrid.Actions.Ungrouping||e==t.HeatMapGrid.Actions.Grouping||e==t.HeatMapGrid.Actions.Filtering||e==t.HeatMapGrid.Actions.Sorting||e==t.HeatMapGrid.Actions.Delete||e==t.HeatMapGrid.Actions.Save||e==t.HeatMapGrid.Actions.Cancel||e==t.HeatMapGrid.Actions.Paging)&&(this._selectedRow(-1),this._virtualDataRefresh||(this.selectedRowsIndexes=[]))},i.prototype.refreshContent=function(){var e={};e.requestType=t.HeatMapGrid.Actions.Refresh,this._processBindings(e)},i.prototype.rowHeightRefresh=function(){var i,l;if(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.model.currentViewData)&&this.model.currentViewData.length){var o=this.getContentTable().get(0).rows,s=this.getContentTable().get(1).rows,n=0;if(this.getContent().find(".e-frozencontentdiv").is(":visible"))for(i=0;i<o.length;i++)"none"!=e(o[i]).css("display")&&(n=t.max([o[i].getClientRects()[0].height,s[i].getClientRects()[0].height]),e(o[i]).height(n),e(s[i]).height(n),i&&(i==this.model.scrollSettings.frozenRows-1||i==o.length-1)&&(n+=1),this.model.allowTextWrap||i&&i!=this.model.scrollSettings.frozenRows-1||(n-=1),this.model.isEdit&&e(o[i]).find("#"+this._id+"EditForm").length&&i&&e(o[i]).find("#"+this._id+"EditForm td").css("height",n),e(s[i]).find("#"+this._id+"EditForm td").css("height",n));this._getRowHeights(),!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.getScrollObject().isVScroll()&&((l=this.getScrollObject()._vScrollbar)&&l.value()!=l.model.maximum&&this._scrollObject.refresh(this.model.scrollSettings.frozenColumns>0))}},i.prototype._refreshDataSource=function(e){this._dataManager=e instanceof t.DataManager?e:t.DataManager(e),this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataManager.dataSource.offline||this._isRemoteSaveAdaptor,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._virtualDataRefresh=!0),this.refreshContent(!0),this._refreshScroller({requestType:"refresh"})},i.prototype.dataSource=function(e,t){t&&(this._templateRefresh=!0),this._dataSource(e),this.model.scrollSettings.enableVirtualization||(e.length>0?this._currentPage(1):this._currentPage(0)),this._refreshDataSource(e);var i=this._refreshVirtualPagerInfo();(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling)&&this._showPagerInformation(i),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData?this._refreshVirtualView():this._refreshVirtualContent(),this.getContent().ejScroller("isHScroll")&&this.getContent().ejScroller("scrollX",0,!0),this.getContent().ejScroller("isVScroll")?(this.model.scrollSettings.enableVirtualization||this.getContent().ejScroller("scrollY",0,!0),this.element.find(".e-gridheader").addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss")),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow(),this._trigger("dataBound",{})},i.prototype._trigger=function(){},i.prototype.getFooterContent=function(){return this._gridFooterContent},i.prototype.getScrollObject=function(){return(null==this._scrollObject||t.isNullOrUndefined(this._scrollObject.model))&&(this._scrollObject=this.getContent().ejScroller("instance")),this._scrollObject},i.prototype.getRowHeight=function(){var e,t,i,l=-1;return null!=this.getContentTable()&&(t=(e=this.getContentTable().find("tr:not(.e-virtualrow)")).length>2?1:0,e.length&&(i=e[t].getBoundingClientRect()),e.length>1&&(l=i&&i.height?i.height:e[t].offsetHeight)),-1==l?32:l},i.prototype.getCurrentIndex=function(){return(this._currentPage()-1)*this.model.pageSettings.pageSize},i.prototype.getColumnByIndex=function(e){return e<this.model.columns.length?this.model.columns[e]:null},i.prototype.set_currentPageIndex=function(e){var i,l=this.model.pageSettings,o=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;return null==l.totalPages&&(l.totalPages=Math.ceil(o/l.pageSize)),!(e>l.totalPages||e<1||e==this._currentPage())&&(t.isNullOrUndefined(this._prevPageNo)&&(this._prevPageNo=this._currentPage()),this._currentPage(e),this._currentPage()!=this._prevPageNo&&((i={}).requestType="paging",this.gotoPage(this._currentPage(),i),!0))},i.prototype.set_currentVirtualIndex=function(e){var t,i;return!(e<1||1!=e&&e!=this._totalVirtualViews&&e==this._currentVirtualIndex&&this._checkCurrentVirtualView(this._virtualLoadedRows,e))&&(this._prevVirtualIndex=this._currentVirtualIndex,this._currentVirtualIndex=e,(t=this._calculateCurrentViewPage())<=this.model.pageSettings.totalPages&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)?this._prevVirtualIndex<e&&1!=e?(i=this._isThumbScroll&&1!=t?t:t+1,!this._virtualPageRecords[i]&&i<=this.model.pageSettings.totalPages?this._setCurrentViewPage(i):this._renderVirtulViewContent(t)):this._prevVirtualIndex>e?(i=this._isThumbScroll?t:t-1,this._virtualPageRecords[i]&&!this._virtualLoadedRecords[e-1]&&(i=t-1),!this._virtualPageRecords[i]&&i>=1&&this._setCurrentViewPage(i)):this._renderVirtulViewContent(t):this._renderVirtulViewContent(t),!0)},i.prototype._setCurrentViewPage=function(e){this._needPaging=!0,this._prevPageNo=this._currentPage(),this.gotoPage(e)},i.prototype._renderVirtulViewContent=function(){this._needPaging=!1,this._refreshVirtualView(this._currentVirtualIndex)},i.prototype._checkCurrentVirtualView=function(t,i){var l,o=this._virtualRowCount,s=i-1,n=i+1;if(t instanceof Array){if(t.length&&((0==s||n==this._totalVirtualViews+1)&&-1!=e.inArray(i,t)||-1!=e.inArray(s,t)&&-1!=e.inArray(i,t)&&-1!=e.inArray(n,t)))return!0}else if(l=n==this._totalVirtualViews?this._lastViewData:o,!this.initialRender&&1==i&&this._virtualLoadedRows[i]||i==this._totalVirtualViews&&t==this._virtualLoadedRows&&t[i]||0==s&&t[i]&&t[i].length==o||n==this._totalVirtualViews+1&&t[i]&&t[i].length==this._lastViewData||t[s]&&t[s].length==o&&t[i]&&t[i].length==o&&t[n]&&t[n].length==l)return!0;return!1},i.prototype._refreshStackedHeader=function(){var t,i,l,o;if(this.model.showStackedHeader){for(t=this.model.stackedHeaderRows,o=0;o<t.length;o++)if(0!=this.model.scrollSettings.frozenColumns){var s=e(this.getHeaderContent().find(".e-frozenheaderdiv")),n=e(this.getHeaderContent().find(".e-movableheader")),r=this._createStackedRow(t[o],!0),a=this._createStackedRow(t[o],!1);e(s.find("tr.e-stackedHeaderRow")[o]).replaceWith(r),e(n.find("tr.e-stackedHeaderRow")[o]).replaceWith(a)}else i=this._createStackedRow(t[o],!1),this.getHeaderTable().find("tr.e-stackedHeaderRow")[o]?e(this.getHeaderTable().find("tr.e-stackedHeaderRow")[o]).replaceWith(i):i.insertBefore(this.getHeaderTable().find("tr.e-columnheader:last"));if((l={}).requestType="refresh",this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0)for(o=0;o<this.model.groupSettings.groupedColumns.length;o++)this.getHeaderTable().find(".e-stackedHeaderRow").prepend(this._getGroupTopLeftCell());this.model.allowScrolling&&this._refreshScroller(l)}},i.prototype._getStackedColumnByTarget=function(e){var i=(e.get(0)||{}).className,l=/e-row([0-9])-column([0-9])/.exec(i),o=[l[1],"stackedHeaderColumns",l[2]].join(".");return t.getObject(o,this.model.stackedHeaderRows)},i.prototype._checkSkipAction=function(e){switch(e.requestType){case t.HeatMapGrid.Actions.Save:case t.HeatMapGrid.Actions.Delete:return!0}return!1},i.prototype._processBindings=function(i){var l,o,s;if(this._requestType=i.requestType,this.model.query=this.commonQuery.clone(),"batch"==this.model.editSettings.editMode&&"batchsave"!=i.requestType&&"cancel"!=i.requestType&&!this._confirmedValue&&this._bulkChangesAcquired())return this._requestArgs=i,!1;!t.isNullOrUndefined(this.model.dataSource)&&"refresh"==i.requestType&&this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this._scrollValue=0,this._loadedJsonData=[],this._prevPage=this._currentPage()),this._ensureDataSource(i),this.model.scrollSettings.allowVirtualScrolling&&("virtualscroll"==i.requestType?(this._loadedJsonData.push({pageIndex:this._prevPage,data:this._currentJsonData}),this._prevPage=this._currentPage()):this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=this.model.currentViewData),"filtering"==i.requestType&&(this._loadedJsonData=[],this._prevPage=this._currentPage())),this.model.scrollSettings.allowVirtualScrolling&&"filtering"==i.requestType&&this.model.filterSettings.filteredColumns.length>0&&this.getScrollObject().scrollY(0),this.model.enableRTL?this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"):this.element.hasClass("e-rtl")&&this.element.removeClass("e-rtl"),i.requestType==t.HeatMapGrid.Actions.Delete&&0==this.model.groupSettings.groupedColumns.length&&(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").remove(),i.tr.remove()),this._editForm=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):e("#"+this._id+"EditForm"),this.model.editSettings.showAddNewRow&&"beginedit"==i.requestType||0==this._editForm.length||this._editForm.length>1&&("save"==i.requestType&&"edit"==i.action||"cancel"==i.requestType)&&(this._editForm="top"==this.model.editSettings.rowPosition?this._editForm[1]:this._editForm[0]),this._dataSource()instanceof t.DataManager&&!this._isRemoteSaveAdaptor&&i.requestType!=t.HeatMapGrid.Actions.BeginEdit&&i.requestType!=t.HeatMapGrid.Actions.Cancel&&i.requestType!=t.HeatMapGrid.Actions.Add?(this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage&&(l=t.pvt.filterQueries(this.model.query.queries,"onPage"),this.model.query.queries.splice(e.inArray(l[0],this.model.query.queries),1),this.model.query.page(this._currentPage()-1,this.model.pageSettings.pageSize),o=this._dataSource().executeQuery(this.model.query),this.model.query.queries.splice(e.inArray(l[0],this.model.query.queries),1),this.model.query.page(this._currentPage(),this.model.pageSettings.pageSize)),this._virtualSelectedRows&&this._virtualSelectedRows.length>0&&this.model.query.addParams("virtualSelectRecords",this._virtualSelectedRows),s=this._queryPromise=this._dataSource().executeQuery(this.model.query),proxy._dataSource().ready?proxy._dataSource().ready.done(function(){proxy._processDataRequest(proxy,i,s,o)}):proxy._processDataRequest(proxy,i,s,o)):this._isRelationalRendering(i)?this._setForeignKeyData(i):this.sendDataRenderingRequest(i)},i.prototype._processDataRequest=function(e,i,l,o){l.done(t.proxy(function(l){var s,n;if(e._relationalColumns.length,o&&!e._previousPageRendered)e.model.previousViewData&&0!=e.model.previousViewData.length&&(e.model.previousViewData.splice(0,l.result.length),e._previousPageLength=l.result.length,e._currentPageData=l.result,t.merge(e.model.previousViewData,l.result),e.model.currentViewData=e.model.previousViewData,e._remoteLastPageRendered=!0);else if(e._remoteLastPageRendered&&e.model.pageSettings.currentPage==e.model.pageSettings.totalPages-1&&!e.model.scrollSettings.enableVirtualization){for(s=e.model.pageSettings.pageSize-e._previousPageLength,n=0;n<s;n++)e.getRows()[e.getRows().length-(e.model.pageSettings.pageSize-n)].remove();e._tempPageRendered=!0,e.model.currentViewData=l.result}else e.model.pageSettings.currentPage!=e.model.pageSettings.totalPages-1||e._remoteLastPageRendered||(e._previousPageRendered=!0),e.model.currentViewData=null==l.result?[]:l.result,e._$fkColumn&&"excel"==e.model.filterSettings.filterType&&e.model.filterSettings.filteredColumns.length>0&&(e._fkParentTblData=l.result);e.model.allowScrolling&&e.model.scrollSettings.allowVirtualScrolling&&e.model.scrollSettings.enableVirtualization&&("filtering"==i.requestType&&(e._gridRecordsCount=e._filteredRecordsCount=l.count,e._refreshVirtualViewDetails()),l.result.length?(e._isInitNextPage||e._isLastVirtualpage?(e._setInitialCurrentIndexRecords(l.result,e._currentPage()),e._isInitNextPage=e._isLastVirtualpage=!1):e._setVirtualLoadedRecords(l.result,e._currentPage()),e._isThumbScroll&&!e._checkCurrentVirtualView(e._virtualLoadedRecords,e._currentVirtualIndex)&&e._checkPrevNextViews(),e._remoteRefresh=!0):e.getContent().find(".e-virtualtop, .e-virtualbottom").remove()),t.isNullOrUndefined(l.aggregates)||(e._remoteSummaryData=l.aggregates),t.isNullOrUndefined(e._unboundRow)||i.selectedRow==e._unboundRow||"save"!=i.requestType||(e._unboundRow.find(".e-editbutton").trigger("click"),e._unboundRow=null)})),l.fail(t.proxy(function(t){i.error=t.error,t=[],e.model.currentViewData=[],e._trigger("actionFailure",i)}))},i.prototype._createUnboundElement=function(i){var l,o,s,n,r=document.createElement("div");for(i.headerText=t.isNullOrUndefined(i.headerText)?i.field:i.headerText,t.isNullOrUndefined(i.headerText)||(r.id=this._id+i.headerText.replace(/[^a-z0-9|s_]/gi,"")+"_UnboundTemplate"),l=t.buildTag("div.e-unboundcelldiv"),o=i.commands,s=0;s<o.length;s++)(n=t.buildTag("button.e-"+o[s].type.replace(/\s+/g,"")+"button","",{},{type:"button"})).val(o[s].type),l.append(n);return e("body").append(e(r).html(l).hide()),r},i.prototype._gridTemplate=function(e,t,i){var l=e.model.columns[i];return e._isGrouping&&(this.index=e._currentJsonData.indexOf(this.data)),e._renderEjTemplate("#"+t,this.data,this.index,l)},i.prototype._renderEjTemplate=function(i,l,o,s){var n=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(n=e(i).attr("type")),n&&(n=n.toLowerCase(),t.template[n])?t.template[n](this,i,l,o,s):t.template.render(this,i,l,o,s)},i.prototype._createTemplateElement=function(i,l,o){var s,n=i["templateID"in i?"templateID":"template"],r=/^#([\w-]*)/.exec(n),a=(l=l||e("body"),o?"Pager":i.headerText+e.inArray(i,this.model.columns)+"_Template"),d={name:"SCRIPT",type:"text/x-template",text:n,id:(this._id+a).replace(/[^0-9A-z-_]/g,"")};return(s=r&&r[1]?document.getElementById(r[1]):/^<script/i.test(n)?e(n).get(0):t.buildTag(d.name,d.text).get(0)).id=s.id||d.id,s.type=s.type||d.type,l.append(o?s.innerHTML:s),s},i.prototype._page=function(e){var t;e.events.text==this.localizedLabels.NextPage?(t=this.model.pageSettings.currentPage,++t,this.gotoPage(t)):e.events.text==this.localizedLabels.PreviousPage?(t=this.model.pageSettings.currentPage)>1?(--t,this.gotoPage(t)):this.gotoPage(t):e.events.text==this.localizedLabels.LastPage?(t=this.model.pageSettings.totalPages,this.gotoPage(t)):this.gotoPage(1)},i.prototype.gotoPage=function(e){var i,l;(this.model.allowPaging||this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling)&&((i={}).previousPage=this._currentPage(),this._currentPage(e),i.endIndex=this._currentPage()*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:this._currentPage()*this.model.pageSettings.pageSize,i.startIndex=this._currentPage()*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=e,this.model.allowPaging&&(i.requestType=t.HeatMapGrid.Actions.Paging),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this._isVirtualRecordsLoaded=!1,l=this._refreshVirtualPagerInfo(),this._showPagerInformation(l),i.requestType=t.HeatMapGrid.Actions.VirtualScroll),this._processBindings(i)&&this._currentPage(i.previousPage),this._primaryKeyValues=[])},i.prototype._checkScrollActions=function(e){return!(this.model.scrollSettings.allowVirtualScrolling||e!=t.HeatMapGrid.Actions.Sorting&&e!=t.HeatMapGrid.Actions.Reorder)||e==t.HeatMapGrid.Actions.Grouping||e==t.HeatMapGrid.Actions.Ungrouping||e==t.HeatMapGrid.Actions.Add||e==t.HeatMapGrid.Actions.Cancel||e==t.HeatMapGrid.Actions.Save||e==t.HeatMapGrid.Actions.BatchSave||e==t.HeatMapGrid.Actions.Delete||e==t.HeatMapGrid.Actions.Filtering||e==t.HeatMapGrid.Actions.Paging||e==t.HeatMapGrid.Actions.Refresh||e==t.HeatMapGrid.Actions.Search},i.prototype._frozenAlign=function(){var e,t=this.getContent().first(),i=this.getBrowserDetails();e=this.model.enableRTL?"margin-right":"margin-left",t.find(".e-movablecontent").css(e,"safari"===i.browser?"auto":t.find(".e-frozencontentdiv").width()+"px"),this.getHeaderContent().find(".e-movableheader").removeAttr("style").css(e,"safari"===i.browser?"auto":this.getHeaderContent().find(".e-frozenheaderdiv").width()+"px")},i.prototype._refreshScroller=function(e){var i,l,o,s,n,r=this.getContent().first();t.isNullOrUndefined(r.data("ejScroller"))||(this.model.scrollSettings.frozenColumns>0&&(this._frozenAlign(),this.refreshScrollerEvent(),r.find(".e-movablecontent").scrollLeft(this.getHeaderContent().find(".e-movableheader").scrollLeft()),!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.getScrollObject()._vScrollbar.value()>this.getScrollObject()._vScrollbar.model.maximum&&(i=this.getScrollObject()._vScrollbar.model.maximum)),this.model.scrollSettings.frozenRows>0&&(this._initFrozenRows(),i=this.getScrollObject().model.scrollTop,!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&i>this.getScrollObject()._vScrollbar.model.maximum&&(i=this.getScrollObject()._vScrollbar.model.maximum),("cancel"==e.requestType||"save"==e.requestType)&&i>this._editFormHeight&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&(i-=this._editFormHeight),e.requestType==t.Grid.Actions.Add&&this.getScrollObject().scrollY(0,!0),t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),"beginedit"==e.requestType&&(i=this.getScrollObject().model.scrollTop,this.getScrollObject().scrollY(0,!0)),!t.isNullOrUndefined(this.model.dataSource)&&("refresh"==e.requestType||"searching"==e.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData&&this._gridRecordsCount>0?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(1),1==this._currentVirtualIndex&&this.getScrollObject().scrollY(0)),this.model.scrollSettings.frozenColumns>0&&"filtering"!=e.requestType?this.rowHeightRefresh():this.getScrollObject().refresh(),r.ejScroller("model.enableRTL",this.model.enableRTL),this.model.isResponsive&&("searching"==e.requestType||"filtering"==e.requestType)&&((o=(l=this.getScrollObject()).isHScroll()?this.getContentTable().height()+l.model.buttonSize:this.getContentTable().height())>this.model.scrollSettings.height&&(o=this.model.scrollSettings.height),s="string"==typeof this.model.scrollSettings.width?this.element.width()-l.model.buttonSize:this.model.scrollSettings.width,this.getContent().ejScroller({height:o,width:s})),r.ejScroller("isVScroll")&&!this.getScrollObject().model.autoHide?(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").hasClass("e-hscrollcss")||this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):this._showHideScroller(),this._getRowHeights(),i&&!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&e.requestType!=t.Grid.Actions.Add&&(this._currentTopFrozenRow=0,i>this.getScrollObject()._vScrollbar.model.maximum&&(i=this.getScrollObject()._vScrollbar.model.maximum),this.getScrollObject()._vScrollbar.scroll(i)),"virtualscroll"==e.requestType&&(n=this.getScrollObject().model.scrollTop+this.getScrollObject().model.height-.3*this.getScrollObject().model.height,this.getScrollObject().scrollY(n,!0)))},i.prototype._isFrozenColumnVisible=function(){for(var e=0;e<this.model.scrollSettings.frozenColumns;e++)if(this.model.columns[e].visible)return!0;return!1},i.prototype._frozenPaneRefresh=function(){this.getContent().find(".e-frozencontentdiv").css("display","none"),this.getHeaderContent().find(".e-frozenheaderdiv").css("display","none"),this.getHeaderContent().find(".e-movableheader")[0].style["margin-left"]="",this.getContent().find(".e-movablecontent")[0].style["margin-left"]="";var e=t.isNullOrUndefined(this._scrollObject._vScrollbar)?0:this._scrollObject._vScrollbar["e-vscroll"].width(),i=this.model.scrollSettings.width-e-1;this.model.scrollSettings.width>this.getContent().find(".e-movablecontentdiv").width()&&(this.getContent().find(".e-movablecontentdiv").width(i),this.getHeaderContent().find(".e-movableheaderdiv").width(i)),this._scrollObject.option("scrollLeft",0)},i.prototype._renderScroller=function(){var i,l,o,s,n,r,a,d;if(this.model.scrollSettings||(this.model.scrollSettings={}),this.model.enablePersistence&&(t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)||!this.model.scrollSettings.previousStateWidth)&&this.model.isResponsive&&(this.model.scrollSettings.previousStateWidth=this.model.scrollSettings.width),"string"!=typeof this._originalScrollWidth||this.model.isResponsive||(this.element.css("width","auto"),i=this.element.width(),("auto"==this.model.scrollSettings.width||"auto"==this._originalScrollWidth)&&(this._originalScrollWidth="100%"),this.model.scrollSettings.width=i*(parseFloat(this._originalScrollWidth)/100)),"string"!=typeof this.model.scrollSettings.height||this.model.isResponsive||(l=this.element.height(),"auto"==this.model.scrollSettings.height&&(this.model.scrollSettings.height="100%"),this.model.scrollSettings.height=l*(parseFloat(this.model.scrollSettings.height)/100)),(this.model.scrollSettings.width||this.model.width)&&!this._mediaQuery&&this.element.width(this.model.scrollSettings.width||this.model.width),o=this.getContent().attr("tabindex","0"),this.getRows(),this.model.scrollSettings.frozenColumns>0){if(this.getContent().find(".e-frozencontentdiv").width()+20>this.model.scrollSettings.width)return this.getContent().remove(),void this.getHeaderTable().eq(1).remove();s=this.getContent().find(".e-frozencontentdiv").width(),n=this.model.enableRTL?"margin-right":"margin-left",this.getContent().find(".e-movablecontent").css(n,s+"px"),this.getHeaderContent().find(".e-movableheader").css(n,s+"px"),this.model.scrollSettings.targetPane=".e-movablecontent"}this._initFrozenRows(),this.model.scrollSettings.autoHide&&(this.model.scrollSettings.show=e.proxy(this._showHideScroller,this)),r=this,this.model.scrollSettings.frozenRows||(this.model.scrollSettings.scroll=function(e){t.isNullOrUndefined(e.scrollData)||"e-hhandle"!=e.scrollData.handler?(r._scrollValue=e.scrollTop,r.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/r._vRowHeight)):(r.model.allowFiltering&&("menu"==r.model.filterSettings.filterType||r._isExcelFilter)&&(r._isExcelFilter?r._excelFilter.closeXFDialog():r._closeFilterDlg()),r._checkScroller(e,this))}),!this.model.scrollSettings.allowVirtualScrolling&&this.model.currentIndex>0&&!this.model.scrollSettings.scrollTop&&(a=this.model.currentIndex*this.getRowHeight(),this.model.scrollSettings.scrollTop=a),this.model.scrollSettings&&!this.model.scrollSettings.height&&(this.model.scrollSettings.height=0),o.ejScroller(this.model.scrollSettings),null!=this.model.rowTemplate&&("msie"==this.getBrowserDetails().browser||"safari"==this.getBrowserDetails().browser)&&this.getScrollObject().refresh(),this.model.scrollSettings.frozenColumns>0&&0==this.model.scrollSettings.frozenRows&&this.getScrollObject()._vScrollbar&&this.getScrollObject()._hScrollbar&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=this.getScrollObject()._hScrollbar._scrollData.skipChange=!0),this.model.scrollSettings.autoHide||this._showHideScroller(),"safari"==this.getBrowserDetails().browser&&this.model.scrollSettings.frozenColumns>0&&this.getHeaderContent().find(".e-movableheader").add(this.getContent().find(".e-movablecontent")).css(n,"auto"),this.refreshScrollerEvent(),this.model.scrollSettings.frozenColumns>0&&!this._isFrozenColumnVisible()&&this._frozenPaneRefresh(),r.model.scrollSettings.allowVirtualScrolling&&(d=this._refreshVirtualPagerInfo(),this._showPagerInformation(d),o.ejScroller({scroll:function(i){if(r.model.scrollSettings.enableVirtualization&&null!=i.scrollData&&"e-hhandle"!=i.scrollData.handler){if(i.reachedEnd=i.scrollData.scrollable-i.scrollTop==0,"thumb"==i.source){var l=Object.keys(r._virtualLoadedRows),o=(r._currentVirtualIndex+2).toString();"continuous"==r.model.scrollSettings.virtualScrollMode&&-1==e.inArray(o,l)&&o<r._totalVirtualViews?r._isContinuous=!0:(i.model.scrollTop=i.scrollTop,r._isContinuous=!1,i.cancel=!0)}("button"==i.source||"key"==i.source||"wheel"==i.source)&&(r._isThumbScroll=!1,r._virtualViewScroll(i),"continuous"==r.model.scrollSettings.virtualScrollMode&&i.reachedEnd&&this.refresh()),r.model.currentIndex=0==i.scrollTop?i.scrollTop:Math.floor(i.scrollTop/r._vRowHeight)}else!t.isNullOrUndefined(i.scrollData)&&"e-hhandle"==i.scrollData.handler&&r.model.allowFiltering&&("menu"==r.model.filterSettings.filterType||r._isExcelFilter)&&(r._isExcelFilter?r._excelFilter.closeXFDialog():r._closeFilterDlg()),i.reachedEnd=this.content()[0].scrollHeight-i.scrollTop==this.content()[0].clientHeight,("button"==i.source||"key"==i.source||"wheel"==i.source)&&null!=r.model&&r._virtualScroll(i),"wheel"==i.source&&i.scrollTop!=r._scrollValue&&(i.scrollTop=r._scrollValue),r._checkScroller(i,this)},thumbEnd:function(t){r.model.scrollSettings.enableVirtualization&&"continuous"==r.model.scrollSettings.virtualScrollMode?t.reachedEnd=t.scrollData.scrollable-t.model.scrollTop==0:t.originalEvent&&!e(t.originalEvent.target).hasClass("e-rowcell")&&(t.reachedEnd=this.content()[0].scrollHeight-t.scrollData.sTop==this.content()[0].clientHeight),"e-hhandle"!=t.scrollData.handler&&null!=r.model&&t.originalEvent&&(r.model.scrollSettings.enableVirtualization?(r._isThumbScroll=!0,r._virtualViewScroll(t),"continuous"==r.model.scrollSettings.virtualScrollMode&&t.reachedEnd&&this.refresh()):r._virtualScroll(t))},scrollEnd:function(t){if("mousewheel"!=t.scrollData.type&&(null==t.scrollData.model||"horizontal"!=t.scrollData.model.orientation)&&r.model.scrollSettings.enableVirtualization&&!r._isContinuous){var i=r._calculateCurrentViewPage(t.model);-1!=e.inArray(i,r._virtualLoadedPages)?(r._isThumbScroll=!0,r._virtualViewScroll(t),r._totalVirtualViews<=3*r._maxViews&&(this._content[0].scrollTop=t.scrollData.scrollTop)):t.cancel=!0}}}))},i.prototype._checkScroller=function(e,t){var i,l=e.scrollLeft>0?e.scrollLeft:Math.abs(e.scrollLeft);"thumb"==e.source&&(t.content()[0].scrollWidth-l==t.content()[0].clientWidth||0==l)&&(this.model.enableRTL&&(i=0==l?e.scrollData.scrollable:0,e.scrollData.sTop=e.model.scrollLeft=i,t.content().scrollLeft(i)),t.refresh())},i.prototype._showHideScroller=function(){this.getContent().ejScroller("isVScroll")?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this.model.scrollSettings.autoHide||this.getHeaderContent().addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss"),"msie"==this.getBrowserDetails().browser||0!=this.model.scrollSettings.frozenColumns||this._mediaQuery||(this.element.find(".e-gridheader").hasClass("e-scrollcss")||!this.model.filterSettings.filteredColumns.length&&!this._hiddenColumns.length?(this.getHeaderContent().find("div table").first().width(this.getContentTable().width()),this.getContent().find("div table").first().width(this.getContentTable().width()),this.getHeaderTable().width(this.getContentTable().width())):(this.getHeaderTable().removeAttr("style"),this.getContentTable().removeAttr("style"))),"msie"==this.getBrowserDetails().browser&&0==this.model.scrollSettings.frozenColumns&&(this.getContent().ejScroller("isVScroll")?this.getContent().width(this.getHeaderContent().width()+18):this.getContent().width(this.getHeaderContent().width())),this._isHscrollcss()},i.prototype._isHscrollcss=function(){var e=this.getContent().data("ejScroller"),t=e&&(e.isHScroll()||e.isVScroll())?"addClass":"removeClass";this.getHeaderContent().find(".e-headercontent")[t]("e-hscrollcss")},i.prototype._initFrozenRows=function(){var i=this.getRows();this.model.currentViewData&&0!=this.model.currentViewData.length&&(this.model.scrollSettings.frozenRows>0&&null!=i?(this.model.scrollSettings.scroll=e.proxy(this._scroll,this),this.getContent().find(".e-frozeny").removeClass("e-frozeny").end().find(".e-frozenrow").removeClass("e-frozenrow"),!t.isNullOrUndefined(i[0][this.model.scrollSettings.frozenRows-1])&&!t.isNullOrUndefined(i[1][this.model.scrollSettings.frozenRows-1])&&this.model.scrollSettings.frozenColumns>0?e(i[0][this.model.scrollSettings.frozenRows-1].cells).add(i[1][this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"):t.isNullOrUndefined(this.getRowByIndex(this.model.scrollSettings.frozenRows-1)[0])||e(i[this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"),this.model.scrollSettings.height=this._rowHeightCollection[Math.floor(this.model.scrollSettings.height/this._rowHeightCollection[1])]+18):delete this.model.scrollSettings.scroll)},i.prototype.refreshScrollerEvent=function(){this.getContent().find(".e-content:first,.e-movablecontent").scroll(t.proxy(function(t){if(this.model.scrollSettings.targetPane?this.getHeaderContent().find(".e-movableheader").scrollLeft(e(t.currentTarget).scrollLeft()):this.getHeaderContent().find("div").first().scrollLeft(e(t.currentTarget).scrollLeft()),this.model.scrollSettings.frozenRows>0&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&this.model.isEdit){var i=t.target.scrollTop;this.getContent().find(".e-content").scrollTop(0),this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop+i,!0)}},this)),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").scroll(t.proxy(function(t){var i=e(t.currentTarget);this.model.scrollSettings.targetPane?(this.getContent().find(".e-movablecontent").scrollLeft(i.scrollLeft()),this.model.showSummary&&this.getFooterContent().find(".e-movablefooter").scrollLeft(i.scrollLeft())):(this.model.showSummary&&this.getFooterContent().scrollLeft(i.scrollLeft()),this.getContent().find(".e-content").first().scrollLeft(i.scrollLeft()))},this))},i.prototype._renderByFrozenDesign=function(){var i=e(document.createElement("div")),l=this._getMetaColGroup().find("col"),o={};o.colgroup1=i.append(t.buildTag("colgroup").append(l.splice(0,this.model.scrollSettings.frozenColumns))).html(),o.colgroup2=i.html(t.buildTag("colgroup").append(l)).html(),this.getContent().find("div").first().get(0).innerHTML=e.render[this._id+"_FrozenTemplate"]({datas:this.model.currentViewData},o),this.setGridContentTable(this.getContent().find(".e-table").attr("data-role","heatmap"))},i.prototype.addFrozenTemplate=function(){var t="<div class='e-frozencontentdiv'><table class='e-table'>{{:~colgroup1}}<tbody>{{for datas tmpl='"+this._id+"_JSONFrozenTemplate'/}}</tbody></table></div><div class='e-movablecontent'><div class='e-movablecontentdiv'><table class='e-table'>{{:~colgroup2}}<tbody>{{for datas tmpl='"+this._id+"_JSONTemplate'/}}</tbody></table></div></div>",i={};i[this._id+"_FrozenTemplate"]=t,e.templates(i)},i.prototype._getTopRow=function(e){var t=this.model.scrollSettings.frozenRows,i=0;if(e>10)for(i=0;i<this._rowHeightCollection.length;i++)if(this._rowHeightCollection[i]>e){t=this.model.scrollSettings.frozenRows+i-1;break}return{imaginaryIndex:t,actualIndex:i}},i.prototype._showHideRow=function(t,i,l,o){var s=this.getRows();this.model.scrollSettings.frozenColumns>0?e(s[0]).slice(t,i).add(e(s[1]).slice(t,i).toArray())[l]():e(s).slice(t,i)[l](),this._currentTopFrozenRow="show"==l?t:i,this.getScrollObject()._changevHandlerPosition(o)},i.prototype._scroll=function(e){var i,l,o,s,n;if(null!=e.scrollData&&"width"!=e.scrollData.dimension){e.cancel=!0;this.getRows();var r=this._getTopRow(e.scrollTop).imaginaryIndex;if(r>this._currentTopFrozenRow?this._showHideRow(this.model.scrollSettings.frozenRows,r,"hide",e.scrollTop):r<this._currentTopFrozenRow&&this._showHideRow(r,this._currentTopFrozenRow+1,"show",e.scrollTop),i=this.getContentTable().last().find("tr"),l=2*parseInt(i.last().find("td:first").css("border-top-width"))+1,e.scrollTop==this.getScrollObject()._vScrollbar.model.maximum&&i.last()[0].offsetTop+i.last().height()-l>this.element.find(".e-content").height()){for(o=i.last().prev()[0].offsetTop+i.last().prev().height(),s=1,n=i.length-2;o-l>this.element.find(".e-content").height();n++){o=i[n].offsetTop+i.eq(n).height(),s++;break}this._showHideRow(this.model.scrollSettings.frozenRows,r+s,"hide",e.scrollTop)}e.model.scrollTop=e.scrollTop}else t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)},i.prototype._virtualScroll=function(t){var i,l;if(null!=t){var o=0,s=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,n=this.model.pageSettings,r=this.getContentTable()[0].tBodies[0],a=e(r).find("tr.e-virtualrow");if(n.totalPages=Math.ceil(s/n.pageSize),void 0!==t.scrollTop&&(t.model.scrollTop=t.scrollTop),void 0!=t.reachedEnd&&(t.model.reachedEnd=t.reachedEnd),(i=this._calculateCurrenPage(a,this.getContentTable(),t.model))>n.totalPages&&(i=n.totalPages),n.currentPage!=i&&-1==e.inArray((i-1)*n.pageSize,this.virtualLoadedPages)&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded)n.currentPage=i;else{if(-1==e.inArray((i-1)*n.pageSize,this.virtualLoadedPages)){if("continuous"==this.model.scrollSettings.virtualScrollMode&&!t.reachedEnd)return;i==n.totalPages&&-1==e.inArray((i-2)*n.pageSize,this.virtualLoadedPages)&&(o++,this.set_currentPageIndex(i)),1==o&&(this._lastRow=!0),this.set_currentPageIndex(i)}n.currentPage=i}l=this._refreshVirtualPagerInfo(),this._showPagerInformation(l)}},i.prototype._virtualViewScroll=function(t){if(null!=t){void 0!==t.scrollTop&&(t.model.scrollTop=t.scrollTop),void 0!=t.reachedEnd&&(t.model.reachedEnd=t.reachedEnd);var i=this._calculateCurrentVirtualIndex(t);-1==e.inArray(i,this._currentLoadedIndexes)&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded||this.set_currentVirtualIndex(i)}},i.prototype._refreshVirtualContent=function(t){var i,l,o,s,n,r,a,d=this.getRowHeight(),h=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;null!=t&&(this._currentPage(t),i=this._refreshVirtualPagerInfo(),this._showPagerInformation(i)),l=this.getCurrentIndex(),o=this.getContentTable()[0].tBodies[0],l>0&&(s=document.createElement("tr"),e(s).addClass("e-virtualrow").css("height",d*l).prependTo(o)),l+this.model.pageSettings.pageSize<=h&&1!=this.getContentTable().find("tr").last().hasClass("e-virtualrow")&&0==this.model.scrollSettings.frozenColumns&&(n=document.createElement("tr"),r="normal"==this.model.scrollSettings.virtualScrollMode?d*(h-(l+this.model.pageSettings.pageSize)):1,e(n).addClass("e-virtualrow").css("height",r).appendTo(e(o))),this.virtualLoadedPages=[],this.orderedVirtualLoadedPage=[],this.virtualLoadedPages.push(l>=0?l:0),this.orderedVirtualLoadedPage.push(l>=0?l:0),(a=e(o).find("tr:not(.e-virtualrow)").attr("name",l>=0?l:0)[0])&&a.previousSibling&&(e(a.previousSibling).hasClass("e-virtualrow")||a.previousSibling.offsetTop>l*this.getContent().height())&&(this.getContent().children("div").first().scrollTop(this.getContent().find(".content").scrollTop()-(this.getContent().find(".content").scrollTop()-a.offsetTop)),this._isVirtualRecordsLoaded=!0)},i.prototype._refreshVirtualView=function(t){var i,l,o,s,n,r,a;if(this._singleView)this._singleView=!1,this._addLastRow(),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),r=this._currentVirtualIndex.toString(32),e(this._gridRows).attr("name",r),this._virtualLoadedRows[this._currentVirtualIndex]=this._gridRows,this._eventBindings();else{if(i=this._virtualRowCount,t)t>this._totalVirtualViews&&(t=1,l=!0),this._currentVirtualIndex=t,this._virtualLoadedRecords[t]?o=Math.ceil(this.model.currentIndex/this.model.pageSettings.pageSize):(this._virtualDataRefresh||this._currentVirtualIndex==this._totalVirtualViews||(l=!0),o=Math.ceil(t*this._virtualRowCount/this.model.pageSettings.pageSize)),this._refreshVirtualViewScroller(l),o>this.model.pageSettings.totalPages&&(o=this.model.pageSettings.totalPages),o<=0&&(o=1),-1==e.inArray(o,this._virtualLoadedPages)?this.gotoPage(o):(this._currentPage(o),this._needPaging=!this._checkCurrentVirtualView(this._virtualLoadedRecords,t),this._getVirtualLoadedRecords(this.model.query),this._replacingVirtualContent());else{if(this._refreshVirtualViewDetails(),s=e(this.getContentTable()[0].rows),this._setVirtualTopBottom(),this.initialRender){for(a=0;a<this._currentLoadedIndexes.length;a++){var d=this._currentLoadedIndexes[a],h=a*i;e(s[(a+1)*i-1]).addClass("e-virtualview"+d),r=d.toString(32),n=s.slice(h,h+i).attr("name",r).detach(),this._virtualLoadedRows[d]=n,n.appendTo(this.getContentTable())}this._currentVirtualIndex>1&&this._refreshVirtualViewScroller()}this._eventBindings()}-1==e.inArray(this._currentPage(),this._virtualLoadedPages)&&this._virtualLoadedPages.push(this._currentPage())}if(!t&&(this.model.queryCellInfo||this.model.rowDataBound))for(a=0;a<this._currentLoadedIndexes.length;a++)-1==e.inArray(this._currentLoadedIndexes[a],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[a]);this._isThumbScroll=!1,this._virtualDataRefresh=!1},i.prototype._refreshVirtualViewData=function(){this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualLoadedPages=[],this._virtualPageRecords={},this._queryCellView=[],null!=this.model.pageSettings.totalPages&&this._currentPage()>this.model.pageSettings.totalPages&&(this._currentPage(1),this._currentVirtualIndex=1)},i.prototype.setCurrentPageData=function(e){this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._refreshVirtualViewDetails(),this._setVirtualLoadedRecords(e,this._currentPage()),this._refreshVirtualView(this._currentVirtualIndex))},i.prototype._refreshVirtualViewScroller=function(e){var t;this.initialRender&&!this.model.scrollSettings.scrollTop||e?(this._vRowHeight,t=this.model.currentIndex*this._vRowHeight):t=this._scrollObject.model.scrollTop,this.getContent().ejScroller("model.scrollTop",t),this._scrollValue=t},i.prototype._calculateCurrentViewPage=function(e){e||(e=this._scrollObject.model);var t=this.model.pageSettings.pageSize,i=Math.ceil((e.scrollTop+this.model.scrollSettings.height)/this._vRowHeight/t);return null==this.model.pageSettings.totalPages&&(this.model.pageSettings.totalPages=Math.ceil(this._getVirtualTotalRecord()/t)),i>this.model.pageSettings.totalPages&&(i=this.model.pageSettings.totalPages),i},i.prototype._calculateCurrentVirtualIndex=function(t){var i,l,o,s,n,r,a,d,h,c=t.model,u=(this._getVirtualTotalRecord(),[]),p=c.scrollTop;if(i=(p+this.model.scrollSettings.height)/this._vRowHeight/this._virtualRowCount,i=this._prevVirtualIndex>this._currentVirtualIndex&&p<=this._scrollValue?Math.floor(i):Math.ceil(i),p>=this._scrollValue&&"continuous"==c.virtualScrollMode&&c.reachedEnd&&(i+=1),i>this._totalVirtualViews&&(i=this._totalVirtualViews),i<=0&&(i=1),-1!==e.inArray(i,this._currentLoadedIndexes)&&this._virtualLoadedRows[i]&&p!=t.scrollData.scrollable){for(r=(a=this.getContentTable()[0].rows).length,d=this.getContent().find(".e-virtualtop").height(),o=p>=this._scrollValue,h=0;h<r;h++){if((n=(s=a[h]).offsetHeight+s.offsetTop+d)>p+this.model.scrollSettings.height){0===u.length&&0!==h&&(u=[a[s.offsetTop<=p+this.model.scrollSettings.height?h:h-1]]);break}if(n>=p&&n<=p+this.model.scrollSettings.height&&(u.push(s),!1===o&&u.length>1))break}(l=e(p>=this._scrollValue?u[u.length-1]:u[0])).length&&(i=parseInt(l.attr("name"),32))}return this._scrollValue=p,i},i.prototype._calculateCurrenPage=function(t,i,l){var o,s,n,r,a,d,h,c,u,p,g,m,f,_=this.model.pageSettings.pageSize,C=this,S=[],w=this.getRowHeight();if(o=(l.scrollTop+this.model.scrollSettings.height)/w/_,h=this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1),o=(c=this.getContentTable().find("tr[name="+h+"]").eq(0)).length&&c.offset().top>0&&o>=1&&l.scrollTop<this._scrollValue&&-1!==this.virtualLoadedPages.indexOf(Math.ceil(o-1)*_)?Math.floor(o):Math.ceil(o),l.scrollTop>=this._scrollValue&&"continuous"==l.virtualScrollMode&&l.reachedEnd&&(o=this.virtualLoadedPages[this.virtualLoadedPages.length-1]/_+2),-1!==e.inArray((o-1)*_,this.virtualLoadedPages)){for(d=(u=this.getContentTable().children("tbody").children("tr")).length,n=l.scrollTop>=this._scrollValue,p=0;p<d;p++){if((a=(r=u[p]).offsetHeight+r.offsetTop)>l.scrollTop+C.model.scrollSettings.height){0===S.length&&0!==p&&(S=[u[r.offsetTop<=l.scrollTop+C.model.scrollSettings.height?p:p-1]]);break}if(a>=l.scrollTop&&a<=l.scrollTop+C.model.scrollSettings.height&&(S.push(r),!1===n&&S.length>1))break}(s=e(l.scrollTop>=this._scrollValue?S[S.length-1]:S[0])).hasClass("e-virtualrow")?1===S.length&&o++:o=parseInt(s.attr("name"),10)/_+1}for(this._scrollValue=l.scrollTop,g=0;g<t.length;g++)if((m=t[g]).offsetTop+m.offsetHeight>=l.scrollTop)return f=this._calculatePrevPage(t,i,l),this._prevPageNo=f,0==o&&(o=1),o>this.model.pageSettings.totalPages?this.model.pageSettings.totalPages:o;return o},i.prototype._calculatePrevPage=function(t,i,l){for(var o,s,n=0;n<t.length;n++)if((o=t[n]).offsetTop+o.offsetHeight>=l.scrollTop&&null!=(s=e(o).prevAll("tr[name]")[0]))return Math.ceil(parseInt(e(s).attr("name"),10)/this.model.pageSettings.pageSize)+1;return-1},i.prototype._refreshVirtualPagerInfo=function(){var e={};return e.pageSize=this.model.pageSettings.pageSize,e.currentPage=this._currentPage(),e.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,e.totalPages=Math.ceil(e.totalRecordsCount/e.pageSize),e},i.prototype._showPagerInformation=function(t){var i=(t.currentPage-1)*t.pageSize;e(this.$pagerStatusBarDiv).find("div:first").html(String.format("{0} of {1} pages ({2} items)",t.currentPage,t.totalPages,t.totalRecordsCount),i,i+t.pageSize),e(this.$pagerStatusBarDiv).css("display","block")},i.prototype._replacingContent=function(){var i,l,o,s,n,r,a,d,h,c,u,p,g,m,f,_,C,S,w,v=document.createElement("div"),y=this.getCurrentIndex(),b=this.getContentTable()[0],T=e(b).find("colgroup").first(),R=this.getRowHeight();T.replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&T.prepend(this._getIndentCol()),i=b.tBodies[0],l=this.model.currentViewData,t.isNullOrUndefined(this._currentPageData)?this._virtualLoadedRecords[this._currentPage()]=l:(this._virtualLoadedRecords[this._currentPage()]=this._currentPageData,this._currentPageData=null);var M=this,x=e("<tbody></tbody>").append(e.render[this._id+"_JSONTemplate"](l)).children("tr");if(this._allowcolumnSelection&&this.selectedColumnIndexes.length>0)for(_=0;_<this.selectedColumnIndexes.length;_++)o=this.selectedColumnIndexes[_]+1,x.find("td:nth-of-type("+o+")").addClass("e-columnselection");for(this.virtualLoadedPages.push(y>=0?y:0),s=t.dataUtil.mergeSort(t.distinct(this.virtualLoadedPages)),e(x).attr("name",y),n=t.dataUtil.min(s),r=t.dataUtil.max(s),e(i).children(".e-virtualrow").remove(),f=0;f<s.length;f++)a=s[f],d=s[f-1],(a!=this.orderedVirtualLoadedPage[f]||void 0==this.orderedVirtualLoadedPage[f])&&(void 0!=d?x.insertAfter(e(i).children("[name="+d+"]:last")):x.insertBefore(e(i).children("[name="+this.orderedVirtualLoadedPage[f]+"]:first")),this.orderedVirtualLoadedPage=s),0!=a&&((h=a-(a==n?n:d)-M.model.pageSettings.pageSize)>0&&(c=document.createElement("tr"),e(c).addClass("e-virtualrow").css("height",R*h).insertBefore(e(i).children("[name="+a+"]:first")))),a==r&&((u=M._gridRecordsCount-r-M.model.pageSettings.pageSize)>0&&(p=document.createElement("tr"),e(p).addClass("e-virtualrow").css("height",R*u).appendTo(i)));n>0&&(g=document.createElement("tr"),e(g).addClass("e-virtualrow").css("height",R*n).prependTo(i));var V=this.getContent(),D=e(i).children("tr[name="+y+"]")[0],I=D.previousSibling,P=V.height(),H=D.offsetTop;if(this._virtaulUnSel)for(m=e.extend(!0,[],this._virtaulUnSel),f=0;f<m.length;f++){var z=m[f],N=this.model.pageSettings.currentPage;(z%this.model.pageSettings.pageSize==0?parseInt(z/this.model.pageSettings.pageSize):parseInt(z/this.model.pageSettings.pageSize)+1)==N&&(_=z%this.model.pageSettings.pageSize,e(i).find("tr[name="+y+"]").eq(_).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),-1!=(C=this._virtaulUnSel.indexOf(z))&&this._virtaulUnSel.splice(C,1))}(D&&I&&(this._virIndex||e(I).hasClass("e-virtualrow")||I.offsetTop>y*P)&&(this._gridRecordsCount-y>=this.model.pageSettings.pageSize||D.offsetParent.offsetHeight-H<P)||this._lastRow)&&(this._lastRow&&(this._lastRow=!1),this._virIndex&&(this._virIndex=!1),this._isVirtualRecordsLoaded=!0,V.find(".e-content").scrollTop(H),this._scrollValue=this.getContent()[0].firstChild.scrollTop),e(b).get(0),v.firstChild,this._currentJsonData=l,this._gridRows=e(b).get(0).rows,S=e(b).find(".e-virtualrow").last(),w="normal"==this.model.scrollSettings.virtualScrollMode?S.height()-(e(b).height()-this._gridRecordsCount*R):1,S.css("height",w),this._eventBindings()},i.prototype._replacingVirtualContent=function(){var t,i,l,o,s,n,r,a=this.getContentTable()[0],d=this._currentLoadedIndexes,h=e("<tbody></tbody>");if(this._checkCurrentVirtualView(this._virtualLoadedRows,this._currentVirtualIndex)){for(t=[],r=0;r<d.length;r++)e.merge(t,this._virtualLoadedRows[d[r]]);e(h).append(t)}else for(e("<tbody></tbody>"),r=0;r<d.length;r++)if(i=d[r],l=this._virtualLoadedRows[i])i<this._currentVirtualIndex?(n=h.find(".e-virtualview"+i)).length?e(l).insertBefore(n):h.prepend(l):e(l).insertAfter(h.find(".e-virtualview"+(i-1)));else{var c=e("<tbody></tbody>").append(e.render[this._id+"_JSONTemplate"](this._virtualLoadedRecords[i]))[0].rows,u=c.length-1;e(c[u]).addClass("e-virtualview"+i),o=i.toString(32),((s=e(c).attr("name",o)).length==this._virtualRowCount||i==this._totalVirtualViews)&&(this._virtualLoadedRows[i]=s,h.append(c))}if(a.replaceChild(h[0],a.lastChild),e(a.rows).removeClass("e-hover"),this._setVirtualTopBottom(),(this._isThumbScroll||this._remoteRefresh)&&(this._scrollObject._content[0].scrollTop=this._scrollObject.scrollTop(),this._isThumbScroll=this._remoteRefresh=!1),this.model.allowSelection&&this._checkVirtualSelection(),this._gridRows=a.rows,this._checkCurrentVirtualView(this._queryCellView,this._currentVirtualIndex)||this._eventBindings(),this.model.queryCellInfo||this.model.rowDataBound)for(r=0;r<this._currentLoadedIndexes.length;r++)-1==e.inArray(this._currentLoadedIndexes[r],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[r])},i.prototype._setVirtualTopBottom=function(){var i,l,o,s,n,r,a,d,h,c=this.getContentTable()[0],u=this._vRowHeight,p=t.dataUtil.mergeSort(t.distinct(this._currentLoadedIndexes)),g=t.dataUtil.min(p),m=t.dataUtil.max(p),f=this._getVirtualTotalRecord();if("continuous"==this.model.scrollSettings.virtualScrollMode&&this._virtualLoadedRows[m+1]&&(o=Object.keys(this._virtualLoadedRows),m=(l=parseInt(t.dataUtil.max(o),10))-m),i=m*this._virtualRowCount*u,-1!=e.inArray(this._totalVirtualViews,this._currentLoadedIndexes)&&this._currentVirtualIndex!=this._totalVirtualViews&&(i=(f-(this._virtualRowCount-this._lastViewData))*u),s=f*u-i,"continuous"!=this.model.scrollSettings.virtualScrollMode||this._virtualLoadedRows[m+1]||(s=l&&l<=m+1?s:1),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),n=1e6,s>0&&this._getVirtualTotalRecord()>2*this._virtualRowCount)if(Math.round(s).toString().length<7)t.buildTag("div.e-virtualbottom","",{height:s}).insertAfter(c);else for(t.buildTag("div.e-virtualbottom").insertAfter(c),a=Math.ceil(s/n),d=0;d<a;d++)h=n,d==a-1&&(h=s%n),e(c).next().append(t.buildTag("div","",{height:h}));if(g>1)if(r=(g-1)*this._virtualRowCount*u,Math.round(r).toString().length<7)t.buildTag("div.e-virtualtop","",{height:r}).insertBefore(c);else for(t.buildTag("div.e-virtualtop").insertBefore(c),a=Math.ceil(r/n),d=0;d<a;d++)h=n,d==a-1&&(h=r%n),e(c).prev().append(t.buildTag("div","",{height:h}));this._scrollObject.model.scrollTop!=this._scrollValue&&this.getContent().ejScroller("model.scrollTop",this._scrollValue)},i.prototype._checkVirtualSelection=function(){for(var t,i,l,o,s,n,r,a=this.getContentTable()[0],d=0;d<this.selectedRowsIndexes.length;d++)i=this.selectedRowsIndexes[d],l=this._getSelectedViewData(i).viewIndex,-1!=e.inArray(l,this._currentLoadedIndexes)&&(t=i%this._virtualRowCount+this._currentLoadedIndexes.indexOf(l)*this._virtualRowCount,e(a.rows[t].cells).hasClass("e-selectionbackground")||(e(e(a.rows[t]).attr("aria-selected","true")[0].cells).addClass("e-selectionbackground e-active"),this.model.selectedRecords[d]=this._virtualLoadedRecords[l][t%this._virtualRowCount]));for(d=0;d<this._rowIndexesColl.length;d++)i=this._rowIndexesColl[d],l=this._getSelectedViewData(i).viewIndex,(-1!=e.inArray(l,this._currentLoadedIndexes)&&-1==e.inArray(i,this._virtualRowCellSelIndex)||this._virtualDataRefresh)&&(o=e.inArray(i,this._rowIndexesColl),this.selectedRowCellIndexes[o].cellIndex);for(s=e(a.rows).find(".e-active, .e-cellselectionbackground").closest("tr"),d=0;d<s.length;d++){var h=parseInt(e(s[d]).attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-e(s[d]).index()%this._virtualRowCount),c=e(s[d]).index();this.selectedRowsIndexes.length&&-1==e.inArray(h,this.selectedRowsIndexes)&&(this._clearVirtualSelection=!0,this.clearSelection(c)),this._rowIndexesColl.length&&-1==e.inArray(h,this._rowIndexesColl)&&e(this.getRowByIndex(c)[0].cells).removeClass("e-cellselectionbackground e-activecell")}for(e(a.rows).find(".e-columnselection").removeClass("e-columnselection"),n=0;n<this.selectedColumnIndexes.length;n++)r=this.selectedColumnIndexes[n]+1,e(a.rows).find("td:nth-of-type("+r+")").addClass("e-columnselection");this._clearVirtualSelection=!1},i.prototype._calculateWidth=function(){for(var e=this.getHeaderTable().find(".e-columnheader").last().find("th:visible"),t=0,i=0;i<e.length;i++)t+=e.eq(i).outerWidth();return t},i.prototype.columns=function(i,l){var o,s,n,r,a;if(!t.isNullOrUndefined(i)){for(o=!1,"string"==typeof i?(i=[i],o=!0):i instanceof Array&&i.length&&"string"==typeof i[0]&&(o=!0),s=0;s<i.length;s++)n=e.inArray(this.getColumnByField(o?i[s]:i[s].field),this.model.columns),"add"==l||t.isNullOrUndefined(l)?-1==n?this.model.columns.push(o?{field:i[s]}:i[s]):this.model.columns[n]=o?{field:i[s]}:i[s]:-1!=n&&this.model.columns.splice(n,1);for(this.columnsWidthCollection=[],r=!1,a=0;a<this.model.columns.length;a++)this.columnsWidthCollection.push(this.model.columns[a].width),t.isNullOrUndefined(r)||(r=!0);this._enableRowHover(r),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.refreshContent(!0),this.model.allowScrolling&&(this.refreshScrollerEvent(),this.model.allowResizeToFit&&this.getContent().ejScroller("isVScroll")&&this._showHideScroller())}},i.prototype._enableRowHover=function(i,l){var o,s=!0;if(t.isNullOrUndefined(i)){for(o=0;o<this.model.columns.length;o++)if(!t.isNullOrUndefined(this.model.columns[o].tooltip)){s=!0;break}}else s=i;this.model.enableRowHover||s?l._on(this.element,"mouseenter mouseleave",".e-gridcontent tr td",e.proxy(this._rowHover,this)):l._off(this.element,"mouseenter mouseleave",".e-gridcontent tr td")},i.prototype._rowHover=function(i){var l,o,s=e(i.target);if(l=this.model.scrollSettings.frozenColumns?e(this.getRows()):this.element.find(".e-row.e-hover,.e-alt_row.e-hover"),(!s.closest("#"+this._id+"EditForm").length||!s.hasClass("e-rowcell"))&&s.hasClass("e-rowcell"))return"mouseenter"==i.type&&s.hasClass("e-gridtooltip")&&this._showTooltip(s),this.model.enableRowHover&&("mouseenter"!=i.type||this._dragActive?(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(l[0])&&!t.isNullOrUndefined(l[1])&&(l=e(l[0]).add(l[1])),l.removeClass("e-hover")):this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(l[0])&&!t.isNullOrUndefined(l[1])?((l=e(l[0]).add(l[1])).removeClass("e-hover"),-1!=(o=this.getIndexByRow(s.parent()))&&this.getRowByIndex(o).addClass("e-hover")):(l.removeClass("e-hover"),(s.parent().hasClass("e-row")||s.parent().hasClass("e-alt_row"))&&s.parent().addClass("e-hover"))),!1},i.prototype._showTooltip=function(i,l){var o,s,n,r,a,d,h,c,u=i.index(),p=i.hasClass("e-stackedHeaderCell");if(i.hasClass("e-headercelldiv")&&(u=i.parent(".e-headercell").index()-this.model.groupSettings.groupedColumns.length),!p&&(this.model.childGrid||this.model.detailsTemplate)&&u--,this.model.scrollSettings.frozenColumns>0&&(i.closest(".e-movableheaderdiv").length||i.closest(".e-movablecontentdiv").length)&&(u+=this.model.scrollSettings.frozenColumns),(o=p?this._getStackedColumnByTarget(i):this.getColumnByIndex(u)).clipMode!=t.HeatMapGrid.ClipMode.Ellipsis){if(o.clipMode==t.HeatMapGrid.ClipMode.EllipsisWithTooltip&&(s=i,i.find("span").hasClass("e-tooltip")||((n=t.buildTag("span.e-tooltip",{},{})).html(i.html()),s.html(n)),s.find("span.e-tooltip").css("display","inline-block"),r=s.find("span:first")[0].getBoundingClientRect().width,s.find("span.e-tooltip").css("display","inline"),i.width()>r))return void i.removeAttr("title");if(a=document.createElement("script"),t.isNullOrUndefined(o.tooltip)&&t.isNullOrUndefined(o.headerTooltip))return;a.id=(this._id+o.headerText+e.inArray(o,this.model.columns)+"_TemplateToolTip").split(" ").join(""),a.type="text/x-template",h=l?"headerTooltip":"tooltip",t.isNullOrUndefined(o[h])||"#"===o[h].slice(0,1)?d=e(o[h]):a.text=o[h],d&&(a.text=d.html(),a.type=d.attr("type")||a.type),e("body").append(a),c=e(a).render({value:i.text()}),i.attr("title",c)}else i.removeAttr("title")},i.prototype._colgroupRefresh=function(){var t,i,l,o;(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(t=e(this.getHeaderTable()).find("colgroup"),i=e(this.getContentTable()).find("colgroup")):(t=e(this.getHeaderTable()).find("colgroup")[0],i=e(this.getContentTable()).find("colgroup")[0]),l=e(t).clone(),o=e(i).clone(),e(i).remove(),e(t).remove(),(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(e(l[0]).prependTo(this.getHeaderTable()[0]),e(l[1]).prependTo(this.getHeaderTable()[1]),e(o[0]).prependTo(this.getContentTable()[0]),e(o[1]).prependTo(this.getContentTable()[1])):(e(l).prependTo(this.getHeaderTable()),e(o).prependTo(this.getContentTable()))},i.prototype._detailColsRefresh=function(){this._$headerCols=this.getHeaderTable().children("colgroup").find("col"),this._$contentCols=this.getContentTable().children("colgroup").find("col");var e=this.model.columns.length;this._$headerCols.length>e&&this._$headerCols.splice(0,this._$headerCols.length-e),this._$contentCols.length>e&&this._$contentCols.splice(0,this._$contentCols.length-e)},i.prototype._htmlEscape=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},i.prototype._getForeignKeyData=function(e){for(var i,l=this,o={},s=0;s<this.model.columns.length;s++)this.model.columns[s].foreignKeyValue&&this.model.columns[s].dataSource&&(i=t.isNullOrUndefined(l.model.columns[s].foreignKeyField)?l.model.columns[s].field:l.model.columns[s].foreignKeyField,(this.model.columns[s].dataSource instanceof t.DataManager?this.model.columns[s].foreignKeyData:this.model.columns[s].dataSource).filter(function(t){var n=e[l.model.columns[s].field],r=!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):n;t[i]==r&&(o[i]=t)}));return o},i.prototype._foreignKeyBinding=function(i,l,o){var s,n,r=e("#"+o).ejGrid("instance");return((i=r.model.columns[i]).dataSource instanceof t.DataManager?i.foreignKeyData:i.dataSource).filter(function(e){if(t.getObject(i.foreignKeyField,e)==l)return n=t.getObject(i.foreignKeyValue,e),s="date"==i.type?new Date(n):n}),i.format&&(s=r.formatting(i.format,s,r.model.locale)),s},i.prototype._setForeignKeyData=function(){var i;if(this._relationalColumns.length){var l,o,s,n,r=this._relationalColumns,a=this._relationalColumns.length,d=[],h=this.model.currentViewData,c={},u=t.proxy(function(e){this._trigger("actionFailure",{requestType:"fetchingforeigndata",error:e.error})},this);for(i=0;i<a;i++)if(0 in h){if(l=r[i],c.field=l.field,c.keyField=l.key,c.valueField=l.value,c.dataSource=l.dataSource,c.query=(new t.Query).select([c.valueField,c.keyField]).foreignKey(c.keyField),s=t.distinct(h.level?h.records:h,c.keyField,!0),o=t.UrlAdaptor.prototype.getFiltersFrom(s,c.query),c.query.where(o),this._trigger("actionBegin",e.extend(c,{requestType:"fetchingforeigndata",column:this.getColumnByField(c.field)})))return;n=void 0===c.dataSource.ready?c.dataSource.executeQuery(c.query,null,u):c.dataSource.ready.fail(u),d.push(n)}}},i.prototype._isRelationalRendering=function(e){return 0 in this._relationalColumns&&-1==["add","beginedit","cancel"].indexOf(e.requestType)},i.prototype._columns=function(){this.element.find(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),this._headerCellgDragDrop(),this.refreshContent(!0),this._trigger("refresh")},i.prototype._summaryRows=function(e,i,l){if("showTotalSummary"==i||"showCaptionSummary"==i){var o=e.summaryRows,s=("true"==l.toLowerCase()||"false"==l.toLowerCase())&&t.parseJSON(l);this.option("summaryRows")[o][i]=s}this.element.find(".e-gridfooter").remove(),("showCaptionSummary"==i||"title"==i)&&(this._isCaptionSummary=this.option("summaryRows")[o].showCaptionSummary,this.model.showSummary=this._isCaptionSummary,0!=this.model.groupSettings.groupedColumns.length&&this._refreshCaptionSummary())},i.prototype._summaryRows_summaryColumns=function(e,i,l){("displayColumn"==i||"dataMember"==i)&&t.isNullOrUndefined(this.getColumnByField(l))||0!=this.element.find(".e-groupcaptionsummary").length&&this._refreshCaptionSummary()},i.prototype._stackedHeaderRows_stackedHeaderColumns=function(){this._refreshStackedHeader()},i.prototype._sortSettings_sortedColumns=function(e,t,i){var l,o,s=this.model.sortSettings.sortedColumns[e["sortSettings.sortedColumns"]];"field"==t?(l=null!=this.getColumnByField(i)?i:null,o="ascending"==s.direction||"descending"==s.direction?s.direction:null):"direction"==t&&(l=null!=this.getColumnByField(s.field)?s.field:null,o="ascending"==i||"descending"==i?i:null),null!=l&&null!=o&&this.sortColumn(l,o)},i.prototype._filterSettings_filteredColumns=function(e,i,l){var o,s,n,r,a,d=this.model.filterSettings.filteredColumns[e["filterSettings.filteredColumns"]];switch(i){case"field":o=null!=this.getColumnByField(l)?l:null,s=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,n=d.matchcase;break;case"matchcase":o=null!=this.getColumnByField(d.field)?d.field:null,s=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,n=("true"==l.toLowerCase()||"false"==l.toLowerCase())&&t.parseJSON(l);break;case"operator":o=null!=this.getColumnByField(d.field)?d.field:null,s=this._map(t.FilterOperators,l),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,n=d.matchcase;break;case"predicate":o=null!=this.getColumnByField(d.field)?d.field:null,s=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==l||"or"==l?l:null,n=d.matchcase;break;case"value":o=null!=this.getColumnByField(d.field)?d.field:null,s=this._map(t.FilterOperators,d.operator),a=l,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,n=d.matchcase}null!=o&&null!=s&&null!=a&&null!=r&&null!=n&&this.filterColumn(o,s,a,r,n)},i.prototype._map=function(t,i){var l=e.map(t,function(e){if(e===i)return e});return 0!=l.length?l[0]:null},i.prototype._refreshCaptionSummary=function(){var t=document.createElement("div");t.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),this.getContentTable().get(0).replaceChild(t.firstChild.firstChild,this.getContentTable().get(0).lastChild),this.refreshContent()},i.prototype.getContentTable=function(){return this._gridContentTable},i.prototype.setGridContentTable=function(e){this._gridContentTable=e},i.prototype.getContent=function(){return this._gridContent},i.prototype.setGridContent=function(e){this._gridContent=e},i.prototype.getHeaderContent=function(){return this._gridHeaderContent},i.prototype.getHeaderTable=function(){return this._gridHeaderTable},i.prototype.getRows=function(){return this._gridRows},i.prototype.getFilteredRecords=function(){return this._filteredRecords},i.prototype.getRowByIndex=function(i,l){var o;try{var s=this.getRows(),n=this._excludeDetailRows(),r=e();if(Array.isArray(i)){for(o=0;o<i.length;o++)this.model.scrollSettings.frozenColumns>0?(r.push(s[0][i[o]]),r.push(s[1][i[o]])):r.push(s[i[o]]);return r}return t.isNullOrUndefined(l)?this.model.scrollSettings.frozenColumns>0?(r.push(s[0][i]),r.push(s[1][i]),r):e(n.not(".e-virtualrow")[i]):this.model.scrollSettings.frozenColumns>0?(r.push(e(s[0]).slice(i,l)),r.push(e(s[1]).slice(i,l)),r):e(n.not(".e-virtualrow").slice(i,l))}catch(t){return e()}},i.prototype.getColumnIndexByField=function(e){for(var t=0,i=this.model.columns,l=i.length;t<l;t++)if(i[t].field===e)return t;return-1},i.prototype.getColumnIndexByHeaderText=function(e,i){for(var l=0;l<this.model.columns.length;l++)if(this.model.columns[l].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[l].field)||""==this.model.columns[l].field)break}return l},i.prototype.getIndexByRow=function(t){var i,l=this.getRows(),o=this._excludeDetailRows();return this.model.scrollSettings.frozenColumns>0?(-1==(i=e(l[0]).index(t))&&(i=e(l[1]).index(t)),i):o.not(".e-virtualrow").index(t)},i.prototype.getPrimaryKeyFieldNames=function(){if(0!=this._primaryKeys.length)return this._primaryKeys;for(var e=0,t=this.model.columns,i=t.length;e<i;e++)t[e].isPrimaryKey&&this._primaryKeys.push(t[e].field);return this._primaryKeys},i.prototype.getVisibleColumnNames=function(){return this._visibleColumns},i.prototype.getHiddenColumnNames=function(){return this._hiddenColumns},i.prototype.getColumnByField=function(e){for(var t=0;t<this.model.columns.length&&this.model.columns[t].field!=e;t++);return t==this.model.columns.length?null:this.model.columns[t]},i.prototype.getsortColumnByField=function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[t].field!=e;t++);return t==this.model.sortSettings.sortedColumns.length?null:this.model.sortSettings.sortedColumns[t]},i.prototype.getColumnByHeaderText=function(e,i){for(var l=0;l<this.model.columns.length;l++)if(this.model.columns[l].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[l].field)||""==this.model.columns[l].field)break}return l==this.model.columns.length?null:this.model.columns[l]},i.prototype.getCurrentViewData=function(){return this._currentJsonData},i.prototype.getColumnFieldNames=function(){for(var e=[],t=0;t<this.model.columns.length;t++)this.model.columns[t].field&&e.push(this.model.columns[t].field);return e},i.prototype.getBrowserDetails=function(){var t=navigator.userAgent.match(/(firefox|mozilla|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return navigator.userAgent.match(/Trident\/7\./)?{browser:"msie",version:e.uaMatch(navigator.userAgent).version}:{browser:t[1].toLowerCase(),version:t[2]}},i.prototype._initComplexColumn=function(e,i,l){var o,s,n,r=l||i;for(o in e)"object"!=typeof e[o]||t.isNullOrUndefined(e[o])?(s=r.concat(".").concat(o),n=e[o],this.model.columns.push({field:s,type:null!=n?n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof n:null})):(r=r.concat(".").concat(o),this._initComplexColumn(e[o],o,r))},i.prototype._initColumns=function(i){for(var l,o,s,n,r;void 0!=i.items;)i=i.items[0];if(0==this.model.columns.length&&i){for(l in i)i.hasOwnProperty(l)&&("object"!=typeof i[l]||i[l]instanceof Date||null==i[l])?(o=i[l],this.model.columns.push({field:l,type:null!=o?o.getDay?o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0||o.getMilliseconds()>0?"datetime":"date":typeof o:null})):"object"==typeof i[l]&&this._initComplexColumn(i[l],l);this.model.columns.length&&this._renderAfterColumnInitialize()}else for(s=0;s<this.model.columns.length;s++)this.model.columns[s].field=t.isNullOrUndefined(this.model.columns[s].field)?"":this.model.columns[s].field,t.isNullOrUndefined(this.model.columns[s].validationRules)||this._validatedColumns.push(this.model.columns[s].field),t.isNullOrUndefined(this.model.columns[s].type)?(n=t.isNullOrUndefined(this.model.columns[s].field)?null:t.getObject(this.model.columns[s].field,i),!!(r=this.model.columns[s].dataSource)&&this.model.columns[s].foreignKeyValue&&(this.model.columns[s].originalType=null!=n?n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof n:null,n=r instanceof t.DataManager?t.getObject("0."+this.model.columns[s].foreignKeyValue,this.model.columns[s].foreignKeyData):t.getObject("0."+this.model.columns[s].foreignKeyValue,r)),this.model.columns[s].type=null!=n?n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof n:null):"date"!=this.model.columns[s].type||void 0!=this.model.columns[s].format||1==this._isReorder||1==this.model.allowGrouping||this._showHideColumns?"datetime"!=this.model.columns[s].type||void 0!=this.model.columns[s].format||1==this._isReorder||1==this.model.allowGrouping||this._showHideColumns||(t.isNullOrUndefined(t.globalize)?e.extend(this.model.columns[s],{format:"{0:"+t.preferredCulture().calendars.standard.patterns.d+" "+t.preferredCulture().calendars.standard.patterns.t+"}"}):e.extend(this.model.columns[s],{format:"{0:M/d/yyyy h:mm tt}"})):t.isNullOrUndefined(t.globalize)?e.extend(this.model.columns[s],{format:"{0:"+t.preferredCulture().calendars.standard.patterns.d+"}"}):e.extend(this.model.columns[s],{format:"{0:M/d/yyyy}"})},i.prototype._getExpands=function(e,t){var i,l,o=e.split("."),s="";for(o.splice(o.length-1,1),i=0;i<o.length;i++,s=""){for(l=0;l<i;l++)s+=o[l]+"/";s+=o[i],-1===t.indexOf(s)&&t.push(s)}},i.prototype._ensureDataSource=function(i){var l,o,s,n,r,a,d,h,c,u,p,g,m,f,_,C,S,w,v,y;if(null==this._dataSource()&&!(this._dataSource()instanceof t.DataManager)){if(t.isNullOrUndefined(i)||"add"!=i.requestType)return;this.dataSource([])}if(this.model.query.requiresCount(),o=(l=this.model.query).clone(),this._dataSource()instanceof t.DataManager||(this.model.currentViewData=this._dataSource()),this._isLocalData&&(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(!t.isNullOrUndefined(this._cModifiedData)||!t.isNullOrUndefined(this._cAddedRecord))){if(t.isNullOrUndefined(this._cAddedRecord)){for(r=0;r<this._primaryKeys.length;r++)l=l.where(this._primaryKeys[r],t.FilterOperators.equal,this._primaryKeyValues[r]);s=this._dataManager.executeLocal(l),this._dataSource()instanceof t.DataManager?e.extend(this._dataSource().dataSource.json[e.inArray(s.result[0],this._dataSource().dataSource.json)],this._cModifiedData):e.extend(this._dataSource()[e.inArray(s.result[0],this._dataSource())],this._cModifiedData),this._cModifiedData=null}else n=this._cAddedRecord,this._cAddedRecord=null,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(n):this._dataSource(void 0,!0).splice(0,0,n);l.queries=o.queries,this.model.editSettings.showAddNewRow||(this.model.isEdit=!1)}if(i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&(1==this._excludeDetailRows().length||"multiple"==this.multiDeleteMode&&this.selectedRowsIndexes.length==this._excludeDetailRows().length)&&1!=this.model.pageSettings.currentPage&&this._currentPage(this.model.pageSettings.totalPages-1),i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&!t.isNullOrUndefined(this._cDeleteData)&&this._isLocalData&&(this._dataSource()instanceof t.DataManager?(r=e.inArray(this._cDeleteData[0],this._dataSource().dataSource.json),this._dataSource().dataSource.json.splice(r,1)):(r=e.inArray(this._cDeleteData[0],this._dataSource()),this._dataSource(void 0,!0).splice(r,1))),this.model.sortSettings.sortedColumns.length){for(a=[],h=(d=this.model.sortSettings.sortedColumns).length-1;h>=0;h--)if(-1==this.model.groupSettings.groupedColumns.indexOf(d[h].field)){if(l.sortBy(d[h].field,d[h].direction),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&-1==e.inArray(d[h],this._prevVirtualSort)){for(c=0;c<this._prevVirtualSort.length;c++)d[h].field==this._prevVirtualSort[c].field&&this._prevVirtualSort.splice(c,1);this._needVPaging=this._currentVirtualIndex*this._virtualRowCount%this.model.pageSettings.pageSize<=this._virtualRowCount,this._prevVirtualSort.push(d[h]),this._virtualDataRefresh=!0,this._refreshVirtualViewData()}}else a.push({field:d[h].field,direction:d[h].direction});for(c=0;c<a.length;c++)l.sortBy(a[c].field,a[c].direction)}if((this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&!this.model.scrollSettings.enableVirtualization)&&(this._isLocalData?(u=this._dataManager.executeLocal(l),this._recordsCount=u.count,p=this._recordsCount%this.model.pageSettings.pageSize==0?this._recordsCount/this.model.pageSettings.pageSize:parseInt(this._recordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>p&&this._currentPage(p)):t.isNullOrUndefined(i)&&this._currentPage(1),0==this._currentPage()&&(0==this._prevPageNo||null==this._prevPageNo?this._currentPage(1):this._currentPage(this._prevPageNo)),l.page(this._currentPage(),this.model.pageSettings.pageSize)),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._needPaging=!0,this.initialRender&&this.model.currentIndex>1&&(this.model.currentIndex<=this._getVirtualTotalRecord()||!this._isLocalData)&&("continuous"==this.model.scrollSettings.virtualScrollMode&&(this.model.currentIndex=1),this._currentVirtualIndex=Math.ceil(this.model.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._currentPage(Math.ceil(this.model.currentIndex/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),this._virtualDataRefresh&&(this._isThumbScroll=!0,this._refreshVirtualViewData(!0),this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._currentPage(Math.ceil(this._currentVirtualIndex*this._virtualRowCount/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),null!=this.model.virtualLoading&&(this._gridRecordsCount=this.model.pageSettings.totalRecordsCount),0==this.model.filterSettings.filteredColumns&&this._prevVirtualFilter.length&&(this._refreshVirtualViewData(),this._prevVirtualFilter=[]),this._isLocalData&&this.initialRender&&this._refreshVirtualViewDetails(),this._getVirtualLoadedRecords(l)),void 0!=i&&"add"==i.requestType&&this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(i.data):this._dataSource().unshift(i.data)),t.isNullOrUndefined(i)||"add"!=i.action||t.isNullOrUndefined(this.model.parentDetails)||(g=this.getColumnByField(this.model.parentDetails.parentKeyField),-1==e.inArray(g,this.model.columns)&&((m={})[this.model.parentDetails.parentKeyField]=this.model.parentDetails.parentKeyFieldValue,e.extend(!0,this.model.currentViewData[0],m))),this._cloneQuery=l.clone(),this._isLocalData&&(!this.model.scrollSettings.enableVirtualization||this._virtualDataRefresh)){if(f=this._dataManager.dataSource.json,_=this._dataSource().dataSource,!t.isNullOrUndefined(_)&&this._dataSource()instanceof t.DataManager&&(this._dataManager.dataSource.json=f!=_.json?_.json:f),C=this._dataManager.executeLocal(l),this.model.scrollSettings.allowVirtualScrolling&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&(this._prevPageRendered=!0),this.model.scrollSettings.allowVirtualScrolling&&!this._prevPageRendered&&C.result.length!=this.model.pageSettings.pageSize&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage)S=t.pvt.filterQueries(l.queries,"onPage"),l.queries.splice(e.inArray(S[0],l.queries),1),l.page(this._currentPage()-1,this.model.pageSettings.pageSize),(w=this._dataManager.executeLocal(l)).result.splice(0,C.result.length),this._previousPageRecords=e.extend(!0,[],w.result),this._previousPageLength=C.result.length,this._currentPageData=C.result,t.merge(w.result,C.result),this.model.currentViewData=w.result,this._lastPageRendered=!0;else if(this._lastPageRendered&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&!this.model.scrollSettings.enableVirtualization){for(v=this.model.pageSettings.pageSize-this._previousPageLength,y=0;y<v;y++)this.getRows()[this.getRows().length-(this.model.pageSettings.pageSize-y)].remove();this._tempPageRendered=!0,this.model.currentViewData=C.result}else this.model.currentViewData=C.result;this._gridRecordsCount=C.count,this._remoteSummaryData=C.aggregates,this._searchCount=this._searchString.length?C.count:null,this.model.groupSettings.groupedColumns.length&&this._setAggregates()}},i.prototype._refreshViewPageDetails=function(){this._currentPage(1),this.model.currentIndex=0,this._currentVirtualIndex=1,this.getContent().ejScroller("model.scrollTop",0)},i.prototype._refreshVirtualViewDetails=function(e){e&&(this._gridRecordsCount=null!==this._dataSource()?this._dataSource().length:this.model.pageSettings.totalRecordsCount),this._totalVirtualViews=Math.ceil(this._getVirtualTotalRecord()/this._virtualRowCount),this._maxViews=Math.ceil(this.model.pageSettings.pageSize/this._virtualRowCount),this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize),this.model.pageSettings.totalRecordsCount=this._gridRecordsCount,this._lastViewData=this._virtualRowCount-(this._totalVirtualViews*this._virtualRowCount-this._getVirtualTotalRecord())},i.prototype._getVirtualLoadedRecords=function(t){var i,l,o,s=this._currentPage();if(this._needPaging&&(this._isLastVirtualpage=i=this._isThumbScroll&&s==this.model.pageSettings.totalPages&&!this._virtualPageRecords[s],(this.initialRender||this._virtualDataRefresh)&&(i=!0),this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=s)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._getVirtualOnLoadingData(s,!i):this._setVirtualPaging(t,s,!i),!this.initialRender&&this._isThumbScroll&&this._virtualPageRecords[s]&&!this._virtualDataRefresh&&this._checkPrevNextViews(s,t)),this._needPaging=!1,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.initialRender&&this._isLocalData)for(this.model.currentViewData=[],l=0;l<this._currentLoadedIndexes.length;l++)o=this._currentLoadedIndexes[l],this._virtualLoadedRecords[o]&&e.merge(this.model.currentViewData,this._virtualLoadedRecords[o])},i.prototype._setVirtualPaging=function(i,l,o){var s,n=t.pvt.filterQueries(i.queries,"onPage");n.length&&i.queries.splice(e.inArray(n[0],i.queries),1),(!o||this._needVPaging)&&this.model.currentIndex>this._virtualRowCount?(this._initCurrentIndex(i,l),this._needVPaging=!1):i.page(l,this.model.pageSettings.pageSize),this._isLocalData&&!this._virtualPageRecords[l]&&(s=this._dataManager.executeLocal(i),this.initialRender||(this.model.currentViewData=s.result),s.result.length?(this._setVirtualLoadedRecords(s.result,l),-1==e.inArray(l,this._virtualLoadedPages)&&this._virtualLoadedPages.push(l)):this.getContent().find(".e-virtualtop, .e-virtualbottom").remove())},i.prototype._checkPrevNextViews=function(){var e,t,i=this._currentVirtualIndex,l=this._virtualLoadedRecords[i-1],o=this._virtualLoadedRecords[i+1],s=3==this._maxViews?1:2;1!=i&&i!=this._totalVirtualViews&&(l&&l.length==this._virtualRowCount?o&&o.length==this._virtualRowCount||this._totalVirtualViews==i-1||(t=i-s,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t-1,e=this._scrollValue-s*this._virtualRowCount*this._vRowHeight):(t=i+s,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t+1,e=this._scrollValue+s*this._virtualRowCount*this._vRowHeight),e&&(this._scrollValue=e,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.model.currentIndex=0==e?e:Math.floor(e/this._vRowHeight)))},i.prototype._initCurrentIndex=function(e,t){var i,l,o,s,n=t*this.model.pageSettings.pageSize,r=this._currentVirtualIndex*this._virtualRowCount+this._virtualRowCount,a=this._currentVirtualIndex*this._virtualRowCount-2*this._virtualRowCount;r>n||a<n-this.model.pageSettings.pageSize||this._isLastVirtualpage?(r>n?(i=(t-1)*this.model.pageSettings.pageSize,l=2*this.model.pageSettings.pageSize,this._isInitNextPage=!0):(a<n-this.model.pageSettings.pageSize||this._isLastVirtualpage)&&(i=(t-2)*this.model.pageSettings.pageSize,l=2*this.model.pageSettings.pageSize,this._isInitNextPage=!1,this._remoteRefresh=!0),this.model.virtualLoading&&this._isLocalData?((o={}).endIndex=i+l,o.endIndex=o.endIndex>this._getVirtualTotalRecord()?this._getVirtualTotalRecord():o.endIndex,o.startIndex=i,o.currentPage=this._currentPage(),o.result=null,this._trigger("virtualLoading",o),s=o.result,this._setInitialCurrentIndexRecords(s,t)):(e.skip(i).take(l),this._isLocalData&&(s=this._dataManager.executeLocal(e).result,this._isLastVirtualpage=!1,this._setInitialCurrentIndexRecords(s,t)))):(this._needVPaging=!1,this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=t)?this._getVirtualOnLoadingData(t,!0):this._setVirtualPaging(e,t,!0))},i.prototype._setInitialCurrentIndexRecords=function(e,t){for(var i=0;i<2;i++){var l,o=i*this.model.pageSettings.pageSize,s=o+this.model.pageSettings.pageSize,n=e.slice(o,s);l=this._isInitNextPage?0==i?t:t+1:0==i?t-1:t,this._setVirtualLoadedRecords(n,l)}},i.prototype._getVirtualOnLoadingData=function(e,t){var i,l;e>0&&(this.model.currentIndex>this._virtualRowCount&&(!t||this._needVPaging)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._initCurrentIndex(void 0,e):((i={}).endIndex=e*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:e*this.model.pageSettings.pageSize,i.startIndex=e*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=this._currentPage(),i.result=null,this._trigger("virtualLoading",i),l=i.result,this._setVirtualLoadedRecords(l,e)))},i.prototype._setVirtualLoadedRecords=function(t,i){var l,o,s,n,r,a,d,h,c,u=this._virtualRowCount,p=this.model.pageSettings.pageSize,g=p/u,m=Math.ceil(i*p/u),f=i==this.model.pageSettings.totalPages;for(this._virtualPageRecords[i]||(this._virtualPageRecords[i]=t),f&&(o=this._getVirtualTotalRecord()%p,m=(!this._virtualLoadedRecords[this._totalVirtualViews]||this._virtualLoadedRecords[this._totalVirtualViews].length!=this._lastViewData)&&o<this._lastViewData&&0!=o?this._totalVirtualViews+1:this._totalVirtualViews,this._getVirtualTotalRecord()<u&&(this._singleView=!0)),s=0;s<g;s++)((a=Math.ceil((i-1)*g+(s+1)))<=this._totalVirtualViews||f)&&a<=m&&(this._virtualLoadedRecords[a-1]&&this._virtualLoadedRecords[a-1].length!=u?(n=u-(this._virtualLoadedRecords[a-1].length+s*u)+s*u,e.merge(this._virtualLoadedRecords[a-1],t.slice(0,n)),l=r=n+u,a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(n,l))):1==a||this._virtualLoadedRecords[a-1]?l=r=(n=l||s*u%p)+u:(0!=(d=r=(a-1)*u%p)&&(this._virtualLoadedRecords[a-1]=t.slice(0,d)),n=d,r=l=d+u),this._virtualLoadedRecords[a]&&this._virtualLoadedRecords[a].length!=u?(h=t.slice(n,r)).length+this._virtualLoadedRecords[a].length<=u&&(c=e.merge(h,this._virtualLoadedRecords[a]),this._virtualLoadedRecords[a]=c):!this._virtualLoadedRecords[a]&&a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(n,r)));-1==e.inArray(i,this._virtualLoadedPages)&&this._virtualLoadedPages.push(i)},i.prototype._setVirtualLoadedIndexes=function(e){var t,i;for(this._currentLoadedIndexes=[],t=e==this._totalVirtualViews?e:e+1,1!=e&&(e-=1),i=e;i<=t;i++)this._currentLoadedIndexes.push(i)},i.prototype._getVirtualTotalRecord=function(){return 0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount},i.prototype._initGridRender=function(t){var i,l;this.addInitTemplate(),this.model.scrollSettings.frozenColumns>0&&this.addFrozenTemplate(),this.model.allowGrouping&&this.addGroupingTemplate(),this.model.showSummary&&this.addSummaryTemplate(),this.model.keySettings&&e.extend(this.model.keyConfigs,this.model.keySettings),this.render(),this._setTextWrap(),this._wireEvents(t),this.initialRender=!1,this.model.width&&!this.model.allowScrolling&&this.element.width(this.model.width),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.model.parentDetails&&(i=this.model.parentDetails.parentID,(l=e("#"+i).data("ejGrid")).model.allowScrolling&&l._refreshScroller({requestType:"refresh"})),this.element.closest("tr").hasClass("e-detailrow")&&!this.model.parentDetails&&((l=this.element.closest("tr.e-detailrow").closest(".e-grid").data("ejGrid")).model.allowScrolling&&l.getScrollObject().refresh())},i.prototype._setTextWrap=function(){if(1==this.model.allowTextWrap)switch(this.model.textWrapSettings.wrapMode){case"content":this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap"),this.getContent().addClass("e-wrap");break;case"header":this.element.removeClass("e-wrap"),this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").addClass("e-wrap");break;default:this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.addClass("e-wrap")}else this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap")},i.prototype._getMetaColGroup=function(){for(var i,l=t.buildTag("colgroup"),o=0;o<this.model.columns.length;o++)i=e(document.createElement("col")),!1===this.model.columns[o].visible&&i.css("display","none"),null==this.model.rowTemplate||t.isNullOrUndefined(this.model.columns[o].cssClass)||i.addClass(this.model.columns[o].cssClass),this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&-1!=e.inArray(this.model.columns[o].field,this.model.groupSettings.groupedColumns)&&i.css("display","none"),l.append(i);return l},i.prototype._alternateRow=function(){return this.getIndex()%2==0?"e-row":"e-alt_row"},i.prototype.formatting=function(i,l,o){var s,n,r,a,d,h,c,u;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),o=t.preferredCulture(o)?o:"en-US",s=i,n=i.split("{0:"),d=i.split("}"),r=n[0],a=d[1],"string"==typeof l&&e.isNumeric(l)&&(l=Number(l)),-1!=i.indexOf("{0:"))return null!=(h=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(i))&&null!=l?null!=r&&null!=a?r+t.format(l,h[2],o)+a:t.format(l,h[2],o):null!=l?l:"";if(s.startsWith("{")&&!s.startsWith("{0:")){var p=s.split(""),g=(l=(l||"")+"").split(""),m=/[0aA\*CN<>\?]/gm;for(c=0,u=0;c<p.length;c++)p[c]=m.test(p[c])?"{"+u+++"}":p[c];return String.format.apply(String,[p.join("")].concat(g)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){s=s.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),s):this.data.Value},i.prototype.addInitTemplate=function(){var i,l,o,s,n,r,a,d=this.element.find(".e-headercelldiv:not(.e-emptyCell)"),h={},c=!0,u=document.createElement("tbody"),p=e(u);if(null==this.model.rowTemplate){var g,m=document.createElement("tr"),f=e(m),_=this.model.columns;for(this._gridRecordsCount&&!this._virtualDataRefresh?this._initColumns(void 0!=this.model.currentViewData[0]?this.model.currentViewData[0]:this.model.currentViewData.value):this._isLocalData&&(null!=this._dataSource()&&this._dataSource().length||this._dataManager&&this._dataManager.dataSource.json.length)&&this._initColumns(void 0!=this._dataSource()[0]?this._dataSource()[0]:this._dataManager.dataSource.json[0]),i={_gridFormatting:this.formatting},e.views.helpers(i),(r={})._foreignKey=this._foreignKeyBinding,e.views.helpers(r),(this.model.childGrid||this.model.detailsTemplate)&&(l=t.buildTag("td.e-detailrowcollapse","<div class='e-icon e-gnextforward'></div>"),f.append(l)),g=0;g<this.model.columns.length;g++){if(o=t.buildTag("td.e-rowcell"),t.isNullOrUndefined(_[g].tooltip)&&_[g].clipMode!=t.HeatMapGrid.ClipMode.EllipsisWithTooltip||o.addClass("e-gridtooltip"),(_[g].clipMode==t.HeatMapGrid.ClipMode.Ellipsis||_[g].clipMode==t.HeatMapGrid.ClipMode.EllipsisWithTooltip)&&o.addClass("e-gridellipsis"),this.model.isResponsive&&o.attr("data-cell",this._decode(this.model.columns[g].headerText)),0==_[g].visible?o.addClass("e-hide"):(c&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o.addClass("e-detailrowvisible"),c=!1),this.model.groupSettings.showGroupedColumn||o.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[g].field+"'}}e-hide{{/if}}{{/for}}"),t.isNullOrUndefined(_[g].templateID||_[g].template)){for(var C=(_[g].field||"").split("."),S=C.length-1,w="";S;)w+="(",S--;_[g].type||_[g].editType,_[g].disableHtmlEncode?o.html("{{html:"+w+"#data['"+C.join("'] || {})['")+"']}}"):o.html("{{:"+w+"#data['"+C.join("'] || {})['")+"']}}"),void 0==_[g].format||_[g].foreignKeyValue||o.html("{{:~_gridFormatting('"+_[g].format+"',"+w+"#data['"+C.join("'] || {})['")+"'],'"+this.model.locale+"')}}"),_[g].foreignKeyValue&&_[g].dataSource&&o.html("{{:~_foreignKey("+g+","+w+"#data['"+C.join("'] || {})['")+"'],'"+this._id+"')}}"),_[g].commands&&(r={},e.views.helpers(r),(t.isNullOrUndefined(_[g].field)||""==_[g].field)&&(this.model.columns[g].allowGrouping=this.model.columns[g].allowFiltering=this.model.columns[g].allowSorting=!1),t.isNullOrUndefined(_[g].headerText)||e("#"+this._id+_[g].headerText.replace(/[^a-z0-9|s_]/gi,"")+"_UnboundTemplate").remove(),a=this._createUnboundElement(_[g]),t.isNullOrUndefined(_[g].headerText)||o.addClass("e-unboundcell").addClass("e-"+_[g].headerText.replace(/[^a-z0-9|s_]/gi,"")+g).html("{{:~_"+this._id+"UnboundTemplate('"+a.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&o.addClass("e-frozenunbound"),this._isUnboundColumn=!0)}else r={},s=_[g].headerText,r["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this,void 0),e.views.helpers(r),t.isNullOrUndefined(s)||t.isNullOrUndefined(s.match(/[^0-9\s\w]/g))||(s=s.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+s+g+"_Template").remove(),n=this._createTemplateElement(_[g]),(""==_[g].field||t.isNullOrUndefined(_[g].field))&&(this.model.columns[g].allowGrouping=this.model.columns[g].allowFiltering=this.model.columns[g].allowSorting=!1),0!=_[g].template&&o.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+n.id+"','"+g+"')}}");void 0==_[g].textAlign&&(_[g].textAlign="left"),!0===_[g].isPrimaryKey&&(this._primaryKeys.push(e.trim(_[g].field)),this._primaryKeys=e.unique(this._primaryKeys)),this.phoneMode&&this.model.enableResponsiveRow||void 0==_[g].textAlign||(o.css("text-align",_[g].textAlign),e(d[g]).css("text-align",_[g].textAlign)),this.phoneMode||t.isNullOrUndefined(_[g].headerTextAlign)||e(d[g]).css("text-align",_[g].headerTextAlign),t.isNullOrUndefined(_[g].cssClass)||o.addClass(_[g].cssClass),t.isNullOrUndefined(_[g].priority)||o.addClass("e-table-priority-"+_[g].priority),t.isNullOrUndefined(_[g].customAttributes)||o.attr(_[g].customAttributes),o.addClass("sf-ht-heatmapcell"),o.attr("data-role","heatmapcell"),f.append(o),this.model.enableAltRow?(i["_"+this._id+"AlternateRow"]=this._alternateRow,e.views.helpers(i),f.addClass("{{:~_"+this._id+"AlternateRow()}}")):f.addClass("e-row"),f.attr("data-role","row"),this.model.scrollSettings.frozenColumns>0&&this.model.scrollSettings.frozenColumns==g+1&&(u.appendChild(m),h[this._id+"_JSONFrozenTemplate"]=p.html(),f.empty(),p.empty())}u.appendChild(m)}h[this._id+"_JSONTemplate"]=null!=this.model.rowTemplate?e(this.model.rowTemplate).html():p.html(),e.templates(h)},i.prototype.render=function(){this.model.showSummary=this.model.summaryRows.length>0||this.model.showSummary,this._renderGridContent().insertAfter(this.element.children(".e-gridheader")),this.model.allowResizeToFit&&this.setWidthToColumns(),this._initialEndRendering()},i.prototype._createStackedRow=function(i,l){for(var o,s,n,r,a,d,h,c,u,p,g,m=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),f=[],_=[],C=[],S=[],w=0;w<this.model.columns.length;w++)if(0!=(o=this.model.columns[w]).visible){if(this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&this.model.groupSettings.groupedColumns.length>0&&-1!=e.inArray(o.field,this.model.groupSettings.groupedColumns))continue;var v="",y="",b="",T="",R=i.stackedHeaderColumns;for(u=0;u<R.length;u++)s=Array.isArray(R[u].column)?R[u].column:e.map(R[u].column.split(","),e.trim),n="e-row"+e.inArray(i,this.model.stackedHeaderRows)+"-column"+u,-1!=e.inArray(o.field,s)&&(v=R[u].headerText,y=R[u].cssClass,b=R[u].textAlign,T=R[u].tooltip?" e-gridtooltip "+n:"");f.push(v),_.push(y),C.push(b),S.push(T)}for(r=[],c=0;c<f.length;c++){for(a=1,d=c+1;d<f.length&&f[c]==f[d];d++)a++;r.push({sapnCount:a,headerText:f[c],cssClass:_[c],txtAlign:C[c],tooltip:S[c]}),c+=a-1}if(m=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),h=this.model.scrollSettings.frozenColumns,this.model.allowScrolling&&h>0){var M=[],x=0,V=0,D=0;for(c=0;c<this.model.columns.length;c++)u=this.model.columns[c],c<h&&0==u.visible&&D++;for(x=h-D;x>0;)p=r[V].sapnCount,r[V].sapnCount<x?(M.push(r[V]),l?V++:r.splice(V,1)):r[V].sapnCount>x?(r[V].sapnCount=r[V].sapnCount-x,l&&M.push({sapnCount:x,headerText:r[V].headerText})):(M.push(r[V]),l||r.splice(V,1)),x-=p;l&&(r=M)}for((this.model.detailsTemplate||this.model.childGrid)&&m.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),w=0;w<r.length;w++)(g=t.buildTag("th.e-headercell e-stackedHeaderCell e-default"+r[w].tooltip,r[w].headerText,{},{colspan:r[w].sapnCount})).css("textAlign",r[w].txtAlign),m.append(g),void 0!=r[w].cssClass&&g.addClass(r[w].cssClass);return m},i.prototype._renderGridContent=function(){var i,l,o,s,n,r,a,d=t.buildTag("div.e-gridcontent"),h=t.buildTag("div"),c=t.buildTag("table.e-table",""),u=e(document.createElement("tbody"));if(c.append(this.getHeaderTable().find("colgroup").clone()).append(u),h.html(c),d.html(h),this.setGridContentTable(c),this.setGridContent(d),c.attr("data-role","heatmap"),i={},this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length){if(this.initialRender&&(i.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],!this.model.groupSettings.showGroupedColumn))for(l=0;l<this.model.groupSettings.groupedColumns.length;l++)o=this.model.groupSettings.groupedColumns[l],-1==e.inArray(o,this._hiddenColumnsField)&&(this._hiddenColumnsField.push(o),this.getColumnByField(o).visible=!1);i.requestType=t.HeatMapGrid.Actions.Grouping}else i.requestType=t.HeatMapGrid.Actions.Refresh;if(null==this._dataSource()||0==this._dataSource().length||0==this.model.currentViewData.length?(s=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length}),u.append(e(document.createElement("tr")).append(s)),this.setWidthToColumns(),this.initialRender&&this.sendDataRenderingRequest(i)):this.sendDataRenderingRequest(i),this._isCaptionSummary&&"grouping"==i.requestType&&this.model.groupSettings.groupedColumns.length>1)for(n=this.getContentTable().find(".e-table").not(".e-recordtable").children("colgroup"),r=e(this.getContentTable().find(".e-recordtable")[0]).children("colgroup").find("col"),l=0;l<n.length;l++)a=e(n[l]).find("col").length,e(n[l]).find("col:gt("+(a-r.length-1)+")").remove(),e(n[l]).append(r.clone());return d},i.prototype.sendDataRenderingRequest=function(i){var l,o,s,n,r,a,d,h,c,u,p,g,m,f,_;if(this._templateRefresh&&(this.refreshTemplate(),this._templateRefresh=!1),this.setFormat(),this.model.scrollSettings.enableVirtualization||(this._previousColumnIndex=null,this._previousRowCellIndex=null,this._previousIndex=null),"add"==i.requestType||"grouping"==i.requestType||null!=this.model.currentViewData&&this.model.currentViewData.length)switch(i.requestType){case t.HeatMapGrid.Actions.Refresh:case t.HeatMapGrid.Actions.Paging:case t.HeatMapGrid.Actions.Sorting:case t.HeatMapGrid.Actions.Filtering:case t.HeatMapGrid.Actions.Save:case t.HeatMapGrid.Actions.Cancel:case t.HeatMapGrid.Actions.Delete:case t.HeatMapGrid.Actions.Search:case t.HeatMapGrid.Actions.Reorder:case t.HeatMapGrid.Actions.BatchSave:if(l=this.model.groupSettings.groupedColumns,this.model.allowGrouping&&i.requestType==t.HeatMapGrid.Actions.Refresh&&0==l.length&&this.element.find(".e-grouptopleftcell").length>0&&this.element.children(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),this.model.allowGrouping||(l=[]),("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),0==l.length){var C,S=document.createElement("div"),w=-1,v=!1;if(this.phoneMode||this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),(null!=this.model.childGrid||null!=this.model.detailsTemplate)&&this.getContentTable().find("colgroup").first().prepend(this._getIndentCol()),o=this._currentPage(),("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"normal"==this.model.editSettings.editMode)&&("cancel"==i.requestType||"save"==i.requestType)&&(this._editFormHeight=this.element.find(".gridform").closest("tr").height()),this.model.scrollSettings.frozenColumns>0)S.innerHTML=this._renderByFrozenDesign();else{i.data&&((C=document.createElement("div")).innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](i.data),"</table>"].join(""),this._dataSource()instanceof t.DataManager&&i.requestType==t.HeatMapGrid.Actions.Save&&(w=this._getDataIndex(this.model.currentViewData,i.data),v=this._dataSource().adaptor instanceof t.remoteSaveAdaptor)),S.innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](this.model.currentViewData),"</table>"].join("");var y=this.getContentTable().get(0),b=y.lastChild,T=this.getContentTable().first().find("tbody").first();if("save"!=i.requestType&&"cancel"!=i.requestType||"batch"==this.model.editSettings.editMode)if("delete"==i.requestType){if(this._isUnboundColumn){var R=this.element.find(".e-editedrow");M=this.getContentTable().find(".e-editedrow").get(0),V=R.length?S.firstChild.firstChild.firstChild:C.firstChild.firstChild.lastChild;0==R.length||"normal"!=this.model.editSettings.editMode&&"externalform"!=this.model.editSettings.editMode&&"externalformtemplate"!=this.model.editSettings.editMode?"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(M=R.prev("tr").get(0),R.remove()):M=R.get(0):e(M).replaceWith(e(V))}this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&this.getContentTable()[0].rows.length!=this.model.currentViewData.length&&(this.getContentTable().find("tr").length&&this._excludeDetailRows().length?this.multiDeleteMode?(m=S.firstChild.firstChild.rows.length,f=e(S.firstChild.firstChild.rows).slice(m-this.selectedRowsIndexes.length,m),e(b).append(f)):b.appendChild(S.firstChild.firstChild.lastChild):e(b).prepend(S.firstChild.firstChild.rows)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(_=this.getContentTable().find(".e-detailrow:visible"),e.each(_,function(e){0==_.eq(e).closest("tr").prev().children(".e-detailrowexpand").length&&_.eq(e).remove()})),this._gridRows=y.rows,this.model.enableAltRow&&this._refreshAltRow()}else this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?S.firstChild.lastChild:S.firstChild.firstChild,this.getContentTable().get(0).lastChild);else{if(s=-1!=this.model.editSettings.editMode.indexOf("inlineform")?t.isNullOrUndefined(i.selectedRow)?this._selectedRow():i.selectedRow:this.getContentTable().find(".e-"+i.action+"edrow").index(),n=this._currentTrIndex,-1==s&&(s=n),null!=this.model.detailsTemplate||null!=this.model.childGrid)for(r="inlineform"==this.model.editSettings.editMode?e(e(b.childNodes).not(".e-detailrow")[s]):e(b.childNodes[s]),a=e(b.childNodes).not(".e-detailrow"),u=0;u<a.length;u++)r.is(a[u])&&(s=u);if("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){if("add"==i.action&&!this.getContentTable().find(".e-addedrow").length)break;var M=this.getContentTable().find(".e-addedrow").get(0),x=this.getContentTable().find(".e-editedrow"),V=x.length||"cancel"==i.requestType?S.firstChild.firstChild.firstChild:C.firstChild.firstChild.lastChild;x.length?(this.model.editSettings.showAddNewRow&&"top"==this.model.editSettings.rowPosition&&(s-=1),V=S.firstChild.firstChild.childNodes[s],"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(M=x.prev("tr").get(0),x.remove()):M=x.get(0),d=e(V),p=e(M),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&p.next("tr.e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),"cancel"==i.requestType?(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").addClass("e-showaddrow"),p.replaceWith(d)):!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(null!=this.model.detailsTemplate&&p.next("tr.e-detailrow").length&&b.removeChild(p.next("tr.e-detailrow").get(0)),p.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==l.length&&b.appendChild(S.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?S.firstChild.lastChild:S.firstChild.firstChild,this.getContentTable().get(0).lastChild):b.replaceChild(V,M)):(d=e(V),p=e(M),"add"==i.action&&"save"==i.requestType&&this.model.editSettings.showAddNewRow&&this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&("bottom"==this.model.editSettings.rowPosition?b.lastChild.previousSibling.remove():b.lastChild.remove()),"cancel"==i.requestType||this._dataSource()instanceof t.DataManager||1!=this._currentPage()||"save"==i.requestType&&!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount==this._previousFilterCount?(t.isNullOrUndefined(M)||(p.remove(),this._dataSource()instanceof t.DataManager&&-1!=w?0==w?b.insertBefore(V,b.children[w]):d.insertAfter(b.children[w-1]):this._dataSource()instanceof t.DataManager&&!v||1==this._currentPage()||"save"!=i.requestType||e(b).prepend(e(S.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==l.length&&(this._dataSource()instanceof t.DataManager&&-1==w&&!v&&"save"!=i.requestType||"save"!=i.requestType&&!(this._dataSource()instanceof t.DataManager))&&"cancel"==i.requestType&&!this.model.editSettings.showAddNewRow&&y.lastChild.appendChild(S.firstChild.firstChild.lastChild)),"cancel"==i.requestType&&-1!=this._selectedRow()&&this.clearSelection()):1==this.model.currentViewData.length?(e(b).empty(),b.appendChild(V)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?S.firstChild.lastChild:S.firstChild.firstChild,this.getContentTable().get(0).lastChild):"bottom"==this.model.editSettings.rowPosition?(T.prepend(M),b.replaceChild(V,M)):b.replaceChild(V,M))}else if("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode){if("add"==i.action&&!this.element.find(".e-addedrow").length)break;if(x=this.element.find(".e-editedrow"),"cancel"!=i.requestType&&(x.length||t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount!=this._previousFilterCount))if(x.length){if(V=S.firstChild.firstChild.childNodes[s],M=this._excludeDetailRows(b.childNodes)[s],null!=this.model.allowCellMerging&&(p=e(M),e(M.childNodes).hasClass("e-merged")))for(h=p.children(".e-merged").index(),c=M.children[h].colSpan,u=0;u<c;u++)V.childNodes[h+u].className+=" e-merged e-hide",V.childNodes[h].colSpan=u+1;null!=this.model.detailsTemplate&&(M=e(b.childNodes).not(".e-detailrow").eq(s).get(0)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&p.next("tr.e-detailrow:visible").length&&e(V).find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(p=e(M),null!=this.model.detailsTemplate&&p.next("tr.e-detailrow").length&&b.removeChild(p.next("tr.e-detailrow").get(0)),p.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&b.appendChild(S.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?S.firstChild.lastChild:S.firstChild.firstChild,this.getContentTable().get(0).lastChild):b.replaceChild(V,M)}else 1==this.model.currentViewData.length&&0==this.getContentTable().find("td.e-rowcell").length?(V=S.firstChild.firstChild.firstChild,e(b).empty(),b.appendChild(V)):(g=x.length||"cancel"==i.requestType?S.firstChild.firstChild.firstChild:C.firstChild.firstChild.lastChild,this._dataSource()instanceof t.DataManager?-1!=w&&(0==w?b.insertBefore(g,b.children[w]):e(g).insertAfter(b.children[w-1]),this.model.allowPaging&&(this.model.pageSettings.pageSize<=this.model.currentViewData.length||w==this.model.pageSettings.pageSize-1)&&b.removeChild(b.lastChild)):(this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?S.firstChild.lastChild:S.firstChild.firstChild,this.getContentTable().get(0).lastChild):1==this._currentPage()?this.getContentTable().find("tbody").first().prepend(e(g)):this.getContentTable().find("tbody").first().prepend(e(S.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&b.removeChild(b.lastChild)),null!=this.model.detailsTemplate&&e(y.lastChild.lastChild).children(".e-detailrowexpand").length&&b.removeChild(b.lastChild));else V=S.firstChild.firstChild.childNodes[s],M=b.childNodes[s],d=e(V),p=e(M),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&p.next(".e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),p.replaceWith(d),this.clearSelection()}this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():y.rows,this.model.enableAltRow&&this._refreshAltRow()}}this._currentJsonData=this.model.currentViewData,this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():this.getContentTable().get(0).rows,this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),{},("sorting"==i.requestType||"filtering"==i.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&("filtering"==i.requestType&&(this.getContent().first().ejScroller("refresh").ejScroller("isVScroll")?this.element.find(".gridheader").addClass("e-scrollcss"):this.element.find(".gridheader").removeClass("e-scrollcss"),this._refreshVirtualPagerInfo()),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(o),"filtering"==i.requestType&&this.getContent().first().ejScroller("refresh")),this.model.scrollSettings.enableVirtualization||this._eventBindings();break}case t.HeatMapGrid.Actions.Grouping:this._group(i),this._refreshStackedHeader();break;case t.HeatMapGrid.Actions.BeginEdit:this._edit(i);break;case t.HeatMapGrid.Actions.Add:this._add(i);break;case t.HeatMapGrid.Actions.Ungrouping:this._ungroup(i);break;case t.HeatMapGrid.Actions.VirtualScroll:this._isVirtualRecordsLoaded||(this.model.scrollSettings.enableVirtualization?this._replacingVirtualContent():this._replacingContent())}else"refresh"!=i.requestType||0!=this.model.currentViewData||this.phoneMode||this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),this._newungroup(i);this._showGridLines(),this._completeAction(i)},i.prototype._showGridLines=function(){var e=this.model.gridLines;"both"!=e&&this.getContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},i.prototype._newungroup=function(e){"ungrouping"==e.requestType?this._ungroup(e):this.getContentTable().find("tbody").empty().first().append(this._getEmptyTbody())},i.prototype.setFormat=function(){for(var e,t,i=[],l=0;l<this.model.columns.length;l++)"date"==this.model.columns[l].type&&i.push(this.model.columns[l]);if(i.length>0)for(l=0;l<this.model.currentViewData.length;l++)for(e=0;e<i.length;e++)t=this.model.currentViewData[l][i[e].field],/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(this.model.currentViewData[l][i[e].field]=new Date(this.model.currentViewData[l][i[e].field]))},i.prototype._completeAction=function(i){var l,o;if(this.model.editSettings.showAddNewRow||(this.model.isEdit=!1),this._confirmedValue=!1,t.HeatMapGrid.Actions.Grouping!=i.requestType||!t.isNullOrUndefined(i.columnName)){if("ascending"!=i.columnSortDirection&&"descending"!=i.columnSortDirection||t.isNullOrUndefined(i.columnName)||(l=this.getColumnByField(i.columnName),this.model.allowSorting&&this.model.allowMultiSorting?this._scolumns.push(l.field):this._gridSort=l.field),"beginedit"!=i.requestType&&"add"!=i.requestType&&this.setWidthToColumns(),("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._isAddNew=!1,this.model.isResponsive&&this.model.minWidth&&this.windowonresize()),this.initialRender||!(t.HeatMapGrid.Actions.UnGrouping==i.requestType||this.model.groupSettings.groupedColumns.length>0)||e("#"+this._id+"EditForm").length?t.HeatMapGrid.Actions.Sorting==i.requestType&&this.model.allowSorting||t.HeatMapGrid.Actions.Refresh==i.requestType||t.HeatMapGrid.Actions.Cancel==i.requestType?!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i):t.HeatMapGrid.Actions.Delete==i.requestType||t.HeatMapGrid.Actions.Save==i.requestType||t.HeatMapGrid.Actions.Search==i.requestType?(this._editEventTrigger(i),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i)):t.HeatMapGrid.Actions.Filtering==i.requestType?this._filterCompleteAction():t.HeatMapGrid.Actions.BeginEdit==i.requestType||t.HeatMapGrid.Actions.Add==i.requestType?this._editCompleteAction(i):(t.HeatMapGrid.Actions.Grouping==i.requestType||t.HeatMapGrid.Actions.Ungrouping==i.requestType)&&this["_"+i.requestType+"CompleteAction"](i):this._recalculateIndentWidth(),!this.initialRender&&this.model.showSummary&&this.model.summaryRows.length>0&&(this.model.currentViewData.length||this.element.children(".e-gridfooter").remove()),this.initialRender||(this.getContent().find("td.e-selectionbackground").length||this._setCurrentRow(i.requestType),"virtualscroll"!=i.requestType&&this.clearColumnSelection()&&e(this.getHeaderTable().find("th.e-headercell")).removeClass("e-columnselection")),"batch"==this.model.editSettings.editMode&&this.refreshBatchEditMode(),(!this.initialRender&&(this.model.allowScrolling||this.model.isResponsive)&&(this._checkScrollActions(i.requestType)||-1!=this.model.editSettings.editMode.indexOf("inline")&&"beginedit"==i.requestType)||"continuous"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType)&&(this.model.isResponsive&&this.model.minWidth?this.windowonresize():this._refreshScroller(i)),"normal"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType&&this.getContent().find("div:first").scrollLeft(this.getScrollObject().scrollLeft()),null!=this._customPop&&"sorting"!=i.requestType&&this._customPop.hide(),!this.model.allowScrolling||this.initialRender||this.model.scrollSettings.enableVirtualization||this.getContentTable().find("tr:last").find("td").addClass("e-lastrowcell"),t.HeatMapGrid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0&&this._groupingCompleteAction(i),t.HeatMapGrid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length<1&&this._ungroupingCompleteAction(i),this.model.textWrapSettings&&this._setTextWrap(),(this._isUngrouping||this._columnChooser)&&"refresh"==i.requestType||(this._isUngrouping=!1,this._columnChooser=!1),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&(this.initialRender||0!=this.getContentTable().find("tr.e-addedrow").length||0==this.element.find(".e-gridcontent").find("tr").length||this._startAdd()),(t.HeatMapGrid.Actions.BeginEdit==i.requestType||t.HeatMapGrid.Actions.Add==i.requestType)&&e.isFunction(e.validator)&&this.setValidation(),this.initialRender||(this.model._groupingCollapsed=[]),!this.initialRender&&"refresh"==i.requestType)for(o=0;o<this.model.filterSettings.filteredColumns.length;o++)this.getHeaderTable().find(".e-headercelldiv").eq(this.getColumnIndexByField(this.model.filterSettings.filteredColumns[o].field)).parent().find(".e-filtericon").addClass("e-filteredicon e-filternone");"fixed"!=this.model.columnLayout||this.model.isEdit||this.setWidthToColumns()}},i.prototype._getDataIndex=function(e,t){for(var i,l,o=0,s=0,n=e.length;s<n;s++){for(i=0,l=this._primaryKeys.length;i<l;i++){if(this._checkPrimaryValue(e[s][this._primaryKeys[i]],t[this._primaryKeys[i]],this._primaryKeys[i]))continue;i==l-1&&(o=1)}if(o)return s}return-1},i.prototype._checkPrimaryValue=function(e,t,i){return"string"==this.getColumnByField(i).type&&(e=e.trim()),e!=t},i.prototype._eventBindings=function(){var i,l,o,s,n,r,a,d,h=this.model.scrollSettings.frozenColumns>0?this._gridRows[0].length:this._gridRows.length,c=0,u=this.model.pageSettings.pageSize;if(0!=this._gridRecordsCount&&(null!=this.model.queryCellInfo||null!=this.model.rowDataBound||null!=this.model.mergeCellInfo||null!=this.model.templateRefresh))for(l=0;l<h;l++){if(o=null,c=l,this.model.scrollSettings.allowVirtualScrolling&&l<u)if(this.model.scrollSettings.enableVirtualization){if(o=e(this._gridRows).eq(l),s=parseInt(e(o).attr("name"),32),-1!=e.inArray(s,this._queryCellView))continue;this._virtualLoadedRecords[s]&&(n=this._virtualLoadedRecords[s][l%this._virtualRowCount]),c=s*this._virtualRowCount+l%this._virtualRowCount}else{for(r=0;r<this._cloneQuery.queries.length;r++)i="onPage"==this._cloneQuery.queries[r].fn&&this._cloneQuery.queries[r].e.pageIndex-1;0!=(a=u*i)&&(c=(o=this.getContentTable().find("tr[name="+a+"]").eq(l)).index())}else this.model.scrollSettings.enableVirtualization&&(o=e(this._gridRows).eq(l));if((o=o||this.getRowByIndex(c)).hasClass("e-virtualrow")||t.isNullOrUndefined(this._currentJsonData[l]||n))break;d=this.model.scrollSettings.enableVirtualization?n:this._currentJsonData[l],this._rowEventTrigger(o,d)}},i.prototype._rowEventTrigger=function(i,l){for(var o,s={row:i,data:l},n=(i.cells,e(i).find(".e-rowcell")),r=0;r<n.length;r++)s={cell:n[r],data:l,text:n[r].innerHTML},o=this._getForeignKeyData(s.data),e(n[r]).hasClass("e-rowcell")&&(s.column=this.model.columns[r]),t.isNullOrUndefined(o)||(s.foreignKeyData=o),this._heatmap._setBinding(s),e(n[r]).hasClass("e-templatecell")&&(s={cell:n[r],column:this.model.columns[r],data:l,rowIndex:e(i).index()})},i.prototype.setWidthToColumns=function(){var i,l,o,s,n,r,a,d,h,c,u=this.getContentTable().children("colgroup").find("col"),p=this.getHeaderTable().children("colgroup").find("col"),g=this.element.width(),m=0,f=0,_=0;for(this.model.groupSettings.groupedColumns.length&&!this.model.allowScrolling&&this.model.groupSettings.showGroupedColumn&&("msie"==(i=this.getBrowserDetails()).browser&&parseInt(i.version,10)>8&&u.first().css("width",3e3/g+"%")),t.isNullOrUndefined(this.model.detailsTemplate)||(l=this.model.groupSettings.groupedColumns.length,o=0!=this.model.groupSettings.groupedColumns.length?1:0,u.eq(o).css("width",this._detailsOuterWidth),p.eq(l).css("width",this._detailsOuterWidth)),this._detailColsRefresh(),u=this._$headerCols,p=this._$contentCols,c=0;c<p.length;c++){if(this.model.allowResizeToFit&&void 0===this.model.columns[c].width&&void 0===this.columnsWidthCollection[c]){var C=this.model.groupSettings.groupedColumns.length?c+this.model.groupSettings.groupedColumns.length:c,S=this._resizer._getContentWidth(c),w=this.getHeaderTable().find(".e-headercelldiv").eq(C),v=this._resizer._getHeaderContentWidth(w);_="normal"==this.model.editSettings.editMode&&(this.model.isEdit||this._isAddNew)?u.eq(c).width():(S>v?S:v)+parseInt(w.css("padding-left"),10),this.columnsWidthCollection[c]=_,f+=this.model.columns[c].visible?_:0}else f+=this.model.columns[c].visible?parseInt(this.model.columns[c].width,10):0;if(t.isNullOrUndefined(this.columnsWidthCollection[c])){if(this.model.allowScrolling){var y=(g/this.model.columns.length).toFixed(2)-(g/(this.model.scrollSettings.buttonSize||18)/100).toFixed(2);u.eq(c).css("width",y+"px"),p.eq(c).css("width",y+"px"),this.model.columns[c].width=y,this.columnsWidthCollection[c]=parseFloat(y)}}else u.eq(c).width(this.columnsWidthCollection[c]),p.eq(c).width(this.columnsWidthCollection[c]),this.model.columns[c].priority&&p.eq(c).addClass("e-table-priority-"+this.model.columns[c].priority)}if("fixed"==this.model.columnLayout){this.model.scrollSettings&&0==this.model.scrollSettings.frozenColumns&&(this.getHeaderTable().width(f),this.getContentTable().width(f));var b=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),T=this.getHeaderContent().width()>b?"addClass":"removeClass",R=this.getHeaderTable(),M=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(R=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),M=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),R[T]("e-tableLastCell"),M[T]("e-tableLastCell")}if(!this.model.allowScrolling&&this.model.allowResizeToFit&&f>g&&(this.model.allowScrolling=!0,this.model.scrollSettings.width=g,this.getHeaderTable().parent().addClass("e-headercontent"),!this.model.scrollSettings.frozenColumns>0&&this.getHeaderTable().width(g)),this.model.isEdit&&(a=u.clone(),this.model.editSettings.showAddNewRow&&(s=this.getContentTable().find(".e-editedrow")),n=this.model.scrollSettings.frozenColumns>0?this.getContent().find(".gridform").find("colgroup"):t.isNullOrUndefined(s)||1!=s.length?e("#"+this._id+"EditForm").find("colgroup"):s.find("colgroup"),this.model.scrollSettings.frozenColumns>0&&n.first().empty().append(a.splice(0,this.model.scrollSettings.frozenColumns)),n.last().empty().append(a),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&n.prepend(this._getIndentCol())),this.model.groupSettings.groupedColumns.length)for(r=this.getContentTable().find(".e-recordtable").children("colgroup"),c=0;c<r.length;c++)a=u.clone(),d=null!=this._detailsOuterWidth?this._detailsOuterWidth:"30px",(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&a.splice(0,0,e(this._getIndentCol()).width(d)[0]),r.eq(c).empty().append(a);if(this.model.scrollSettings.frozenColumns>0){for(h=0,c=0;c<this.columnsWidthCollection.length;c++)h+=parseInt(this.columnsWidthCollection[c],10),this.model.scrollSettings.frozenColumns-1==c&&(m=Math.ceil(h));this.getContent().find(".e-frozencontentdiv").outerWidth(m).end().find(".e-movablecontentdiv").outerWidth(h-m),this.getHeaderContent().find(".e-frozenheaderdiv").outerWidth(m).end().find(".e-movableheaderdiv").outerWidth(h-m)}},i.prototype._initialEndRendering=function(){if(this.model.scrollSettings.frozenColumns>0&&!this.model.allowScrolling)return this.getContent().remove(),void this.getHeaderTable().eq(1).remove();if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization,this._getRowHeights(),0!=this.element.width())this.model.allowScrolling&&this._renderScroller();else if(this.model.allowScrolling&&0==this.element.width()){var e=this,i=setInterval(function(){0==e.element.width()||t.isNullOrUndefined(e.element.width())||(e._renderScroller(),e._endRendering(),clearInterval(i))},100);return}this._endRendering()},i.prototype._endRendering=function(){var e,i;!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.model.allowScrolling&&(e=this.getScrollObject()),i=this.model.enableRTL?"e-summaryscroll e-rtl":"e-summaryscroll",this.model.allowScrolling&&this.model.showSummary&&e._vScroll&&this.element.find(".e-summaryrow.e-scroller").addClass(i),this._addMedia(),this.model.allowScrolling&&this.model.allowTextWrap&&!this.model.scrollSettings.allowVirtualScrolling&&this.getContent().first().ejScroller("refresh"),this.model.scrollSettings.allowVirtualScrolling&&(1!=this._currentPage()||this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=this._currentJsonData),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView():this._refreshVirtualContent(),this.getContent().first().ejScroller("refresh"),this.getContent().ejScroller("isVScroll")?(this.element.find(".e-gridheader").addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width())):this.element.find(".e-gridheader").removeClass("e-scrollcss")),-1!=this._selectedRow()&&(this.model.currentIndex=this._selectedRow()),this.rowHeightRefresh(),this.initialRender&&(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow()},i.prototype._addLastRow=function(){var i,l=this.getContentTable().find("tr:last").find("td"),o=0;if(this.model.allowScrolling&&!this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(this.model.dataSource)&&!t.isNullOrUndefined(this.getRows())){for(i=0;i<this.getRows().length;i++)o+=e(this.getRows()[i]).height();o<this.getContent().height()-1&&l.addClass("e-lastrowcell")}this.model.scrollSettings.allowVirtualScrolling&&this.getContentTable().height()<this.getContent().height()&&l.addClass("e-lastrowcell")},i.prototype._addMedia=function(){if("string"!=typeof this.model.scrollSettings.width&&this.model.scrollSettings.width>0?this._responsiveScrollWidth=this._originalScrollWidth=this.model.scrollSettings.width:this._originalScrollWidth=this.element.width(),"string"!=typeof this.model.scrollSettings.height&&this.model.scrollSettings.height>0&&(this._responsiveScrollHiehgt=this.model.scrollSettings.height),this.model.minWidth&&this.model.isResponsive){if(this._$onresize=e.proxy(this.windowonresize,this),e(window).bind("resize",this._$onresize),e.isFunction(window.matchMedia)){var t=window.matchMedia("(max-width: 768px)");this._mediaStatus=t.matches}this.windowonresize()}},i.prototype._getNoncontentHeight=function(){var e=this.getHeaderContent().outerHeight();return this.model.allowGrouping&&this.model.groupSettings.showDropArea&&(e+=this.element.find(".e-groupdroparea").outerHeight()),e},i.prototype._mediaQueryUpdate=function(e,i,l,o){var s,n;if(window.innerWidth<=320&&this.model.enableResponsiveRow)return(s=this.getContentTable()[0].style).removeAttribute?s.removeAttribute("min-width"):s.removeProperty("min-width"),void(this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy"));e?(this.model.scrollSettings.width=t.isNullOrUndefined(this._responsiveScrollWidth)?l:Math.min(this._responsiveScrollWidth,l),n=Math.min(o,i)-this._getNoncontentHeight(),n=t.isNullOrUndefined(this._responsiveScrollHiehgt)?n:Math.min(this._responsiveScrollHiehgt,n),n="auto"!=this.model.scrollSettings.height?n-(parseInt(this.element.parent().css("margin-bottom"))+1):this.model.scrollSettings.height,this.model.minWidth>l&&i>o&&(n="auto"!=n?n+this.model.scrollSettings.buttonSize:n),t.isNullOrUndefined(this.getRows())&&(n="100%"),this.model.scrollSettings.height=n,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()):(this.model.scrollSettings.width="100%",t.isNullOrUndefined(this._responsiveScrollWidth)||(this.model.scrollSettings.width=Math.min(this._responsiveScrollWidth,l)),n=Math.min(o,i)-this._getNoncontentHeight(),t.isNullOrUndefined(this._responsiveScrollHiehgt)||(n=Math.min(this._responsiveScrollHiehgt,o)),n="auto"!=this.model.scrollSettings.height?n-parseInt(this.element.parent().css("margin-bottom")):this.model.scrollSettings.height,t.isNullOrUndefined(this.getRows())&&(n="100%"),this.model.scrollSettings.height=n,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller())},i.prototype.windowonresize=function(){var i,l;this.model.scrollSettings.width=this._responsiveScrollWidth,this.element.width("100%"),this.getContentTable().width("100%"),this.getHeaderTable().width("100%"),this.getContentTable().css("minWidth",this.model.minWidth),i=this.element.width();var o=e(window).height()-this.element.offset().top,s=(t.isNullOrUndefined(this.getRows())||this.getRows().length,this.element.parent().is(e("body"))||this.element.parent().height()==e("body").height()||""==this.element.parent()[0].style.height),n=this.getContentTable()[0].scrollHeight+this._getNoncontentHeight(),r=s?o:this.element.parent().height();n+=parseInt(this.element.parent().css("margin-top")),l=this.model.minWidth>i||r<=n,this._mediaQueryUpdate(l,r,i,n),this._refreshScroller({})},i.prototype._getRowHeights=function(){var e,t,i,l=this.getRows();if(null!==l)if(this._rowHeightCollection=[],void 0!==l[1]&&l[1].length&&(this.model.scrollSettings.frozenColumns>0&&void 0!==l[0]||void 0!==l[0]&&void 0!==l[0].item&&"number"==typeof l[0].length&&void 0!==l[1].item&&"number"==typeof l[1].length))for(e=l[0],t=l[1],i=0;i<e.length;i++)this._rowHeightCollection[i]=e[i].offsetTop>=t[i].offsetTop?e[i].offsetTop:t[i].offsetTop;else for(i=0;i<l.length;i++)this._rowHeightCollection[i]=l[i].offsetTop;return this._rowHeightCollection},i.prototype._getEmptyTbody=function(){var i=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length});return e(document.createElement("tr")).append(i)},i.prototype._getIndentCol=function(){return t.buildTag("col","",{width:"30px"})},i.prototype._wireEvents=function(t){t._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",e.proxy(this._clickHandler,this)),this._enableRowHover(void 0,t),this.model.allowGrouping&&(this._enableGroupingEvents(),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",e.proxy(this._dropAreaHover,this)))},i.prototype._clickHandler=function(t){var i,l,o,s,n,r,a,d,h,c,u=e(t.target),p=e("[id$='ccDiv'].e-grid.e-columnChooser"),g=e("#"+this._id+"EditForm");if(p.length)for(!0,n=0;n<p.length;n++)(u.parents(".e-ccButton").length||u.hasClass("e-ccButton"))&&e(t.target).closest(".e-grid").attr("id")+"ccDiv"!=p[n].id;if(u.closest(".e-grid").attr("id")===this._id&&!u.closest("#"+this._id+"EditForm").length){if(u.hasClass("e-rowcell")||u.closest("td").is(".e-rowcell")||u.hasClass("e-headercell")&&t.clientY-u.offset().top<u.height()/4){if(this._bulkEditCellDetails.cancelSave)return void(this._bulkEditCellDetails.cancelSave=!1);if("batch"==this.model.editSettings.editMode&&e.isFunction(e.validator)&&g.length&&g.validate().errorList.length>0)return;"batch"==this.model.editSettings.editMode&&this.element.focus(),l=u.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,r=-1!=u.closest(".e-rowcell").index()?u.closest(".e-rowcell").index():u.closest(".e-headercell").index()-this.model.groupSettings.groupedColumns.length,o=u.hasClass("e-rowcell")?u.index()-l:r-l,o=null!=this.model.detailsTemplate||null!=this.model.childGrid?o-1:o,this.model.scrollSettings.frozenColumns&&(u.closest(".e-movableheaderdiv").length||u.closest(".e-movablecontentdiv").length)&&(o+=this.model.scrollSettings.frozenColumns),s=this.getIndexByRow(u.closest("tr")),this._bulkEditCellDetails.columnIndex=o,this._bulkEditCellDetails.rowIndex=s,this.model.allowSelection&&("multiple"==this.model.selectionType&&((t.ctrlKey||this._enableSelectMultiTouch)&&(this.multiSelectCtrlRequest=!0),t.shiftKey&&(this.multiSelectShiftRequest=!0,this._allowcellSelection&&s>-1&&this.selectCells([[s,[o]]]),this._selectedRow(this.getIndexByRow(u.closest("tr")))),"touch"==t.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-rowselect").hasClass("e-spanclicked")&&"row"==this.model.selectionSettings.selectionMode&&this._customPop.show(),"touch"==t.pointerType&&null!=this._customPop&&(this._customPop.find(".e-sortdirect").is(":visible")||!this._customPop.find(".e-rowselect").hasClass("e-spanclicked"))&&"multiple"==this.model.selectionType&&(this._customPop.removeAttr("style"),a=u.offset(),this._customPop.offset({top:0,left:0}).offset({left:a.left,top:a.top-this.getRowHeight()}).find(".e-sortdirect").hide().end().find(".e-rowselect").show().end().show())),this.multiSelectShiftRequest||(this._allowcellSelection&&s>-1&&(d=this._checkCellSelectionByRow(s,o),(this.model.selectionSettings.enableToggle&&1==this.selectedRowCellIndexes.length&&1==this.selectedRowCellIndexes[0].cellIndex.length||t.ctrlKey&&"multiple"==this.model.selectionType)&&-1!=d&&this.selectedRowCellIndexes.length>0&&this.selectedRowCellIndexes[0].cellIndex.length>0?this.clearCellSelection(d.rowIndex,o):this.selectCells([[s,[o]]])),this._allowrowSelection&&s>-1&&(h=this.getIndexByRow(u.closest("tr")),this.model.scrollSettings.enableVirtualization&&(c=s%this._virtualRowCount,h=parseInt(e(u).closest("tr").attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-c)),this.model.selectionSettings.enableToggle&&1==this.getSelectedRecords().length&&-1!=e.inArray(this.getIndexByRow(u.closest("tr")),this.selectedRowsIndexes)&&this.clearSelection(h)),this._allowcolumnSelection&&u.hasClass("e-headercell")&&!u.hasClass("e-stackedHeaderCell")&&t.clientY-u.offset().top<u.height()/4&&this.model.selectionSettings.enableToggle&&1==this.selectedColumnIndexes.length&&-1!=e.inArray(o,this.selectedColumnIndexes)&&this.clearColumnSelection(o),this.multiSelectCtrlRequest=!1),this.multiSelectShiftRequest=!1),i=this.model.columns[this._bulkEditCellDetails.columnIndex].field,u.closest(".e-rowcell").length&&i&&(this._tabKey=!1,this.model.editSettings.allowEditing&&"batch"==this.model.editSettings.editMode&&this.editCell(e.inArray(u.closest("tr").get(0),this.getRows()),i))}(u.hasClass("e-rowselect")||u.hasClass("e-sortdirect"))&&(u.hasClass("e-spanclicked")?(u.removeClass("e-spanclicked"),u.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!1),u.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!1),this._customPop.hide()):(u.addClass("e-spanclicked"),u.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!0),u.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!0))),u.is(".e-filtericon")&&0!=u.closest(".e-detailrow").length&&t.preventDefault(),this.model.allowSearching&&null!=this._searchBar&&(u.is(this._searchBar.find(".e-cancel"))?this._searchBar.find("input").val(""):t.target.id==this._id+"_searchbar"?this._searchBar.find(".e-cancel").removeClass("e-hide"):this._searchBar.find(".e-cancel").hasClass("e-hide")||this._searchBar.find(".e-cancel").addClass("e-hide"))}},i.prototype._checkCellSelectionByRow=function(t,i){for(var l=0;l<this.selectedRowCellIndexes.length&&this.selectedRowCellIndexes[l].rowIndex!=t;l++);return l!=this.selectedRowCellIndexes.length&&-1!=e.inArray(i,this.selectedRowCellIndexes[l].cellIndex)?this.selectedRowCellIndexes[l]:-1},i.prototype._destroy=function(){var t,i,l;if(this.element.off(),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").add(this.getContent().find(".e-content,.e-movablecontent")).unbind("scroll"),(t=e("#"+this._id+"EditForm")).length){for(i=t.find(".e-field"),l=0;l<i.length;l++)e(i[l]);t.remove()}this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").remove(),e("#"+this._id+"_ccTail").remove(),e("#"+this._id+"_ccTailAlt").remove()),this.model.allowFiltering&&"excel"==this.model.filterSettings.filterType&&this._excelFilter.resetExcelFilter(),this.model.allowReordering&&e(".e-columndropindicator").remove(),this._$onresize&&e(window).unbind("resize",this._$onresize),this.element.empty().removeClass("e-grid "+this.model.cssClass)},i}();t.HeatMapGrid=function(e,t){return new i(e,t)},t.HeatMapGrid.Locale=t.HeatMapGrid.Locale||{},t.HeatMapGrid.Actions={Paging:"paging",Sorting:"sorting",Filtering:"filtering",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Grouping:"grouping",Ungrouping:"ungrouping",Refresh:"refresh",Reorder:"reorder",Search:"searching",BatchSave:"batchsave",VirtualScroll:"virtualscroll"},t.HeatMapGrid.ClipMode={Ellipsis:"ellipsis",Clip:"clip",EllipsisWithTooltip:"ellipsiswithtooltip"},t.HeatMapGrid.SelectionType={Single:"single",Multiple:"multiple"},t.HeatMapGrid.SelectionMode={Row:"row",Cell:"cell",Column:"column"},t.HeatMapGrid.Locale.default=t.HeatMapGrid.Locale["en-US"]={EmptyRecord:"No records to display",GroupDropArea:"Drag a column header here to group its column",DeleteOperationAlert:"No records selected for delete operation",EditOperationAlert:"No records selected for edit operation",SaveButton:"Save",OkButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",Notactionkeyalert:"This Key-Combination is not available",Keyconfigalerttext:"This Key-Combination has already been assigned to ",GroupCaptionFormat:"{{:headerText}}: {{:key}} - {{:count}} {{if count == 1 }} item {{else}} items {{/if}} ",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",PagerInfo:"{0} of {1} pages ({2} items)",FrozenColumnsViewAlert:"Frozen columns should be in grid view area",FrozenColumnsScrollAlert:"Enable allowScrolling while using frozen Columns",FrozenNotSupportedException:"Frozen Columns and Rows are not supported for Grouping, Row Template, Detail Template, Hierarchy Grid and Batch Editing",Add:"Add",Edit:"Edit",Delete:"Delete",Update:"Update",Cancel:"Cancel",Done:"Done",Columns:"Columns",SelectAll:"(Select All)",PrintGrid:"Print",ExcelExport:"Excel Export",WordExport:"Word Export",PdfExport:"PDF Export",StringMenuOptions:[{text:"StartsWith",value:"StartsWith"},{text:"EndsWith",value:"EndsWith"},{text:"Contains",value:"Contains"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],NumberMenuOptions:[{text:"LessThan",value:"LessThan"},{text:"GreaterThan",value:"GreaterThan"},{text:"LessThanOrEqual",value:"LessThanOrEqual"},{text:"GreaterThanOrEqual",value:"GreaterThanOrEqual"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],PredicateAnd:"AND",PredicateOr:"OR",Filter:"Filter",FilterMenuCaption:"Filter Value",FilterbarTitle:"'s filter bar cell",MatchCase:"Match Case",Clear:"Clear",ResponsiveFilter:"Filter",ResponsiveSorting:"Sort",Search:"Search",DatePickerWaterMark:"Select date",EmptyDataSource:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",ForeignKeyAlert:"The updated value should be a valid foreign key value",True:"true",False:"false",UnGroup:"Click here to ungroup",AddRecord:"Add Record",EditRecord:"Edit Record",DeleteRecord:"Delete Record",Save:"Save",Grouping:"Group",Ungrouping:"Ungroup",SortInAscendingOrder:"Sort In Ascending Order",SortInDescendingOrder:"Sort In Descending Order",NextPage:"Next Page",PreviousPage:"Previous Page",FirstPage:"First Page",LastPage:"Last Page",EmptyRowValidationMessage:"Atleast one field must be updated",NoResult:"No Matches Found"}}(jQuery,Syncfusion);var e=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};!function(t){var i,l=function(i){function l(e,l){return i.call(this),this._rootCSS="e-heatmap",this._grid=null,this.PluginName="ejHeatMap",this._setFirst=!1,this.id="null",this.model=null,this.validTags=["div"],this.defaults={itemsSource:null,itemsMapping:{itemsSource:null,columnStyle:{headerTemplateID:"",templateID:"",textAlign:"",width:null},headerMapping:{columnStyle:{headerTemplateID:"",templateID:"",textAlign:"",width:null},displayName:"",propertyName:""},column:{displayName:"",propertyName:""},columnMapping:null,row:{displayName:"",propertyName:""},value:{displayName:"",propertyName:""}},colorMappingCollection:null,selectedItem:null,legendCollection:[],heatMapCell:{showContent:"visible",showColor:!0},cellMouseOver:null,cellMouseEnter:null,cellMouseLeave:null,cellSelected:null,create:null,destroy:null,isResponsive:!1,enableVirtualization:!1,enableRTL:!1,defaultColumnStyle:{textAlign:"center",headerTemplateID:"",templateID:""},enableTooltip:!1,tooltipSettings:{templateId:null,position:{stem:{horizontal:"left",vertical:"center"},target:{horizontal:"right",vertical:"center"}},isBalloon:!0,animation:{effect:"none",speed:0},associate:"mouseFollow",trigger:"hover"},width:null,height:null},this.observables=["heatMapCell.showContent","heatMapCell.showColor"],this.dataTypes={colorMappingCollection:"data",itemsMapping:{columnMapping:"data"},itemsSource:"data",legendCollection:"data"},this._tags=[{tag:"colorMappingCollection",attr:["value","color","label.bold","label.italic","label.text","label.textDecoration","label.fontSize","label.fontFamily","label.fontColor"],singular:"colorMapping"}],this._heatmapShowContent=ej.util.valueFunction("heatMapCell.showContent"),this._heatmapShowColor=ej.util.valueFunction("heatMapCell.showColor"),e&&(e.jquery||(e=t("#"+e)),e.length)?t(e).ejHeatMap(l).data(this.PluginName):void 0}return e(l,i),l.prototype.setModel=function(e,t){this.setModel(e,t)},l.prototype._destroy=function(){this.element.removeClass("e-heatmap e-js e-grid").empty()},l.prototype._setModel=function(e){var i,l,o=!1,s=this._grid;if(s){for(i in e)switch(i){case"colorMappingCollection":e.colorMappingCollection&&e.colorMappingCollection.length>0&&(this.model.colorMappingCollection=e.colorMappingCollection,o=!0);break;case"itemsSource":e.itemsSource&&(this.model.itemsSource=e.itemsSource,l=void 0,l=this.model.itemsMapping&&this.model.itemsMapping.column&&this.model.itemsMapping.row?this._bindCellMapValues():this._bindTableMapValues(),s.dataSource(l.dataTableMapping,!1),o=!0);break;case"legendCollection":e.legendCollection&&e.legendCollection>0&&(this.model.legendCollection=e.legendCollection);break;case"heatMapCell":case"heatmapCell":e.heatmapCell&&(void 0!=e.heatmapCell.showContent&&(e.heatMapCell.showContent=e.heatmapCell.showContent),void 0!=e.heatmapCell.showColor&&(e.heatMapCell.showColor=e.heatmapCell.showColor)),e.heatMapCell&&(e.heatMapCell.showColor&&("boolean"==typeof e.heatMapCell.showColor()?this._heatmapShowColor(e.heatMapCell.showColor()):this.model.heatMapCell.showColor=e.heatMapCell.showColor||!1===e.heatMapCell.showColor?e.heatMapCell.showColor:this.model.heatMapCell.showColor),e.heatMapCell.showContent&&("function"==typeof e.heatMapCell.showContent()?this._heatmapShowContent(e.heatMapCell.showContent()):this.model.heatMapCell.showContent=e.heatMapCell.showContent||!1===e.heatMapCell.showContent?e.heatMapCell.showContent:this.model.heatMapCell.showContent),o=!0);break;case"tooltipSettings":case"enableTooltip":void 0!=e.enableTooltip&&(this.model.enableTooltip=e.enableTooltip),e.tooltipSettings&&(e.tooltipSettings.position&&(this.model.tooltipSettings.position=e.tooltipSettings.position),void 0!=e.tooltipSettings.isBalloon&&(this.model.tooltipSettings.isBalloon=e.tooltipSettings.isBalloon),e.tooltipSettings.animation&&(this.model.tooltipSettings.animation=e.tooltipSettings.animation),e.tooltipSettings.associate&&(this.model.tooltipSettings.associate=e.tooltipSettings.associate),e.tooltipSettings.trigger&&(this.model.tooltipSettings.trigger=e.tooltipSettings.trigger),void 0!==e.tooltipSettings.templateId&&null!==e.tooltipSettings.templateId&&(this.model.tooltipSettings.templateId=e.tooltipSettings.templateId)),this._hasClass(this.element[0],"e-tooltip")&&(t("#"+this.element[0].id).data("ejTooltip").destroy(),this.element.addClass("e-js")),this._renderTooltip()}o&&(s.refreshContent(),this._updateResponsiveSize(s))}},l.prototype._hasClass=function(e,t){for(var i=e.classList,l=0;l<i.length;l++)if(i[l]==t)return!0},l.prototype._init=function(){this._getSpace();this._initData(),this._updateDataSource(),this._wireEvents(),this._renderMapGrid(),this._renderTooltip()},l.prototype._wireEvents=function(){this._on(t(window),"resize",this._updateResponsiveSize),this._on(t(window),"load",this._updateResponsiveSize),t(window).bind("mousewheel DOMMouseScroll",t.proxy(this._hideLegendMarker,this))},l.prototype._hideLegendMarker=function(){for(var e=t(".gradient_scale_marker"),i=0;e.length>0&&i<e.length;i++)e[i]&&(e[i].style.visibility="hidden")},l.prototype._getBoundingClientRect=function(e){var i=e.getBoundingClientRect();return"msie"===ej.browserInfo().name&&"8.0"===ej.browserInfo().version&&(i={left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:t(e).width(),height:t(e).height()}),i},l.prototype._getSpace=function(){this._getBoundingClientRect(this.element[0])},l.prototype._initData=function(){"string"==typeof this.model.legendCollection&&(this.model.legendCollection=JSON.parse(this.model.legendCollection)),this._updateHeatMapCellData(this.model),this.model.enableTooltip&&this.model.tooltipSettings&&!this.model.tooltipSettings.templateId&&(this.model.tooltipSettings.templateId=this.element[0].id+"_DefaultTooltipDiv")},l.prototype._updateHeatMapCellData=function(e){e&&e.heatmapCell&&(void 0!=e.heatmapCell.showContent&&(this.model.heatMapCell.showContent=e.heatmapCell.showContent),void 0!=e.heatmapCell.showColor&&(this.model.heatMapCell.showColor=e.heatmapCell.showColor))},l.prototype._updateDataSource=function(){},l.prototype._bindTableMapValues=function(){var e,t,i,l,o,s,n=[],r=[];if(this.model.itemsSource&&this.model.itemsSource.length>0)for(e=this.model.itemsSource,s=0;s<e.length;s++)n.push(e[s]);for(i=(t=this.model.itemsMapping.headerMapping).columnStyle,i=this._mergeDefaultSettings(i,!0),l=!0,l=!this.model.enableVirtualization&&l,t&&r.push({field:t.propertyName,headerText:t.displayName,isFrozen:l,width:i&&i.width?i.width:null,textAlign:i&&i.textAlign?i.textAlign:"center",headerTemplateID:i&&i.headerTemplateID?i.headerTemplateID:"",templateID:i&&i.templateID?i.templateID:""}),o=this.model.itemsMapping.columnMapping,s=0;o&&s<o.length;s++)i=o[s].columnStyle,i=this._mergeDefaultSettings(i,!1),r.push({field:o[s].propertyName,headerText:o[s].displayName,width:i&&i.width?i.width:null,textAlign:i&&i.textAlign?i.textAlign:"center",headerTemplateID:i&&i.headerTemplateID?i.headerTemplateID:"",templateID:i&&i.templateID?i.templateID:""});return{dataTableMapping:n,columns:r}},l.prototype._renderMapGrid=function(){var e,i,l,o;e=this.model.itemsMapping&&this.model.itemsMapping.column&&""!=this.model.itemsMapping.column.propertyName&&this.model.itemsMapping.row&&""!=this.model.itemsMapping.row.propertyName?this._bindCellMapValues():this._bindTableMapValues(),null===this.model.height&&delete this.model.height,null===this.model.width&&delete this.model.width,e&&t("#"+this.element[0].id)[0]&&(i=ej.HeatMapGrid({},this),l={height:void 0!==this.model.height?this.model.height-40:"auto",width:void 0!==this.model.width?Number(this.model.width):"100%",allowVirtualScrolling:!!this.model.enableVirtualization,virtualScrollMode:"normal",enableVirtualization:!!this.model.enableVirtualization},void 0===this.model.width&&delete l.width,o={dataSource:e.dataTableMapping?e.dataTableMapping:[],columns:e.columns?e.columns:[],enableRowHover:!1,allowScrolling:!0,selectionSettings:{selectionMode:[ej.HeatMapGrid.SelectionMode.Cell]},queryCellInfo:t.proxy(this._setBinding,this),cellSelected:t.proxy(this._cellSelected,this),isResponsive:!!this.model.isResponsive&&this.model.isResponsive,enableResponsiveRow:!1,scrollSettings:l,minWidth:10,enableRTL:!!this.model.enableRTL&&this.model.enableRTL},i._init(t("#"+this.element[0].id),o,this),this._updateResponsiveSize(i))},l.prototype._updateResponsiveSize=function(e){var i,l,o,s,n,r,a,d;if(this.model.isResponsive){if(i=t(".e-movableheaderdiv"),l=t(".e-movablecontentdiv"),i.css("width","100%"),l.css("width","100%"),i[0]&&((o=i[0].getElementsByTagName("colgroup")[0])&&o.childNodes&&o.childNodes.length>0))for(n=0;this.model.itemsMapping.columnMapping&&n<this.model.itemsMapping.columnMapping.length;n++)!(r=this.model.itemsMapping.columnMapping[n])||r.columnStyle&&r.columnStyle.width||(a=t(o.childNodes[n]))&&a[0]&&(a[0].style.width="");if(l[0]&&((s=l[0].getElementsByTagName("colgroup")[0])&&s.childNodes&&s.childNodes.length>0))for(n=0;this.model.itemsMapping.columnMapping&&n<this.model.itemsMapping.columnMapping.length;n++)!(r=this.model.itemsMapping.columnMapping[n])||r.columnStyle&&r.columnStyle.width||(a=t(s.childNodes[n]))&&a[0]&&(a[0].style.width="");e&&e._refreshScroller&&((d=t(this.element).find(".e-scrollbar")[0])&&(this.model.enableVirtualization||d.parentNode.removeChild(d),e._initScrolling()))}},l.prototype._cellSelected=function(e){this.model.selectedItem={cellValue:e.currentCell[0].ejHeatMapData.cellValue,source:e.currentCell[0].ejHeatMapData.data,cell:e.currentCell[0]},this._raiseEvent("cellSelected",{cellValue:e.currentCell[0].ejHeatMapData.cellValue,source:this._getTableData(e.currentCell[0].ejHeatMapData),cell:e.currentCell[0]})},l.prototype._componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},l.prototype._rgbToHex=function(e,t,i){return isNaN(e)&&isNaN(t)&&isNaN(i)?"":"#"+this._componentToHex(e)+this._componentToHex(t)+this._componentToHex(i)},l.prototype._setBinding=function(e){var i,l=t(e.cell),o=this._convertToRBG(ej.parseFloat(ej.format(e.text,"c")),this.model.colorMappingCollection),s=this._rgbToHex(o.R,o.G,o.B),n=this.model.itemsMapping.columnStyle&&this.model.itemsMapping.columnStyle[e.column.field]?this.model.itemsMapping.columnStyle[e.column.field]:null;void 0!=this._heatmapShowColor()&&(e.column.field&&n&&n.fillColor?(i=this._getForeGroundColor(n.fillColor),l.css("background-color",n.fillColor).css("color",i||"black")):(!1===this._heatmapShowColor()?l.css("background-color","white"):(i=this._getForeGroundColor(o),l.css("background-color",s).css("color",i||"")),this._setClassOnForzen(e.cell)&&0===l.index()&&l.css("font-weight","normal").css("font-size",12))),this._canEnableContent(e)&&(l[0].innerHTML="&nbsp;"),this._bindHoverOutEvents(e,s),this.model.itemsMapping.headerMapping&&e.column.field&&this.model.itemsMapping.headerMapping.propertyName===e.column.field||l.addClass("sf-ht-enabletooltip")},l.prototype._canEnableContent=function(e){if(this._heatmapShowContent()===ej.datavisualization.HeatMap.CellVisibility.Hidden)return!this.model.itemsMapping.headerMapping||!e.column||this.model.itemsMapping.headerMapping.propertyName!==e.column.field},l.prototype._setClassOnForzen=function(e){do{if(e){if(!(e=e.parentNode))break;if("e-movablecontent"===e.className)return!0}}while(e&&"e-gridcontent"!==e.className);return!1},l.prototype._getForeGroundColor=function(e){return void 0!==e.R&&void 0!==e.G&&void 0!==e.B?(e.R+e.G+e.B)/3<127.5?"white":isNaN(e.R)&&isNaN(e.G)&&isNaN(e.B)?"":"black":null},l.prototype._getTableData=function(e){var t,i,l,o,s=e.data;return this.model.itemsMapping&&this.model.itemsMapping.column&&this.model.itemsMapping.row?(t=this.model.itemsMapping.row,i=this.model.itemsMapping.column,e.column.field?(l=e.column.field,(o={})[t.propertyName]=s[t.propertyName],o.value=e.cellValue,o[i.propertyName]=l,o):void 0):e.data},l.prototype._bindHoverOutEvents=function(e,i){t(e.cell).mouseenter(t.proxy(this._cellMouseEnter,this)).mousemove(t.proxy(this._cellMouseHover,this)).mouseleave(t.proxy(this._cellMouseOut,this)),e.cell.ejHeatMapData={column:e.column,cellValue:e.text,data:e.data,rgb:i}},l.prototype._cellMouseOut=function(e){var i,l;for(this._raiseEvent("cellMouseLeave",{cellValue:e.currentTarget.ejHeatMapData.cellValue,source:this._getTableData(e.currentTarget.ejHeatMapData),cell:e.currentTarget}),i=t(".gradient_scale_marker"),l=0;i.length>0&&l<i.length;l++)i[l]&&(i[l].style.visibility="hidden")},l.prototype._cellMouseHover=function(e){this._raiseEvent("cellMouseOver",{cellValue:e.currentTarget.ejHeatMapData.cellValue,source:this._getTableData(e.currentTarget.ejHeatMapData),cell:e.currentTarget})},l.prototype._cellMouseEnter=function(e){var i,l,o,s;if(this.model.legendCollection.length>0)for(i=0,l=null;i<this.model.legendCollection.length;i++)(o=this.model.legendCollection[i])&&t("#"+o)[0]&&((s=t("#"+o).data("ejHeatMapLegend"))&&(e.currentTarget.ejHeatMapData&&(l=e.currentTarget.ejHeatMapData.cellValue),l&&s.model.legendMode===ej.datavisualization.HeatMap.LegendMode.Gradient.toString()&&(l=Number(l),this.model.itemsMapping.headerMapping&&e.currentTarget.ejHeatMapData&&e.currentTarget.ejHeatMapData.column.field&&this.model.itemsMapping.headerMapping.propertyName===e.currentTarget.ejHeatMapData.column.field?this._hideLegendMarker():this._drawLegendMarker(s,l))));this._raiseEvent("cellMouseEnter",{cellValue:e.currentTarget.ejHeatMapData.cellValue,source:this._getTableData(e.currentTarget.ejHeatMapData),cell:e.currentTarget})},l.prototype._raiseEvent=function(e,t){if(this.model[e])return this._trigger(e,t)},l.prototype._drawDefaultTooltip=function(e){var t=document.getElementById(this.element[0].id+"_DefaultTooltipDiv");return t||(t=this._createDefaultTooltip(e)),t},l.prototype._createDefaultTooltip=function(e){var t,i,l,o=document.createElement("div");return{id:this.element[0].id+"_DefaultTooltipDiv",class:"e-heatmap-tooltip-default",style:"padding-top:3px; height: 24px;pointer-events:none;position: absolute"},""==(t=this.model.itemsMapping.headerMapping&&this.model.itemsMapping.headerMapping.displayName?this.model.itemsMapping.headerMapping.displayName:"")&&(t=this.model.itemsMapping.row&&this.model.itemsMapping.row.displayName?this.model.itemsMapping.headerMapping.displayName:""),e.event.currentTarget&&e.event.currentTarget.ejHeatMapData&&this.model.itemsMapping.headerMapping&&this.model.itemsMapping.headerMapping.propertyName&&(l=(i=e.event.currentTarget&&e.event.currentTarget.ejHeatMapData).data[this.model.itemsMapping.headerMapping.propertyName]),o.innerHTML="<table><tr><td style='min-width:50px;padding-right: 10px;'>"+t+"</td><td>"+l+"</td></tr><tr><td>Value</td><td>"+i.cellValue+"</td></tr></table>",o},l.prototype._renderTooltip=function(){var e=this;e.model.enableTooltip&&t("#"+this.element[0].id).ejTooltip({target:".sf-ht-enabletooltip",position:this.model.tooltipSettings.position,isBalloon:this.model.tooltipSettings.isBalloon,animation:this.model.tooltipSettings.animation,associate:this.model.tooltipSettings.associate,trigger:this.model.tooltipSettings.trigger,beforeOpen:function(i){if(e.model.enableTooltip)if(t("#"+e.element[0].id).ejTooltip("instance").hide(),i.event.currentTarget&&i.event.currentTarget.ejHeatMapData&&e.model.tooltipSettings.templateId!=this.element[0].id+"_DefaultTooltipDiv")t("#"+e.element[0].id).ejTooltip({content:t.templates("#"+e.model.tooltipSettings.templateId).render(i.event.currentTarget.ejHeatMapData)});else{var l=e._drawDefaultTooltip(i);t("#"+e.element[0].id).ejTooltip({content:t.templates(l).render(i.event.currentTarget.ejHeatMapData)})}}})},l.prototype._drawLegendMarker=function(e,i){var l,o,s;if(e&&void 0!==i&&!isNaN(i)){if(l=t("#"+e._id+"_gradient_scale")[0]){o="position:absolute;visibility:visible;box-sizing:border-box;",(s=t("#"+e._id+"_gradient_scale_marker")[0])||((s=document.createElement("div")).setAttribute("id",e._id+"_gradient_scale_marker"),s.setAttribute("class","gradient_scale_marker"),l.appendChild(s));var n=this._getBoundingClientRect(l),r=this._getBoundingClientRect(s),a=this._getScroll(),d=this.model.colorMappingCollection,h=d[d.length-1].value;o+="horizontal"===e.model.orientation?"width: 0;height: 0;border-left:"+n.height/2+"px solid transparent;border-right: "+n.height/2+"px solid transparent;border-bottom: "+n.height+"px solid green;":"border-left: none;border-right: "+n.width+"px solid green;border-bottom: "+n.width/2+"px solid transparent;border-top: "+n.width/2+"px solid transparent;";d[0].value;var c=d[d.length-1].value;"horizontal"===e.model.orientation?(o+=this.model.enableRTL?"left:"+(Math.round(n.left+a.x-r.width/2+1)+(Number(100*(c-i)/h)/100*n.width-3))+"px;":"left:"+(Math.round(n.left+a.x-r.width/2+1)+(Number(100*i/h)/100*n.width-3))+"px;",o+="top:"+(n.top+a.y+2)+"px;"):(o+="left:calc("+(n.left+a.x)+"px + 0px);",o+=this.model.enableRTL?"top: calc( "+Math.round(n.top+a.y-r.height/2+1)+"px + "+(Number(100*(c-i)/h)/100*n.height-3)+"px);":"top: calc( "+Math.round(n.top+a.y-r.height/2+1)+"px + "+(Number(100*i/h)/100*n.height-3)+"px);"),s.setAttribute("style",o)}}else this._hideLegendMarker()},l.prototype._getScroll=function(){if(void 0!==window.pageYOffset)return{x:pageXOffset||0,y:pageYOffset||0};var e,t,i=document,l=i.documentElement,o=i.body;return e=l.scrollLeft||o.scrollLeft||0,t=l.scrollTop||o.scrollTop||0,{x:e||0,y:t||0}},l.prototype._convertToRBG=function(e,t){var i,l,o,s,n,r=0;"number"==typeof e&&(r=Number(e));var a=0,d=0;for(t=this._orderbyOffset(t),i=0;i<t.length;i++)if(void 0!==(l=Number(t[i].value))){if(r<=l){d=l;break}d=l,a=l}return o=0,void 0!==a?(o=(r-a)/(d-a),o=isNaN(o)&&0===r?0:o):a=d,s=this._getEqualColor(t,a),n=this._getEqualColor(t,d),this._getPercentageColor(o,s,n)},l.prototype._hashCode=function(e){for(var t=0,i=0;i<e.length;i++)t=e.charCodeAt(i)+((t<<5)-t);return t},l.prototype._intToRGB=function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t},l.prototype._getPercentageColor=function(e,t,i){var l,o,s=i,n=t;return s.split("#").length>1?l=s.split("#")[1]:l=this._intToRGB(this._hashCode(s)),o=null,n.split("#").length>1?o=n.split("#")[1]:o=this._intToRGB(this._hashCode(n)),{R:this._getPercentage(e,parseInt(o.substr(0,2),16),parseInt(l.substr(0,2),16)),G:this._getPercentage(e,parseInt(o.substr(2,2),16),parseInt(l.substr(2,2),16)),B:this._getPercentage(e,parseInt(o.substr(4,2),16),parseInt(l.substr(4,2),16))}},l.prototype._getPercentage=function(e,t,i){var l=i-t;return Math.round(t+l*e)},l.prototype._getEqualColor=function(e,t){for(var i,l=0;l<e.length;l++)if((i=e[l])&&Number(i.value)===t)return i.color;return"#00000"},l.prototype._orderbyOffset=function(e){for(var t,i,l,o=0;o<e.length-1;o++)i=e[o],l=e[o+1],i&&l&&i.value&&l.value&&i.value>l.value&&(t=i,i=l,l=t);return e},l.prototype._mergeDefaultSettings=function(e,i){var l,o;return e&&(l=void 0===e.width),o=t.extend(!0,{},this.model.defaultColumnStyle,e),i&&this.model.enableRTL&&(o.textAlign=!e||e&&!e.textAlign?"right":e.textAlign),l&&delete o.width,o},l.prototype._bindCellMapValues=function(){var e,t,i=[],l={prLeft:this.model.itemsMapping.row.propertyName,prTop:this.model.itemsMapping.column.propertyName,prValue:this.model.itemsMapping.value.propertyName},o=this._convertToCellBindingData(this.model.itemsSource,l),s=this.model.itemsMapping.row,n=(this.model.itemsMapping.column,this._getCellBingingColumnData(s.propertyName,!0));for(n=this._mergeDefaultSettings(n,!1),s&&(e=!0,e=!this.model.enableVirtualization&&e,i.push({field:s.propertyName,headerText:s.displayName,isFrozen:e,width:n&&n.width?n.width:null,textAlign:n&&n.textAlign?n.textAlign:"center",headerTemplateID:n&&n.headerTemplateID?n.headerTemplateID:"",templateID:n&&n.templateID?n.templateID:""})),t=0;t<o.items.length;t++)n=this._getCellBingingColumnData(o.items[t],!1),n=this._mergeDefaultSettings(n,!1),i.push({field:o.items[t],headerText:o.items[t],width:n&&n.width?n.width:null,textAlign:n&&n.textAlign?n.textAlign:"center",headerTemplateID:n&&n.headerTemplateID?n.headerTemplateID:"",templateID:n&&n.templateID?n.templateID:""});return{dataTableMapping:o.dataTableMapping,columns:i}},l.prototype._getCellBingingColumnData=function(e,t){var i,l,o,s;if(t){if((i=this.model.itemsMapping&&this.model.itemsMapping.headerMapping).propertyName===e)return this._mergeColumnStyle(i.columnStyle,!0)}else if((l=this.model.itemsMapping&&this.model.itemsMapping.columnMapping)&&l.length>0)for(o=0;o<l.length;o++)if((s=this._mergeDefaultSettings(l[o],!1)).propertyName===e)return this._mergeColumnStyle(s.columnStyle,!1);return null},l.prototype._mergeColumnStyle=function(e,i){return e=this._mergeDefaultSettings(e,i),t.extend(!0,{},{textAlign:e&&e.textAlign?e.textAlign:"center"},e)},l.prototype._convertToCellBindingData=function(e,t){for(var i,l,o,s,n,r,a=[],d=[],h=0;h<e.length;h++)if((i=e[h])&&(l={},i[t.prLeft]))if(0===a.length)o=!1,l.hasOwnProperty(i[t.prLeft])||(l[t.prLeft]=i[t.prLeft],a.push(l),o=!0),o&&(l[i[t.prTop].toString()]=i[t.prValue]);else{for(o=!1,s=0;s<a.length;s++)(n=a[s])&&n[t.prLeft]===i[t.prLeft]&&(n[i[t.prTop]]=i[t.prValue],-1===d.indexOf(i[t.prTop])&&d.push(i[t.prTop].toString()),o=!0);o||(r=!1,l.hasOwnProperty(i[t.prLeft])||(l[t.prLeft]=i[t.prLeft],a.push(l),r=!0),r&&(l[i[t.prTop].toString()]=i[t.prValue],-1===d.indexOf(i[t.prTop])&&d.push(i[t.prTop].toString())))}return{dataTableMapping:a,items:d}},l}(ej.WidgetBase);window.ej.widget("ejHeatMap","ej.datavisualization.HeatMap",new l),ej.datavisualization.HeatMap.CellVisibility={Visible:"visible",Hidden:"hidden"},ej.datavisualization.HeatMap.Effect={Slide:"slide",Fade:"fade",None:"none"},ej.datavisualization.HeatMap.Trigger={Hover:"hover",Click:"click"},ej.datavisualization.HeatMap.Associate={MouseFollow:"mouseFollow",MouseEnter:"mouseEnter",Target:"target"},ej.datavisualization.HeatMap.Horizontal={Left:"left",Center:"center",Right:"right"},ej.datavisualization.HeatMap.Vertical={Top:"top",Center:"center",Bottom:"bottom"},ej.datavisualization.HeatMap.TextAlign={Right:"right",Left:"left",Center:"center"},ej.datavisualization.HeatMap.LegendMode={Gradient:"gradient",List:"list"},ej.datavisualization.HeatMap.LegendOrientation={Horizontal:"horizontal",Vertical:"vertical"},ej.datavisualization.HeatMap.TextDecorations={Underline:"underline",Overline:"overline",LineThrough:"line-through",None:"none"},i=function(i){function l(e,l){return i.call(this),this.defaults={colorMappingCollection:null,orientation:ej.datavisualization.HeatMap.LegendOrientation.Horizontal,showLabel:!0,legendMode:"gradient",height:null,width:null,isResponsive:!1,enableRTL:!1,create:null,destroy:null},this.validTags=["div"],this._rootCSS="e-heatmaplegend",this._id="",this.setFirst=!1,this.PluginName="ejHeatMapLegend",this.id="null",this.model=null,this.dataTypes={colorMappingCollection:"data"},this._tags=[{tag:"colorMappingCollection",attr:["value","color","label.bold","label.italic","label.text","label.textDecoration","label.fontSize","label.fontFamily","label.fontColor"],singular:"colorMapping"}],e&&(e.jquery||(e=t("#"+e)),e.length)?t(e).ejHeatMapLegend(l).data(this.PluginName):void 0}return e(l,i),l.prototype._init=function(){this._initLegendData(),this._wireEvents(),this._renderLegend()},l.prototype._setLabel=function(e){var t=e||{};return t.bold=!(!t||void 0===t.bold)&&t.bold,t.italic=!(!t||void 0===t.italic)&&t.italic,t.text=t&&t.text?t.text:"",t.textDecoration=t&&t.textDecoration?t.textDecoration:ej.datavisualization.HeatMap.TextDecorations.None,t.fontSize=t&&t.fontSize?t.fontSize:10,t.fontFamily=t&&t.fontFamily?t.fontFamily:"Arial",t.fontColor=t&&t.fontColor?t.fontColor:"black",t},l.prototype._initLegendData=function(){this.model.colorMappingCollection=this._getSortedMappingList(this.model.colorMappingCollection);for(var e=0;e<this.model.colorMappingCollection.length;e++)this.model.colorMappingCollection[e].label=this._setLabel(this.model.colorMappingCollection[e].label)},l.prototype._wireEvents=function(){this._on(t(window),"resize",this._updateLegendSize),t(this.element[0].parentNode).scroll(t.proxy(this._hideLegendMarker,this))},l.prototype._hideLegendMarker=function(){for(var e=t(".gradient_scale_marker"),i=0;i<e.length;i++)e[i]&&e[i].parentNode&&e[i].parentNode.removeChild(e[i])},l.prototype._scrollElement=function(){var e=t("#"+this._id+"_gradient_scale_marker")[0];e&&e.parentNode.removeChild(e)},l.prototype._getLargerGradientLabel=function(){for(var e,t,i,l={left:0,top:0,width:0,height:0},o=this.model.colorMappingCollection,s=0;o&&s<o.length;s++)e=o[s],t=document.createElement("span"),this.element[0].appendChild(t),this._mergeLabelProperties(t,e),e.label&&(i=this._getBoundingClientRect(t),l=this._union(l,i)),t.parentNode.removeChild(t);return l},l.prototype._getBoundingClientRect=function(e){var i=e.getBoundingClientRect();return"msie"===ej.browserInfo().name&&"8.0"===ej.browserInfo().version&&(i={left:i.left<0?0:i.left,top:i.top<0?0:i.top,right:i.right<0?0:i.right,bottom:i.bottom<0?0:i.bottom,width:t(e).outerWidth(),height:t(e).outerHeight()}),{left:i.left<0?0:i.left,top:i.top<0?0:i.top,right:i.right<0?0:i.right,bottom:i.bottom<0?0:i.bottom,width:i.width,height:i.height}},l.prototype._getSpace=function(){var e=this._getLargerGradientLabel(),t=this._getBoundingClientRect(this.element[0]);return t={bottom:t.bottom,height:t.height-(e.height/2+2),left:t.left,right:t.right,top:t.top,width:this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal?t.width-10:t.width},this.model.legendMode===ej.datavisualization.HeatMap.LegendMode.Gradient&&(this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal?t.width=t.width-e.width/2:t.height=t.height-e.height/2),t},l.prototype._renderLegend=function(){var e,i,l,o=t("#"+this.element[0].id)[0];o&&(t("div."+this.element[0].id).find("*").removeAttr("style"),t("#"+this.element[0].id).empty()),e=this.model.height?this.model.height:"100%",i=this.model.width?this.model.width:"100%",t("#"+this.element[0].id).attr("data-role","heatmap-legend").css("height",e).css("width",i).css("overflow","hidden"),l=this._getSpace(null),this.model.legendMode===ej.datavisualization.HeatMap.LegendMode.Gradient?this._renderGradient(l,o,null):this._renderList(l,o,null)},l.prototype._mergeLabelProperties=function(e,t){if(e&&t&&t.label){var i=t.label;i&&(e.innerHTML="gradient"!==this.model.legendMode&&i.text?i.text:t.value,e.style.fontFamily=i.fontFamily,e.style.fontSize=i.fontSize+"px",e.style.fontColor=i.fontColor,e.style.textDecoration=i.textDecoration,e.style.fontWeight=i.bold?"bold":"",e.style.fontStyle=i.italic?"italic":"")}},l.prototype._union=function(e,t){var i=Math.min(e.left,t.left),l=Math.min(e.top,t.top);return{left:i,top:l,width:Math.max(e.width,t.width)-i,height:Math.max(e.height,t.height)-l}},l.prototype._updateLegendSize=function(e){if(this.model.isResponsive){this.model.height&&this.model.height,this.model.width&&this.model.width;var i=t("#"+this.element[0].id)[0],l=this._getSpace(!0);this.model.legendMode===ej.datavisualization.HeatMap.LegendMode.Gradient?this._renderGradient(l,i,e):this._renderList(l,i,e)}},l.prototype._renderListBox=function(e,i,l,o,s,n){var r,a,d,h,c,u=t("#"+i)[0];u||((u=document.createElement("div")).setAttribute("id",i),this.model.enableRTL?t(e).prepend(u):e.appendChild(u),u.setAttribute("style","height:auto;height:auto;float:left;vertical-align: middle;")),u.setAttribute("data-role","list"),(a=t("#"+u.id+"_colordiv_")[0])||((a=document.createElement("div")).setAttribute("id",u.id+"_colordiv_"),u.appendChild(a)),r="background-color:"+l.color+";",a.setAttribute("style",r+"height:"+s+"px;width:"+o+"px;float:left"),this.model.showLabel&&(d=this._getBoundingClientRect(u),(h=t("#"+u.id+"_labelSpan_")[0])||((h=document.createElement("span")).setAttribute("id",u.id+"_labelSpan_"),h.setAttribute("aria-label","label"),h.setAttribute("class","sf-ht-label"),h.innerHTML=l.label&&l.label.text?l.label.text:l.value,u.appendChild(h)),h.setAttribute("style","float:left;margin-left:3px;margin-right:3px;margin-right:3px;margin-bottom:3px;"),this._mergeLabelProperties(h,l),c=this._getBoundingClientRect(h),h.style.marginTop=d.height/2-c.height/2+"px"),this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal?u.style.margin="10px":(!n||this.model.enableRTL)&&(t("#"+u.id+"_colordiv_br")[0]||t(u).after("<div id="+u.id+"_colordiv_br> </br></br></div> "))},l.prototype._renderList=function(e,i,l){var o,s,n,r=t("#"+i.id+"_list")[0];for(r?l&&(r.innerHTML=""):((r=document.createElement("div")).setAttribute("id",i.id+"_list"),i.appendChild(r),r.setAttribute("style","height:auto;height:auto;float:left;")),o=this.model.colorMappingCollection,s=0;s<o.length;s++)this._renderListBox(r,i.id+"_listBox_"+s,o[s],15,15,s===o.length-1);var a=this._getBoundingClientRect(i),d=this._getBoundingClientRect(r),h=a.width/2-d.width/2;r.style.marginLeft=h<=0?"0px":h+"px",n=a.height/2-d.height/2,r.style.marginTop=n<=0?"0px":n+"px"},l.prototype._setAttribute=function(e,t){if(e)for(var i in t)e.setAttribute(i,t[i])},l.prototype._renderGradient=function(e,i,l){var o,s,n,r,a=t("#"+this.element[0].id+"_gradient_scale_line")[0];a||(a=document.createElement("div"),i.appendChild(a)),o="horizontal"===this.model.orientation?"":"float:left;",o+=this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal?"height:"+(.4*e.height+.2*e.height)+"px;width:"+e.width+"px; ":"height:"+e.height+"px;width:"+(.4*e.width+.2*e.width)+"px;",s=this._getStartlabelOffset(),o+="horizontal"===this.model.orientation?"padding-left:"+s.width+"px;":"padding-top:"+(s.height/2-1)+"px;",a.setAttribute("style",o),this._setAttribute(a,{id:"#"+this.element[0].id+"_gradient_scale_line"}),a.setAttribute("style",o),(n=t("#"+this.element[0].id+"_gradient")[0])?l&&(n.innerHTML=""):(n=document.createElement("div"),a.appendChild(n)),this._setAttribute(n,{id:this.element[0].id+"_gradient","data-role":"gradient"}),r="float:left; ",this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal?r+="height:"+(.4*e.height-2)+"px; width:"+e.width+"px; ":("to bottom , ",r+="height:"+e.height+"px;width:"+(.4*e.width-2)+"px;"),n.setAttribute("style",r),this._renderGradientElements(n),this._renderGradientScale(e,a,l),this._renderGradientScaleValue(e,i,l)},l.prototype._renderGradientElements=function(e){var i,l,o,s,n=this.model.colorMappingCollection,r=(Number(n[0].value),n.length),a=Number(n[n.length-1].value);if(r>0){var d=0,h=0,c=this._getBoundingClientRect(e);for(i=1;n&&i<r;i++){var u="float:left;border:none;",p=t("#"+this.element[0].id+"_inner_gradient"+i)[0],g=this._childElementsBounds(e).width?this._childElementsBounds(e).width:0;p||(p=document.createElement("div"),this.model.enableRTL?t(e).prepend(p):e.appendChild(p)),"horizontal"===this.model.orientation?(l=100*n[i].value/a,o=c.width*(l/100)-d,i===r-1&&(o=c.width-g-1),u+="height:100%;width:"+o+"px;",u+=this.model.enableRTL?"msie"===ej.browserInfo().name&&"8.0"===ej.browserInfo().version||"9.0"===ej.browserInfo().version?"filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="+n[i].color+", endColorstr="+n[i-1].color+",GradientType=1 );":"background:linear-gradient(to right ,"+n[i].color+", "+n[i-1].color+");":"msie"===ej.browserInfo().name&&"8.0"===ej.browserInfo().version||"9.0"===ej.browserInfo().version?"filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="+n[i-1].color+", endColorstr="+n[i].color+",GradientType=1 );":"background:linear-gradient(to right ,"+n[i-1].color+", "+n[i].color+");"):(s=100*n[i].value/a,u+="width:100%;height:"+(c.height*(s/100)-h)+"px;",u+=this.model.enableRTL?"msie"===ej.browserInfo().name&&"8.0"===ej.browserInfo().version||"9.0"===ej.browserInfo().version?"filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="+n[i].color+", endColorstr="+n[i-1].color+",GradientType=0 );":"background:linear-gradient(to bottom ,"+n[i].color+", "+n[i-1].color+");":"msie"===ej.browserInfo().name&&"8.0"===ej.browserInfo().version||"9.0"===ej.browserInfo().version?"filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="+n[i-1].color+", endColorstr="+n[i].color+",GradientType=0 );":"background:linear-gradient(to bottom ,"+n[i-1].color+", "+n[i].color+");"),this._setAttribute(p,{id:this.element[0].id+"_inner_gradient"+i,style:u}),d=this._childElementsBounds(e).width,h=this._childElementsBounds(e).height}}},l.prototype._getStartlabelOffset=function(){var e,t,i=document.createElement("span");return this.element[0].appendChild(i),e=this.model.colorMappingCollection[0],this._mergeLabelProperties(i,e),t=null,e.label&&(t=this._getBoundingClientRect(i)),i.parentNode.removeChild(i),t},l.prototype._renderGradientScaleValue=function(e,i,l){var o,s,n=t("#"+this.element[0].id+"_gradient_scale_value")[0];n?l&&(n.innerHTML=""):(n=document.createElement("div"),i.appendChild(n)),this._setAttribute(n,{id:this.element[0].id+"_gradient_scale_value"}),o="float:left;",o+=this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal?"width: 100%;":"height:100%;width:12px;margin-left:2px;",n.setAttribute("style",o);var r=this.model.colorMappingCollection,a=(this._getBoundingClientRect(n),null),d=this._getStartlabelOffset();if(this.model.enableRTL)for(s=r.length-1;s>=0;s--)a=this._createGradientLabel(e,r[s],n,this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal,s,a,0===s?d.width/2:0,0);else for(s=0;s<r.length;s++)a=this._createGradientLabel(e,r[s],n,this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal,s,a,0===s?d.width/2:0,0)},l.prototype._createGradientLabel=function(e,i,l,o,s,n,r,a){var d,h,c,u;if(this.model.showLabel){d=this._getBoundingClientRect(l),(h=t("#"+this.element[0].id+"_gradient_scale_value"+i.value)[0])||(h=document.createElement("span"),l.appendChild(h)),h.setAttribute("id",this.element[0].id+"_gradient_scale_value"+i.value),c="float:left;",c+="height:auto;",c+="width:auto;",h.setAttribute("style",c),h.innerHTML=i.value,this._mergeLabelProperties(h,i);var p=this._getBoundingClientRect(h),g=this.model.colorMappingCollection,m=(g[g.length-1].value,this._getScroll(),t("#"+this.element[0].id+"_gradient")[0]),f=g[g.length-1].value-g[0].value,_=+f,C=g[0].value,S=0,w=0;return m&&(d=this._getBoundingClientRect(m)),o?c+="position:absolute;left:"+(S=this.model.enableRTL?Math.round(o?(f-(i.value-C))/_*d.width:0):Math.round(o?(i.value-C)/_*d.width:0))+"px;margin-left:"+(d.left-p.width/2)+"px;":c+="position:absolute;top:"+(w=this.model.enableRTL?Math.round((f-(i.value-C))/_*d.height):Math.round((i.value-C)/_*d.height))+"px;margin-top:"+(d.top-p.height/2)+"px;",o?w=0:S=0,h.setAttribute("style",c),h.setAttribute("aria-label","label"),h.setAttribute("class","sf-ht-label"),this._mergeLabelProperties(h,i),{x:S+(u=this._getBoundingClientRect(h)).width+(r?u.width/2:0),y:w+u.height-0+(a?u.height/2:0)}}},l.prototype._renderGradientScale=function(e,i,l){var o,s,n,r=t("#"+this.element[0].id+"_gradient_scale")[0];if(r?l&&(r.innerHTML=""):(r=document.createElement("div"),i.appendChild(r)),this._setAttribute(r,{id:this.element[0].id+"_gradient_scale"}),o="float:left;",o+=this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal?"height:"+.2*e.height+"px; width:"+e.width+"px; margin-top:2px;":"height:"+e.height+"px;width:"+.2*e.width+"px; margin-left:2px",r.setAttribute("style",o),this.model.legendMode===ej.datavisualization.HeatMap.LegendMode.Gradient){var a=this.model.colorMappingCollection;this._getBoundingClientRect(r),a[a.length-1].value;if(this.model.orientation===ej.datavisualization.HeatMap.LegendOrientation.Horizontal)for(s=this._createValueLine(this.element[0].id+"_gradient_scale_first",!0,e,"",r),n=1;n<a.length;n++)s+=this._createSpaceLine(this.element[0].id+n+"space",!0,e,"",r,s,a[n],n,a[n-1]),s+=this._createValueLine(this.element[0].id+n+"value",!0,e,"",r);else for(s=this._createValueLine(this.element[0].id+"_gradient_scale_first",!1,e,"",r),n=1;n<a.length;n++)s+=this._createSpaceLine(this.element[0].id+n+"space",!1,e,"",r,s,a[n],n,a[n-1]),s+=this._createValueLine(this.element[0].id+n+"value",!1,e,"",r)}},l.prototype._childElementsBounds=function(e){var t,i,l=e.childNodes,o={left:0,top:0,right:0,bottom:0,width:0,height:0};if(l.length>0)for(i=0;i<l.length;i++)l[i]&&((t=this._getBoundingClientRect(l[i]))&&(o.width+=t.width,o.height+=t.height));return o},l.prototype._createSpaceLine=function(e,i,l,o,s,n,r,a,d){var h,c,u,p=this._getBoundingClientRect(s),g=(this._childElementsBounds(s),t("#"+e)[0]);g||((g=document.createElement("div")).setAttribute("id",e),this.model.enableRTL?t(s).prepend(g):s.appendChild(g)),h="float:left;border: 1px solid gray; ";var m=this.model.colorMappingCollection,f=+(m[m.length-1].value-m[0].value),_=i?(r.value-d.value)/f*p.width:0;return _-=1===a||a===m.length-1?6:4,c=Math.round(i?0:(r.value-d.value)/f*p.height),c-=1===a||a===m.length-1?6:4,h+="height:"+Math.floor(c)+"px;",h+="width:"+Math.floor(_)+"px;",g.setAttribute("style",h),u=this._getBoundingClientRect(g),i?u.width:u.height},l.prototype._createValueLine=function(e,i,l,o,s){var n,r=this._getBoundingClientRect(s),a=t("#"+e)[0];a||((a=document.createElement("div")).setAttribute("id",e),this.model.enableRTL?t(s).prepend(a):s.appendChild(a));var d="float:left;",h=i?0:r.width;return d+="height:"+(i?r.height:0)+"px;",d+="width:"+h+"px;",d+="border: 1px solid gray; ",o&&(d+=o),a.setAttribute("style",d),n=this._getBoundingClientRect(a),i?n.width:n.height},l.prototype._getScroll=function(){if(void 0!==window.pageYOffset)return{x:pageXOffset||0,y:pageYOffset||0};var e,t,i=document,l=i.documentElement,o=i.body;return e=l.scrollLeft||o.scrollLeft||0,t=l.scrollTop||o.scrollTop||0,{x:e||0,y:t||0}},l.prototype._getSortedMappingList=function(e){var t,i,l;if(e){for(t=0;t<e.length;t++)for(i=t+1;i<e.length;i++)Number(e[t].value)>Number(e[i].value)&&(l=e[t],e[t]=e[i],e[i]=l);return e}},l.prototype._setModel=function(e){var t,i;for(t in e)switch(t){case"colorMappingCollection":for(this.model.colorMappingCollection=e.colorMappingCollection?e.colorMappingCollection:this.model.colorMappingCollection,this.model.colorMappingCollection=this._getSortedMappingList(this.model.colorMappingCollection),i=0;i<this.model.colorMappingCollection.length;i++)this.model.colorMappingCollection[i].label=this._setLabel(this.model.colorMappingCollection[i].label);this._updateLegendSize(!0);break;case"legendMode":this._renderLegend()}},l.prototype._destroy=function(){this.element.removeClass("e-heatmaplegend e-js").empty()},l}(ej.WidgetBase),window.ej.widget("ejHeatMapLegend","ej.datavisualization.HeatMapLegend",new i)}(jQuery)})},1279:function(e,t,i){"use strict";var l=this&&this.__decorate||function(e,t,i,l){var o,s=arguments.length,n=s<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,l);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),n=function(){function e(){this.margin={left:25,right:25};for(var e=[],t=["Vegie-spread","Tofuaa","Alice Mutton","Konbu","Fltemysost","Perth Pasties","Boston Crab Meat","Raclette Courdavault"],i=0;i<8;i++)e.push({ProductName:t[i],Y2010:Math.floor(100*Math.random()+1),Y2011:Math.floor(100*Math.random()+1),Y2012:Math.floor(100*Math.random()+1),Y2013:Math.floor(100*Math.random()+1),Y2014:Math.floor(100*Math.random()+1),Y2015:Math.floor(100*Math.random()+1),Y2016:Math.floor(100*Math.random()+1),Y2017:Math.floor(100*Math.random()+1),Y2018:Math.floor(100*Math.random()+1)});this.itemsSource=e,this.itemsMapping={headerMapping:{propertyName:"ProductName",displayName:"Product Name",columnStyle:{width:140,textAlign:"right"}},columnMapping:[{propertyName:"Y2010",displayName:"Y2010"},{propertyName:"Y2011",displayName:"Y2011"},{propertyName:"Y2012",displayName:"Y2012"},{propertyName:"Y2013",displayName:"Y2013"},{propertyName:"Y2014",displayName:"Y2014"},{propertyName:"Y2015",displayName:"Y2015"},{propertyName:"Y2016",displayName:"Y2016"},{propertyName:"Y2017",displayName:"Y2017"},{propertyName:"Y2018",displayName:"Y2018"}]},this.label={text:"0"},this.legendLabel={text:"0"},this.legendCollection=["heatmaplegend"],this.isResponsive=!0}return e=l([s.Component({selector:"ej-app",template:i(1778)}),o("design:paramtypes",[])],e)}();t.DefaultComponent=n},1280:function(e,t,i){"use strict";var l=this&&this.__decorate||function(e,t,i,l){var o,s=arguments.length,n=s<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,l);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),n=function(){function e(){this.margin={left:25,right:25};for(var e=[],t=["Peter Scott","Maria Anders","John Camino","Philips Cramer","Robert King","Simon Crowther"],i=0;i<t.length;i++)e.push({EmpName:t[i],Jan:l(),Feb:l(),Mar:l(),Apr:l(),May:l(),Jun:l(),Jul:l(),Aug:l(),Sep:l(),Oct:l(),Nov:l(),Dec:l()});function l(){return Math.floor(10*Math.random()+1)}this.itemsSource=e,this.colorMappingCollection=[{value:0,color:"#fe0002",label:{text:"Poor"}},{value:3,color:"#ffff01",label:{text:"Average"}},{value:6,color:"#13ab11",label:{text:"Good"}},{value:10,color:"#005ba2",label:{text:"Excellent"}}],this.itemsMapping={headerMapping:{propertyName:"EmpName",displayName:"Employee Name",columnStyle:{width:110,textAlign:"right"}},columnMapping:[{propertyName:"Jan",displayName:"Jan"},{propertyName:"Feb",displayName:"Feb"},{propertyName:"Mar",displayName:"Mar"},{propertyName:"Apr",displayName:"Apr"},{propertyName:"May",displayName:"May"},{propertyName:"Jun",displayName:"Jun"},{propertyName:"Jul",displayName:"Jul"},{propertyName:"Aug",displayName:"Aug"},{propertyName:"Sep",displayName:"Sep"},{propertyName:"Oct",displayName:"Oct"},{propertyName:"Nov",displayName:"Nov"},{propertyName:"Dec",displayName:"Dec"}]},this.isResponsive=!0,this.label={text:"poor"},this.legendLabel={text:"poor"},this.legendMode="list",this.legendCollection=["heatmaplegend"]}return e=l([s.Component({selector:"ej-app",template:i(1779)}),o("design:paramtypes",[])],e)}();t.LegendComponent=n},1281:function(e,t,i){"use strict";var l=this&&this.__decorate||function(e,t,i,l){var o,s=arguments.length,n=s<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,l);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),n=function(){function e(){this.margin={left:25,right:25};for(var e=[],t=["Vegie-spread","Tofuaa","Alice Mutton","Konbu","Fltemysost","Perth Pasties","Boston Crab Meat","Raclette Courdavault"],i=0;i<8;i++)e.push({ProductName:t[i],Y2010:l(),Y2011:l(),Y2012:l(),Y2013:l(),Y2014:l(),Y2015:l(),Y2016:l(),Y2017:l(),Y2018:l()});function l(){return Math.floor(100*Math.random()+1)}this.itemsSource=e,this.colorMappingCollection=[{value:0,color:"#8ec8f8",label:{text:"0"}},{value:100,color:"#0d47a1",label:{text:"100"}}],this.itemsMapping={headerMapping:{propertyName:"ProductName",displayName:"Product Name",columnStyle:{width:140,textAlign:"right"}},columnMapping:[{propertyName:"Y2010",displayName:"Y2010"},{propertyName:"Y2011",displayName:"Y2011"},{propertyName:"Y2012",displayName:"Y2012"},{propertyName:"Y2013",displayName:"Y2013"},{propertyName:"Y2014",displayName:"Y2014"},{propertyName:"Y2015",displayName:"Y2015"},{propertyName:"Y2016",displayName:"Y2016"},{propertyName:"Y2017",displayName:"Y2017"},{propertyName:"Y2018",displayName:"Y2018"}]},this.isResponsive=!0,this.label={text:"0"},this.legendLabel={text:"0"},this.legendCollection=["heatmaplegend"]}return e=l([s.Component({selector:"ej-app",template:i(1780)}),o("design:paramtypes",[])],e)}();t.TabelComponent=n},1487:function(e,t,i){"use strict";var l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}();Object.defineProperty(t,"__esModule",{value:!0}),i(1064);var o=i(12),s=i(5),n=function(e){function t(t){var i=e.call(this,[])||this;return i.parent=t,i}return l(t,e),t.decorators=[{type:s.Directive,args:[{selector:"e-colormappingcollection>e-colormapping"}]}],t.ctorParameters=function(){return[{type:o.EJComponents,decorators:[{type:s.Inject,args:[s.forwardRef(function(){return a})]}]}]},t.propDecorators={color:[{type:s.Input,args:["color"]}],value:[{type:s.Input,args:["value"]}],label:[{type:s.Input,args:["label"]}],label_bold:[{type:s.Input,args:["label.bold"]}],label_italic:[{type:s.Input,args:["label.italic"]}],label_text:[{type:s.Input,args:["label.text"]}],label_textDecoration:[{type:s.Input,args:["label.textDecoration"]}],label_fontSize:[{type:s.Input,args:["label.fontSize"]}],label_fontFamily:[{type:s.Input,args:["label.fontFamily"]}],label_fontColor:[{type:s.Input,args:["label.fontColor"]}]},t}(o.ComplexTagElement);t.HeatMapColorMappingDirective=n;var r=function(e){function t(t){return e.call(this,"colorMappingCollection")||this}return l(t,e),t.decorators=[{type:s.Directive,args:[{selector:"ej-heatmap>e-colormappingcollection",queries:{children:new s.ContentChildren(n)}}]}],t.ctorParameters=function(){return[{type:o.EJComponents,decorators:[{type:s.Inject,args:[s.forwardRef(function(){return a})]}]}]},t}(o.ArrayTagElement);t.HeatMapColorMappingCollectionDirective=r;var a=function(e){function t(t,i,l,o){var n=e.call(this,"HeatMap",t,i,["colorMappingCollection"],l,o)||this;return n.el=t,n.cdRef=i,n._ejIterableDiffers=l,n._ejkeyvaluediffers=o,n.cellMouseOver_output=new s.EventEmitter,n.cellMouseEnter_output=new s.EventEmitter,n.cellMouseLeave_output=new s.EventEmitter,n.cellSelected_output=new s.EventEmitter,n}return l(t,e),t.decorators=[{type:s.Component,args:[{selector:"ej-heatmap",template:""}]}],t.ctorParameters=function(){return[{type:s.ElementRef},{type:s.ChangeDetectorRef},{type:s.IterableDiffers},{type:s.KeyValueDiffers}]},t.propDecorators={width_input:[{type:s.Input,args:["width"]}],height_input:[{type:s.Input,args:["height"]}],id_input:[{type:s.Input,args:["id"]}],showTooltip_input:[{type:s.Input,args:["showTooltip"]}],tooltipSettings_input:[{type:s.Input,args:["tooltipSettings"]}],itemsSource_input:[{type:s.Input,args:["itemsSource"]}],heatMapCell_input:[{type:s.Input,args:["heatMapCell"]}],isResponsive_input:[{type:s.Input,args:["isResponsive"]}],enableVirtualization_input:[{type:s.Input,args:["enableVirtualization"]}],defaultColumnStyle_input:[{type:s.Input,args:["defaultColumnStyle"]}],legendCollection_input:[{type:s.Input,args:["legendCollection"]}],itemsMapping_input:[{type:s.Input,args:["itemsMapping"]}],tooltipSettings_templateId_input:[{type:s.Input,args:["tooltipSettings.templateId"]}],tooltipSettings_associate_input:[{type:s.Input,args:["tooltipSettings.associate"]}],tooltipSettings_isBalloon_input:[{type:s.Input,args:["tooltipSettings.isBalloon"]}],tooltipSettings_position_input:[{type:s.Input,args:["tooltipSettings.position"]}],tooltipSettings_position_target_input:[{type:s.Input,args:["tooltipSettings.position.target"]}],tooltipSettings_position_stem_input:[{type:s.Input,args:["tooltipSettings.position.stem"]}],tooltipSettings_trigger_input:[{type:s.Input,args:["tooltipSettings.trigger"]}],tooltipSettings_animation_input:[{type:s.Input,args:["tooltipSettings.animation"]}],tooltipSettings_animation_effect_input:[{type:s.Input,args:["tooltipSettings.animation.effect"]}],tooltipSettings_animation_speed_input:[{type:s.Input,args:["tooltipSettings.animation.speed"]}],heatMapCell_showContent_input:[{type:s.Input,args:["heatMapCell.showContent"]}],heatMapCell_showColor_input:[{type:s.Input,args:["heatMapCell.showColor"]}],defaultColumnStyle_textAlign_input:[{type:s.Input,args:["defaultColumnStyle.textAlign"]}],defaultColumnStyle_headerTemplateID_input:[{type:s.Input,args:["defaultColumnStyle.headerTemplateID"]}],defaultColumnStyle_templateID_input:[{type:s.Input,args:["defaultColumnStyle.templateID"]}],itemsMapping_columnStyle_input:[{type:s.Input,args:["itemsMapping.columnStyle"]}],itemsMapping_columnStyle_width_input:[{type:s.Input,args:["itemsMapping.columnStyle.width"]}],itemsMapping_columnStyle_textAlign_input:[{type:s.Input,args:["itemsMapping.columnStyle.textAlign"]}],itemsMapping_columnStyle_headerTemplateID_input:[{type:s.Input,args:["itemsMapping.columnStyle.headerTemplateID"]}],itemsMapping_columnStyle_templateID_input:[{type:s.Input,args:["itemsMapping.columnStyle.templateID"]}],itemsMapping_column_input:[{type:s.Input,args:["itemsMapping.column"]}],itemsMapping_column_propertyName_input:[{type:s.Input,args:["itemsMapping.column.propertyName"]}],itemsMapping_column_displayName_input:[{type:s.Input,args:["itemsMapping.column.displayName"]}],itemsMapping_row_input:[{type:s.Input,args:["itemsMapping.row"]}],itemsMapping_row_propertyName_input:[{type:s.Input,args:["itemsMapping.row.propertyName"]}],itemsMapping_row_displayName_input:[{type:s.Input,args:["itemsMapping.row.displayName"]}],itemsMapping_value_input:[{type:s.Input,args:["itemsMapping.value"]}],itemsMapping_value_propertyName_input:[{type:s.Input,args:["itemsMapping.value.propertyName"]}],itemsMapping_value_displayName_input:[{type:s.Input,args:["itemsMapping.value.displayName"]}],itemsMapping_headerMapping_input:[{type:s.Input,args:["itemsMapping.headerMapping"]}],itemsMapping_headerMapping_propertyName_input:[{type:s.Input,args:["itemsMapping.headerMapping.propertyName"]}],itemsMapping_headerMapping_displayName_input:[{type:s.Input,args:["itemsMapping.headerMapping.displayName"]}],itemsMapping_headerMapping_columnStyle_input:[{type:s.Input,args:["itemsMapping.headerMapping.columnStyle"]}],itemsMapping_columnMapping_input:[{type:s.Input,args:["itemsMapping.columnMapping"]}],colorMappingCollection_input:[{type:s.Input,args:["colorMappingCollection"]}],options:[{type:s.Input,args:["options"]}],cellMouseOver_output:[{type:s.Output,args:["cellMouseOver"]}],cellMouseEnter_output:[{type:s.Output,args:["cellMouseEnter"]}],cellMouseLeave_output:[{type:s.Output,args:["cellMouseLeave"]}],cellSelected_output:[{type:s.Output,args:["cellSelected"]}],tag_colorMappingCollection:[{type:s.ContentChild,args:[r]}]},t}(o.EJComponents);t.HeatMapComponent=a,t.EJ_HEATMAP_COMPONENTS=[a,r,n]},1488:function(e,t,i){"use strict";var l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}();Object.defineProperty(t,"__esModule",{value:!0}),i(1064);var o=i(12),s=i(5),n=function(e){function t(t){var i=e.call(this,[])||this;return i.parent=t,i}return l(t,e),t.decorators=[{type:s.Directive,args:[{selector:"e-legendcolormappings>e-legendcolormapping"}]}],t.ctorParameters=function(){return[{type:o.EJComponents,decorators:[{type:s.Inject,args:[s.forwardRef(function(){return a})]}]}]},t.propDecorators={color:[{type:s.Input,args:["color"]}],value:[{type:s.Input,args:["value"]}],label:[{type:s.Input,args:["label"]}],label_bold:[{type:s.Input,args:["label.bold"]}],label_italic:[{type:s.Input,args:["label.italic"]}],label_text:[{type:s.Input,args:["label.text"]}],label_textDecoration:[{type:s.Input,args:["label.textDecoration"]}],label_fontSize:[{type:s.Input,args:["label.fontSize"]}],label_fontFamily:[{type:s.Input,args:["label.fontFamily"]}],label_fontColor:[{type:s.Input,args:["label.fontColor"]}]},t}(o.ComplexTagElement);t.HeatMapLegendLegendcolorMappingDirective=n;var r=function(e){function t(t){return e.call(this,"colorMappingCollection")||this}return l(t,e),t.decorators=[{type:s.Directive,args:[{selector:"ej-heatmaplegend>e-legendcolormappings",queries:{children:new s.ContentChildren(n)}}]}],t.ctorParameters=function(){return[{type:o.EJComponents,decorators:[{type:s.Inject,args:[s.forwardRef(function(){return a})]}]}]},t}(o.ArrayTagElement);t.HeatMapLegendLegendcolorMappingsDirective=r;var a=function(e){function t(t,i,l,o){var s=e.call(this,"HeatMapLegend",t,i,["colorMappingCollection"],l,o)||this;return s.el=t,s.cdRef=i,s._ejIterableDiffers=l,s._ejkeyvaluediffers=o,s}return l(t,e),t.decorators=[{type:s.Component,args:[{selector:"ej-heatmaplegend",template:""}]}],t.ctorParameters=function(){return[{type:s.ElementRef},{type:s.ChangeDetectorRef},{type:s.IterableDiffers},{type:s.KeyValueDiffers}]},t.propDecorators={width_input:[{type:s.Input,args:["width"]}],height_input:[{type:s.Input,args:["height"]}],isResponsive_input:[{type:s.Input,args:["isResponsive"]}],showLabel_input:[{type:s.Input,args:["showLabel"]}],orientation_input:[{type:s.Input,args:["orientation"]}],legendMode_input:[{type:s.Input,args:["legendMode"]}],colorMappingCollection_input:[{type:s.Input,args:["colorMappingCollection"]}],options:[{type:s.Input,args:["options"]}],tag_colorMappingCollection:[{type:s.ContentChild,args:[r]}]},t}(o.EJComponents);t.HeatMapLegendComponent=a,t.EJ_HEATMAPLEGEND_COMPONENTS=[a,r,n]},1778:function(e,t){e.exports='<div class="cols-sample-area">\r\n    <div style="border-width: 2px; opacity: 0.7; text-align: center;">\r\n        <label class="ht-label1">Product Sales by Year</label><br />\r\n        <label class="ht-label2">(In Percentage)</label>\r\n    </div>\r\n    <div style="margin: 0 auto; text-align: center;width: 94%;">\r\n        <ej-heatmap id="heatmap1" [isResponsive]="isResponsive" width="100%" [itemsMapping]="itemsMapping" [itemsSource]="itemsSource" [legendCollection]="legendCollection">\r\n            <e-colormappingcollection>\r\n                <e-colormapping [value]="0" color="#8ec8f8" [label]="label">\r\n                </e-colormapping>\r\n                <e-colormapping [value]="100" color="#0d47a1" [label]="label">\r\n                </e-colormapping>\r\n            </e-colormappingcollection>\r\n        </ej-heatmap>\r\n        <div style="height: 15px; width: 100%;"></div>\r\n        <ej-heatmaplegend id="heatmaplegend" height="50px" width="75%">\r\n            <e-legendcolormappings>\r\n                <e-legendcolormapping [value]="0" color="#8ec8f8">\r\n                </e-legendcolormapping>\r\n                <e-legendcolormapping [value]="100" color="#0d47a1">\r\n                </e-legendcolormapping>\r\n            </e-legendcolormappings>\r\n        </ej-heatmaplegend>\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n    \r\n    #heatmaplegend {\r\n        margin-left: 150px;\r\n    }\r\n\r\n</style>'},1779:function(e,t){e.exports='<div class="cols-sample-area">\r\n    <div style="border-width: 2px; opacity: 0.7; text-align: center;">\r\n        <label class="ht-label1">Product Sales by Year</label><br />\r\n        <label class="ht-label2">(In Percentage)</label>\r\n    </div>\r\n    <div style="margin: 0 auto; text-align: center;width: 94%;">\r\n        <ej-heatmap id="heatmap1" isResponsive="true" width="100%" [itemsMapping]="itemsMapping" [itemsSource]="itemsSource" [legendCollection]="legendCollection">\r\n            <e-colormappingcollection>\r\n                <e-colormapping [value]="0" color="#fe0002" [label]="label">\r\n                </e-colormapping>\r\n                <e-colormapping [value]="3" color="#ffff01" [label]="label">\r\n                </e-colormapping>\r\n                <e-colormapping [value]="6" color="#13ab11" [label]="label">\r\n                </e-colormapping>\r\n                <e-colormapping [value]="10" color="#005ba2" [label]="label">\r\n                </e-colormapping>\r\n            </e-colormappingcollection>\r\n        </ej-heatmap>\r\n        <div style="height: 15px; width: 100%;"></div>\r\n        <ej-heatmaplegend id="heatmaplegend" style="margin-left:150px" [legendMode]="legendMode" height="50px" width="75%">\r\n            <e-legendcolormappings>\r\n                <e-legendcolormapping [value]="0" color="#fe0002">\r\n                </e-legendcolormapping>\r\n                <e-legendcolormapping [value]="3" color="#ffff01">\r\n                </e-legendcolormapping>\r\n                <e-legendcolormapping [value]="6" color="#13ab11">\r\n                </e-legendcolormapping>\r\n                <e-legendcolormapping [value]="10" color="#005ba2">\r\n                </e-legendcolormapping>\r\n            </e-legendcolormappings>\r\n        </ej-heatmaplegend>\r\n    </div>\r\n</div>\r\n  '},1780:function(e,t){e.exports=' <div class="cols-sample-area">\r\n    <div style="border-width: 2px; opacity: 0.7; text-align: center;">\r\n        <label class="ht-label1">Product Sales by Year</label><br />\r\n        <label class="ht-label2">(In Percentage)</label>\r\n    </div>\r\n    <div style=" margin-left: 0px; auto; text-align: center;width: 94%;">\r\n        <ej-heatmap id="heatmap1" isResponsive="true" width="100%" [itemsMapping]="itemsMapping" [itemsSource]="itemsSource" [legendCollection]="legendCollection">\r\n            <e-colormappingcollection>\r\n                <e-colormapping [value]="0" color="#8ec8f8" [label]="label">\r\n                </e-colormapping>\r\n                <e-colormapping [value]="100" color="#0d47a1" [label]="label">\r\n                </e-colormapping>\r\n            </e-colormappingcollection>\r\n        </ej-heatmap>\r\n        <div style="height: 15px; width: 100%;"></div>\r\n        <ej-heatmaplegend id="heatmaplegend" height="50px" width="75%">\r\n            <e-legendcolormappings>\r\n                <e-legendcolormapping [value]="0" color="#8ec8f8">\r\n                </e-legendcolormapping>\r\n                <e-legendcolormapping [value]="100" color="#0d47a1">\r\n                </e-legendcolormapping>\r\n            </e-legendcolormappings>\r\n        </ej-heatmaplegend>\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n    \r\n    #heatmaplegend {\r\n        margin-left: 150px;\r\n    }\r\n\r\n</style>\r\n  '},437:function(e,t,i){"use strict";var l=this&&this.__decorate||function(e,t,i,l){var o,s=arguments.length,n=s<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,l);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(t,"__esModule",{value:!0});var o=i(5),s=i(78),n=i(1487),r=i(1488),a=i(1279),d=i(1280),h=i(1281);t.heatmapAppRoutes=[{path:"celldatabinding",component:a.DefaultComponent,data:{name:"Cell Data Binding",location:"app/components/heatmap/celldatabinding.component"}},{path:"tabeldatabinding",component:h.TabelComponent,data:{name:"Table Data Binding",location:"app/components/heatmap/tabeldatabinding.component"}},{path:"legend",component:d.LegendComponent,data:{name:"Legend",location:"app/components/heatmap/legend.component"}},{path:"",redirectTo:"celldatabinding"}],t.HeatMapRouting=s.RouterModule.forChild(t.heatmapAppRoutes);var c=function(){function e(){}return e=l([o.NgModule({imports:[t.HeatMapRouting],declarations:[a.DefaultComponent,n.EJ_HEATMAP_COMPONENTS,r.EJ_HEATMAPLEGEND_COMPONENTS,d.LegendComponent,h.TabelComponent]})],e)}();t.HeatMapModule=c}});