webpackJsonp([15],{1007:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.pivot_data=function(){return[{Amount:100,Country:"Canada",Date:"FY 2005",Product:"Bike",Quantity:2,State:"Alberta"},{Amount:200,Country:"Canada",Date:"FY 2006",Product:"Van",Quantity:3,State:"British Columbia"},{Amount:300,Country:"Canada",Date:"FY 2007",Product:"Car",Quantity:4,State:"Brunswick"},{Amount:150,Country:"Canada",Date:"FY 2008",Product:"Bike",Quantity:3,State:"Manitoba"},{Amount:200,Country:"Canada",Date:"FY 2006",Product:"Car",Quantity:4,State:"Ontario"},{Amount:100,Country:"Canada",Date:"FY 2007",Product:"Van",Quantity:1,State:"Quebec"},{Amount:200,Country:"France",Date:"FY 2005",Product:"Bike",Quantity:2,State:"Charente-Maritime"},{Amount:250,Country:"France",Date:"FY 2006",Product:"Van",Quantity:4,State:"Essonne"},{Amount:300,Country:"France",Date:"FY 2007",Product:"Car",Quantity:3,State:"Garonne (Haute)"},{Amount:150,Country:"France",Date:"FY 2008",Product:"Van",Quantity:2,State:"Gers"},{Amount:200,Country:"Germany",Date:"FY 2006",Product:"Van",Quantity:3,State:"Bayern"},{Amount:250,Country:"Germany",Date:"FY 2007",Product:"Car",Quantity:3,State:"Brandenburg"},{Amount:150,Country:"Germany",Date:"FY 2008",Product:"Car",Quantity:4,State:"Hamburg"},{Amount:200,Country:"Germany",Date:"FY 2008",Product:"Bike",Quantity:4,State:"Hessen"},{Amount:150,Country:"Germany",Date:"FY 2007",Product:"Van",Quantity:3,State:"Nordrhein-Westfalen"},{Amount:100,Country:"Germany",Date:"FY 2005",Product:"Bike",Quantity:2,State:"Saarland"},{Amount:150,Country:"United Kingdom",Date:"FY 2008",Product:"Bike",Quantity:5,State:"England"},{Amount:250,Country:"United States",Date:"FY 2007",Product:"Car",Quantity:4,State:"Alabama"},{Amount:200,Country:"United States",Date:"FY 2005",Product:"Van",Quantity:4,State:"California"},{Amount:100,Country:"United States",Date:"FY 2006",Product:"Bike",Quantity:2,State:"Colorado"},{Amount:150,Country:"United States",Date:"FY 2008",Product:"Car",Quantity:3,State:"New Mexico"},{Amount:200,Country:"United States",Date:"FY 2005",Product:"Bike",Quantity:4,State:"New York"},{Amount:250,Country:"United States",Date:"FY 2008",Product:"Car",Quantity:3,State:"North Carolina"},{Amount:300,Country:"United States",Date:"FY 2007",Product:"Van",Quantity:4,State:"South Carolina"}]},e.prototype.pivot_rows=function(){return[{fieldName:"Country",fieldCaption:"Country"},{fieldName:"State",fieldCaption:"State"}]},e.prototype.pivot_columns=function(){return[{fieldName:"Product",fieldCaption:"Product"}]},e.prototype.pivot_values=function(){return[{fieldName:"Amount",fieldCaption:"Amount"},{fieldName:"Quantity",fieldCaption:"Quantity"}]},e.prototype.pivot_chartvalues=function(){return[{fieldName:"Amount",fieldCaption:"Amount"}]},e.prototype.pivot_Olaprows=function(){return[{fieldName:"[Date].[Fiscal]"}]},e.prototype.pivot_namedsetrows=function(){return[{fieldName:"[Core Product Group]",isNamedSets:!0}]},e.prototype.pivot_gaugerows=function(){return[{fieldName:"[Date].[Fiscal]",filterItems:{filterType:"include",values:["[Date].[Fiscal].[Fiscal Year].&amp;[2004]"]}}]},e.prototype.pivot_gaugecolumns=function(){return[{fieldName:"[Customer].[Customer Geography]",filterItems:{filterType:"include",values:["[Customer].[Customer Geography].[Country].&amp;[Australia]"]}}]},e.prototype.pivot_Olapcolumns=function(){return[{fieldName:"[Customer].[Customer Geography]"}]},e.prototype.pivot_Olapvalues=function(){return[{measures:[{fieldName:"[Measures].[Internet Sales Amount]"}],axis:"columns"}]},e.prototype.pivot_MultipleAxesvalues=function(){return[{measures:[{fieldName:"[Measures].[Internet Sales Amount]"},{fieldName:"[Measures].[Customer Count]"}],axis:"columns"}]},e.prototype.pivot_gaugevalues=function(){return[{measures:[{fieldName:"[Measures].[Internet Sales Amount]"},{fieldName:"[Measures].[Internet Revenue Status]"},{fieldName:"[Measures].[Internet Revenue Trend]"},{fieldName:"[Measures].[Internet Revenue Goal]"}],axis:"columns"}]},e.prototype.pivot_Olapfilters=function(){return[]},e.prototype.pivot_cube=function(){return"Adventure Works"},e.prototype.pivot_datacube=function(){return"//bi.syncfusion.com/olap/msmdpump.dll"},e.prototype.pivot_catelog=function(){return"Adventure Works DW 2008 SE"},e.prototype.size=function(){return{height:"460px",width:"950px"}},e.prototype.primaryYAxis=function(){return{title:{text:"Amount"}}},e.prototype.primaryYAxisOlap=function(){return{title:{text:"Customer Count"}}},e.prototype.primaryXAxis=function(){return{title:{text:"Fiscal Year"},labelRotation:0}},e.prototype.legend=function(){return{visible:!0}},e.prototype.commonSeriesOptions=function(){return{enableAnimation:!0,type:ej.PivotChart.ChartTypes.Column,tooltip:{visible:!0}}},e.prototype.zooming=function(){return{enableScrollbar:!0}},e.prototype.axes=function(){return[{orientation:"vertical",rowIndex:0,majorGridLines:{visible:!1},axisLine:{visible:!0},name:"yAxisConfig",title:{text:"Internet Sales Amount"},opposedPosition:!0,labelFormat:"c"}]},e.prototype.scales=function(){return[{showRanges:!0,radius:150,showScaleBar:!0,size:1,border:{width:.5},showIndicators:!0,showLabels:!0,pointers:[{showBackNeedle:!0,backNeedleLength:20,length:120,width:7},{type:"marker",markerType:"diamond",distanceFromScale:5,placement:"center",backgroundColor:"#29A4D9",length:25,width:15}],ticks:[{type:"major",distanceFromScale:2,height:16,width:1,color:"#8c8c8c"},{type:"minor",height:6,width:1,distanceFromScale:2,color:"#8c8c8c"}],labels:[{color:"#8c8c8c"}],ranges:[{distanceFromScale:-5,backgroundColor:"#fc0606",border:{color:"#fc0606"}},{distanceFromScale:-5}],customLabels:[{position:{x:180,y:290},font:{size:"10px",fontFamily:"Segoe UI",fontStyle:"Normal"},color:"#666666"},{position:{x:180,y:320},font:{size:"10px",fontFamily:"Segoe UI",fontStyle:"Normal"},color:"#666666"},{position:{x:180,y:150},font:{size:"12px",fontFamily:"Segoe UI",fontStyle:"Normal"},color:"#666666"}]}]},e}();t.PivotDataService=i},1009:function(e,t,a){var i,l,r;
/*!
*  filename: ej.olap.base.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.olap.base.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(n){l=[a(4)],void 0===(r="function"==typeof(i=n)?i.apply(t,l):i)||(e.exports=r)}(function(){!function(e,t,a){t.olap=t.olap||{},t.olap.base={_initProperties:function(){this._columnHeaders=[],this._rowHeaders=[],this._valueCells=[],this.pivotEngine=[],this.olapCtrlObj=null,this._cBIndx=null,this._rBIndx=null,this._OlapDataSource,this._measureDt={},this._cTotIndexInfo=null,this._rTotIndexInfo=null,this._kpi=null,this._rowCount=0,this._colCount=0,this._isPaging=!1,this._indexRCell=0,this._indexCCell=0},_initControlProperties:function(e){e._drilledCellSet=e.model.enablePaging||e.model.enableVirtualScrolling?t.isNullOrUndefined(e._drilledCellSet)?[]:e._drilledCellSet:[],e.XMLACellSet=null,e._isMondrian=e.model.dataSource.providerName==t.olap.Providers.Mondrian,(t.isNullOrUndefined(e._fieldData)||!t.isNullOrUndefined(e._fieldData)&&t.isNullOrUndefined(e._fieldData.hierarchy))&&this._getFieldItemsInfo(e),this._currIndex={},this._isRowDrilled=!1,this._isColDrilled=!1,this._isNoSummary="nosummaries"==e.model.layout},getJSONData:function(a,i,l){var r,n,o;a.action&&("initialLoad"==a.action||"navPaging"==a.action)&&(this._initControlProperties(l),this._applyTrim(l)),"loadFieldElements"==a.action&&(l._baseSavedProperties=e.extend(!0,{},{drilledCellSet:l._drilledCellSet,XMLACellSet:l.XMLACellSet,columnHeaders:this._columnHeaders,rowHeaders:this._rowHeaders,valueCells:this._valueCells,pivotEngine:this.pivotEngine,olapCtrlObj:this.olapCtrlObj,cBIndx:this._cBIndx,rBIndx:this._rBIndx,OlapDataSource:this._OlapDataSource,measureDt:this._measureDt,cTotIndexInfo:this._cTotIndexInfo,rTotIndexInfo:this._rTotIndexInfo,kpi:this._kpi,rowCount:this._rowCount,colCount:this._colCount,isPaging:this._isPaging,indexRCell:this._indexRCell,indexCCell:this._indexCCell})),this._initProperties(),this.olapCtrlObj=l,this._OlapDataSource=i,i.data,l.model.enableGroupingBar&&"loadFieldElements"!=a.action&&l._createGroupingBar(i),this._isPaging=!(!this.olapCtrlObj.model.enablePaging&&!this.olapCtrlObj.model.enableVirtualScrolling||t.isNullOrUndefined(this._OlapDataSource.pagerOptions)||0==this._OlapDataSource.pagerOptions.categoricalPageSize||0==this._OlapDataSource.pagerOptions.seriesPageSize),r=i.MDXQuery?i.MDXQuery:this._getParsedMDX(i,i.cube,!(!a.action||"navPaging"==a.action||!this._isPaging||t.isNullOrUndefined(this.olapCtrlObj.model.dataSource.pagerOptions))),o=this._getConnectionInfo(this.olapCtrlObj.model.dataSource.data),n=t.isNullOrUndefined(i.providerName)||i.providerName==t.olap.Providers.SSAS?'<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header></Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement> '+r+" </Statement> </Command> <Properties> <PropertyList> <Catalog>"+i.catalog+"</Catalog> <LocaleIdentifier>"+o.LCID+"</LocaleIdentifier> </PropertyList> </Properties></Execute> </Body> </Envelope>":'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement><![CDATA['+r+"]]></Statement></Command><Properties><PropertyList><DataSourceInfo>"+i.sourceInfo+"</DataSourceInfo><Catalog>"+i.catalog+"</Catalog><AxisFormat>TupleFormat</AxisFormat><Content>Data</Content><Format>Multidimensional</Format></PropertyList></Properties></Execute></SOAP-ENV:Body></SOAP-ENV:Envelope>","drilldown"!=a.action||this._isPaging?this.olapCtrlObj.doAjaxPost("POST",o.url,{XMLA:n},a.action&&"navPaging"!=a.action&&this._isPaging&&!t.isNullOrUndefined(this.olapCtrlObj.model.dataSource.pagerOptions)?this._generatePagingData:this._generateJSONData,null,a):this.olapCtrlObj.doAjaxPost("POST",o.url,{XMLA:n},this._onDemandExpand,null,a)},_getParsedMDX:function(e,i,l){var r,n,o,s,d,u;if(e!=a){if(r="",(d=e.providerName==t.olap.Providers.Mondrian)&&0==e.columns.length&&!("columns"==e.values[0].axis&&e.values[0].measures.length>0))return"";n=t.olap._mdxParser._getRowMDX(e),o=t.olap._mdxParser._getcolumnMDX(e),delete e._isCollapse,n=n.length>0?this._isPaging&&!l||d?"("+n+")":"NON EMPTY("+n+")":"",o=o.length>0?this._isPaging&&!l||d?"("+o+")":"NON EMPTY("+o+")":"",!this._isPaging||l||t.isNullOrUndefined(this.olapCtrlObj.model.dataSource.pagerOptions)||(n=(u=this._getPagingQuery(n,o)).rowQuery,o=u.columnQuery),s=t.olap._mdxParser._getSlicerMDX(e,this.olapCtrlObj),r="\nSelect \n"+(""==o?"{}":o)+"\ndimension properties MEMBER_TYPE,CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME  ON COLUMNS \n"+(""==n?"":","+n+"\ndimension properties MEMBER_TYPE,CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME  ON ROWS")+"\n "+t.olap._mdxParser._getIncludefilterQuery(e,i,this.olapCtrlObj)+s+"\n CELL PROPERTIES VALUE, FORMAT_STRING, FORMATTED_VALUE \n ",""==o&&r.replace(/NON EMPTY/g," "),r=this._getCalculatedItems(r)}return r},_getCalculatedItems:function(a){var i,l,r=this.olapCtrlObj.model.calculatedMembers;if(r&&r.length>0){for(i="\nWITH",l=0;l<r.length;l++){var n=(r[l].expression.indexOf("Measure")>-1?"[Measures].":r[l].hierarchyUniqueName+".")+"["+(r[l].caption||r[l].name)+"]",o=t.isNullOrUndefined(r[l].formatString)?t.isNullOrUndefined(r[l].format)?null:r[l].format:r[l].formatString;i+="\n MEMBER "+n+" as ("+r[l].expression+" ) "+(t.isNullOrUndefined(o)?"":', FORMAT_STRING ="'+e.trim(o)+'"')}return(i=i.replace(/\&/g,"&amp;"))+" "+a}return a},_getPagingQuery:function(e,t){var a=Math.ceil(this._colCount/this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize)<parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.categoricalCurrentPage)||0==parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.categoricalCurrentPage)?Math.ceil(this._colCount/this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize)<parseInt(this.olapCtrlObj._categCurrentPage)&&this._colCount>0?Math.ceil(this._colCount/this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize):this.olapCtrlObj._categCurrentPage:parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.categoricalCurrentPage),i=Math.ceil(this._rowCount/this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize)<parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.seriesCurrentPage)||0==parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.seriesCurrentPage)?Math.ceil(this._rowCount/this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize)<parseInt(this.olapCtrlObj._seriesCurrentPage)&&this._rowCount>0?Math.ceil(this._rowCount/this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize):this.olapCtrlObj._seriesCurrentPage:parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.seriesCurrentPage),l=e;return{rowQuery:""!=e?"SUBSET({"+(this.olapCtrlObj._isMondrian?"":"NONEMPTY")+"("+e+(this.olapCtrlObj._isMondrian||""==t?"":","+t)+")},"+((0==i?1:i)-1)*this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize+","+this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize+")":"",columnQuery:""!=t?"SUBSET({"+(this.olapCtrlObj._isMondrian?"":"NONEMPTY")+"("+t+(this.olapCtrlObj._isMondrian||""==l?"":","+l)+")},"+((0==a?1:a)-1)*this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize+","+this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize+")":""}},_getAxisElementsUName:function(e){for(var t="",a=0;a<e.length;a++)t+=""==t?"{"+e[a].uniqueName+"}":", {"+e[a].uniqueName+"}";return t},_generatePagingData:function(a,i){var l,r,n;if(e(i).find("Error").length>0)return t.Pivot._createErrorDialog(e(i).find("faultstring").text(),a.action,this.olapCtrlObj),!1;l=e(i).find("Axes, CellData"),this._rowCount=e(l.find("Axis[name|='Axis1']").find("Tuples")).length>0?e(l.find("Axis[name|='Axis1']").find("Tuples")[0]).children().length:0,this._colCount=e(l.find("Axis[name|='Axis0']").find("Tuples")).length>0?e(l.find("Axis[name|='Axis0']").find("Tuples")[0]).children().length:0,r=this._getParsedMDX(this.olapCtrlObj.model.dataSource,this.olapCtrlObj.model.dataSource.cube,!1),n=this._getConnectionInfo(this.olapCtrlObj.model.dataSource.data),this.olapCtrlObj._isMondrian&&(this._controlObj=this.olapCtrlObj),this.olapCtrlObj.doAjaxPost("POST",n.url,{XMLA:t.olap._mdxParser.getSoapMsg(r,this.olapCtrlObj.model.dataSource.data,this.olapCtrlObj.model.dataSource.catalog)},this._generateJSONData,null,a)},_generateJSONData:function(i,l){var r,n,o,s,d,u,c,p,m,g,h,f,_;if(this.olapCtrlObj.model.dataSource=this._OlapDataSource,this._isPaging&&"drilldown"==i.action&&this._onDemandExpand(i,l),r=[],n=[],e(l).find("Error").length>0)return t.Pivot._createErrorDialog(e(l).find("faultstring").text(),"Error",this.olapCtrlObj),!1;if(e(l).find("Axis[name|='SlicerAxis']").remove(),this.olapCtrlObj.XMLACellSet=e(l).find("Axes, CellData"),[],"onDemandDrill"==i&&(this.olapCtrlObj.XMLACellSet=l),o=e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis0']").find("Tuple"),s=e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis1']").find("Tuple"),o.length>0){if(d=e(this.olapCtrlObj.XMLACellSet[1]).children(),this._rowHeaders=this._getHeaderCollection(s,"rowheader"),this._columnHeaders=this._getHeaderCollection(o,"colheader"),this._valueCells=this._getValueCells(d,o.length),this._indexRCell="rowheader"==this._measureDt.axis?t.sum(this._rowHeaders.maxLvlLen)+1:t.sum(this._rowHeaders.maxLvlLen),this._indexCCell="colheader"==this._measureDt.axis?t.sum(this._columnHeaders.maxLvlLen)+1:t.sum(this._columnHeaders.maxLvlLen),this._rowHeaders.headers.length>0&&0==t.sum(this._rowHeaders.maxLvlLen)&&(this._indexRCell=this._rowHeaders.headers[0].length),this._columnHeaders.headers.length>0&&0==t.sum(this._columnHeaders.maxLvlLen)&&(this._indexCCell=this._columnHeaders.headers[0].length),this._isPaging)for(h=0;h<this._rowHeaders.headers.length;h++)for(_=0;_<this._columnHeaders.headers.length;_++)t.isNullOrUndefined(this._valueCells[h])?(this._valueCells[h]=[],this._valueCells[h][_]={FormatString:"#,#",Value:""}):t.isNullOrUndefined(this._valueCells[h][_])&&(this._valueCells[h][_]={FormatString:"#,#",Value:""});for(this._populateEngine(this._rowHeaders.headers,this._columnHeaders.headers,this._valueCells),e(this.olapCtrlObj).find(".e-pivotGridTable").remove(),this.olapCtrlObj._measureDt=this._measureDt,u=this._rowHeaders.headers.length+this._indexCCell,c=this._columnHeaders.headers.length+this._indexRCell,this.pivotEngine.length>1&&(u=this.pivotEngine.length),h=0;h<u;h++)for(_=0;_<c;_++)r[_]==a&&(r[_]=[]),this.pivotEngine[h]!=a&&this.pivotEngine[h][_]!=a?(r[_][h]={Index:_+","+h,CSS:""==this.pivotEngine[h][_].CSS?"none":this.pivotEngine[h][_].CSS==a?"value":this.pivotEngine[h][_].CSS,Value:this.pivotEngine[h][_].Value,State:this.pivotEngine[h][_].ChildCount>0?2:this.pivotEngine[h][_].ChildCount<0?1:0,RowSpan:this.pivotEngine[h][_].RowSpan!=a?this.pivotEngine[h][_].RowSpan:1,ColSpan:this.pivotEngine[h][_].ColSpan!=a?this.pivotEngine[h][_].ColSpan:1,Info:this.pivotEngine[h][_].UName+"::"+this.pivotEngine[h][_].LName+"::"+this.pivotEngine[h][_].Value+"::"+this.pivotEngine[h][_].PUName,Span:"Block"==this.pivotEngine[h][_].Span?"Block":"None",Expander:1},this.pivotEngine[h][_].kpiInfo&&(r[_][h].kpi=this.pivotEngine[h][_].kpi,r[_][h].kpiInfo=this.pivotEngine[h][_].kpiInfo),this.pivotEngine[h][_].ActualValue&&(r[_][h].ActualValue=this.pivotEngine[h][_].ActualValue,r[_][h].Format=this.pivotEngine[h][_].FormatString)):this.pivotEngine[h]!=a&&(p="none",h<this._indexCCell&&_<this._indexRCell&&(p="rowheader"),r[_][h]={Index:_+","+h,CSS:p,Value:"",State:0,RowSpan:1,ColSpan:1,Info:"",Span:"Block",Expander:0});for(h=0;h<c;h++)for(_=0;_<u;_++)r[h]!=a&&r[h][_]!=a&&n.push(r[h][_]);for(m=0,g=0;g<n.length&&0==parseInt(n[g].Index.split(",")[0]);g++)m++}if(this.olapCtrlObj._isExporting&&this.olapCtrlObj.model.enableCompleteDataExport){for(_=0;_<this._indexRCell;_++)for(f="",h=this._indexCCell;h<r[0].length;h++)""!=r[_][h].Info&&(f==r[_][h].Info?r[_][h].Span="Block":f=r[_][h].Info);for(h=0;h<this._indexCCell;h++)for(f="",_=this._indexRCell;_<r.length;_++)""!=r[_][h].Info&&(f==r[_][h].Info?r[_][h].Span="Block":f=r[_][h].Info);this.olapCtrlObj._fullExportedData={jsonObj:n,tranposeEngine:r,rowCount:m},this.olapCtrlObj._drilledCellSet=this.olapCtrlObj._baseSavedProperties.drilledCellSet,this.olapCtrlObj.XMLACellSet=this.olapCtrlObj._baseSavedProperties.XMLACellSet,this._columnHeaders=this.olapCtrlObj._baseSavedProperties.columnHeaders,this._rowHeaders=this.olapCtrlObj._baseSavedProperties.rowHeaders,this._valueCells=this.olapCtrlObj._baseSavedProperties.valueCells,this.pivotEngine=this.olapCtrlObj._baseSavedProperties.pivotEngine,this.olapCtrlObj=this.olapCtrlObj._baseSavedProperties.olapCtrlObj,this._cBIndx=this.olapCtrlObj._baseSavedProperties.cBIndx,this._rBIndx=this.olapCtrlObj._baseSavedProperties.rBIndx,this._OlapDataSource=this.olapCtrlObj._baseSavedProperties.OlapDataSource,this._measureDt=this.olapCtrlObj._baseSavedProperties.measureDt,this._cTotIndexInfo=this.olapCtrlObj._baseSavedProperties.cTotIndexInfo,this._rTotIndexInfo=this.olapCtrlObj._baseSavedProperties.rTotIndexInfo,this._kpi=this.olapCtrlObj._baseSavedProperties.kpi,this._rowCount=this.olapCtrlObj._baseSavedProperties.rowCount,this._colCount=this.olapCtrlObj._baseSavedProperties.colCount,this._isPaging=this.olapCtrlObj._baseSavedProperties.isPaging,this._indexRCell=this.olapCtrlObj._baseSavedProperties.indexRCell,this._indexCCell=this.olapCtrlObj._baseSavedProperties.indexCCell,this.olapCtrlObj._baseSavedProperties={}}else this.olapCtrlObj._pivotRecords={records:n,rowCount:m},"string"==typeof this.olapCtrlObj.model.dataSource.data&&"ejPivotGrid"!=this.olapCtrlObj.pluginName?"string"==typeof this.olapCtrlObj.model.dataSource.data&&"ejPivotChart"!=this.olapCtrlObj.pluginName&&"string"==typeof this.olapCtrlObj.model.dataSource.data&&"ejPivotGauge"!=this.olapCtrlObj.pluginName&&"string"==typeof this.olapCtrlObj.model.dataSource.data&&"ejPivotTreeMap"!=this.olapCtrlObj.pluginName?(this._renderPager(i),this.olapCtrlObj.generateJSON({baseObj:this,tranposeEngine:r,jsonObj:n})):(this.olapCtrlObj.generateJSON({baseObj:this},r),this._isPaging&&this._renderPager(i)):this._renderPivotGrid(i,n),this._columnHeaders=this._rowHeaders=this._valueCells=this.pivotEngine=[],this._cBIndx=this._rBIndx=null,this._measureDt={axis:"",posision:null},this._cTotIndexInfo=this._rTotIndexInfo=null},_renderPager:function(e){var a,i,l,r;this._isPaging&&("navPaging"!=e.action&&(t.isNullOrUndefined(this.olapCtrlObj.model.dataSource.pagerOptions)?this.olapCtrlObj.model.enablePaging&&(l={CategoricalCurrentPage:1,CategoricalPageSize:1,SeriesCurrentPage:1,SeriesPageSize:1},r={Column:1,Row:1},this.olapCtrlObj._pagerObj.initPagerProperties(r,l),this.olapCtrlObj._pagerObj.element.css("opacity","0.5"),this.olapCtrlObj._pagerObj.element.find(".e-pagerTextBox").attr("disabled","disabled"),this.olapCtrlObj._pagerObj._unwireEvents()):(a=Math.ceil(this._colCount/this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize)<parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.categoricalCurrentPage)||0==parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.categoricalCurrentPage)?Math.ceil(this._colCount/this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize)<parseInt(this.olapCtrlObj._categCurrentPage)?Math.ceil(this._colCount/this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize):this.olapCtrlObj._categCurrentPage:parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.categoricalCurrentPage),i=Math.ceil(this._rowCount/this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize)<parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.seriesCurrentPage)||0==parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.seriesCurrentPage)?Math.ceil(this._rowCount/this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize)<parseInt(this.olapCtrlObj._seriesCurrentPage)?Math.ceil(this._rowCount/this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize):this.olapCtrlObj._seriesCurrentPage:parseInt(this.olapCtrlObj.model.dataSource.pagerOptions.seriesCurrentPage),a=0==a?1:a,i=0==i?1:i,this._colCount=0==this._colCount?1:this._colCount,this._rowCount=0==this._rowCount?1:this._rowCount,this.olapCtrlObj.model.enablePaging?(l={CategoricalCurrentPage:a,CategoricalPageSize:this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize,SeriesCurrentPage:i,SeriesPageSize:this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize},r={Column:this._colCount,Row:this._rowCount},this.olapCtrlObj._pagerObj.element.css("opacity","1"),this.olapCtrlObj._pagerObj.element.find(".e-pagerTextBox").removeAttr("disabled"),this.olapCtrlObj._pagerObj._unwireEvents(),this.olapCtrlObj._pagerObj._wireEvents(),this.olapCtrlObj._pagerObj.initPagerProperties(r,l)):this.olapCtrlObj.model.enableVirtualScrolling&&(this.olapCtrlObj._categPageCount=Math.ceil(this._colCount/this.olapCtrlObj.model.dataSource.pagerOptions.categoricalPageSize),this.olapCtrlObj._seriesPageCount=Math.ceil(this._rowCount/this.olapCtrlObj.model.dataSource.pagerOptions.seriesPageSize)),this.olapCtrlObj._categCurrentPage=a,this.olapCtrlObj._seriesCurrentPage=i,t.isNullOrUndefined(this.olapCtrlObj._pivotGrid)||(this.olapCtrlObj._pivotGrid._categCurrentPage=a,this.olapCtrlObj._pivotGrid._seriesCurrentPage=i,this.olapCtrlObj._pivotGrid._categPageCount=this.olapCtrlObj._categPageCount,this.olapCtrlObj._pivotGrid._seriesPageCount=this.olapCtrlObj._seriesPageCount))),t.isNullOrUndefined(this.olapCtrlObj.model.dataSource.pagerOptions)||(this.olapCtrlObj.model.dataSource.pagerOptions.categoricalCurrentPage=this.olapCtrlObj._categCurrentPage,this.olapCtrlObj.model.dataSource.pagerOptions.seriesCurrentPage=this.olapCtrlObj._seriesCurrentPage))},_renderPivotGrid:function(e,a){this.olapCtrlObj._dataModel="XMLA",this.olapCtrlObj.setJSONRecords(JSON.stringify(a)),this.olapCtrlObj.setOlapReport(this.olapCtrlObj.model.dataSource),this._renderPager(e),this.olapCtrlObj.model.enableGroupingBar&&this.olapCtrlObj._createGroupingBar(this.olapCtrlObj.model.dataSource),null!=this.olapCtrlObj.model.layout&&this.olapCtrlObj.layout().toLowerCase()==t.PivotGrid.Layout.ExcelLikeLayout?this.olapCtrlObj.excelLikeLayout(a):this.olapCtrlObj.renderControlFromJSON(a),e.action&&("initialLoad"==e.action||"navPaging"==e.action)&&(this.olapCtrlObj._trigger("renderSuccess",this.olapCtrlObj),this.olapCtrlObj._fieldData={hierarchy:this.olapCtrlObj._fieldData.hierarchy,measures:this.olapCtrlObj._fieldData.measures})},_onDemandExpand:function(t,a){var i,l,r,n,o,s,d,u="",c=this.olapCtrlObj.XMLACellSet,p=e(this.olapCtrlObj.XMLACellSet).find("Axis[name='Axis0'] Tuple").length,m=e(this.olapCtrlObj.XMLACellSet).find("Axis[name='Axis1'] Tuple").length;m=m||1,e(a).find("CellData Cell").length,e(this.olapCtrlObj.XMLACellSet[1]).children().length,t.cellInfo.previousElements.split(">#>");var g=e(a).find("Axis[name|='Axis0']").find("Tuple"),h=e(a).find("Axis[name|='Axis1']").find("Tuple"),f=g.length;l=h.length,e(a).find("Axis[name='SlicerAxis']").remove();var _,v,b=t.cellInfo.itemPosition,C=0,S=!1,y="";for(v="rowheader"==t.cellInfo.axis?h[0]:g[0],u=_=e(v).find("Member:nth-child("+(b+1)+") PARENT_UNIQUE_NAME").text(),n=b+1;n>0;n--)c=e(c).find("Tuple Member:nth-child("+n+") UName:contains('"+_+"')").parents("tuple"),y=(_=e(v).find("Member:nth-child("+(n-1)+") UName").text())+y;if(u=y+u,r=c.index()+1,u=t.cellInfo.previousElements.split(">#>").join().replace(/,/g,""),i=t.cellInfo.preRepItm.split(">#>").join().replace(/,/g,""),this.olapCtrlObj._drilledCellSet&&(C=this.olapCtrlObj._drilledCellSet.length),u=u+" !#"+t.cellInfo.axis,this.olapCtrlObj._drilledCellSet[0]&&C)for(o=0;o<C;o++){for(s=this.olapCtrlObj._drilledCellSet[o].length,t.cellInfo.parentUniqueName,d=0;d<s;d++){if(t.cellInfo.previousElements.startsWith(this.olapCtrlObj._drilledCellSet[o][d].key)){this.olapCtrlObj._drilledCellSet[o].push({key:u,repItms:i}),S=!0;break}if(this.olapCtrlObj._drilledCellSet[o][d].key.startsWith(t.cellInfo.previousElements)){this.olapCtrlObj._drilledCellSet[o].splice(d,0,{key:u,repItms:i}),S=!0;break}}if(S)break}else this.olapCtrlObj._drilledCellSet[0]=[],this.olapCtrlObj._drilledCellSet[0][0]={key:u,repItms:i},S=!0;S||(this.olapCtrlObj._drilledCellSet[C]=[],this.olapCtrlObj._drilledCellSet[C].push({key:u,repItms:i})),this._isPaging||("rowheader"==t.cellInfo.axis?(e(a).find("Axis[name|='Axis1']").find("Tuple"),this._insertCellSet("rowheader",c,h,g,l,p,f,r,a)):(e(a).find("Axis[name|='Axis1']").find("Tuple"),this._insertCellSet("colheader",c,g,h,m,p,f,r,a)),this._generateJSONData("onDemandDrill",this.olapCtrlObj.XMLACellSet))},_insertCellSet:function(t,a,i,l,r,n,o,s,d){var u,c,p,m,g,h=e(e(d).find("CellData Cell")[0]).clone();e(h).find("FmtValue").text(""),a.length>1?e(a[0]).after(i):e(a).after(i),c=n,"rowheader"==t?u=e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis0']").find("Tuple"):(u=e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis1']").find("Tuple"),c=o);var f=0,_=e(u).filter(function(t,a){if(l[f]&&e(a).find("UName").text()==e(l[f]).find("UName").text())return f++,!0}),v=0,b=!1;for(p=0;p<r;p++){var C,S="",y=0,O=0;for(C="rowheader"==t?(s+p)*c:p*(n+c)+s,m=0;m<c;m++)"rowheader"==t&&e(_[y]).index()==m||"colheader"==t&&e(_[v]).index()==p||!u.length?(g="rowheader"==t?p*o:v*o,S=e(e(d).find("CellData Cell")[g+y]).clone(),e(this.olapCtrlObj.XMLACellSet).find("CellData Cell:nth-child("+(C+O)+")").after(S),y++,b=!0):e(this.olapCtrlObj.XMLACellSet).find("CellData Cell:nth-child("+(C+O)+")").after(e(h).clone()),O++;"colheader"==t&&(b&&v++,b=!1)}this._setCellOrdinal(this.olapCtrlObj.XMLACellSet[1])},_clearDrilledCellSet:function(){for(var t,a=e.extend([],this.olapCtrlObj._drilledCellSet),i="",l=0;l<a.length;l++)(i=a[l][0].key.split("!#")).length&&(t=this._getDrilledMemeber({item:{previousElements:i[0]}})),t.length&&this._onDemandCollapse({drilledMembers:t,action:""},i[1])},_onDemandCollapse:function(a,i){e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis0']").find("Tuple"),e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis1']").find("Tuple");try{this.olapCtrlObj.model.dataSource=t.olap._mdxParser._clearCollapsedItems(i,a.drilledMembers[a.drilledMembers.length-1],this.olapCtrlObj.model.dataSource),a.drilledMembers=a.drilledMembers.splice(0,a.drilledMembers.length-1)}catch(e){this.olapCtrlObj._ogridWaitingPopup.hide()}a.drilledMembers.length?this._onDemandCollapse({drilledMembers:a.drilledMembers,action:a.action},i):"collapse"==a.action&&(this.olapCtrlObj.model.dataSource._isCollapse=!0,delete this._currIndex.axis,this.getJSONData({action:"onDemandCollapse"},this.olapCtrlObj.model.dataSource,this.olapCtrlObj))},_removeCellSets:function(t,a,i,l,r,n){for(var o,s,d,u,c,p,m,g=t.length,h=r[0],f=0;f<a.length;f++)if(e(a[f]).find("UName").text()==e(h).find("UName").text()){m=a[f];break}if(o=g,s=e(m).index())if("rowheader"==n){for(p=i.length;o>0;)e(e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis1']").find("Tuple")[s]).remove(),o--;for(c=ext=s;c<ext+g;c++)d=e(e(this.olapCtrlObj.XMLACellSet[1]).children()).splice(s*p,p),e(d).remove()}else{for(p=a.length,u=i.length;o>0;)e(e(this.olapCtrlObj.XMLACellSet).find("Axis[name|='Axis0']").find("Tuple")[s]).remove(),o--;for(c=0;c<u;c++)d=e(e(this.olapCtrlObj.XMLACellSet[1]).children()).splice(p*c-c*g+s,g),e(d).remove()}this._setCellOrdinal(this.olapCtrlObj.XMLACellSet[1])},_getDrilledMemeber:function(t){for(var a,i,l=[],r=t.item.previousElements.split(">#>").join().replace(/,/g,""),n=this.olapCtrlObj._drilledCellSet,o=(l=e.map(this.olapCtrlObj._drilledCellSet,function(t){return l=e.map(t,function(e){if(e.key.startsWith(r))return e})}),0);o<n.length;o++)for(a=0,i=n[o];n[o]&&a<n[o].length;a++)i[a]&&i[a].key.startsWith(r)&&(i.splice(a,1),a--,i.length||(n.splice(o,1),o--));return l},_getHeaderCollection:function(t,i){var l,r,n,o,s,d,u,c,p,m,g,h,f=[],_="",v=[],b=null,C={},S={},y=this;if(l=e(t).filter(function(t,a){var l,o,s,d=e(a).find("Member"),u=!("4"==e(d[0]).find("MEMBER_TYPE").text())&&-1!=e(d[0]).find("LName").text().indexOf("[(All)]"),c=u?1:0,p=0;for(b=null,u?(n=0,_="total"):(_="",n=d.length),l=1,-1!=e(d[0]).find("LName").text().toLowerCase().indexOf("[measures]")&&(l=0);l<d.length;l++)o=!1,"colheader"==i&&y._OlapDataSource.columns[l]?(y._OlapDataSource.columns[l].hasAllMember||null!=y._OlapDataSource.columns[l].expression)&&(o=!0):"rowheader"==i&&y._OlapDataSource.rows[l]&&(y._OlapDataSource.rows[l].hasAllMember||null!=y._OlapDataSource.rows[l].expression)&&(o=!0),-1!=e(d[l]).find("LName").text().toLowerCase().indexOf("[measures]")||o?(p=u,S.axis=i,S.posision=l,4==parseInt(e(d[l]).find("MEMBER_TYPE").text())&&(-1!=(s=e(d[l]).find("UName").text().toLowerCase()).indexOf("trend]")?(y._kpi||y._loadKpi(y.olapCtrlObj.model.dataSource,this._loadKpiSuccess,""),(C=y._isKpi(e(d[l]).find("UName").text(),"trend"))&&(b="trend",S.isKpiExist=!0)):-1!=s.indexOf("status]")?(y._kpi||y._loadKpi(y.olapCtrlObj.model.dataSource,this._loadKpiSuccess,""),(C=y._isKpi(e(d[l]).find("UName").text(),"status"))&&(b="status",S.isKpiExist=!0)):-1!=s.indexOf("goal]")&&(y._kpi||y._loadKpi(y.olapCtrlObj.model.dataSource,this._loadKpiSuccess,""),(C=y._isKpi(e(d[l]).find("UName").text()+"::"+e(d[l]).find("Caption").text(),"goal"))&&(b="goal",S.isKpiExist=!0)))):p=-1!=e(d[l]).find("LName").text().indexOf("[(All)]"),(0==u&&1==p||1==u&&0==p)&&(c++,n=l,_="total"),u=p;return r=t,c<2&&f.push({selIndx:r,totLvl:n,type:_,kpi:b,kpiInfo:C}),c<2}).map(function(t,l){for(var r,n,o,s,d=e(l).find("Member"),u=[],c=0;c<d.length;c++)r=!1,n=parseInt(e(d[c]).find("LNum").text()),"colheader"==i&&y._OlapDataSource.columns[c]?y._OlapDataSource.columns[c].hasAllMember||null!=y._OlapDataSource.columns[c].expression?n+=1:r=null!=y._OlapDataSource.columns[c].expression:"rowheader"==i&&y._OlapDataSource.rows[c]&&(y._OlapDataSource.rows[c].hasAllMember||null!=y._OlapDataSource.rows[c].expression?n+=1:r=null!=y._OlapDataSource.rows[c].expression),o=e(d[c]).find("PARENT_UNIQUE_NAME").length?e(d[c]).find("PARENT_UNIQUE_NAME").text():"",u.push({CSS:i,Value:""==e(d[c]).find("Caption").text()?"(Blank)":e(d[c]).find("Caption").text(),ColSpan:1,RowSpan:1,HUName:e(d[c]).attr("Hierarchy"),LName:e(d[c]).find("LName").text(),UName:e(d[c]).find("UName").text(),ChildCount:parseInt(e(d[c]).find("CHILDREN_CARDINALITY").text()),PUName:o,isCalcMem:r,LNum:n,MemberType:parseInt(e(d[c]).find("MEMBER_TYPE").text())}),(-1!=e(d[c]).find("LName").text().toLowerCase().indexOf("[measures]")||r)&&f[t].kpi&&(u[u.length-1].kpiInfo=f[t].kpiInfo,u[u.length-1].kpi=f[t].kpi),v[c]==a?v[c]=n:v[c]<n&&(v[c]=n);return(s=[])[0]=u,s}),"colheader"==i?this._cTotIndexInfo=f:this._rTotIndexInfo=f,l={headers:l,indxInfo:f,maxLvlLen:v},e.isEmptyObject(S)||(this._measureDt=e.extend({},S)),1,i.indexOf(this._OlapDataSource.values[0].axis.substring(0,3))>-1&&(this._measureDt.measureCount=this._OlapDataSource.values[0].measures.length),!this._OlapDataSource._enableBasicEngine&&!this._isPaging){var O={headers:[],indxInfo:[]},P=f.length,x=O.length,N=[],w=[];try{for(p=0;p<P;p++)p<P&&"total"==l.indxInfo[p].type&&(O.indxInfo.push(l.indxInfo.splice(p,1)[0]),O.headers.push(l.headers.splice(p,1)[0]),P--,p--);var M=l.headers.length>0?l.headers[0].length:0,T=0,I=0;for(this._measureDt.posision==M-1&&this._measureDt.axis==i&&(I=1),P=l.headers.length,p=0;p<=P;p++){var D=null,E=null,j=null,L=null;for(D=(L=this._updateMemberVariables(l.headers,D,E,j,p)).prev,E=L.next,j=L.cur,L=null,U=M-2-I;U>=0;U--)if(o=this._comparePrevMembers(l.headers,P,p,U,M,-2),p==P||p>0&&(D&&D[U].UName!=j[U].UName||D[U].UName==j[U].UName&&o))if(j&&D[U].UName==j[U].PUName)p-=s=this._removeSubtotalMembers(l,p,U),P-=s,D=(L=this._updateMemberVariables(l.headers,D,E,j,p)).prev,E=L.next,j=L.cur,L=null;else{var V,A=D,k=(x=0,0),R=0;for(D&&(R=D[U].LNum),j&&(k=j[U].LNum),d=!1,u=k;u<=R;u++){for(x=(V=this._getSummaryHeaders(A,O,U,d,I)).headers.length;V.headers.length>0;)l.headers.splice(p,0,V.headers.pop()),l.indxInfo.splice(p,0,V.indexInfo.pop());d=!0,p+=x,P+=x,A=l.headers[p-1]}}if(p==P&&O.headers.length>0){for(c=0;O.headers.length>0;)l.headers.splice(p,0,O.headers.pop()),l.indxInfo.splice(p,0,O.indxInfo.pop()),P++,c++;p+=c}}var U=0,F="";for(N={headers:[],indxInfo:[]},U=M-1-I,P=l.headers.length,p=0;p<P;p++)if(D=this._findPreviousMember(l.headers,p-1,U),p>0&&l.headers[p-1][U].UName!=l.headers[p][U].UName&&U==M-1-I&&v[U]>1){if(p>0&&l.headers[p]!=a&&0!=l.headers[p-1][U].LNum&&l.headers[p-1][U].UName==l.headers[p][U].PUName)for(m=D;m<0;m++)l.indxInfo[p+m].lnum=l.headers[p+m][U].LNum,l.indxInfo[p+m].type="total",N.indxInfo.push(l.indxInfo.splice(p+m,1)[0]),N.headers.push(l.headers.splice(p+m,1)[0]),p+1==P?F=l.headers[p][U].PUName:(p--,P--);0!=p&&l.headers[p]!=a&&l.headers[p-1][U].LNum>l.headers[p][U].LNum&&(g=[],P=(h=this._insertSummaryHeaders(l,N,g,p,U,M,T,F,!1,w)).itmCnt,p=h.hCnt,T=h.insCnt,w[U]=h.subPos)}}catch(e){this.olapCtrlObj._waitingPopup.hide()}}return"rowheader"==i?this._rBIndx=f:this._cBIndx=f,l},_insertSummaryHeaders:function(t,i,l,r,n,o,s,d,u,c){l=[];var p,m,g,h,f,_,v,b="";s=0;for(t.headers[r-1]&&(d=t.headers[r-1][n].PUName),g=t.headers.length,p=t.headers[r][n].LNum,m=t.headers[r-1][n].LNum,h=this._comparePrevMembers(t.headers,g,r,n,o,s),f=p;f<m;f++){for(e.grep(i.headers,function(e,i){(d==e[n].UName||t.headers[r+1+s]!=a&&t.headers[r][n].UName!=t.headers[r+1+s][n].UName&&t.headers[r][n].PUName==e[n].UName&&h)&&(b=e[n].PUName,l.push(i))}),d=b,h&&(l.reverse(),h=!1);l.length>0;){for(_=l.length-1,v=l[l.length-1],t.headers.splice(r,0,i.headers.splice(l[l.length-1],1)[0]),t.indxInfo.splice(r,0,i.indxInfo.splice(l[l.length-1],1)[0]);_>=0;)v<l[_]&&l[_]--,_--;l.pop(),g++,s++,u&&c[n]++}s>0&&(r+=s,s=0)}return{itmCnt:g,hCnt:r,insCnt:s,subPos:c[n]}},_comparePrevMembers:function(e,t,a,i,l,r){var n,o=!1;if(i>0&&a<t&&a+1+r>=0&&a+1+r<t)for(n=i-1;n>=0;n--)e[a][n].UName!=e[a+1+r][n].UName&&(o=!0);return o},_updateMemberVariables:function(e,t,a,i,l){return e[l]&&(i=e[l]),a=e[l+1]?e[l+1]:null,{cur:i,prev:e[l-1]?e[l-1]:null,next:a}},_removeSubtotalMembers:function(e,t,a){for(var i=t-1,l=e.headers[i][a].UName;e.headers[i]&&e.headers[i][a].UName==l;)e.indxInfo.splice(i,1),e.headers.splice(i,1),i--;return t-(i+1)},_getSummaryHeaders:function(t,a,i,l){var r,n=a.headers,o=t,s=i,d=[],u=[],c=a.indxInfo;return r=e.grep(n,function(e,t){for(var a=!1,i=s;i>=0&&(e[i].UName==o[i].UName||l&&i==s&&e[i].UName==o[i].PUName);i--)0==i&&(a=!0,u.push(c[t]));return a}),a.headers=e.grep(n,function(e,t){for(var a=!0,i=s;i>=0&&(e[i].UName==o[i].UName||l&&i==s&&e[i].UName==o[i].PUName);i--)0==i&&(a=!1);return a&&d.push(c[t]),a}),a.indxInfo=d,{headers:r,indexInfo:u}},_drillOrderHeaderCollection:function(t,a,i){var l=a,r=i,n=this;return e(t).map(function(t,a){var i,o,s,d,u=e(l[a.selIndx]).find("Member"),c=[];for(c[0]=[],i=0;i<u.length;i++)o=parseInt(e(u[i]).find("LNum").text()),"colheader"==r&&n._OlapDataSource.columns[i]?n._OlapDataSource.columns[i].hasAllMember&&(o+=1):"rowheader"==r&&n._OlapDataSource.rows[i]&&n._OlapDataSource.rows[i].hasAllMember&&(o+=1),s=e(u[i]).find("PARENT_UNIQUE_NAME").length?e(u[i]).find("PARENT_UNIQUE_NAME").text():"",c[0].push({CSS:r,Value:e(u[i]).find("Caption").text(),ColSpan:1,RowSpan:1,HUName:e(u[i]).attr("Hierarchy"),LName:e(u[i]).find("LName").text(),UName:e(u[i]).find("UName").text(),ChildCount:parseInt(e(u[i]).find("CHILDREN_CARDINALITY").text()),PUName:s,LNum:o,MemberType:parseInt(e(u[i]).find("MEMBER_TYPE").text())}),d=c[0][c[0].length-1],a.kpiInfo&&d.UName.toLowerCase().indexOf("[measures]")>-1&&4==d.MemberType&&(c[0][c[0].length-1].kpiInfo=a.kpiInfo),a.kpi&&d.UName.toLowerCase().indexOf("[measures]")>-1&&4==d.MemberType&&(c[0][c[0].length-1].kpi=a.kpi);return c})},_loadKpi:function(e,t,a){a={action:"loadFieldElements"};var i=this._getConnectionInfo(e.data),l='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>MDSCHEMA_KPIS</RequestType><Restrictions><RestrictionList><CATALOG_NAME>'+e.catalog+"</CATALOG_NAME><CUBE_NAME>"+e.cube+"</CUBE_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>"+e.catalog+"</Catalog></PropertyList></Properties></Discover></Body></Envelope>";this.olapCtrlObj.doAjaxPost("POST",i.url,{XMLA:l},this._loadKpiSuccess,null,a)},_loadKpiSuccess:function(e,t){this._kpi=t},_isKpi:function(t,a){var i=e(this._kpi).find("row:contains("+t.split("::")[0]+")"),l={};return!!i.length&&("trend"==a?(l.Graphic=e(i).find("KPI_TREND_GRAPHIC").text(),l.Value=e(i).find("KPI_NAME").text()):"status"==a?(l.Graphic=e(i).find("KPI_STATUS_GRAPHIC").text(),l.Value=e(i).find("KPI_NAME").text()):"goal"==a&&(l.Caption=t.split("::")[1],l.Value=e(i).find("KPI_NAME").text()),l)},_getValueCells:function(a,i){var l,r,n,o,s,d=this._columnHeaders.headers.length,u=this._rowHeaders.headers.length?this._rowHeaders.headers.length:1,c=0,p=0;if(this._valueCells[c]=[],this._fillAllValueCells(),a=e(this.olapCtrlObj.XMLACellSet[1]).children(),this._OlapDataSource._enableBasicEngine||this._isPaging)for(n=0;n<a.length;n++)p<d&&(this._valueCells[c][p]={ActualValue:e(a[n]).find("Value").text(),Value:e(a[n]).find("FmtValue")[0]?e(a[n]).find("FmtValue").text():"",FormatString:e(a[n]).find("FormatString")[0]?e(a[n]).find("FormatString").text():"",kpi:!t.isNullOrUndefined(this._cBIndx[p])&&this._cBIndx[p].kpi?this._cBIndx[p].kpi:!t.isNullOrUndefined(this._rBIndx[c])&&this._rBIndx[c].kpi?this._rBIndx[c].kpi:""},p++),p==d&&c+1<u&&(p=0,c++,this._valueCells[c]=[]);else for(l=0;l<u;l++)for(r=this._rBIndx.length?this._rBIndx[l].selIndx:0,n=0;n<d;n++)a&&(o=e(a[r*i+this._cBIndx[n].selIndx]),s="",(this._columnHeaders.indxInfo[n]&&"total"==this._columnHeaders.indxInfo[n].type||this._rowHeaders.indxInfo[l]&&"total"==this._rowHeaders.indxInfo[l].type)&&(s="summary"),p<d&&(this._valueCells[l][n]={ActualValue:e(o).find("Value").text(),Value:e(o).find("FmtValue")[0]?this._getFormatedValue(e(o),e(o).find("FormatString")[0]):"",FormatString:e(o).find("FormatString")[0]?e(o).find("FormatString").text():"",kpi:this._cBIndx[n].kpi?this._cBIndx[n].kpi:this._rBIndx[l]?this._rBIndx[l].kpi:"",summary:s,Span:this._isNoSummary&&"summary"==s?"Block":"None"},p++),p==d&&c+1<u&&(p=0,c++,this._valueCells[c]=[]));return this._valueCells},_fillAllValueCells:function(a){var i,l,r,n,o;a=e(this.olapCtrlObj.XMLACellSet[1]).children();if(!t.isNullOrUndefined(a))for(i=!e(a[0]).clone(),e(i).find("FmtValue").text(""),a,l=0;l<a.length;l++)if(r=parseInt(e(a[l]).attr("CellOrdinal")),a[l+1]&&(n=parseInt(e(a[l+1]).attr("CellOrdinal"))),r+1<n)for(o=r+1;o<n;o++)e(a[l]).after(e(i).clone().attr("CellOrdinal",o)[0]);return a},_setCellOrdinal:function(t){for(var a=e(t).find("Cell"),i=0;i<a.length;i++)e(a[i]).attr("CellOrdinal",i)},_getFormatedValue:function(a,i){var l;if(("en-US"==this.olapCtrlObj.model.locale||!e.isNumeric(parseFloat(e(a).find("Value").text())))&&e(a).length>0)l=e(a).find("FmtValue").text();else switch(i=e(i).length>0?e(i).text().toLowerCase():t.isNullOrUndefined(i)?"":i.length>0?i:"",l=e(a).length>0?parseFloat(a.find("Value").text()):a,i){case"decimal":l=parseFloat(t.widgetBase.formatting("{0:D2}",l,this.olapCtrlObj.model.locale));break;case"percent":l=t.widgetBase.formatting("{0:P0}",l,this.olapCtrlObj.model.locale);break;case"number":l=t.widgetBase.formatting("{0:N}",l,this.olapCtrlObj.model.locale);break;case"currency":l=t.widgetBase.formatting("{0:C2}",l,this.olapCtrlObj.model.locale);break;case"date":l=new Date(864e5*(Number(l)-2)+new Date("01/01/1900").getTime()),this._isDateTime(l)&&(l=t.widgetBase.formatting("{0:MM/dd/yyyy}",l,this.olapCtrlObj.model.locale));break;case"scientific":l=Number(l).toExponential(2).replace("e","E");break;case"accounting":l=this._toAccounting(l,"{0:C2}",this.olapCtrlObj.model.locale);break;case"time":l=new Date(864e5*(Number(l)-2)+new Date("01/01/1900").getTime()),this._isDateTime(l)&&(l=t.widgetBase.formatting("{0:h:mm:ss tt}",l,this.olapCtrlObj.model.locale));break;case"fraction":l="numerator"in(l=this._toFraction(l))?l.integer+" "+l.numerator+"/"+l.denominator:l.integer;break;default:l=e(a).find("FmtValue").text()}return l},_isDateTime:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.valueOf())},_toAccounting:function(e,a,i){var l,r,n,o,s=t.preferredCulture(i).numberFormat.currency.symbol;return val=t.widgetBase.formatting(a,e,this.olapCtrlObj.model.locale),n=val.replace(s,""),!(o=val.indexOf(s))||e<0&&1===o?(l=s,r=Number(e)?n:"-"):(l=Number(e)?n:"-",r=s),l+"   "+r},_toFraction:function(e){if(this._isNumber(e)){var t=e.toString(),a=t.split(".")[0],i=t.split(".")[1];if(!i)return{integer:e};var l=(+i).toString(),r=this._getPlaceValue(i,l),n=this._getGCD(l,r);return{integer:a,numerator:Number(l)/n,denominator:Number(r)/n}}return null},_isNumber:function(e){return e-parseFloat(e)>=0},_getGCD:function(e,t){return e=Number(e),(t=Number(t))?this._getGCD(t,e%t):e},_getPlaceValue:function(e,t){var a=e.indexOf(t)+t.length;return"1"+Array(a+1).join("0")},_populateEngine:function(i,l,r){var n,o,s,d,u,c=i.length,p=l.length,m=c?i[0].length:c,g=p?l[0].length:p,h=[],f=r.length,_=r[0].length;try{this.pivotEngine=[];var v,b=[],C=[],S=[],y=!1;for(d=0;d<p;d++)for(this.pivotEngine[d+g]==a&&(this.pivotEngine[d+g]=[]),0==d&&(this.pivotEngine[0]=[],this.pivotEngine[0][0]={CSS:"none",Value:"",ColSpan:this._indexCCell?this._indexCCell:1,RowSpan:this._indexRCell?this._indexRCell:1,HUName:"",LName:"",UName:"",LNum:""}),n=0;n<g;n++)y=!1,this._OlapDataSource.columns&&this._OlapDataSource.columns[n]&&this._OlapDataSource.columns[n].isNamedSets&&(y=!0),this._pivotEngineSpanCalculation("colheader",l,i,this._columnHeaders.maxLvlLen,r,n,d,C,b,this._cTotIndexInfo,y,S);for(v=this.pivotEngine.slice(),this.pivotEngine=[],d=0;d<v.length;d++)if(v[d])for(n=0;n<v[d].length;n++)v[d][n]&&(this.pivotEngine[n]==a&&(this.pivotEngine[n]=[]),this.pivotEngine[n][d]={CSS:v[d][n].CSS,ColSpan:v[d][n].RowSpan,HUName:v[d][n].HUName,LName:v[d][n].LName,LNum:v[d][n].LNum,RowSpan:v[d][n].ColSpan,UName:v[d][n].UName,PUName:v[d][n].PUName,Value:v[d][n].Value,ChildCount:v[d][n].ChildCount,MemberType:v[d][n].MemberType,Span:"Block"==v[d][n].Span?"Block":"None"},v[d][n].kpiInfo&&(this.pivotEngine[n][d].kpiInfo=v[d][n].kpiInfo,this.pivotEngine[n][d].kpi=v[d][n].kpi));var O=[],P=[];S=[];for(d=0;d<c;d++)for(this.pivotEngine[d+this._indexCCell]==a&&(this.pivotEngine[d+this._indexCCell]=[]),n=0;n<m;n++)y=!1,this._OlapDataSource.rows&&this._OlapDataSource.rows[n]&&this._OlapDataSource.rows[n].isNamedSets&&(y=!0),this._pivotEngineSpanCalculation("rowheader",i,l,this._rowHeaders.maxLvlLen,r,n,d,P,O,this._rTotIndexInfo,y,S);for(h=e.extend(!0,[],this.pivotEngine),m="rowheader"==this._measureDt.axis?this._indexRCell+1:this._indexRCell,g=this._indexCCell?this._indexCCell:g,d=0;d<f;d++)for(this.pivotEngine[d+g]!=a&&(m=this.pivotEngine[d+g].length),n=0;n<_;n++)t.isNullOrUndefined(r[d][n])||(this.pivotEngine[d+g]==a&&(this.pivotEngine[d+g]=[]),o=this._setClassName(r[d][n]),r[d][n].CSS=o,o.indexOf("kpiiconvalue")>-1&&("ejPivotGrid"==this.olapCtrlObj.pluginName||"ejPivotClient"==this.olapCtrlObj.pluginName)?r[d][n].Value="":o.indexOf("kpiiconvalue")>-1&&(r[d][n].Value=parseInt(r[d][n].Value)),this.pivotEngine[d+this._indexCCell][n+this._indexRCell]=r[d][n]);if(e.grep(this.pivotEngine,function(e){return e}),this._isPaging){for(t.isNullOrUndefined(this.olapCtrlObj._pagingSavedObjects.curDrilledItem.uniqueName)||"collapse"!=this.olapCtrlObj._pagingSavedObjects.curDrilledItem.action?t.isNullOrUndefined(this.olapCtrlObj._pagingSavedObjects.curDrilledItem.index)?t.isNullOrUndefined(this.olapCtrlObj._pagingSavedObjects.curDrilledItem.uniqueName)||(e.each(this.olapCtrlObj._pagingSavedObjects.savedHdrEngine,function(a,i){e.each(i,function(e,i){if(!t.isNullOrUndefined(i)&&i.UName==t.olap.base.olapCtrlObj._pagingSavedObjects.curDrilledItem.uniqueName.split("::")[0].split("amp;").join(""))return t.olap.base.olapCtrlObj._pagingSavedObjects.drillEngine.push(t.olap.base.olapCtrlObj._pagingSavedObjects.savedHdrEngine[a][e]),!1})}),this.olapCtrlObj._pagingSavedObjects.drillEngine[this.olapCtrlObj._pagingSavedObjects.drillEngine.length-1].ChildCount=-1):(this.olapCtrlObj._pagingSavedObjects.drillEngine.push(this.olapCtrlObj._pagingSavedObjects.savedHdrEngine[parseInt(this.olapCtrlObj._pagingSavedObjects.curDrilledItem.index.split(",")[1])][parseInt(this.olapCtrlObj._pagingSavedObjects.curDrilledItem.index.split(",")[0])]),this.olapCtrlObj._pagingSavedObjects.drillEngine[this.olapCtrlObj._pagingSavedObjects.drillEngine.length-1].ChildCount=-1):e.each(this.olapCtrlObj._pagingSavedObjects.drillEngine,function(e,a){if(a.UName==t.olap.base.olapCtrlObj._pagingSavedObjects.curDrilledItem.uniqueName.split("::")[0].split("amp;").join(""))return t.olap.base.olapCtrlObj._pagingSavedObjects.drillEngine.splice(e,1),!1}),e.map(this.olapCtrlObj._pagingSavedObjects.drillEngine,function(a){var i=0,l=e.map(t.olap.base.olapCtrlObj.model.dataSource.columns,function(e,l){return t.olap.base.olapCtrlObj._isMondrian?(i=e.fieldName.replace(/\]/g,"").replace(/\[/g,"")==a.HUName.replace(/\[/g," ").replace(/\[/g,"")?l:i,e.fieldName.replace(/\]/g,"").replace(/\[/g,"")==a.HUName.replace(/\[/g," ").replace(/\[/g,"")):(i=e.fieldName==a.HUName?l:i,e.fieldName==a.HUName)});a.CSS=l[i]?"colheader":"rowheader"}),this.olapCtrlObj._pagingSavedObjects.curDrilledItem={},d=this.pivotEngine[0][0].RowSpan-2;d>=0;d--){for("empty",n=1;n<this.pivotEngine[this.pivotEngine[0][0].RowSpan-1].length;n++)t.isNullOrUndefined(this.pivotEngine[d])&&(this.pivotEngine[d]=[]),t.isNullOrUndefined(this.pivotEngine[d+1])||!t.isNullOrUndefined(this.pivotEngine[d][n])||t.isNullOrUndefined(this.pivotEngine[d+1][n])||(this.pivotEngine[d][n]=e.grep(this.olapCtrlObj._pagingSavedObjects.drillEngine,function(e){return e.UName==t.olap.base.pivotEngine[d+1][n].PUName})[0],t.isNullOrUndefined(this.pivotEngine[d][n])||(this.pivotEngine[d][n].ColSpan=t.isNullOrUndefined(this.pivotEngine[d][n-1])||this.pivotEngine[d][n-1].UName!=this.pivotEngine[d][n].UName?1:this.pivotEngine[d][n-1].ColSpan+1,this.pivotEngine[d][n].RowSpan=1,this.pivotEngine[d][n].UName));for(s=1,n=this.pivotEngine[this.pivotEngine[0][0].RowSpan-1].length-2;n>0;n--)t.isNullOrUndefined(this.pivotEngine[d])||t.isNullOrUndefined(this.pivotEngine[d][n])||t.isNullOrUndefined(this.pivotEngine[d][n+1])||this.pivotEngine[d][n+1].UName!=this.pivotEngine[d][n].UName?t.isNullOrUndefined(this.pivotEngine[d])||t.isNullOrUndefined(this.pivotEngine[d][n+1])||(this.pivotEngine[d][n+1].ColSpan=1==s?this.pivotEngine[d][n+1].ColSpan:s,s=1):(this.pivotEngine[d][n].ColSpan,this.pivotEngine[d][n+1].ColSpan,s++)}for(d=this.pivotEngine[0][0].RowSpan;d<this.pivotEngine.length;d++)for(u="empty",n=this.pivotEngine[0][0].ColSpan-1;n>=0;n--)t.isNullOrUndefined(this.pivotEngine[d][n])?t.isNullOrUndefined(this.pivotEngine[d-1][n])||this.pivotEngine[d-1][n].UName!=u?(this.pivotEngine[d][n]=e.grep(this.olapCtrlObj._pagingSavedObjects.drillEngine,function(e){return e.UName==u})[0],t.isNullOrUndefined(this.pivotEngine[d][n])||(this.pivotEngine[d][n].RowSpan=1,this.pivotEngine[d][n].ColSpan=1,u=this.pivotEngine[d][n].PUName)):(this.pivotEngine[d][n]=e.grep(this.olapCtrlObj._pagingSavedObjects.drillEngine,function(e){return e.UName==u})[0],t.isNullOrUndefined(this.pivotEngine[d][n])||(this.pivotEngine[d][n].RowSpan=this.pivotEngine[d-1][n].RowSpan+1,this.pivotEngine[d][n].ColSpan=1,u=this.pivotEngine[d][n].PUName)):u=this.pivotEngine[d][n].PUName;this.olapCtrlObj._pagingSavedObjects.savedHdrEngine=h}}catch(e){this.olapCtrlObj._waitingPopup.hide()}},_pivotEngineSpanCalculation:function(t,i,l,r,n,o,s,d,u,c,p,m){var g,h,f,_,v,b,C,S,y,O,P,x=i.length,N="",w=l.length,M=x?i[0].length:x,T=w?l[0].length:w;n.length,n[0].length;"rowheader"==t?(T=this._indexCCell?this._indexCCell:T,N="row"):(T=this._indexRCell?this._indexRCell:T,N="col"),h=0,p&&(i[s][o].ChildCount=0),this._measureDt.axis==t&&this._measureDt.posision==M-1&&(h=1),d[o]||(d[o]=[]),this._isNoSummary&&!m[o]&&(m[o]=[]),this.pivotEngine[s+T]||(this.pivotEngine[s+T]=[]),u[o]=s;var I=r[o]?r[o]:1,D=0,E=0;for(f=0;f<o;f++)r[f]&&(D+=r[f]-1,E+=r[f]);if(!this._OlapDataSource._enableBasicEngine||this._OlapDataSource._checkSummaryHeaders)for(_=1;_<=I;_++){var j,L=!1,V=i[s][o].LNum;if(d[o][_]==a&&(d[o][_]=0),this._isNoSummary&&m[o][_]==a&&(m[o][_]=0),i[s-1]&&d[o][V]&&(0!=i[s][o].LNum&&i[s-1][o].PUName==i[s][o].UName||o+h==M-1&&i[s-1][o].LNum<i[s][o].LNum)&&(v=d[o][V],this._isNoSummary&&(v+=m[o][V],m[o][V]=0),this.pivotEngine[s+T-v][o+V-1+D]=i[s][o],o+h!=M-1&&(this.pivotEngine[s+T][o+V-1+D]=e.extend({},i[s][o]),this._isNoSummary&&(this.pivotEngine[s+T][o+V-1+D].Span="Block")),this._isNoSummary&&(this.pivotEngine[s+T-v][o+V-1+D].RowSpan=0),p||(this.pivotEngine[s+T-v][o+V-1+D].ChildCount=-1),this.pivotEngine[s+T-v][o+V-1+D].ColSpan=1,this.pivotEngine[s+T-v][o+V-1+D].RowSpan+=d[o][V],this._drilledJSONData(s+T-v,s+T,o+V-1+D,i[s][o]),d[o][V]=0,o+h==M-1&&i[s-1][o].LNum>i[s][o].LNum)){for(b=r[o]-V,C=this._findNextMember(i,s,o),S=0;S<C;S++)this.pivotEngine[s+T+S]||(this.pivotEngine[s+T+S]=[]),this.pivotEngine[s+T+S][o+D+V]={CSS:"summary "+N,Value:"Total",ColSpan:b,RowSpan:1,HUName:"",LName:"",UName:"",LNum:"",MemberType:"",ChildCount:"",Span:this._isNoSummary?"Block":"None"};this._isNoSummary||(this.pivotEngine[s+T-v][o+V-1+D].RowSpan+=C-1)}if(i[s][o].LNum>_&&(!this._isNoSummary||"total"!=c[s].type)?d[o][_]++:i[s][o].LNum>_&&this._isNoSummary&&"total"==c[s].type&&m[o][_]++,j=s+T,_==i[s][o].LNum&&0==s&&i[s][o].LNum>1)this.pivotEngine[j]||(this.pivotEngine[j]=[]),this.pivotEngine[j][o+_-1+D]=i[s][o],(!(i[s+1]!=a&&i[s][o].LNum<i[s+1][o].LNum)||o+h==M-1&&i[s+1]&&i[s][o].LNum<i[s+1][o].LNum)&&(this.pivotEngine[j][o+_-1+D].ColSpan+=r[o]-this.pivotEngine[j][o+_-1+D].LNum);else if(0!=s&&i[s][o].LNum>1&&_==i[s][o].LNum&&i[s-1][o].UName!=i[s][o].UName&&i[s-1][o].PUName!=i[s][o].UName)this.pivotEngine[j]==a&&(this.pivotEngine[j]=[]),this.pivotEngine[j][o+_-1+D]=i[s][o],(!(i[s+1]!=a&&i[s][o].LNum<i[s+1][o].LNum)||o+h==M-1&&i[s+1]&&i[s][o].LNum<i[s+1][o].LNum)&&(this.pivotEngine[j][o+_-1+D].ColSpan+=r[o]-this.pivotEngine[j][o+_-1+D].LNum);else if(0!=s&&_==i[s][o].LNum&&i[s-1][o].UName==i[s][o].UName)this._isNoSummary&&"total"==c[s].type?this._isNoSummary&&"total"==c[s].type&&m[o][_]++:d[o][_]++,this.pivotEngine[s+T][o+_-1+D]=i[s][o],this._isNoSummary&&"total"==c[s].type&&(this.pivotEngine[s+T][o+_-1+D].Span="Block"),(i[s+1]!=a&&i[s+1][o].UName!=i[s][o].UName||s+1==x&&d[o][_]>0)&&(y=d[o][_],O=i[s][o].LNum,this._isNoSummary&&(y+=m[o][_],m[o][_]=0),y&&this.pivotEngine[s+T-y][o+O-1+D]!=a&&this.pivotEngine[s+T-y][o+O-1+D].Value!=a&&(this.pivotEngine[s+T-y][o+O-1+D].RowSpan+=d[o][_],this._drilledJSONData(s+T-y,s+T,o+O-1+D,i[s][o])),d[o][_]=0);else if(i[s][o].LNum<2&&(_==i[s][o].LNum||0==i[s][o].LNum)||i[s][o].LNum<_&&i[s-1]&&i[s][o].LNum<i[s-1][o].LNum&&"total"==c[s].type&&this._measureDt.axis==t)if(_-1,i[s-1]&&i[s-1][o].UName==i[s][o].UName&&i[s][o].LName.toLowerCase().indexOf("[measures]")>-1&&(this.pivotEngine[s+T][o+_-1+D]=e.extend({},i[s][o]),this._measureDt.measureCount>1&&t==this._measureDt.axis||this._isNoSummary&&"total"==c[s].type?this._measureDt.measureCount>1&&t==this._measureDt.axis||!this._isNoSummary||"total"!=c[s].type||m[o][_]++:d[o][_]++,this._isNoSummary&&"total"==c[s].type&&(this.pivotEngine[s+T][o+_-1+D].Span="Block")),-1!=i[s][o].UName.indexOf("Measures")&&this._isPaging||"total"==c[s].type)if("total"==c[s].type&&-1==i[s][o].LName.toLowerCase().indexOf("[measures]")&&i[s][o].LNum!=_&&0!=r[o]){if((i[s][o-1]&&-1==i[s][o-1].LName.toLowerCase().indexOf("[measures]")||this._measureDt.axis!=t)&&(o>c[s].totLvl||o==M-1&&_>c[s].totLvl&&0!=c[s].totLvl||0==c[s].totLvl&&_-1>c[s].totLvl))break;for(var A=1,k=1,R=0;i[s-k][o]&&0==i[s-k][o].LNum&&!i[s][o].LName.toLowerCase().indexOf("[measures]")>-1;)i[s][o-1]&&i[s-k+1][o-1].UName!=i[s-k][o-1].UName&&R++,k++;0==i[s][o].LNum&&!i[s][o].LName.toLowerCase().indexOf("[measures]")>-1&&(P=0,0,s>0&&o>0&&i[s][o].LName.indexOf("(All)")>-1&&i[s][o-1]&&r[o-1]>1&&(P=this._findPreviousMember(i,s,o-1)),0!=s&&i[s][o-1]&&r[o-1]>1&&i[s+P]&&i[s][o-1].LNum<i[s+P][o-1].LNum&&(R=r[o-1]-i[s][o-1].LNum),"rowheader"==t?(A=this._indexRCell-E+R,this._indexRCell-A):"colheader"==t&&(A=this._indexCCell-E+R,this._indexCCell-A),(1!=r.length&&o==M-1||r.length>1&&o<M-1)&&(L=!0),this._measureDt.axis==t&&(A-=1),1,0!=s&&i[s][o-1]&&i[s][o-1].LNum+1,1,P=s+T,this.pivotEngine[s+T][o+_-1+D-R]={CSS:"summary "+N,Value:"Total",ColSpan:A,RowSpan:1,HUName:"",LName:"",UName:"",LNum:"",MemberType:"",ChildCount:"",Span:this._isNoSummary?"Block":"None"})}else-1!=i[s][o].LName.toLowerCase().indexOf("[measures]")?(i[s-1]&&i[s-1][o].UName==i[s][o].UName||(this.pivotEngine[s+T][o+_-1+D]=e.extend({},i[s][o]),this._isNoSummary&&"total"==c[s].type&&(this.pivotEngine[s+T][o+_-1+D].Span="Block")),(i[s-1]&&i[s-1][o].UName!=i[s][o].UName||s+1==x)&&(g=d[o][_],this._isNoSummary&&(g+=m[o][_],m[o][_]=0),g&&this.pivotEngine[s+T-g][o+_-1+D]!=a&&(this.pivotEngine[s+T-g][o+_-1+D].RowSpan+=d[o][_],this._drilledJSONData(s+T-g,s+T,o+_-1+D,i[s][o])),d[o][_]=0)):"total"==c[s].type&&1==i.length&&(this.pivotEngine[s+T][o+_-1+D]={CSS:"summary "+N,Value:"Total",ColSpan:1,RowSpan:1,HUName:"",LName:"",UName:"",LNum:"",MemberType:"",ChildCount:"",Span:this._isNoSummary?"Block":"None"});else i[s-1]&&i[s-1][o].UName==i[s][o].UName||(this.pivotEngine[s+T][o+_-1+D]=i[s][o],g=d[o][_],this._isNoSummary&&(g+=m[o][_],m[o][_]=0),g&&this.pivotEngine[s+T-g][o+_-1+D]!=a&&(this.pivotEngine[s+T-g][o+_-1+D].RowSpan+=d[o][_],this._drilledJSONData(s+T-g,s+T,o+_-1+D,i[s][o])),d[o][_]=0),0==!i[s][o].LNum&&(!(i[s+1]!=a&&i[s][o].LNum<i[s+1][o].LNum)||o+h==M-1&&i[s+1]&&i[s][o].LNum<i[s+1][o].LNum)&&this.pivotEngine[s+T][o+_-1+D]&&(this.pivotEngine[s+T][o+_-1+D].ColSpan+=r[o]-this.pivotEngine[s+T][o+_-1+D].LNum);if(L)break}else this.pivotEngine[s+T][o]=i[s][o]},_findNextMember:function(e,t,a){for(var i=0;e[t+i]&&e[t][a].UName==e[t+i][a].UName;)i++;return i},_findPreviousMember:function(e,t,a){for(var i=-1;e[t+i]&&e[t][a].UName==e[t+i][a].UName;)i--;return i},_drilledJSONData:function(t,a,i,l){for(var r=t+1;r<a;r++)this.pivotEngine[r][i]=e.extend({},l),this._isNoSummary&&(this.pivotEngine[r][i].Span="Block")},_setClassName:function(e){var t=parseInt(e.Value),a="value";if(e.kpi)if("trend"==e.kpi)switch(t){case-1:a="value kpiiconvalue kpidownarrow";break;case 0:a="value kpiiconvalue kpirightarrow";break;case 1:a="value kpiiconvalue kpiuparrow"}else if("status"==e.kpi)switch(t){case-1:a="value kpiiconvalue kpidiamond";break;case 0:a="value kpiiconvalue kpitriangle";break;case 1:a="value kpiiconvalue kpicircle"}return e.summary+" "+a},_getFieldItemsInfo:function(e){var t=this._getConnectionInfo(e.model.dataSource.data),a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>MDSCHEMA_HIERARCHIES</RequestType><Restrictions><RestrictionList><CATALOG_NAME>'+e.model.dataSource.catalog+"</CATALOG_NAME><CUBE_NAME>"+e.model.dataSource.cube+"</CUBE_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>"+e.model.dataSource.catalog+"</Catalog> <LocaleIdentifier>"+t.LCID+"</LocaleIdentifier></PropertyList></Properties></Discover></Body></Envelope>";e.doAjaxPost("POST",t.url,{XMLA:a},this._getHierarchyInfo,null,{pvtGridObj:e,action:"loadFieldElements"})},_getHierarchyInfo:function(t,a){for(var i,l,r=[],n=t.pvtGridObj,o=this._getConnectionInfo(n.model.dataSource.data),s=0;s<e(a).find("row").length;s++)i=e(e(a).find("row")[s]),r.push({pid:i.find("DIMENSION_UNIQUE_NAME").text(),id:i.find("HIERARCHY_UNIQUE_NAME").text(),name:i.find("HIERARCHY_CAPTION").text(),tag:i.find("HIERARCHY_UNIQUE_NAME").text(),hasAllMember:0==i.children("ALL_MEMBER").length});n._fieldData={hierarchy:r,hierarchySuccess:a,measures:[]},o.LCID.indexOf("1033")>=0&&!n.model.enableDrillThrough||(l='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>MDSCHEMA_MEASURES</RequestType><Restrictions><RestrictionList><CATALOG_NAME>'+n.model.dataSource.catalog+"</CATALOG_NAME><CUBE_NAME>"+n.model.dataSource.cube+"</CUBE_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>"+n.model.dataSource.catalog+"</Catalog> <LocaleIdentifier>"+o.LCID+"</LocaleIdentifier> </PropertyList></Properties></Discover></Body></Envelope>",n.doAjaxPost("POST",o.url,{XMLA:l},this._getMeasureInfo,null,{pvtGridObj:n,action:"loadFieldElements"}))},_getMeasureInfo:function(t,a){for(var i=[],l=0;l<e(a).find("row").length;l++){var r=e(e(a).find("row")[l]),n=r.children("MEASUREGROUP_NAME").text(),o=r.find("MEASURE_UNIQUE_NAME").text();i.push({id:o,pid:n,name:r.children("MEASURE_CAPTION").text(),tag:o})}t.pvtGridObj._fieldData.measures=i,t.pvtGridObj._fieldData.measureSuccess=a},_getConnectionInfo:function(t){var a={url:"",LCID:"1033"};return""!=t&&e.map(t.split(";"),function(e){e.toLowerCase().indexOf("locale")<0&&0==a.url.length?a.url=e:e.toLowerCase().indexOf("locale")>=0&&(a.LCID=e.replace(/ /g,"").split("=")[1])}),a},_applyTrim:function(i){var l=[],r=i.model.dataSource,n=this;i._fieldData&&i._fieldData.measures&&i._fieldData.hierarchy?(e.merge(l,i._fieldData.hierarchy),e.merge(l,i._fieldData.measures)):!i._fieldData||!i._fieldData.hierarchy||i._fieldData.hierarchy,r.rows=e.map(r.rows,function(i){if(!t.isNullOrUndefined(i)&&i.fieldName!=a)return i.fieldName=e.trim(i.fieldName),n._getCaption(i,l)}),r.columns=e.map(r.columns,function(i){if(!t.isNullOrUndefined(i)&&i.fieldName!=a)return i.fieldName=e.trim(i.fieldName),n._getCaption(i,l)}),r.filters=e.map(r.filters,function(i){if(!t.isNullOrUndefined(i)&&i.fieldName!=a)return i.fieldName=e.trim(i.fieldName),n._getCaption(i,l)}),r.values=r.values.length>0&&r.values[0].measures!=a?r.values:[{measures:[],axis:"columns"}],r.values[0].measures=e.map(r.values[0].measures,function(i){if(!t.isNullOrUndefined(i)&&i.fieldName!=a)return i.fieldName=e.trim(i.fieldName),n._getCaption(i,l)}),i.model.dataSource=r},_getCaption:function(i,l){var r=i.fieldName,n=[];return t.isNullOrUndefined(i.fieldCaption)&&(l.length>0?(n=e.map(l,function(t){if(t.tag!=a&&t.tag.toLowerCase()==e.trim(r.toLowerCase()))return t}),r.toLowerCase().indexOf("[measures]")>=0&&0==n.length&&r.split(".[").length>0?i.fieldCaption=r.split(".[")[1].replace(/]/g,""):n.length>0&&(i.hasAllMember=!!n[0].hasAllMember,i.fieldCaption=n[0].name)):0==n.length&&(i.fieldCaption=r)),i},clearDrilledItems:function(i,l,r){var n=l.action;return i.rows=e.grep(i.rows,function(e){return e.filterItems!=a&&"filtering"!=n&&delete e.filterItems,e.filterItems!=a&&"advancedFilter"!=n&&delete e.advancedFilter,e.drilledItems!=a&&delete e.drilledItems,e._prevDimElements!=a&&delete e._prevDimElements,e}),i.columns=e.grep(i.columns,function(e){return e.filterItems!=a&&"filtering"!=n&&delete e.filterItems,e.filterItems!=a&&"advancedFilter"!=n&&delete e.advancedFilter,e.drilledItems!=a&&delete e.drilledItems,e._prevDimElements!=a&&delete e._prevDimElements,e}),i.filters=e.grep(i.filters,function(e){return e.filterItems!=a&&"filtering"!=n&&delete e.filterItems,e.filterItems!=a&&"advancedFilter"!=n&&delete e.advancedFilter,e.drilledItems!=a&&delete e.drilledItems,e._prevDimElements!=a&&delete e._prevDimElements,e}),"filtering"!=n&&(r._currentReportItems=e.map(r._currentReportItems,function(e){if(!t.isNullOrUndefined(e.dataSrc)){if(e.dataSrc.cube!=i.cube)return e;if(e.dataSrc.reportName!=i.reportName)return e}}),t.isNullOrUndefined(r._schemaData)||r._schemaData.element.find(".filter").remove(),r._savedReportItems=e.extend(!0,[],r._currentReportItems)),t.olap.base._clearDrilledCellSet(),i}},t.olap._mdxParser={_getRowMDX:function(i){var l,r,n=e(i)[0].rows,o="",s="",d=[],u=!1,c=!1,p=i._isCollapse,m=i.values.length>0&&i.values[0].measures!=a&&i.values[0].axis==t.olap.AxisName.Row;if(t.isNullOrUndefined(i.providerName)||i.providerName==t.olap.Providers.SSAS){if(n.length>0){for(c=!t.isNullOrUndefined(n[0].drillCellInfo),l=0;l<n.length;l++){var g=!(t.isNullOrUndefined(n[l].isNamedSets)||!n[l].isNamedSets),h="",f="";n[l].fieldName==a||g?g&&(o=l>0?o+"*{"+n[l].fieldName+"}":"{"+n[l].fieldName+"}"):(h=this._getDimensionQuery(n[l],i,"rows",l,!1),d.push(h.replace(/["'\(\)]/g,"").replace(/["'\{\}]/g,"").replace(/\levels0/g,"levels(0)")),t.olap.base._isPaging&&c&&(f=this._getDimensionQuery(n[l],i,"rows",l,!0)),n[l].sortOrder&&n[l].sortOrder!=t.olap.SortOrder.None?(r=n[l].sortOrder==t.olap.SortOrder.Ascending?"asc":"desc",u=!0,o=o+(l>0?"*":"")+"{ORDER({HIERARCHIZE({"+(t.olap.base._isPaging&&c?f:h)+"})},"+n[l].fieldName+".CurrentMember.MEMBER_CAPTION,"+r+")}"):o=o+(l>0?"*":"")+"{HIERARCHIZE({({"+(t.olap.base._isPaging&&c?f:h)+"})})}")}t.olap.base._isPaging&&this._updateOlapReport(e(i)[0].rows,o,"rows",d),p&&(u=p),o=(u?" ":" HIERARCHIZE ")+"( {"+(t.olap.base._isPaging?o:this._updateOlapReport(e(i)[0].rows,o,"rows",d))+"})",p&&(o="HIERARCHIZE("+o+")")}m&&(s=t.olap._mdxParser._getMeasuresQuery(i),o=""!=o?(t.olap.base._isPaging?o.slice(0,-1):o)+(""!=o&&""!=s?t.olap.base._isPaging?"*":",":"")+s:(t.olap.base._isPaging&&""!=s?"(":"")+s),t.olap.base._isPaging&&(o=""!=o?""==s?("}"!=o[o.length-1]?o.slice(0,-1):o)+this._getDrilledSection(i,e.extend(!0,{},n),"row",s)+")":o+this._getDrilledSection(i,e.extend(!0,{},n),"row",s)+")":"")}else o=this._generateAxisMDXOnMondrian(i,n,m);return o},_generateAxisMDXOnMondrian:function(e,a,i){for(var l,r,n="",o=0;o<a.length;o++)l=t.olap.base._isPaging?"({"+a[o].fieldName+".children})":"DrillDownLevel({"+a[o].fieldName+"})",!t.isNullOrUndefined(a[o].drilledItems)&&a[o].drilledItems.length>0&&(l=this._getDrilledMDXOnMondrian(a[o].drilledItems,l)),!t.isNullOrUndefined(a[o].filterItems)&&!t.isNullOrUndefined(a[o].filterItems.values)&&a[o].filterItems.values.length>0&&(l="({{hierarchize(Union(Intersect((Except("+("Descendants("+a[o].fieldName+","+e._maxLevel+", SELF_AND_BEFORE)")+","+(r="{"+a[o].filterItems.values.join()+"}")+")),"+l+"),Except("+l+","+r+")))}})"),n+=(""==n?"":"*")+l;return i&&(n+=(""==n?"":"*")+t.olap._mdxParser._getMeasuresQuery(e)),n},_getDrilledMDXOnMondrian:function(e,a){for(var i=0;i<e.length;i++)a=t.olap.base._isPaging?"Except(DrillDownMember("+a+", {"+e[i].join()+"}),{"+e[i].join()+"})":"(DrillDownMember("+a+", {"+e[i].join()+"}))";return a},_getcolumnMDX:function(i){var l,r,n=e(i)[0].columns,o="",s="",d=[],u=!1,c=!1,p=i._isCollapse,m=i.values.length>0&&i.values[0].measures!=a&&i.values[0].axis==t.olap.AxisName.Column;if(t.isNullOrUndefined(i.providerName)||i.providerName==t.olap.Providers.SSAS){if(n.length>0){for(c=!t.isNullOrUndefined(n[0].drillCellInfo),l=0;l<n.length;l++){var g=!(!t.isNullOrUndefined(n[l].isNamedSets)&&n[l].isNamedSets),h=(u=!1,""),f="";n[l].fieldName!=a&&g?(h=this._getDimensionQuery(n[l],i,"columns",l,!1),d.push(h.replace(/["'\(\)]/g,"").replace(/["'\{\}]/g,"")),t.olap.base._isPaging&&c&&(f=this._getDimensionQuery(n[l],i,"columns",l,!0)),n[l].sortOrder&&n[l].sortOrder!=t.olap.SortOrder.None?(r=n[l].sortOrder==t.olap.SortOrder.Ascending?"asc":"desc",u=!0,o=o+(l>0?"*":"")+"{ ORDER ({HIERARCHIZE ({"+(t.olap.base._isPaging&&c?f:h)+"})},"+n[l].fieldName+".CurrentMember.MEMBER_CAPTION,"+r+")}"):o=o+(l>0?"*":"")+"{"+(t.olap.base._isPaging&&c?f:h)+"}"):o=l>0?o+"*{"+n[l].fieldName+"}":"{"+n[l].fieldName+"}"}t.olap.base._isPaging&&c&&this._updateOlapReport(e(i)[0].columns,o,"columns",d),p&&(u=p),o=(u?" ":" HIERARCHIZE ")+"( {"+(t.olap.base._isPaging?o:this._updateOlapReport(n,o,"columns",d))+"})",p&&(o="HIERARCHIZE("+o+")")}m&&(s=t.olap._mdxParser._getMeasuresQuery(i),o=""!=o?(t.olap.base._isPaging?o.slice(0,-1):o)+(""!=o&&""!=s?t.olap.base._isPaging?"*":",":"")+s:(t.olap.base._isPaging&&""!=s?"(":"")+s),t.olap.base._isPaging&&(o=""!=o?""==s?("}"!=o[o.length-1]?o.slice(0,-1):o)+this._getDrilledSection(i,e.extend(!0,{},n),"column",s)+")":o+this._getDrilledSection(i,e.extend(!0,{},n),"column",s)+")":"")}else o=this._generateAxisMDXOnMondrian(i,n,m);return o},_getDrilledSection:function(a,i,l,r){var n="";i=i;return e.each(i,function(a,i){t.isNullOrUndefined(i.drilledItems)||e.each(i.drilledItems,function(t,i){var l="",o="";e.each(i,function(e,t){l=""==l?"{"+t+"}":l+"*{"+t+"}",t=e==a?t.replace(".children",""):t,o=""==o?"{"+t+"}":o+"*{"+t+"}"}),""!=r&&(l=l+"*"+r,o=o+"*"+r),n=""==n?"+{"+l+"}-{"+o+"}":n+"+{"+l+"}-{"+o+"}"})}),n},_getSortedMembers:function(a){var i,l=a.fieldName;return a.sortOrder&&a.sortOrder!=t.olap.SortOrder.None?(i="ascending"==a.sortOrder?"asc":"desc",e.map(a.drilledItems,function(t){return e.map(t,function(e){return e.indexOf(l)>=0&&(e="order ( "+e+" , "+l+".CurrentMember.MEMBER_CAPTION,"+i+")"),e})})):a.drilledItems},_getAvailCount:function(a,i,l){var r=0;return e.each(a.split("--"),function(e,a){a=a.replace(l[e],""),i.split("--").length>0&&!t.isNullOrUndefined(i.split("--")[e])&&(r+=a.indexOf(i.split("--")[e])>-1&&!((a+"$").indexOf(i.split("--")[e])>-1)||i.split("--")[e].indexOf(a)>-1&&!(i.split("--")[e].indexOf(a+"$")>-1)?1:0)}),r},_updateTmpItems:function(a,i,l,r){var n=e.map(i.split("--"),function(e,a){return t.isNullOrUndefined(l.split("--")[a])||e.replace(r[a],"")!=l.split("--")[a].replace(r[a],"")||-1!=e.indexOf(r[a])?e:l.split("--")[a]}).join("--");-1==a.indexOf(n)&&a.push(n)},_updateExpandCollection:function(a,i,l){return e.each(i,function(r,n){e.each(i,function(i,r){var o,s,d;n!=r&&(o=0,e.each(r.split("--"),function(e,a){a=a.replace(l[e],""),t.isNullOrUndefined(n.split("--")[e])||(o+=r.split(l[e]).join("").indexOf(n.split("--")[e].replace(l[e],""))>-1||n.split("--")[e].replace(l[e],"").indexOf(a)>-1?1:0)}),o==r.split("--").length&&t.olap._mdxParser._updateTmpItems(a,n,r,l),o==n.split("--").length&&t.olap._mdxParser._updateTmpItems(a,r,n,l),s=[],d=0,e.each(r.split("--"),function(e,a){var i=n.split("--").length>e?n.split("--")[e]:"";t.isNullOrUndefined(i)||""==i||(a!=i&&a.indexOf("$")>-1&&(a.indexOf(i)>-1||i.indexOf(a)>-1)&&n.split("--").length-1>e?(s.push(a),d++):s.push(i))}),d>0&&a.push(s.concat(e.map(n.split("--"),function(e,t){if(t>=s.length)return e})).join("--")))})}),a},_updateDrillQuery:function(a,i,l,r){var n,o,s,d=t.olap.base._isRowDrilled||t.olap.base._isColDrilled,u=e.map(a,function(a){var i=e.map(t.olap.base.olapCtrlObj._prevDrillElements,function(e){if(e.indexOf(a.fieldName)>-1)return e}).join("$");if(""!=i)return i}).join("--"),c=e.map(r,function(e){return e.indexOf("DrillDownlevel")>=0&&(e=e.replace("DrillDownlevel","DrillDownlevel(")+")"),e}),p=e.map(a,function(e){return!t.isNullOrUndefined(e.hasAllMember)&&e.hasAllMember?".levels(0).AllMembers":".children"});d||""==u||(t.isNullOrUndefined(a[u.split("--").length-1]._prevDimElements)||-1!=a[u.split("--").length-1]._prevDimElements.indexOf(u+p[u.split("--").length-1])?a[u.split("--").length-1]._prevDimElements=a[u.split("--").length-1]._prevDimElements.filter(function(e){if(t.olap._mdxParser._getAvailCount(e,u,p)!=u.split("--").length)return e}):a[u.split("--").length-1]._prevDimElements.push(u+p[u.split("--").length-1]+"!#collapse")),a=e.map(a,function(a){return t.isNullOrUndefined(a._prevDimElements)?a:(a._prevDimElements=e.map(a._prevDimElements,function(a){var i=-1!=a.indexOf("!#collapse");return d?a.indexOf("!#collapse")>-1?(a=a.replace("!#collapse",""),t.olap._mdxParser._getAvailCount(a,u,p)!=u.split("--").length?a:void 0):a:""!=u?(a=a.replace("!#collapse",""),t.olap._mdxParser._getAvailCount(a,u,p)==u.split("--").length?e.map(a.split("--"),function(e,t){return t==u.split("--").length-1&&-1==e.indexOf(p[t])?u.split("--")[u.split("--").length-1]+"":e}).join("--")+(i?"!#collapse":""):a+(i?"!#collapse":"")):a}),""!=u&&(a._prevDimElements=e.map(a._prevDimElements,function(e){if(!(e.indexOf("!#collapse")>-1&&a._prevDimElements.filter(function(e){if(-1==e.indexOf("!#collapse"))return e}).indexOf(e.replace("!#collapse",""))>-1||-1==e.indexOf("!#collapse")&&a._prevDimElements.map(function(e){if(e.indexOf("!#collapse")>-1)return e.replace("!#collapse","")}).indexOf(e)>-1))return e})),a)});var m=e.map(a,function(e){if(!t.isNullOrUndefined(e._prevDimElements))return e._prevDimElements}).filter(function(e){if(-1==e.indexOf("!#collapse"))return e}),g=e.map(a,function(e){if(!t.isNullOrUndefined(e._prevDimElements))return e._prevDimElements}).filter(function(e){if(e.indexOf("!#collapse")>-1)return e}).map(function(e){return e.replace("!#collapse","")}),h=0==u.length?a.length:u.split("--").length,f=[];return d&&(m=e.map(m,function(e){if(t.olap._mdxParser._getAvailCount(e,u,p)==u.split("--").length)return e})),n=t.olap._mdxParser._updateExpandCollection([],m,p),o=t.olap._mdxParser._updateExpandCollection([],n,p),m=m.concat(n.concat(o)),n=[],e.each(m,function(t,a){e.each(g,function(t,i){var l=[],r=0;a.split("--").length>i.split("--").length&&(e.each(i.split("--"),function(e,t){var i=a.split("--")[e];(t.replace(p[e],"").indexOf(i.replace(p[e],""))>-1||i.replace(p[e],"").indexOf(t.replace(p[e],""))>-1)&&(l.push(t),r++)}),i.split("--").length==r&&r<a.split("--").length&&-1==n.indexOf(l.concat(e.map(a.split("--"),function(e,t){if(t>=l.length)return e})).join("--"))&&-1==g.indexOf(l.concat(e.map(a.split("--"),function(e,t){if(t>=l.length)return e})).join("--"))&&n.push(l.concat(e.map(a.split("--"),function(e,t){if(t>=l.length)return e})).join("--")))})}),g=g.concat(n),m=e.map(m,function(a){var i=d?h:a.split("--").length;return e.map(a.split("--"),function(e,a){return a<i-1?!t.isNullOrUndefined(u.split("--")[a])&&(u.split("--")[a].indexOf(e.replace(p[a],"")>-1)||e.replace(p[a],"").indexOf(u.split("--")[a])>-1)&&d?c[a].split("&amp;").join("&"):e.split("$")[e.split("$").length-1]:a==i-1?d?c[a].split("&amp;").join("&"):e.replace(p[a],"").split("$")[e.split("$").length-1]+p[a]:e.split("$")[e.split("$").length-1]}).join("--")}).sort(function(e,t){return e.split("--").length-t.split("--").length}),m=e.map(m,function(t){var a=[];return(a=t.split("--").length<c.length?[t.split("&").join("&amp;").split("--").concat(e.map(c,function(e,a){if(t.split("--").length-1<a)return e}))]:[t.split("&").join("&amp;").split("--")]).join()!=c.join()?a:void 0}),g=e.map(g,function(t){return t.split("--").length<c.length?[t.split("&").join("&amp;").split("--").map(function(e){return e.split("$")[e.split("$").length-1]}).concat(e.map(c,function(e,a){if(t.split("--").length-1<a)return e}))]:[t.split("&").join("&amp;").split("--").map(function(e){return e.split("$")[e.split("$").length-1]})]}),f=[],e.each(e.map(m,function(e){return e.join("--")}),function(e,t){(0==f.length||-1==f.indexOf(t))&&f.push(t)}),s={expandCollection:m=e.map(f,function(e){return[e.split("--")]}),collapseCollection:g},m.length>0&&a.length>1&&r[r.length-1].indexOf(".children")<0&&(i=this._getDrillQuery(s,i,a)),i},_updateOlapReport:function(i,l,r,n){var o,s,d,u=this;return"rows"==r?(o=e.map(i,function(e,t){if(i[t].drilledItems!=a)return u._getSortedMembers(e,i)}),t.olap.base._isRowDrilled&&"rows"==t.olap.base._currIndex.axis&&i[t.olap.base._currIndex.Index]!=a&&i[t.olap.base._currIndex.Index].drilledItems!=a?(d=e.map(n,function(e){return e.indexOf("DrillDownlevel")>=0&&(e=e.replace("DrillDownlevel","DrillDownlevel(")+")"),e}),i[t.olap.base._currIndex.Index].drilledItems.push(d),t.olap.base._isRowDrilled=!1):o.length>0&&(t.olap.base._currIndex.axis==a||"columns"==t.olap.base._currIndex.axis&&!t.olap.base._isRowDrilled)&&(l=this._getDrillQuery(o,l,i)),t.isNullOrUndefined(t.olap.base._currIndex.axis)||"rows"!=t.olap.base._currIndex.axis||(t.olap.base._currIndex={})):(s=e.map(i,function(e,t){if(i[t].drilledItems!=a)return u._getSortedMembers(e,i)}),t.olap.base._isColDrilled&&"columns"==t.olap.base._currIndex.axis&&i[t.olap.base._currIndex.Index]!=a&&i[t.olap.base._currIndex.Index].drilledItems!=a?(d=e.map(n,function(e){return e.indexOf("DrillDownlevel")>=0&&(e=e.replace("DrillDownlevel","DrillDownlevel(")+")"),e}),i[t.olap.base._currIndex.Index].drilledItems.push(d),t.olap.base._isColDrilled=!1):s.length>0&&(t.olap.base._currIndex.axis==a||"rows"==t.olap.base._currIndex.axis&&!t.olap.base._isColDrilled)&&(l=this._getDrillQuery(s,l,i)),t.isNullOrUndefined(t.olap.base._currIndex.axis)||"columns"!=t.olap.base._currIndex.axis||(t.olap.base._currIndex={})),l},_getDrillQuery:function(i,l,r){for(var n,o,s,d="",u=i,c=0;c<u.length;c++)if(u[c][u[c].length-1].toLowerCase().indexOf(".children")>=0||u[c][u[c].length-1].toLowerCase().indexOf("drilldownlevel")>=0||u[c][u[c].length-1].toLowerCase().indexOf("members")>=0||(u[c][u[c].length-1]=u[c][u[c].length-1]+".children"),u[c].length!=r.length){for(n=e.map(r,function(i){if(i.fieldName!=a&&i.fieldName!=u[c][[u[c].length-1]].split(".").splice(0,2).join("."))return{uniqueName:t.olap.base._isPaging?"("+e.trim(i.fieldName)+").children":"DrillDownLevel("+e.trim(i.fieldName)+")",fieldName:e.trim(i.fieldName)}}),o=0;o<n.length;o++)s=this._getItemPosition(r,n[o].fieldName)[0],u[c].toString().indexOf(n[o].fieldName)>=0||u[c].splice(s,0,n[o].uniqueName);d=d+""+(c>0?",":"")+"\n ("+u[c]+")"}else d=d+""+(c>0?",":"")+"\n ("+u[c].toString()+")\n";return"("+l+"),"+d},_createDrillThroughQuery:function(a,i){var l,r;if(i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode)i._waitingPopup.show(),l=e(i.element).hasClass("e-pivotclient")?i.element.find(".e-pivotgrid").data("ejPivotGrid"):i,i.doAjaxPost("POST",i.model.url+"/"+i.model.serviceMethodSettings.drillThroughDataTable,JSON.stringify({currentReport:e(i.element).parents(".e-pivotclient").length>0?i.currentReport:JSON.parse(l.getOlapReport()).Report,layout:e(i.element).hasClass("e-pivotclient")?i.model.gridLayout:i.model.layout,cellPos:"",selector:a}),function(e){this._trigger("drillThrough",{element:e.element,data:e})}),i._waitingPopup.hide();else{var n=i.measureGrp,o="",s="DRILLTHROUGH Select("+i._colHeader.join()+","+i._rowHeader.join()+") on 0 from ["+i.model.dataSource.cube+"]";e.map(i._fieldData.measures,function(e){e.pid==n&&(o+=""==o?"["+n+"]."+e.id.split(".")[1]:",["+n+"]."+e.id.split(".")[1])}),s=s.replace(/&/g,"&amp;"),r=i._getConnectionInfo(i.model.dataSource.data),pData='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header></Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement> '+s+" </Statement> </Command> <Properties> <PropertyList> <Catalog>"+i.model.dataSource.catalog+"</Catalog> </PropertyList> </Properties></Execute> </Body> </Envelope>",i.doAjaxPost("POST",r.url,{XMLA:pData},t.Pivot._generateDrillData,null,{pvtGridObj:i,action:"loadFieldElements"})}},_getDimensionQuery:function(i,l,r,n,o){var s="";return i.drillCellInfo==a||o?s=t.isNullOrUndefined(i.expression)?t.isNullOrUndefined(i.hasAllMember)||!i.hasAllMember?t.olap.base._isPaging?"(("+e.trim(i.fieldName)+").children)":"DrillDownlevel(("+e.trim(i.fieldName)+"))":"(("+e.trim(i.fieldName)+").levels(0).AllMembers)":"("+i.hierarchyUniqueName+".["+(i.fieldCaption||i.fieldName)+"])":(s="{("+i.drillCellInfo.uniqueName+")}",delete i.drillCellInfo),s},_updateReport:function(a,i,l,r){var n,o,s,d={};r._isMondrian?(n=i.preRepItm.split(">#>"),o=(s=i.itemPosition)?i.previousElements.split(n[s-1])[1].split("][").length:i.previousElements.split("][").length,l.drilledItems&&(l.drilledItems.length<=o-1&&(l.drilledItems[o-1]=[]),i.action&&"collapse"==i.action?l.drilledItems[o-1]=e.grep(l.drilledItems[o-1],function(e){return e!=n[s]}):l.drilledItems[o-1].push(n[s])),d={action:"mondrianDrilldown"}):(l.drillCellInfo=e.extend({},i),l.drillCellInfo.uniqueName="("+e.trim(l.drillCellInfo.uniqueName)+".children)",d={action:"drilldown",cellInfo:i}),t.olap.base.getJSONData(d,r.model.dataSource,r)},_splitCellInfo:function(e){var a,i=t.olap.base.olapCtrlObj._isMondrian?1:2;return e&&(a={hierarchyUniqueName:e.split("::")[1].split(".").splice(0,i).join("."),uniqueName:e.split("::")[0],levelUniqueName:e.split("::")[1],leveName:e.split("::")[2],parentUniqueName:e.split("::")[3]}),a},updateDrilledReport:function(i,l,r){var n,o,s,d,u;t.olap.base._isPaging&&!t.isNullOrUndefined(r._pagingSavedObjects.curDrilledItem)&&(r._pagingSavedObjects.curDrilledItem=i);t.olap._mdxParser;var c,p,m,g=null,h="",f="";if((c=this._splitCellInfo(i.uniqueName)).targetUName=i.uniqueName,c.previousElements="",(p="rowheader"==l?r.model.dataSource.rows:"colheader"==l?r.model.dataSource.columns:null).length>0){if(g=(m=e.map(p,function(t,i){return t.fieldName!=a&&e.trim(t.fieldName).toLowerCase()==e.trim(c.hierarchyUniqueName).toLowerCase()?{report:t,index:i}:t.hierarchyUniqueName!=a&&e.trim(t.hierarchyUniqueName).toLowerCase()==e.trim(c.hierarchyUniqueName).toLowerCase()?{report:t,index:i}:void 0}))[0].report,c.itemPosition=m[0].index,!t.isNullOrUndefined(r._pivotRecords)||t.isNullOrUndefined(r._pivotClientObj)||t.isNullOrUndefined(r._pivotClientObj._pivotRecords)||(r._pivotRecords=r._pivotClientObj._pivotRecords),n=e.map(r._pivotRecords.records,function(e){if(e.Info.replace(/&/g,"&amp;")==i.uniqueName)return e.Index}),g.drilledItems!=a?g.drilledItems:g.drilledItems=[],t.olap.base._currIndex={axis:"rowheader"==l?"rows":"columns",Index:m[0].index},"ejPivotChart"==r.pluginName||"ejPivotTreeMap"==r.pluginName||t.isNullOrUndefined(i.index)){for(c.cellIndex=n.length>0?"":i.index,c.axis=v=l,"rowheader"!=l?t.olap.base._isColDrilled=i.action==a||"collapse"!=i.action:t.olap.base._isRowDrilled=i.action==a||"collapse"!=i.action,o=0;o<r.model.dataSource.rows.length&&i.seriesInfo[o]!=i.uniqueName;o++)r.model.dataSource.rows[o].drillCellInfo=this._splitCellInfo(i.seriesInfo[o]);for(c.previousElements="",c.preRepItm="",o=0;o<i.uniqueNameArray.length;o++)c.previousElements+=this._splitCellInfo(i.uniqueNameArray[o]).uniqueName;for(o=0;o<i.seriesInfo.length;o++)c.preRepItm+=""==c.preRepItm?this._splitCellInfo(i.seriesInfo[o]).uniqueName:">#>"+this._splitCellInfo(i.seriesInfo[o]).uniqueName}else{c.cellIndex=i.index;var _=c.hierarchyUniqueName,v="",b=(h="",""),C=c.cellIndex.split(",")[0],S=c.cellIndex.split(",")[1];if("rowheader"==l)for(v="rowheader",t.olap.base._isRowDrilled=i.action==a||"collapse"!=i.action,o=parseInt(C);o>=0;o--)!r._pivotRecords.records[parseInt(o*r._pivotRecords.rowCount+parseInt(C))].Info.indexOf(_)>=0&&(b=r._pivotRecords.records[parseInt(o*r._pivotRecords.rowCount+parseInt(S))].Info,(s=this._splitCellInfo(b))&&(h=s.uniqueName+h),""==b||b.indexOf(_)>=0||((d=this._splitCellInfo(b)).uniqueName=d.uniqueName.replace(/&/g,"&amp;"),f=d.uniqueName+">#>"+f,currReport=e.map(p,function(t,i){return t.fieldName!=a&&e.trim(t.fieldName).toLowerCase()==e.trim(d.hierarchyUniqueName).toLowerCase()?i:t.hierarchyUniqueName!=a&&e.trim(t.hierarchyUniqueName).toLowerCase()==e.trim(d.hierarchyUniqueName).toLowerCase()?i:void 0}),"collapse"!=i.action&&(r.model.dataSource.rows[currReport[0]].drillCellInfo=d),_=d.hierarchyUniqueName));else for(v="colheader",t.olap.base._isColDrilled=i.action==a||"collapse"!=i.action,o=parseInt(S);o>=0;o--)!r._pivotRecords.records[parseInt(C*r._pivotRecords.rowCount+parseInt(o))].Info.indexOf(_)>=0&&(b=r._pivotRecords.records[parseInt(C*r._pivotRecords.rowCount+parseInt(o))].Info,(s=this._splitCellInfo(b))&&(h=s.uniqueName+(r._isMondrian?"":">#>")+h),""==b||b.indexOf(_)>=0||((d=this._splitCellInfo(b)).uniqueName=d.uniqueName.replace(/&/g,"&amp;"),f=d.uniqueName+(r._isMondrian?">#>":"")+f,currReport=e.map(p,function(t,i){return t.fieldName!=a&&e.trim(t.fieldName).toLowerCase()==e.trim(d.hierarchyUniqueName).toLowerCase()?i:t.expression!=a&&e.trim(t.hierarchyUniqueName).toLowerCase()==e.trim(d.hierarchyUniqueName).toLowerCase()?i:void 0}),"collapse"!=i.action&&(r.model.dataSource.columns[currReport[0]].drillCellInfo=d),_=d.hierarchyUniqueName));f+=c.uniqueName,c.previousElements=h.replace(/&amp;/g,"&"),c.preRepItm=f.replace(/&amp;/g,"&"),c.axis=v}if(c.previousElements=c.previousElements.replace(/&amp;/g,"&"),c.preRepItm=c.preRepItm.replace(/&amp;/g,"&"),i.action)if(i.action){if(r._isMondrian)return c.action="collapse",void t.olap._mdxParser._updateReport(g.drilledItems,c,g,r);if(t.isNullOrUndefined(c)||t.isNullOrUndefined(c.previousElements)||""==c.previousElements||(t.olap.base.olapCtrlObj._prevDrillElements=c.previousElements.split("][").join("]>#>[").split(">#>")),(u=t.olap.base._getDrilledMemeber({item:c})).length&&!t.olap.base._isPaging)t.olap.base._onDemandCollapse({drilledMembers:u,action:i.action},v);else{for(;0!=u.length;)t.olap.base.olapCtrlObj.model.dataSource=t.olap._mdxParser._clearCollapsedItems(v,u[u.length-1],t.olap.base.olapCtrlObj.model.dataSource),u=u.splice(0,u.length-1);t.olap.base.getJSONData(i,t.olap.base.olapCtrlObj.model.dataSource,t.olap.base.olapCtrlObj)}}else e(i.drilledMember).clone(!0),t.olap.base._onDemandExpand({action:"drilldown",cellInfo:c,isExist:!0},i.drilledMember);else u=t.olap.base._getDrilledMemeber({item:c}),t.olap._mdxParser._updateReport(g.drilledItems,c,g,r)}},_clearCollapsedItems:function(t,i,l){return"rowheader"==t?l.rows=e.map(l.rows,function(t){return t.drilledItems!=a&&t.drilledItems.length&&(t.drilledItems=e.map(t.drilledItems,function(e){if(e.join("").indexOf(i.repItms.replace(/&/g,"&amp;"))<0)return[e]})),t}):"colheader"==t&&(l.columns=e.map(l.columns,function(t){return t.drilledItems!=a&&t.drilledItems.length&&(t.drilledItems=e.map(t.drilledItems,function(e){if(e.join("").indexOf(i.repItms.replace(/&/g,"&amp;"))<0)return[e]})),t})),l},_getSlicerMDX:function(t,i){for(var l=e(t)[0].filters,r="",n=this,o=i._fieldData,s=e.merge(e.merge([],t.columns),t.rows),d=0;d<l.length;d++)e.grep(s,function(e){var t=n._getDimensionUniqueName(e.fieldName,o),a=n._getDimensionUniqueName(l[d].fieldName,o);return t==a&&!(i._isMondrian&&""==a&&""==t)}).length>0||(l[d].fieldName!=a&&l[d].filterItems==a?r=r+(""!=r?"*":"")+"{"+this._getDimensionQuery(l[d])+"}":l[d].filterItems!=a&&(r=r+(""!=r?"*":"")+"{"+l[d].filterItems.values.toString()+"}"));return""!=r?"where ("+r.replace(/DrillDownlevel/g,"")+")":""},_getDimensionUniqueName:function(t,a){var i,l=a.hierarchy;return l?(i=e.map(l,function(e){if(e.id.toLowerCase()==t.toLowerCase())return e.pid})).length>0?i[0]:"":t.split(".")[0]},_getMeasuresQuery:function(t){var i,l,r,n=e(t)[0].values,o=[];return n.length>0&&(null!=(r=(l=jQuery.map(n,function(e,t){if(e.measures!=a)return{measureElements:e.measures,Index:t,axisName:e.axis}})).length>0?e.map(l[0].measureElements,function(e){return e.fieldName}):null)&&o.push({values:r,Index:l[0].Index}),n.axis),""!=(i=e.map(o,function(e){return e.values.toString()}))[0]?"{"+i+"}":""},_getIncludefilterQuery:function(t,i,l){var r,n,o,s="FROM ["+i+"]",d="FROM ( SELECT (",u=l._fieldData,c=[],p="COLUMNS";if(l._isMondrian)return s;for(r=e.map(e(t.rows),function(e){if(e.filterItems!=a)return[e.filterItems.values]}),n=e.map(e(t.columns),function(e){if(e.filterItems!=a)return[e.filterItems.values]}),o=0;o<t.filters.length;o++){var m=t.filters,g=this,h=!1;e.map(t.columns,function(e){g._getDimensionUniqueName(e.fieldName,u)==g._getDimensionUniqueName(m[o].fieldName,u)&&m[o].filterItems!=a&&(n.push(m[o].filterItems.values),h=!0)}),h||e.map(t.rows,function(e){g._getDimensionUniqueName(e.fieldName,u)==g._getDimensionUniqueName(m[o].fieldName,u)&&m[o].filterItems!=a&&r.push(m[o].filterItems.values)})}if(t.enableAdvancedFilter){for(o=0;o<=t.columns.length-1;o++)t.columns[o].advancedFilter&&e.merge(c,this._getAdvancedFilterQuery(t.columns[o],d,p));for(o=0;o<=t.rows.length-1;o++)t.rows[o].advancedFilter&&e.merge(c,this._getAdvancedFilterQuery(t.rows[o],d,p))}for(o=0;o<=n.length-1;o++)d=0==o?d+"{"+n[o].toString()+"}":d+",{"+n[o].toString()+"}";for(n.length>0&&(d=r.length>0?d+" ) on COLUMNS ,(":d+" ) on COLUMNS "),o=0;o<=r.length-1;o++)d=o>0?d+",{"+r[o].toString()+"}":d+"{"+r[o].toString()+"}";return d=n.length>0&&r.length>0?d+=") on ROWS ":0==n.length&&r.length>0?d+") on COLUMNS ":d,c.length>0&&(c=(n.length>0||r.length>0?d:"")+" "+c.join(" ")+" "+s+Array(c.length+1+n.length+r.length).join(")")),s=0==n.length&&0==r.length?s:d+s+")",c.length>0?c:s},_getAdvancedFilterQuery:function(a,i,l){var r=[],n=this;return e.map(a.advancedFilter,function(i){t.isNullOrUndefined(i.labelFilterOperator)&&i.labelFilterOperator==t.olap.LabelFilterOptions.None&&t.isNullOrUndefined(i.valueFilterOperator)&&i.valueFilterOperator==t.olap.ValueFilterOptions.None||r.push("FROM (SELECT Filter("+e.trim(i.name)+".AllMembers, "+n._getAdvancedFilterCondtions(a.fieldName,i.advancedFilterType==t.olap.AdvancedFilterType.LabelFilter||t.isNullOrUndefined(i.advancedFilterType)?i.labelFilterOperator:i.valueFilterOperator,i.values,i.advancedFilterType,i.measure)+")) on "+l)}),r},_getAdvancedFilterCondtions:function(e,a,i,l,r){var n="";l=t.isNullOrUndefined(l)?"label":l;switch(a.toLowerCase()){case"equals":n="("+("value"!=l?e+'.CurrentMember.member_caption ="'+i[0]+'"':r+" = "+i[0]);break;case"notequals":n="("+("value"!=l?e+'.CurrentMember.member_caption &lt;&gt;"'+i[0]+'"':r+" &lt;&gt;"+i[0]);break;case"contains":n="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i[0]+'")&gt;0';break;case"notcontains":n="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i[0]+'")=0';break;case"beginswith":n="( Left ("+e+".CurrentMember.member_caption,"+i[0].length+')="'+i[0]+'"';break;case"notbeginswith":n="( Left ("+e+".CurrentMember.member_caption,"+i[0].length+')&lt;&gt;"'+i[0]+'"';break;case"endswith":n="( Right ("+e+".CurrentMember.member_caption,"+i[0].length+')="'+i[0]+'"';break;case"notendswith":n="( Right ("+e+".CurrentMember.member_caption,"+i[0].length+')&lt;&gt;"'+i[0]+'"';break;case"greaterthan":n="("+("value"!=l?e+'.CurrentMember.member_caption &gt;"'+i[0]+'"':r+" &gt;"+i[0]);break;case"greaterthanorequalto":n="("+("value"!=l?e+'.CurrentMember.member_caption &gt;="'+i[0]+'"':r+" &gt;="+i[0]);break;case"lessthan":n="("+("value"!=l?e+'.CurrentMember.member_caption &lt;"'+i[0]+'"':r+" &lt;"+i[0]);break;case"lessthanorequalto":n="("+("value"!=l?e+'.CurrentMember.member_caption &lt;="'+i[0]+'"':r+" &lt;="+i[0]);break;case"between":n="("+("value"!=l?e+'.CurrentMember.member_caption &gt;="'+i[0]+'"AND '+e+'.CurrentMember.member_caption &lt;="'+i[1]+'"':r+" &gt;="+i[0]+" AND "+r+"&lt;="+i[1]);break;case"notbetween":n="("+("value"!=l?e+'.CurrentMember.member_caption &gt;="'+i[0]+'"OR '+e+'.CurrentMember.member_caption &lt;="'+i[1]+'"':r+" &gt;="+i[0]+" OR "+r+"&lt;="+i[1]);break;default:n="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i[0]+'")&gt;0'}return n},_getItemPosition:function(t,i){return e.map(t,function(t,l){if(t.fieldName!=a&&e.trim(t.fieldName)==e.trim(i))return l})},getAllMember:function(a,i,l){if(!t.isNullOrUndefined(l)){var r="select {"+i+"} dimension properties CHILDREN_CARDINALITY on 0 from ["+e.trim(a.cube)+"]",n=t.olap._mdxParser.getSoapMsg(r,a.data,a.catalog),o=t.olap.base._getConnectionInfo(a.data);l.doAjaxPost("POST",o.url,{XMLA:n},l._generateAllMember,null,{action:"loadFieldElements"})}},getMembers:function(a,i,l){var r=t.Pivot.getReportItemByFieldName(i,a).item;t.olap.base.olapCtrlObj._isMondrian&&(t.isNullOrUndefined(l.model.pivotControl)||(this._controlObj=l.model.pivotControl));var n="select {"+(r&&r.hasAllMember?i+".levels(0).AllMembers":i+".children")+"}dimension properties CHILDREN_CARDINALITY, MEMBER_TYPE on 0 from ["+e.trim(a.cube)+"]",o=t.olap._mdxParser.getSoapMsg(n,a.data,a.catalog),s=t.olap.base._getConnectionInfo(a.data);l.doAjaxPost("POST",s.url,{XMLA:o},l._generateMembers,null,{action:"fetchMembers"})},getChildren:function(e,a,i){var l,r,n="select {"+a+".children} dimension properties CHILDREN_CARDINALITY on 0 from ["+e.cube+"]",o=i.model.pivotControl;!t.isNullOrUndefined(o)&&t.olap.base.olapCtrlObj._isMondrian&&(this._controlObj=i.model.pivotControl),l=t.olap._mdxParser.getSoapMsg(n,e.data,e.catalog),r=t.olap.base._getConnectionInfo(e.data),i.doAjaxPost("POST",r.url,{XMLA:l},t.Pivot.generateChildMembers,null,{action:"nodeExpand",currentNode:a})},getSoapMsg:function(e,a,i){var l,r=t.olap.base._getConnectionInfo(a);return!t.isNullOrUndefined(this._controlObj)||!t.isNullOrUndefined(t.olap.base.olapCtrlObj)&&t.olap.base.olapCtrlObj._isMondrian?(l='<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement><![CDATA['+e+"]]></Statement></Command><Properties><PropertyList><DataSourceInfo>"+(t.isNullOrUndefined(this._controlObj)?t.olap.base.olapCtrlObj.model.dataSource.sourceInfo:this._controlObj.model.dataSource.sourceInfo)+"</DataSourceInfo><Catalog>"+i+"</Catalog><AxisFormat>TupleFormat</AxisFormat><Content>Data</Content><Format>Multidimensional</Format></PropertyList></Properties></Execute></SOAP-ENV:Body></SOAP-ENV:Envelope>",delete this._controlObj):l='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header></Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement> '+e+" </Statement> </Command> <Properties> <PropertyList> <Catalog>"+i+"</Catalog> <LocaleIdentifier>"+r.LCID+"</LocaleIdentifier></PropertyList> </Properties> </Execute> </Body> </Envelope>",l}},t.olap.SortOrder={None:"none",Ascending:"ascending",Descending:"descending"},t.olap.Providers={SSAS:"ssas",Mondrian:"mondrian"},t.olap.AdvancedFilterType={LabelFilter:"label",ValueFilter:"value"},t.olap.ValueFilterOptions={None:"none",Equals:"equals",NotEquals:"notequals",GreaterThan:"greaterthan",GreaterThanOrEqualTo:"greaterthanorequalto",LessThan:"lessthan",LessThanOrEqualTo:"lessthanorequalto",Between:"between",NotBetween:"notbetween"},t.olap.LabelFilterOptions={None:"none",BeginsWith:"beginswith",NotBeginsWith:"notbeginswith",EndsWith:"endswith",NotEndsWith:"notendswith",Contains:"contains",NotContains:"notcontains",Equals:"equals",NotEquals:"notequals",GreaterThan:"greaterthan",GreaterThanOrEqualTo:"greaterthanorequalto",LessThan:"lessthan",LessThanOrEqualTo:"lessthanorequalto",Between:"between",NotBetween:"notbetween"},t.olap.AxisName={Row:"rows",Column:"columns"}}(jQuery,Syncfusion)})},1010:function(e,t,a){var l,r,n;
/*!
*  filename: ej.pivot.common.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.pivot.common.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(i){r=[a(4)],void 0===(n="function"==typeof(l=i)?l.apply(t,r):l)||(e.exports=n)}(function(){ej.Pivot=ej.Pivot||{},function(e,t,a){t.Pivot={addReportItem:function(e,a){var i,l;if(a.isMeasuresDropped)""!=a.droppedClass?e.values[0].axis="row"==a.droppedClass?"rows":"column"==a.droppedClass?"columns":e.values[0].axis:e.values[0].measures=[];else{for(l in i=this.removeReportItem(e,a.droppedFieldName,a.isMeasuresDropped),t.isNullOrUndefined(i)&&(i={fieldName:a.droppedFieldName,fieldCaption:a.droppedFieldCaption,format:a.droppedFieldFormat,formatString:a.droppedFieldFormatString,showSubTotal:a.droppedFieldShowSubTotal,expression:a.droppedExpression,hierarchyUniqueName:a.droppedHierarchyUniqueName,summaryType:a.summaryType}),i)("format"==l||"formatString"==l)&&(t.isNullOrUndefined(i[l])||""==i[l])&&delete i[l];switch(a.droppedClass){case"row":""!=a.droppedPosition.toString()?e.rows.splice(a.droppedPosition,0,i):e.rows.push(i);break;case"column":""!=a.droppedPosition.toString()?e.columns.splice(a.droppedPosition,0,i):e.columns.push(i);break;case"value":""==e.cube?""!=a.droppedPosition.toString()?e.values.splice(a.droppedPosition,0,i):e.values.push(i):""!=a.droppedPosition.toString()?e.values[0].measures.splice(a.droppedPosition,0,i):e.values[0].measures.push(i);break;case"filter":""!=a.droppedPosition.toString()?e.filters.splice(a.droppedPosition,0,i):e.filters.push(i)}}},removeReportItem:function(a,i,l){var r,n=""==a.cube?t.Pivot.AnalysisMode.Pivot:t.Pivot.AnalysisMode.Olap,o=e.grep(a.columns,function(e){return e.fieldName==i});return l?a.values[0].measures=[]:o.length>0?a.columns=e.grep(a.columns,function(e){return e.fieldName!=i}):(o=e.grep(a.rows,function(e){return e.fieldName==i})).length>0?a.rows=e.grep(a.rows,function(e){return e.fieldName!=i}):(r=n==t.Pivot.AnalysisMode.Olap?a.values[0].measures:a.values,(o=e.grep(r,function(e){return e.fieldName==i})).length>0?a.values=n==t.Pivot.AnalysisMode.Olap?[{measures:e.grep(r,function(e){return e.fieldName!=i}),axis:a.values[0].axis}]:e.grep(r,function(e){return e.fieldName!=i}):(o=e.grep(a.filters,function(e){return e.fieldName==i})).length>0&&(a.filters=e.grep(a.filters,function(e){return e.fieldName!=i}))),o[0]},getReportItemByFieldName:function(a,i){var l,r="columns",n=e.grep(i.columns,function(e){return e.fieldName.toLowerCase()==a.toLowerCase()});return 0==n.length&&(n=e.grep(i.rows,function(e){return e.fieldName.toLowerCase()==a.toLowerCase()}),r="rows"),0==n.length&&(l=""==i.cube?i.values:i.values.length>0&&!t.isNullOrUndefined(i.values[0].measures)?i.values[0].measures:[],n=e.grep(l,function(e){return e.fieldName.toLowerCase()==a.toLowerCase()}),r="values"),0==n.length&&(n=e.grep(i.filters,function(e){return e.fieldName.toLowerCase()==a.toLowerCase()}),r="filters"),{item:n[0],axis:r}},getReportItemByFieldCaption:function(a,i){var l,r="columns",n=e.grep(i.columns,function(e){return e.fieldCaption.toLowerCase()==a.toLowerCase()});return 0==n.length&&(n=e.grep(i.rows,function(e){return e.fieldCaption.toLowerCase()==a.toLowerCase()}),r="rows"),0==n.length&&(l=""==i.cube?i.values:i.values.length>0&&!t.isNullOrUndefined(i.values[0].measures)?i.values[0].measures:[],n=e.grep(l,function(e){return e.fieldCaption.toLowerCase()==a.toLowerCase()}),r="values"),0==n.length&&(n=e.grep(i.filters,function(e){return e.fieldCaption.toLowerCase()==a.toLowerCase()}),r="filters"),{item:n[0],axis:r}},closePreventPanel:function(a){var i="close"!=a.type?a:this;i.element.find("[id^='preventDiv']").remove(),t.isNullOrUndefined(i.model.pivotControl)?i._currentReportItems=e.extend(!0,[],i._savedReportItems):(i.model.pivotControl.element.find("[id^='preventDiv']").remove(),i.model.pivotControl._currentReportItems=e.extend(!0,[],i.model.pivotControl._savedReportItems)),t.isNullOrUndefined(i._waitingPopup)||i._waitingPopup.hide(),t.isNullOrUndefined(i.model.pivotControl)||t.isNullOrUndefined(i.model.pivotControl._waitingPopup)||i.model.pivotControl._waitingPopup.hide()},openPreventPanel:function(a){var i=t.buildTag("div#preventDiv.errorDlg").css({width:e("body").width()+"px",height:e("body").height()+"px",position:"absolute",top:e("body").offset().top+"px",left:e("body").offset().left+"px","z-index":10})[0].outerHTML;e("#"+a._id).append(i)},_createErrorDialog:function(a,i,l){var r,n;if(t.Pivot.closePreventPanel(l),l._errorDialog=i,t.Pivot.openPreventPanel(l),0==l.element.find(".e-errorDialog:visible").length&&(r=t.isNullOrUndefined(a.Exception)?t.buildTag("div.e-errorDialog#ErrorDialog",t.buildTag("div.warningImg")[0].outerHTML+t.buildTag("div.warningContent action:",a)[0].outerHTML+t.buildTag("div",t.buildTag("button#ErrOKBtn.errOKBtn",l._getLocalizedLabels("OK"),{margin:"20px 0 10px 165px"}).attr("title",l._getLocalizedLabels("OK").replace(/(<([^>]+)>)/gi,""))[0].outerHTML)[0].outerHTML).attr("title",i)[0].outerHTML:t.buildTag("div.e-errorDialog#ErrorDialog",t.buildTag("div.warningImg")[0].outerHTML+t.buildTag("div.warningContent action:",a.Exception.Message)[0].outerHTML+t.buildTag("br")[0].outerHTML+t.buildTag("div."+l._id+"stackTraceContent","Stack Trace :"+a.Exception.StackTraceString)[0].outerHTML+t.buildTag("div",t.buildTag("button#ErrOKBtn.errOKBtn",l._getLocalizedLabels("OK"),{margin:"20px 0 10px 165px"}).attr("title",l._getLocalizedLabels("OK").replace(/(<([^>]+)>)/gi,""))[0].outerHTML)[0].outerHTML).attr("title",i)[0].outerHTML,l.element.append(r),l.element.find(".e-errorDialog").ejDialog({target:"#"+l._id,enableResize:!1,enableRTL:l.model.enableRTL,width:"400px",close:t.proxy(t.Pivot.closePreventPanel,l)}),n=l.element.find(".e-errorDialog").data("ejDialog"),e("#"+n._id+"_wrapper").css({left:"50%",top:"50%"}),l.element.find(".errOKBtn").ejButton({type:t.ButtonType.Button,width:"50px"}).on(t.eventType.click,function(){"nodeCheck"!=l._errorDialog||t.isNullOrUndefined(l._schemaData)||t.isNullOrUndefined(l._schemaData._selectedTreeNode)||l._schemaData._tableTreeObj.uncheckNode(l._schemaData._selectedTreeNode),l.element.find("#preventDiv").remove(),(l._errorDialog==l._getLocalizedLabels("Success")||l._errorDialog==l._getLocalizedLabels("Warning")||l._errorDialog==l._getLocalizedLabels("Exception")||l._errorDialog==l._getLocalizedLabels("Error"))&&l.element.children("#ErrorDialog_wrapper").remove()}),l.element.find(".e-dialog .e-close").attr("title","Close"),t.isNullOrUndefined(e("#"+l._id).data("ejWaitingPopup"))||e("#"+l._id).data("ejWaitingPopup").hide(),"undefined"!=typeof oclientWaitingPopup&&null!=oclientWaitingPopup&&oclientWaitingPopup.hide(),!t.isNullOrUndefined(a.Exception))){var o="Show more";e("."+l._id+"stackTraceContent").each(function(){var a=e(this).html();if(a.length>50){l._id;var i=a.substr(0,50),r=a.substr(50,a.length-50),n=i+t.buildTag("span."+l._id+"moreellipses","...")[0].outerHTML+t.buildTag("span."+l._id+"morecontent",t.buildTag("span",r).css("display","none")[0].outerHTML+t.buildTag("a."+l._id+"morelink",o).css("display","block")[0].outerHTML)[0].outerHTML;e(this).html(n)}}),e("."+l._id+"morelink").click(function(){return e(this).hasClass("less")?(e(this).removeClass("less"),e(this).html(o)):(e(this).addClass("less"),e(this).html("Show less")),e(this).parent().prev().toggle("slow",function(){}),e(this).prev().toggle("slow",function(){}),!1})}},_updateValueSortingIndex:function(i,l){if(i.SortColIndex!=a)t.PivotAnalysis._valueSorting=JSON.parse(i.SortColIndex)[0],t.PivotAnalysis._sort=l.model.valueSortSettings.sortOrder;else{i=i[0]!=a?i:i.d!=a?i.d:i;var r=e.map(i,function(e){if(null!=e)var t=e.Key;if(null!=t&&t!=a&&"SortColIndex"==t)return e});r.length>0?(i.splice(e.map(i,function(e,t){if("SortColIndex"==e.Key)return t}),1),t.PivotAnalysis._valueSorting=JSON.parse(r[0].Value),t.PivotAnalysis._sort=l.model.valueSortSettings.sortOrder):t.PivotAnalysis._valueSorting=null}},_memberSortBtnClick:function(i){var l,r,n,o,s,d,u,c=this.element.hasClass("e-pivotclient")&&"servermode"==this.model.operationalMode&&"olap"==this.model.analysisMode,p="ejPivotSchemaDesigner"==this.pluginName?this.model.pivotControl:this,m="ejPivotGrid"==this.pluginName&&p.model.analysisMode==t.Pivot.AnalysisMode.Olap&&p.model.operationalMode==t.Pivot.OperationalMode.ServerMode,g=e(i.target).parents(".e-memberEditorDiv").find(".e-editorTreeView"),h=this._sortType=e(i.target).hasClass("e-memberAscendingIcon")?"ascending":"descending",f=[],_=jQuery.extend(!0,[],this._memberTreeObj._dataSource);if(this.element.find(".e-memberDrillPager").is(":visible")&&(l=this.model.memberEditorPageSize==a?this.model.pivotControl.model.memberEditorPageSize:this.model.memberEditorPageSize,f=t.Pivot._getParentsTreeList(this,this._drilledNode,this._editorTreeData).concat(t.DataManager(this._editorDrillTreeData[this._drilledNode]).executeLocal(t.Query().sortBy("name",this._sortType).page(this._memberDrillPageSettings.currentMemberDrillPage,l)))),!t.isNullOrUndefined(g)&&g.length>0){if(t.Pivot.updateTreeView(this),r=(this.model.enableMemberEditorPaging||!t.isNullOrUndefined(this.model.pivotControl)&&this.model.pivotControl.model.enableMemberEditorPaging)&&!this._isSearchApplied?this._editorTreeData:g.data("ejTreeView").model.fields.dataSource,n=c||"All"!=r[0].id&&"(All)_0"!=r[0].id?r:r.slice(1),f.length>0&&(n=f),n.length>1&&"SearchFilterSelection"==n[0].id&&(n=n.slice(1)),o=c?[]:r.length>1&&("All"==r[0].id||"(All)_0"==r[0].id)?r.splice(0,1):[],s=t.DataManager(n).executeLocal(t.Query().sortBy("name",h)),!t.isNullOrUndefined(o)&&o.length>0&&(s.splice(0,0,o[0]),r.splice(0,0,o[0])),(this.model.enableMemberEditorPaging||!t.isNullOrUndefined(this.model.pivotControl)&&this.model.pivotControl.model.enableMemberEditorPaging)&&0==f.length&&(s=t.DataManager(s).executeLocal(t.Query().page(this._memberPageSettings.currentMemeberPage,(this.model.memberEditorPageSize||this.model.pivotControl.model.memberEditorPageSize)+(1==this._memberPageSettings.currentMemeberPage?1:0)))),p.model.analysisMode==t.Pivot.AnalysisMode.Pivot&&s.length>0&&"All"!=s[0].id&&"(All)_0"!=s[0].id&&!t.isNullOrUndefined(o)&&o.length>0&&s.splice(0,0,o[0]),o={},g.data("ejTreeView").model.fields.dataSource.length>1&&"SearchFilterSelection"==g.data("ejTreeView").model.fields.dataSource[1].id&&"SearchFilterSelection"!=s[1].id&&s.splice(1,0,{id:"SearchFilterSelection",name:this._getLocalizedLabels("AddCurrentSelectionToFilter"),checkedStatus:this._isSelectSearchFilter,tag:"SearchFilterSelection",spriteCssClass:"e-searchfilterselection",uniqueName:"Add current selection to filter"}),c&&this._isSearchApplied&&s.splice(0,0,{id:"SearchFilterSelection",name:this._getLocalizedLabels("AddCurrentSelectionToFilter"),checkedStatus:this._isSelectSearchFilter,tag:"SearchFilterSelection",spriteCssClass:"e-searchfilterselection",uniqueName:"Add current selection to filter"}),t.isNullOrUndefined(g)||g.ejTreeView({fields:{dataSource:jQuery.extend(!0,[],s)}}),f.length>0&&!t.isNullOrUndefined(_)&&(this._memberTreeObj._dataSource=_),m)for(d=this.element.find(".e-editorTreeView").find("li"),u=0;u<d.length;u++)t.isNullOrUndefined(e(d[u]).attr("id"))||e(d[u]).attr("data-tag",t.DataManager(g.data("ejTreeView").model.fields.dataSource).executeLocal(t.Query().where("id","equal",e(d[u]).attr("id")))[0].tag);t.Pivot._separateAllMember(this)}},_contextMenuOpen:function(a,i){var l,r,n,o;if(t.Pivot.openPreventPanel(i),i._selectedMember=e(a.target),"ejPivotGrid"==i.pluginName?(l=i.model.analysisMode==t.Pivot.AnalysisMode.Olap?"olap":"pivot",n=e("#pivotTree").data("ejMenu")):(t.isNullOrUndefined(i.model.pivotControl)||(l=i.model.pivotControl.model.analysisMode==t.Pivot.AnalysisMode.Olap?"olap":"pivot"),n=e("#"+i._id+"_pivotTreeContextMenu").data("ejMenu")),l==t.Pivot.AnalysisMode.Olap){if(t.isNullOrUndefined(e(a.target).parent().attr("data-tag"))&&e(a.target).hasClass("e-pivotButton")&&e(a.target).children(".e-pvtBtn:eq(0)").length>0)return n.disable(),i._selectedMember=e(a.target).children(".e-pvtBtn:eq(0)"),!1;!t.isNullOrUndefined(e(a.target).parent().attr("data-tag"))&&e(a.target).parent().attr("data-tag").split(":")[1].toLowerCase().startsWith("[measures]")?n.disable():t.isNullOrUndefined(i._selectedMember.parent().attr("data-tag"))||"measures"!=i._selectedMember.parent().attr("data-tag").split(":")[1].toLowerCase()?t.isNullOrUndefined(e(a.target).parent().attr("data-tag"))?n.disable():(n.disableItem(i._getLocalizedLabels("AddToValues")),e(a.target.parentElement).find(".e-namedSetCDB").length>0?n.disableItem(i._getLocalizedLabels("AddToFilter")):n.enableItem(i._getLocalizedLabels("AddToFilter")),n.enableItem(i._getLocalizedLabels("AddToRow")),n.enableItem(i._getLocalizedLabels("AddToColumn"))):(n.disableItem(i._getLocalizedLabels("AddToValues")),n.disableItem(i._getLocalizedLabels("AddToFilter")),n.enableItem(i._getLocalizedLabels("AddToRow")),n.enableItem(i._getLocalizedLabels("AddToColumn")))}else l==t.Pivot.AnalysisMode.Pivot&&(r=a.target.textContent,e(a.target).hasClass("e-btn")?(n.enable(),"ejPivotGrid"==i.pluginName&&(n.disableItem(i._getLocalizedLabels("CalculatedField")),"values"==e(a.target).parents(".e-pivotButton").attr("data-tag").split(":")[0].toLowerCase()&&(i.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode&&e.grep(i.model.dataSource.values,function(e){return e.fieldCaption==r&&1==e.isCalculatedField}).length>0?n.disable():i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode&&e.grep(JSON.parse(i.getOlapReport()).PivotCalculations,function(e){return e.FieldHeader==r&&8==e.CalculationType}).length>0&&n.disable(),n.enableItem(i._getLocalizedLabels("CalculatedField"))))):e("#pivotTree").length>0?(n=e("#pivotTree").data("ejMenu")).disable():n.disable());o=i.model.pivotControl,t.isNullOrUndefined(o)||o.model.analysisMode!=t.Pivot.AnalysisMode.Pivot||0==e(a.target).parents(".e-schemaValue").length&&n.disableItem(i._getLocalizedLabels("SummarizeValueBy"))},_searchTreeNodes:function(a){var i,l,r,n,o,s,d=e(a.target).hasClass("searchTreeView")?this.element.find(".searchTreeView").data("ejMaskEdit"):this.element.find(".searchEditorTreeView").data("ejMaskEdit"),u=e(a.target).hasClass("searchTreeView")?this.model.operationalMode==t.Pivot.OperationalMode.ClientMode||this.model.analysisMode==t.Pivot.AnalysisMode.Pivot&&this.model.operationalMode==t.Pivot.OperationalMode.ServerMode?this.element.find(".e-schemaFieldTree").data("ejTreeView"):this.element.find(".e-cubeTreeView").data("ejTreeView"):this.element.find(".e-editorTreeView").data("ejTreeView"),c={id:"SearchFilterSelection",name:this._getLocalizedLabels("AddCurrentSelectionToFilter"),hasChildren:!1,checkedStatus:!0,tag:"SearchFilterSelection",spriteCssClass:"e-searchfilterselection",uniqueName:"Add current selection to filter"},p=u.element,m=p.find("li[data-isItemSearch='true']"),g=t.isNullOrUndefined(d.get_StrippedValue())?"":d.get_StrippedValue().toLowerCase();if(m.length>0&&e(m).each(function(e,t){t.removeAttribute("data-isItemSearch")}),g.length>0){var h=[],f=[],_=p.find("ul>li>div>a");for(i=0;i<_.length;i++)-1!=e(_[i]).text().toLowerCase().indexOf(g)||"(All)_0"==e(e(_[i]).closest("li")).attr("id")||"All"==e(e(_[i]).closest("li")).attr("id")||"SearchFilterSelection"==e(e(_[i]).closest("li")).attr("id")?h.push(_[i]):f.push(_[i]);for((l=p.find(h).closest("li").css("display","block")).length>0&&(this._isOptionSearch=!0,e(l).each(function(t,a){"SearchFilterSelection"!=e(a).attr("id")&&a.setAttribute("data-isItemSearch",!0)}),p.hasClass("e-editorTreeView")&&(!p.find("li span.e-searchfilterselection").length>0?("(All)_0"==p.find("li:first").attr("id")||"All"==p.find("li:first").attr("id")?(l.length>1&&u.insertAfter(c,p.find("li:first")),(this.element.hasClass("e-pivotschemadesigner")?this.model.pivotControl.model.analysisMode:this.model.analysisMode)==t.Pivot.AnalysisMode.Pivot&&p.find("li span.e-searchfilterselection").closest("li").css("padding","0")):u.insertBefore(c,p.find("li:first")),p.find("li span.e-searchfilterselection").closest("li").attr("data-tag",c.tag)):p.find("li span.e-searchfilterselection").length>0&&!this._isSelectSearchFilter&&u.uncheckNode(p.find("li span.e-searchfilterselection").closest("li")))),p.find(f).closest("li").css("display","none"),s=0;s<l.length;s++)(n=(r=e(l[s])).parents("ul").closest("li").css("display","block")).length>0&&(u.expandNode(n),-1!=u.model.expandedNodes.indexOf(e(u._liList).index(n))||t.isNullOrUndefined(window._temp)||window._temp.push(n)),(o=r.children("ul")).length>0&&0==o.children("li:visible").length&&(r.children("ul").children("li").css("display","block"),u.expandNode(l[s]),-1!=u.model.expandedNodes.indexOf(e(u._liList).index(l[s]))||t.isNullOrUndefined(window._temp)||window._temp.push(l[s]))}else{p.find("ul>li").css("display","block"),p.find("li span.e-searchfilterselection").closest("li").length>0&&u.removeNode(p.find("#SearchFilterSelection")),e(p.find("ul>li")).each(function(e,t){t.removeAttribute("data-isItemSearch")}),this._isOptionSearch=!1;var v=e(p).find("ul>li"),b=0,C=0;if("(All)_0"==e(e(v)[0]).attr("id")||"All"==e(e(v)[0]).attr("id")){for(s=1;s<e(v).length;s++)e(e(v)[s]).find("span.e-checkmark").length>0?b++:C++;b>0&&C>0?e(p.find("ul>li")[0]).find("div .e-chkbox-small > span > span:eq(0)").removeClass("e-checkmark").addClass("e-stop"):b>0&&0==C?e(p.find("ul>li")[0]).find("div .e-chkbox-small > span > span:eq(0)").removeClass("e-stop").addClass("e-checkmark"):e(p.find("ul>li")[0]).find("div .e-chkbox-small > span > span:eq(0)").removeClass("e-checkmark").removeClass("e-stop")}if(!t.isNullOrUndefined(window._temp))for(s=0;s<window._temp.length;s++)u._collpaseNode(window._temp[s]);window._temp=[],e(a.target).hasClass("searchTreeView")&&u.collapseAll()}},_updateSearchFilterSelection:function(a,i,l){var r,n,o={},s={};"SearchFilterSelection"==a.id&&(r=e(i).find("li:not([data-isItemSearch='true'])"),"nodeCheck"==a.type?(l._isSelectSearchFilter=!0,l._isOptionSearch?r.length>0&&e(r).each(function(a,r){"SearchFilterSelection"!=e(r).attr("id")&&!t.isNullOrUndefined(l._currentFilterList[e(r).attr("id")])&&l._currentFilterList[e(r).attr("id")].checkedStatus&&e(i).ejTreeView("checkNode",e(r))}):r.length>0&&(l.model.enableMemberEditorPaging&&(o=l._currentFilterList,e(o).each(function(e,t){s[t.id]=t})),e(l._editorTreeData).each(function(a,i){for(var n=0;n<r.length;n++){if(r[n].id==i.id){i.checkedStatus=e(r[n]).find(".checked").length>0;break}t.isNullOrUndefined(l._currentFilterList)||(i.checkedStatus=l.model.enableMemberEditorPaging&&!t.isNullOrUndefined(s)?s[e(i).attr("id")].checkedStatus:l._currentFilterList[e(i).attr("id")].checkedStatus)}}),n=!0,e(l._editorTreeData).each(function(e,t){if(t.checkedStatus)return n=!1,!1}),n&&l._editorTreeData.length>0?(l._dialogOKBtnObj.disable(),l.element.find(".e-dialogOKBtn").attr("disabled","disabled")):(l._dialogOKBtnObj.enable(),l.element.find(".e-dialogOKBtn").removeAttr("disabled")))):"nodeUncheck"==a.type&&(l._isSelectSearchFilter=!1,l._isOptionSearch?r.length>0&&e(r).each(function(t,a){"SearchFilterSelection"!=e(a).attr("id")&&e(i).ejTreeView("uncheckNode",e(a))}):r.length>0&&(e(l._editorTreeData).each(function(t,a){for(var i=0;i<r.length;i++){if(r[i].id==a.id){a.checkedStatus=e(r[i]).find(".checked").length>0;break}a.checkedStatus=!1}}),n=!0,e(l._editorTreeData).each(function(e,t){if(t.checkedStatus)return n=!1,!1}),n&&l._editorTreeData.length>0?(l._dialogOKBtnObj.disable(),l.element.find(".e-dialogOKBtn").attr("disabled","disabled")):(l._dialogOKBtnObj.enable(),l.element.find(".e-dialogOKBtn").removeAttr("disabled")))))},editorTreeNavigatee:function(a,i){var l,r;if(e(a.target).parents(".e-memberPager").length>0){if(r=i._memberPageSettings.currentMemeberPage,!e(a.target).hasClass("e-pageDisabled")){if(e(a.target).hasClass("e-nextPage"))i._memberPageSettings.startPage+=i.model.memberEditorPageSize,i._memberPageSettings.currentMemeberPage+=1,i._memberPageSettings.endPage+=i.model.memberEditorPageSize;else if(e(a.target).hasClass("e-prevPage"))i._memberPageSettings.currentMemeberPage-=1,i._memberPageSettings.startPage=Math.abs(i._memberPageSettings.startPage-(i._memberPageSettings.currentMemeberPage,i.model.memberEditorPageSize)),i._memberPageSettings.endPage-=i.model.memberEditorPageSize;else if(e(a.target).hasClass("e-firstPage"))i._memberPageSettings.currentMemeberPage=1,i._memberPageSettings.endPage=i.model.memberEditorPageSize,i._memberPageSettings.startPage=0;else if(e(a.target).hasClass("e-lastPage"))i._memberPageSettings.currentMemeberPage=parseInt(e.trim(i.element.find(".e-memberPageCount").text().split("/")[1])),i._memberPageSettings.endPage=i._memberPageSettings.currentMemeberPage*i.model.memberEditorPageSize,i._memberPageSettings.startPage=i._memberPageSettings.endPage-i.model.memberEditorPageSize;else{if(parseInt(e(a.target).val())>e.trim(i.element.find(".e-memberPageCount").text().split("/")[1])||0==parseInt(e(a.target).val()))return i.element.find(".e-memberCurrentPage").val(r),!1;i._memberPageSettings.currentMemeberPage=parseInt(e(a.target).val()),i._memberPageSettings.endPage=i._memberPageSettings.currentMemeberPage*i.model.memberEditorPageSize,i._memberPageSettings.startPage=1==i._memberPageSettings.currentMemeberPage||0==i._memberPageSettings.currentMemeberPage?0:i._memberPageSettings.endPage-i.model.memberEditorPageSize}i._waitingPopup.show(),i.element.hasClass("e-pivotclient")&&i.model.analysisMode==t.Pivot.AnalysisMode.Olap&&i.model.operationalMode==t.Pivot.OperationalMode.ServerMode?(i.model.enableMemberEditorSorting&&(i._editorTreeData=t.DataManager(i._editorTreeData).executeLocal(t.Query().sortBy("name",i._sortType))),this.editorTreePageInfoSuccess(i._editorTreeData,i)):("ejPivotSchemaDesigner"!=i.pluginName?i._isMemberPageFilter=!0:i.model.pivotControl._isMemberPageFilter=!0,t.Pivot.updateTreeView(i),l=t.DataManager(i._editorTreeData).executeLocal(t.Query().sortBy("name",t.isNullOrUndefined(i._sortType)?"":i._sortType).where(t.Predicate("pid","equal",null).and("id","notequal","All").and("id","notequal","(All)_0")).page(i._memberPageSettings.currentMemeberPage,"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.memberEditorPageSize:i.model.memberEditorPageSize)),i._memberPageSettings.currentMemeberPage>1?i.element.find(".e-prevPage, .e-firstPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"):i.element.find(".e-prevPage, .e-firstPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"),i._memberPageSettings.currentMemeberPage==parseInt(e.trim(i.element.find(".e-memberPageCount").text().split("/")[1]))?i.element.find(".e-nextPage, .e-lastPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"):i.element.find(".e-nextPage, .e-lastPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"),i.element.find(".e-memberCurrentPage").val(i._memberPageSettings.currentMemeberPage),i.element.find(".e-nextPageDiv .e-pageDisabled").css("opacity","0.5"),i.element.find(".e-nextPageDiv .e-pageEnabled").css("opacity","1"),t.Pivot._createSearchTreeview(l,i),i._waitingPopup.hide())}}else if(e(a.target).parents(".e-memberSearchPager").length>0){if(r=i._memberSearchPageSettings.currentMemberSearchPage,!e(a.target).hasClass("e-pageDisabled")){if(e(a.target).hasClass("e-nextPage"))i._memberSearchPageSettings.startSearchPage+=i.model.memberEditorPageSize,i._memberSearchPageSettings.currentMemberSearchPage+=1,i._memberSearchPageSettings.endSearchPage+=i.model.memberEditorPageSize;else if(e(a.target).hasClass("e-prevPage"))i._memberSearchPageSettings.currentMemberSearchPage-=1,i._memberSearchPageSettings.startSearchPage=Math.abs(i._memberSearchPageSettings.startSearchPage-(i._memberSearchPageSettings.currentMemberSearchPage,i.model.memberEditorPageSize)),i._memberSearchPageSettings.endSearchPage-=i.model.memberEditorPageSize;else if(e(a.target).hasClass("e-firstPage"))i._memberSearchPageSettings.currentMemberSearchPage=1,i._memberSearchPageSettings.endSearchPage=i.model.memberEditorPageSize,i._memberSearchPageSettings.startSearchPage=0;else if(e(a.target).hasClass("e-lastPage"))i._memberSearchPageSettings.currentMemberSearchPage=parseInt(e.trim(i.element.find(".e-memberSearchPageCount").text().split("/")[1])),i._memberSearchPageSettings.endSearchPage=i._memberSearchPageSettings.currentMemberSearchPage*i.model.memberEditorPageSize,i._memberSearchPageSettings.startSearchPage=i._memberSearchPageSettings.endSearchPage-i.model.memberEditorPageSize;else{if(parseInt(e(a.target).val())>e.trim(i.element.find(".e-memberSearchPageCount").text().split("/")[1])||0==parseInt(e(a.target).val()))return i.element.find(".e-memberCurrentSearchPage").val(r),!1;i._memberSearchPageSettings.currentMemberSearchPage=parseInt(e(a.target).val()),i._memberSearchPageSettings.endSearchPage=i._memberSearchPageSettings.currentMemberSearchPage*i.model.memberEditorPageSize,i._memberSearchPageSettings.startSearchPage=1==i._memberSearchPageSettings.currentMemberSearchPage||0==i._memberSearchPageSettings.currentMemberSearchPage?0:i._memberSearchPageSettings.endSearchPage-i.model.memberEditorPageSize}i._waitingPopup.show(),i.element.hasClass("e-pivotclient")&&i.model.analysisMode==t.Pivot.AnalysisMode.Olap&&i.model.operationalMode==t.Pivot.OperationalMode.ServerMode?this._editorTreeSearchPageInfoSuccess(i._editorSearchTreeData,i):("ejPivotSchemaDesigner"!=i.pluginName?i._isMemberPageFilter=!0:i.model.pivotControl._isMemberPageFilter=!0,this._editorTreeSearchPageInfoSuccess(i._editorSearchTreeData,i))}}else if(e(a.target).parents(".e-memberDrillPager").length>0&&(r=i._memberDrillPageSettings.currentMemberDrillPage,!e(a.target).hasClass("e-pageDisabled"))){if(e(a.target).hasClass("e-nextPage"))i._memberDrillPageSettings.startDrillPage+=i.model.memberEditorPageSize,i._memberDrillPageSettings.currentMemberDrillPage+=1,i._memberDrillPageSettings.endDrillPage+=i.model.memberEditorPageSize;else if(e(a.target).hasClass("e-prevPage"))i._memberDrillPageSettings.currentMemberDrillPage-=1,i._memberDrillPageSettings.startDrillPage=Math.abs(i._memberDrillPageSettings.startDrillPage-(i._memberDrillPageSettings.currentMemberDrillPage,i.model.memberEditorPageSize)),i._memberDrillPageSettings.endDrillPage-=i.model.memberEditorPageSize;else if(e(a.target).hasClass("e-firstPage"))i._memberDrillPageSettings.currentMemberDrillPage=1,i._memberDrillPageSettings.endDrillPage=i.model.memberEditorPageSize,i._memberDrillPageSettings.startDrillPage=0;else if(e(a.target).hasClass("e-lastPage"))i._memberDrillPageSettings.currentMemberDrillPage=parseInt(e.trim(i.element.find(".e-memberDrillPageCount").text().split("/")[1])),i._memberDrillPageSettings.endDrillPage=i._memberDrillPageSettings.currentMemberDrillPage*i.model.memberEditorPageSize,i._memberDrillPageSettings.startDrillPage=i._memberDrillPageSettings.endDrillPage-i.model.memberEditorPageSize;else{if(parseInt(e(a.target).val())>e.trim(i.element.find(".e-memberDrillPageCount").text().split("/")[1])||0==parseInt(e(a.target).val()))return i.element.find(".e-memberCurrentDrillPage").val(r),!1;i._memberDrillPageSettings.currentMemberDrillPage=parseInt(e(a.target).val()),i._memberDrillPageSettings.endDrillPage=i._memberDrillPageSettings.currentMemberDrillPage*i.model.memberEditorPageSize,i._memberDrillPageSettings.startDrillPage=1==i._memberDrillPageSettings.currentMemberDrillPage||0==i._memberDrillPageSettings.currentMemberDrillPage?0:i._memberDrillPageSettings.endDrillPage-i.model.memberEditorPageSize}i._waitingPopup.show(),this._editorTreeDrillPageInfoSuccess(i._memberTreeObj._dataSource.slice(),i)}},editorTreePageInfoSuccess:function(i,l){setTimeout(function(){var r,n;l._memberPageSettings.currentMemeberPage>1?l.element.find(".e-prevPage, .e-firstPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"):l.element.find(".e-prevPage, .e-firstPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"),l._memberPageSettings.currentMemeberPage==parseInt(e.trim(l.element.find(".e-memberPageCount").text().split("/")[1]))?l.element.find(".e-nextPage, .e-lastPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"):l.element.find(".e-nextPage, .e-lastPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"),l.model.operationalMode==t.Pivot.OperationalMode.ClientMode&&(r=i[0]!=a?i[0].Value:i.d!=a?i.d[0].Value:i.EditorTreeInfo,(n=e.parseJSON(r)).splice(-1,1)),l.element.find(".e-memberCurrentPage").val(l._memberPageSettings.currentMemeberPage),l._appendTreeViewData(l.model.operationalMode==t.Pivot.OperationalMode.ClientMode?n:t.DataManager(l._editorTreeData).executeLocal(t.Query().where("pid","equal",a).page(l._memberPageSettings.currentMemeberPage,"ejPivotSchemaDesigner"==l.pluginName?l.model.pivotControl.model.memberEditorPageSize:l.model.memberEditorPageSize)),l.element.find(".pvtBtn").parent("[data-tag='Slicers:"+l._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0),l._waitingPopup.hide()},0)},_editorTreeDrillPageInfoSuccess:function(i,l){setTimeout(function(){var r,n,o;l._memberDrillPageSettings.currentMemberDrillPage>1?l.element.find(".e-memberDrillPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"):l.element.find(".e-memberDrillPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"),l._memberDrillPageSettings.currentMemberDrillPage==parseInt(e.trim(l.element.find(".e-memberDrillPageCount").text().split("/")[1]))?l.element.find(".e-memberDrillPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"):l.element.find(".e-memberDrillPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"),l.element.find(".e-memberCurrentDrillPage").val(l._memberDrillPageSettings.currentMemberDrillPage),n=0,i.length>0&&i[0].length>0&&"All"==i[0][0].id&&i[0].splice(0,1),e.each(i,function(e,t){if(1!=t.length||!t[0].expanded)return!1;n=e}),o=l.model.enableMemberEditorSorting&&l._sortType?t.DataManager(t.DataManager(l._editorTreeData).executeLocal(t.Query().where("pid","equal",i[n][0].id).sortBy("name",l._sortType))).executeLocal(t.Query().where("pid","notequal",a).page(l._memberDrillPageSettings.currentMemberDrillPage,"ejPivotSchemaDesigner"==l.pluginName?l.model.pivotControl.model.memberEditorPageSize:l.model.memberEditorPageSize)):t.DataManager(t.DataManager(l._editorTreeData).executeLocal(t.Query().where("pid","equal",i[n][0].id))).executeLocal(t.Query().where("pid","notequal",a).page(l._memberDrillPageSettings.currentMemberDrillPage,"ejPivotSchemaDesigner"==l.pluginName?l.model.pivotControl.model.memberEditorPageSize:l.model.memberEditorPageSize)),l._editorDrillTreePageSettings[i[n][0].id]=e.extend(!0,{},l._memberDrillPageSettings),l.element.find(".e-memberDrillPager").find(".e-nextPageDiv").length>0?(r=t.Pivot._getParentsTreeList(l,i[n][0].id,l._editorTreeData).concat(o),"ejPivotClient"!=l.pluginName?t.Pivot._createSearchTreeview(r,l):l._appendTreeViewData(r,l.element.find(".pvtBtn").parent("[data-tag='Slicers:"+l._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0)):"ejPivotClient"!=l.pluginName?t.Pivot._createSearchTreeview(o,l):l._appendTreeViewData(o,l.element.find(".pvtBtn").parent("[data-tag='Slicers:"+l._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0),l._waitingPopup.hide()},0)},_editorTreeSearchPageInfoSuccess:function(a,i){setTimeout(function(){var l,r="ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.memberEditorPageSize:i.model.memberEditorPageSize;for(i._memberSearchPageSettings.currentMemberSearchPage>1?i.element.find(".e-memberSearchPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"):i.element.find(".e-memberSearchPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"),i._memberSearchPageSettings.currentMemberSearchPage==parseInt(e.trim(i.element.find(".e-memberSearchPageCount").text().split("/")[1]))?i.element.find(".e-memberSearchPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"):i.element.find(".e-memberSearchPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"),a=t.DataManager(a).executeLocal(t.Query().where(t.Predicate("id","notequal","(All)_0").and("id","notequal","All"))).slice((i._memberSearchPageSettings.currentMemberSearchPage-1)*r,(i._memberSearchPageSettings.currentMemberSearchPage-1)*r+r),l=0;l<a.length;l++)t.isNullOrUndefined(a[l].pid)||(a[l].parentId=a[l].pid);for(l=0;l<a.length;l++)t.Pivot._appendParentNodes(a,a[l],i);i.element.find(".e-memberCurrentSearchPage").val(i._memberSearchPageSettings.currentMemberSearchPage),a.splice(0,0,{id:"SearchFilterSelection",name:i._getLocalizedLabels("AddCurrentSelectionToFilter"),checkedStatus:i._isSelectSearchFilter,tag:"SearchFilterSelection",spriteCssClass:"e-searchfilterselection",uniqueName:"Add current selection to filter"}),"ejPivotClient"==i.pluginName&&i.model.analysisMode==t.Pivot.AnalysisMode.Olap&&i.model.operationalMode==t.Pivot.OperationalMode.ServerMode?i._appendTreeViewData(a,i.element.find(".pvtBtn").parent("[data-tag='Slicers:"+i._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0):t.Pivot._createSearchTreeview(a,i),i._waitingPopup.hide(),i._parentNodeCollection={},i._parentSearchNodeCollection={}},0)},_drillEditorTreeNode:function(i,l,r){var n,o;l._waitingPopup.show(),n=i.childNodes,l._isEditorDrillPaging&&!l._isEditorCollapseDrillPaging?l.element.find(".e-memberDrillPager").find(".e-nextPageDiv").length>0&&(l._memberDrillPageSettings={currentMemberDrillPage:1,startDrillPage:0,endDrillPage:0},t.isNullOrUndefined(i.parentNode.id)||(l._editorDrillTreeData[i.parentNode.id]=n.slice(),l._editorDrillTreePageSettings[i.parentNode.id]=e.extend(!0,{},l._memberDrillPageSettings)),this._refreshDrillEditorPager(i,l,r)):l._isEditorCollapseDrillPaging&&(l.element.find(".e-memberDrillPager").find(".e-nextPageDiv").length>0&&(l._isEditorCollapseDrillPaging=!1,l._memberDrillPageSettings=t.isNullOrUndefined(i.parentNode.id)?i.drillPageSettings:i.drillPageSettings[i.parentNode.id]),this._refreshDrillEditorPager(i,l,r)),l._drilledNode=i.parentNode.id,o=t.isNullOrUndefined(i.parentNode.id)?i.parentNode.concat(i.childNodes):this._getParentsTreeList(l,i.parentNode.id,l._editorTreeData).concat(t.DataManager(n).executeLocal(t.Query().where("pid","notequal",a).page(l._memberDrillPageSettings.currentMemberDrillPage,r))),"ejPivotClient"==l.pluginName&&l.model.analysisMode==t.Pivot.AnalysisMode.Olap&&l.model.operationalMode==t.Pivot.OperationalMode.ServerMode?l._appendTreeViewData(o,l.element.find(".pvtBtn").parent("[data-tag='Slicers:"+l._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0):t.Pivot._createSearchTreeview(o,l),l._waitingPopup.hide()},_refreshDrillEditorPager:function(t,a,i){a.element.find(".e-memberPager,.e-memberSearchPager").css("display","none"),a.element.find(".e-memberDrillPager").css("display","block");var l=t.childNodes.length/i;l!=Math.round(l)&&(l=parseInt(l)+1),a._memberDrillPageSettings.currentMemberDrillPage==l&&a.element.find(".e-memberDrillPager").find(".e-nextPage, .e-lastPage").addClass("disabled"),a.element.find(".e-memberDrillPageCount").html("/ "+l),a.element.find(".e-memberCurrentDrillPage").val(a._memberDrillPageSettings.currentMemberDrillPage),a._memberDrillPageSettings.currentMemberDrillPage>1?a.element.find(".e-memberDrillPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"):a.element.find(".e-memberDrillPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"),a._memberDrillPageSettings.currentMemberDrillPage==parseInt(e.trim(a.element.find(".e-memberDrillPageCount").text().split("/")[1]))?a.element.find(".e-memberDrillPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"):a.element.find(".e-memberDrillPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"),t.childNodes=t.childNodes.slice((a._memberDrillPageSettings.currentMemberDrillPage-1)*i,a._memberDrillPageSettings.currentMemberDrillPage*i)},_getParentsTreeList:function(e,a,i){var l,r=[];do{parentNodes=t.DataManager(i).executeLocal(t.Query().where("id","equal",a)),l=!t.isNullOrUndefined(parentNodes)&&parentNodes.length>0&&!t.isNullOrUndefined(parentNodes[0].pid),r.push(new t.Predicate("id","equal",a)),a=l?parentNodes[0].pid:null}while(!t.isNullOrUndefined(a));return t.DataManager(i).executeLocal(t.Query().where(t.Predicate.or(r)))},_onNodeCollapse:function(i){var l,r=t.isNullOrUndefined(i.olapCtrlObj)?this:i.olapCtrlObj,n=!1,o={memberEditorPageSize:"ejPivotSchemaDesigner"==r.pluginName?r.model.pivotControl.model.memberEditorPageSize:r.model.memberEditorPageSize,enableMemberEditorPaging:"ejPivotSchemaDesigner"==r.pluginName?r.model.pivotControl.model.enableMemberEditorPaging:r.model.enableMemberEditorPaging};if(jQuery.each(r._editorTreeData,function(e,a){a.id==i.id?(t.isNullOrUndefined(a.pid)||(i.parentId=a.pid),a.expanded=!1):a.pid==i.id&&(t.isNullOrUndefined(r._editorDrillTreeData[a.id])||(n=!0))}),o.enableMemberEditorPaging&&(n||!t.isNullOrUndefined(r._editorDrillTreeData[i.id])||""==i.parentId)){r.element.find(".searchEditorTreeView").data("ejMaskEdit").clear(),r._lastSavedTree=[],r._isEditorDrillPaging=!1,r.element.find(".e-memberPager").length>0?(r.element.find(".e-memberPager").css("display","block"),r.element.find(".e-memberDrillPager,.e-memberSearchPager").css("display","none")):r.element.find(".e-memberDrillPager, .e-memberSearchPager").css("display","none");var s=[],d=i.parentId,u=!1,c=!1,p="";if(!t.isNullOrUndefined(d)&&""!=d){do{parentNodes=t.DataManager(r._editorTreeData).executeLocal(t.Query().where("id","equal",d)),u=!!(u||o.memberEditorPageSize<=t.DataManager(r._editorTreeData).executeLocal(t.Query().where("pid","equal",d)).length),s.push(new t.Predicate(u?"id":"pid","equal",d)),!c&&u&&o.memberEditorPageSize<t.DataManager(r._editorTreeData).executeLocal(t.Query().where("pid","equal",d)).length&&(c=!0,p=d),d=parentNodes[0].pid}while(!t.isNullOrUndefined(d));u?s.push(new t.Predicate("id","equal",i.parentId)):s.push(new t.Predicate("pid","equal",a))}u?(t.Pivot._makeAncestorsExpandable(r,i.parentId),r._isEditorCollapseDrillPaging=!0,(l={drillPageSettings:t.isNullOrUndefined(r._editorDrillTreePageSettings[p])&&"ejPivotSchemaDesigner"==r.pluginName?r.model.pivotControl._editorDrillTreePageSettings[p]:r._editorDrillTreePageSettings[p],parentNode:t.DataManager(e.extend(!0,[],r._editorTreeData)).executeLocal(t.Query().where(t.Predicate.or(s))),childNodes:t.DataManager(e.extend(!0,[],r._editorTreeData)).executeLocal(t.Query().where("pid","equal",p))}).parentNode=e.grep(l.parentNode,function(t){var a=!1;return e.each(l.childNodes,function(e,i){i.id==t.id&&(i.expanded=!0,a=!0)}),!a}),t.Pivot._drillEditorTreeNode(l,r,o.memberEditorPageSize)):(r.model.enableMemberEditorSorting&&(r._editorTreeData=t.DataManager(r._editorTreeData).executeLocal(t.Query().sortBy("name",r._sortType))),0==s.length&&s.push(new t.Predicate("pid","equal",a)),r.element.find(".e-memberPager").length>0?"ejPivotClient"!=r.pluginName?t.Pivot._createSearchTreeview(t.DataManager(r._editorTreeData).executeLocal(t.Query().where(t.Predicate.or(s)).page(r._memberPageSettings.currentMemeberPage,o.memberEditorPageSize)),r):r._appendTreeViewData(t.DataManager(r._editorTreeData).executeLocal(t.Query().where(t.Predicate.or(s)).page(r._memberPageSettings.currentMemeberPage,o.memberEditorPageSize)),r.element.find(".pvtBtn").parent("[data-tag='Slicers:"+r._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0):"ejPivotClient"!=r.pluginName?t.Pivot._createSearchTreeview(t.DataManager(r._editorTreeData).executeLocal(t.Query().where(t.Predicate.or(s))),r):r._appendTreeViewData(t.DataManager(r._editorTreeData).executeLocal(t.Query().where(t.Predicate.or(s))),r.element.find(".pvtBtn").parent("[data-tag='Slicers:"+r._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0))}},_searchEditorTreeNodes:function(i,l){if(t.isNullOrUndefined(window.event)?0!=i.which&&13!=i.which:0!=window.event.which&&13!=window.event.which){t.isNullOrUndefined(l._waitingPopup.element)||l._waitingPopup.show();var r=this;setTimeout(function(){var i,n,o,s,d,u={memberEditorPageSize:"ejPivotSchemaDesigner"==l.pluginName?l.model.pivotControl.model.memberEditorPageSize:l.model.memberEditorPageSize,enableMemberEditorPaging:"ejPivotSchemaDesigner"==l.pluginName?l.model.pivotControl.model.enableMemberEditorPaging:l.model.enableMemberEditorPaging},c="";if("ejPivotClient"!=l.pluginName||t.isNullOrUndefined(l._pivotSchemaDesigner)){if(t.isNullOrUndefined(l.element.find(".searchEditorTreeView"))||0==l.element.find(".searchEditorTreeView").length)return!1;c=t.isNullOrUndefined(e.trim(l.element.find(".searchEditorTreeView").val()))?"":e.trim(l.element.find(".searchEditorTreeView").val()).toLowerCase()}else{if(t.isNullOrUndefined(l._pivotSchemaDesigner.element.find(".searchEditorTreeView"))||0==l._pivotSchemaDesigner.element.find(".searchEditorTreeView").length)return!1;c=t.isNullOrUndefined(e.trim(l._pivotSchemaDesigner.element.find(".searchEditorTreeView").val()))?"":e.trim(l._pivotSchemaDesigner.element.find(".searchEditorTreeView").val()).toLowerCase()}if(""!=c){var p=jQuery.extend(!0,[],t.DataManager(l._editorTreeData).executeLocal(t.Query().where("name","contains",c,!0).sortBy("name",t.isNullOrUndefined(l._sortType)?"":l._sortType))),m=e.extend(!0,[],p.slice(0,u.memberEditorPageSize+1)),g=u.enableMemberEditorPaging?m:p;for(i=0;i<g.length;i++)t.isNullOrUndefined(g[i].pid)||(g[i].parentId=g[i].pid);for(i=0;i<g.length;i++)r._appendParentNodes(g,g[i],l);l._isSearchApplied=!0,p.length>0?(l._isSelectSearchFilter=l.model.enableCheckStateOnSearch,u.enableMemberEditorPaging&&(l.element.find(".e-memberSearchPager").find(".e-nextPageDiv").length>0||l.element.find(".e-memberDrillPager").find(".e-nextPageDiv").length>0)&&(l._memberSearchPageSettings.currentMemberSearchPage=1,l._memberSearchPageSettings.startSearchPage=0,l._memberSearchPageSettings.endSearchPage=0,l.element.find(".e-memberPager,.e-memberDrillPager").css("display","none"),l._editorSearchTreeData=p.slice(),(n=t.DataManager(p).executeLocal(t.Query().where(t.Predicate("id","notequal","(All)_0").and("id","notequal","All"))).length/u.memberEditorPageSize)!=Math.round(n)&&(n=parseInt(n)+1),n>1&&l.element.find(".e-memberSearchPager").css("display","block"),l._memberSearchPageSettings.currentMemberSearchPage==n&&l.element.find(".e-memberSearchPager").find(".e-nextPage, .e-lastPage").addClass("disabled"),l.element.find(".e-memberSearchPageCount").html("/ "+n),l.element.find(".e-memberCurrentSearchPage").val(l._memberSearchPageSettings.currentMemberSearchPage),l._memberSearchPageSettings.currentMemberSearchPage>1?l.element.find(".e-memberSearchPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"):l.element.find(".e-memberSearchPager").find(".e-prevPage, .e-firstPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"),l._memberSearchPageSettings.currentMemberSearchPage==parseInt(e.trim(l.element.find(".e-memberSearchPageCount").text().split("/")[1]))?l.element.find(".e-memberSearchPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageEnabled").addClass("e-pageDisabled"):l.element.find(".e-memberSearchPager").find(".e-nextPage, .e-lastPage").removeClass("e-pageDisabled").addClass("e-pageEnabled"))):(l.element.find(".e-memberPager,.e-memberSearchPager,.e-memberDrillPager").css("display","none"),l.element.find(".e-dialogFooter").css("margin-top","5px")),g.length>0&&("All"==g[0].id&&g.splice(0,1),g.splice(0,0,{id:"SearchFilterSelection",name:l._getLocalizedLabels("AddCurrentSelectionToFilter"),checkedStatus:l._isSelectSearchFilter,tag:"SearchFilterSelection",spriteCssClass:"e-searchfilterselection",uniqueName:"Add current selection to filter"})),"ejPivotClient"==l.pluginName&&l.model.analysisMode==t.Pivot.AnalysisMode.Olap&&l.model.operationalMode==t.Pivot.OperationalMode.ServerMode?l._appendTreeViewData(g,l.element.find(".pvtBtn").parent("[data-tag='Slicers:"+l._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0):r._createSearchTreeview(g,l)}else l._isSearchApplied=!1,l._isSelectSearchFilter=l.model.enableCheckStateOnSearch,o=!t.isNullOrUndefined(l._lastSavedTree)&&e.grep(l._lastSavedTree,function(e){return e.pid}).length>0,u.enableMemberEditorPaging&&l.element.find(".e-memberSearchPager").find(".e-nextPageDiv").length>0&&(l._editorSearchTreeData=[],""!=l.element.find(".e-memberPageCount").text()&&l.element.find(".e-memberPager").css("display","block"),l.element.find(".e-memberSearchPager").css("display","none")),o&&""!=l.element.find(".e-memberDrillPageCount").text()&&(l.element.find(".e-memberDrillPager").css("display","block"),l.element.find(".e-memberPager").css("display","none")),"ejPivotClient"==l.pluginName&&l.model.analysisMode==t.Pivot.AnalysisMode.Olap&&l.model.operationalMode==t.Pivot.OperationalMode.ServerMode?l._appendTreeViewData(u.enableMemberEditorPaging?o?t.DataManager(l._lastSavedTree).executeLocal(t.Query().sortBy("name",t.isNullOrUndefined(l._sortType)?"":l._sortType)):t.DataManager(l._editorTreeData).executeLocal(t.Query().where("pid","equal",a).page(l._memberPageSettings.currentMemeberPage,u.memberEditorPageSize).sortBy("name",t.isNullOrUndefined(l._sortType)?"":l._sortType)):l._editorTreeData,l.element.find(".pvtBtn").parent("[data-tag='Slicers:"+l._selectedFieldName.replace(/\[/g,"").replace(/\]/g,"")+"']").length>0):r._createSearchTreeview(u.enableMemberEditorPaging?o?t.DataManager(l._lastSavedTree).executeLocal(t.Query().sortBy("name",t.isNullOrUndefined(l._sortType)?"":l._sortType)):t.DataManager(l._editorTreeData).executeLocal(t.Query().where(t.Predicate("pid","equal",null).and("id","notequal","All").and("id","notequal","(All)_0")).page(l._memberPageSettings.currentMemeberPage,u.memberEditorPageSize).sortBy("name",t.isNullOrUndefined(l._sortType)?"":l._sortType)):l._editorTreeData,l);s={id:"SearchFilterSelection",type:l._isSelectSearchFilter?"nodeCheck":"nodeUncheck"},d=l.element.find(".e-editorTreeView"),t.Pivot._updateSearchFilterSelection(s,d,l),l._waitingPopup.hide(),l._parentNodeCollection={},l._parentSearchNodeCollection={}},0)}},_createSearchTreeview:function(a,i){"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.enableMemberEditorPaging:i.model.enableMemberEditorPaging;var l,r,n="ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.enableAdvancedFilter:i.model.enableAdvancedFilter,o="ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.enableMemberEditorSorting:i.model.enableMemberEditorSorting,s=i.element.find(".e-pvtBtn").parent("[data-tag='Slicers:"+(i._selectedFieldName||i._dialogHead)+"']").length>0,d=("ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.analysisMode:i.model.analysisMode,"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.operationalMode:i.model.operationalMode);for(!i._isSearchApplied&&0==i._editorSearchTreeData.length&&a.length>0&&(i._lastSavedTree=a),a.length>0&&(a=t.DataManager(a).executeLocal(t.Query().where(t.Predicate("id","notequal","All").and("id","notequal","(All)_0")))).splice(0,0,{id:"All",name:n&&!s?"(Select All)":d==t.Pivot.OperationalMode.ServerMode?"(All)":"All",checkedStatus:i._isAllMemberChecked,_isAllMemberChecked:i._isAllMemberChecked}),i.element.find(".e-editorTreeView").ejTreeView({showCheckbox:!0,loadOnDemand:!0,enableRTL:i.model.enableRTL,beforeDelete:function(e){if(!t.isNullOrUndefined(e.event)&&"keydown"==e.event.type&&"delete"==e.event.originalEvent.key.toLowerCase())return!1},height:o?"200px":"245px",fields:{id:"id",text:"name",isChecked:"checkedStatus",parentId:"pid",expanded:"expanded",hasChild:"hasChildren",dataSource:t.Pivot._showEditorLinkPanel(a,i,"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl:i)}}),l=i.element.find(".e-editorTreeView").find("li"),r=0;r<l.length;r++)t.isNullOrUndefined(e(l[r]).attr("id"))||e(l[r]).attr("data-tag",t.DataManager(a).executeLocal(t.Query().where("id","equal",e(l[r]).attr("id")))[0].tag);i._memberTreeObj=i.element.find(".e-editorTreeView").data("ejTreeView"),i._memberTreeObj.model.nodeCheck=t.proxy(i._nodeCheckChanges,i),i._memberTreeObj.model.nodeUncheck=t.proxy(i._nodeCheckChanges,i),"ejPivotGrid"==i.pluginName?i.model.operationalMode==t.Pivot.OperationalMode.ClientMode?i._memberTreeObj.model.beforeExpand=t.proxy(i._beforeNodeExpand,i):i._memberTreeObj.model.nodeClick=t.proxy(i._nodeExpand,i):(i.model.pivotControl.model.operationalMode==t.Pivot.OperationalMode.ClientMode?i._memberTreeObj.model.beforeExpand=t.proxy(i._beforeNodeExpand,i):i._memberTreeObj.model.nodeClick=t.proxy(i._nodeExpand,i),i._memberTreeObj.model.beforeCollapse=t.proxy(t.Pivot._onNodeCollapse,i)),t.isNullOrUndefined(i.element.find(".e-dialog .e-text:visible").first())||(i.element.find(".e-dialog .e-text:visible").length>0?(i.element.find(".e-dialog .e-text:visible").first().attr("tabindex","-1").addClass("e-hoverCell"),i.element.find(".e-dialog button").removeClass("e-hoverCell")):i.element.find(".e-dialog button:visible").first().attr("tabindex","-1").addClass("e-hoverCell")),0==i._memberTreeObj.element.find(".e-plus").length&&0==i._memberTreeObj.element.find(".e-minus").length&&i._memberTreeObj.element.find(".e-item").css("padding","0px"),i.model.enableMemberEditorSorting&&this._separateAllMember(i)},_separateAllMember:function(e){var a=e.element.hasClass("e-pivotclient")&&"servermode"==e.model.operationalMode&&"olap"==e.model.analysisMode,i="ejPivotSchemaDesigner"==e.pluginName?e.model.pivotControl.model.enableAdvancedFilter:e.model.enableAdvancedFilter,l="ejPivotSchemaDesigner"==e.pluginName?e.model.pivotControl.model.enableRTL:e.model.enableRTL,r="ejPivotSchemaDesigner"==e.pluginName?e.model.pivotControl.model.analysisMode:e.model.analysisMode,n=a?"":t.buildTag("div.e-checkAllBox",t.buildTag("input#allElement.allMember","",{float:l?"right":"left"},{name:"row",type:"checkbox",tabindex:0})[0].outerHTML+" "+t.buildTag("label.e-allElementLabel",i?"(Select All)":"All",{"margin-left":"5px"})[0].outerHTML,{width:"100px",float:l?"right":"left"})[0].outerHTML,o=t.buildTag("div.memberSortDiv",t.buildTag("div.e-icon e-memberAscendingIcon",{margin:"5px"})[0].outerHTML+t.buildTag("div.e-icon e-memberDescendingIcon")[0].outerHTML,{height:"35px","margin-left":"5px",float:l?"left":"right"})[0].outerHTML,s=t.buildTag("div.memberSortingDiv",n+o,{height:"20px",margin:"ejPivotSchemaDesigner"==e.pluginName?l?r==t.Pivot.AnalysisMode.Pivot?"10px 15px 0px 21px":"10px 31px 0px 12px":r==t.Pivot.AnalysisMode.Pivot?"10px 0px 0px 8px":"10px 0px 0px 20px":l?r==t.Pivot.AnalysisMode.Pivot?"10px 15px 0px 20px":"10px 28px 0px 20px":r==t.Pivot.AnalysisMode.Pivot?"10px 0px 0px 20px":"10px 0px 0px 29px"});i&&e.element.find(".e-editorTreeView").css("margin-top","10px"),e.element.find(".memberSortingDiv, .e-separateDiv").remove(),r==t.Pivot.AnalysisMode.Pivot&&e.element.find(".e-editorTreeView").addClass("e-treeViewUl"),a||e.element.find(".e-editorTreeView").before(s),("All"==e.element.find(".e-editorTreeView li:first").attr("id")||"(All)_0"==e.element.find(".e-editorTreeView li:first").attr("id"))&&e.element.find(".e-editorTreeView li:first").css("display","none"),a?(e.element.find(".memberSortDiv, .e-separateDiv").remove(),e.element.find(".e-checkOptions").after(t.buildTag("div.e-separateDiv",{margin:"0px 5px"})[0].outerHTML),e.element.find(".e-checkOptions").append(o),i&&e.element.find(".e-editorTreeView").height(235)):(e.element.find(".memberSortingDiv").after(t.buildTag("div.e-separateDiv",{})[0].outerHTML),e.element.find(".allMember").ejCheckBox({size:"small",width:"40px",checked:"disabled"!=e.element.find(".e-dialogOKBtn").attr("disabled"),change:t.proxy(e._nodeCheckChanges,e)})),"ascending"==e._sortType?e.element.find(".e-memberAscendingIcon").addClass("e-selectedSort"):"descending"==e._sortType&&e.element.find(".e-memberDescendingIcon").addClass("e-selectedSort")},_checkChanges:function(e){var t="ejPivotSchemaDesigner"==this.pluginName?this.model.pivotControl:this;e.isChecked?t._nodeCheckChanges(e):e.isChecked||t._nodeUnCheckChanges(e)},_fetchMemberPageSuccess:function(i){var l,r="ejPivotSchemaDesigner"==this.pluginName?this.model.pivotControl:this;i[0]!=a&&i.length>0?(l=i[0].Value,null!=i[1]&&i[1]!=a&&(this.model.customObject=i[1].Value)):i.d!=a&&i.d.length>0?(l=i.d[0].Value,null!=i.d[1]&&i.d[1]!=a&&(this.model.customObject=i.d[1].Value)):i!=a&&i.length>0?(l=i.EditorTreeInfo,null!=i&&i.customObject!=a&&(this.model.customObject=i.customObject)):i!=a&&(l=i.EditorTreeInfo,null!=i&&i.customObject!=a&&(this.model.customObject=i.customObject)),this._memberPageSettings.endPage="ejPivotSchemaDesigner"==this.pluginName?this.model.pivotControl.model.memberEditorPageSize:this.model.memberEditorPageSize,this._memberPageSettings.startPage=0,this._memberPageSettings.currentMemeberPage=1,filteredData=JSON.parse(l),this._editorTreeData=e.extend(!0,[],filteredData),r.model.enableAdvancedFilter&&(this._editorTreeData=e.map(this._editorTreeData,function(e){if(t.isNullOrUndefined(e.levels))return e})),("ejPivotSchemaDesigner"==this.pluginName&&this.model.pivotControl&&this.model.pivotControl.model.enableAdvancedFilter&&this.model.pivotControl.model.analysisMode==t.PivotGrid.AnalysisMode.Olap&&this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode||"ejPivotGrid"==this.pluginName&&this.model.enableAdvancedFilter&&this.model.analysisMode==t.PivotGrid.AnalysisMode.Olap&&this.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode)&&(this._memberPagingAvdData=filteredData.splice(filteredData.length-1,1)),this._memberCount=t.DataManager(this._editorTreeData).executeLocal(t.Query().where(t.Predicate("pid","equal",null).and("id","notequal","All").and("id","notequal","(All)_0"))).length,filteredData=t.DataManager(this._editorTreeData).executeLocal(t.Query().where("pid","equal",a).page(this._memberPageSettings.currentMemeberPage,"ejPivotSchemaDesigner"==this.pluginName?this.model.pivotControl.model.memberEditorPageSize+1:this.model.memberEditorPageSize+1)),this._fetchMemberSuccess({EditorTreeInfo:JSON.stringify(filteredData)})},_memberPageNodeUncheck:function(a,i){var l,r="",n=null,o="ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.enableMemberEditorPaging:i.model.enableMemberEditorPaging;e(a.currentElement).parent().parent().hasClass("e-editorTreeView")&&!i._isSearchApplied&&o?(r=t.DataManager(i._editorTreeData).executeLocal(t.Query().page(i._memberPageSettings.currentMemeberPage,"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.memberEditorPageSize+1:i.model.memberEditorPageSize+1).where("id","equal",a.currentElement.attr("id")))[0],t.isNullOrUndefined(i._editorSearchTreeData)||(n=t.DataManager(i._editorSearchTreeData).executeLocal(t.Query().page(i._memberPageSettings.currentMemeberPage,"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.memberEditorPageSize+1:i.model.memberEditorPageSize+1).where("id","equal",a.currentElement.attr("id")))[0])):(r=t.DataManager(i._editorTreeData).executeLocal(t.Query().where("id","equal",a.currentElement.attr("id")))[0],t.isNullOrUndefined(i._editorSearchTreeData)||(n=t.DataManager(i._editorSearchTreeData).executeLocal(t.Query().where("id","equal",a.currentElement.attr("id")))[0])),t.isNullOrUndefined(r)||(r.checkedStatus=!1,t.isNullOrUndefined(r.pid)||(l=t.DataManager(i._editorTreeData).executeLocal(t.Query().where("pid","equal",r.pid).where("checkedStatus","equal",!0)),t.isNullOrUndefined(l)||0!=l.length||t.Pivot._unSelectParentTreeNode(r,i)),l=t.DataManager(i._editorTreeData).executeLocal(t.Query().where("pid","equal",r.id)),!t.isNullOrUndefined(l)&&l.length>0&&t.Pivot._unSelectChildTreeNode(r,i)),t.isNullOrUndefined(n)||(n.checkedStatus=!1,t.isNullOrUndefined(n.pid)||(l=t.DataManager(i._editorSearchTreeData).executeLocal(t.Query().where("pid","equal",n.pid).where("checkedStatus","equal",!0)),t.isNullOrUndefined(l)||0!=l.length||t.Pivot._unSelectParentTreeNode(n,i)),l=t.DataManager(i._editorSearchTreeData).executeLocal(t.Query().where("pid","equal",r.id)),!t.isNullOrUndefined(l)&&l.length>0&&t.Pivot._unSelectChildTreeNode(n,i))},_memberPageNodeCheck:function(a,i){var l,r,n="",o=null,s="ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.enableMemberEditorPaging:i.model.enableMemberEditorPaging;if(e(a.currentElement).parent().parent().hasClass("e-editorTreeView")&&!i._isSearchApplied&&s?(n=t.DataManager(i._editorTreeData).executeLocal(t.Query().page(i._memberPageSettings.currentMemeberPage,"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.memberEditorPageSize+1:i.model.memberEditorPageSize+1).where("id","equal",a.currentElement.attr("id")))[0],t.isNullOrUndefined(i._editorSearchTreeData)||(o=t.DataManager(i._editorSearchTreeData).executeLocal(t.Query().page(i._memberPageSettings.currentMemeberPage,"ejPivotSchemaDesigner"==i.pluginName?i.model.pivotControl.model.memberEditorPageSize+1:i.model.memberEditorPageSize+1).where("id","equal",a.currentElement.attr("id")))[0])):(n=t.DataManager(i._editorTreeData).executeLocal(t.Query().where("id","equal",a.currentElement.attr("id")))[0],t.isNullOrUndefined(i._editorSearchTreeData)||(o=t.DataManager(i._editorSearchTreeData).executeLocal(t.Query().where("id","equal",a.currentElement.attr("id")))[0])),!t.isNullOrUndefined(n)&&(n.checkedStatus=!0,t.isNullOrUndefined(n.pid)||t.Pivot._selectParentTreeNode(n,i),!t.isNullOrUndefined(n.id)&&(l=t.DataManager(i._editorTreeData).executeLocal(t.Query().where("pid","equal",n.id)),!t.isNullOrUndefined(l)&&l.length>0)))for(r=0;r<l.length;r++)l[r].checkedStatus=!0,(l[r].expanded||l[r].isChildMerged)&&t.Pivot._selectChildTreeNode(l[r],i);if(!t.isNullOrUndefined(o)&&(o.checkedStatus=!0,t.isNullOrUndefined(o.pid)||t.Pivot._selectParentTreeNode(o,i),!t.isNullOrUndefined(o.id)&&(l=t.DataManager(i._editorSearchTreeData).executeLocal(t.Query().where("pid","equal",o.id)),!t.isNullOrUndefined(l)&&l.length>0)))for(r=0;r<l.length;r++)l[r].checkedStatus=!0,t.Pivot._selectChildTreeNode(l[r],i)},_appendParentNodes:function(e,a,i){var l,r;t.isNullOrUndefined(a.pid)||(t.isNullOrUndefined(i._parentNodeCollection[a.pid])?(l=jQuery.extend(!0,[],t.DataManager(i._editorTreeData).executeLocal(t.Query().where("id","equal",a.pid))),i._parentNodeCollection[a.pid]=l):l=i._parentNodeCollection[a.pid],!t.isNullOrUndefined(l)&&l.length>0&&(t.isNullOrUndefined(i._parentSearchNodeCollection[l[0].id])?(r=jQuery.extend(!0,[],t.DataManager(e).executeLocal(t.Query().where("id","equal",l[0].id))),i._parentSearchNodeCollection[l[0].id]=l):r=i._parentSearchNodeCollection[l[0].id]),t.isNullOrUndefined(r)||(0==r.length?(l[0].expanded=!0,e.push(l[0]),t.isNullOrUndefined(l[0].pid)||this._appendParentNodes(e,l[0],i)):r[0].expanded=!0))},_selectParentTreeNode:function(e,a){var i=t.DataManager(a._editorTreeData).executeLocal(t.Query().where("id","equal",e.pid));!t.isNullOrUndefined(i)&&i.length>0&&(i[0].checkedStatus=!0,this._selectParentTreeNode(i[0],a))},_selectChildTreeNode:function(e,a){var i,l=t.DataManager(a._editorTreeData).executeLocal(t.Query().where("pid","equal",e.id));if(!t.isNullOrUndefined(l)&&l.length>0)for(i=0;i<l.length;i++)l[i].checkedStatus=!0,(l[i].expanded||l[i].isChildMerged)&&this._selectChildTreeNode(l[i],a)},_unSelectChildTreeNode:function(e,a){var i,l=t.DataManager(a._editorTreeData).executeLocal(t.Query().where("pid","equal",e.id));if(!t.isNullOrUndefined(l)&&l.length>0)for(i=0;i<l.length;i++)l[i].checkedStatus=!1,(l[i].expanded||l[i].isChildMerged)&&this._unSelectChildTreeNode(l[i],a)},_unSelectParentTreeNode:function(e,a){var i=t.DataManager(a._editorTreeData).executeLocal(t.Query().where("id","equal",e.pid));!t.isNullOrUndefined(i)&&i.length>0&&(i[0].checkedStatus=!1,0==t.DataManager(a._editorTreeData).executeLocal(t.Query().where("pid","equal",i[0].pid).where("checkedStatus","equal",!0)).length&&this._unSelectParentTreeNode(i[0],a))},_getSelectedTreeState:function(e,i){var l,r,n,o,s,d;if(e){for(s=[],l=t.DataManager(i._editorTreeData).executeLocal(t.Query().where("pid","equal",a)),d=0;d<l.length;d++){if(r=t.DataManager(i._editorTreeData).executeLocal(t.Query().where("pid","equal",l[d].id)),n={caption:l[d].name,parentId:t.isNullOrUndefined(l[d].pid)?"None":l[d].pid,id:l[d].id,checked:l[d].checkedStatus,expanded:r.length>0,childNodes:[],tag:l[d].tag},r.length>0)for(o=0;o<r.length;o++)n.childNodes.push(this._getEditorSlicerInfo(r[o],i));s.push(n)}return JSON.stringify(s)}for(s="",d=0;d<i._editorTreeData.length;d++)1==i._editorTreeData[d].checkedStatus&&(s+="::"+i._editorTreeData[d].id+"||"+i._editorTreeData[d].tag);return s},_getUnSelectedTreeState:function(e){for(var t="",a=0;a<e._editorTreeData.length;a++)0==e._editorTreeData[a].checkedStatus&&(t+="::"+e._editorTreeData[a].id+"||"+e._editorTreeData[a].tag);return t},_getEditorSlicerInfo:function(e,a){var i,l=t.DataManager(a._editorTreeData).executeLocal(t.Query().where("pid","equal",e.id)),r={caption:e.name,parentId:t.isNullOrUndefined(e.pid)?"None":e.pid,id:e.id,checked:e.checkedStatus,expanded:l.length>0,childNodes:[],tag:e.tag};if(l.length>0)for(i=0;i<l.length;i++)r.childNodes.push(this._getEditorSlicerInfo(l[i],a));return r},_editorLinkPanelClick:function(){this.element.find(".e-dialog").hide(),t.Pivot._createErrorDialog(this._getLocalizedLabels("EditorLinkPanelAlert").split("1000").join(this.model.maxNodeLimitInMemberEditor),this._getLocalizedLabels("Warning"),this)},_showEditorLinkPanel:function(a,i,l){var r,n;if(!l.model.enableMemberEditorPaging&&(l.model.analysisMode!=t.Pivot.AnalysisMode.Pivot||i._isSearchApplied||(i._editorTreeData=a),a.length>l.model.maxNodeLimitInMemberEditor+(i._isSearchApplied?1:0))){var o=[],s={},d={},u=!1;for(r=0;r<a.length;r++)t.isNullOrUndefined(s[a[r].pid])?(t.isNullOrUndefined(a[r].pid)||(n=e.grep(a,function(e){if(e.id==a[r].pid)return e})).length>0&&(d[a[r].pid]=!!n[0].expanded),s[a[r].pid]=1):s[a[r].pid]++,s[a[r].pid]<=l.model.maxNodeLimitInMemberEditor+(i._isSearchApplied&&t.isNullOrUndefined(a[r].pid)?1:0)?o.push(a[r]):(t.isNullOrUndefined(d[a[r].pid])||d[a[r].pid])&&(u=!0);a=o,u&&i.element.find("div.e-linkOuterPanel").css("display","block")}return a},createErrorDialog:function(a){var i,l;t.Pivot.openPreventPanel(a),0==a.element.find(".e-errorDialog").length?(l=t.buildTag("div.e-errorDialog#ErrorDialog",t.buildTag("div.warningImg")[0].outerHTML+t.buildTag("div.warningContent",a._getLocalizedLabels("AlertMsg"))[0].outerHTML+t.buildTag("div",t.buildTag("button#ErrOKBtn.errOKBtn","OK")[0].outerHTML)[0].outerHTML).attr("title",a._getLocalizedLabels("Warning"))[0].outerHTML,a.element.append(l),a.element.find(".e-errorDialog").ejDialog({target:"#"+a._id,enableResize:!1,enableRTL:a.model.enableRTL,width:"400px"}),i=a.element.find(".e-errorDialog").data("ejDialog"),e("#"+i._id+"_wrapper").css({left:"50%",top:"50%"}),a.element.find(".errOKBtn").ejButton({type:t.ButtonType.Button,click:t.proxy(t.Pivot.errOKBtnClick,a)}),a.element.find(".e-dialog .e-close").attr("title",a._getLocalizedLabels("Close"))):(i=a.element.find(".e-errorDialog").data("ejDialog")).open()},errOKBtnClick:function(){this.element.find("#preventDiv").remove(),this.element.find(".e-errorDialog").data("ejDialog")._ejDialog.find("div.e-dialog-icon").trigger("click")},doAjaxPost:function(i,l,r,n,o,s){var d,u,c,p=!0;r.XMLA==a?(d="application/json; charset=utf-8",u="json",c=e.proxy(n,this)):(d="text/xml",u="xml",r=r.XMLA,c=e.proxy(n,t.olap.base,s),p=!("msie"==t.browserInfo().name&&t.browserInfo().version<=9)&&(!t.isNullOrUndefined(s)&&"loadFieldElements"!=s.action)),e.ajax({type:i,url:l,contentType:d,async:p,dataType:u,data:r,success:c,complete:t.proxy(function(t){e.proxy(t,this);this._currentAction,this.element},this),error:t.proxy(function(e){void 0!==this._ogridWaitingPopup&&null!=this._ogridWaitingPopup&&this._ogridWaitingPopup.hide(),"undefined"!=typeof oclientWaitingPopup&&null!=oclientWaitingPopup&&oclientWaitingPopup.hide();var t={action:""!=this._drillAction?this._drillAction:"initialize",customObject:"",element:this.element,Message:e};this._trigger("renderFailure",t),this.renderControlFromJSON(""),"XMLA"==this._dataModel&&this._createErrorDialog(e.statusText,this._getLocalizedLabels("Error")),e.statusText},this)})},getCubeList:function(t,a){for(var i,l=[],r=0;r<e(a).find("row").length;r++)i=e(e(a).find("row")[r]),l.push({name:e(i).children("CUBE_NAME").text()});t.pvtCtrldObj.setCubeList(l)},generateTreeViewData:function(e){var t={catalog:e.model.pivotControl.model.dataSource.catalog,cube:e.model.pivotControl.model.dataSource.cube,url:e.model.pivotControl.model.dataSource.data,request:"MDSCHEMA_DIMENSIONS"};this._getTreeData(t,this.loadDimensionElements,{schemaData:e,action:"loadFieldElements"})},loadDimensionElements:function(i,l){var r,n=i.schemaData.model.pivotControl,o={},s=(t.olap.base._getConnectionInfo(n.model.dataSource.data),{}),d=n.model.dataSource.providerName==t.olap.Providers.Mondrian;for(s={catalog:n.model.dataSource.catalog,cube:n.model.dataSource.cube,url:n.model.dataSource.data,request:"MDSCHEMA_DIMENSIONS"},n.schemaTreeView=[],n.reportItemNames=[],r=0;r<e(l).find("row").length;r++){var u=e(e(l).find("row")[r]),c=u.find("DIMENSION_UNIQUE_NAME").text(),p=u.find("DIMENSION_CAPTION").text();c.toLowerCase().indexOf("[measure")>=0?o={hasChildren:!0,isSelected:!1,id:c,name:p,spriteCssClass:"[measures]"==c.toLowerCase()?"e-folderCDB e-icon":"e-dimensionCDB e-icon",tag:c}:!e(e(l).find("row")[0]).find("HIERARCHY_CAPTION").length>0&&n.schemaTreeView.push({hasChildren:!0,isSelected:!1,id:d?c+"~#^Dim":c,name:p,spriteCssClass:"e-dimensionCDB e-icon",tag:c,defaultHierarchy:e(e(l).find("row")[r]).children("DEFAULT_HIERARCHY").text()})}n.schemaTreeView.splice(0,0,o),!n.model.enableDrillThrough||i.schemaData!=a&&i.schemaData.model.olap.showNamedSets?(s.request="MDSCHEMA_SETS",t.Pivot._getTreeData(s,t.Pivot.loadNamedSetElements,i)):(s.request="MDSCHEMA_HIERARCHIES",(t.isNullOrUndefined(n._fieldData)||!t.isNullOrUndefined(n._fieldData)&&t.isNullOrUndefined(n._fieldData.hierarchy))&&this._getFieldItemsInfo(n),n._fieldData.hierarchySuccess==a?t.Pivot._getTreeData(s,n.loadHierarchyElements,i):t.Pivot.loadHierarchyElements(i,n._fieldData.hierarchySuccess))},loadNamedSetElements:function(i,l){var r,n,o,s=i.schemaData.model.pivotControl,d={catalog:s.model.dataSource.catalog,cube:s.model.dataSource.cube,url:s.model.dataSource.data,request:"MDSCHEMA_HIERARCHIES"},u=(l=s.model.dataSource,[]);for(r=e.map(l.rows,function(e){if(e.fieldName!=a)return e.fieldName}),e.merge(r,e.map(l.columns,function(e){if(e.fieldName!=a)return e.fieldName})),e.merge(r,e.map(l.filters,function(e){if(e.fieldName!=a)return e.fieldName})),n=0;n<e(l).find("row").length;n++)o=e(e(l).find("row")[n]),e.inArray(o.find("DIMENSIONS").text().split(".")[0],u)>=0||(s.schemaTreeView.push({hasChildren:!0,isSelected:!1,pid:o.find("DIMENSIONS").text().split(".")[0],id:o.find("SET_DISPLAY_FOLDER").text()+"_"+o.find("DIMENSIONS").text().split(".")[0],name:o.find("SET_DISPLAY_FOLDER").text(),spriteCssClass:"e-folderCDB e-icon namedSets"}),u.push(o.find("DIMENSIONS").text().split(".")[0])),s.schemaTreeView.push({hasChildren:!0,isSelected:e.inArray("["+e.trim(o.children("SET_NAME").text())+"]",r)>=0,pid:o.find("SET_DISPLAY_FOLDER").text()+"_"+o.find("DIMENSIONS").text().split(".")[0],id:"["+e.trim(o.children("SET_NAME").text()).replace(/\&/g,"&amp;")+"]",name:o.children("SET_CAPTION").text(),spriteCssClass:"e-namedSetCDB e-icon",tag:o.find("EXPRESSION").text()});t.isNullOrUndefined(s._fieldData)||s._fieldData.hierarchySuccess==a?t.Pivot._getTreeData(d,t.Pivot.loadHierarchyElements,i):t.Pivot.loadHierarchyElements(i,s._fieldData.hierarchySuccess)},loadHierarchyElements:function(i,l){var r,n,o=i.schemaData.model.pivotControl,s={catalog:o.model.dataSource.catalog,cube:o.model.dataSource.cube,url:o.model.dataSource.data,request:"MDSCHEMA_LEVELS"},d=o.model.dataSource,u=o.model.dataSource.providerName==t.olap.Providers.Mondrian;for(r=e.map(d.rows,function(e){if(e.fieldName!=a)return e.fieldName}),e.merge(r,e.map(d.columns,function(e){if(e.fieldName!=a)return e.fieldName})),e.merge(r,e.map(d.filters,function(e){if(e.fieldName!=a)return e.fieldName})),n=0;n<e(l).find("row").length;n++){var c=e(e(l).find("row")[n]),p=c.find("DIMENSION_UNIQUE_NAME").text(),m=c.find("HIERARCHY_UNIQUE_NAME").text();e(o.schemaTreeView).filter(function(e,t){return t.tag==p}).map(function(e,t){return t}).length>0&&(p!=m||u)&&o.schemaTreeView.push({hasChildren:!0,isSelected:e.inArray(m,r)>=0,pid:p+(u?"~#^Dim":""),id:m,name:c.find("HIERARCHY_CAPTION").text(),spriteCssClass:"2"!=c.find("HIERARCHY_ORIGIN").text()&&"6"!=c.find("HIERARCHY_ORIGIN").text()?"e-hierarchyCDB e-icon":"e-attributeCDB e-icon",tag:m})}t.Pivot._getTreeData(s,t.Pivot.loadLevelElements,i)},loadLevelElements:function(a,i){var l,r=a.schemaData.model.pivotControl,n=e.map(e(i).find("row"),function(t){if("1"!=parseInt(e(t).children("LEVEL_TYPE").text())&&"[measures]"!=e(t).children("HIERARCHY_UNIQUE_NAME").text().toLowerCase())return{hasChildren:!1,isChecked:!1,id:e(t).find("LEVEL_UNIQUE_NAME").text(),pid:e(t).find("HIERARCHY_UNIQUE_NAME").text(),name:e(t).find("LEVEL_CAPTION").text(),tag:e(t).find("LEVEL_UNIQUE_NAME").text(),spriteCssClass:"e-level"+parseInt(e(t).children("LEVEL_NUMBER").text())+" e-icon"}});e.merge(r.schemaTreeView,n),(!r.model.enableDrillThrough||r._fieldData.measureSuccess)&&(t.isNullOrUndefined(r._fieldData)||!r._fieldData.measureSuccess?(l={catalog:r.model.dataSource.catalog,cube:r.model.dataSource.cube,url:r.model.dataSource.data,request:"MDSCHEMA_MEASURES"},t.Pivot._getTreeData(l,t.Pivot.loadMeasureElements,a)):t.Pivot.loadMeasureElements(a,r._fieldData.measureSuccess))},loadMeasureGroups:function(a,i){t.isNullOrUndefined(a.pivotControl._fieldData)&&(a.pivotControl._fieldData={}),a.pivotControl._fieldData.measuresGroups=e(i).find("row")},loadMeasureElements:function(i,l){var r,n,o,s,d=i.schemaData.model.pivotControl,u={catalog:d.model.dataSource.catalog,cube:d.model.dataSource.cube,url:d.model.dataSource.data,request:"MDSCHEMA_DIMENSIONS"},c=[];r=e.map(d.model.dataSource.values,function(e){if(e.measures!=a)return e.measures}),d.reportItemNames=e.map(r,function(e){if(e.fieldName!=a)return e.fieldName}),"en-US"!=d.model.locale&&(u={catalog:d.model.dataSource.catalog,cube:d.model.dataSource.cube,url:d.model.dataSource.data,request:"MDSCHEMA_MEASUREGROUPS"},t.Pivot._getTreeData(u,t.Pivot.loadMeasureGroups,{pivotControl:d,action:"loadFieldElements"}));var p,m,g,h=[],f=[],_=[],v=[],b=[];if("ejPivotClient"==d.pluginName&&(d.model.sortCubeMeasures==t.PivotAnalysis.SortOrder.Ascending||d.model.sortCubeMeasures==t.PivotAnalysis.SortOrder.Descending)&&d.model.sortCubeMeasures!=t.PivotAnalysis.SortOrder.None){for(sortType=d.model.sortCubeMeasures==t.PivotAnalysis.SortOrder.Ascending?"ascending":"descending",o=0;o<e(l).find("row").length;o++)f.push({name:e(l).find("row:eq("+o+") MEASURE_CAPTION").text()});for(m=t.DataManager(f).executeLocal(t.Query().sortBy("name",sortType)),e.each(m,function(t,a){for(var i=0;i<e(l).find("row").length;i++)a.name==e(l).find("row:eq("+i+") MEASURE_CAPTION").text()&&_.push(e(l).find("row:eq("+i+")"))}),o=0;o<_.length;o++)e.inArray(e(_[o]).children("MEASUREGROUP_NAME").text(),h)>=0||(h.push(e(_[o]).children("MEASUREGROUP_NAME").text()),v.push({name:e(_[o]).children("MEASUREGROUP_NAME").text()}));p=t.DataManager(v).executeLocal(t.Query().sortBy("name",sortType)),e.each(p,function(t,a){for(var i=0;i<_.length;i++)a.name==e(_[i]).children("MEASUREGROUP_NAME").text()&&b.push(e(_[i]))}),g=b}else g=e(l).find("row");for(o=0;o<g.length;o++){var C=e(g[o]),S=C.children("MEASUREGROUP_NAME").text(),y=C.find("MEASURE_UNIQUE_NAME").text();e.inArray(S,c)>=0||("en-US"!=d.model.locale?n=(s=e.map(d._fieldData.measuresGroups,function(t){if(e(t).children("MEASUREGROUP_NAME").text()==S)return e(t).children("MEASUREGROUP_CAPTION").text()})).length>0?s[0]:S:n=S,""!=S&&d.schemaTreeView.push({hasChildren:!0,isChecked:!1,pid:"[Measures]",id:S,name:n,spriteCssClass:"e-measureGroupCDB e-icon",tag:S}),c.push(S)),d.schemaTreeView.push({hasChildren:!0,isSelected:e.inArray(y,d.reportItemNames)>=0,id:y,pid:""==S?"[Measures]":S,name:C.children("MEASURE_CAPTION").text(),spriteCssClass:"measure",tag:y}),e.inArray(y,d.reportItemNames)>=0&&d.reportItemNames.splice(d.reportItemNames.indexOf(y),1)}t.isNullOrUndefined(i.schemaData)||!i.schemaData.model.olap.showKpi&&!d.model.enableKPI?t.isNullOrUndefined(i.schemaData)||i.schemaData._createTreeView(this,d.schemaTreeView):(treeNodeElement={hasChildren:!0,isChecked:!1,id:"folderStruct",name:"KPI",spriteCssClass:"kpiCDB e-folderCDB e-icon",tag:""},d.schemaTreeView.splice(1,0,treeNodeElement),u.request="MDSCHEMA_KPIS",t.Pivot._getTreeData(u,t.Pivot.loadKPIElements,i))},loadKPIElements:function(t,a){for(var i=t.schemaData.model.pivotControl,l=this.reportItemNames,r=[],n=0;n<e(a).find("row").length;n++){var o=e(e(a).find("row")[n]),s=o.children("KPI_CAPTION").text(),d=o.children("KPI_goal").text(),u=o.children("KPI_STATUS").text(),c=o.children("KPI_TREND").text(),p=o.find("KPI_VALUE").text();e.inArray(o.children("KPI_NAME").text(),r)>=0||(treeNodeElement={hasChildren:!0,isChecked:!1,pid:"folderStruct",id:s,name:s,spriteCssClass:"e-measureGroupCDB e-icon",tag:s},i.schemaTreeView.push(treeNodeElement),r.push(s)),treeNodeElement={hasChildren:!0,isSelected:e.inArray(d,l)>=0,id:d,pid:s,name:i.model.enableKPI?"Goal":i._getLocalizedLabels("Goal"),spriteCssClass:"kpiGoal e-icon",tag:d},i.schemaTreeView.push(treeNodeElement),treeNodeElement={hasChildren:!0,isSelected:e.inArray(u,l)>=0,id:u,pid:s,name:i.model.enableKPI?"Status":i._getLocalizedLabels("Status"),spriteCssClass:"kpiStatus e-icon",tag:u},i.schemaTreeView.push(treeNodeElement),treeNodeElement={hasChildren:!0,isSelected:e.inArray(c,l)>=0,id:c,pid:s,name:i.model.enableKPI?"Trend":i._getLocalizedLabels("Trend"),spriteCssClass:"kpiTrend e-icon",tag:c},i.schemaTreeView.push(treeNodeElement),treeNodeElement={hasChildren:!0,isSelected:e.inArray(p,l)>=0,id:p,pid:s,name:i.model.enableKPI?"Value":i._getLocalizedLabels("Value"),spriteCssClass:"kpiValue e-icon",tag:p},i.schemaTreeView.push(treeNodeElement)}t.schemaData._createTreeView(this,i.schemaTreeView),delete i.reportItemNames,delete i.schemaTreeView},_createCalcMemberDialog:function(i,l){var r,n,o,s,d,u,c,p;l=t.isNullOrUndefined(l.model)?this:l;r=i.length>1&&i[0]!=a?JSON.parse(i[0].Value):i.d!=a?JSON.parse(i.d[0].Value):JSON.parse(i.CubeTreeInfo),null!=l.model.afterServiceInvoke&&l._trigger("afterServiceInvoke",{action:"fetchCalcMemberTreeView",element:l.element,customObject:l.model.customObject}),t.Pivot.openPreventPanel(l),l.element.find(".e-calcMemberDialog",".e-clientDialog",".e-dialog").remove();var m=t.buildTag("div.e-cubeBrowserCalcMember",t.buildTag("div#"+l._id+"_cubeTreeViewCalcMember.e-cubeTreeViewCalcMember")[0].outerHTML,{})[0].outerHTML,g=t.buildTag("label.lblCaption",l._getLocalizedLabels("Caption"),{})[0].outerHTML+t.buildTag("input#"+l._id+"_captionFieldCM.captionFieldCM","",{}).attr("aria-label",l._getLocalizedLabels("Caption"))[0].outerHTML,h=t.buildTag("label.lblexpression",l._getLocalizedLabels("Expression"),{})[0].outerHTML+t.buildTag("textarea#"+l._id+"_expressionFieldCM.e-textarea e-droppable expressionFieldCM"+(l.model.enableRTL?" e-rtl":""),"",{}).attr("aria-label",l._getLocalizedLabels("Expression"))[0].outerHTML,f=t.buildTag("label.lblmemberType",l._getLocalizedLabels("MemberType"),{})[0].outerHTML+t.buildTag("input#"+l._id+"_memberTypeFieldCM.memberTypeFieldCM","",{}).attr("aria-label",l._getLocalizedLabels("MemberType"))[0].outerHTML+t.buildTag("input#"+l._id+"_dimensionFieldCM.dimensionFieldCM","",{}).attr("aria-label","dimension")[0].outerHTML,_=t.buildTag("label.lblformat",l._getLocalizedLabels("FormatString"),{})[0].outerHTML+t.buildTag("input#"+l._id+"_formatFieldCM.formatFieldCM","",{}).attr("aria-label",l._getLocalizedLabels("FormatString"))[0].outerHTML+t.buildTag("input#"+l._id+"_customFormatFieldCM.customFormatFieldCM","",{}).attr("aria-label","custom format")[0].outerHTML,v=t.buildTag("div.e-calcMemberFieldPanel",g+h+f+_,{})[0].outerHTML,b=t.buildTag("button#"+l._id+"_btnOk.e-btnCalcMemberOk",l._getLocalizedLabels("OK"),{},{name:l._getLocalizedLabels("OK")}).attr("aria-label",l._getLocalizedLabels("OK")).attr("title",l._getLocalizedLabels("OK").replace(/(<([^>]+)>)/gi,""))[0].outerHTML,C=t.buildTag("button#"+l._id+"_btnCancel.btnCalcMemberCancel",l._getLocalizedLabels("Cancel"),{},{name:l._getLocalizedLabels("Cancel")}).attr("aria-label",l._getLocalizedLabels("Cancel")).attr("title",l._getLocalizedLabels("Cancel").replace(/(<([^>]+)>)/gi,""))[0].outerHTML,S=t.buildTag("div.e-calcMemberFooter",b+C,{})[0].outerHTML;for(l._calcMemberDialog=t.buildTag("div#"+l._id+"_calcMemberDialog",m+v+S,{})[0].outerHTML,e(l._calcMemberDialog).appendTo("#"+l._id),e("#"+l._id+"_calcMemberDialog").ejDialog({width:"auto",title:l._getLocalizedLabels("CalculatedMember"),cssClass:l.model.cssClass+" e-calcMemberDialog",enableModal:!1,target:"#"+l._id,enableRTL:l.model.enableRTL,enableResize:!1,close:t.proxy(function(){t.Pivot.closePreventPanel(l)},l),beforeOpen:t.proxy(function(){l.element.find(".e-calcMemberDialog .e-dialog").css("display","block")},l)}),l._calcMemberDialog=l.element.find("#"+l._id+"_calcMemberDialog").data("ejDialog"),e("#"+l._id+"_btnCancel").ejButton({type:t.ButtonType.Button,width:"80px",enableRTL:l.model.enableRTL,click:t.proxy(function(){l._calcMemberDialog.close(),l._selectedCalcMember=null,t.Pivot.closePreventPanel(l)},l)}),e("#"+l._id+"_btnOk").ejButton({type:t.ButtonType.Button,width:"80px",enableRTL:l.model.enableRTL,click:t.proxy(function(){var a,i,r,n,o,s,d;if(""!=e.trim(l.element.find("#"+l._id+"_captionFieldCM").val())&&""!=e.trim(l.element.find("#"+l._id+"_expressionFieldCM").val()))if("Custom"!=l.element.find("#"+l._id+"_formatFieldCM").val()||""!=e.trim(l.element.find("#"+l._id+"_customFormatFieldCM").val())){if(t.isNullOrUndefined(l._selectedCalcMember))for(a=0;a<l._calcMembers.length;a++)if(e.trim(l.element.find("#"+l._id+"_captionFieldCM").val()).toLowerCase()==l._calcMembers[a].name.toLowerCase()){if(!confirm(l._getLocalizedLabels("Confirm")))return;l._selectedCalcMember=e.trim(l.element.find("#"+l._id+"_captionFieldCM").val())}if(l._calcMemberDialog.close(),t.Pivot.closePreventPanel(l),i="",t.isNullOrUndefined(l._selectedCalcMember)||(o=t.DataManager(l._calcMembers).executeLocal(t.Query().where("name","equal",l._selectedCalcMember,!0)),!t.isNullOrUndefined(o)&&o.length>0&&(i=o[0].tag)),l._waitingPopup.show(),r={action:"calculatedMember",olapReport:l.currentReport,clientReports:l.reports,caption:l.currentCubeName+"%"+e.trim(l.element.find("#"+l._id+"_captionFieldCM").val()),expression:e.trim(l.element.find("#"+l._id+"_expressionFieldCM").val()),memberType:l.element.find("#"+l._id+"_memberTypeFieldCM").val(),dimension:l.element.find("#"+l._id+"_dimensionFieldCM").val(),formatString:"Custom"==l.element.find("#"+l._id+"_formatFieldCM").val()?e.trim(l.element.find("#"+l._id+"_customFormatFieldCM").val()):l.element.find("#"+l._id+"_formatFieldCM").val(),uniqueName:i,customObject:l.model.customObject},l.model.operationalMode==t.Pivot.OperationalMode.ServerMode)l.doAjaxPost("POST",l.model.url+"/"+l.model.serviceMethodSettings.calculatedMember,JSON.stringify(r),l._calcMemberDroppedSuccess);else{r.caption=r.caption.replace("%",""),n="",n=r.memberType.toLowerCase().indexOf("measure")>-1?"[Measures].["+e.trim(r.caption)+"]":e(jQuery("[id*='["+r.dimension+"]']")[0]).attr("data-defaulthierarchy")+".["+e.trim(r.caption)+"]",o={caption:r.caption,expression:r.expression,tag:n,hierarchyUniqueName:"["+e.trim(r.dimension)+"].["+e.trim(r.dimension)+"]",memberType:r.memberType,formatString:r.formatString?r.formatString:r.format?r.format:null},-1==r.memberType.toLowerCase().indexOf("measure")&&null!=l._selectedCalcMember&&(t.Pivot.getReportItemByFieldName(this._schemaData._selectedFieldName,this.model.dataSource).item.hierarchyUniqueName=o.hierarchyUniqueName),l._selectedCalcMember=null;var u={id:r.caption,pid:"_0",name:r.caption,hasChildren:!1,spriteCssClass:"e-calcMemberCDB e-icon",tag:n,expression:r.expression,formatString:null,nodeType:0,hierarchyUniqueName:"Measure"==r.memberType?"":o.hierarchyUniqueName},c=!1,p=o.caption;l.model.calculatedMembers=e.grep(l.model.calculatedMembers,function(e){return e.caption==p&&(c=!0,e.caption=o.caption,e.expression=o.expression,e.hierarchyUniqueName=o.hierarchyUniqueName,e.memberType=r.memberType,e.formatString=r.formatString),e}),"_0"!=(s=l.element.find(".e-schemaFieldTree").data("ejTreeView").model.fields).dataSource[0].id&&s.dataSource.splice(0,0,{id:"_0",name:"Calculated Members",hasChildren:!0,spriteCssClass:"e-calcMemberGroupCDB e-icon",tag:""}),c?(d=this._schemaData._selectedFieldName,s.dataSource=e.grep(s.dataSource,function(e){return e.id==d&&(e.expression=o.expression,e.hierarchyUniqueName=o.hierarchyUniqueName,e.expression=o.expression,e.memberType=o.memberType,e.formatString=o.formatString),e})):l.model.calculatedMembers.push(o),c?l.refreshControl():s.dataSource.push(u),t.Pivot._refreshFieldList(l)}}else t.Pivot._createErrorDialog(l._getLocalizedLabels("EmptyFormat"),l._getLocalizedLabels("Warning"),l);else t.Pivot._createErrorDialog(l._getLocalizedLabels("EmptyField"),l._getLocalizedLabels("Warning"),l)},l)}),l.element.find("#"+l._id+"_cubeTreeViewCalcMember").ejTreeView({fields:{id:"id",parentId:"pid",text:"name",spriteCssClass:"spriteCssClass",dataSource:r},allowDragAndDrop:!0,enableRTL:l.model.enableRTL,allowDropChild:!1,allowDropSibling:!1,dragAndDropAcrossControl:!0,cssClass:"calcMemberTreeViewDragedNode",nodeDropped:t.proxy(function(t){null!=t.target&&t.target.attr("id")==l._id+"_expressionFieldCM"&&l.element.find("#"+l._id+"_expressionFieldCM").val(l.element.find("#"+l._id+"_expressionFieldCM").val()+e(t.droppedElement).attr("data-tag"))},l),beforeExpand:t.proxy(t.Pivot._getMemberChildNodes,l)}),l.element.find("#"+l._id+"_captionFieldCM").ejMaskEdit({name:"inputbox",inputMode:t.InputMode.Text,watermarkText:"",maskFormat:"",textAlign:l.model.enableRTL?"right":"left",width:"100%"}),l.element.find("#"+l._id+"_customFormatFieldCM").ejMaskEdit({name:"inputbox",inputMode:t.InputMode.Text,watermarkText:"",maskFormat:"",textAlign:l.model.enableRTL?"right":"left",width:"100%",cssClass:"e-calcMemberCustomFormat"}),l.element.find(".e-calcMemberCustomFormat").css("visibility","hidden"),l.element.find("#"+l._id+"_memberTypeFieldCM").ejDropDownList({dataSource:[{text:"Measure",value:"Measure"},{text:"Dimension",value:"Dimension"}],enableRTL:l.model.enableRTL,width:"100%",selectedIndex:0,change:t.proxy(function(e){"Dimension"==e.text?l.element.find(".e-calcMemberDimensionField").css("visibility","visible"):l.element.find(".e-calcMemberDimensionField").css("visibility","hidden")},l)}),n=t.DataManager(r).executeLocal(t.Query().where("spriteCssClass","contains","e-dimensionCDB")),o=[],p=0;p<n.length;p++)o.push({text:n[p].name,value:n[p].name});for(l.element.find("#"+l._id+"_dimensionFieldCM").ejDropDownList({dataSource:o,selectedIndex:0,width:"100%",enableRTL:l.model.enableRTL,cssClass:"e-calcMemberDimensionField"}),l.element.find(".e-calcMemberDimensionField").css("visibility","hidden"),l.element.find("#"+l._id+"_formatFieldCM").ejDropDownList({dataSource:[{text:"Standard",value:"Standard"},{text:"Currency",value:"Currency"},{text:"Percent",value:"Percent"},{text:"Custom",value:"Custom"}],enableRTL:l.model.enableRTL,selectedIndex:0,width:"100%",enableRTL:l.model.enableRTL,change:t.proxy(function(e){"Custom"==e.text?l.element.find(".e-calcMemberCustomFormat").css("visibility","visible"):l.element.find(".e-calcMemberCustomFormat").css("visibility","hidden")},l)}),s=l.element.find(".e-cubeTreeViewCalcMember").find("li"),p=0;p<s.length;p++)t.isNullOrUndefined(e(s[p]).attr("id"))||e(s[p]).attr("data-tag",t.DataManager(r).executeLocal(t.Query().where("id","equal",e(s[p]).attr("id")))[0].tag);for(d=l.element.find(".e-cubeTreeViewCalcMember .e-folderCDB"),p=0;p<d.length;p++)e(d[p].parentElement).removeClass("e-draggable");if(l.element.find(".e-cubeTreeViewCalcMember .calcMemberGroupCDB").length>0&&l.element.find(".e-cubeTreeViewCalcMember .calcMemberGroupCDB").parent().removeClass("e-draggable"),l._calcMemberTreeObj=l.element.find(".e-cubeTreeViewCalcMember").data("ejTreeView"),!t.isNullOrUndefined(l._selectedCalcMember)&&(u={},(u=l.model.operationalMode==t.Pivot.OperationalMode.ServerMode?t.DataManager(l._calcMembers).executeLocal(t.Query().where("name","equal",l._selectedCalcMember)):t.DataManager(l.model.calculatedMembers).executeLocal(t.Query().where("caption","equal",l._selectedCalcMember))).length>0)){if(c=0,c=l.model.operationalMode==t.Pivot.OperationalMode.ServerMode?u[0].nodeType:u.length>0&&u[0].memberType&&("dimension"==u[0].memberType||"Dimension"==u[0].memberType)?1:0,l.element.find("#"+l._id+"_captionFieldCM").val(u[0].caption||u[0].name),l.element.find("#"+l._id+"_expressionFieldCM").val(u[0].expression),l.element.find("#"+l._id+"_memberTypeFieldCM").data("ejDropDownList").selectItemsByIndices(c),1==c){var y=(l.model.operationalMode==t.Pivot.OperationalMode.ServerMode?u[0].tag:u[0].hierarchyUniqueName).split(".")[0].replace(/\[/g,"").replace(/\]/g,""),O=l.element.find("#"+l._id+"_dimensionFieldCM").data("ejDropDownList").model.dataSource;for(p=0;p<O.length;p++)O[p].value==y&&l.element.find("#"+l._id+"_dimensionFieldCM").data("ejDropDownList").selectItemsByIndices(p)}t.isNullOrUndefined(u[0].formatString)||("Standard"==u[0].formatString?l.element.find("#"+l._id+"_formatFieldCM").data("ejDropDownList").selectItemsByIndices(0):"Currency"==u[0].formatString?l.element.find("#"+l._id+"_formatFieldCM").data("ejDropDownList").selectItemsByIndices(1):"Percent"==u[0].formatString?l.element.find("#"+l._id+"_formatFieldCM").data("ejDropDownList").selectItemsByIndices(2):(l.element.find("#"+l._id+"_formatFieldCM").data("ejDropDownList").selectItemsByIndices(3),l.element.find("#"+l._id+"_customFormatFieldCM").val(u[0].formatString)))}l._waitingPopup.hide()},_refreshFieldList:function(a){var i,l,r,n,o,s=a.element.find(".e-schemaFieldTree").data("ejTreeView");for(s.refresh(),i=s.model.fields.dataSource,l=a.element.find(".e-schemaFieldTree li"),r=0;r<e(l).length;r++)n=e(e(l)[r]).attr("id"),(o=e.map(i,function(e){if(e.id==n)return{tag:e.tag,expression:e.expression,defaultHierarchy:e.defaultHierarchy}})).length>0&&""!=o[0]&&(e(e(l)[r]).attr("data-tag",o[0].tag),t.isNullOrUndefined(o[0].expression)||e(e(l)[r]).attr("expression",o[0].expression),t.isNullOrUndefined(o[0].defaultHierarchy)||e(e(l)[r]).attr("data-defaultHierarchy",o[0].defaultHierarchy))},_getMemberChildNodes:function(a){var i,l,r;if((e(a.currentElement).find("a > span")[0].className.indexOf("level")>-1||e(a.currentElement).find("a > span")[0].className.indexOf("member")>-1)&&(i=t.DataManager(this._calcMemberTreeObj.dataSource()).executeLocal(t.Query().where("pid","equal",e(a.currentElement).attr("id")).where("name","equal","(Blank)")),!t.isNullOrUndefined(i)&&i.length>0))if(this._calcMemberTreeObj.hideNode(i[0].id),this.pNode=a.currentElement,this._waitingPopup.show(),l=e(a.currentElement).find("a > span")[0].className.indexOf("level")>-1?"level":"member",this.model.operationalMode==t.Pivot.OperationalMode.ClientMode){var n=this.model.dataSource,o=this.element.find(".e-cubeTreeViewCalcMember").data("ejTreeView"),s=e.map(o.model.fields.dataSource,function(t){if(t.id==e(a.currentElement).attr("id"))return t});if(e(a.currentElement).children("ul").children().length>1)this._waitingPopup&&this._waitingPopup.hide();else{s.length>0&&(this._calcExpanded=s[0]);var d="select {"+e(a.currentElement).attr("data-tag")+".members}dimension properties CHILDREN_CARDINALITY, MEMBER_TYPE on 0 from ["+e.trim(n.cube)+"]",u=t.olap._mdxParser.getSoapMsg(d,n.data,n.catalog),c=t.olap.base._getConnectionInfo(n.data);this.doAjaxPost("POST",c.url,{XMLA:u},t.proxy(this._generateCalculatedMember,this),null,{action:"fetchMembers"})}}else null!=this.model.beforeServiceInvoke&&this._trigger("beforeServiceInvoke",{action:"fetchMemberChildNodes",element:this.element,customObject:this.model.customObject}),r=JSON.stringify(this.model.customObject),this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.fetchMemberTreeNodes,JSON.stringify({action:"fetchMemberChildNodes",dimensionName:e(a.currentElement).attr("data-tag")+":"+l+":"+e(a.currentElement).attr("id"),olapReport:this.currentReport,customObject:r}),t.proxy(t.Pivot._fetchMemberSuccess,this))},_fetchMemberSuccess:function(l){var r,n,o;for(r=l.length>1&&l[0]!=a?JSON.parse(l[0].Value):l.d!=a?JSON.parse(l.d[0].Value):JSON.parse(l.MemberChildNodes),null!=this.model.afterServiceInvoke&&this._trigger("afterServiceInvoke",{action:"fetchMemberChildNodes",element:this.element,customObject:this.model.customObject}),this._calcMemberTreeObj.model.beforeExpand=null,this._calcMemberTreeObj.addNode(r,e(this.pNode)),n=t.DataManager(this._calcMemberTreeObj.dataSource()).executeLocal(t.Query().where("pid","equal",e(this.pNode).attr("id")).where("name","equal","(Blank)")),!t.isNullOrUndefined(n)&&n.length>0&&this._calcMemberTreeObj.removeNode(n[0].id),e.each(e(this.pNode).children().find("li"),function(e,t){t.setAttribute("data-tag",r[e].tag)}),o=e(this.pNode).children().find("li"),i=0;i<o.length;i++)1==r[i].hasChildren&&(this._calcMemberTreeObj.addNode({id:r[i].id+"_Blank_"+i,name:"(Blank)",parentId:r[i].id},o[i]),this.element.find("#"+r[i].id).find("> div > div:first").removeClass("e-process"),this._calcMemberTreeObj.collapseNode(this.element.find("#"+r[i].id)));this._calcMemberTreeObj.model.beforeExpand=t.proxy(t.Pivot._getMemberChildNodes,this),this._waitingPopup.hide()},_drillThroughCellClick:function(a,l){var r,n,o,s,d,u,c;if(l._waitingPopup.show(),o=e(a.currentTarget.parentElement).attr("data-p"),l.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode)(n=e(l.element).parents(".e-pivotclient").length>0||e(l.element).parents(".e-maximumView").length>0?l._pivotClientObj:l).doAjaxPost("POST",n.model.url+"/"+n.model.serviceMethodSettings.drillThroughDataTable,JSON.stringify({currentReport:JSON.parse(l.getOlapReport()).Report,layout:l.model.layout,cellPos:o,selector:"",customObject:JSON.stringify(n.model.customObject)}),function(e){n._trigger("drillThrough",{element:l.element,data:e})});else{for(s=e("#"+l._id).find("tbody").find("tr:first").find("th").length,i=0;i<s;i++)-1!=(d=-1!=l.getJSONRecords()[parseInt(i*l._rowCount+parseInt(o.split(",")[1]))].Info.indexOf("Measures")||l.getJSONRecords()[parseInt(i*l._rowCount+parseInt(o.split(",")[1]))].RowSpan<=1?l.getJSONRecords()[parseInt(i*l._rowCount+parseInt(o.split(",")[1]))].Info.split("::")[0]:"").indexOf("Measures")&&(r=d),""!=d&&(l._rowHeader[i]=d);for(u=e("#"+l._id).find("tbody").find('[data-p="'+parseInt(o.split(",")[0])+","+parseInt(o.split(",")[1])+'"]').closest("tbody").prev().children("tr").length,i=0;i<u;i++)-1!=(c=-1!=l.getJSONRecords()[parseInt(parseInt(o.split(",")[0])*l._rowCount+i)].Info.indexOf("Measures")||l.getJSONRecords()[parseInt(parseInt(o.split(",")[0])*l._rowCount+i)].ColSpan<=1?l.getJSONRecords()[parseInt(parseInt(o.split(",")[0])*l._rowCount+i)].Info.split("::")[0]:"").indexOf("Measures")&&(r=c),""!=c&&(l._colHeader[i]=c);for((t.isNullOrUndefined(l._fieldData)||!t.isNullOrUndefined(l._fieldData)&&t.isNullOrUndefined(l._fieldData.hierarchy))&&l._getFieldItemsInfo(l),j=0;j<l._fieldData.measures.length;j++)r==l._fieldData.measures[j].id&&(l.measureGrp=l._fieldData.measures[j].pid);l._rowHeader=e.grep(l._rowHeader,function(e){return 0==e||e}),l._colHeader=e.grep(l._colHeader,function(e){return 0==e||e}),l._createDrillThroughQuery("",l)}},openHierarchySelector:function(e,a){var i,l,r;e.model.operationalMode==t.Pivot.OperationalMode.ServerMode?this._createDrillThroughDialog(e,a):(e._waitingPopup.show(),l=(i=e.target.className.indexOf("e-pivotclient")>=0?e._pivotGrid:e)._getConnectionInfo(e.model.dataSource.data),r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>MDSCHEMA_MEASUREGROUP_DIMENSIONS</RequestType><Restrictions><RestrictionList><CATALOG_NAME>'+e.model.dataSource.catalog+"</CATALOG_NAME><CUBE_NAME>"+e.model.dataSource.cube+"</CUBE_NAME><MEASUREGROUP_NAME>"+i.measureGrp+"</MEASUREGROUP_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>"+e.model.dataSource.catalog+"</Catalog> <LocaleIdentifier>"+l.LCID+"</LocaleIdentifier></PropertyList></Properties></Discover></Body></Envelope>",this.doAjaxPost("POST",l.url,{XMLA:r},i._loadDimensionElements,null,{pvtGridObj:i,action:"loadMeasureElements"}))},_createDrillThroughDialog:function(a,i){var l,r,n,o;a.model.operationalMode!=t.PivotGrid.OperationalMode.ServerMode&&i.shift(),a.element.find(".e-dialog:not(.e-calcMemberDialog, .e-calcMemberDialog .e-dialog), .e-clientDialog").remove();var s=t.buildTag("label#",a._getLocalizedLabels("SelectHierarchy"))[0].outerHTML,d="<div class=e-cubeTable style='width:200px; overflow:auto'><div valign=\"bottom\">"+this._createHierarchyBrowser()+"</div></div>",u=t.buildTag("div#dropDlg.dropDlg",'<table class="e-outerTable"><tr><td>'+d+"</td><td>"+s+"<br><textarea id='hrSel' style='width:270px; height:300px; resize:none; margin:0px 5px 0 5px'></textarea></br><br></td></tr></table>")[0].outerHTML+"</br>",c=t.buildTag("div",t.buildTag("button#btnOK.dialogBtnOK",a._getLocalizedLabels("OK")).attr("title",a._getLocalizedLabels("OK").replace(/(<([^>]+)>)/gi,""))[0].outerHTML+t.buildTag("button#btnCancel.dialogBtnCancel",a._getLocalizedLabels("Cancel")).attr("title",a._getLocalizedLabels("OK").replace(/(<([^>]+)>)/gi,""))[0].outerHTML,{float:"right",margin:"-5px 0 6px"})[0].outerHTML,p=t.buildTag("div#clientDialog.e-clientDialog",u+c,{opacity:"1"}).attr("title","Hierarchy Selector")[0].outerHTML;for(e(p).appendTo("#"+a._id),e("#btnOK, #btnCancel").ejButton(),e("#btnOK, #btnCancel").css({margin:"0 20px 20px 0",width:"50px"}),a.element.find(".e-clientDialog").ejDialog({width:550,target:"#"+a._id,enableResize:!1,enableRTL:a.model.enableRTL,close:t.proxy(t.Pivot.closePreventPanel,a)}),a.element.find(".cubeTreeViewHierarchy").ejTreeView({showCheckbox:!0,fields:{id:"id",parentId:"pid",text:"name",isChecked:"isSelected",spriteCssClass:"spriteCssClass",dataSource:a.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?t.isNullOrUndefined(i.d)?e.parseJSON(i):e.parseJSON(i.d):i},allowDragAndDrop:!0,allowDropChild:!1,allowDropSibling:!1,enableRTL:!!a.model.enableRTL,beforeDelete:function(){return!1},dragAndDropAcrossControl:!0,nodeDropped:t.proxy(this._hierarchyNodeDropped,a)}),a._tableTreeObj=a.element.find(".cubeTreeViewHierarchy").data("ejTreeView"),a._tableTreeObj.element.find(".e-ul").css({width:"100%",height:"100%"}),a._tableTreeObj.element.find(".e-chkbox-wrap").remove(),l=a._tableTreeObj.element.find("li"),r=0;r<l.length;r++)n=a.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?t.isNullOrUndefined(i.d)?e.parseJSON(i)[r].tag:e.parseJSON(i.d)[r].tag:i[r].tag,l[r].setAttribute("data-tag",n);a._tableTreeObj&&a._tableTreeObj.element.find("li").mouseover(t.proxy(function(t){e(t.target).parent().find(".e-measureGroupCDB, .e-dimensionCDB, .e-folderCDB").length>0&&e(t.target).css("cursor","default")},a)),o=a,e("#btnOK").click(function(){var a=e("#hrSel").val();e(".e-dialog:not(.e-calcMemberDialog, .e-calcMemberDialog .e-dialog), .e-clientDialog, .drilltableDialog").remove(),o._waitingPopup.show(),t.olap._mdxParser._createDrillThroughQuery(a,o),o._waitingPopup.hide()}),e("#btnCancel").click(function(){e(".e-dialog:not(.e-calcMemberDialog, .e-calcMemberDialog .e-dialog), .e-clientDialog").remove(),o._waitingPopup.hide()}),a.model.enableRTL&&(e(".e-dialog").addClass("e-rtl"),e(".dialogBtnCancel").css("margin","0 -70px 0 0"))},_createHierarchyBrowser:function(){return t.buildTag("div.cubeBrowserHierarchy",t.buildTag("div.cubeTreeViewHierarchy")[0].outerHTML,{width:"200px",height:"300px",overflow:"auto"})[0].outerHTML},_hierarchyNodeDropped:function(a){var i,l,r;if("hrSel"==a.dropTarget[0].id&&(i=e(e(a.droppedElement).children()[0]).find(".e-dimensionCDB").length>0?this.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?e(a.droppedElement).find("li:first").attr("data-tag"):e(a.droppedElement).find("li:first")[0].id:0==e(a.droppedElement).find("li:first").length?this.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?e(a.droppedElement.parent().parent()).attr("data-tag"):e(a.droppedElement.parent().parent())[0].id:this.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?e(a.droppedElement).attr("data-tag"):a.droppedElementData.id,!t.isNullOrUndefined(i))){for(i=i.replace("[","[$"),l=0;l<e("#hrSel").val().split(",").length;l++)if(i==e("#hrSel").val().split(",")[l])return!1;0!=(r=this.element.find("#hrSel").val()).length?(r=r+","+i,this.element.find("#hrSel").val(r)):this.element.find("#hrSel").val(i)}},_generateDrillData:function(t,a){for(var i=e(a).find("row").children(),l=e.map(i,function(e){var t=e.textContent;return'"'+e.tagName.replace(/_x005B_/g,"[").replace(/_x0020_/g," ").replace(/_x005D_/g,"]").replace(/_x0024_/g,"$").replace("].[","]-[")+'":"'+t+'"'}),r=l[0],n="",o=0;o<l.length;o++)l[o]!=r?n+=","+l[o]:n+=""==n?"[{"+l[o]:"}, {"+l[o];n+="}]",e(t.pvtGridObj.element).parents(".e-pivotclient").length>0?e(t.pvtGridObj.element).parents(".e-pivotclient").data("ejPivotClient")._trigger("drillThrough",{element:t.pvtGridObj.element,data:n}):t.pvtGridObj._trigger("drillThrough",{element:t.pvtGridObj.element,data:n})},_getFilterStateMember:function(a,i,l,r,n){if("include"==l.filterItems.filterType)if(1==l.filterItems.values.length)if(t.isNullOrUndefined(r._fieldSelectedMembers[l.fieldName.toLowerCase()])&&a){var o="select {"+l.filterItems.values[0]+"}dimension properties CHILDREN_CARDINALITY on 0 from ["+e.trim(r.model.dataSource.cube)+"]",s=t.olap._mdxParser.getSoapMsg(o,r.model.dataSource.data,r.model.dataSource.catalog),d=t.olap.base._getConnectionInfo(r.model.dataSource.data);this.doAjaxPost("POST",d.url,{XMLA:s},t.proxy(this._getInitialSlicerName,this),null,{controlObject:r,action:"fetchMembers"}),n=r._slicerName}else a||(n=l.filterItems.values[0]);else n=r._getLocalizedLabels("MultipleItems");else n=i.length-(-1==l.filterItems.values.indexOf("All")?l.filterItems.values.length:l.filterItems.values.length-1)==1?i.filter(function(e){if(-1==l.filterItems.values.indexOf(e))return e}):r._getLocalizedLabels("MultipleItems");return n},_getFilterState:function(i,l,r,n){var o,s,d="";if(n.model.operationalMode==t.Pivot.OperationalMode.ClientMode)i?(t.isNullOrUndefined(t.olap.base.olapCtrlObj)&&(t.olap.base.olapCtrlObj=n),("All"==n._fieldSelectedMembers[r.fieldName.toLowerCase()]||t.isNullOrUndefined(n._fieldSelectedMembers[r.fieldName.toLowerCase()]))&&t.olap._mdxParser.getAllMember(n.model.dataSource,r.fieldName,n),d="All"==n._fieldSelectedMembers[r.fieldName.toLowerCase()]||t.isNullOrUndefined(n._fieldSelectedMembers[r.fieldName.toLowerCase()])?n._allMember:n._fieldSelectedMembers[r.fieldName.toLowerCase()],d=this._getFilterStateMember(i,l,r,n,d)):d=this._getFilterStateMember(i,l,r,n,d);else if(n.model.analysisMode==t.Pivot.AnalysisMode.Pivot)if((o=t.isNullOrUndefined(n._tempFilterData)?[]:e.map(n._tempFilterData,function(e){return e[r.DimensionName]})).length>0&&n._fieldMembers[r.DimensionName])d=n._fieldMembers[r.DimensionName].length-o.length==1?n._fieldMembers[r.DimensionName].filter(function(e){if(-1==o.indexOf(e))return e}):n._getLocalizedLabels("MultipleItems");else if(t.isNullOrUndefined(n._clientReportCollection))d=n._getLocalizedLabels("All");else for(s=0;s<n._clientReportCollection.length;s++){if(!t.isNullOrUndefined(n._clientReportCollection[s]._fieldSelectedMembers)&&(""==n._currentRecordName&&n.element.find("#reportList")!=a&&n.element.find("#reportList")[0].value==n._clientReportCollection[s].name||""!=n._currentRecordName&&n._currentReportName==n._clientReportCollection[s].name)){n._fieldSelectedMembers[r.Tag]=n._clientReportCollection[s]._fieldSelectedMembers[r.DimensionName],d="All"==n._fieldSelectedMembers[r.Tag]||n._fieldSelectedMembers[r.Tag]==a?n._getLocalizedLabels("All"):n._fieldSelectedMembers[r.Tag];break}d=n._getLocalizedLabels("All")}else d=("All"==n._fieldSelectedMembers[r.Tag]?r.AllMember:n._fieldSelectedMembers[r.Tag])||r.AllMember;return d},_getInitialSlicerName:function(t,a){t.controlObject._slicerName=e(e(a).find("Axis:eq(0) Tuple:eq(0)").children().children()[1]).text()},_getTreeViewItems:function(t){for(var a,i=t.element.find(".e-editorTreeView"),l=[],r=e(i).find(":input.nodecheckbox"),n=0;n<r.length;n++)a=e(r[n]).parents("li:eq(0)"),l.push({Id:a[0].id,name:e(a[0]).find("a:eq(0)").text()});return l},_getEditorMember:function(a,i,l){var r,n,o,s=l?i._schemaData._editorTreeData:i._editorTreeData,d=[];if(i.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode){if(0==s.length){var u=this._getTreeViewItems(l?i._schemaData:i,s),c=e.extend(!0,[],l?i._schemaData._memberTreeObj.dataSource():i._memberTreeObj.dataSource()),p=e.map(u,function(a){if("All"!=a.Id)return e.map(c,function(e){a.Id==e.id&&((a=e).name=t.isNullOrUndefined(a.parentId)?a.name+"_1":a.name)}),a}),m=e.map(p,function(t){return e.map(p,function(e){t.parentId==e.id&&(t.name=t.name+"_"+(Number(e.name.split("_")[e.name.split("_").length-1])+1))}),t});e.map(m,function(e){var t=e.name.split("_")[e.name.split("_").length-2],a=Number(e.name.split("_")[e.name.split("_").length-1]),i=e.checkedStatus;d.push({name:t,checked:i,level:Number(a)})})}else e.map(s,function(e){d.push({name:e.name,id:e.id,pid:e.pid,checked:e.checkedStatus,level:e.level})});return this._updateEditorMembers(a,d,i,s)}if(i.model.analysisMode==t.Pivot.AnalysisMode.Olap)return r=l?i._schemaData.element.find(".e-editorTreeView"):i.element.find(".e-editorTreeView"),m=s.length>0?s:e(r).find(":input.nodecheckbox"),s.length>0?e.map(m,function(e){d.push({name:e.name,id:e.id,pid:e.pid,checked:e.checkedStatus,level:Number(e.id.split("_")[e.id.split("_").length-1])})}):e.map(m,function(t){if("All"!=e(t).parents("li:eq(0)").attr("id")){var a=e(t).parent().siblings("a").text(),i=t.value.split("_")[t.value.split("_").length-1],l=!(!t.checked&&"mixed"!=e(t.parentElement).attr("aria-checked"));d.push({name:a,checked:l,level:Number(i)})}}),this._updateEditorMembers(a,d,i,s);for(n=[],o=1;o<a.length;o++)n.push(e(a[o].parentElement).siblings("a").text());return n},_updateEditorMembers:function(a,i,l,r){var n,o,s,d,u,c;if(i.length>0&&"All"==i[0].name&&i.splice(0,1),!t.isNullOrUndefined(l._fieldMembers[a]))if(0==r.length){var p=[],m=0,g="",h=l._fieldMembers[a];for(n=0;n<i.length;n++)if(t.isNullOrUndefined(h[n+m])||i[n].level==h[n+m].level)p.push(i[n]);else if(t.isNullOrUndefined(h[n+m])||i[n].level<h[n+m].level){s=n;do{i[n-1].checked&&p.push(h[s]),m++,s++}while(i[n].level<h[s].level);n--}else if(t.isNullOrUndefined(h[n+m])||i[n].level>h[n+m].level){o=h[n+m].level,s=n;do{p.push(i[s]),m--,n=++s-1}while(i[s].level>o)}l._fieldMembers[a]=p}else d=e.extend(!0,[],l._fieldMembers[a]),u=[],e.each(i,function(e,t){for(var a=!1,i=0;i<d.length;i++)if(t.id==d[i].id){d.splice(i,1,t),a=!0;break}a||u.push(t)}),l._fieldMembers[a]=d.concat(u);l._fieldMembers[a]=t.isNullOrUndefined(l._fieldMembers[a])?i:l._fieldMembers[a];var f=1,_="",v="",b=[];do{if(c=e.map(l._fieldMembers[a],function(e){if(e.level==f)return e}),b=e.map(c,function(e){if(e.checked)return e}),c.length==b.length)g=1==f?"All":_,c.length>1&&(v="All"),f++;else if(1==b.length)_=g="All"==v?"multiple":b[0].name,f++;else if(b.length>1&&c.length>b.length){g="multiple";break}}while(b.length>0&&"All"!=g&&"multiple"!=g&&e.map(l._fieldMembers[a],function(e){if(e.level==f)return e}).length>0);return g},_getTreeData:function(e,a,i){var l=t.olap.base._getConnectionInfo(e.url),r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>'+e.request+"</RequestType><Restrictions><RestrictionList><CATALOG_NAME>"+e.catalog+"</CATALOG_NAME>"+("loadcubelist"==i.action?"":"<CUBE_NAME>"+e.cube+"</CUBE_NAME>")+"</RestrictionList></Restrictions><Properties><PropertyList><Catalog>"+e.catalog+"</Catalog><LocaleIdentifier>"+l.LCID+"</LocaleIdentifier> </PropertyList></Properties></Discover></Body></Envelope>";i.action="loadFieldElements",this.doAjaxPost("POST",l.url,{XMLA:r},a,null,i)},updateTreeView:function(a){var i,l,r,n,o,s,d=a.element.find(".e-editorTreeView").find("li"),u=d.length,c=a._memberTreeObj.dataSource(),p=c.length;if(a.element.find(".e-editorTreeView").parents("#"+a._id+"_ClientDialog").find(".e-editorPara").text()==a._getLocalizedLabels("KPIs"))for(o=0;o<u;o++)for(i=e(d[o]).find("span:first").attr("aria-checked"),s=0;s<p;s++)d[o].id!=c[s].id||"mixed"!=i&&"true"!=i?d[o].id==c[s].id&&"false"==i&&(t.isNullOrUndefined(c[s].parentId)?c[s].checkedStatus=!1:e(d[o].parentElement).parent().attr("id")==c[s].parentId&&(c[s].checkedStatus=!1)):t.isNullOrUndefined(c[s].parentId)?c[s].checkedStatus=!0:e(d[o].parentElement).parent().attr("id")==c[s].parentId&&(c[s].checkedStatus=!0);else for(o=0;o<u;o++)for(i=e(d[o]).find("span:first").attr("aria-checked"),s=0;s<p;s++){if(d[o].id==c[s].id&&("mixed"==i||"true"==i)){c[s].checkedStatus=!0;break}if(d[o].id==c[s].id&&"false"==i){c[s].checkedStatus=!1;break}}for(o=0;o<c.length;o++)if(l=!1,1==c[o].checkedStatus){for(s=0;s<c.length;s++)if(c[s].hasOwnProperty("parentId")&&c[s].parentId==c[o].id&&1==c[s].checkedStatus){l=!0;break}if(!l)for(r=0;r<c.length;r++)c[r].hasOwnProperty("parentId")&&c[r].parentId==c[o].id&&(c[r].checkedStatus=!0)}else if(0==c[o].checkedStatus)for(n=0;n<c.length;n++)c[n].hasOwnProperty("parentId")&&c[n].parentId==c[o].id&&(c[n].checkedStatus=!1);for(o=0;o<u;o++)if(null==e(d[o]).attr("data-tag"))for(s=0;s<p;s++)if(e(d[o]).attr("id")==c[s].id){e(d[o]).attr("data-tag",c[s].tag);break}return a._memberTreeObj},getNodesState:function(e){for(var t="",a="",i="ejTreeView"==e.pluginName?e.dataSource():e,l=0;l<i.length;l++)1==i[l].checkedStatus?t+="::"+i[l].id+"||"+i[l].tag+"||"+(i[l].parentId||i[l].pid)+"||"+i[l].name:a+="::"+(i[l].parentId||i[l].pid)+"||"+i[l].tag+"||"+i[l].name;return{selectedNodes:t,unSelectedNodes:a}},removeParentSelectedNodes:function(t){for(var i,l=e.extend([],t),r=0;r<t.length;r++)for(i=0;i<l.length;i++)l[i].Id==t[r].parentId&&l.splice(i,1);return e.map(l,function(e){if(""!=e.tag&&e.tag!=a)return e.tag.replace(/\&/g,"&amp;")})},getChildNodes:function(i,l,r,n,o){var s,d,u,c=i.targetElement,p=(n.cube,n.catalog,n.data,o._generateChildMembers,e(i.currentElement).find("li").length),m=!1,g={memberEditorPageSize:"ejPivotSchemaDesigner"==o.pluginName?o.model.pivotControl.model.memberEditorPageSize:o.model.memberEditorPageSize,enableMemberEditorPaging:"ejPivotSchemaDesigner"==o.pluginName?o.model.pivotControl.model.enableMemberEditorPaging:o.model.enableMemberEditorPaging};if(g.enableMemberEditorPaging){for(s=0;s<o._memberTreeObj.dataSource().length;s++)if(o._memberTreeObj.dataSource()[s].parentId==i.id||o._memberTreeObj.dataSource()[s].pid==i.id)return i.isChildLoaded=!0,void t.Pivot.closePreventPanel(o)}else o._isSearchApplied=!1;if(jQuery.each(o._editorTreeData,function(e,t){if(t.id==i.id)return t.expanded=!0,t.isChildMerged=!0,!1}),0==p){var h=t.buildTag("span.nodeExpand e-load e-icon")[0].outerHTML,f=e(c).parents("li:eq(0)").attr("id");e.map(r,function(i){var r,n,s,d;i.fieldName!=l||t.isNullOrUndefined(i.filterItems)||(r=i.filterItems,(t.isNullOrUndefined(o.model.pivotControl)?o.model.enableMemberEditorPaging:o.model.pivotControl.model.enableMemberEditorPaging)?(r=e.map(r,function(e){if(e.pid!=a&&e.pid==f.replace(/\]*\]/g,"-").replace(/\[*\[/g,"-"))return m=!0,e})).length>0&&1==m&&(n=t.Pivot._generateChildWithAncestors(o,e(c).parents("li:eq(0)"),g.enableMemberEditorPaging,g.memberEditorPageSize),g.enableMemberEditorPaging&&(r.length>=g.memberEditorPageSize||n.lstChildren.length>=g.memberEditorPageSize)?(o._isEditorDrillPaging=!0,o.element.find(".searchEditorTreeView").data("ejMaskEdit").clear(),o._lastSavedTree=[],t.Pivot._makeAncestorsExpandable(o,e(c).parents("li:eq(0)")[0].id),s=n.allLvlLst.length>1&&n.lstChildren.length>=g.memberEditorPageSize?t.Pivot._getParentsTreeList(o,n.lstParents[0].id,o._editorTreeData):e.grep(o._editorTreeData,function(t){return t.id==e(c).parents("li:eq(0)")[0].id})[0],d={childNodes:n.allLvlLst.length>1&&n.lstChildren.length>=g.memberEditorPageSize?n.lstChildren:r,parentNode:s},t.Pivot._drillEditorTreeNode(d,o,g.memberEditorPageSize)):(e(c).parents("li:eq(0)").find(".nodeExpand").remove(),e(c).parents("li:eq(0)").removeClass("e-load"),e.each(r,function(e,t){delete t.parentId}),o._onDemandNodeExpand=!1,o._memberTreeObj.addNode(t.Pivot._showEditorLinkPanel(r,o,"ejPivotSchemaDesigner"==o.pluginName?o.model.pivotControl:o),e(c).parents("li:eq(0)")),o._onDemandNodeExpand=!1,o._memberTreeObj.model.nodeCheck=t.proxy(o._nodeCheckChanges,o),o._memberTreeObj.model.nodeUncheck=t.proxy(o._nodeCheckChanges,o),e.each(e(c).parents("li:eq(0)").find("li"),function(e,a){t.isNullOrUndefined(r[e])||a.setAttribute("data-tag",r[e].tag)}))):e.map(r,function(e){(e.parentId!=a&&e.parentId==f.replace(/\]*\]/g,"-").replace(/\[*\[/g,"-")||e.pid!=a&&e.pid==f.replace(/\]*\]/g,"-").replace(/\[*\[/g,"-"))&&(m=!0)}))});i.isChildLoaded=!!m,m?jQuery.grep(o._editorTreeData,function(e){if(e.pid==i.id)return e}).length>10&&o.element.find("a.e-linkPanel").css("display","block"):(e(c).parents("li:eq(0)").prepend(h),e(c).parents("li:eq(0)").attr("data-tag")==a&&((d=e.map(r,function(e){if(e.fieldName==l)return e})[0])&&e.map(d.filterItems,function(t){t.id==e(c).parents("li:eq(0)").attr("id")&&e(c).parents("li:eq(0)").attr("data-tag",t.tag)})),u=e(c).parents("li:eq(0)").attr("data-tag").replace(/\&/g,"&amp;"),t.olap._mdxParser.getChildren(n,u,o))}},_getFilterParams:function(e,a,i){var l,r,n,o="";if("schemaValue"!=e){if(l="",!t.isNullOrUndefined(a))for(r=0;r<a.length;r++)if(!t.isNullOrUndefined(a[r][i]))for(n=0;n<a[r][i].length;n++)l+="##"+a[r][i][n];""!=l&&(o=e+"::"+i+"::FILTERED"+l)}return o},generateChildMembers:function(a,i){var l,r,n,o,s,d,u=e(i).find("Axis:eq(0) Tuple"),c=[],p=this;t.isNullOrUndefined(p.olapCtrlObj)||(p=p.olapCtrlObj);var m={memberEditorPageSize:"ejPivotSchemaDesigner"==p.pluginName?p.model.pivotControl.model.memberEditorPageSize:p.model.memberEditorPageSize,enableMemberEditorPaging:"ejPivotSchemaDesigner"==p.pluginName?p.model.pivotControl.model.enableMemberEditorPaging:p.model.enableMemberEditorPaging},g={currentReportItems:"ejPivotSchemaDesigner"==p.pluginName?p.model.pivotControl._currentReportItems:p._currentReportItems,savedReportItems:"ejPivotSchemaDesigner"==p.pluginName?p.model.pivotControl._savedReportItems:p._savedReportItems},h=p.element.find("[data-tag='"+a.currentNode.replace(/&amp;/g,"&")+"']");for(r=0;r<u.length;r++){var f=e(e(i).find("Axis:eq(0) Tuple:eq("+r+")").children().children()[0]).text(),_=""==e(e(i).find("Axis:eq(0) Tuple:eq("+r+")").children()).find("Caption").text()?"(Blank)":e(e(i).find("Axis:eq(0) Tuple:eq("+r+")").children()).find("Caption").text(),v={hasChildren:"0"!=e(u[r]).find("CHILDREN_CARDINALITY").text(),checkedStatus:"true"==e(e(h).find("input.nodecheckbox")[0]).parent().attr("aria-checked"),id:f.replace(/\]*\]/g,"-").replace(/\[*\[/g,"-").replace(/ /g,"_"),name:_,tag:f,level:parseInt(e(u[r]).find("LNum").text())};c.push(v)}c.length>0&&p.model.enableMemberEditorSorting&&null!=p._sortType&&(c=t.DataManager(c).executeLocal(t.Query().sortBy("name",p._sortType))),l=e(h).parents("li").length>1?e(h).parents("li").first():e(h).parents("li"),e(e(l).find("input.nodecheckbox")[0]).ejCheckBox({checked:!1}),p._memberTreeObj=p.element.find(".e-editorTreeView").data("ejTreeView"),c.length>0&&(n="ejPivotGrid"==p.pluginName?p._selectedField:p._selectedFieldName,e.map(g.currentReportItems,function(a){a.fieldName!=n||t.isNullOrUndefined(a.filterItems)||(e.each(c,function(t,a){a.pid=e(h).attr("id")}),e.merge(a.filterItems,c),p._editorTreeData=a.filterItems)}),0==g.currentReportItems.length&&p._editorTreeData.concat(c)),h.find(".nodeExpand").remove(),h.find(".e-load").removeClass("e-load"),jQuery.each(p._editorTreeData,function(e,t){if(t.id==h[0].id)return t.expanded=!0,!1}),m.enableMemberEditorPaging?(o=t.Pivot._generateChildWithAncestors(p,h,m.enableMemberEditorPaging,m.memberEditorPageSize),c.length>=m.memberEditorPageSize||o.lstChildren.length>=m.memberEditorPageSize?(p._isEditorDrillPaging=!0,p.element.find(".searchEditorTreeView").data("ejMaskEdit").clear(),p._lastSavedTree=[],t.Pivot._makeAncestorsExpandable(p,h[0].id),s=o.allLvlLst.length>1&&o.lstChildren.length>=m.memberEditorPageSize?t.Pivot._getParentsTreeList(p,o.lstParents[0].id,p._editorTreeData):e.grep(p._editorTreeData,function(e){return e.id==h[0].id})[0],d={childNodes:o.allLvlLst.length>1&&o.lstChildren.length>=m.memberEditorPageSize?o.lstChildren:c,parentNode:s},t.Pivot._drillEditorTreeNode(d,p,m.memberEditorPageSize)):p._memberTreeObj.addNode(t.Pivot._showEditorLinkPanel(c,p,"ejPivotSchemaDesigner"==p.pluginName?p.model.pivotControl:p),e(h))):p._memberTreeObj.addNode(t.Pivot._showEditorLinkPanel(c,p,"ejPivotSchemaDesigner"==p.pluginName?p.model.pivotControl:p),e(h)),e.each(h.find("li"),function(e,a){t.isNullOrUndefined(c[e])||a.setAttribute("data-tag",c[e].tag)}),g.savedReportItems=e.extend(!0,[],g.currentReportItems)},_generateChildWithAncestors:function(a,i,l,r){var n,o,s=[],d=[e.grep(a._editorTreeData,function(e){return e.id==i[0].id})[0]],u=[];if(l){jQuery.each(a._editorTreeData,function(e,t){if(t.id==i[0].id)return t.expanded=!0,!1}),s.push(d[0]);do{for(n=[],u=[],o=0;o<d.length&&(e.each(a._editorTreeData,function(e,a){t.isNullOrUndefined(a.pid)||a.pid!=d[o].id||(a.expanded&&(n.push(a),s.push(a)),u.push(a))}),!(u.length>=r));o++)u=[];if(d=n.length>0&&u.length<r?n:d,u.length>=r)break}while(n.length>0)}return{allLvlLst:s,lstParents:d,lstChildren:u}},_makeAncestorsExpandable:function(e,a){var i=t.DataManager(e._editorTreeData).executeLocal(t.Query().where("id","equal",a));i.length>0&&(i[0].expanded=!0,a=i[0].pid),!t.isNullOrUndefined(a)&&i.length>0&&this._makeAncestorsExpandable(e,a)},_jsonToEngine:function(e){for(var a,i=e,l=[],r=0;r<i.length;r++)a=parseInt(i[r].Index.split(",")[0]),t.isNullOrUndefined(l[a])?(l[a]=[],l[a].push(i[r])):l[a].push(i[r]);return l},_cropJson:function(a,i){var l,r,n,o,s,d,u,c,p=0,m=0,g=1;if(r=(l=a.model.operationalMode==t.Pivot.OperationalMode.ServerMode?{columns:JSON.parse(a.getOlapReport()).PivotColumns,rows:JSON.parse(a.getOlapReport()).PivotRows,values:JSON.parse(a.getOlapReport()).PivotCalculations}:{columns:a.model.dataSource.columns,rows:a.model.dataSource.rows,values:a.model.dataSource.values}).columns.length+(l.values.length>0&&"rows"!=l.values[0].axis?1:0),n=l.rows.length+(l.values.length>0&&"rows"==l.values[0].axis?1:0),r=0==r?1:r,n=0==n?1:n,""==a._drillAction&&a.model.enableCollapseByDefault){if(f=e.extend(!0,[],t.Pivot._jsonToEngine(i)),r+n>2){for(;m<f[0].length;)if(l.rows.length>1&&-1==f[0][m].CSS.indexOf("summary")&&m+g>r||0==l.columns.length&&0==l.values.length&&-1==f[0][m].CSS.indexOf("summary")||m>0&&g<l.columns.length){for(o=0;o<f.length;o++)f[o].splice(m,1);g++}else m++;for(g=1;p<f.length;)l.columns.length>1&&-1==f[p][0].CSS.indexOf("summary")&&p+g>n||0==l.rows.length&&0==l.values.length&&-1==f[p][0].CSS.indexOf("summary")||p>0&&g<l.rows.length?(f.splice(p,1),g++):p+=f[p][0].CSS.indexOf("summary")>-1?f[p][0].ColSpan:1}for((f=e.map(f,function(t){return[e.map(t,function(e){return("summary rstot"==e.CSS||"summary cstot"==e.CSS||"summary stot"==e.CSS)&&(e.State=2,e.Value=e.Value.replace("Total","")),e})]}))[0][0].ColSpan="none"==f[0][0].CSS&&l.values.length>0&&"rows"==l.values[0].axis&&l.rows.length>0?2:1,f[0][0].RowSpan="none"==f[0][0].CSS&&l.values.length>0&&"rows"!=l.values[0].axis&&l.columns.length>0?2:1,r=l.values.length>0&&"rows"==l.values[0].axis?l.values.length:1,n=l.values.length>0&&"rows"!=l.values[0].axis?l.values.length:1,p=0;p<f[0].length;p++)f[0][p].CSS.indexOf("summary")>-1&&(f[0][p].RowSpan=r,f[0][p].ColSpan=1);for(p=0;p<f.length;p++)f[p][0].CSS.indexOf("summary")>-1&&(f[p][0].ColSpan=n,f[p][0].RowSpan=1);return e.map(f,function(e){return e})}if(a.model.enableCollapseByDefault||""!=a._drillAction){var h=0,f=e.extend(!0,[],t.Pivot._jsonToEngine(a._croppedJson)),_=e.extend(!0,[],t.Pivot._jsonToEngine(a._compJson)),v=e.extend(!0,[],a._compJson),b=""==a._drillParams.currRow?"column":"row";for(s=0;s<a._compJson.length&&0==parseInt(a._compJson[s].Index.split(",")[0]);s++)h++;return d=t.Pivot._getDrillRange(l,b,a,h,v),u=t.Pivot._sliceJson(l,b,r,n,a,v,d.startPos,d.endPos,h,f),"drilldown"==a._drillAction&&(c=t.Pivot._mergeJson(l,a,b,r,n,v,_,f,u,d.startPos,d.endPos,h)),e.map("drilldown"==a._drillAction?c:u,function(e){return e})}return i},_getEnginePos:function(a,i,l){var r=e.map(t.isNullOrUndefined(l[parseInt(a.split(",")[0])])?l[parseInt(i.split(",")[0])]:l[parseInt(a.split(",")[0])],function(e,t){if(e.Index==e.Index.split(",")[0]+","+i.split(",")[1])return t})[0];return{colPos:e.map(l,function(t,a){var l=!1;return e.each(t,function(e,t){t.Index==i&&(l=!0)}),l?a:void 0})[0],rowPos:r}},_mergeJson:function(a,i,l,r,n,o,s,d,u,c,p,m){var g,h,f,_,v,b,C=t.Pivot._getIndices(l,o,i,d,c,p,m),S=C.columnIndices,y=C.rowIndices,O=C.rowSpan,P=C.colSpan,x=t.Pivot._getEnginePos(c,p,d),N=x.colPos,w=x.rowPos,M=[];if("row"==l){if(t.isNullOrUndefined(d[parseInt(c.split(",")[0])+1])){g=parseInt(c.split(",")[0])+1;do{M=e.map(s[g],function(e){if(y.indexOf(parseInt(e.Index.split(",")[1]))>-1)return e.Span="Block",e}),d[g]=M,g++}while(g<P&&!i.model.enableCollapseByDefault)}}else if(parseInt(d[0][parseInt(c.split(",")[1])+1].Index.split(",")[1])!=parseInt(c.split(",")[1])+1)for(b=0;b<s.length;b++){g=parseInt(c.split(",")[1])+1;do{h=s[b][g],S.indexOf(parseInt(h.Index.split(",")[0]))>-1&&(h.Span="Block",d[b].splice(g,0,h)),g++}while(g<O&&!i.model.enableCollapseByDefault)}if("row"==l){for(v=0,b=0;b<d.length;b++)if(!t.isNullOrUndefined(d[b])){f=w,_=0;do{f==w&&d[b].splice(f,1,u[v][_]),f++,_++,d[b].splice(f,0,u[v][_])}while(t.isNullOrUndefined(u[v][_])||parseInt(u[v][_].Index.split(",")[1])<parseInt(p.split(",")[1]));v++}}else for(v=u.length-1,b=N;b>=n;b--)t.isNullOrUndefined(u[v])||d.splice(b,1,u[v]),v--;return t.Pivot._drillSpanCalculation(d,i)},_getIndices:function(a,i,l,r,n,o,s){var d,u=e.map(r,function(e){if(!t.isNullOrUndefined(e))return parseInt(e[0].Index.split(",")[0])}),c=e.map(r[0],function(e){if(!t.isNullOrUndefined(e))return parseInt(e.Index.split(",")[1])});if(l.model.enableCollapseByDefault)"row"==a?u.push(parseInt(n.split(",")[0])+1):c.push(parseInt(n.split(",")[1])+1);else{var p=i[parseInt(o.split(",")[0])*s+parseInt(o.split(",")[1])],m=parseInt(p.Index.split(",")[0]),g=parseInt(p.Index.split(",")[1]),h=p.ColSpan,f=p.RowSpan;if("row"==a)for(d=m+1;d<h;d++)-1==u.indexOf(d)&&u.push(d);else for(d=g+1;d<f;d++)-1==c.indexOf(d)&&c.push(d)}return{columnIndices:u,rowIndices:c,colSpan:h,rowSpan:f}},_sliceJson:function(a,i,l,r,n,o,s,d,u,c){var p,m,g,h,f,_,v,b,C,S,y,O,P=[],x=a.values.length>0&&"rows"!=a.values[0].axis?1:0;if("drilldown"==n._drillAction){var N="row"==i?"0,"+parseInt(s.split(",")[1]):parseInt(s.split(",")[0])+",0",w="row"==i?"0,"+parseInt(d.split(",")[1]):parseInt(d.split(",")[0])+",0",M=t.Pivot._getIndices(i,o,n,c,s,d,u),T=M.columnIndices,I=M.rowIndices,D=parseInt(N.split(",")[0])*u+u,E=0;N="row"==i?N:parseInt(N.split(",")[0])*u+",0";do{for(p="row"==i?parseInt(N.split(",")[1]):parseInt(N.split(",")[0]),E="row"==i?0:E;!t.isNullOrUndefined(o[p])&&("column"!=i||D>p);)("row"==i?T.indexOf(parseInt(o[p].Index.split(",")[0]))>-1:I.indexOf(parseInt(o[p].Index.split(",")[1]))>-1)&&(t.isNullOrUndefined(P[E])&&(P[E]=[]),P[E].push(o[p]),"row"==i&&E++),p+="row"==i?u:1;"column"==i&&(D+=u,E++),N="row"==i?"0,"+(parseInt(N.split(",")[1])+1):parseInt(N.split(",")[0])+u+",0"}while(N!=("row"==i?"0,"+(parseInt(w.split(",")[1])+1):(parseInt(w.split(",")[0])+1)*u+",0"));if(("row"==i?r-1>parseInt(n._drillParams.currPos.split(",")[0])+1:l-x-1>parseInt(n._drillParams.currPos.split(",")[1])+1)&&n.model.enableCollapseByDefault){k="row"==i?0:parseInt(n._drillParams.currPos.split(",")[1])+1,j="row"==i?parseInt(n._drillParams.currPos.split(",")[0])+1:0;do{if(m=!1,!(t.isNullOrUndefined(P[j])||t.isNullOrUndefined(P[j][k])||-1!=P["row"==i?j-1:j]["row"==i?k:k-1].CSS.indexOf("summary")||"rowheader"!=P[j][k].CSS&&"colheader"!=P[j][k].CSS&&"none"!=P[j][k].CSS&&""!=P[j][k].Value))if("row"==i)for(O=0;O<P.length;O++)t.isNullOrUndefined(P[O])||(P[O].splice(k,1),m=!0);else delete P[j],m=!0;"row"==i?k=m?k:k+1:j+=1}while("row"==i?k<P[0].length:j<P.length)}var j=parseInt(n._drillParams.currPos.split(",")[0])+("row"==i?1:0),L="",V=0,A=0,k=parseInt(n._drillParams.currPos.split(",")[1])+1;if(n.model.enableCollapseByDefault)do{if("row"==i?j==parseInt(n._drillParams.currPos.split(",")[0])+1:k==parseInt(n._drillParams.currPos.split(",")[1])+1){for(O="row"==i?P[j].length-1:P.length-1;O>=0;O--)if(("column"!=i||!t.isNullOrUndefined(P[O]))&&(b="row"==i?P[j][O]:P[O][k]).CSS.indexOf("summary")>-1){b.State=2,b.Expander=1;var R=j,U=k,F=0;if("row"==i){do{F++,R++}while(!t.isNullOrUndefined(c[R])&&("none"==c[R][0].CSS||""==c[R][0].Value));b.ColSpan=F}else{do{F++,U++}while(!t.isNullOrUndefined(c[0][U])&&("none"==c[0][U].CSS||""==c[0][U].Value));b.RowSpan=F}b.Value=b.Value.replace(" Total","")}}else for(g="","column"==i&&(g=e.map(P,function(e,a){if(!t.isNullOrUndefined(e))return a})[0]),O="row"==i?P[j].length-1:P.length-1;O>=0;O--)"column"==i&&t.isNullOrUndefined(P[O])||(h=(b="row"==i?P[j][O]:P[O][k]).Value.replace(" Total",""),L=""==L&&""!=b.Value.replace(" Total","")?b.Value.replace(" Total",""):""!=b.Value.replace(" Total","")&&L!=b.Value.replace(" Total","")?b.Value.replace(" Total",""):L,""!=h&&h!=L||0==O||g==O?(b.CSS="row"==i?"rowheader":"colheader",b.State=1,b.Expander=1,b.Value=L,"row"==i?b.RowSpan=j>parseInt(n._drillParams.currPos.split(",")[0])-1?V:b.RowSpan:b.ColSpan=k>parseInt(n._drillParams.currPos.split(",")[1])-1?A:b.ColSpan,V=1,A=1):(b.CSS.indexOf("summary")>-1&&("row"==i?b.ColSpan=parseInt(n._drillParams.currPos.split(",")[0])+2-j:b.RowSpan=parseInt(n._drillParams.currPos.split(",")[1])+2-k),V++,A++));"row"==i?j--:k--}while("row"==i?j>=0:k>=0)}else{var q=t.Pivot._getEnginePos(s,d,c);j=q.colPos,k=q.rowPos;if("row"==i){for(f=0,e.each(c[0],function(e,t){if(parseInt(t.Index.split(",")[1])==parseInt(s.split(",")[1]))return f=e,!1}),O=parseInt(s.split(",")[1]);O<parseInt(d.split(",")[1]);O++)for(_=0;_<c.length;_++)if(!t.isNullOrUndefined(c[_])){for(v="",b="",U=f;U<c[_].length;U++)if(parseInt(c[_][U].Index.split(",")[1])==O){b=c[_][U],v=U,c[_].splice(U,1);break}t.isNullOrUndefined(c[_][v])||"none"!=c[_][v].CSS&&""!=c[_][v].Value&&("rowheader"!=c[_][v].CSS||0!=c[_][v].Expander)||"rowheader"!=b.CSS||(c[_][v].CSS="rowheader",c[_][v].Value=b.Value,c[_][v].State=b.State,c[_][v].Expander=b.Expander)}}else for(C=[],O=parseInt(s.split(",")[0]);O<parseInt(d.split(",")[0]);O++)if(C=0!=C.length||t.isNullOrUndefined(c[O])?C:c[O],delete c[O],parseInt(d.split(",")[0])-O==1){S=0;do{("none"==c[O+1][S].CSS||""==c[O+1][S].Value||"colheader"==c[O+1][S].CSS&&0==c[O+1][S].Expander)&&(c[O+1][S].CSS=C[S].CSS,c[O+1][S].Value=C[S].Value,c[O+1][S].State=C[S].State,c[O+1][S].Expander=C[S].Expander),S++}while(S<=parseInt(d.split(",")[1]))}if(0==(y="row"==i?e.map(c[parseInt(d.split(",")[0])+1],function(e){if("rowheader"==e.CSS||e.CSS.indexOf("summary")>-1)return e}).length:e.map(c,function(e){if(!t.isNullOrUndefined(e)&&!t.isNullOrUndefined(e[k+1])&&("colheader"==e[k+1].CSS||e[k+1].CSS.indexOf("summary")>-1))return e}).length))if("row"==i){j=parseInt(d.split(",")[0])+1;do{delete c[j],j++}while(!t.isNullOrUndefined(c[j])&&("none"==c[j][0].CSS||""==c[j][0].Value))}else{k=parseInt(d.split(",")[1])+1;do{for(O=0;O<c.length;O++)t.isNullOrUndefined(c[O])||(c[O]=e.map(c[O],function(e){if(parseInt(e.Index.split(",")[1])!=k)return e}));k++}while(k<c[0][0].RowSpan-(a.values.length>0&&"rows"!=a.values[0].axis?1:0))}if(j=(q=t.Pivot._getEnginePos(s,d,c)).colPos,k=q.rowPos,"row"==i){for(O=0;O<c[parseInt(d.split(",")[0])].length;O++)if(c[parseInt(d.split(",")[0])][O].Index==d){c[parseInt(d.split(",")[0])][O].Value=c[parseInt(d.split(",")[0])][O].Value.replace(" Total",""),c[parseInt(d.split(",")[0])][O].State=2,c[parseInt(d.split(",")[0])][O].ColSpan=0==y?c[parseInt(d.split(",")[0])][O].ColSpan-1:c[parseInt(d.split(",")[0])][O].ColSpan;break}}else c[j][k].Value=c[j][k].Value.replace(" Total",""),c[j][k].State=2,c[j][k].RowSpan=0==y?c[j][k].RowSpan-1:c[j][k].RowSpan;P=t.Pivot._drillSpanCalculation(c,n)}return P},_getDrillRange:function(a,i,l,r,n){var o,s,d=0,u=0,c="",p="",m=r,g="row"==i?l._drillParams.currRow.split(">#>"):l._drillParams.currCol.split(">#>");do{if((o="row"==i?parseInt((d-1)/r):u)+1==g.length){if((!("none"!=n[d].CSS&&""!=n[d].Value||t.isNullOrUndefined(n["row"==i?d-r:d-1])||"string"!=typeof n["row"==i?d-r:d-1].Value||n["row"==i?d-r:d-1].Value.replace(" Total","")!=e.trim(g[o<1?0:o-1]))||"string"==typeof n[d].Value&&""!=n[d].Value&&n[d].Value.replace(" Total","")!=e.trim(g[o]))&&""!=c){for(s="row"==i?d-1:d-r;!t.isNullOrUndefined(n[s])&&"summary rstot"!=n[s].CSS&&"summary cstot"!=n[s].CSS&&"summary stot"!=n[s].CSS;)s="row"==i?s-1:s-r;t.isNullOrUndefined(n[s])||(p=n[s].Index);break}"string"==typeof n[d].Value&&n[d].Value.replace(" Total","")==e.trim(g[o])&&(c=""==c?n[d].Index:c)}else n[d].Value.replace(" Total","")==e.trim(g[o])&&(d="row"==i?m*(o+1)+(d-1):d-m+1);u=(d="row"==i?d+1:d+r)%r,"column"==i&&d>n.length&&(d=++u)}while(n.length>d&&""==p);return"drillup"==l._drillAction&&l.model.operationalMode==t.Pivot.OperationalMode.ClientMode&&("column"==i&&a.values.length>0&&"row"!=a.values[0].axis?p=parseInt(p.split(",")[0])-(a.values.length-1)+","+p.split(",")[1]:"row"==i&&a.values.length>0&&"row"==a.values[0].axis&&(p=p.split(",")[0]+","+(parseInt(p.split(",")[1])-(a.values.length-1)))),{startPos:c,endPos:p}},_drillSpanCalculation:function(a,i){for(var l,r,n,o,s,d=i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?JSON.parse(i.getOlapReport()).PivotCalculations:i.getOlapReport().values,u=i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?JSON.parse(i.getOlapReport()).PivotColumns:i.getOlapReport().columns,c=i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?JSON.parse(i.getOlapReport()).PivotRows:i.getOlapReport().rows,p=[],m=[],g=e.map(a,function(e){if(!t.isNullOrUndefined(e))return e[0]}).length,h=0;h<a[0].length;h++){for(P=0,l=0,s=0;s<a.length;s++)t.isNullOrUndefined(a[s])||t.isNullOrUndefined(a[s][h])||(P++,a[s][h].ColSpan>g-P+1&&(a[s][h].ColSpan=g-P+1),"none"!=a[s][h].CSS&&""!=a[s][h].Value&&l++);0==l&&p.push(h)}for(h=0;h<a.length;h++)t.isNullOrUndefined(a[h])||(r=e.map(a[h],function(e,t){if(-1==p.indexOf(t))return e.RowSpan>=a[h].length-t&&(e.RowSpan=a[h].length-t),"summary value"==e.CSS&&(e.RowSpan=1,e.ColSpan=1),e}),m[h]=r);a=m;var f=u.length+(d.length>0&&"rows"!=d[0].axis?d.length:0),_=c.length+(d.length>0&&"rows"==d[0].axis?d.length:0),v=-1;do{v++}while(!(t.isNullOrUndefined(a[0])||t.isNullOrUndefined(a[0][v])||"none"!=a[0][v].CSS&&""!=a[0][v].Value));a[0][0].RowSpan=v>f?f:v,v=d.length>0&&"rows"!=d[0].axis?v-1:v,n=-1,o=0;do{n++}while(!t.isNullOrUndefined(a[n])&&("none"==a[n][0].CSS||""==a[n][0].Value));for(a[0][0].ColSpan=n>_?_:n,h=0;h<a[0].length;h++)for(P=d.length>0&&"rows"==d[0].axis?1:0,s=0;s<a[0][0].ColSpan;s++)t.isNullOrUndefined(a[s][h])||(P++,(0!=h||0!=s)&&a[s][h].ColSpan>a[0][0].ColSpan-P+1&&a[0][0].ColSpan-P+1>0&&(a[s][h].ColSpan=a[0][0].ColSpan-P+1));for(h=a[0][0].ColSpan-1;h<a.length;h++)if(P=d.length>0&&"rows"!=d[0].axis?1:0,!t.isNullOrUndefined(a[h]))for(s=0;s<a[0][0].RowSpan;s++)P++,(0!=h||0!=s)&&a[h][s].RowSpan>a[0][0].RowSpan-P+1&&a[0][0].RowSpan-P+1>0&&(a[h][s].RowSpan=a[0][0].RowSpan-P+1);if(!t.isNullOrUndefined(c)&&c.length>1){n=d.length>0&&"rows"==d[0].axis?n-1:n;do{a[o]=e.map(a[o],function(e){return e.CSS.indexOf("summary")>-1&&(e.ColSpan=n-o),e});var b=0,C=!1,S="";for(h=a[o].length-1;h>=a[0][0].RowSpan;h--)"summary rstot"==a[o][h].CSS||"summary stot"==a[o][h].CSS?(t.isNullOrUndefined(a[o][h+1])||"rowheader"!=a[o][h+1].CSS||(a[o][h+1].RowSpan=b),b=0,C=!0,S=""):a[0][0].RowSpan-h==0?a[o][h].RowSpan=C||S==a[o][h].Value?b+1:a[o][h].RowSpan:(S=a[o][h].Value,b++);o++}while(n>o+(d.length>0&&"rows"==d[0].axis?1:0))}if(!t.isNullOrUndefined(u)&&u.length>1){o=0;do{for(h=0;h<a.length;h++)!t.isNullOrUndefined(a[h])&&a[h][o].CSS.indexOf("summary")>-1&&(a[h][o].RowSpan=v-o);var y=0,O=(C=!1,""),P=(S="",e.grep(a,function(e,a){if(!t.isNullOrUndefined(e)&&"none"!=e[0].CSS&&""!=e[0].Value)return O=""==O?a:O,e}).length);for(h=a.length-1;h>=O;h--)P-=t.isNullOrUndefined(a[h])||"none"==a[h][0].CSS||""==a[h][0].Value?0:1,t.isNullOrUndefined(a[h])||"summary cstot"!=a[h][o].CSS&&"summary stot"!=a[h][o].CSS?0!=P||t.isNullOrUndefined(a[h])?t.isNullOrUndefined(a[h])||(S=a[h][o].Value,y++):a[h][o].ColSpan=C||S==a[h][o].Value?y+1:a[h][o].ColSpan:(t.isNullOrUndefined(a[h+1])||t.isNullOrUndefined(a[h+1][o])||"rowheader"!=a[h+1][o].CSS&&"colheader"!=a[h+1][o].CSS||(a[h+1][o].ColSpan=y),y=0,C=!0,S="");o++}while(v>o+(d.length>0&&"rows"!=d[0].axis?1:0))}return a},_calculatePagingSpan:function(a,i){var l,r;if(null!=a&&""!=a&&a.length>0){for(i._rowCount=0,l=jQuery.extend(!0,[],a),i._compJson=""==i._drillAction?jQuery.extend(!0,[],l):i._compJson,i._croppedJson=t.Pivot._cropJson(i,l),l=e.extend(!0,[],i._croppedJson),r=0;r<l.length&&0==parseInt(l[r].Index.split(",")[0]);r++)i._rowCount++;var n=i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?JSON.parse(i.getOlapReport()).PivotRows.length:i.getOlapReport().rows.length,o=i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?JSON.parse(i.getOlapReport()).PivotColumns.length:i.getOlapReport().columns.length,s=i.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?JSON.parse(i.getOlapReport()).PivotCalculations.length:i.getOlapReport().values.length;l.length,i._rowCount;for(r=(0==l[0].RowSpan?0:l[0].RowSpan-1)+i.model.dataSource.pagerOptions.seriesPageSize;r<l.length&&r<i._rowCount;r+=i.model.dataSource.pagerOptions.seriesPageSize){if(l[r].CSS.indexOf("summary")>-1||l[r].CSS.indexOf("rowheader")>-1&&0==l[r].Expander&&null!=l[r+i._rowCount]&&l[r+i._rowCount].CSS.indexOf("value")>-1)continue;n>1&&t.Pivot._calculateRowPagingSpan(r,l,1,n,i)}for(r=((0==l[0].ColSpan?0:l[0].ColSpan-1)+i.model.dataSource.pagerOptions.categoricalPageSize)*i._rowCount;r<l.length;r+=i.model.dataSource.pagerOptions.categoricalPageSize*i._rowCount){if(l[r].CSS.indexOf("summary")>-1&&s<=1)continue;if(1==i.model.dataSource.pagerOptions.categoricalPageSize&&(l[r].CSS.indexOf("stot")>-1&&null!=l[r+i._rowCount]&&l[r+i._rowCount].CSS.indexOf("gtot")>-1||l[r].CSS.indexOf("gtot")>-1&&null==l[r+i._rowCount]))continue;t.Pivot._calculateColumnPagingSpan(r,l,1,o,s,i)}i._relPagingRecords=jQuery.extend(!0,[],l),i._rowCount=0}},_generatePagingRecords:function(a){var i,l,r,n,o;if(null!=a._relPagingRecords&&a._relPagingRecords.length>0){for(i=e.extend(!0,[],a._relPagingRecords),a._rowCount=0,g=0;g<i.length&&0==parseInt(i[g].Index.split(",")[0]);g++)a._rowCount++;var s=i.length/a._rowCount,d=0==i[0].RowSpan?0:i[0].RowSpan-1,u=0==i[0].ColSpan?0:i[0].ColSpan-1,c=Math.ceil((s-(u+1))/a.model.dataSource.pagerOptions.categoricalPageSize),p=Math.ceil((a._rowCount-(d+1))/a.model.dataSource.pagerOptions.seriesPageSize);a.model.dataSource.pagerOptions.categoricalCurrentPage=a.model.dataSource.pagerOptions.categoricalCurrentPage>c?c:a.model.dataSource.pagerOptions.categoricalCurrentPage,a.model.dataSource.pagerOptions.seriesCurrentPage=a.model.dataSource.pagerOptions.seriesCurrentPage>p?p:a.model.dataSource.pagerOptions.seriesCurrentPage,a._seriesPageCount=a.model.enablePaging?a._rowCount-(d+1):p,a._categPageCount=a.model.enablePaging?s-(u+1):c,a._categCurrentPage=a.model.dataSource.pagerOptions.categoricalCurrentPage,a._seriesCurrentPage=a.model.dataSource.pagerOptions.seriesCurrentPage;var m,g,h,f,_,v,b,C,S,y,O=[],P=d+1+a.model.dataSource.pagerOptions.seriesPageSize,x=u+1+a.model.dataSource.pagerOptions.categoricalPageSize;for(m=g=h=f=_=v=b=C=S=y=0,n=0;n<d+1;n++){for(o=0;o<u+1;o++)null!=i[g]&&(O[f]=i[g],g+=a._rowCount,f+=P);g=++m,f=++h}for(_=g=d+(0==a.model.dataSource.pagerOptions.seriesCurrentPage||1==a.model.dataSource.pagerOptions.seriesCurrentPage?0:(a.model.dataSource.pagerOptions.seriesCurrentPage-1)*a.model.dataSource.pagerOptions.seriesPageSize)+1,v=f=d+1,n=0;n<a.model.dataSource.pagerOptions.seriesPageSize;n++){for(o=0;o<u+1;o++)null!=i[g]&&(O[f]=i[g],g+=a._rowCount,f+=P);if(f=++v,(g=++_)>a._rowCount-1)break}for(b=g=(u+1)*a._rowCount+(0==a.model.dataSource.pagerOptions.categoricalCurrentPage||1==a.model.dataSource.pagerOptions.categoricalCurrentPage?0:(a.model.dataSource.pagerOptions.categoricalCurrentPage-1)*a.model.dataSource.pagerOptions.categoricalPageSize*a._rowCount),C=f=(u+1)*P,n=0;n<d+1;n++){for(o=0;o<a.model.dataSource.pagerOptions.categoricalPageSize;o++)null!=i[g]&&(O[f]=i[g],g+=a._rowCount,f+=P);if(f=++C,null==i[g=++b])break}for(S=g=(u+1)*a._rowCount+(0==a.model.dataSource.pagerOptions.categoricalCurrentPage||1==a.model.dataSource.pagerOptions.categoricalCurrentPage?0:(a.model.dataSource.pagerOptions.categoricalCurrentPage-1)*a.model.dataSource.pagerOptions.categoricalPageSize*a._rowCount)+d+(0==a.model.dataSource.pagerOptions.seriesCurrentPage||1==a.model.dataSource.pagerOptions.seriesCurrentPage?0:(a.model.dataSource.pagerOptions.seriesCurrentPage-1)*a.model.dataSource.pagerOptions.seriesPageSize)+1,y=f=(u+1)*P+d+1,l=0,n=0;n<a.model.dataSource.pagerOptions.seriesPageSize;n++){for(o=0;o<a.model.dataSource.pagerOptions.categoricalPageSize;o++)null!=i[g]&&(O[f]=i[g],l=parseInt(i[g].Index.split(",")[1]),g+=a._rowCount,f+=P);if(f=++y,null==i[g=++S]||l>parseInt(i[g].Index.split(",")[1]))break}for(a._rowCount=0,O=O.filter(function(e){return null!=e}),P=0,g=0;g<O.length&&0==parseInt(O[g].Index.split(",")[0]);g++)P++;for(x=O.length/P,n=0;n<x;n++)for(o=0;o<P;o++)t.isNullOrUndefined(O[n*P+o])||(O[n*P+o].Index=n+","+o);for(r=t.Pivot._drillSpanCalculation(t.Pivot._jsonToEngine(O),a),n=0;n<r.length;n++)for(o=0;o<r[n].length;o++)r[n][o].Index=n+","+o;return e.map(r,function(e){return e})}},_calculateRowPagingSpan:function(e,a,i,l,r){var n,o;if(a[e].CSS.indexOf("summary")>-1||a[e].CSS.indexOf("rowheader")>-1&&0==a[e].Expander&&i<l&&null!=a[e+r._rowCount]&&a[e+r._rowCount].CSS.indexOf("value")>-1)return!1;if(1==a[e].Expander&&a[e].RowSpan>1)a[e+1].RowSpan=a[e].RowSpan-1,a[e].RowSpan=1,a[e+1].Expander=a[e].Expander,a[e+1].State=a[e].State,a[e+1].Value=a[e].Value,a[e+1].CSS=a[e].CSS,-1==a[e+r._rowCount].CSS.indexOf("value")&&i<l-1&&t.Pivot._calculateRowPagingSpan(e+r._rowCount,a,i+1,l,r);else if(0==a[e].Expander&&null!=a[e+r._rowCount]&&i<l&&-1==a[e+r._rowCount].CSS.indexOf("value"))for(n=1,o=e-1;o>=0;o--)if(n++,1==a[o].Expander){a[o].RowSpan!=n&&(a[e+1].RowSpan=a[o].RowSpan-n,a[o].RowSpan=n,a[e+1].Expander=a[o].Expander,a[e+1].State=a[o].State,a[e+1].Value=a[o].Value,a[e+1].CSS=a[o].CSS,-1==a[e+r._rowCount].CSS.indexOf("value")&&i<l-1&&t.Pivot._calculateRowPagingSpan(e+r._rowCount,a,i+1,l,r));break}},_calculateColumnPagingSpan:function(e,a,i,l,r,n){var o,s;if(a[e].CSS.indexOf("summary")>-1&&r<=1)return!1;if(null!=a[e+n._rowCount]&&(1==a[e].Expander&&a[e].ColSpan>1||a[e].CSS.indexOf("summary")>-1&&a[e].ColSpan>1||i==l&&r>1&&a[e].ColSpan>1))a[e+n._rowCount].ColSpan=a[e].ColSpan-1,a[e].ColSpan=1,a[e+n._rowCount].Expander=a[e].Expander,a[e+n._rowCount].RowSpan=a[e].RowSpan,a[e+n._rowCount].State=a[e].State,a[e+n._rowCount].Value=a[e].Value,a[e+n._rowCount].CSS=a[e].CSS,i<l&&-1==a[e].CSS.indexOf("summary")&&t.Pivot._calculateColumnPagingSpan(e+1,a,i+1,l,r,n);else if(0==a[e].Expander&&null!=a[e+n._rowCount]&&1!=a[e+n._rowCount].Expander)for(o=1,s=e-n._rowCount;s>=0;s-=n._rowCount)if(o++,1==a[s].Expander||a[s].CSS.indexOf("summary")>-1&&a[s].ColSpan>1||i==l&&r>1&&a[s].ColSpan>1){a[s].ColSpan!=o&&(a[e+n._rowCount].ColSpan=a[s].ColSpan-o,a[s].ColSpan=o,a[e+n._rowCount].RowSpan=a[s].RowSpan,a[e+n._rowCount].Expander=a[s].Expander,a[e+n._rowCount].State=a[s].State,a[e+n._rowCount].Value=a[s].Value,a[e+n._rowCount].CSS=a[s].CSS,i<l&&-1==a[s].CSS.indexOf("summary")&&t.Pivot._calculateColumnPagingSpan(e+1,a,i+1,l,r,n));break}},createAdvanceFilterTag:function(a,i){var l,r,n,o,s,d,u,c,p,m,g="",h=(t.buildTag("li.e-separator").css("margin-left","29px")[0].outerHTML,i.element.hasClass("e-pivotschemadesigner")?i.model.pivotControl.model.operationalMode:i.model.operationalMode),f=i.element.hasClass("e-pivotschemadesigner")?i.model.pivotControl.model.analysisMode:i.model.analysisMode;if("filterTag"==a.action)g=[{id:"ascOrder",text:i._getLocalizedLabels("SortAtoZ"),parentId:null,spriteCssClass:"e-ascImage e-icon"},{id:"descOrder",text:i._getLocalizedLabels("SortZtoA"),parentId:null,spriteCssClass:"e-descImage e-icon"},{id:"clearSorting",text:i._getLocalizedLabels("ClearSorting"),parentId:null,spriteCssClass:"e-clrSort e-icon"},{id:"sep1",parentId:null,text:"",spriteCssClass:"e-seperator"},{id:"clearAllFilters",text:i._getLocalizedLabels("ClearFilterFrom"),parentId:null,spriteCssClass:"e-clrFilter e-icon"},{id:"labelFilterBtn",text:i._getLocalizedLabels("LabelFilters"),parentId:null},{id:"valueFilterBtn",text:i._getLocalizedLabels("ValueFilters"),parentId:null},{id:"labelClearFilter",parentId:"labelFilterBtn",text:i._getLocalizedLabels("ClearFilter"),spriteCssClass:"e-clrFilter e-icon"},{id:"sep2",parentId:"labelFilterBtn",text:"",spriteCssClass:"e-seperator"},{id:"equals_labelFilter",parentId:"labelFilterBtn",text:i._getLocalizedLabels("Equals"),spriteCssClass:"sprite"},{id:"notequals_labelFilter",parentId:"labelFilterBtn",text:i._getLocalizedLabels("DoesNotEquals")+"...",spriteCssClass:"sprite"},{id:"sep3",parentId:"labelFilterBtn",text:"",spriteCssClass:"e-seperator"},{id:"beginswith",parentId:"labelFilterBtn",text:i._getLocalizedLabels("BeginsWith")+"...",spriteCssClass:"sprite"},{id:"notbeginswith",parentId:"labelFilterBtn",text:i._getLocalizedLabels("DoesNotBeginsWith")+"...",spriteCssClass:"sprite"},{id:"endswith",parentId:"labelFilterBtn",text:i._getLocalizedLabels("EndsWith")+"...",spriteCssClass:"sprite"},{id:"notendswith",parentId:"labelFilterBtn",text:i._getLocalizedLabels("DoesNotEndsWith")+"...",spriteCssClass:"sprite"},{id:"sep4",parentId:"labelFilterBtn",text:"",spriteCssClass:"e-seperator"},{id:"contains",parentId:"labelFilterBtn",text:i._getLocalizedLabels("Contains")+"...",spriteCssClass:"sprite"},{id:"notcontains",parentId:"labelFilterBtn",text:i._getLocalizedLabels("DoesNotContains")+"...",spriteCssClass:"sprite"},{id:"sep5",parentId:"labelFilterBtn",text:"",spriteCssClass:"e-seperator"},{id:"greaterthan_labelFilter",parentId:"labelFilterBtn",text:i._getLocalizedLabels("GreaterThan")+"...",spriteCssClass:"sprite"},{id:"greaterthanorequalto_labelFilter",parentId:"labelFilterBtn",text:i._getLocalizedLabels("GreaterThanOrEqualTo")+"...",spriteCssClass:"sprite"},{id:"lessthan_labelFilter",parentId:"labelFilterBtn",text:i._getLocalizedLabels("LessThan")+"...",spriteCssClass:"sprite"},{id:"lessthanorequalto_labelFilter",parentId:"labelFilterBtn",text:i._getLocalizedLabels("LessThanOrEqualTo")+"...",spriteCssClass:"sprite"},{id:"valueClearFilter",parentId:"valueFilterBtn",text:i._getLocalizedLabels("ClearFilter"),spriteCssClass:"e-clrFilter e-icon"},{id:"sep6",parentId:"valueFilterBtn",text:"",spriteCssClass:"e-seperator"},{id:"equals_valueFilter",parentId:"valueFilterBtn",text:i._getLocalizedLabels("Equals"),spriteCssClass:"equals"},{id:"notequals_valueFilter",parentId:"valueFilterBtn",text:i._getLocalizedLabels("DoesNotEquals")+"...",spriteCssClass:"sprite"},{id:"sep7",parentId:"valueFilterBtn",text:"",spriteCssClass:"e-seperator"},{id:"greaterthan_valueFilter",parentId:"valueFilterBtn",text:i._getLocalizedLabels("GreaterThan")+"...",spriteCssClass:"sprite"},{id:"greaterthanorequalto_valueFilter",parentId:"valueFilterBtn",text:i._getLocalizedLabels("GreaterThanOrEqualTo")+"...",spriteCssClass:"sprite"},{id:"lessthan_valueFilter",parentId:"valueFilterBtn",text:i._getLocalizedLabels("LessThan")+"...",spriteCssClass:"sprite"},{id:"lessthanorequalto_valueFilter",parentId:"valueFilterBtn",text:i._getLocalizedLabels("LessThanOrEqualTo")+"...",spriteCssClass:"sprite"},{id:"sep8",parentId:"valueFilterBtn",text:"",spriteCssClass:"e-seperator"},{id:"between",parentId:"valueFilterBtn",text:i._getLocalizedLabels("Between")+"...",spriteCssClass:"sprite"},{id:"notbetween",parentId:"valueFilterBtn",text:i._getLocalizedLabels("NotBetween")+"...",spriteCssClass:"sprite"},{id:"topCount",parentId:"valueFilterBtn",text:i._getLocalizedLabels("Top10")+"...",spriteCssClass:"sprite"}],(h==t.Pivot.OperationalMode.ClientMode||h==t.Pivot.OperationalMode.ServerMode&&f==t.Pivot.AnalysisMode.Pivot)&&g.splice(g.length-1,2);else if("clearFilter"==a.action)g=t.buildTag("div.clearSorting",t.buildTag("span.e-clrSort","",{padding:"0px 10px 0px 4px"}).addClass("e-icon").attr("aria-label","clear sort")[0].outerHTML+t.buildTag("span.clearSortText","Clear Sorting",{padding:"5px 0px"})[0].outerHTML)[0].outerHTML+t.buildTag("div.separator",{padding:"5px 0px"})[0].outerHTML+t.buildTag("div.clearAllFilters",t.buildTag("span.e-clrFilter","",{padding:"0px 10px 0px 4px"}).addClass("e-icon").attr("aria-label"," clear filter")[0].outerHTML+t.buildTag("span.clearFltrText",'Clear Filter From"'+a.selectedLevel.text+'"',{padding:"5px 0px"})[0].outerHTML)[0].outerHTML;else if("sort"==a.action)g=t.buildTag("div#sortDiv.sortDiv",t.buildTag("li#ascOrder.e-ascOrder",t.buildTag("span.e-ascImage").addClass("e-icon").attr("aria-label","ascending")[0].outerHTML+i._getLocalizedLabels("Sort")+" A to Z")[0].outerHTML+t.buildTag("li#descOrder.e-descOrder",t.buildTag("span.e-descImage").addClass("e-icon").attr("aria-label","descending")[0].outerHTML+i._getLocalizedLabels("Sort")+" Z to A")[0].outerHTML)[0].outerHTML;else if("labelFilterDlg"==a.action||"valueFilterDlg"==a.action){if(l="",r=[],"labelFilterDlg"==a.action)l=t.buildTag("table.labelfilter",t.buildTag("tr",t.buildTag("td",i._getLocalizedLabels("LabelFilterLabel")).attr("colspan","2")[0].outerHTML)[0].outerHTML+t.buildTag("tr",t.buildTag("td","<input type='text' id='filterOptions' class='filterOptions'  style='width:220px'/>")[0].outerHTML+t.buildTag("td.filterValuesTd","<input type='text' id='filterValue1'  value='"+(a.filterInfo.length>0?h==t.Pivot.OperationalMode.ClientMode?a.filterInfo[0].values[0]:a.filterInfo[0].value1:"")+"' style='display:inline; width:160px; height:19px; margin-left:7px;' class='e-filterValues'/></br>")[0].outerHTML)[0].outerHTML)[0].outerHTML,r=[{value:"equals",option:i._getLocalizedLabels("Equals").toLowerCase()},{value:"not equals",option:i._getLocalizedLabels("DoesNotEquals").toLowerCase()},{value:"begins with",option:i._getLocalizedLabels("BeginsWith").toLowerCase()},{value:"not begins with",option:i._getLocalizedLabels("DoesNotBeginsWith").toLowerCase()},{value:"ends with",option:i._getLocalizedLabels("EndsWith").toLowerCase()},{value:"not ends with",option:i._getLocalizedLabels("DoesNotEndsWith").toLowerCase()},{value:"contains",option:i._getLocalizedLabels("Contains").toLowerCase()},{value:"not contains",option:i._getLocalizedLabels("DoesNotContains").toLowerCase()},{value:"greater than",option:i._getLocalizedLabels("IsGreaterThan").toLowerCase()},{value:"greater than or equal to",option:i._getLocalizedLabels("IsGreaterThanOrEqualTo").toLowerCase()},{value:"less than",option:i._getLocalizedLabels("IsLessThan").toLowerCase()},{value:"less than or equal to",option:i._getLocalizedLabels("IsLessThanOrEqualTo").toLowerCase()}];else{if(n=[],s="between"==e(a.selectedArgs.element).attr("id")||"notbetween"==e(a.selectedArgs.element).attr("id")||"between"==a.selectedArgs.value||"not between"==a.selectedArgs.value?"4":"3",i.element.find(".e-cubeTreeView ").length>0)n=e.map(i.element.find(".e-cubeTreeView [data-tag*='[Measures]'] "),function(t){return{option:e(t).text(),value:e(t).attr("data-tag")}});else for(d=i.element.hasClass("e-pivotschemadesigner")?i.element.find(".e-schemaValue .e-pivotButton"):i.element.find(".groupingBarPivot .values .e-pivotButton"),d=i._schemaData&&0==d.length?e(i._schemaData.element.find(".e-schemaValue .e-pivotButton")):d,u=0;u<d.length;u++)n.push({option:e(d[u]).text(),value:e(d[u]).attr("data-tag").split(":")[1]});o=e(a.selectedArgs.element).hasClass("topCount")?t.buildTag("td","<input type='text' id='filterOptions' class='filterOptions' />").attr("width","80px")[0].outerHTML+t.buildTag("td","<input type='text' id='filterValue1' class='e-filterValues' />").attr("width","50px")[0].outerHTML+t.buildTag("td","<input type='text' id='filterMeasures' class='filterMeasures' />").attr("width","180px")[0].outerHTML:t.buildTag("td","<input type='text' id='filterMeasures' class='filterMeasures' />").attr("width","180px")[0].outerHTML+t.buildTag("td","<input type='text' id='filterOptions' class='filterOptions'/>").attr("width","180px")[0].outerHTML+t.buildTag("td.filterValuesTd","<input type='text' id='filterValue1' value='"+(a.filterInfo.length>0?h==t.Pivot.OperationalMode.ClientMode?a.filterInfo[0].values[0]:a.filterInfo[0].value1:"")+"' style='display:inline; width:190px; height:19px;' class='e-filterValues'/>"+("4"==s?"<span>"+i._getLocalizedLabels("and")+" </span><input type='text' id='filterValue2' value='"+(a.filterInfo.length>0?h!=t.Pivot.OperationalMode.ClientMode||t.isNullOrUndefined(a.filterInfo[0].values[1])?h!=t.Pivot.OperationalMode.ServerMode||t.isNullOrUndefined(a.filterInfo[0].value2)?"":a.filterInfo[0].value2:a.filterInfo[0].values[1]:"")+"' style='display:inline; width:190px; height:19px;' class='e-filterValues'/> </br>":"</br>"))[0].outerHTML,l=t.buildTag("table.valuefilter",t.buildTag("tr",t.buildTag("td",i._getLocalizedLabels("ValueFilterLabel")).attr("colspan","Between"==a.text?"4":"3")[0].outerHTML)[0].outerHTML+t.buildTag("tr",o)[0].outerHTML)[0].outerHTML,r=[{value:"equals",option:i._getLocalizedLabels("Equals").toLowerCase()},{value:"not equals",option:i._getLocalizedLabels("DoesNotEquals").toLowerCase()},{value:"greater than",option:i._getLocalizedLabels("IsGreaterThan").toLowerCase()},{value:"greater than or equal to",option:i._getLocalizedLabels("IsGreaterThanOrEqualTo").toLowerCase()},{value:"less than",option:i._getLocalizedLabels("IsLessThan").toLowerCase()},{value:"less than or equal to",option:i._getLocalizedLabels("IsLessThanOrEqualTo").toLowerCase()},{value:"between",option:i._getLocalizedLabels("Between").toLowerCase()},{value:"not between",option:i._getLocalizedLabels("NotBetween").toLowerCase()}]}c=t.buildTag("div",t.buildTag("button#filterDlgOKBtn.e-dialogOKBtn",i._getLocalizedLabels("OK")).attr("title",i._getLocalizedLabels("OK").replace(/(<([^>]+)>)/gi,""))[0].outerHTML+t.buildTag("button#filterDlgCancelBtn.e-dialogCancelBtn",i._getLocalizedLabels("Cancel")).attr("title",i._getLocalizedLabels("Cancel").replace(/(<([^>]+)>)/gi,""))[0].outerHTML,{float:i.model.enableRTL?"left":"right",margin:"8px 0 6px"})[0].outerHTML,i.element.find(".e-dialog").remove(),e(t.buildTag("div#filterDialog.filterDialog",l+c,{opacity:"1"})).appendTo("#"+i._id),i.element.find(".filterDialog").ejDialog({enableRTL:i.model.enableRTL,enableResize:!1,cssClass:"e-labelValueFilterDlg",width:"auto",content:"#"+i._id,close:t.proxy(t.Pivot.closePreventPanel,i)}),"valueFilterDlg"==a.action&&(i.element.find(".filterMeasures").ejDropDownList({dataSource:n,width:"180px",height:"25px",fields:{text:"option",value:"value"},create:function(){e(this.wrapper.find(".e-input")).focus(function(){e(this).blur()})}}),i._measureDDL=i.element.find(".filterMeasures").data("ejDropDownList"),""!=(p=a.filterInfo.length>0&&!t.isNullOrUndefined(a.filterInfo[0].measure)?a.filterInfo[0].measure:n.length>0?n[0].value:"")&&i._measureDDL.selectItemByValue(p)),"topCount"==e(a.selectedArgs.element).attr("id")?(i.element.find("#filterOptions").ejDropDownList({dataSource:[{option:"Top",value:"topCount"},{option:"Bottom",value:"BottomCount"}],fields:{text:"option",value:"value"},value:a.filterInfo.length>0?a.filterInfo[0].operator:"topCount",create:function(){e(this.wrapper.find(".e-input")).focus(function(){e(this).blur()})}}),i.element.find("#filterValue1").ejNumericTextbox({value:a.filterInfo.length>0?parseInt(a.filterInfo[0].value1):5,minValue:1})):(m=e(a.selectedArgs.element).parent().children('li:not([id^="sep"])').index(a.selectedArgs.element),i.element.find(".filterOptions").ejDropDownList({dataSource:r,width:"180px",height:"25px",fields:{value:"value",text:"option"},selectedIndices:[m-1],change:t.proxy(i._filterOptionChanged,i),create:function(){e(this.wrapper.find(".e-input")).focus(function(){e(this).blur()})}}),0==e(a.selectedArgs.element).length&&i.element.find(".filterOptions").data("ejDropDownList").selectItemByValue(a.selectedArgs.selectedValue)),i.element.find("#filterDlgOKBtn").ejButton({type:t.ButtonType.Button,click:t.proxy(i._filterElementOkBtnClick,i)}),i.element.find("#filterDlgCancelBtn").ejButton({type:t.ButtonType.Button,click:function(){e(".e-dialog").hide(),t.Pivot.closePreventPanel(i)}}),i.element.find(".e-titlebar").prepend(t.buildTag("div",("valueFilterDlg"==a.action?i._getLocalizedLabels("ValueFilters")+"(":i._getLocalizedLabels("LabelFilters")+"(")+(-1==i._selectedLevelUniqueName.indexOf(".")?i._selectedLevelUniqueName:i._selectedLevelUniqueName.indexOf(".")<0?i._selectedLevelUniqueName:i._selectedLevelUniqueName.split(".")[2].replace(/\[/g,"").replace(/\]/g,""))+")",{display:"inline"}))}return g}},t.Pivot.SortOrder={None:"none",Ascending:"ascending",Descending:"descending"},t.Pivot.AdvancedFilterType={LabelFilter:"label",ValueFilter:"value"},t.Pivot.ValueFilterOptions={None:"none",Equals:"equals",NotEquals:"notequals",GreaterThan:"greaterthan",GreaterThanOrEqualTo:"greaterthanorequalto",LessThan:"lessthan",LessThanOrEqualTo:"lessthanorequalto",Between:"between",NotBetween:"notbetween"},t.Pivot.LabelFilterOptions={None:"none",BeginsWith:"beginswith",NotBeginsWith:"notbeginswith",EndsWith:"endswith",NotEndsWith:"notendswith",Contains:"contains",NotContains:"notcontains",Equals:"equals",NotEquals:"notequals",GreaterThan:"greaterthan",GreaterThanOrEqualTo:"greaterthanorequalto",LessThan:"lessthan",LessThanOrEqualTo:"lessthanorequalto",Between:"between",NotBetween:"notbetween"},t.Pivot.AnalysisMode={Olap:"olap",Pivot:"pivot"},t.Pivot.OperationalMode={ClientMode:"clientmode",ServerMode:"servermode"}}(jQuery,Syncfusion)})},1011:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
*  filename: ej.pivotanalysis.base.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.pivotanalysis.base.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=e)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(function(){!function($,ej,undefined){ej.PivotAnalysis={_initProperties:function(){this._colkeyvalues=[],this._rowKeyValues=[],this._colKeysCalcValues=[],this._rowKeysCalcValues=[],this._tableKeysCalcValues=[],this._gridMatrix=null,this._rowTotCalc=[],this._colTotCalc=[],this._transposeEngine=[],this._tRowCnt=0,this._tColCnt=0,this._cellType="",this._valueFilterArray=ej.isNullOrUndefined(this._valueFilterArray)?[]:this._valueFilterArray,this._currentFilterVal={},this._fieldMembers={},this._summaryTypes=[],this._editCellsInfo=[],this._locale="en-US",this._valueSorting=ej.isNullOrUndefined(this._valueSorting)?null:this._valueSorting,this._sort=ej.isNullOrUndefined(this._sort)?null:this._sort,this._isPaging=!1,this._colHdrLen=1,this._rowHdrLen=1,this._rowMembers={},this._colMembers={},this._calcMembers={}},setFieldCaptions:function(e){$.each(e.rows,function(e,t){ej.isNullOrUndefined(t.fieldCaption)&&(t.fieldCaption=t.fieldName)}),$.each(e.columns,function(e,t){ej.isNullOrUndefined(t.fieldCaption)&&(t.fieldCaption=t.fieldName)}),$.each(e.filters,function(e,t){ej.isNullOrUndefined(t.fieldCaption)&&(t.fieldCaption=t.fieldName)}),$.each(e.values,function(e,t){ej.isNullOrUndefined(t.fieldCaption)&&(t.fieldCaption=t.fieldName)})},getTreeViewData:function(e){var t,a,i,l,r,n,o=[],s=[];if(null!=e.data)for(i=0;i<e.data.length;i++)jQuery.each(e.data[i],function(e){-1==jQuery.inArray(e,o)&&o.push(e)});for(jQuery.each(e.values,function(e,t){1==t.isCalculatedField&&-1==jQuery.inArray(t.fieldName,o)&&o.push(t.fieldName)}),t=[e.rows,e.columns,e.filters,e.values],a=[].concat.apply([],t),i=0;i<o.length;i++){for(l=0;l<a.length;l++)(o[i].caption==undefined||""==o[i].caption)&&a[l].fieldName==o[i]&&(o[i]={name:a[l].fieldName,caption:a[l].fieldCaption,format:a[l].format,formatString:a[l].formatString,showSubTotal:!!ej.isNullOrUndefined(a[l].showSubTotal)||a[l].showSubTotal});(o[i].caption==undefined||""==o[i].caption)&&(o[i]={name:o[i].name||o[i],caption:o[i].name||o[i]})}for(r=0;r<o.length;r++)n=$.grep(e.rows,function(e){return e.fieldName==o[r].name}).length>0||$.grep(e.columns,function(e){return e.fieldName==o[r].name}).length>0||$.grep(e.values,function(e){return e.fieldName==o[r].name}).length>0||$.grep(e.filters,function(e){return e.fieldName==o[r].name}).length>0,s.push({id:o[r].name,name:o[r].name,caption:o[r].caption,format:o[r].format,formatString:o[r].formatString,showSubTotal:!!ej.isNullOrUndefined(o[r].showSubTotal)||o[r].showSubTotal,isSelected:n,spriteCssClass:""});return s},pivotEnginePopulate:function(model){var dataSource=model.dataSource,currentObj=this,isLiteral=!1,rowFilters,lit,formatSt,uV,fields,vC,list,cnt,nC,outputString,rC,cC,isFiltered,cCnt,rCnt,temp,value,val,j,k,formula,oldValue,newValue,i;this._initProperties(),model.dataSource.enableAdvancedFilter&&0==this._valueFilterArray.length&&(this._valueFilterArray=$.grep(dataSource.columns,function(e){if(e.advancedFilter&&e.advancedFilter.length>0&&e.advancedFilter[0].advancedFilterType==ej.Pivot.AdvancedFilterType.ValueFilter)return e.advancedFilter}),rowFilters=$.grep(dataSource.rows,function(e){if(e.advancedFilter&&e.advancedFilter.length>0&&e.advancedFilter[0].advancedFilterType==ej.Pivot.AdvancedFilterType.ValueFilter)return e.advancedFilter}),rowFilters.length>0&&$.merge(this._valueFilterArray,rowFilters)),this._locale=model.locale;var colAxis=dataSource.columns,rowAxis=dataSource.rows,filters=dataSource.filters,calcValues=dataSource.values,colLen,jsonObj=[],pivotFieldList=[],rowLen;for(lit=0;dataSource.values.length>lit;lit++)if(formatSt="",dataSource.values[lit].format&&(formatSt=dataSource.values[lit].format.toLowerCase()),"string"==formatSt||"text"==formatSt||"literal"==formatSt){isLiteral=!0;break}if(this._editCellsInfo=[],!ej.isNullOrUndefined(model.editCellsInfo)){var rowHeaders=model.editCellsInfo.rowHeader,colHeaders=model.editCellsInfo.columnHeader,values=model.editCellsInfo.JSONRecords;if(!ej.isNullOrUndefined(values)){for(uV=0;uV<values.length;uV++)fields={},rowAxis.length>0&&(fields.row=rowHeaders[uV].toString().split("#").splice(0,rowAxis.length).join(">#>")),colAxis.length>0&&(fields.column=colHeaders[uV].toString().split("#").splice(0,colAxis.length).join(">#>")),fields.value=colHeaders[uV].toString().split("#")[colHeaders[uV].toString().split("#").length-1]+"#"+values[uV].Value,this._editCellsInfo.push(fields);for(vC=0;vC<calcValues.length;vC++)$.each(this._editCellsInfo,function(e,t){calcValues[vC].fieldName==t.value.split("#")[0]&&(ej.PivotAnalysis._editCellsInfo[e].value=vC+"#"+t.value.split("#")[1])})}}for(i=0;i<calcValues.length;i++)this._summaryTypes.push(null!=calcValues[i].summaryType&&calcValues[i].summaryType!=undefined?calcValues[i].summaryType:ej.PivotAnalysis.SummaryType.Sum);if(null!=dataSource.data)for(cnt=0;cnt<dataSource.data.length;cnt++){list=jQuery.extend(!0,{},dataSource.data[cnt]);var table={keys:[],uniqueName:"",value:null},row={keys:[],uniqueName:"",value:null},col={keys:[],uniqueName:"",value:null},values={keys:[],uniqueName:"",value:null},isExcluded=!1;for(i=0;i<filters.length;i++)if(val=this._getReflectedValue(list,filters[i].fieldName,null,null),this._fieldMembers[filters[i].fieldName]==undefined||null==this._fieldMembers[filters[i].fieldName]?this._fieldMembers[filters[i].fieldName]=[val]:-1==$.inArray(val,this._fieldMembers[filters[i].fieldName])&&this._fieldMembers[filters[i].fieldName].push(val),null!=filters[i].filterItems&&filters[i].filterItems!=undefined&&((filters[i].filterItems.filterType==ej.PivotAnalysis.FilterType.Exclude||null==filters[i].filterItems.filterType)&&$.inArray(val,filters[i].filterItems.values)>=0||filters[i].filterItems.filterType==ej.PivotAnalysis.FilterType.Include&&$.inArray(val,filters[i].filterItems.values)<0)){isExcluded=!0;break}for(nC=0;nC<calcValues.length;nC++)val="",calcValues[nC]!=undefined&&null!=calcValues[nC]&&(list[calcValues[nC].fieldName]=model.dataSource.isFormattedValues?this._getNumber($(list).prop(calcValues[nC].fieldName),calcValues[nC].formatString):list[calcValues[nC].fieldName],val=this._getReflectedValue(list,calcValues[nC].fieldName,calcValues[nC].format,calcValues[nC].formatString),this._fieldMembers[calcValues[nC].fieldName]==undefined||null==this._fieldMembers[calcValues[nC].fieldName]?this._fieldMembers[calcValues[nC].fieldName]=[val]:-1==$.inArray(val,this._fieldMembers[calcValues[nC].fieldName])&&this._fieldMembers[calcValues[nC].fieldName].push(val)),outputString=null!=val?val.toString().replace(/([AMPME~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,-.\/? ])+/g,""):"0",outputString=outputString.replace(ej.globalize.preferredCulture(this._locale).numberFormat.currency.symbol,""),$.isNumeric(outputString)||"date"==calcValues[nC].format?values.keys.push(null!=val?val:null):(values.keys.push(1),isLiteral&&(""==values.uniqueName&&(values.uniqueName=[]),ej.isNullOrUndefined(calcValues[nC].format)||"string"!=calcValues[nC].format.toLowerCase()&&"literal"!=calcValues[nC].format.toLowerCase()&&"text"!=calcValues[nC].format.toLowerCase()?values.uniqueName.push(" "):values.uniqueName.push(val)));for(rC=0;rC<rowAxis.length;rC++){if(val="",rowAxis[rC]!=undefined&&null!=rowAxis[rC])if(val=this._getReflectedValue(list,rowAxis[rC].fieldName,ej.isNullOrUndefined(rowAxis[rC].format)?null:rowAxis[rC].format,ej.isNullOrUndefined(rowAxis[rC].format)||ej.isNullOrUndefined(rowAxis[rC].formatString)?null:rowAxis[rC].formatString),this._fieldMembers[rowAxis[rC].fieldName]==undefined||null==this._fieldMembers[rowAxis[rC].fieldName]?this._fieldMembers[rowAxis[rC].fieldName]=[val]:-1==$.inArray(val,this._fieldMembers[rowAxis[rC].fieldName])&&this._fieldMembers[rowAxis[rC].fieldName].push(val),dataSource.enableAdvancedFilter&&!ej.isNullOrUndefined(rowAxis[rC].advancedFilter)&&rowAxis[rC].advancedFilter.length&&rowAxis[rC].advancedFilter[0].advancedFilterType==ej.Pivot.AdvancedFilterType.LabelFilter){if(isFiltered=this._applyLabelFilter(rowAxis[rC].advancedFilter,val),isFiltered){isExcluded=!0;break}}else if(null!=rowAxis[rC].filterItems&&rowAxis[rC].filterItems!=undefined&&((rowAxis[rC].filterItems.filterType==ej.PivotAnalysis.FilterType.Exclude||null==rowAxis[rC].filterItems.filterType)&&$.inArray(val,rowAxis[rC].filterItems.values)>=0||rowAxis[rC].filterItems.filterType==ej.PivotAnalysis.FilterType.Include&&$.inArray(val,rowAxis[rC].filterItems.values)<0)){isExcluded=!0;break}null!=val&&val.toString().replace(/^\s+|\s+$/gm,"")||(val="(blank)"),row.keys.push(val),row.uniqueName+=""==row.uniqueName?val:">#>"+val,table.keys.push(val),table.uniqueName+=""==table.uniqueName?val:">#>"+val}for(cC=0;cC<colAxis.length;cC++){if(val="",colAxis[cC]!=undefined&&null!=colAxis[cC])if(val=this._getReflectedValue(list,colAxis[cC].fieldName,ej.isNullOrUndefined(colAxis[cC].format)?null:colAxis[cC].format,ej.isNullOrUndefined(colAxis[cC].format)||ej.isNullOrUndefined(colAxis[cC].formatString)?null:colAxis[cC].formatString),this._fieldMembers[colAxis[cC].fieldName]==undefined||null==this._fieldMembers[colAxis[cC].fieldName]?this._fieldMembers[colAxis[cC].fieldName]=[val]:-1==$.inArray(val,this._fieldMembers[colAxis[cC].fieldName])&&this._fieldMembers[colAxis[cC].fieldName].push(val),dataSource.enableAdvancedFilter&&!ej.isNullOrUndefined(colAxis[cC].advancedFilter)&&colAxis[cC].advancedFilter.length&&colAxis[cC].advancedFilter[0].advancedFilterType==ej.Pivot.AdvancedFilterType.LabelFilter){if(isFiltered=this._applyLabelFilter(colAxis[cC].advancedFilter,val),isFiltered){isExcluded=!0;break}}else if(null!=colAxis[cC].filterItems&&colAxis[cC].filterItems!=undefined&&((colAxis[cC].filterItems.filterType==ej.PivotAnalysis.FilterType.Exclude||null==colAxis[cC].filterItems.filterType)&&$.inArray(val,colAxis[cC].filterItems.values)>=0||colAxis[cC].filterItems.filterType==ej.PivotAnalysis.FilterType.Include&&$.inArray(val,colAxis[cC].filterItems.values)<0)){isExcluded=!0;break}null!=val&&val.toString().replace(/^\s+|\s+$/gm,"")||(val="(blank)"),col.keys.push(val),col.uniqueName+=""==col.uniqueName?val:">#>"+val,table.keys.push(val),table.uniqueName+=""==table.uniqueName?val:">#>"+val}if(!isExcluded)if(this._isMemberExist("row",row,$.extend(!0,{},values),dataSource),this._isMemberExist("column",col,$.extend(!0,{},values),dataSource),!model.enablePaging&&!model.enableVirtualScrolling||0==row.keys.length&&0==col.keys.length)this._isMemberExist("calc",table,$.extend(!0,{},values),dataSource);else if(row.keys.length>0&&col.keys.length>0)for(rCnt=0;rCnt<row.keys.length;rCnt++)for(cCnt=0;cCnt<col.keys.length;cCnt++)row.keys.length==rCnt+1&&col.keys.length==cCnt+1?this._isMemberExist("calc",{keys:row.keys.slice(0,rCnt+1).concat(col.keys.slice(0,cCnt+1)),uniqueName:row.keys.slice(0,rCnt+1).concat(col.keys.slice(0,cCnt+1)).join(">#>"),value:null},$.extend(!0,{},values),dataSource):this._isMemberExist("calc",{cellType:"SubTot",keys:row.keys.slice(0,rCnt+1).concat(col.keys.slice(0,cCnt+1)),uniqueName:row.keys.slice(0,rCnt+1).concat(col.keys.slice(0,cCnt+1)).join(">#>"),value:null},$.extend(!0,{},values),dataSource);else if(0==row.keys.length)for(cCnt=0;cCnt<col.keys.length;cCnt++)col.keys.length==cCnt+1?this._isMemberExist("calc",{keys:col.keys.slice(0,cCnt+1),uniqueName:col.keys.slice(0,cCnt+1).join(">#>"),value:null},$.extend(!0,{},values),dataSource):this._isMemberExist("calc",{cellType:"SubTot",keys:col.keys.slice(0,cCnt+1),uniqueName:col.keys.slice(0,cCnt+1).join(">#>"),value:null},$.extend(!0,{},values),dataSource);else for(rCnt=0;rCnt<row.keys.length;rCnt++)row.keys.length==rCnt+1?this._isMemberExist("calc",{keys:row.keys.slice(0,rCnt+1),uniqueName:row.keys.slice(0,rCnt+1).join(">#>"),value:null},$.extend(!0,{},values),dataSource):this._isMemberExist("calc",{cellType:"SubTot",keys:row.keys.slice(0,rCnt+1),uniqueName:row.keys.slice(0,rCnt+1).join(">#>"),value:null},$.extend(!0,{},values),dataSource)}for(i=0;i<calcValues.length;i++)if(temp=$.grep(calcValues,function(e){return 1==e.isCalculatedField}),calcValues[i].isCalculatedField&&temp.length!=calcValues.length)for(j=0;j<this._tableKeysCalcValues.length;j++){for(formula=calcValues[i].formula.replace(/\s/g,""),k=0;k<calcValues.length;k++)1!=calcValues[k].isCalculatedField&&(value=ej.globalize.parseFloat(null==this._tableKeysCalcValues[j].value.keys[k]?"0":"date"==calcValues[k].format?this._dateToInt(this._tableKeysCalcValues[j].value.keys[k].toString()).toString():"time"==calcValues[k].format?this._dateToInt(new Date("1900",this._tableKeysCalcValues[j].value.keys[k].toString().split(":")[0],this._tableKeysCalcValues[j].value.keys[k].toString().split(":")[1],this._tableKeysCalcValues[j].value.keys[k].toString().split(":")[2].split(" ")[0]).toString()).toString():this._tableKeysCalcValues[j].value.keys[k].toString(),this._locale),formula=formula.replace(new RegExp(calcValues[k].fieldName,"g"),"percentage"==calcValues[k].format&&0!=value?value<0?"("+value/100+")":value:value<0?"("+value+")":value));formula.indexOf("^")>-1&&(formula=this._powerFunction(formula)),oldValue=!isNaN(eval(formula))&&isFinite(eval(formula))?this._getReflectedValue({calcField:eval(formula)},"calcField",calcValues[i].format,calcValues[i].formatString):null==dataSource.values[i].format?0:"0",newValue=null==dataSource.values[i].format?0:"0",this._tableKeysCalcValues[j].value.keys[i]=this._getSummaryValue(oldValue,newValue,1,this._summaryTypes[i],dataSource.values[i].format,dataSource.values[i].formatString)}else if(calcValues[i].isCalculatedField)for(val={keys:[],uniqueName:"",value:null},j=0;j<this._tableKeysCalcValues.length;j++){for(k=0;k<calcValues.length&&calcValues[k].isCalculatedField;k++)formula=calcValues[k].formula.replace(/\s/g,""),formula.indexOf("^")>-1&&(formula=this._powerFunction(formula)),oldValue=!isNaN(eval(formula))&&isFinite(eval(formula))?this._getReflectedValue({calcField:eval(formula)},"calcField",calcValues[k].format,calcValues[k].formatString):null==dataSource.values[k].format?0:"0",newValue=null==dataSource.values[k].format?0:"0",val.keys.push(this._getSummaryValue(oldValue,newValue,1,"sum",dataSource.values[k].format,dataSource.values[k].formatString));this._tableKeysCalcValues[j].value=val,val={keys:[],uniqueName:"",value:null}}if(rowAxis.length>0&&(this._rowKeysCalcValues=this._sortHeaders(this._rowKeysCalcValues,rowAxis,0)),colAxis.length>0&&(this._colKeysCalcValues=this._sortHeaders(this._colKeysCalcValues,colAxis,0)),this._colkeyvalues=$.extend([],this._colKeysCalcValues),this._rowKeyValues=$.extend([],this._rowKeysCalcValues),colAxis.length>0&&this._insertTotalHeader(colAxis,this._colKeysCalcValues),rowAxis.length>0)this._insertTotalHeader(rowAxis,this._rowKeysCalcValues);else if(calcValues.length>0)if(this._rowKeysCalcValues.length>0)this._rowKeysCalcValues[0].keys[0]="Grand Total";else{for(this._rowKeysCalcValues.push({keys:[""],value:{keys:[]}}),i=0;i<calcValues.length;i++)this._rowKeysCalcValues[0].value.keys.push();this._rowKeysCalcValues[0].keys[0]="Grand Total"}return this._fillEngine(model)},_fillEngine:function(e){var t,a,i,l,r,n,o,s,d;(e.enablePaging||e.enableVirtualScrolling)&&(this._isPaging=!0,this._colHdrLen=1,this._rowHdrLen=1,this._controlObj._colKeysCalcValues=$.extend(!0,[],this._colKeysCalcValues),this._controlObj._rowKeysCalcValues=$.extend(!0,[],this._rowKeysCalcValues),this._controlObj._tableKeysCalcValues=$.extend(!0,[],this._tableKeysCalcValues),this._cropHeaders(),this._applyPaging());var u=e.dataSource,c=[],p=u.columns,m=u.rows,g=(u.filters,u.values);for(this._tRowCnt=0,this._tColCnt=0,this._currentFilterVal=this._valueFilterArray.length>0?this._valueFilterArray[0]:{},this._calculateValues(u),i=0;i<this._valueFilterArray.length;i++)this._advancedFilterInfo.length>0&&(this,this._rowKeysCalcValues=this._filterKeyValues(this._rowKeyValues),this._colKeysCalcValues=this._filterKeyValues(this._colkeyvalues),this._gridMatrix=null,this._colkeyvalues=$.extend([],this._colKeysCalcValues),this._rowKeyValues=$.extend([],this._rowKeysCalcValues),p.length>0&&this._insertTotalHeader(p,this._colKeysCalcValues),m.length>0?this._insertTotalHeader(m,this._rowKeysCalcValues):g.length>0&&(this._rowKeysCalcValues[0].keys[0]="Grand Total"),this._tRowCnt=0,this._tColCnt=0,this._currentFilterVal=this._valueFilterArray.length!=i+1?this._valueFilterArray[i+1]:{},this._calculateValues(u));if(t=1==this._colKeysCalcValues.length&&"RGTot"==this._colKeysCalcValues[0].cellType,this._colTotCalc=[],this._rowTotCalc=[],this._colKeysCalcValues=[],this._rowKeysCalcValues=[],this._tableKeysCalcValues=[],this._transposeEngineCreation(),!ej.isNullOrUndefined(e.valueSortSettings)&&!ej.isNullOrUndefined(e.valueSortSettings.sortOrder)&&"none"!=e.valueSortSettings.sortOrder&&e.dataSource.values.length>0&&(!ej.isNullOrUndefined(this._valueSorting)||!ej.isNullOrUndefined(e.valueSortSettings.headerText)&&""!=e.valueSortSettings.headerText))if(a=0,e.valueSortSettings.headerDelimiters=e.valueSortSettings.headerDelimiters==undefined?"##":e.valueSortSettings.headerDelimiters,ej.isNullOrUndefined(this._valueSorting)){for(i=0;i<this._transposeEngine.length;i++){for(l=0;l<e.valueSortSettings.headerText.split(e.valueSortSettings.headerDelimiters).length;l++)ej.isNullOrUndefined(this._transposeEngine[i][l])||this._transposeEngine[i][l].Value!=e.valueSortSettings.headerText.split(e.valueSortSettings.headerDelimiters)[l]||a++;if(a==e.valueSortSettings.headerText.split(e.valueSortSettings.headerDelimiters).length){this._valueSorting=i;break}a=0}this._sort=ej.isNullOrUndefined(e.valueSortSettings)||ej.isNullOrUndefined(e.valueSortSettings.sortOrder)?this._sort:e.valueSortSettings.sortOrder,e.dataSource.columns.length+1!=e.valueSortSettings.headerText.split(e.valueSortSettings.headerDelimiters).length||ej.isNullOrUndefined(this._valueSorting)||this._applyValueSorting(e)}else this._applyValueSorting(e);for(r=0;r<this._tColCnt-1;r++){if(r<(n=0==m.length?1:this._isPaging?this._rowHdrLen:m.length))for(0==(o=(t?1:this._isPaging?this._colHdrLen:p.length)+(u.values.length>0?1:0))&&n>0&&(o=1),s=0;s<o;s++)this._gridMatrix.length>0&&c.push({Index:r+","+s,CSS:"none",Value:"",State:0,ColSpan:0==r&&0==s?n:1,RowSpan:0==r&&0==s?(t?1:this._isPaging?this._colHdrLen:p.length)+(u.values.length>0?1:0):1,Info:"",Span:"None",Expander:0});for(d=0;d<this._tRowCnt-1;d++)this._transposeEngine[r]==undefined||this._transposeEngine[r][d]==undefined||d<(t?1:this._isPaging?this._colHdrLen:p.length)+(u.values.length>0?1:0)&&r<n||c.push(this._transposeEngine[r][d])}return this._gridMatrix=[],u.rows[0]==undefined&&(u.rows.length=0),{json:c,pivotEngine:this._transposeEngine}},_cropHeaders:function(){var e,t,a,i,l=this._controlObj._drillHeaders.row,r=this._controlObj._drillHeaders.column,n=[],o=2,s=this._controlObj.model.enableCollapseByDefault,d=this._controlObj.model.dataSource.rows.length,u=this._controlObj.model.dataSource.columns.length;do{if(t=2==o?$.extend(!0,[],this._rowKeysCalcValues):$.extend(!0,[],this._colKeysCalcValues),s||(2==o?l.length>0:r.length>0)){for(a=0,e="",i=t.length-1;i>=0;i--)if(!ej.isNullOrUndefined(t[i])){ej.isNullOrUndefined(t[i].cellType)||ej.isNullOrUndefined(t[i].uniqueName)||(-1==t[i].uniqueName.indexOf(">#>")?t[i].uniqueName==e:-1!=t[i].uniqueName.indexOf(e))||(e="",a=t[i].level),s&&0==t[i].level&&""==e&&(a=0),(s?t[i].level!=a:""!=e)||ej.isNullOrUndefined(t[i].cellType)||ej.isNullOrUndefined(t[i].uniqueName)||!(2==o?l.indexOf(t[i].uniqueName)>-1:r.indexOf(t[i].uniqueName)>-1)||(e=t[i].uniqueName,a++);var c=e==t[i].uniqueName,p="RGTot"==t[i].cellType,m=t[i].level==a;(s?c||p||m||(2==o?a>d-2:a>u-2):""==e||ej.isNullOrUndefined(t[i].uniqueName)||c)&&((s?m:c)&&!ej.isNullOrUndefined(t[i].keys)&&t[i].keys.length>0&&!p&&""!=t[i].uniqueName&&(t[i].keys[t[i].keys.length-1]=t[i].keys[t[i].keys.length-1].replace(" Total","").replace("%####%",""),t[i].expander=2),n.push(t[i]))}2==o?this._rowKeysCalcValues=$.extend(!0,[],n.reverse()):this._colKeysCalcValues=$.extend(!0,[],n.reverse())}n=[],o--}while(o>0)},_applyPaging:function(){var e,t=[];this._controlObj._seriesPageCount=this._controlObj.model.enablePaging?this._rowKeysCalcValues.length:Math.ceil(this._rowKeysCalcValues.length/this._controlObj.model.dataSource.pagerOptions.seriesPageSize),this._controlObj._categPageCount=this._controlObj.model.enablePaging?this._colKeysCalcValues.length*(this._controlObj.model.dataSource.values.length>0?this._controlObj.model.dataSource.values.length:1):Math.ceil(this._colKeysCalcValues.length*(this._controlObj.model.dataSource.values.length>0?this._controlObj.model.dataSource.values.length:1)/this._controlObj.model.dataSource.pagerOptions.categoricalPageSize),this._controlObj._categPageCount=0==this._controlObj._categPageCount?1:this._controlObj._categPageCount,this._controlObj.model.dataSource.pagerOptions.seriesCurrentPage=this._controlObj.model.dataSource.pagerOptions.seriesCurrentPage*this._controlObj.model.dataSource.pagerOptions.seriesPageSize>this._rowKeysCalcValues.length?Math.ceil(this._rowKeysCalcValues.length/this._controlObj.model.dataSource.pagerOptions.seriesPageSize):this._controlObj.model.dataSource.pagerOptions.seriesCurrentPage,this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage=this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage*this._controlObj.model.dataSource.pagerOptions.categoricalPageSize>this._colKeysCalcValues.length*(this._controlObj.model.dataSource.values.length>0?this._controlObj.model.dataSource.values.length:1)?Math.ceil(this._colKeysCalcValues.length*(this._controlObj.model.dataSource.values.length>0?this._controlObj.model.dataSource.values.length:1)/this._controlObj.model.dataSource.pagerOptions.categoricalPageSize):this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage,this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage=0==this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage?1:this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage,this._controlObj._seriesCurrentPage=this._controlObj.model.dataSource.pagerOptions.seriesCurrentPage,this._controlObj._categCurrentPage=this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage;var a=this._controlObj.model.dataSource.pagerOptions.seriesCurrentPage*this._controlObj.model.dataSource.pagerOptions.seriesPageSize-this._controlObj.model.dataSource.pagerOptions.seriesPageSize,i=Math.ceil((this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage*this._controlObj.model.dataSource.pagerOptions.categoricalPageSize-this._controlObj.model.dataSource.pagerOptions.categoricalPageSize)/(this._controlObj.model.dataSource.values.length>0?this._controlObj.model.dataSource.values.length:1)),l=a+this._controlObj.model.dataSource.pagerOptions.seriesPageSize,r=Math.ceil(this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage*this._controlObj.model.dataSource.pagerOptions.categoricalPageSize/(this._controlObj.model.dataSource.values.length>0?this._controlObj.model.dataSource.values.length:1));i=(this._controlObj.model.dataSource.pagerOptions.categoricalCurrentPage-1)*this._controlObj.model.dataSource.pagerOptions.categoricalPageSize%this._controlObj.model.dataSource.values.length>0?i-1:i;for(e=a;e<l;e++)t.push(this._rowKeysCalcValues[e]);for(t=this._spanCalculation(t),this._rowKeysCalcValues=$.extend(!0,[],t),t=[],e=i;e<r;e++)t.push(this._colKeysCalcValues[e]);t=this._spanCalculation(t),this._colKeysCalcValues=$.extend(!0,[],t)},_spanCalculation:function(e){for(var t,a,i,l,r=0;r<e.length;r++)if(e.length>0&&!ej.isNullOrUndefined(e[r])&&!ej.isNullOrUndefined(e[r].uniqueName)){for(t=e[r].uniqueName.split(">#>"),[],e[r].keys[e[r].level]=e[r].keys[0],e[r].span=ej.isNullOrUndefined(e[r].span)?[]:e[r].span,a=ej.isNullOrUndefined(e[r].level)?e[r].span.length>0?e[r].span.length-2:e[r].keys.length-2:e[r].level-1;a>=0;a--){i=r+1,e[r].keys[a]=t[a],e[r].span[a]=1;do{if(!(!ej.isNullOrUndefined(e[i])&&e[i].uniqueName.split(">#>").indexOf(t[a])>-1&&e[i].uniqueName.split(">#>").indexOf(t[a])<e[i].uniqueName.split(">#>").length-1))break;e[r].span[a]++,i++}while(i<e.length)}ej.isNullOrUndefined(e[r].span)||0!=e[r].span.length||delete e[r].span}return l=e.length,$.map(e,function(e,t){if(!ej.isNullOrUndefined(e)&&!ej.isNullOrUndefined(e.span))for(var a=0;a<e.span.length;a++)e.span[a]=e.span[a]>l-t?l-t:e.span[a];return e})},_applyValueSorting:function(e){for(var t,a,i,l,r,n,o,s,d,u,c=[],p=[],m=0,g=0,h="",f=0;f<this._transposeEngine.length;f++)for(c[m]=[],ej.isNullOrUndefined(p[g])&&(p[g]=[]),u=0;u<this._transposeEngine[f].length&&this._valueSorting==Number(this._transposeEngine[f][u].Index.split(",")[0]);u++)("colheader"==this._transposeEngine[f][u].CSS||"calc"==$.trim(this._transposeEngine[f][u].CSS)||"colheader calc"==this._transposeEngine[f][u].CSS||"summary cstot"==this._transposeEngine[f][u].CSS||"summary cstot calc"==this._transposeEngine[f][u].CSS||"summary cgtot"==this._transposeEngine[f][u].CSS||"summary cgtot calc"==this._transposeEngine[f][u].CSS)&&(h=""==h?this._transposeEngine[f][u].Value:h+e.valueSortSettings.headerDelimiters+this._transposeEngine[f][u].Value),"value"==this._transposeEngine[e.dataSource.rows.length][u].CSS&&(c[m].push(this._transposeEngine[f][u]),g=0),"summary value"==this._transposeEngine[e.dataSource.rows.length][u].CSS&&(p[g].push(this._transposeEngine[f][u]),c[m].length>0&&(c[m+=1]=[]),"summary rgtot"!=this._transposeEngine[0][u].CSS&&p[g].length>0&&g++,ej.isNullOrUndefined(p[g])&&(p[g]=[]));for(e.valueSortSettings.headerText=h,e.valueSortSettings.sortOrder=this._sort,m=0;m<c.length;m++)for(f=0;f<c[m].length;f++)for(u=f;u<c[m].length;u++)("descending"==this._sort?this._getNumber(c[m][f].Value)<this._getNumber(c[m][u].Value):this._getNumber(c[m][f].Value)>this._getNumber(c[m][u].Value))&&(i=c[m][u],c[m][u]=c[m][f],c[m][f]=i);for(m=0;m<c.length;m++)0==c[m].length&&c.splice(m,1);for(t=[],f=0;f<this._tRowCnt-1;f++)t[f]={index:0,level:-1};var _=0,v=[],b=[];for(m=p.length-2;m>=0;m--){for(a=0,u=0;u<p[m].length;u++)for(f=u;f<p[m].length;f++)("descending"==this._sort?this._getNumber(p[m][u].Value)<this._getNumber(p[m][f].Value):this._getNumber(p[m][u].Value)>this._getNumber(p[m][f].Value))&&(i=p[m][f],p[m][f]=p[m][u],p[m][u]=i);if(0==_)for(u=0;u<p[m].length;u++)t[a=0==a?this._transposeEngine[_][Number(p[m][u].Index.split(",")[1])].MCnt+e.dataSource.columns.length+1:this._transposeEngine[_][Number(p[m][u].Index.split(",")[1])].MCnt+a+1]={index:Number(p[m][u].Index.split(",")[1]),level:_},v[u]==undefined&&(v[u]={}),v[u].end=Number(p[m][u].Index.split(",")[1]),v[u].start=Number(p[m][u].Index.split(",")[1])-this._transposeEngine[_][Number(p[m][u].Index.split(",")[1])].MCnt;else{for(l=[],r=0,s=0;s<v.length;s++){for(l=[],u=0;u<p[m].length;u++)Number(p[m][u].Index.split(",")[1])>v[s].start&&Number(p[m][u].Index.split(",")[1])<v[s].end&&l.push(p[m][u]);for(u=0;u<l.length;u++)t[a=0==a?this._transposeEngine[_][Number(l[u].Index.split(",")[1])].MCnt+e.dataSource.columns.length+1:this._transposeEngine[_][Number(l[u].Index.split(",")[1])].MCnt+a+1]={index:Number(l[u].Index.split(",")[1]),level:_},b[r]==undefined&&(b[r]={}),b[r].end=Number(l[u].Index.split(",")[1]),b[r].start=Number(l[u].Index.split(",")[1])-this._transposeEngine[_][Number(l[u].Index.split(",")[1])].MCnt,r++;for(;a<this._tRowCnt-2&&t[a].level>t[a+1].level;)a++;a--}v=jQuery.extend(!0,[],b)}_++}if(1==p.length&&p[0].length>0)for(n=e.dataSource.columns.length+1,f=0;f<c[0].length;f++)t[n]={index:Number(c[0][f].Index.split(",")[1])},n++;for(o=e.dataSource.columns.length+1,s=0;s<v.length;s++)for(m=0;m<c.length;m++)if(Number(c[m][0].Index.split(",")[1])>=v[s].start&&Number(c[m][0].Index.split(",")[1])<=v[s].end){for(u=0,f=v[s].start;f<v[s].end;f++)t[o]={index:Number(c[m][u].Index.split(",")[1])},u++,o++;for(o++;0!=t[o].index&&o<=t.length;)o++}for(d=[],f=0;f<e.dataSource.columns.length+1;f++)t[f]={index:f};for(f=0;f<t.length-1;f++)d.push(this._gridMatrix[t[f].index]);for(d.push(this._gridMatrix[f]),f=0;f<this._gridMatrix.length&&this._gridMatrix[f]!=undefined&&d[f]!=undefined;f++)for(u=0;u<this._gridMatrix[f].length&&this._gridMatrix[f][u]!=undefined;u++)this._gridMatrix[f][u]!=undefined&&d[f][u]!=undefined&&(d[f][u].Index=this._gridMatrix[f][u].Index);for(u=0;u<e.dataSource.rows.length-1;u++){var C=e.dataSource.columns.length+1,S=0,y=(m=0,!1);for(f=e.dataSource.columns.length+(e.dataSource.values.length>0?1:0);f<d.length;f++)if(d[f]!=undefined&&d[f][u]!=undefined&&"rowheader"==d[f][u].CSS&&d[f][u].RowSpan!=undefined&&(y=!0,S=S>d[f][u].RowSpan?S:d[f][u].RowSpan),d[f]!=undefined&&d[f][u]!=undefined&&"summary rstot"==d[f][u].CSS&&y&&!ej.isNullOrUndefined(d[C])){for(y=!1;d[C]==undefined||d[C][u]==undefined;)C++;d[C][u].RowSpan=S,S=0,0,C=f+1,m++}}this._gridMatrix=d,this._transposeEngineCreation()},_transposeEngineCreation:function(){var e,t,a;for(this._tColCnt=this._isPaging&&this._gridMatrix.length>0?!ej.isNullOrUndefined(this._gridMatrix[0])&&this._gridMatrix[0].length>0?this._gridMatrix[0].length+1:this._gridMatrix[this._gridMatrix.length-1].length+1:this._tColCnt,e=0;e<this._tRowCnt-1;e++)for(t=0;t<this._tColCnt-1;t++)this._transposeEngine[t]==undefined&&(this._transposeEngine[t]=[]),this._gridMatrix[e]!=undefined&&this._gridMatrix[e][t]!=undefined?(a="string"==typeof this._gridMatrix[e][t]||"number"==typeof this._gridMatrix[e][t]||"object"==typeof this._gridMatrix[e][t]?0==this._gridMatrix[e][t].Value?this._gridMatrix[e][t].Value:this._gridMatrix[e][t].Value==undefined?"":ej.isNullOrUndefined(this._gridMatrix[e][t].valueText)?this._gridMatrix[e][t].Value:this._gridMatrix[e][t].valueText:"",this._transposeEngine[t][e]={Index:t+","+e,CSS:this._gridMatrix[e][t].CSS,Value:"string"==typeof a&&a.indexOf("%####%")>-1?a.replace("%####%",""):a,State:this._gridMatrix[e][t].State,RowSpan:this._gridMatrix[e][t].RowSpan!=undefined?this._gridMatrix[e][t].RowSpan:1,ColSpan:this._gridMatrix[e][t].ColSpan!=undefined?this._gridMatrix[e][t].ColSpan:1,Info:this._gridMatrix[e][t].Info,Span:"None",Expander:this._gridMatrix[e][t].Expander,MCnt:this._gridMatrix[e][t].MCnt!=undefined?this._gridMatrix[e][t].MCnt:1}):this._gridMatrix[e]!=undefined&&(this._transposeEngine[t][e]={Index:t+","+e,CSS:"none",Value:"",State:0,RowSpan:1,ColSpan:1,Info:"",Span:"None",Expander:0})},_filterKeyValues:function(e){var t=this;return $.grep(e,function(e){for(var a=!1,i=0;i<(!ej.isNullOrUndefined(e.uniqueName)&&e.uniqueName.split(">#>").length)&&(a=$.inArray(e.uniqueName.split(">#>")[i],t._advancedFilterInfo)>-1||a,!(a=$.inArray(e.uniqueName,t._advancedFilterInfo)>-1||a));i++);if(!a)return e})},_getFilteredIndex:function(e,t,a,i){return $.map(t,function(t,l){if(e.length>0&&i[a].keys.length>0&&e[i[a].keys.length-1].advancedFilter&&e[i[a].keys.length-1].advancedFilter.length>0&&(e[i[a].keys.length-1].advancedFilter[0].measure==t.fieldName||e[i[a].keys.length-1].advancedFilter[0].name==t.fieldName))return l})[0]},_applyValueFilter:function(e,t){var a,i,l=!1;if(e.length>0&&!ej.isNullOrUndefined(t))switch(t=this._isNumber(t)?t:ej.parseFloat(t,this._locale),a=e[0].valueFilterOperator,i=e[0].values,a.toLowerCase()){case"equals":l=!(t==JSON.parse(e[0].values[0]));break;case"notequals":l=!(t!=JSON.parse(e[0].values[0]));break;case"greaterthan":l=!(t>JSON.parse(e[0].values[0]));break;case"greaterthanorequalto":l=!(t>=JSON.parse(e[0].values[0]));break;case"lessthan":l=!(t<JSON.parse(e[0].values[0]));break;case"lessthanorequalto":l=!(t<=JSON.parse(e[0].values[0]));break;case"between":l=!(t>JSON.parse(i[0])&&t<JSON.parse(i[1]));break;case"notbetween":l=!!(t>JSON.parse(i[0])&&t<JSON.parse(i[1]));break;default:l=!(t==JSON.parse(e[0].values[0]))}return l},_applyLabelFilter:function(e,t){if(e.length>0){var a=e[0].labelFilterOperator,i=e[0].values,l=!1;switch(t=ej.isNullOrUndefined(t)?"":t.toString(),a.toLowerCase()){case"equals":l=!(t.toLowerCase()==i[0].toLowerCase());break;case"notequals":l=t.toLowerCase()==i[0].toLowerCase();break;case"contains":l=!(t.toLowerCase().indexOf(i[0].toLowerCase())>-1);break;case"notcontains":l=t.toLowerCase().indexOf(i[0].toLowerCase())>-1;break;case"beginswith":l=!(0==t.toLowerCase().indexOf(i[0].toLowerCase()));break;case"notbeginswith":l=0==t.toLowerCase().indexOf(i[0].toLowerCase());break;case"endswith":l=ej.isNullOrUndefined(t.toLowerCase().match(i[0].toLowerCase()+"$"));break;case"notendswith":l=!ej.isNullOrUndefined(t.toLowerCase().match(i[0].toLowerCase()+"$"));break;case"greaterthan":l=!(t.toLowerCase()>i[0].toLowerCase());break;case"greaterthanorequalto":l=!(t.toLowerCase()>=i[0].toLowerCase());break;case"lessthan":l=!(t.toLowerCase()<i[0].toLowerCase());break;case"lessthanorequalto":l=!(t.toLowerCase()<=i[0].toLowerCase());break;case"between":l=!(t.toLowerCase()>i[0].toLowerCase()||t.toLowerCase()<i[1].toLowerCase());break;case"notbetween":l=!!(t.toLowerCase()>i[0].toLowerCase()||t.toLowerCase()<i[1].toLowerCase());break;default:l=!(t.toLowerCase().indexOf(i[0].toLowerCase())>-1)}return l}},getMembers:function(e,t){var a,i,l;if(ej.isNullOrUndefined(t))return ej.isNullOrUndefined(this._fieldMembers)?[]:ej.isNullOrUndefined(this._fieldMembers[e])?[]:this._fieldMembers[e];for(a={},i=0;i<t.length;i++)l=t[i],$.each(l,function(e,t){ej.isNullOrUndefined(a[e])?a[e]=[t]:a[e].indexOf(t)<0&&a[e].push(t)});return a[e]},_powerFunction:function(e){if(e.indexOf("^")>-1){for(var t=[];e.indexOf("(")>-1;)e=e.replace(/(\([^\(\)]*\))/g,function(e,a){return t.push(a),"~"+(t.length-1)});for(t.push(e),e="~"+(t.length-1);e.indexOf("~")>-1;)e=e.replace(new RegExp("~(\\d+)","g"),function(e,a){return t[a].replace(/(\w*)\^(\w*)/g,"Math.pow($1,$2)")})}return e},_calculatedFieldSummaryValue:function(index,calValue,dataSource){var formula,i,value,oldValue,newValue;if(1==dataSource.values[index].isCalculatedField){for(formula=dataSource.values[index].formula.replace(/\s/g,""),i=0;i<dataSource.values.length;i++)1!=dataSource.values[i].isCalculatedField&&(value=ej.globalize.parseFloat(null==calValue[i]?"0":"date"==dataSource.values[i].format?this._dateToInt(calValue[i].toString()).toString():"time"==dataSource.values[i].format?this._dateToInt(new Date("1900",calValue[i].toString().split(":")[0],calValue[i].toString().split(":")[1],calValue[i].toString().split(":")[2].split(" ")[0]).toString()).toString():calValue[i].toString(),this._locale),formula=formula.replace(new RegExp(dataSource.values[i].fieldName,"g"),"percentage"==dataSource.values[i].format&&0!=value?value<0?"("+value/100+")":value:value<0?"("+value+")":value));return formula.indexOf("^")>-1&&(formula=this._powerFunction(formula)),oldValue=!isNaN(eval(formula))&&isFinite(eval(formula))?this._getReflectedValue({calcField:eval(formula)},"calcField",dataSource.values[index].format,dataSource.values[index].formatString):null==dataSource.values[index].format?0:"0",newValue=null==dataSource.values[index].format?0:"0",this._getSummaryValue(oldValue,newValue,1,"count"==this._summaryTypes[index]?"sum":this._summaryTypes[index],dataSource.values[index].format,dataSource.values[index].formatString)}},_sortHeaders:function(e,t,a){for(var i,l=[],r=[],n=0,o=t[a].sortOrder!=ej.PivotAnalysis.SortOrder.None?ej.isNullOrUndefined(t[a].format)?ej.DataManager(e).executeLocal(ej.Query().sortBy("keys."+a,null!=t[a].sortOrder&&t[a].sortOrder==ej.PivotAnalysis.SortOrder.Descending?ej.sortOrder.Descending:ej.sortOrder.Ascending,!1)):this._getSortedHeaders(e,t,a):e;n<o.length;)i=o[n].keys[a],(l=$.grep(o,function(e){return e.keys[a]==i})).length>1&&a+1<o[n].keys.length&&(l=this._sortHeaders(l,t,a+1)),r=r.concat(l),n+=l.length;return r},_getSortedHeaders:function(e,t,a){return t[a].sortOrder==ej.PivotAnalysis.SortOrder.Descending?e.sort(function(e,i){return ej.PivotAnalysis._formatToInt(i.keys[a],ej.isNullOrUndefined(t[a].format)?null:t[a].format,ej.isNullOrUndefined(t[a].formatString)?null:t[a].formatString)-ej.PivotAnalysis._formatToInt(e.keys[a],ej.isNullOrUndefined(t[a].format)?null:t[a].format,ej.isNullOrUndefined(t[a].formatString)?null:t[a].formatString)}):e.sort(function(e,i){return ej.PivotAnalysis._formatToInt(e.keys[a],ej.isNullOrUndefined(t[a].format)?null:t[a].format,ej.isNullOrUndefined(t[a].formatString)?null:t[a].formatString)-ej.PivotAnalysis._formatToInt(i.keys[a],ej.isNullOrUndefined(t[a].format)?null:t[a].format,ej.isNullOrUndefined(t[a].formatString)?null:t[a].formatString)})},_isValidTime:function(e){var t=e.indexOf(":")>-1?e.split(":"):[];return 3==t.length&&(t[3]=t[2].indexOf(" ")>-1?t[2].split(" ")[1]:"AM",t[2]=t[2].indexOf(" ")>-1?t[2].split(" ")[0]:t[2],!(!(Number(t[0])>-1&&Number(t[0])<13&&Number(t[1])>-1&&Number(t[1])<61&&jQuery.isNumeric(t[2]))||"AM"!=t[3]&&"PM"!=t[3]))},_getNumber:function(e,t){return ej.isNullOrUndefined(e)||(jQuery.isNumeric(e.toString().replace(/[,.]/g,""))?(e=e.toString().replace(/[,]/g,","==ej.preferredCulture(this._locale).numberFormat[","]?"":"~").replace(/[.]/g,"."==ej.preferredCulture(this._locale).numberFormat["."]?".":""),e=Number(e.toString().replace(/[~]/g,"."))):e=this._isValidTime(e)?this._formatToInt(e,"time",t):ej.isNullOrUndefined(ej.parseDate(e,t==undefined?"MM/dd/yyyy":t))?-1!=e.indexOf("/")&&2==e.split("/")?this._formatToInt(e,"fraction",undefined):$.trim(e).indexOf("%")==$.trim(e).length-1?Number(e.replace(/[^\d.-]/g,""))/100:/[a-zA-Z]/.test(e)?1:Number(e.replace(/[^\d.-]/g,"")):this._formatToInt(e,"date",t)),e},_setFormat:function(e,t,a){switch(t){case"percentage":var i=jQuery.isNumeric(e)?1:100;e="string"==typeof e?$.trim(e.toString().split(ej.preferredCulture(this._locale).numberFormat[","]).join("").replace(",",".").replace(ej.preferredCulture(this._locale).numberFormat.percent.symbol,"")):e,e=jQuery.isNumeric(e)?e:0,e=ej.widgetBase.formatting(a||"{0:P}",""==e?0:e/i,this._locale);break;case"decimal":case"number":e="string"==typeof e?e.toString().split(ej.preferredCulture(this._locale).numberFormat[","]).join("").replace(",","."):e,e=jQuery.isNumeric(e)?e:0,e=ej.widgetBase.formatting(a||"{0:N}",e,this._locale);break;case"currency":e="string"==typeof e?$.trim(e.toString().split(ej.preferredCulture(this._locale).numberFormat[","]).join("").replace(",",".").replace(ej.preferredCulture(this._locale).numberFormat.currency.symbol,"")):e,e=jQuery.isNumeric(e)?e:0,e=ej.widgetBase.formatting(a||"{0:C2}",""==e?0:e,this._locale);break;case"date":jQuery.isNumeric(e)?(e=new Date(864e5*(Number(e)-2)+new Date("01/01/1900").getTime()),this._isDateTime(e)&&(e=ej.widgetBase.formatting("{0:"+(a==undefined?"MM/dd/yyyy":a)+"}",e,this._locale))):"Invalid Date"!=new Date(e)?(e=new Date(e),e=ej.widgetBase.formatting("{0:"+(a==undefined?"MM/dd/yyyy":a)+"}",e,this._locale)):(e=new Date(864e5*(Number(0)-2)+new Date("01/01/1900").getTime()),e=ej.widgetBase.formatting("{0:"+(a==undefined?"MM/dd/yyyy":a)+"}",e,this._locale));break;case"scientific":e="string"==typeof e?e.split(ej.preferredCulture(this._locale).numberFormat[","]).join("").replace(",","."):e,e=jQuery.isNumeric(e)?e:0,e=Number(e).toExponential(2).replace("e","E");break;case"accounting":e=this._toAccounting(e,a||"{0:C2}",this._locale);break;case"time":jQuery.isNumeric(e)?(e=new Date(864e5*(Number(e)-2)+new Date("01/01/1900").getTime()),this._isDateTime(e)&&(e=ej.widgetBase.formatting("{0:h:mm:ss tt}",e,this._locale))):this._isValidTime(e)?e=ej.widgetBase.formatting("{0:h:mm:ss tt}",e,this._locale):(e=new Date(864e5*(Number(0)-2)+new Date("01/01/1900").getTime()),e=ej.widgetBase.formatting("{0:h:mm:ss tt}",e,this._locale));break;case"fraction":e="string"==typeof e?e.split(ej.preferredCulture(this._locale).numberFormat[","]).join("").replace(",","."):e,e="numerator"in(e=jQuery.isNumeric(e)?this._toFraction(e):this._toFraction(0))?e.integer+" "+e.numerator+"/"+e.denominator:e.integer}return e},_getReflectedValue:function(e,t,a,i){var l=$(e).prop(t);return null==l?l:(jQuery.isNumeric(l)||"Invalid Date"!=new Date(l)||(a=i=null),this._setFormat(l,a,i))},_formatToInt:function(value,format,formatString){var time;switch(format){case"date":value=null!=ej.parseDate(value.toString(),formatString==undefined?"MM/dd/yyyy":formatString,this._locale)?this._dateToInt(ej.parseDate(value,formatString==undefined?"MM/dd/yyyy":formatString,this._locale)):value;break;case"percentage":value=0!=value?ej.globalize.parseFloat(value.toString(),this._locale)/100:Number(value);break;case"currency":case"accounting":value=0!=value?ej.globalize.parseFloat(ej.globalize.format(value.toString(),"c",this._locale),this._locale):Number(value);break;case"decimal":case"number":value=0!=value?ej.globalize.parseFloat(value.toString(),this._locale):Number(value);break;case"scientific":value=0!=value||0==value?parseFloat(value):Number(value);break;case"time":this._isNumber(value)||(time=value.toString().split(":"),time=new Date("1900",time[0],time[1],time[2].split(" ")[0]).toString(),value=this._dateToInt(time));break;case"fraction":var temp1=parseFloat(value.toString().split(" ")[0]),temp2=eval(value.toString().split(" ")[1])!=undefined?parseFloat(eval(value.toString().split(" ")[1])):parseFloat(0),value=0!=value?temp1+temp2:Number(value)}return value},_isDateTime:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.valueOf())},_toAccounting:function(e,t,a){var i,l,r,n,o=ej.preferredCulture(a).numberFormat,s=o.currency.symbol;return val=ej.widgetBase.formatting(t,e,a),val=val.indexOf(" ")>-1?val.split(" ").join(""):val,r=val.replace(s,""),n=jQuery.isNumeric(r.toString().split(o[","]).join("").replace(",","."))?val.indexOf(s):0,r=jQuery.isNumeric(r.toString().split(",").join(""))?r:"0.00",!n||Number(r)<0&&1===n?(i=s,l=r):(i=r,l=s),i+"   "+l},_toFraction:function(e){if(this._isNumber(e)){var t=e.toString(),a=t.split(".")[0],i=t.split(".")[1];if(!i)return{integer:e};var l=(+i).toString(),r=this._getPlaceValue(i,l),n=this._getGCD(l,r);return{integer:a,numerator:Number(l)/n,denominator:Number(r)/n}}return null},_isNumber:function(e){return e-parseFloat(e)>=0},_getGCD:function(e,t){return e=Number(e),(t=Number(t))?this._getGCD(t,e%t):e},_getPlaceValue:function(e,t){var a=e.indexOf(t)+t.length;return"1"+Array(a+1).join("0")},_cellEdit:function(e,t,a,i){return $.each(this._editCellsInfo,function(l,r){if(e==(ej.isNullOrUndefined(r.row)&&ej.isNullOrUndefined(r.column)?"":ej.isNullOrUndefined(r.row)?r.column:ej.isNullOrUndefined(r.column)?r.row:r.row+">#>"+r.column)&&a==parseInt(r.value.split("#")[0]))return t=ej.PivotAnalysis._setFormat(ej.isNullOrUndefined(i.format)?jQuery.isNumeric(r.value.split("#")[1].toString().split(",").join(""))?parseFloat(r.value.split("#")[1].toString().split(",").join("")):0:r.value.split("#")[1],i.format,i.formatString),!1}),t},_isMemberExist:function(e,t,a,i){var l,r,n,o,s,d;switch(e){case"row":if(r=!1,(n=0==this._rowKeysCalcValues.length?0:this._rowMembers[t.uniqueName])>-1&&(r=!0,l=n),0==this._rowKeysCalcValues.length&&(this._rowKeysCalcValues.push(t),this._rowMembers[t.uniqueName]=this._rowKeysCalcValues.length-1),r)for(o=0;o<a.keys.length;o++){if(null==this._rowKeysCalcValues[l].value){this._rowKeysCalcValues[l].value=a;break}this._rowKeysCalcValues[l].value.keys[o]+=a.keys[o]}else this._rowKeysCalcValues.push(t),this._rowMembers[t.uniqueName]=this._rowKeysCalcValues.length-1;break;case"column":if(r=!1,(n=0==this._colKeysCalcValues.length?0:this._colMembers[t.uniqueName])>-1&&(r=!0,l=n),0==this._colKeysCalcValues.length&&(i.columns.length>0||i.values.length>0)&&(this._colKeysCalcValues.push(t),this._colMembers[t.uniqueName]=this._colKeysCalcValues.length-1),r)for(o=0;o<a.keys.length;o++){if(null==this._colKeysCalcValues[l].value){this._colKeysCalcValues[l].value=a;break}this._colKeysCalcValues[l].value.keys[o]+=a.keys[o]}else(i.columns.length>0||i.values.length>0)&&(this._colKeysCalcValues.push(t),this._colMembers[t.uniqueName]=this._colKeysCalcValues.length-1);break;case"calc":if(r=!1,(n=0==this._tableKeysCalcValues.length?0:this._calcMembers[t.uniqueName])>-1&&(r=!0,l=n),0==this._tableKeysCalcValues.length&&(this._tableKeysCalcValues.push(t),this._calcMembers[t.uniqueName]=this._tableKeysCalcValues.length-1),r)for(o=0;o<a.keys.length;o++){if(null==this._tableKeysCalcValues[l].value){for(this._tableKeysCalcValues[l].value=a,this._tableKeysCalcValues[l].value.count=1,d=0;d<a.keys.length;d++)this._summaryTypes[d]==ej.PivotAnalysis.SummaryType.Count&&(this._tableKeysCalcValues[l].value.keys[d]=this._tableKeysCalcValues[l].value.count);break}s=i.values[o],this._tableKeysCalcValues[l].value.uniqueName[o]==a.uniqueName[o]&&(ej.isNullOrUndefined(s.formatString)||"single-entry"!=s.formatString.toLowerCase())||(this._tableKeysCalcValues[l].value.uniqueName[o]=" "),0==o&&this._tableKeysCalcValues[l].value.count++,1!=i.values[o].isCalculatedField&&(this._tableKeysCalcValues[l].value.keys[o]=this._getSummaryValue(this._tableKeysCalcValues[l].value.keys[o],a.keys[o],this._tableKeysCalcValues[l].value.count,this._summaryTypes[o],i.values[o].format,i.values[o].formatString))}else for(this._tableKeysCalcValues.push(t),this._calcMembers[t.uniqueName]=this._tableKeysCalcValues.length-1,this._tableKeysCalcValues[this._tableKeysCalcValues.length-1].value=a,d=0;d<a.keys.length;d++)this._summaryTypes[d]==ej.PivotAnalysis.SummaryType.Count&&(this._tableKeysCalcValues[this._tableKeysCalcValues.length-1].value.keys[d]=1),this._tableKeysCalcValues[this._tableKeysCalcValues.length-1].value.count=1}},_getSummaryValue:function(e,t,a,i,l,r){if(t=ej.isNullOrUndefined(t)?null:0==t?0:t,e=ej.isNullOrUndefined(e)?null:0==e?0:e,!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(e)){switch(e=this._formatToInt(e,l,r),t=this._formatToInt(t,l,r),i){case ej.PivotAnalysis.SummaryType.Sum:e+=t;break;case ej.PivotAnalysis.SummaryType.Average:e=(e*(a-1)+t)/a,Math.floor(e)!=e&&(e=Number(e.toFixed(2)));break;case ej.PivotAnalysis.SummaryType.Min:e=1==a?t:Math.min(e,t);break;case ej.PivotAnalysis.SummaryType.Max:e=1==a?t:Math.max(e,t);break;case ej.PivotAnalysis.SummaryType.Count:e=a}switch(l){case"percentage":e=ej.widgetBase.formatting(r||"{0:P}",e,this._locale);break;case"decimal":case"number":e=ej.widgetBase.formatting(r||"{0:N}",e,this._locale);break;case"date":e=new Date(864e5*(Number(e)-2)+new Date("01/01/1900").getTime()),this._isDateTime(e)&&(e=ej.widgetBase.formatting("{0:"+(r==undefined?"MM/dd/yyyy":r)+"}",e,this._locale));break;case"currency":e=ej.widgetBase.formatting(r||"{0:C2}",e,this._locale);break;case"scientific":e=e.toExponential(2).replace("e","E");break;case"accounting":e=this._toAccounting(e,r||"{0:C2}",this._locale);break;case"time":e=new Date(864e5*(Number(e)-2)+new Date("01/01/1900").getTime()),this._isDateTime(e)&&(e=ej.widgetBase.formatting("{0:h:mm:ss tt}",e,this._locale));break;case"fraction":e="numerator"in(e=this._toFraction(e))?e.integer+" "+e.numerator+"/"+e.denominator:e.integer}}return e},_dateToInt:function(e){var t=new Date("01/01/1900");return((this._isDateTime(e)?e:new Date(e)).getTime()-t.getTime())/864e5+2},_insertTotalHeader:function(e,t){var a,i,l,r,n;if(e.length<=1)t.push({cellType:"RGTot",keys:["Grand Total"],tot:"sub"});else{for(a=-1,i=e.length-2;i>=0;i--)if(a++,(l=t.length)>0){r=t[0].uniqueName.split(">#>"),t[0].keys[a],r=r.slice(0,i+1).join(">#>");var o="",s=0,d="";for(n=1;n<=l;n++)t[n]!=undefined?(o=(o=t[n].uniqueName.split(">#>")).slice(0,i+1).join(">#>"),d=t[n].keys[i+1]):o=undefined,o!=undefined&&-1==o.indexOf("%####%")?r!=undefined&&o!=r&&(t.splice(n,0,{keys:[r.split(">#>")[i]+" Total%####%"],cellType:"SubTot",uniqueName:r,level:i,mSpan:n-s}),t[s].span==undefined&&(t[s].span=[]),t[s].span[i]=n-s,l++,r=o,s=++n,d):r!=undefined&&(t.splice(n,0,{keys:[r.split(">#>")[i]+" Total%####%"],cellType:"SubTot:",uniqueName:r,level:i,mSpan:n-s}),t[s].span==undefined&&(t[s].span=[]),t[s].span[i]=n-s,l++,r=o,s=++n,d)}t.push({cellType:"RGTot",keys:["Grand Total"]})}},_isPreviousLevelEqual:function(e,t,a,i){for(var l=i-1;l>=0;l--)return e[t].keys[l]!=e[a].keys[l]},_calculateValues:function(e){var t,a,i=this._rowKeysCalcValues.length+(e.values.length>0?1:0),l=0==this._colKeysCalcValues.length?1:this._colKeysCalcValues.length*(0==e.values.length?1:e.values.length)+1-(this._isPaging&&e.values.length>0&&e.pagerOptions.categoricalPageSize<e.values.length*this._colKeysCalcValues.length?e.values.length-(e.pagerOptions.categoricalCurrentPage*e.pagerOptions.categoricalPageSize%e.values.length==0?e.pagerOptions.categoricalCurrentPage*e.pagerOptions.categoricalPageSize:e.pagerOptions.categoricalCurrentPage*e.pagerOptions.categoricalPageSize%e.values.length):0);this._isPaging&&(0==e.columns.length?ej.PivotAnalysis._colHdrLen=0:$.each(this._colKeysCalcValues,function(e,t){!ej.isNullOrUndefined(t)&&t.keys.length>ej.PivotAnalysis._colHdrLen&&(ej.PivotAnalysis._colHdrLen=t.keys.length)}),0==e.rows.length?ej.PivotAnalysis._rowHdrLen=0:$.each(this._rowKeysCalcValues,function(e,t){!ej.isNullOrUndefined(t)&&t.keys.length>ej.PivotAnalysis._rowHdrLen&&(ej.PivotAnalysis._rowHdrLen=t.keys.length)})),this._gridMatrix=new Array(i+(this._isPaging?this._rowHdrLen:e.rows.length)+1),this._populateRowHeaders(e,i+(this._isPaging?this._rowHdrLen:e.rows.length)+1,0==e.rows.length?1:this._isPaging?this._rowHdrLen:e.rows.length),t=(this._isPaging?this._colHdrLen:e.columns.length)+1,a=(this._isPaging&&e.pagerOptions.categoricalPageSize+1<l?e.pagerOptions.categoricalPageSize+1:l)+(0==e.rows.length?1:this._isPaging?this._rowHdrLen:e.rows.length),this._populateColumnHeaders(e,t,a),this._advancedFilterInfo=[],e.values.length>0&&this._populateCalcTable(e),this._tRowCnt=i+t,this._tColCnt=a},_populateRowHeaders:function(e,t,a){var i,l,r,n,o;if(0!=this._rowKeysCalcValues.length){for(i=1==this._colKeysCalcValues.length&&"RGTot"==this._colKeysCalcValues[0].cellType?1+(e.values.length>0?1:0):(this._isPaging?this._colHdrLen:e.columns.length)+(e.values.length>0?1:0),this._gridMatrix=[],"",l=0;l<this._rowKeysCalcValues.length;l++){this._rowKeysCalcValues[l];var s=0,d=0,u=0,c=0;if(this._rowKeysCalcValues[l].keys!=undefined&&0!=this._rowKeysCalcValues[l].keys.length)for(this._gridMatrix[i]=new Array(a),c=this._rowKeysCalcValues[l].keys.length,r=0;r<c;r++)this._rowKeysCalcValues[l].cellType!=undefined&&ej.isNullOrUndefined(this._rowKeysCalcValues[l].span)?this._rowKeysCalcValues[l].cellType.indexOf("SubTot")>-1?(d=0==s?this._rowKeysCalcValues[l].level+s:s,u=a-this._rowKeysCalcValues[l].level,this._cellType="summary rstot"):(this._cellType="summary rgtot",d=s,u=this._isPaging?this._rowHdrLen:e.rows.length):(this._cellType="rowheader",d=s,u=1),n=c>1&&c-r>1?1:ej.isNullOrUndefined(this._rowKeysCalcValues[l].expander)?0:2,o=$.extend(!0,[],this._rowKeysCalcValues[l].keys),this._gridMatrix[i][d]={Index:d+","+i,CSS:this._cellType,Value:this._rowKeysCalcValues[l].keys[r],State:n,RowSpan:this._rowKeysCalcValues[l].span!=undefined?this._rowKeysCalcValues[l].span[r]:1,ColSpan:u,Info:o.splice(0,r+1).join(">#>"),Span:"None",Expander:this._rowKeysCalcValues[l].span!=undefined?this._rowKeysCalcValues[l].span[r]!=undefined?1:ej.isNullOrUndefined(this._rowKeysCalcValues[l].expander)?0:1:ej.isNullOrUndefined(this._rowKeysCalcValues[l].expander)?0:2,MCnt:this._rowKeysCalcValues[l].mSpan!=undefined&&ej.isNullOrUndefined(this._rowKeysCalcValues[l].span)?this._rowKeysCalcValues[l].mSpan:0},this._rowKeysCalcValues[l].level-r==1&&delete this._rowKeysCalcValues[l].span,s++;i++}this._cellType=""}},_populateColumnHeaders:function(e,t){var a,i,l,r,n,o,s;if(0!=this._colKeysCalcValues.length){var d,u,c,p,m,g,h=d=0==e.rows.length?1:this._isPaging?this._rowHdrLen:e.rows.length,f=0==e.values.length?1:e.values.length,_=u=0,v=1==this._colKeysCalcValues.length&&"RGTot"==this._colKeysCalcValues[0].cellType?1:this._isPaging?this._colHdrLen:e.columns.length;for(a=0;a<this._colKeysCalcValues.length;a++){for(_=0,c=0,p=0,0,m=f,g=0,this._isPaging&&e.values.length>0&&(g=(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length,0==a?m=(m=(1==e.pagerOptions.categoricalCurrentPage&&e.values.length>e.pagerOptions.categoricalPageSize?e.pagerOptions.categoricalPageSize:e.values.length)-(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length)<1?e.values.length:e.values.length>e.pagerOptions.categoricalPageSize&&m>e.pagerOptions.categoricalPageSize?e.pagerOptions.categoricalPageSize:m:this._colKeysCalcValues.length-a==1?m=(m=e.pagerOptions.categoricalCurrentPage*e.pagerOptions.categoricalPageSize%e.values.length)<1||e.pagerOptions.categoricalPageSize>=e.values.length*this._colKeysCalcValues.length-(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length?e.values.length:m:m=e.values.length),this._colKeysCalcValues[a].keys,this._gridMatrix[_]==undefined&&(this._gridMatrix[_]=[]),u=this._colKeysCalcValues[a].keys.length,i=0;i<u;i++){for(this._gridMatrix[_]==undefined&&(this._gridMatrix[_]=[]),this._colKeysCalcValues[a].cellType!=undefined&&ej.isNullOrUndefined(this._colKeysCalcValues[a].span)?this._colKeysCalcValues[a].cellType.indexOf("SubTot")>-1?(c=0==_?this._colKeysCalcValues[a].level+_:_,p=t-this._colKeysCalcValues[a].level-1,this._cellType="summary cstot"):(c=_,p=1==this._colKeysCalcValues.length&&"RGTot"==this._colKeysCalcValues[0].cellType?1:this._isPaging?this._colHdrLen:e.columns.length,this._cellType="summary cgtot"):(c=_,p=1,this._cellType="colheader"),l=u>1&&u-i>1?1:ej.isNullOrUndefined(this._colKeysCalcValues[a].expander)?0:2,o=0;o<m;o++)r=$.extend(!0,[],this._colKeysCalcValues[a].keys),this._gridMatrix[c][f*a+o+d-(a>0?g:0)]={Index:h+","+c,CSS:this._cellType,Value:this._colKeysCalcValues[a].keys[i],State:l,ColSpan:o>0?1:this._isPaging&&0==a&&!ej.isNullOrUndefined(this._colKeysCalcValues[a].span)&&this._colKeysCalcValues[a].span[i]>=this._colKeysCalcValues.length?e.pagerOptions.categoricalPageSize:(this._colKeysCalcValues[a].span!=undefined?this._colKeysCalcValues[a].span[i]==undefined?1:this._colKeysCalcValues[a].span[i]:1)*(this._colKeysCalcValues.length-a==1?m:f)-(0==a?g:0),RowSpan:p,Info:r.splice(0,i+1).join(">#>"),Span:"None",Expander:o>0?ej.isNullOrUndefined(this._colKeysCalcValues[a].expander)?0:1:this._colKeysCalcValues[a].span!=undefined&&this._colKeysCalcValues[a].span[i]!=undefined?1:ej.isNullOrUndefined(this._colKeysCalcValues[a].expander)?0:1};this._colKeysCalcValues[a].level-i==1&&delete this._colKeysCalcValues[a].span,_++}if(e.values.length>0)for(o=0;o<m;o++)this._gridMatrix[v]==undefined&&(this._gridMatrix[v]=[]),n=this._isPaging&&e.values.length>0&&0==a?(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length+o:o,this._gridMatrix[v][f*a+o+d-(a>0?g:0)]={Index:f*a+o+d-(a>0?g:0)+","+_,CSS:this._cellType+" calc",Value:e.values[n].fieldCaption==undefined?e.values[n].fieldName:e.values[n].fieldCaption,State:0,ColSpan:1,RowSpan:1,Info:"",Span:"None",Expander:0};h++}if(this._cellType="",this._isPaging&&e.values.length>0&&this._colKeysCalcValues.length>0&&t>1)for(o=0;o<t;o++)for(s=0;s<this._gridMatrix[o].length;s++)!ej.isNullOrUndefined(this._gridMatrix[o][s])&&this._gridMatrix[o][s].ColSpan>this._gridMatrix[o].length-s&&(this._gridMatrix[o][s].ColSpan=this._gridMatrix[o].length-s)}},_populateCalcTable:function(e){var t,a,i,l,r,n,o,s,d,u,c,p,m,g,h,f,_,v,b,C=[],S=null,y=e.values.length,O=this;this._rowTotCalc=[],this._rowTotCalc=[];var P,x=0==e.rows.length?1:this._isPaging?this._rowHdrLen:e.rows.length,N=!1,w=0,M=1==this._colKeysCalcValues.length&&"RGTot"==this._colKeysCalcValues[0].cellType?2:(this._isPaging?this._colHdrLen:e.columns.length)+1,T=M,I=!1,D={};for($.grep(O._tableKeysCalcValues,function(e){D[e.uniqueName]=e}),t=$.grep(this._tableKeysCalcValues,function(e){if(ej.isNullOrUndefined(e.cellType))return e}),$.grep(this._tableKeysCalcValues,function(e){if(!ej.isNullOrUndefined(e.cellType))return e}),f=0;f<this._rowKeysCalcValues.length;f++){for(this._colTotCalc=[],P=x,N=!0,this._gridMatrix[f+M]==undefined&&(this._gridMatrix[f+M]=[]),this._rowTotCalc[w]=[],a=0;a<this._colKeysCalcValues.length;a++){if(C=[],S=null,this._cellType="value",_=this._isPaging&&e.values.length>0&&0==a?(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length:0,v=(v=this._isPaging&&e.values.length>0&&this._colKeysCalcValues.length-a==1&&a>0?e.pagerOptions.categoricalCurrentPage*e.pagerOptions.categoricalPageSize%e.values.length:y)<1||this._isPaging&&e.pagerOptions.categoricalPageSize>=e.values.length*this._colKeysCalcValues.length-(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length?y:v,e.columns.length>0&&e.rows.length>0)if(!O._isPaging||"RGTot"!=O._rowKeysCalcValues[f].cellType&&"RGTot"!=O._colKeysCalcValues[a].cellType){if(i=O._rowKeysCalcValues[f].uniqueName+">#>"+O._colKeysCalcValues[a].uniqueName,l=D[i]){for(s=0;s<l.value.keys.length;s++)C.push(l.value.keys[s]);""!=l.value.uniqueName&&(S=l.value.uniqueName)}}else r=0,$.grep(t,function(t){if("RGTot"==O._rowKeysCalcValues[f].cellType&&"RGTot"==O._colKeysCalcValues[a].cellType||("RGTot"==O._rowKeysCalcValues[f].cellType?t.uniqueName.indexOf(O._colKeysCalcValues[a].uniqueName)>-1:t.uniqueName.indexOf(O._rowKeysCalcValues[f].uniqueName)>-1))for(r++,s=0;s<t.value.keys.length;s++)ej.isNullOrUndefined(C[s])?C.push(t.value.keys[s]):C[s]=e.values[s].isCalculatedField?ej.PivotAnalysis._calculatedFieldSummaryValue(s,C,e):ej.PivotAnalysis._getSummaryValue(C[s],t.value.keys[s],r,"count"==ej.PivotAnalysis._summaryTypes[s]?"sum":ej.PivotAnalysis._summaryTypes[s],e.values[s].format,e.values[s].formatString)});else 0==e.rows.length?O._isPaging?(r=0,$.grep(t,function(t){if("RGTot"==O._colKeysCalcValues[a].cellType||t.uniqueName.indexOf(O._colKeysCalcValues[a].uniqueName)>-1)for(r++,s=0;s<t.value.keys.length;s++)ej.isNullOrUndefined(C[s])?C.push(t.value.keys[s]):C[s]=e.values[s].isCalculatedField?ej.PivotAnalysis._calculatedFieldSummaryValue(s,C,e):ej.PivotAnalysis._getSummaryValue(C[s],t.value.keys[s],r,"count"==ej.PivotAnalysis._summaryTypes[s]?"sum":ej.PivotAnalysis._summaryTypes[s],e.values[s].format,e.values[s].formatString)})):$.grep(O._tableKeysCalcValues,function(e){if(e.uniqueName==O._colKeysCalcValues[a].uniqueName){for(s=0;s<e.value.keys.length;s++)C.push(e.value.keys[s]);""!=e.value.uniqueName&&(S=e.value.uniqueName)}}):O._isPaging?(r=0,$.grep(t,function(t){if("RGTot"==O._rowKeysCalcValues[f].cellType||t.uniqueName.indexOf(O._rowKeysCalcValues[f].uniqueName)>-1)for(r++,s=0;s<t.value.keys.length;s++)ej.isNullOrUndefined(C[s])?C.push(t.value.keys[s]):C[s]=e.values[s].isCalculatedField?ej.PivotAnalysis._calculatedFieldSummaryValue(s,C,e):ej.PivotAnalysis._getSummaryValue(C[s],t.value.keys[s],r,"count"==ej.PivotAnalysis._summaryTypes[s]?"sum":ej.PivotAnalysis._summaryTypes[s],e.values[s].format,e.values[s].formatString)})):$.grep(O._tableKeysCalcValues,function(e){if(e.uniqueName==O._rowKeysCalcValues[f].uniqueName){for(s=0;s<e.value.keys.length;s++)C.push(e.value.keys[s]);""!=e.value.uniqueName&&(S=e.value.uniqueName)}});if(this._editCellsInfo.length>0)for(b=0;b<e.values.length;b++)C[b]=ej.PivotAnalysis._cellEdit(e.columns.length>0&&e.rows.length>0?this._rowKeysCalcValues[f].uniqueName+">#>"+this._colKeysCalcValues[a].uniqueName:0==e.rows.length?this._colKeysCalcValues[a].uniqueName:this._rowKeysCalcValues[f].uniqueName,C[b],b,e.values[b]);if(this._colKeysCalcValues[a].cellType!=undefined&&(this._colKeysCalcValues[a].cellType.indexOf("SubTot")>-1||this._colKeysCalcValues[a].cellType.indexOf("RGTot")>-1)){if(!this._isPaging){for(C=[],S=null,s=0;s<y;s++)for(d=0,r=0,n=P;n<=a*y+x;n++)this._gridMatrix[f+M]!=undefined&&this._gridMatrix[f+M][P+d*y+s]!=undefined&&this._gridMatrix[f+M][P+d*y+s].Value!=undefined&&(C[s]==undefined&&(C[s]=0),r++,C[s]=e.values[s].isCalculatedField?this._calculatedFieldSummaryValue(s,C,e):this._getSummaryValue(C[s],this._gridMatrix[f+M][P+d*y+s].Value,r,"count"==this._summaryTypes[s]?"sum":this._summaryTypes[s],e.values[s].format,e.values[s].formatString)),d++;0,P=(a+1)*y+x,ej.isNullOrUndefined(C)||this._colTotCalc.push({uniqueName:this._colKeysCalcValues[a].uniqueName,level:this._colKeysCalcValues[a].level,value:C}),this._colKeysCalcValues[a-1]!=undefined&&this._colKeysCalcValues[a-1].cellType!=undefined&&this._colKeysCalcValues[a-1].cellType.indexOf("SubTot")>-1&&-1==this._colKeysCalcValues[a-1].cellType.indexOf("RGTot")&&($(this._colTotCalc).filter(function(e,t){return t!=undefined&&t.uniqueName!=undefined&&O._colKeysCalcValues[a].uniqueName!=undefined&&t.level!=undefined&&O._colKeysCalcValues[a].level!=undefined&&0===t.uniqueName.indexOf(O._colKeysCalcValues[a].uniqueName)&&O._colKeysCalcValues[a].level+1==t.level}).map(function(t,a){for(var i=0;i<a.value.length;i++)C[i]=ej.isNullOrUndefined(C[i])?0:C[i],a.value[i]=ej.isNullOrUndefined(a.value[i])?0:a.value[i],e.values[i].isCalculatedField?C[i]=ej.PivotAnalysis._calculatedFieldSummaryValue(i,C,e):C[i]+=a.value[i];return C}),ej.isNullOrUndefined(C)||this._colTotCalc.push({uniqueName:this._colKeysCalcValues[a].uniqueName,level:this._colKeysCalcValues[a].level,value:C}))}this._cellType="summary value"}if(this._colKeysCalcValues[a].cellType!=undefined&&this._colKeysCalcValues[a].cellType.indexOf("RGTot")>-1&&0==C&&(this._isPaging||(C=[],S=null,r=0,$(this._colTotCalc).filter(function(e,t){return t!=undefined&&t!=undefined&&t.level!=undefined&&0==t.level}).map(function(t,a){for(var i=0;i<a.value.length;i++)C[i]=ej.isNullOrUndefined(C[i])?0:C[i],a.value[i]=ej.isNullOrUndefined(a.value[i])?0:a.value[i],r++,C[i]=e.values[i].isCalculatedField?ej.PivotAnalysis._calculatedFieldSummaryValue(i,C,e):ej.PivotAnalysis._getSummaryValue(C[i],a.value[i],r,"count"==O._summaryTypes[i]?"sum":O._summaryTypes[i],e.values[i].format,e.values[i].formatString);return C})),this._cellType="summary value"),this._rowKeysCalcValues[f].cellType!=undefined&&(this._rowKeysCalcValues[f].cellType.indexOf("SubTot")>-1||this._rowKeysCalcValues[f].cellType.indexOf("RGTot")>-1)){if(!this._isPaging){for(C=[],S=null,this._rowKeysCalcValues[f].uniqueName,this._rowKeysCalcValues[f-1]!=undefined&&this._rowKeysCalcValues[f-1].cellType!=undefined&&this._rowKeysCalcValues[f-1].cellType.indexOf("SubTot")>-1&&-1==this._rowKeysCalcValues[f].cellType.indexOf("RGTot")&&(r=0,$(this._rowTotCalc).filter(function(e,t){return t[0]!=undefined&&t[0].uniqueName!=undefined&&O._rowKeysCalcValues[f].uniqueName!=undefined&&t[0].level!=undefined&&O._rowKeysCalcValues[f].level!=undefined&&0===t[0].uniqueName.indexOf(O._rowKeysCalcValues[f].uniqueName)&&O._rowKeysCalcValues[f].level+1==t[0].level}).map(function(t,i){if(i[x+a].length>0){r++;for(var l=0;l<i[x+a].length;l++)C[l]=ej.isNullOrUndefined(C[l])?0:C[l],i[x+a][l]=ej.isNullOrUndefined(i[x+a][l])?0:i[x+a][l],C[l]=e.values[l].isCalculatedField?ej.PivotAnalysis._calculatedFieldSummaryValue(l,C,e):ej.PivotAnalysis._getSummaryValue(C[l],i[x+a][l],r,"count"==O._summaryTypes[l]?"sum":O._summaryTypes[l],e.values[l].format)}return C})),this._rowKeysCalcValues[f].cellType!=undefined&&this._rowKeysCalcValues[f].cellType.indexOf("RGTot")>-1&&(r=0,$(this._rowTotCalc).filter(function(e,t){return t!=undefined&&t[0]!=undefined&&t[0].level!=undefined&&0==t[0].level}).map(function(t,i){if(i[x+a].length>0){r++;for(var l=0;l<i[x+a].length;l++)C[l]=ej.isNullOrUndefined(C[l])?0:C[l],i[x+a][l]=ej.isNullOrUndefined(i[x+a][l])?0:i[x+a][l],C[l]=e.values[l].isCalculatedField?ej.PivotAnalysis._calculatedFieldSummaryValue(l,C,e):ej.PivotAnalysis._getSummaryValue(C[l],i[x+a][l],r,"count"==O._summaryTypes[l]?"sum":O._summaryTypes[l],e.values[l].format,e.values[l].formatString)}return C})),r=1,n=T;n<=f+M;n++){for(o=!1,s=0;s<y;s++)d=0,this._gridMatrix[n]!=undefined&&this._gridMatrix[n][x+a*y+s]!=undefined&&this._gridMatrix[n][x+a*y+s].Value!=undefined&&(C[s]==undefined&&(C[s]=0),o=!0,C[s]=e.values[s].isCalculatedField?this._calculatedFieldSummaryValue(s,C,e):this._getSummaryValue(C[s],this._gridMatrix[n][x+a*y+s].Value,r,"count"==this._summaryTypes[s]?"sum":this._summaryTypes[s],e.values[s].format,e.values[s].formatString)),d++;o&&r++}0,I=!0,N&&(this._rowTotCalc[w][0]={uniqueName:this._rowKeysCalcValues[f].uniqueName,level:this._rowKeysCalcValues[f].level},N=!1),this._rowTotCalc[w][x+a]=C}this._cellType="summary value"}if(e.enableAdvancedFilter){var E=0,j=this._currentFilterVal.fieldName?ej.Pivot.getReportItemByFieldName(this._currentFilterVal.fieldName,e):null;null!=j&&"rows"==j.axis&&(E=this._getFilteredIndex(e.rows,e.values,f,this._rowKeysCalcValues)),ej.isNullOrUndefined(E)||null==j||"rows"==j.axis||(E=this._getFilteredIndex(e.columns,e.values,a,this._colKeysCalcValues)),ej.isNullOrUndefined(E)||(u=this._rowKeysCalcValues[f].keys.length>0&&e.rows.length>0&&e.rows[this._rowKeysCalcValues[f].keys.length-1].advancedFilter&&e.rows[this._rowKeysCalcValues[f].keys.length-1].advancedFilter.length>0&&e.rows[this._rowKeysCalcValues[f].keys.length-1].advancedFilter[0].advancedFilterType==ej.Pivot.AdvancedFilterType.ValueFilter?1:null,c=!(!j||null==j||null==u||e.rows[this._rowKeysCalcValues[f].keys.length-1].fieldName!=j.item.fieldName)&&this._applyValueFilter(e.rows[this._rowKeysCalcValues[f].keys.length-1].advancedFilter,C[E]),this._colKeysCalcValues[a].keys.indexOf("Grand Total")>=0&&c&&this._rowKeysCalcValues[f].uniqueName?this._advancedFilterInfo.push(this._rowKeysCalcValues[f].uniqueName):0==e.columns.length&&c&&this._rowKeysCalcValues[f].uniqueName&&this._advancedFilterInfo.push(this._rowKeysCalcValues[f].uniqueName),p=this._colKeysCalcValues[a].keys.length>0&&e.columns.length>0&&e.columns[this._colKeysCalcValues[a].keys.length-1].advancedFilter&&e.columns[this._colKeysCalcValues[a].keys.length-1].advancedFilter.length>0&&e.columns[this._colKeysCalcValues[a].keys.length-1].advancedFilter[0].advancedFilterType==ej.Pivot.AdvancedFilterType.ValueFilter?1:null,m=null!=j&&null!=p&&e.columns[this._colKeysCalcValues[a].keys.length-1].fieldName==j.item.fieldName&&this._applyValueFilter(e.columns[this._colKeysCalcValues[a].keys.length-1].advancedFilter,C[E]),this._colKeysCalcValues[a].uniqueName&&"string"===jQuery.type(this._rowKeysCalcValues[f].keys[0])&&this._rowKeysCalcValues[f].keys[0].indexOf("Grand Total")>-1&&m&&this._advancedFilterInfo.push(this._colKeysCalcValues[a].uniqueName))}for(g=this._isPaging&&e.values.length>0?(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length:0,b=_;b<v;b++)C!=undefined&&C.length!=undefined?(h=null,null!=S&&""!=S[b]&&" "!=S[b]&&(h=S[b]),this._gridMatrix[M+f][y*a+b+x-g]={Index:y*a+b+x-g+","+M+f,CSS:this._cellType,Value:C[b],valueText:h,State:0,ColSpan:1,RowSpan:1,Info:"",Span:"None",Expander:0}):this._gridMatrix[M+f][y*a+b+x-g]=0}I&&(w++,T=f+M+1,I=!1)}for(f=0;f<this._rowKeysCalcValues.length;f++)for(a=0;a<this._colKeysCalcValues.length;a++)for(_=this._isPaging&&e.values.length>0&&0==a?(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length:0,v=(v=this._isPaging&&e.values.length>0&&this._colKeysCalcValues.length-a==1&&a>0?e.pagerOptions.categoricalCurrentPage*e.pagerOptions.categoricalPageSize%e.values.length:y)<1||this._isPaging&&e.pagerOptions.categoricalPageSize>=e.values.length*this._colKeysCalcValues.length-(e.pagerOptions.categoricalCurrentPage-1)*e.pagerOptions.categoricalPageSize%e.values.length?y:v,b=_;b<v;b++)e.values[b].isCalculatedField&&null==this._gridMatrix[M+f][y*a+b+x-g].Value&&(this._gridMatrix[M+f][y*a+b+x-g].Value=this._calculatedFieldSummaryValue(b,[],e));return this._gridMatrix}},ej.PivotAnalysis.SortOrder={Ascending:"ascending",Descending:"descending",None:"none"},ej.PivotAnalysis.FilterType={Exclude:"exclude",Include:"include"},ej.PivotAnalysis.SummaryType={Sum:"sum",Average:"average",Count:"count",Min:"min",Max:"max"}}(jQuery,Syncfusion)})},1020:function(e,t){e.exports="ej-pivotgauge{\r\n    height: auto; \r\n    width: auto; \r\n    overflow: auto; \r\n    display: block;\r\n}\r\n.e-pivotgauge{\r\n    position: inherit !important;\r\n}"},1065:function(e,t,a){var l,r,n;
/*!
*  filename: ej.pivotgauge.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
/*!
*  filename: ej.pivotgauge.min.js
*  version : 17.2.0.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(i){r=[a(15),a(4),a(21),a(66),a(1065),a(160),a(1011),a(1009),a(1010)],void 0===(n="function"==typeof(l=i)?l.apply(t,r):l)||(e.exports=n)}(function(){!function(e,t,a){t.widget("ejPivotGauge","ej.PivotGauge",{_rootCSS:"e-pivotgauge",element:null,model:null,validTags:["div","span"],defaults:e.extend({},t.datavisualization.CircularGauge.prototype.defaults,{url:"",analysisMode:"pivot",operationalMode:"clientmode",cssClass:"",rowsCount:0,columnsCount:0,enableTooltip:!1,enableAnimation:!1,isResponsive:!1,enableRTL:!1,enableXHRCredentials:!1,labelFormatSettings:{numberFormat:"default",decimalPlaces:5,prefixText:"",suffixText:""},showHeaderLabel:!0,scales:t.datavisualization.CircularGauge.prototype._defaultScaleValues(),customObject:{},dataSource:{data:null,sourceInfo:"",providerName:"ssas",isFormattedValues:!1,columns:[],cube:"",catalog:"",rows:[],values:[],filters:[]},locale:"en-US",serviceMethodSettings:{initialize:"InitializeGauge"},renderSuccess:null,renderComplete:null,renderFailure:null,beforeServiceInvoke:null,afterServiceInvoke:null,load:null,beforePivotEnginePopulate:null}),dataTypes:{dataSource:{data:"data",columns:"array",rows:"array",values:"array",filters:"array"},serviceMethodSettings:{initialize:"enum"},customObject:"data",scales:"data"},observables:["rowsCount","columnsCount","showHeaderLabel","locale","radius","frameType"],rowsCount:t.util.valueFunction("rowsCount"),columnsCount:t.util.valueFunction("columnsCount"),showHeaderLabel:t.util.valueFunction("showHeaderLabel"),locale:t.util.valueFunction("locale"),radius:t.util.valueFunction("radius"),frameType:t.util.valueFunction("frameType"),getOlapReport:function(){return this._olapReport},setOlapReport:function(e){this._olapReport=e},getJSONRecords:function(){return this._JSONRecords},setJSONRecords:function(e){this._JSONRecords=JSON.parse(e)},_init:function(){this.model=e.extend(t.datavisualization.CircularGauge.prototype.defaults,this.model),this._scalesInitialize(),this._initPrivateProperties(),this._load()},_scalesInitialize:function(){null!=this.model.scales?e.each(this.model.scales,t.proxy(function(a,i){var l=t.datavisualization.CircularGauge.prototype._defaultScaleValues();e.extend(l,i),e.extend(i,l)},this)):this.model.scales=[t.datavisualization.CircularGauge.prototype._defaultScaleValues()],this.model.enableRTL&&e.each(this.model.scales,function(e,t){t.direction="counterClockwise"})},_destroy:function(){this._unWireEvents(),this.element.empty().removeClass("e-pivotgauge"+this.model.cssClass).removeAttr("tabindex"),this._ogaugeWaitingPopup!=a&&this._ogaugeWaitingPopup.destroy(),""==this.element.attr("class")&&this.element.removeAttr("class")},_initPrivateProperties:function(){this._id=this.element.attr("id"),this._olapReport="",this._JSONRecords=null,this._maximum=[],this._maxValue=0,this._pointerValue_0=0,this._pointerValue_1=0,this._currentLayout="",this._defaultArea=0,this._defaultWidth=0,this._gaugeObj={},this._ogaugeWaitingPopup=null,this._ogaugeProgressBar=null,this._ogaugeProgressText=null,this._notationStr=null,this._ogaugeTimer=null},_load:function(){var i,l;this.element.addClass(this.model.cssClass),e("#"+this._id).ejWaitingPopup({showOnInit:!0}),this._ogaugeWaitingPopup=e("#"+this._id).data("ejWaitingPopup"),null!=this.model.load&&this._trigger("load",{action:"initialize",model:this.model,element:this.element,customObject:this.model.customObject}),i=JSON.stringify(this.model.customObject),this.model.dataSource&&"string"==typeof this.model.dataSource.data?(this._trigger("beforePivotEnginePopulate",{gaugeObject:this}),this.model.operationalMode=t.PivotGauge.OperationalMode.ClientMode,t.olap.base.getJSONData({action:"initialLoad"},this.model.dataSource,this)):this.model.dataSource&&"object"==typeof this.model.dataSource.data&&null!=this.model.dataSource.data?(this._trigger("beforePivotEnginePopulate",{gaugeObject:this}),l=t.PivotAnalysis.pivotEnginePopulate(this.model),this._dataModel="Pivot",this.generateJSON({baseObj:this},l.pivotEngine)):null!=this.model.customObject&&this.model.customObject!=a&&this.model.customObject!={}&&(this.model.operationalMode=t.PivotGauge.OperationalMode.ServerMode,null!=this.model.beforeServiceInvoke&&this._trigger("beforeServiceInvoke",{element:this.element,customObject:this.model.customObject}),this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.initialize,JSON.stringify({action:"initializeGauge",customObject:i}),this._renderControlSuccess))},_setFirst:!1,_setModel:function(a){for(var i in a)switch(i){case"OlapReport":case"JsonData":this.setOlapReport(a[i]);break;case"RefreshPivotGauge":this.element.renderControlFromJSON(a[i]);break;case"customObject":this.model.customObject=a[i];break;case"locale":this.locale(t.util.getVal(a[i])),this._load();break;case"rowsCount":this.rowsCount(t.util.getVal(a[i]));break;case"columnsCount":this.columnsCount(t.util.getVal(a[i]));break;case"showHeaderLabel":this.showHeaderLabel(t.util.getVal(a[i]));break;case"radius":this.radius(t.util.getVal(a[i]));break;case"frameType":this.frameType(t.util.getVal(a[i]));break;case"enableRTL":this.model.enableRTL=a[i],this._load();break;case"enableAnimation":this.model.enableAnimation=a[i],this._load();break;case"operationalMode":this.model.operationalMode=a[i];break;case"isResponsive":this.model.isResponsive=a[i],this._load();break;case"labelFormatSettings":this.model.labelFormatSettings=e.extend({},this.model.labelFormatSettings,a[i]),this._load();break;case"showHeaderLabel":this.showHeaderLabel(t.util.getVal(a[i])),this._load();break;case"dataSource":this.model.dataSource=e.extend({},this.model.dataSource,a[i]),this._load()}this._gaugeObj.obj0&&this._renderControlSuccess({PivotRecords:JSON.stringify(this.getJSONRecords()),OlapReport:this.getOlapReport()})},_wireEvents:function(){this.element.find(".e-circulargauge").mouseenter(t.proxy(function(e){this.model.enableTooltip&&this._showTooltip(e)},this)).mouseout(t.proxy(function(){e(this._tooltip).fadeOut("slow")},this)).mousemove(t.proxy(function(e){this.model.enableTooltip&&(this._showTooltip(e),this._hideTooltip())},this))},_getLocalizedLabels:function(e){return t.isNullOrUndefined(t.PivotGauge.Locale[this.locale()])||t.PivotGauge.Locale[this.locale()][e]==a?t.PivotGauge.Locale["en-US"][e]:t.PivotGauge.Locale[this.locale()][e]},_unWireEvents:function(){},_showTooltip:function(i){var l,r,n,o;if("msie"!=t.browserInfo().name||!(t.browserInfo().version<=8)){e(this._tooltip).remove();var s=""==i.target.id.split("_")?i.target.parentNode.id.split("_"):i.target.id.split("_"),d=s[s.length-1],u=this._numberFormatConversion(this._JSONRecords[d].GoalValue||0,this.model.labelFormatSettings.numberFormat,this.model.labelFormatSettings.decimalPlaces),c=this._numberFormatConversion(this._JSONRecords[d].MeasureValue||this._JSONRecords[d].Value,this.model.labelFormatSettings.numberFormat,this.model.labelFormatSettings.decimalPlaces);this._setMaxScaleValue(this._JSONRecords[d].GoalValue||0,this._JSONRecords[d].MeasureValue||this._JSONRecords[d].Value,d);if(this.model.labelFormatSettings.numberFormat==t.PivotGauge.NumberFormat.Notation){for(l=this._JSONRecords[d].GoalValue||0,r=this._JSONRecords[d].MeasureValue||this._JSONRecords[d].Value;l>=10;)l=parseInt(l)/10;for(;r>=10;)r=parseInt(r)/10;u=l.toFixed(1)+u,c=r.toFixed(1)+c}((n=this._JSONRecords[d].MemberName||this._JSONRecords[d].Measure)==a||"undefined"==n)&&(n=this._JSONRecords[d].MeasureCaption),o=this.model.enableRTL||"counterClockwise"==this._gaugeObj["obj"+d].model.scales[0].direction?n.split(" - ").reverse().join(" - ")+"<br/>"+u+" :"+this._getLocalizedLabels("RevenueGoal")+"<br/>"+c+" :"+this._getLocalizedLabels("RevenueValue"):n+"<br/>"+this._getLocalizedLabels("RevenueGoal")+": "+u+"<br/>"+this._getLocalizedLabels("RevenueValue")+": "+c,this._tooltip=t.buildTag("div.e-pivotgauge-tooltip e-js",o),e(this._tooltip).appendTo("body"),e(this._tooltip).addClass(".e-pivotgauge-active"),this._changeTooltipPos(i),this.model.enableRTL||"counterClockwise"==this._gaugeObj["obj"+d].model.scales[0].direction?e(this._tooltip).css("text-align","right"):e(this._tooltip).css("text-align","left")}},_changeTooltipPos:function(t){var a=t.pageX-8,i=t.pageY+8;e(this._tooltip).css({top:i,left:a})},_hideTooltip:function(){window.setTimeout(t.proxy(function(){e(this._tooltip).fadeOut(1500,"linear")},this),3e3)},_renderControlSuccess:function(e){var i,l,r,n,o;try{this.model.analysisMode="Olap"==e.DataModel?t.PivotGauge.AnalysisMode.Olap:t.PivotGauge.AnalysisMode.Pivot;var s="",d="",u="",c="",p=0;if(e[0]!=a&&e.length>0?(this.setJSONRecords(e[0].Value),this.setOlapReport(e[1].Value),null!=e[2]&&e[2]!=a&&(this.model.customObject=e[2].Value)):e.d!=a&&e.d.length>0?(this.setJSONRecords(e.d[0].Value),this.setOlapReport(e.d[1].Value),null!=e.d[2]&&e.d[2]!=a&&(this.model.customObject=e.d[2].Value)):e.PivotRecords&&e.OlapReport&&(this.setJSONRecords(e.PivotRecords),this.setOlapReport(e.OlapReport),null!=e.customObject&&e.customObject!=a&&(this.model.customObject=e.customObject)),null!=this.model.afterServiceInvoke&&this.model.operationalMode==t.PivotGauge.OperationalMode.ServerMode&&this._trigger("afterServiceInvoke",{element:this.element,customObject:this.model.customObject}),null!=(i=this.getJSONRecords())&&i.length>0){if(this.rowsCount()<1&&this.columnsCount()<1){for(this._currentLayout="WrapPanel",l=0;l<i.length;l++)d=t.buildTag("img#statusIndicator_"+l+".kpiiconvalue")[0].outerHTML,u=t.buildTag("img#trendIndicator_"+l+".kpiiconvalue")[0].outerHTML,c+=t.buildTag("li",t.buildTag("div#"+this._id+"_"+l,d+u)[0].outerHTML)[0].outerHTML;s=t.buildTag("ul.e-wrapLayout",c)[0].outerHTML}else{for(this._currentLayout="Table",(this.columnsCount()==a||this.columnsCount()<1)&&this.columnsCount((i.length/this.rowsCount()).toFixed()),(this.rowsCount()==a||this.rowsCount()<1)&&this.rowsCount((i.length/this.columnsCount()).toFixed()),s="<table><tbody>",r=0;r<this.rowsCount();r++){for(s+="<tr>",n=0;n<this.columnsCount();n++)d=t.buildTag("img#statusIndicator_"+p+".kpiiconvalue")[0].outerHTML,u=t.buildTag("img#trendIndicator_"+p+".kpiiconvalue")[0].outerHTML,s+="<td>"+t.buildTag("div#"+this._id+"_"+p,d+u)[0].outerHTML+"</td>",p++;s+="</tr>"}s+="</tbody></table>"}this.element.html(s),o=this,setTimeout(function(){o.renderControlFromJSON(i);var e={element:o.element,customObject:o.model.customObject};o._trigger("renderSuccess",e)},0),this._defaultWidth=this.element.find("canvas").width(),this._defaultArea=this.element.find("table").height()*this.element.find("table").width()}}catch(e){}t.isNullOrUndefined(e.Exception)||t.Pivot._createErrorDialog(e,"Exception",this)},doAjaxPost:function(i,l,r,n,o,s){var d,u,c,p,m=this.model.enableXHRCredentials;r.XMLA==a?(d="application/json; charset=utf-8",u="json",c=e.proxy(n,this)):(d="text/xml",u="xml",r=r.XMLA,c=e.proxy(n,t.olap.base,s),!t.isNullOrUndefined(s)&&s.action),p={type:i,url:l,contentType:d,async:!1,dataType:u,data:r,success:c,xhrFields:{withCredentials:m},complete:t.proxy(function(){var e={element:this.element,customObject:this.model.customObject};this._trigger("renderComplete",e)},this),error:t.proxy(function(e){this._ogaugeWaitingPopup.hide();var t={element:this.element,Message:e,customObject:this.model.customObject};this._trigger("renderFailure",t)},this)},m||delete p.xhrFields,e.ajax(p)},_getCalculatedValue:function(e){var t,a,i,l=e.toString(),r=1;for(t=l.indexOf(".")>-1?l.split(".")[0].length:l.length,a=parseInt(l),i=0;i<t;i++)a>this._maxValue&&(a/=10,r*=10);return r},_findNearestUpperLimit:function(e,t){var a=e.toString(),i=parseInt(a);return i+(t-i%t)},_setMaxScaleValue:function(e,t,a){var i;return t>e?(i=this._getCalculatedValue(t),this._maximum[a]=this._findNearestUpperLimit(t/i,10)):(i=this._getCalculatedValue(e),this._maximum[a]=this._findNearestUpperLimit(e/i*4/3,10)),i},_numberFormatConversion:function(e,a,i){var l,r,n,o,s;switch(a){case t.PivotGauge.NumberFormat.Default:return parseFloat(e).toFixed(i);case t.PivotGauge.NumberFormat.Text:return e.toString();case t.PivotGauge.NumberFormat.Currency:return t.format(parseInt(e),"c",this.model.locale);case t.PivotGauge.NumberFormat.Percentage:return e*=100,parseFloat(e).toFixed(2)+"%";case t.PivotGauge.NumberFormat.Fraction:for(e||(e=this),l=String(e).split(".")[0],e=(e=parseFloat("."+String(e).split(".")[1])).toFixed(4),i="1",r=0;r<String(e).length-2;r++)i+="0";for(e*=i,i=parseInt(i),r=2;r<e+1;r++)e%r==0&&i%r==0&&(e/=r,i/=r,r=2);return 2==e.toString().length&&3==i.toString().length?(e=Math.round(Math.round(e)/10),i=Math.round(Math.round(i)/10)):2==e.toString().length&&2==i.toString().length&&(e=Math.round(e/10),i=Math.round(i/10)),n=function(e,t){for(var a=e,i=t;;){if(!(a%=i))return i;if(!(i%=a))return a}}(e,i),(0==l?"":l+" ")+e/n+"/"+i/n;case t.PivotGauge.NumberFormat.Scientific:return parseFloat(e).toExponential();case t.PivotGauge.NumberFormat.Notation:for(o=0,s=parseInt(e);s>=1;)s=parseInt(s)/10,o++;return this._notationStr=1==o?"da":2==o?"h":3==o?"k":4==o?"k*da":5==o?"k*h":6==o?"M":7==o?"M*da":8==o?"M*h":9==o?"G":10==o?"G*da":11==o?"G*h":12==o?"T":""}},removeImg:function(){this.element.find("img").remove()},renderControlFromJSON:function(i){var l,r,n,o,s,d,u,c,p,m;for(this._maxValue=99,l=0,r=this.radius()/22,"Table"==this._currentLayout&&this.rowsCount()*this.columnsCount()<=i.length?l=this.rowsCount()*this.columnsCount():("WrapPanel"==this._currentLayout||this.rowsCount()*this.columnsCount()>i.length)&&(l=i.length),n=0;n<l;n++){var g,h,f,_,v,b=0,C=0,S=0,y="",O=[],P=[],x=[],N=[],w=[],M=[],T=[],I="",D="";if(null!=i[n].MeasureValue&&i[n].MeasureValue!=a?(C=parseFloat(i[n].MeasureValue)||0,b=parseFloat(i[n].GoalValue)||0,y=this.model.labelFormatSettings.prefixText+" "+i[n].MeasureCaption+(e.trim(i[n].MemberName)?" - ":"")+i[n].MemberName+" "+this.model.labelFormatSettings.suffixText):(C=parseFloat(i[n].Value),b=0,y=i[n].Measure,this.model.scales[0].showIndicators=!1),y=this.model.enableRTL||"counterClockwise"==this.model.scales[0].direction?y.split(" - ").reverse().join(" - "):y,f=b/(h=this._setMaxScaleValue(b,C,n)),_=C/h,this._pointerValue_0=S+_,this._pointerValue_1=f+S,g=S,S+=_,"Traffic Signals"==i[n].StatusGraphic?-1==i[n].StatusValue?I="kpiredroad":0==i[n].StatusValue?I="kpiallcolor":1==i[n].StatusValue&&(I="kpigreenroad"):-1==i[n].StatusValue?I="kpidiamond":0==i[n].StatusValue?I="kpitriangle":1==i[n].StatusValue&&(I="kpicircle"),null!=(v=this.element.find("#statusIndicator_"+[n]).addClass(I))&&v!=a&&(o=e(v).css("background-image"),s={height:15,width:15,type:"image",imageUrl:t.isNullOrUndefined(o)||"none"==o||""==o?"":o.split("(")[1].split(")")[0].replace('"',"").replace('"',""),position:{x:this.radius()-20,y:260},location:{x:this.radius()-20,y:260}}),null!=i[n].TrendGraphic&&i[n].TrendGraphic!=a&&""!=i[n].TrendGraphic&&"standard arrow"==i[n].TrendGraphic.toLowerCase()&&(-1==i[n].TrendValue?D="kpidownarrow":0==i[n].TrendValue?D="kpirightarrow":1==i[n].TrendValue&&(D="kpiuparrow"),v=this.element.find("#trendIndicator_"+[n]).toggleClass(D)),t.isNullOrUndefined(v)||(d=e(v).css("background-image"),u={height:15,width:15,type:"image",imageUrl:t.isNullOrUndefined(d)||"none"==d||""==d?"":d.split("(")[1].split(")")[0].replace('"',"").replace('"',""),position:{x:this.radius(),y:260},location:{x:this.radius(),y:260}}),!t.isNullOrUndefined(this.model.scales[0])){for("fullcircle"==this.frameType()?(this.model.scales[0].startAngle=122,this.model.scales[0].sweepAngle=296):"halfcircle"==this.frameType()&&(this.model.scales[0].startAngle=180,this.model.scales[0].sweepAngle=180),this.model.scales[0].indicators=this.model.scales[0].showIndicators?[s,u]:this.model.scales[0].indicators,t.isNullOrUndefined(this.model.scales[0].pointers[0])||(c=t.datavisualization.CircularGauge.prototype._defaultScaleValues().pointerCap,this.model.scales[0].pointers[0].value=this._pointerValue_0,this.model.scales[0].pointers[0].pointerCap=c,this.model.scales[0].pointers[0].pointerCap.radius=r),t.isNullOrUndefined(this.model.scales[0].pointers[1])||(this.model.scales[0].pointers[1].value=this._pointerValue_1,this.model.scales[0].pointers[1].type=this.model.scales[0].pointers[1].type||"marker",this.model.scales[0].pointers[1].markerType=this.model.scales[0].pointers[1].markerType||"diamond",this.model.scales[0].pointers[1].placement=this.model.scales[0].pointers[1].placement||"center"),t.isNullOrUndefined(this.model.scales[0].ranges[0])||(this.model.scales[0].ranges[0].startValue=g,this.model.scales[0].ranges[0].endValue=f),t.isNullOrUndefined(this.model.scales[0].ranges[1])||(this.model.scales[0].ranges[1].startValue=f,this.model.scales[0].ranges[1].endValue=this._maximum[n]),t.isNullOrUndefined(this.model.scales[0].customLabels[0])||(this.model.scales[0].customLabels[0].value=this.showHeaderLabel()?"X "+h:""),t.isNullOrUndefined(this.model.scales[0].customLabels[1])||(this.model.scales[0].customLabels[1].value=this.showHeaderLabel()?y:""),t.isNullOrUndefined(this.model.scales[0].customLabels[2])||(this.model.scales[0].customLabels[2].value=this.showHeaderLabel()?y:""),m=0;m<this.model.scales[0].ranges.length;m++)O.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues().ranges[0],this.model.scales[0].ranges[m]));for(m=0;m<this.model.scales[0].pointers.length;m++)P.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues().pointers[0],this.model.scales[0].pointers[m]));for(m=0;m<this.model.scales[0].labels.length;m++)this.model.labelFormatSettings.numberFormat!=t.PivotGauge.NumberFormat.Notation||t.isNullOrUndefined(t.datavisualization.CircularGauge.prototype._defaultScaleValues().labels[0])||(this._numberFormatConversion(this._JSONRecords[n].MeasureValue||this._JSONRecords[n].Value,this.model.labelFormatSettings.numberFormat,this.model.labelFormatSettings.decimalPlaces),this.model.scales[0].labels[m].unitText=this._notationStr),x.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues().labels[0],this.model.scales[0].labels[m]));for(m=0;m<this.model.scales[0].labels.length;m++)x.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues().labels[0],this.model.scales[0].labels[m]));for(m=0;m<this.model.scales[0].customLabels.length;m++)N.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues().customLabels[0],this.model.scales[0].customLabels[m]));for(m=0;m<this.model.scales[0].ticks.length;m++)w.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues().ticks[0],this.model.scales[0].ticks[m]));if(this.model.scales[0].indicators)for(m=0;m<this.model.scales[0].indicators.length;m++)M.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues().indicators[0],this.model.scales[0].indicators[m]));for(p={pointerCap:{radius:r||this.model.scales[0].pointerCap.radius,borderWidth:this.model.scales[0].pointerCap.borderWidth,interiorGradient:this.model.scales[0].pointerCap.interiorGradient,borderColor:this.model.scales[0].pointerCap.borderColor,backgroundColor:this.model.scales[0].pointerCap.backgroundColor},border:{color:this.model.scales[0].border.color,width:this.model.scales[0].border.width},majorIntervalValue:this.model.scales[0].majorIntervalValue,minorIntervalValue:this.model.scales[0].minorIntervalValue,minimum:this.model.scales[0].minimum,backgroundColor:this.model.scales[0].backgroundColor,direction:this.model.scales[0].direction,showPointers:this.model.scales[0].showPointers,showTicks:this.model.scales[0].showTicks,showLabels:this.model.scales[0].showLabels,showIndicators:this.model.scales[0].showIndicators,showRanges:this.model.scales[0].showRanges,showScaleBar:this.model.scales[0].showScaleBar,startAngle:this.model.scales[0].startAngle,sweepAngle:this.model.scales[0].sweepAngle,radius:this.model.scales[0].radius,size:this.model.scales[0].size,maximum:this.model.scales[0].maximum||this._maximum[n],pointers:P,ticks:w,labels:x,ranges:O,customLabels:N,indicators:M},m=0;m<this.model.scales.length;m++)0==m?T.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues(),p)):T.push(e.extend({},t.datavisualization.CircularGauge.prototype._defaultScaleValues(),this.model.scales[m]))}e("#"+this._id+"_"+n).ejCircularGauge({backgroundColor:this.model.backgroundColor,frame:{frameType:this.model.frame.frameType,halfCircleFrameStartAngle:this.model.halfCircleFrameStartAngle,halfCircleFrameEndAngle:this.model.halfCircleFrameEndAngle},radius:this.radius(),width:this.model.width,height:this.model.height,interiorGradient:this.model.interiorGradient,readOnly:this.model.readOnly,enableResize:this.model.isResponsive,enableAnimation:!t.isMobile()&&this.model.enableAnimation,animationSpeed:this.model.animationSpeed,theme:this.model.theme,isRadialGradient:this.model.isRadialGradient,load:this.model.load,drawTicks:this.model.drawTicks,drawLabels:this.model.drawLabels,drawPointers:this.model.drawPointers,drawRange:this.model.drawRange,drawCustomLabel:this.model.drawCustomLabel,drawIndicators:this.model.drawIndicators,drawPointerCap:this.model.drawPointerCap,renderComplete:this.model.renderComplete,mouseClick:this.model.mouseClick,mouseClickMove:this.model.mouseClickMove,mouseClickUp:this.model.mouseClickUp,scales:T}),this._gaugeObj["obj"+n]=e("#"+this._id+"_"+n).data("ejCircularGauge")}this.removeImg(),this._wireEvents(),t.isNullOrUndefined(this._ogaugeWaitingPopup)||this._ogaugeWaitingPopup.hide()},refresh:function(){var t,i;if(null==this._gaugeObj||this._gaugeObj==a)for(t=0;t<this._JSONRecords.length;t++)this._gaugeObj["obj"+t]=e("#"+this._id+"_"+t).data("ejCircularGauge"),this._gaugeObj["obj"+t].refresh();else for(i in this._gaugeObj)this._gaugeObj[i].refresh()},getJSONData:function(e,a){t.olap.base.getJSONData({action:e.action},a,e.activeObject)},generateJSON:function(e,t){var a,i,l,r;return this.baseObj=e.baseObj,this.pivotEngine=t,this.kpiInfo=[],this.baseObj._measureDt&&this.baseObj._measureDt.isKpiExist?(r=this.baseObj._measureDt.axis,t&&("colheader"==r?i=(a=t.length)?t[0].length:0:a=(i=t.length)?t[0].length:0),this._getKpiHeadersCollection(a,i,r)):this._getSummaryInfo(),l=JSON.stringify(this.kpiInfo),this._renderControlSuccess({PivotRecords:l,OlapReport:"null"}),this.kpiInfo},_getKpiHeadersCollection:function(t,a,i){this.pivotEngine;var l,r,n,o,s,d,u,c,p,m,g,h,f,_={};for("rowheader"==i?(l=t,r=a,n=a,o=t,s="rowheader",d="colheader"):"colheader"==i&&(l=a,r=t,d="rowheader",s="colheader",n=t,o=a),m=0;m<r;m++){for(g=0;g<l&&(h=null,(h="rowheader"==i?this.pivotEngine[g][m]:this.pivotEngine[m][g]).CSS==s);g++)_=this._fillKpiInfo_kpiAxis(h,s,m,_);f=0,(f=this._isKpiExist(_))?this._copyKpi(parseInt(f),_):e.isEmptyObject(_)||this.kpiInfo.push(_),_={}}for(u={},c=this.kpiInfo,this.kpiInfo=[],m=0;m<o;m++){for(g=0;g<n&&(h=null,"rowheader"==i?(h=this.pivotEngine[m][g],this.pivotEngine[g][m-1]&&(p=this.pivotEngine[g][m-1])):(h=this.pivotEngine[g][m],this.pivotEngine[g-1]&&(p=this.pivotEngine[g-1][m])),h&&h.CSS==d&&""!=h.Value);g++)u=this._fillKpiInfo_kpiAxis(h,d,m,_);f=0,p&&p.CSS==d&&-1==h.CSS.indexOf("summary")&&this._mergeValues(u,c,i,m,g),u={}}},_mergeValues:function(t,a,i,l,r){for(var n={},o=a.length,s={},d=0;d<o;d++)s=a[d],t.MemberRowIndex?s.MemberRowIndex=t.MemberRowIndex:t.MemberColIndex&&(s.MemberColIndex=t.MemberColIndex),s.MemberName?t.MemberName&&(s.MemberName+="-"+t.MemberName):s.MemberName=t.MemberName,"rowheader"==i?(s.ValueIndex>0&&(s.MeasureValue=this.pivotEngine[r][s.ValueIndex].ActualValue,s.ActualMeasureValue=this.pivotEngine[r][s.ValueIndex].Value),s.TrendIndex>0&&(s.TrendValue=this.pivotEngine[r][s.TrendIndex].Value),s.StatusIndex>0&&(s.StatusValue=this.pivotEngine[r][s.StatusIndex].Value),s.GoalIndex):"colheader"==i&&(s.ValueIndex>0&&(s.MeasureValue=this.pivotEngine[s.ValueIndex][l].ActualValue,s.ActualMeasureValue=this.pivotEngine[s.ValueIndex][l].Value),s.TrendIndex>0&&(s.TrendValue=this.pivotEngine[s.TrendIndex][l].Value),s.StatusIndex>0&&(s.StatusValue=this.pivotEngine[s.StatusIndex][l].Value),s.GoalIndex>0&&(s.GoalValue=this.pivotEngine[s.GoalIndex][l].Value,s.ActualGoalValue=this.pivotEngine[s.GoalIndex][l].ActualValue)),s.IsValidKpi=!0,n={ActualMeasureValue:0,GoalCaption:"",Kpi_Name:"",MeasureCaption:"",GoalValue:"",ActualGoalValue:0,MeasureValue:"",MemberName:"",StatusValue:-2,TrendValue:-2,TrendGraphic:null,StatusGraphic:null,ValueIndex:"",TrendIndex:-1,GoalIndex:"",StatusIndex:-1,MemberRowIndex:null,MemberColIndex:null,IsValidKpi:!0},this.kpiInfo.push(e.extend(n,s))},_isKpiExist:function(e){for(var t=0;t<this.kpiInfo.length;t++)if(this.kpiInfo[t].MemberName==e.MemberName&&this.kpiInfo[t].Kpi_Name==e.Kpi_Name)return t+"";return!1},_copyKpi:function(t,a){this.kpiInfo[t]=e.extend(this.kpiInfo[t],a)},_fillKpiInfo_kpiAxis:function(e,t,a,i){var l=e.Info.split("::")[0];if(!e.kpiInfo&&e.CSS==t&&l.indexOf("[Measures]")>-1&&!e.kpiInfo)i.Kpi_Name=this._getKpiName(l),i.MeasureCaption=e.Value,i.ValueIndex=a;else if(e.CSS==t)switch(e.kpiInfo?i.Kpi_Name=e.kpiInfo.Value:(!i.MemberName&&e.Value?i.MemberName=e.Value:e.Value&&(i.MemberName+=" - "+e.Value),"colheader"==t?i.MemberColIndex=a:i.MemberRowIndex=a),e.kpi?e.kpi:"none"){case"status":i.StatusGraphic=e.kpiInfo.Graphic,i.StatusIndex=a;break;case"goal":i.GoalCaption=e.Value,i.GoalIndex=a;break;case"trend":i.TrendGraphic=e.kpiInfo.Graphic,i.TrendIndex=a}return i},_getSummaryInfo:function(){for(var a,l={},r=this,n=e.map(this.pivotEngine,function(a){var n,o,s=!1;if(l.Measure="",l.Value="",l.DoubleValue=0,"msie"==t.browserInfo().name&&t.browserInfo().version<=8){for(o=0;o<a.length;o++)(a[o].CSS.indexOf("summary col")>-1||a[o].CSS.indexOf("summary cgtot calc")>-1)&&(s=!0),(s&&a[o].Info.indexOf("[Measures]")>-1||a[o].CSS.indexOf("summary cgtot calc")>-1)&&(l.Measure=a[o].Value);if(s&&"Pivot"!=r._dataModel)return l.Value=a[o-1].ActualValue,l.DoubleValue=parseFloat(a[o-1].ActualValue),e.extend({},l);if(s&&"Pivot"==r._dataModel)return l.Value=a[o-1].Value.toString(),l.DoubleValue=a[o-1].Value,e.extend({},l)}else{for(n=0,i=0;i<a.length;i++)n=i,(a[i].CSS.indexOf("summary col")>-1||a[i].CSS.indexOf("summary cgtot calc")>-1)&&(s=!0),(s&&a[i].Info.indexOf("[Measures]")>-1||a[i].CSS.indexOf("summary cgtot calc")>-1)&&(l.Measure=a[i].Value);if(s&&"Pivot"!=r._dataModel)return l.Value=a[parseInt(n)].ActualValue,l.DoubleValue=parseFloat(a[parseInt(n)].ActualValue),e.extend({},l);if(s&&"Pivot"==r._dataModel)return l.Value=a[parseInt(n)].Value.toString(),l.DoubleValue=a[parseInt(n)].Value,e.extend({},l)}}),o=0;o<n.length;o++)a={Caption:null,Object:null,CellIndex:-1,Type:-1,Measure:"",ClassName:"",DoubleValue:0,ExpandState:0,HasChildren:!1,Level:-1,RowIndex:3,Range:null,Span:null,Tag:null,UniqueName:"",Value:""},this.kpiInfo.push(e.extend(a,n[o]))},_getKpiName:function(t){var a,i=this.baseObj._kpi;return(a=e(i).find("row:contains('"+t+"')"))?e(a).find("KPI_NAME").text():""}}),t.PivotGauge.Locale=t.PivotGauge.Locale||{},t.PivotGauge.Locale["en-US"]={RevenueGoal:"Revenue Goal",RevenueValue:"Revenue Value",Exception:"Exception"},t.PivotGauge.NumberFormat={Default:"default",Currency:"currency",Percentage:"percentage",Fraction:"fraction",Scientific:"scientific",Text:"text",Notation:"notation"},t.PivotGauge.AxisName={Rows:"rows",Columns:"columns"},t.PivotGauge.OperationalMode={ClientMode:"clientmode",ServerMode:"servermode"},t.PivotGauge.AnalysisMode={Olap:"olap",Pivot:"pivot"}}(jQuery,Syncfusion)})},1342:function(e,t,a){"use strict";var i=this&&this.__decorate||function(e,t,a,i){var l,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(n=(r<3?l(n):r>3?l(t,a,n):l(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),n=a(1007),o=function(){function e(e){this.pivotdataservice=e,this.data=e.pivot_datacube(),this.cube=e.pivot_cube(),this.catalog=e.pivot_catelog(),this.rows=e.pivot_gaugerows(),this.columns=e.pivot_Olapcolumns(),this.values=e.pivot_gaugevalues(),this.scales=e.scales(),this.checkstatus=!0,this.checkedstatus=!0,this.frameType=["Full - Circular","Semi - Circular"],this.value="Full - Circular",this.rowscount=["1","2","3"],this.rowValue="2",this.colValue="3"}return e.prototype.onchange=function(e){var t=$(".e-pivotgauge").data("ejPivotGauge");"Semi - Circular"==e.text?(t.model.frame.frameType="halfcircle",t.model.frame.halfCircleFrameStartAngle=180,t.model.scales[0].startAngle=180,t.model.scales[0].sweepAngle=180,t.model.scales[0].customLabels[2].position.y=210,t._renderControlSuccess({PivotRecords:JSON.stringify(t.getJSONRecords()),OlapReport:t.getOlapReport()})):(t.model.frame.frameType="fullcircle",t.model.scales[0].startAngle=122,t.model.scales[0].sweepAngle=296,t.model.scales[0].customLabels[2].position.y=150,t._renderControlSuccess({PivotRecords:JSON.stringify(t.getJSONRecords()),OlapReport:t.getOlapReport()}))},e.prototype.onHeaderLableChange=function(e){var t=$(".e-pivotgauge").data("ejPivotGauge");e.model.checked()?(t.model.showHeaderLabel=!0,t._renderControlSuccess({PivotRecords:JSON.stringify(t.getJSONRecords()),OlapReport:t.getOlapReport()})):(t.model.showHeaderLabel=!1,t._renderControlSuccess({PivotRecords:JSON.stringify(t.getJSONRecords()),OlapReport:t.getOlapReport()}))},e.prototype.onToolTipChange=function(e){var t=$(".e-pivotgauge").data("ejPivotGauge");e.model.checked()?(t.model.enableTooltip=!0,t._renderControlSuccess({PivotRecords:JSON.stringify(t.getJSONRecords()),OlapReport:t.getOlapReport()})):(t.model.enableTooltip=!1,t.refresh())},e.prototype.onrowchange=function(e){var t=$(".e-pivotgauge").data("ejPivotGauge"),a=$("#columnscount").data("ejDropDownList");"0"==e.text&&0==a.text||(t.model.rowsCount=e.text,t._renderControlSuccess({PivotRecords:JSON.stringify(t.getJSONRecords()),OlapReport:t.getOlapReport()}))},e.prototype.oncolumnchange=function(e){var t=$(".e-pivotgauge").data("ejPivotGauge"),a=$("#rowscount").data("ejDropDownList");"0"==e.text&&0==a.text||(t.model.columnsCount=e.text,t._renderControlSuccess({PivotRecords:JSON.stringify(t.getJSONRecords()),OlapReport:t.getOlapReport()}))},e=i([r.Component({selector:"ej-app",template:a(1841),styles:[a(1020)],providers:[n.PivotDataService]}),l("design:paramtypes",[n.PivotDataService])],e)}();t.LayoutComponent=o},1343:function(e,t,a){"use strict";var i=this&&this.__decorate||function(e,t,a,i){var l,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(n=(r<3?l(n):r>3?l(t,a,n):l(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),n=a(1007),o=function(){function e(e){this.pivotdataservice=e,this.data=e.pivot_datacube(),this.cube=e.pivot_cube(),this.catalog=e.pivot_catelog(),this.rows=e.pivot_gaugerows(),this.columns=e.pivot_gaugecolumns(),this.values=e.pivot_gaugevalues(),this.scales=e.scales()}return e=i([r.Component({selector:"ej-app",template:a(1842),styles:[a(1020)],providers:[n.PivotDataService]}),l("design:paramtypes",[n.PivotDataService])],e)}();t.OlapComponent=o},1344:function(e,t,a){"use strict";var i=this&&this.__decorate||function(e,t,a,i){var l,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(n=(r<3?l(n):r>3?l(t,a,n):l(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),n=a(1007),o=function(){function e(e){this.pivotdataservice=e,this.data=e.pivot_datacube(),this.cube=e.pivot_cube(),this.catalog=e.pivot_catelog(),this.rows=e.pivot_gaugerows(),this.columns=e.pivot_gaugecolumns(),this.values=e.pivot_gaugevalues(),this.scales=e.scales(),this.radValue=7,this.radMinValue=2,this.radMaxValue=15,this.sizeValue=125,this.sizeMinValue=50,this.sizeMaxValue=130,this.borValue=15,this.borMinValue=10,this.borMaxValue=30,this.needleValue=19,this.needleMinValue=10,this.needleMaxValue=20,this.capValue=12,this.capMinValue=9,this.capMaxValue=15,this.needlestyle=["Triangle","Trapezoid","Arrow","Rectangle"],this.markerstyle=["Diamond","Rectangle","Triangle","Ellipse","Pentagon","Circle","Slider","Pointer","Wedge","Trapezoid","RoundedRectangle"],this.value="Triangle",this.markerValue="Diamond"}return e.prototype.onPointerchange=function(e){var t=$(".e-pivotgauge").find(".e-circulargauge");$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setNeedleStyle(0,0,e.text.toLowerCase())})},e.prototype.onMarkerchange=function(e){var t=$(".e-pivotgauge").find(".e-circulargauge");$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setMarkerStyle(0,1,e.text.toLowerCase())})},e.prototype.onchange=function(e){var t=$(".e-pivotgauge").find(".e-circulargauge");"pointerlength"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setPointerLength(0,0,e.value)}):"pointerwidth"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setPointerWidth(0,0,e.value)}):"markerwidth"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setPointerWidth(0,1,e.value)}):"needlelength"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setBackNeedleLength(0,0,e.value)}):"pointercapradius"==e.id&&$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setPointerCapRadius(0,e.value)})},e=i([r.Component({selector:"ej-app",template:a(1843),styles:[a(1020)],providers:[n.PivotDataService]}),l("design:paramtypes",[n.PivotDataService])],e)}();t.PointerComponent=o},1345:function(e,t,a){"use strict";var i=this&&this.__decorate||function(e,t,a,i){var l,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(n=(r<3?l(n):r>3?l(t,a,n):l(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),n=a(1007),o=function(){function e(e){this.pivotdataservice=e,this.data=e.pivot_datacube(),this.cube=e.pivot_cube(),this.catalog=e.pivot_catelog(),this.rows=e.pivot_gaugerows(),this.columns=e.pivot_gaugecolumns(),this.values=e.pivot_gaugevalues(),this.scales=e.scales(),this.radValue=-5,this.radMinValue=-20,this.radMaxValue=0,this.sizeValue=5,this.sizeMinValue=2,this.sizeMaxValue=12}return e.prototype.onchange=function(e){var t=$(".e-pivotgauge").find(".e-circulargauge");"rangesize"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setRangeSize(0,l,e.value)}):"distancefromscale"==e.id&&$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setRangeDistanceFromScale(0,l,e.value)})},e=i([r.Component({selector:"ej-app",template:a(1844),styles:[a(1020)],providers:[n.PivotDataService]}),l("design:paramtypes",[n.PivotDataService])],e)}();t.RangeComponent=o},1346:function(e,t,a){"use strict";var i=this&&this.__decorate||function(e,t,a,i){var l,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(n=(r<3?l(n):r>3?l(t,a,n):l(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),n=a(1007),o=function(){function e(e){this.pivotdataservice=e,this.data=e.pivot_data(),this.rows=e.pivot_rows(),this.columns=e.pivot_columns(),this.values=e.pivot_chartvalues(),this.scales=e.scales()}return e=i([r.Component({selector:"ej-app",template:a(1845),styles:[a(2009)],providers:[n.PivotDataService]}),l("design:paramtypes",[n.PivotDataService])],e)}();t.RelationalComponent=o},1347:function(e,t,a){"use strict";var i=this&&this.__decorate||function(e,t,a,i){var l,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(n=(r<3?l(n):r>3?l(t,a,n):l(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),n=a(1007),o=function(){function e(e){this.pivotdataservice=e,this.data=e.pivot_datacube(),this.cube=e.pivot_cube(),this.catalog=e.pivot_catelog(),this.rows=e.pivot_gaugerows(),this.columns=e.pivot_gaugecolumns(),this.values=e.pivot_gaugevalues(),this.scales=e.scales(),this.radValue=150,this.radMinValue=120,this.radMaxValue=170,this.sizeValue=1,this.sizeMinValue=0,this.sizeMaxValue=10,this.borValue=.5,this.borMinValue=0,this.borMaxValue=5,this.scaledirection=["Clockwise","Counterclockwise"],this.value="Clockwise"}return e.prototype.onchange=function(e){var t=$(".e-pivotgauge").find(".e-circulargauge");"scalesize"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setScaleBarSize(0,e.value)}):"scaleradius"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setScaleRadius(0,e.value)}):"borderwidth"==e.id?$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l=0;l<=2;l++)i.setScaleBorderWidth(0,e.value)}):e.text&&$.each(t,function(t,a){for(var i=$("#"+a.id).data("ejCircularGauge"),l="Clockwise"==e.text?"clockwise":"counterClockwise",r=0;r<=2;r++)i.setScaleDirection(0,l)})},e=i([r.Component({selector:"ej-app",template:a(1846),styles:[a(1020)],providers:[n.PivotDataService]}),l("design:paramtypes",[n.PivotDataService])],e)}();t.ScaleComponent=o},1500:function(e,t,a){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),a(1065);var l=a(12),r=a(5),n=function(e){function t(t,a,i,l){var n=e.call(this,"PivotGauge",t,a,[],i,l)||this;return n.el=t,n.cdRef=a,n._ejIterableDiffers=i,n._ejkeyvaluediffers=l,n.afterServiceInvoke_output=new r.EventEmitter,n.beforeServiceInvoke_output=new r.EventEmitter,n.beforePivotEnginePopulate_output=new r.EventEmitter,n.load_output=new r.EventEmitter,n.renderComplete_output=new r.EventEmitter,n.renderFailure_output=new r.EventEmitter,n.renderSuccess_output=new r.EventEmitter,n}return i(t,e),t.decorators=[{type:r.Component,args:[{selector:"ej-pivotgauge",template:""}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.ChangeDetectorRef},{type:r.IterableDiffers},{type:r.KeyValueDiffers}]},t.propDecorators={columnsCount_input:[{type:r.Input,args:["columnsCount"]}],cssClass_input:[{type:r.Input,args:["cssClass"]}],customObject_input:[{type:r.Input,args:["customObject"]}],dataSource_input:[{type:r.Input,args:["dataSource"]}],enableAnimation_input:[{type:r.Input,args:["enableAnimation"]}],enableTooltip_input:[{type:r.Input,args:["enableTooltip"]}],enableRTL_input:[{type:r.Input,args:["enableRTL"]}],frame_input:[{type:r.Input,args:["frame"]}],isResponsive_input:[{type:r.Input,args:["isResponsive"]}],labelFormatSettings_input:[{type:r.Input,args:["labelFormatSettings"]}],locale_input:[{type:r.Input,args:["locale"]}],rowsCount_input:[{type:r.Input,args:["rowsCount"]}],scales_input:[{type:r.Input,args:["scales"]}],serviceMethodSettings_input:[{type:r.Input,args:["serviceMethodSettings"]}],showHeaderLabel_input:[{type:r.Input,args:["showHeaderLabel"]}],url_input:[{type:r.Input,args:["url"]}],analysisMode_input:[{type:r.Input,args:["analysisMode"]}],operationalMode_input:[{type:r.Input,args:["operationalMode"]}],enableXHRCredentials_input:[{type:r.Input,args:["enableXHRCredentials"]}],dataSource_cube_input:[{type:r.Input,args:["dataSource.cube"]}],dataSource_sourceInfo_input:[{type:r.Input,args:["dataSource.sourceInfo"]}],dataSource_providerName_input:[{type:r.Input,args:["dataSource.providerName"]}],dataSource_data_input:[{type:r.Input,args:["dataSource.data"]}],dataSource_catalog_input:[{type:r.Input,args:["dataSource.catalog"]}],frame_frameType_input:[{type:r.Input,args:["frame.frameType"]}],frame_halfCircleFrameEndAngle_input:[{type:r.Input,args:["frame.halfCircleFrameEndAngle"]}],frame_halfCircleFrameStartAngle_input:[{type:r.Input,args:["frame.halfCircleFrameStartAngle"]}],labelFormatSettings_numberFormat_input:[{type:r.Input,args:["labelFormatSettings.numberFormat"]}],labelFormatSettings_decimalPlaces_input:[{type:r.Input,args:["labelFormatSettings.decimalPlaces"]}],labelFormatSettings_prefixText_input:[{type:r.Input,args:["labelFormatSettings.prefixText"]}],labelFormatSettings_suffixText_input:[{type:r.Input,args:["labelFormatSettings.suffixText"]}],serviceMethodSettings_initialize_input:[{type:r.Input,args:["serviceMethodSettings.initialize"]}],dataSource_columns_input:[{type:r.Input,args:["dataSource.columns"]}],dataSource_rows_input:[{type:r.Input,args:["dataSource.rows"]}],dataSource_values_input:[{type:r.Input,args:["dataSource.values"]}],dataSource_filters_input:[{type:r.Input,args:["dataSource.filters"]}],options:[{type:r.Input,args:["options"]}],afterServiceInvoke_output:[{type:r.Output,args:["afterServiceInvoke"]}],beforeServiceInvoke_output:[{type:r.Output,args:["beforeServiceInvoke"]}],beforePivotEnginePopulate_output:[{type:r.Output,args:["beforePivotEnginePopulate"]}],load_output:[{type:r.Output,args:["load"]}],renderComplete_output:[{type:r.Output,args:["renderComplete"]}],renderFailure_output:[{type:r.Output,args:["renderFailure"]}],renderSuccess_output:[{type:r.Output,args:["renderSuccess"]}]},t}(l.EJComponents);t.PivotGaugeComponent=n,t.EJ_PIVOTGAUGE_COMPONENTS=[n]},1841:function(e,t){e.exports='<ej-pivotgauge [dataSource.data]="data" [dataSource.catalog]="catalog" [dataSource.cube]="cube" [dataSource.rows]="rows"\r\n\t[dataSource.columns]="columns" [dataSource.values]="values" [isResponsive]="true" [rowsCount]="rowValue" [columnsCount]="colValue" [enableTooltip]="true" [scales]="scales">\r\n</ej-pivotgauge>\r\n\r\n<div id="property-window" class="box wide" style="width: 400px">\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Show Tooltip</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-checkbox id="check1" [(checked)]="checkedstatus" (ejchange)="onToolTipChange($event)"></ej-checkbox>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Show Header Labels</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-checkbox id="check2" [(checked)]="checkstatus" (ejchange)="onHeaderLableChange($event)"></ej-checkbox>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Frame Type</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<input style="margin: -25px 0 0 100px;" id="frameType" ej-dropdownlist  [dataSource]="frameType" [(value)]="value" (ejchange)= "onchange($event)"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Row Count</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3">\r\n    \t\t<input style="margin: -25px 0 0 100px;" id="rowscount" ej-dropdownlist  [dataSource]="rowscount" [(value)]="rowValue" (ejchange)= "onrowchange($event)"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Column Count</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3">\r\n    \t\t<input style="margin: -25px 0 0 100px;" id="columnscount" ej-dropdownlist  [dataSource]="rowscount" [(value)]="colValue" (ejchange)= "oncolumnchange($event)"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},1842:function(e,t){e.exports='<ej-pivotgauge style="margin-left: 25%" [dataSource.data]="data" [dataSource.catalog]="catalog" [dataSource.cube]="cube" [dataSource.rows]="rows"\r\n\t[dataSource.columns]="columns" [dataSource.values]="values" [isResponsive]="true" [enableTooltip]="true" [scales]="scales">\r\n</ej-pivotgauge>'},1843:function(e,t){e.exports='<ej-pivotgauge style="margin-left: 25%" [dataSource.data]="data" [dataSource.catalog]="catalog" [dataSource.cube]="cube" [dataSource.rows]="rows"\r\n\t[dataSource.columns]="columns" [dataSource.values]="values" [isResponsive]="true" [enableTooltip]="true" [scales]="scales">\r\n</ej-pivotgauge>\r\n\r\n<div id="property-window" class="box wide" style="width: 400px">\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Pointer Length</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="pointerlength" type="Range" width="100%" [value]="sizeValue" [minValue]="sizeMinValue" [maxValue]="sizeMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Pointer Width</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="pointerwidth" type="Range" width="100%" [value]="radValue" [minValue]="radMinValue" [maxValue]="radMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Marker Width</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="markerwidth" type="Range" width="100%" [value]="borValue" [minValue]="borMinValue" [maxValue]="borMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Needle length</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3">\r\n    \t\t<ej-slider id="needlelength" type="Range" width="100%" [value]="needleValue" [minValue]="needleMinValue" [maxValue]="needleMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Cap Radius</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3">\r\n    \t\t<ej-slider id="pointercapradius" type="Range" width="100%" [value]="capValue" [minValue]="capMinValue" [maxValue]="capMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Needle Style</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3">\r\n    \t\t<input style="margin: -25px 0 0 100px;" id="needlestyle" ej-dropdownlist  [dataSource]="needlestyle" [(value)]="value" (ejchange)= "onPointerchange($event)"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Marker Style</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3">\r\n    \t\t<input style="margin: -25px 0 0 100px;" id="markerstyle" ej-dropdownlist  [dataSource]="markerstyle" [(value)]="markerValue" (ejchange)= "onMarkerchange($event)"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},1844:function(e,t){e.exports='<ej-pivotgauge style="margin-left: 25%" [dataSource.data]="data" [dataSource.catalog]="catalog" [dataSource.cube]="cube" [dataSource.rows]="rows"\r\n\t[dataSource.columns]="columns" [dataSource.values]="values" [isResponsive]="true" [enableTooltip]="true" [scales]="scales">\r\n</ej-pivotgauge>\r\n\r\n<div id="property-window" class="box wide" style="width: 400px">\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Range Size</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="rangesize" type="Range" width="100%" [value]="sizeValue" [minValue]="sizeMinValue" [maxValue]="sizeMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Range Distance</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="distancefromscale" type="Range" width="100%" [value]="radValue" [minValue]="radMinValue" [maxValue]="radMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},1845:function(e,t){e.exports='<ej-pivotgauge style="margin-left: 25%" [dataSource.data]="data" [dataSource.rows]="rows" [dataSource.columns]="columns" [dataSource.values]="values" [isResponsive]="true" [enableTooltip]="true" [scales]="scales" >\r\n</ej-pivotgauge>'},1846:function(e,t){e.exports='<ej-pivotgauge style="margin-left: 25%" [dataSource.data]="data" [dataSource.catalog]="catalog" [dataSource.cube]="cube" [dataSource.rows]="rows"\r\n\t[dataSource.columns]="columns" [dataSource.values]="values" [isResponsive]="true" [enableTooltip]="true" [scales]="scales">\r\n</ej-pivotgauge>\r\n\r\n<div id="property-window" class="box wide" style="width: 400px">\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>ScaleBar Size</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="scalesize" type="Range" width="100%" [value]="sizeValue" [minValue]="sizeMinValue" [maxValue]="sizeMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Scale Radius</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="scaleradius" type="Range" width="100%" [value]="radValue" [minValue]="radMinValue" [maxValue]="radMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Border Width</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3 aligntop">\r\n\t\t\t<ej-slider id="borderwidth" type="Range" width="100%" [value]="borValue" [minValue]="borMinValue" [maxValue]="borMaxValue" width="110px" height="10px" (slide)="onchange($event)" (change)="onchange($event)" ></ej-slider>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" style="margin-top: 30px">\r\n\t\t<div class="col-md-6">\r\n\t\t\t<b>Scale Direction</b>\r\n\t\t</div>\r\n\t\t<div class="col-md-3">\r\n    \t\t<input style="margin: -25px 0 0 100px;" id="scaledirection" ej-dropdownlist  [dataSource]="scaledirection" [(value)]="value" (ejchange)= "onchange($event)"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},2009:function(e,t){e.exports="ej-pivotgauge{\r\n    height: auto; \r\n    width: auto; \r\n    overflow: auto; \r\n    display: block;\r\n}\r\n.e-pivotgauge{\r\n    position: inherit !important;\r\n}"},448:function(e,t,a){"use strict";var i=this&&this.__decorate||function(e,t,a,i){var l,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(n=(r<3?l(n):r>3?l(t,a,n):l(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n};Object.defineProperty(t,"__esModule",{value:!0});var l=a(5),r=a(78),n=a(64),o=a(1500),s=a(413),d=a(1346),u=a(1343),c=a(1347),p=a(1345),m=a(1344),g=a(1342);t.pivotgaugeAppRoutes=[{path:"relational",component:d.RelationalComponent,data:{name:"Relational",location:"app/components/pivotgauge/relational.component"}},{path:"olap",component:u.OlapComponent,data:{name:"OLAP",location:"app/components/pivotgauge/olap.component"}},{path:"scale",component:c.ScaleComponent,data:{name:"Scale Options",location:"app/components/pivotgauge/scale.component"}},{path:"range",component:p.RangeComponent,data:{name:"Range Options",location:"app/components/pivotgauge/range.component"}},{path:"pointer",component:m.PointerComponent,data:{name:"Pointer Options",location:"app/components/pivotgauge/pointer.component"}},{path:"layout",component:g.LayoutComponent,data:{name:"Layout Options",location:"app/components/pivotgauge/layout.component"}},{path:"",redirectTo:"relational"}],t.PivotGaugeRouting=r.RouterModule.forChild(t.pivotgaugeAppRoutes);var h=function(){function e(){}return e=i([l.NgModule({imports:[t.PivotGaugeRouting,n.FormsModule,s.SharedModule],declarations:[d.RelationalComponent,u.OlapComponent,c.ScaleComponent,p.RangeComponent,m.PointerComponent,g.LayoutComponent,o.EJ_PIVOTGAUGE_COMPONENTS]})],e)}();t.PivotGaugeModule=h}});